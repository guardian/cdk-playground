regions:
  - eu-west-1
templates:
  cloudformation:
    type: cloud-formation
    app: cdk-playground
    parameters:
      amiParameter: AMICdkplayground
      amiEncrypted: true
      amiTags:
        Recipe: arm64-bionic-java11-deploy-infrastructure
        AmigoStage: PROD
        BuiltBy: amigo
deployments:
  cloudformation-for-deploy:
    template: cloudformation
    stacks:
      - deploy
    parameters:
      templatePath: CdkPlayground.template.json
  cloudformation-for-deploy-preview:
    template: cloudformation
    stacks:
      - deploy-preview
    parameters:
      templatePath: CdkPlaygroundPreview.template.json
  cdk-playground:
    stacks:
      - deploy
      - deploy-preview
    type: autoscaling
    parameters:
      bucket: deploy-tools-dist
    dependencies:
      - cloudformation-for-deploy
      - cloudformation-for-deploy-preview
