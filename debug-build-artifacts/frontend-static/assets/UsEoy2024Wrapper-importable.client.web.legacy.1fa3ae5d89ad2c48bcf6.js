(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[5645],{96165:(t,e,n)=>{"use strict";n.r(e),n.d(e,{UsEoy2024:()=>D,UsEoy2024Wrapper:()=>_});var r=n(22820),o=n(18247),i=n(57820),c=n.n(i),a=n(50484),u=n(24017),s=n(90760),l=n(50641),d=n(59648),p=n(81477),f=n(71653),g=n(30108),m=n(17382),b=n(67400),x=n(85918),h=n(28118),v=n(66186),y=n(7693),C=n(59864),T=n(41975),O=n(6283),S={container:(0,u.css)("background:#051d32;color:",l.M.neutral[100],";"),grid:(0,u.css)("display:grid;flex-direction:column;position:relative;padding:0 ",d.x[3],"px ",d.x[4],"px ",d.x[3],"px;",p.HT.tablet,"{display:grid;grid-template-columns:350px 350px;padding:0 ",d.x[5],"px ",d.x[4],"px ",d.x[5],"px;}",p.HT.desktop,"{grid-template-columns:462px 462px;column-gap:",d.x[4],"px;}",p.HT.leftCol,"{grid-template-columns:148px 482px 482px;column-gap:0;}",p.HT.wide,"{grid-template-columns:228px 482px 482px;}"),logo:(0,u.css)("display:none;",p.HT.leftCol,"{display:block;grid-column:1;grid-row:1;margin-top:",d.x[2],"px;}"),heading:(0,u.css)(p.HT.tablet,"{grid-column:1;grid-row:1;}h2{margin:",d.x[2],"px 0 ",d.x[4],"px;color:",l.M.neutral[100],";",f.muz," ",p.HT.tablet,"{",f.mAD,";}",p.HT.leftCol,"{",f.D7o,";}}",p.HT.leftCol,"{grid-column:2;border-left:1px solid rgba(255, 255, 255, 0.2);padding-left:",d.x[2],"px;}"),body:(0,u.css)(f.BTt,";strong{",f._UO,";}"),highlight:{name:"geurun",styles:"background-color:inherit;color:inherit"},ticker:(0,u.css)("margin-bottom:",d.x[4],"px;"),choiceCards:(0,u.css)("margin-top:",d.x[6],"px;",p.HT.tablet,"{grid-column:2;grid-row:1;align-self:flex-start;display:flex;justify-content:flex-end;}",p.HT.leftCol,"{grid-column:3;margin-right:",d.x[3],"px;}")},w={container:(0,u.css)("background:#edb438;color:",l.M.neutral[100],";"),grid:(0,u.css)("display:grid;flex-direction:column;position:relative;padding:0 ",d.x[3],"px ",d.x[4],"px ",d.x[3],"px;",p.HT.tablet,"{display:grid;grid-template-columns:350px 350px;padding:0 ",d.x[5],"px ",d.x[4],"px ",d.x[5],"px;}",p.HT.desktop,"{grid-template-columns:462px 462px;column-gap:",d.x[4],"px;}",p.HT.leftCol,"{grid-template-columns:148px 482px 482px;column-gap:0;}",p.HT.wide,"{grid-template-columns:228px 482px 482px;}"),logo:(0,u.css)("display:none;",p.HT.leftCol,"{display:block;grid-column:1;grid-row:1;margin-top:",d.x[2],"px;}"),heading:(0,u.css)(p.HT.tablet,"{grid-column:1;grid-row:1;}h2{margin:",d.x[2],"px 0 ",d.x[4],"px;color:#1A2835;",f.muz," ",p.HT.tablet,"{",f.mAD,";}",p.HT.leftCol,"{",f.D7o,";}}",p.HT.leftCol,"{grid-column:2;border-left:1px solid rgba(0, 0, 0, 0.2);padding-left:",d.x[2],"px;}"),body:(0,u.css)(f.BTt,";strong{",f._UO,";}color:#1A2835;"),highlight:{name:"1glfqsf",styles:"background-color:#016D67;color:#F6F6F6;padding-left:2px"},ticker:(0,u.css)("margin-bottom:",d.x[4],"px;"),choiceCards:(0,u.css)("margin-top:",d.x[6],"px;",p.HT.tablet,"{grid-column:2;grid-row:1;align-self:flex-start;display:flex;justify-content:flex-end;}",p.HT.leftCol,"{grid-column:3;margin-right:",d.x[3],"px;}")},k={currencySymbol:"$",copy:{},tickerStylingSettings:{filledProgressColour:"#64B7C4",progressBarBackgroundColour:"rgba(34, 75, 95, 1)",headlineColour:"#000000",totalColour:"#64B7C4",goalColour:"#FFFFFF"}},j={currencySymbol:"$",copy:{},tickerStylingSettings:{filledProgressColour:"#016D67",progressBarBackgroundColour:"rgba(1, 109, 103, 0.3)",headlineColour:"#000000",totalColour:"#016D67",goalColour:"#1A2835"}},A=function(t){return t?"Last chance to support us this year":"Can you help us beat our goal?"},F=function(t){return t?"Weâ€™re funded by readers, not billionaires - which means we can publish factual journalism with no outside influence.":"With no billionaire owner or shareholders pulling our strings, reader support keeps us fiercely independent."},I=function(t){return t?"Help us keep going in 2025.":"Help us raise as much as we can to power our journalism in 2025."},E=function(){var t=(0,o.A)(c().mark((function t(){var e,n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://support.theguardian.com/ticker/US.json").then((function(t){return t.json()}));case 2:if(e=t.sent,!(0,s.G)(e)){t.next=7;break}if(n=e.total,r=e.goal,"number"!=typeof n||"number"!=typeof r){t.next=7;break}return t.abrupt("return",{total:Math.floor(n),goal:Math.floor(r)});case 7:return t.abrupt("return");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),H={testName:"us-eoy-front-amounts",variantName:"CONTROL",defaultContributionType:"MONTHLY",displayContributionType:["ONE_OFF","MONTHLY","ANNUAL"],amountsCardData:{ONE_OFF:{amounts:[75,125],defaultAmount:75,hideChooseYourAmount:!1},MONTHLY:{amounts:[5,15],defaultAmount:15,hideChooseYourAmount:!1},ANNUAL:{amounts:[60,150],defaultAmount:150,hideChooseYourAmount:!1}}},N={buttonColour:"#FFFFFF",buttonTextColour:"#000000",buttonBorderColour:"#000000",buttonSelectColour:"#E3F6FF",buttonSelectTextColour:"#000000",buttonSelectBorderColour:"#0077B6"},P="USEOY24_LAUNCH_UPDATED_THRASHER",U={ctaUrl:'https://support.theguardian.com/us/contribute?acquisitionData={"source":"GUARDIAN_WEB","componentType":"ACQUISITIONS_THRASHER","componentId":"'.concat(P,'","campaignCode":"USEOY24"}&INTCMP=USEOY24'),ctaText:"Support us"},D=function(t){var e=t.tickerData,n=t.submitTrackingEvent,r=t.date,o=(0,O.m)(H,"US",U,U),i=o.choiceCardSelection,c=o.setChoiceCardSelection,u=o.getCtaText,s=o.getCtaUrl,l=o.currencySymbol,d=r>=new Date("2024-12-20T00:00:01")&&r<new Date("2024-12-31T23:59:59");return(0,a.jsx)("div",{css:d?w.container:S.container,children:(0,a.jsxs)("div",{css:d?w.grid:S.grid,children:[(0,a.jsx)("div",{css:d?w.logo:S.logo,children:(0,a.jsx)(g.D,{textColor:d?"#000000":"#FFFFFF",width:100})}),(0,a.jsxs)("div",{css:d?w.heading:S.heading,children:[(0,a.jsx)("h2",{children:A(d)}),(0,a.jsxs)("div",{css:d?w.body:S.body,children:[(0,a.jsx)("div",{css:d?w.ticker:S.ticker,children:(0,a.jsx)(m.R,{currencySymbol:k.currencySymbol,copy:{},tickerData:e,tickerStylingSettings:d?j.tickerStylingSettings:k.tickerStylingSettings,size:"medium"})}),F(d),(0,a.jsxs)("strong",{children:[" ",(0,a.jsx)("span",{css:d?w.highlight:S.highlight,children:I(d)})]})]})]}),(0,a.jsx)("div",{css:d?w.choiceCards:S.choiceCards,children:(0,a.jsx)(C.T,{setSelectionsCallback:c,selection:i,submitComponentEvent:n,currencySymbol:l,componentId:"thrasher-choice-cards",amountsTest:H,design:N,getCtaText:u,getCtaUrl:s,cssCtaOverides:(0,T.V)({default:{backgroundColour:d?"#016D67":"#C41C1C",textColour:"#FFFFFF"},hover:{backgroundColour:d?"#01544F":"#C41C1C",textColour:"#FFFFFF"}}),onCtaClick:function(){n({component:{componentType:"ACQUISITIONS_THRASHER",id:P},action:"CLICK"})}})})]})})},_=function(){var t=(0,b.useState)(),e=(0,r.A)(t,2),n=e[0],o=e[1],i=(0,b.useState)(!1),c=(0,r.A)(i,2),u=c[0],s=c[1],l=(0,v.T)();(0,b.useEffect)((function(){"Pending"!==l&&s(!1===(0,h.h3)(l))}),[l]),(0,b.useEffect)((function(){E().then(o)}),[]);var d=(0,y.U)().renderingTarget,p=new Date;return(0,a.jsx)(a.Fragment,{children:u&&n&&(0,a.jsx)(D,{tickerData:n,submitTrackingEvent:function(t){(0,x.u_)(t,d)},date:p})})}},21128:(t,e,n)=>{"use strict";n.d(e,{Bl:()=>v,Mf:()=>O,Nl:()=>m,Q7:()=>b,QP:()=>f,R9:()=>h,Tv:()=>p,hy:()=>x,m1:()=>d,qU:()=>y,rx:()=>w,t0:()=>S});var r=n(31880),o=n(62335),i=n(22820),c=n(65656),a=n(42702);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,o.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=function(t,e,n,r,o){var a=function(t,e,n,r,o){var i=[{name:t,variant:e}];return n&&i.push({name:n.testName,variant:n.variantName}),r&&o&&i.push({name:r,variant:o,testType:"AMOUNTS_TEST"}),i}(e.abTestName,e.abTestVariant,e.targetingAbTest,r,o),u=function(t,e){return encodeURIComponent(JSON.stringify({source:t.platformId,componentId:t.campaignCode,componentType:t.componentType,campaignCode:t.campaignCode,abTests:e,referrerPageviewId:t.ophanPageId,referrerUrl:t.referrerUrl,isRemote:!0,labels:t.labels}))}(e,a),s=function(t,e,n){var r={REFPVID:t.ophanPageId||"not_found",INTCMP:t.campaignCode||"",acquisitionData:e,numArticles:n||0};return Object.entries(r).filter((function(t){var e=(0,i.A)(t,2)[1];return!(0,c.b)(e)})).map((function(t){var e=(0,i.A)(t,2),n=e[0],r=e[1];return"".concat(n,"=").concat(r)})).join("&")}(e,u,null!=n?n:0),l=t.includes("?");return"".concat(t).concat(l?"&":"?").concat(s)},d=function(t,e,n){return l(function(t,e){switch(e.product){case"Contribution":case"SupporterPlus":return function(t,e){var n=e.region,r=e.amount,o=e.billingPeriod;return"".concat(t,"/").concat(n,"/contribute/checkout?selected-amount=").concat(r,"&selected-contribution-type=").concat(o)}(t,e);default:return t}}(t,e),n)},p=function(t){return/\bsupport\./.test(t)},f=function(t,e,n,r,o,i){if(!p(t))return t;var c=(0,a.u4)(t,r);return l(c,e,n,o,i)},g=/href="(.*?)"/g,m=function(t,e,n,r){var o=T(e,"body-link");return t.replace(g,(function(t,e){return'href="'.concat(f(e,o,n,r),'"')}))},b=function(t,e,n){var r="selected-contribution-type=".concat(e).concat(void 0!==n?"&selected-amount=".concat(n):""),o=t.includes("?");return"".concat(t).concat(o?"&":"?").concat(r)},x=function(t){var e=t.includes("?");return"".concat(t).concat(e?"&":"?").concat("oneTime")},h=function(t,e,n,r){var o="product=".concat(e,"&ratePlan=").concat(n).concat(void 0!==r?"&contribution=".concat(r):""),i=t.includes("?");return"".concat(t).concat(i?"&":"?").concat(o)},v=function(t){return/\bprofile\./.test(t)},y=function(t,e){return v(t)?function(t,e){var n,r={componentType:e.componentType,componentId:e.campaignCode,abTestName:e.abTestName,abTestVariant:e.abTestVariant,viewId:e.ophanPageId},o={componentEventParams:encodeURIComponent((n=r,Object.keys(n).map((function(t){var e=n[t],r=Array.isArray(e)?e.map((function(t){return encodeURIComponent(t)})).join(","):encodeURIComponent(e);return"".concat(t,"=").concat(r)})).join("&"))),returnUrl:e.referrerUrl},a=Object.entries(o).filter((function(t){var e=(0,i.A)(t,2)[1];return!(0,c.b)(e)})).map((function(t){var e=(0,i.A)(t,2),n=e[0],r=e[1];return"".concat(n,"=").concat(r)})),u=t.includes("?");return"".concat(t).concat(u?"&":"?").concat(a.join("&"))}(t,e):t},C=function(t){return function(e,n){var r=e.abTestName,o=e.abTestVariant,i=e.componentType,c=e.products,a=void 0===c?[]:c,u=e.labels,l=void 0===u?[]:u,d=e.campaignCode,p=r&&o?{name:r,variant:o}:null,f=e.targetingAbTest?{name:e.targetingAbTest.testName,variant:e.targetingAbTest.variantName}:null;return s(s(s({component:{componentType:i,products:a,campaignCode:d,id:n,labels:l}},p?{abTest:p}:{}),f?{targetingAbTest:f}:{}),{},{action:t})}},T=function(t,e){return t.labels?s(s({},t),{},{labels:[].concat((0,r.A)(t.labels),[e])}):s(s({},t),{},{labels:[e]})},O=C("CLICK"),S=C("VIEW"),w=C("INSERT")},28118:(t,e,n)=>{"use strict";n.d(e,{Jj:()=>C,Pp:()=>f,VF:()=>g,Vi:()=>p,Xr:()=>S,_f:()=>k,h3:()=>b,mG:()=>O,mV:()=>y,n8:()=>w,q6:()=>A,tZ:()=>j,yw:()=>T});var r=n(22820),o=n(18247),i=n(57820),c=n.n(i),a=n(64361),u=n(65656),s=n(296),l=n(63854),d=n(67400),p="gu_hide_support_messaging",f="gu_recurring_contributor",g="gu.contributions.contrib-timestamp",m="gu.noRRBanner",b=function(t){var e,n,r=function(t){switch((0,a.R)({name:p})){case"true":return!0;case"false":return!1;default:return!!t&&"Pending"}}(t);return"Pending"===r?"Pending":r||(n=function(){var t=(0,a.R)({name:g});if(t)return(t?parseInt(t,10):0)||void 0}(),!(0,u.b)(n)&&(e=Date.now()-n,Math.floor(e/864e5)<=90))},x=[1,3,7],h=[1,3,5,7],v=function(){return null!==(0,a.R)({name:"gu_article_count_opt_out"})},y=function(){return new Promise((function(t){(0,a.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&t(!0),(0,l.Ym)((function(e){var n=e.usnat,r=e.tcfv2,o=e.aus;if(null!=n?n:o)t(!0);else if(r){var i=x.every((function(t){return r.consents[t]}));i||s.I.local.remove("gu.history.weeklyArticleCount"),t(i)}}))}))},C=function(){var t=(0,o.A)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:return e=t.sent,t.abrupt("return",!e||v());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=(0,o.A)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:return e=t.sent,t.abrupt("return",!e||v());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=(0,d.useState)("Pending"),e=(0,r.A)(t,2),n=e[0],o=e[1];return(0,d.useEffect)((function(){C().then(o).catch((function(){return o(!0)}))}),[]),n},S=function(){return new Promise((function(t){(0,a.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&t(!0),(0,l.Ym)((function(e){var n=e.usnat,r=e.tcfv2,o=e.aus;if(null!=n?n:o)t(!0);else if(r){var i=h.every((function(t){return r.consents[t]}));t(i)}}))}))},w=function(){return!!s.I.local.get(m)},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return s.I.local.set(m,!0,t+12e5)},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!!t&&e-new Date(t).getTime()<36e5},A=function(){var t=(0,a.R)({name:"GU_CO_COMPLETE",shouldMemoize:!0});if(t){var e;try{e=JSON.parse(decodeURIComponent(t))}catch(t){}return e}}},66186:(t,e,n)=>{"use strict";n.d(e,{T:()=>c,w:()=>a});var r=n(22820),o=n(67400),i=n(17950),c=function(){switch(a().kind){case"Pending":return"Pending";case"SignedInWithCookies":case"SignedInWithOkta":return!0;case"SignedOutWithCookies":case"SignedOutWithOkta":return!1}},a=function(){var t=(0,o.useState)({kind:"Pending"}),e=(0,r.A)(t,2),n=e[0],c=e[1];return(0,o.useEffect)((function(){(0,i.kU)((function(t){c((0,i.dx)(t))}),(function(){return c((0,i.Hn)())})).catch((function(t){console.error(t)}))}),[]),n}},88528:(t,e,n)=>{"use strict";n.d(e,{E:()=>a});var r=n(22820),o=n(44165),i=n.n(o),c=n(67400),a=function(t){var e,n=(0,c.useState)(!1),o=(0,r.A)(n,2),a=o[0],u=o[1],s=(0,c.useState)(null!==(e=t.node)&&void 0!==e?e:null),l=(0,r.A)(s,2),d=l[0],p=l[1],f=(0,c.useRef)(null),g=(0,c.useCallback)((function(e){var n=(0,r.A)(e,1)[0];n&&(n.isIntersecting?u(!0):t.repeat&&u(!1))}),[t.repeat]),m=t.debounce?i()(g,200):g;return(0,c.useEffect)((function(){t.node&&p(t.node)}),[t.node]),(0,c.useEffect)((function(){if(d&&"IntersectionObserver"in window)return f.current=new window.IntersectionObserver(m,t),f.current.observe(d),function(){var t;return null===(t=f.current)||void 0===t?void 0:t.disconnect()}}),[d,t,m]),(0,c.useEffect)((function(){var e;!t.repeat&&a&&(null===(e=f.current)||void 0===e||e.disconnect())}),[a,t.repeat]),[a,p]}},44165:(t,e,n)=>{var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,a=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,l=u||s||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,g=function(){return l.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==d.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=i.test(t);return n||c.test(t)?a(t.slice(2),n?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,n){var r,o,i,c,a,u,s=0,l=!1,d=!1,x=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,i=o;return r=o=void 0,s=e,c=t.apply(i,n)}function v(t){var n=t-u;return void 0===u||n>=e||n<0||d&&t-s>=i}function y(){var t=g();if(v(t))return C(t);a=setTimeout(y,function(t){var n=e-(t-u);return d?f(n,i-(t-s)):n}(t))}function C(t){return a=void 0,x&&r?h(t):(r=o=void 0,c)}function T(){var t=g(),n=v(t);if(r=arguments,o=this,u=t,n){if(void 0===a)return function(t){return s=t,a=setTimeout(y,e),l?h(t):c}(u);if(d)return a=setTimeout(y,e),h(u)}return void 0===a&&(a=setTimeout(y,e)),c}return e=b(e)||0,m(n)&&(l=!!n.leading,i=(d="maxWait"in n)?p(b(n.maxWait)||0,e):i,x="trailing"in n?!!n.trailing:x),T.cancel=function(){void 0!==a&&clearTimeout(a),s=0,r=u=o=a=void 0},T.flush=function(){return void 0===a?c:C(g())},T}}}]);
//# sourceMappingURL=UsEoy2024Wrapper-importable.client.web.legacy.1fa3ae5d89ad2c48bcf6.js.map