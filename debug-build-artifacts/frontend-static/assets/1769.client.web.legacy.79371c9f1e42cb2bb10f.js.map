{"version":3,"file":"1769.client.web.legacy.79371c9f1e42cb2bb10f.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/static/icons/camera.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/video-icon.svg","webpack://@guardian/dotcom-rendering/./src/components/Caption.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/PlayIcon.tsx","webpack://@guardian/dotcom-rendering/./src/components/MaintainAspectRatio.tsx","webpack://@guardian/dotcom-rendering/./src/components/MediaDuration.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/loadYouTubeApi.ts","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/eventEmitters.ts","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtomPicture.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtomOverlay.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtomPlaceholder.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubePlayer.ts","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtomPlayer.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtomSticky.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtom.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeAtom/YoutubeAtomExpiredOverlay.tsx","webpack://@guardian/dotcom-rendering/./src/components/YoutubeBlockComponent.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/thrift/protocols.ts","webpack://@guardian/dotcom-rendering/./src/lib/thrift/nativeConnection.ts","webpack://@guardian/dotcom-rendering/./src/lib/bridgetApi.ts","webpack://@guardian/dotcom-rendering/./src/lib/getSourceImageUrl_temp_fix.ts","webpack://@guardian/dotcom-rendering/./src/lib/useAB.ts","webpack://@guardian/dotcom-rendering/./src/lib/useAdTargeting.ts","webpack://@guardian/dotcom-rendering/./src/lib/useIsInView.ts"],"sourcesContent":["var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgCamera = function SvgCamera(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 13,\n    viewBox: \"0 0 18 13\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z\"\n  })));\n};\nexport default SvgCamera;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgVideoIcon = function SvgVideoIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 36,\n    height: 23,\n    viewBox: \"0 0 36 23\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.2 0l-3.2 3.3v16.4l3.3 3.3h18.7v-23h-18.8m30.4 1l-8.6 8v5l8.6 8h2.4v-21h-2.4\"\n  })));\n};\nexport default SvgVideoIcon;","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { from, space, textSans12, textSans14, until, } from '@guardian/source/foundations';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial, } from '../lib/articleFormat';\nimport { palette } from '../palette';\nimport CameraSvg from '../static/icons/camera.svg';\nimport VideoSvg from '../static/icons/video-icon.svg';\nconst captionStyle = css `\n\t${textSans14};\n\tline-height: 135%;\n\tpadding-top: 6px;\n\toverflow-wrap: break-word;\n\tcolor: ${palette('--caption-text')};\n`;\nconst bottomMarginStyles = css `\n\tmargin-bottom: 6px;\n`;\nconst overlaidBottomPadding = (format) => {\n    if (format.display === ArticleDisplay.Showcase &&\n        format.design === ArticleDesign.Review) {\n        return css `\n\t\t\tpadding-bottom: 2.5rem;\n\t\t`;\n    }\n    return css `\n\t\tpadding-bottom: 0.375rem;\n\t`;\n};\nconst overlaidStyles = (format) => css `\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(18, 18, 18, 0.8);\n\n\tspan {\n\t\tcolor: ${palette('--caption-overlay-text')};\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\tsvg {\n\t\tfill: currentcolor;\n\t}\n\tcolor: ${palette('--caption-overlay-text')};\n\tfont-size: 0.75rem;\n\tline-height: 1rem;\n\tpadding-top: 0.375rem;\n\tpadding-right: 2.5rem;\n\tpadding-left: 0.75rem;\n\t${overlaidBottomPadding(format)};\n\n\tflex-grow: 1;\n\tmin-height: 2.25rem;\n`;\nconst limitedWidth = css `\n\t${from.leftCol} {\n\t\twidth: 140px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 220px;\n\t}\n`;\nconst veryLimitedWidth = css `\n\t${from.leftCol} {\n\t\twidth: 120px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 184px;\n\t}\n`;\nconst captionPadding = css `\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`;\nconst tabletCaptionPadding = css `\n\t${until.desktop} {\n\t\t${captionPadding}\n\t}\n`;\nconst bigLeftMargin = css `\n\twidth: inherit;\n\tmargin-left: ${space[9]}px;\n\t${until.wide} {\n\t\tmargin-left: 20px;\n\t\tmargin-right: 20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t}\n`;\nconst hideIconBelowLeftCol = css `\n\t${until.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\nconst pictureRatio = (13 / 18) * 100;\nconst videoRatio = (23 / 36) * 100;\nconst iconStyle = css `\n\tfill: ${palette('--caption-text')};\n\tmargin-right: ${space[1]}px;\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 1em;\n\tvertical-align: baseline;\n\t::before {\n\t\tcontent: ' ';\n\t\tdisplay: block;\n\t\tpadding-top: ${pictureRatio}%;\n\t}\n\tsvg {\n\t\ttop: 0px;\n\t\tright: 0px;\n\t\tbottom: 0px;\n\t\tleft: 0px;\n\t\twidth: 100%;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t}\n`;\nconst videoIconStyle = css `\n\twidth: 1.1em;\n\t::before {\n\t\tpadding-top: ${videoRatio}%;\n\t}\n`;\nconst captionLink = css `\n\ta {\n\t\tcolor: ${palette('--caption-link')};\n\t\ttext-decoration: none;\n\t}\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\nconst CameraIcon = ({ format }) => {\n    return (_jsx(\"span\", { css: [\n            iconStyle,\n            format.display === ArticleDisplay.Immersive &&\n                hideIconBelowLeftCol,\n        ], children: _jsx(CameraSvg, {}) }));\n};\nconst VideoIcon = ({ format }) => {\n    return (_jsx(\"span\", { css: [\n            iconStyle,\n            format.display === ArticleDisplay.Immersive &&\n                hideIconBelowLeftCol,\n            videoIconStyle,\n        ], children: _jsx(VideoSvg, {}) }));\n};\nexport const Caption = ({ captionText, format, padCaption = false, credit, displayCredit = true, shouldLimitWidth = false, isOverlaid, isLeftCol, mediaType = 'Gallery', isMainMedia = false, }) => {\n    // Sometimes captions come thorough as a single blank space, so we trim here to ignore those\n    const noCaption = !captionText?.trim();\n    const noCredit = !credit;\n    const hideCredit = !displayCredit;\n    if (noCaption && (noCredit || hideCredit))\n        return null;\n    const isBlog = format.design === ArticleDesign.LiveBlog ||\n        format.design === ArticleDesign.DeadBlog;\n    const defaultCaption = (_jsxs(\"figcaption\", { css: [\n            captionStyle,\n            shouldLimitWidth && limitedWidth,\n            isOverlaid ? overlaidStyles(format) : bottomMarginStyles,\n            isMainMedia &&\n                (isBlog || mediaType === 'Video') &&\n                tabletCaptionPadding,\n            padCaption && captionPadding,\n        ], \"data-spacefinder-role\": \"inline\", children: [mediaType === 'Video' ? (_jsx(VideoIcon, { format: format })) : (_jsx(CameraIcon, { format: format })), !!captionText && (_jsx(\"span\", { css: captionLink, dangerouslySetInnerHTML: {\n                    __html: captionText || '',\n                } }, \"caption\")), !!credit && displayCredit && ` ${credit}`] }));\n    switch (format.design) {\n        case ArticleDesign.PhotoEssay:\n            if (format.theme === ArticleSpecial.Labs && isLeftCol) {\n                return defaultCaption;\n            }\n            return (_jsxs(\"figcaption\", { css: [\n                    css `\n\t\t\t\t\t\t\t${textSans12};\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Typography preset styles should not be overridden.\n\t\t\t\t\t\t\t * This has been done because the styles do not directly map to the new presets.\n\t\t\t\t\t\t\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tline-height: 1.15;\n\t\t\t\t\t\t\tcolor: ${isMainMedia\n                        ? palette('--caption-photo-essay-main-media-text')\n                        : palette('--caption-text')};\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\tli:not(:first-child) {\n\t\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tli {\n\t\t\t\t\t\t\t\tpadding-top: ${space[2]}px;\n\t\t\t\t\t\t\t\tborder-top: 1px solid\n\t\t\t\t\t\t\t\t\t${isMainMedia\n                        ? palette('--caption-photo-essay-main-media-text')\n                        : palette('--caption-text')};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n                    bottomMarginStyles,\n                    padCaption && captionPadding,\n                    shouldLimitWidth && veryLimitedWidth,\n                    shouldLimitWidth && bigLeftMargin,\n                ], \"data-spacefinder-role\": \"inline\", children: [!!captionText && (_jsx(\"span\", { css: captionLink, dangerouslySetInnerHTML: {\n                            __html: captionText || '',\n                        } }, \"caption\")), !!credit && displayCredit && ` ${credit}`] }));\n        default:\n            return defaultCaption;\n    }\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { from, palette } from '@guardian/source/foundations';\nimport { SvgMediaControlsPlay } from '@guardian/source/react-components';\nconst sizes = {\n    small: { button: 40, icon: 32 },\n    large: { button: 80, icon: 72 },\n};\nconst iconStyles = (size, sizeOnMobile) => css `\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: rgba(18, 18, 18, 0.6);\n\tborder-radius: 50%;\n\twidth: ${sizes[sizeOnMobile].button}px;\n\theight: ${sizes[sizeOnMobile].button}px;\n\t${from.tablet} {\n\t\twidth: ${sizes[size].button}px;\n\t\theight: ${sizes[size].button}px;\n\t}\n\n\tsvg {\n\t\ttransform: translateX(1px);\n\t\twidth: ${sizes[sizeOnMobile].icon}px;\n\t\theight: ${sizes[sizeOnMobile].icon}px;\n\t\t${from.tablet} {\n\t\t\twidth: ${sizes[size].icon}px;\n\t\t\theight: ${sizes[size].icon}px;\n\t\t}\n\t}\n`;\nconst theme = {\n    fill: palette.neutral[100],\n};\nconst getIconSizeOnDesktop = (imageSize) => {\n    switch (imageSize) {\n        case 'jumbo':\n        case 'large':\n        case 'carousel':\n        case 'medium':\n        case 'feature':\n        case 'feature-large':\n            return 'large';\n        case 'small':\n            return 'small';\n    }\n};\nconst getIconSizeOnMobile = (imagePositionOnMobile) => imagePositionOnMobile === 'left' || imagePositionOnMobile === 'right'\n    ? 'small'\n    : 'large';\nexport const PlayIcon = ({ imageSize, imagePositionOnMobile, }) => {\n    return (_jsx(\"div\", { className: \"play-icon\", css: [\n            iconStyles(getIconSizeOnDesktop(imageSize), getIconSizeOnMobile(imagePositionOnMobile)),\n        ], children: _jsx(SvgMediaControlsPlay, { theme: theme }) }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nexport const MaintainAspectRatio = ({ height, width, aspectRatio, children, }) => {\n    /* https://css-tricks.com/aspect-ratio-boxes/ */\n    const paddingBottom = aspectRatio === '5:4'\n        ? `${(4 / 5) * 100}%`\n        : `${(height / width) * 100}%`;\n    return (_jsx(\"div\", { css: css `\n\t\t\t\t/* position relative to contain the absolutely positioned iframe plus any Overlay image */\n\t\t\t\tposition: relative;\n\t\t\t\tpadding-bottom: ${paddingBottom};\n\t\t\t\t& > iframe,\n\t\t\t\t& > video {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t}\n\t\t\t`, children: children }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { space, textSansBold12 } from '@guardian/source/foundations';\nimport { Hide } from '@guardian/source/react-components';\nconst durationStyles = css `\n\tposition: absolute;\n\ttop: ${space[2]}px;\n\tright: ${space[2]}px;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\twidth: fit-content;\n\tpadding: ${space[1]}px ${space[3]}px;\n\tborder-radius: ${space[3]}px;\n\tcolor: white;\n\t${textSansBold12};\n`;\nexport function secondsToDuration(secs) {\n    if (typeof secs === `undefined` || secs === 0) {\n        return ``;\n    }\n    const seconds = Number(secs);\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor((seconds % 3600) / 60);\n    const s = Math.floor((seconds % 3600) % 60);\n    const duration = [];\n    if (h > 0) {\n        duration.push(h);\n    }\n    if (h === 0 && m > 0 && s === 0)\n        duration.push(`${m}:00`); // e.g 6:00\n    else if (h > 0 && m < 10)\n        duration.push(`0${m}`); // e.g 1:01:11\n    else\n        duration.push(m); // supports 0:59\n    if (s > 0) {\n        if (s < 10)\n            duration.push(`0${s}`);\n        else\n            duration.push(s);\n    }\n    return duration.join(':');\n}\nexport const MediaDuration = ({ mediaDuration, imagePositionOnDesktop, imagePositionOnMobile, }) => {\n    if (imagePositionOnDesktop === 'left') {\n        return null;\n    }\n    if (imagePositionOnMobile === 'left') {\n        return (_jsx(Hide, { until: \"tablet\", children: _jsx(\"div\", { css: durationStyles, children: _jsx(\"p\", { children: secondsToDuration(mediaDuration) }) }) }));\n    }\n    return (_jsx(\"div\", { css: durationStyles, children: _jsx(\"p\", { children: secondsToDuration(mediaDuration) }) }));\n};\n","import { loadScript, log } from '@guardian/libs';\nlet scriptsPromise;\nlet youTubeAPIPromise;\nconst loadScriptAndCatch = (src) => loadScript(src).catch((e) => {\n    log('dotcom', `loadYouTubeAPI: failed to load script ${src}`, e);\n});\nconst loadScripts = (enableIma = false) => {\n    /**\n     * loadScripts can be called multiple times on pages with more than one video\n     * Only attempt to load scripts if this is the first call and otherwise return the same promise\n     */\n    if (scriptsPromise) {\n        return scriptsPromise;\n    }\n    if (enableIma) {\n        log('dotcom', 'loadYouTubeAPI: loading YouTube & IMA script');\n        scriptsPromise = Promise.all([\n            loadScriptAndCatch('https://www.youtube.com/iframe_api?ima=1'),\n            loadScriptAndCatch('https://imasdk.googleapis.com/js/sdkloader/ima3.js'),\n        ]);\n    }\n    else {\n        log('dotcom', 'loadYouTubeAPI: loading YouTube script');\n        scriptsPromise = Promise.all([\n            loadScriptAndCatch('https://www.youtube.com/iframe_api'),\n        ]);\n    }\n    return scriptsPromise;\n};\n/**\n * The YouTube IFrame API will call `window.onYouTubeIframeAPIReady` when it is ready\n */\nconst getYouTubeAPIPromise = () => {\n    /**\n     * youtubeAPIReady can be called multiple times on pages with more than one video\n     * Only set window.onYouTubeIframeAPIReady if this is the first call and otherwise return the same promise\n     */\n    if (youTubeAPIPromise) {\n        return youTubeAPIPromise;\n    }\n    youTubeAPIPromise = new Promise((resolve) => {\n        window.onYouTubeIframeAPIReady = () => {\n            log('dotcom', 'loadYouTubeAPI: resolving YouTube API promise');\n            resolve(window.YT);\n        };\n    });\n    return youTubeAPIPromise;\n};\nconst loadYouTubeAPI = (enableIma = false) => {\n    /* If another part of the code has already loaded youtube api, return early. */\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- @types/youtube insists that window.YT cannot be undefined. This is very much untrue.\n    if (window.YT?.Player instanceof Function) {\n        log('dotcom', 'loadYouTubeAPI: returning existing window.YT');\n        return Promise.resolve(window.YT);\n    }\n    /* Create youtubeAPI promise before loading scripts so that\n     * window.onYouTubeIframeAPIReady is guaranteed to be defined\n     * when the YouYube script laods and calls it.\n     */\n    const youtubeAPI = getYouTubeAPIPromise();\n    return loadScripts(enableIma).then(() => youtubeAPI);\n};\nexport { loadYouTubeAPI };\n","import { MediaEvent } from '@guardian/bridget';\nimport { isUndefined, log } from '@guardian/libs';\nimport { getOphan } from '../../client/ophan/ophan';\nimport { getVideoClient } from '../../lib/bridgetApi';\nconst getAppsMediaEvent = (trackingEvent) => {\n    switch (trackingEvent) {\n        case 'cued':\n            return MediaEvent.ready;\n        case 'play':\n            return MediaEvent.play;\n        case '25':\n            return MediaEvent.percent25;\n        case '50':\n            return MediaEvent.percent50;\n        case '75':\n            return MediaEvent.percent75;\n        case 'end':\n            return MediaEvent.end;\n        default:\n            return undefined;\n    }\n};\nconst ophanTrackerWeb = (id) => {\n    return (trackingEvent) => {\n        void getOphan('Web').then((ophan) => {\n            const event = {\n                video: {\n                    id: `gu-video-youtube-${id}`,\n                    eventType: `video:content:${trackingEvent}`,\n                },\n            };\n            log('dotcom', {\n                from: 'YoutubeAtom event emitter web',\n                id,\n                event,\n            });\n            ophan.record(event);\n        });\n    };\n};\nconst ophanTrackerApps = (id) => {\n    return (trackingEvent) => {\n        const appsMediaEvent = getAppsMediaEvent(trackingEvent);\n        if (!isUndefined(appsMediaEvent)) {\n            const event = {\n                videoId: id,\n                event: appsMediaEvent,\n            };\n            log('dotcom', {\n                from: 'YoutubeAtom event emitter apps',\n                id,\n                event,\n            });\n            void getVideoClient().sendVideoEvent(event);\n        }\n    };\n};\nexport { ophanTrackerApps, ophanTrackerWeb };\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { breakpoints } from '@guardian/source/foundations';\nimport { getSourceImageUrl } from '../../lib/getSourceImageUrl_temp_fix';\nimport { generateSources, getFallbackSource, Sources } from '../Picture';\nexport const YoutubeAtomPicture = ({ image, alt, height, width, aspectRatio, }) => {\n    const sources = generateSources(getSourceImageUrl(image), [\n        { breakpoint: breakpoints.mobile, width: 465 },\n        { breakpoint: breakpoints.mobileLandscape, width: 645 },\n        { breakpoint: breakpoints.phablet, width: 620 },\n        { breakpoint: breakpoints.tablet, width: 700 },\n        { breakpoint: breakpoints.desktop, width: 620 },\n    ], aspectRatio);\n    const fallbackSource = getFallbackSource(sources);\n    return (_jsxs(\"picture\", { itemProp: \"contentUrl\", children: [_jsx(Sources, { sources: sources }), _jsx(\"img\", { alt: alt, src: fallbackSource.lowResUrl, height: height, width: width, \n                // https://stackoverflow.com/questions/10844205/html-5-strange-img-always-adds-3px-margin-at-bottom\n                // why did we add the css `vertical-align: middle;` to the img tag\n                css: css `\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t` })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport { from, headlineMedium17, headlineMedium20, palette as sourcePalette, space, textSansBold12, } from '@guardian/source/foundations';\nimport { palette } from '../../palette';\nimport { PlayIcon } from '../Card/components/PlayIcon';\nimport { FormatBoundary } from '../FormatBoundary';\nimport { Kicker } from '../Kicker';\nimport { secondsToDuration } from '../MediaDuration';\nimport { YoutubeAtomPicture } from './YoutubeAtomPicture';\nconst overlayStyles = css `\n\tbackground-size: cover;\n\tbackground-position: 49% 49%;\n\tbackground-repeat: no-repeat;\n\ttext-align: center;\n\theight: 100%;\n\twidth: 100%;\n\tposition: absolute;\n\tmax-height: 100vh;\n\tcursor: pointer;\n\tborder: 0;\n\tpadding: 0;\n\n\timg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.play-icon {\n\t\ttransition: transform 300ms;\n\t}\n\n\t/* We scale the play icon on hover and focus to indicate it's playable content. */\n\t:focus .play-icon,\n\t:hover .play-icon {\n\t\ttransform: translate(-50%, -50%) scale(1.15);\n\t}\n`;\nconst pillStyles = css `\n\tposition: absolute;\n\ttop: ${space[2]}px;\n\tright: ${space[2]}px;\n\t${textSansBold12};\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tcolor: ${sourcePalette.neutral[100]};\n\tborder-radius: ${space[3]}px;\n\tpadding: 0 6px;\n\tdisplay: inline-flex;\n`;\nconst pillItemStyles = css `\n\t/* Target all but the first element, and add a border */\n\t:nth-of-type(n + 2) {\n\t\tborder-left: 1px solid rgba(255, 255, 255, 0.5);\n\t}\n`;\nconst pillTextStyles = css `\n\tline-height: ${space[4]}px;\n\tpadding: ${space[1]}px 6px;\n`;\nconst liveStyles = css `\n\t::before {\n\t\tcontent: '';\n\t\twidth: 9px;\n\t\theight: 9px;\n\t\tborder-radius: 50%;\n\t\tbackground-color: ${sourcePalette.news[500]};\n\t\tdisplay: inline-block;\n\t\tposition: relative;\n\t\tmargin-right: 0.1875rem;\n\t}\n`;\nconst textOverlayStyles = css `\n\tposition: absolute;\n\tbackground: linear-gradient(\n\t\t180deg,\n\t\trgba(0, 0, 0, 0) 0%,\n\t\trgba(0, 0, 0, 0.7) 25%\n\t);\n\twidth: 100%;\n\tbottom: 0;\n\tcolor: ${sourcePalette.neutral[100]};\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\ttext-align: start;\n\tpadding: ${space[2]}px;\n\tpadding-top: ${space[9]}px;\n`;\nconst titleStyles = css `\n\t${headlineMedium17};\n\t${from.tablet} {\n\t\t${headlineMedium20};\n\t}\n`;\nconst capitalise = (str) => str.charAt(0).toUpperCase() + str.slice(1);\nexport const YoutubeAtomOverlay = ({ uniqueId, overrideImage, posterImage, height, width, alt, duration, title, onClick, videoCategory, kicker, format, showTextOverlay, imageSize, imagePositionOnMobile, aspectRatio, }) => {\n    const id = `youtube-overlay-${uniqueId}`;\n    const hasDuration = !isUndefined(duration) && duration > 0;\n    const showPill = !!videoCategory || hasDuration;\n    const isLive = videoCategory === 'live';\n    const image = overrideImage ?? posterImage;\n    const hidePillOnMobile = imagePositionOnMobile === 'right' || imagePositionOnMobile === 'left';\n    return (_jsx(FormatBoundary, { format: format, children: _jsxs(\"button\", { \"data-testid\": id, onClick: onClick, css: overlayStyles, \"aria-label\": title ? `Play video: ${title}` : `Play video`, type: \"button\", children: [!!image && (_jsx(YoutubeAtomPicture, { image: image, alt: alt, height: height, width: width, aspectRatio: aspectRatio })), showPill && (_jsxs(\"div\", { css: hidePillOnMobile\n                        ? css `\n\t\t\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t\t  `\n                        : pillStyles, children: [!!videoCategory && (_jsx(\"div\", { css: pillItemStyles, children: _jsx(\"div\", { css: [pillTextStyles, isLive && liveStyles], children: capitalise(videoCategory) }) })), !!hasDuration && (_jsx(\"div\", { css: pillItemStyles, children: _jsx(\"div\", { css: pillTextStyles, children: secondsToDuration(duration) }) }))] })), _jsx(PlayIcon, { imageSize: imageSize, imagePositionOnMobile: imagePositionOnMobile }), showTextOverlay && (_jsxs(\"div\", { css: textOverlayStyles, children: [!!kicker && (_jsx(Kicker, { text: kicker, color: palette('--youtube-overlay-kicker'), fontWeight: \"bold\" })), _jsx(\"div\", { css: titleStyles, children: title })] }))] }) }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\n/**\n * The placeholder component is used to render a black rectangle\n * until the player is ready\n *\n * Otherwise the container may visibly flash white between the\n * overlay image being removed and the player becoming ready\n */\nexport const YoutubeAtomPlaceholder = ({ uniqueId, }) => {\n    const id = `youtube-placeholder-${uniqueId}`;\n    return (_jsx(\"div\", { \"data-name\": id, \"data-testid\": id, css: [\n            css `\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\tbackground-color: black;\n\t\t\t\t`,\n        ] }));\n};\n","import { log } from '@guardian/libs';\nimport { loadYouTubeAPI } from './loadYouTubeApi';\nconst noop = () => {\n    return;\n};\nclass YouTubePlayer {\n    playerPromise;\n    player;\n    constructor({ id, youtubeOptions, onReadyListener, enableIma, imaAdsRequestCallback = noop, imaAdManagerListeners = noop, }) {\n        this.playerPromise = this.setPlayer(id, youtubeOptions, onReadyListener, enableIma, imaAdsRequestCallback, imaAdManagerListeners);\n    }\n    async setPlayer(id, youtubeOptions, onReadyListener, enableIma, imaAdsRequestCallback, imaAdManagerListeners) {\n        const YTAPI = await loadYouTubeAPI(enableIma);\n        const playerPromise = new Promise((resolve, reject) => {\n            try {\n                /**\n                 * If enableIma is true, YT.createPlayerForPublishers will be called to initiate IMA ads\n                 * If enableIma is false, the standard YT.Player constructor will be called\n                 * Listeners are set appropriately for each method\n                 */\n                if (enableIma) {\n                    YTAPI.createPlayerForPublishers(id, imaAdsRequestCallback, {\n                        youtubeOptions,\n                    }, \n                    // onReady callback for YT.createPlayerForPublishers must be passed separately\n                    (player, imaManager) => {\n                        this.player = player;\n                        imaAdManagerListeners(imaManager);\n                        onReadyListener();\n                        resolve({\n                            player,\n                            imaManager,\n                        });\n                    });\n                }\n                else {\n                    this.player = new YTAPI.Player(id, {\n                        ...youtubeOptions,\n                        events: {\n                            onReady: onReadyListener,\n                            onStateChange: youtubeOptions.events?.onStateChange,\n                            onFullscreenToggled: youtubeOptions.events?.onFullscreenToggled,\n                        },\n                    });\n                    resolve({ player: this.player });\n                }\n            }\n            catch (e) {\n                this.logError(e);\n                reject(e);\n            }\n        });\n        return playerPromise;\n    }\n    logError(error) {\n        log('dotcom', `YouTubePlayer failed to load: ${error.message}`);\n        window.guardian.modules.sentry.reportError(error, 'youtube-player');\n    }\n    getPlayerState() {\n        return this.playerPromise\n            .then(({ player }) => {\n            return player.getPlayerState();\n        })\n            .catch((e) => this.logError(e));\n    }\n    playVideo() {\n        return this.playerPromise\n            .then(({ player }) => {\n            player.playVideo();\n        })\n            .catch((e) => this.logError(e));\n    }\n    pauseVideo() {\n        return this.playerPromise\n            .then(({ player }) => {\n            player.pauseVideo();\n        })\n            .catch((e) => this.logError(e));\n    }\n    stopVideo() {\n        return this.playerPromise\n            .then(({ player }) => {\n            player.stopVideo();\n        })\n            .catch((e) => this.logError(e));\n    }\n    removeEventListener(eventName, listener) {\n        /**\n         * If the YouTube API hasn't finished loading,\n         * this.player may be undefined in which case removeEventListener\n         * will fail silently.\n         */\n        this.player?.removeEventListener(eventName, listener);\n    }\n}\nexport { YouTubePlayer };\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css, Global } from '@emotion/react';\nimport { buildImaAdTagUrl } from '@guardian/commercial';\nimport { log } from '@guardian/libs';\nimport { useCallback, useEffect, useLayoutEffect, useRef, useState, } from 'react';\nimport { getVideoClient } from '../../lib/bridgetApi';\nimport { getZIndex } from '../../lib/getZIndex';\nimport { getAuthStatus } from '../../lib/identity';\nimport { YouTubePlayer } from './YoutubePlayer';\nconst customPlayEventName = 'video:play';\nconst imaPlayerStyles = css `\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n`;\nconst fullscreenStyles = (id) => css `\n\thtml {\n\t\toverflow: hidden;\n\t}\n\tiframe#${id} {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\t/* override vw and vh with vsw and vsh if supported */\n\t\twidth: 100vw;\n\t\theight: 100vh;\n\t\t/* stylelint-disable-next-line declaration-block-no-duplicate-properties */\n\t\twidth: 100svw;\n\t\t/* stylelint-disable-next-line declaration-block-no-duplicate-properties */\n\t\theight: 100svh;\n\t\tz-index: ${getZIndex('youTubeFullscreen')};\n\t}\n`;\n/**\n * We set the external_fullscreen configuration property depending on\n * whether the native layer needs to delegate fullscreen styling to\n * the webview.\n *\n * This is true for Android but not for iOS which handles fullscreen\n * natively. The Bridget method setFullscreen returns a value to\n * indicate this requirement. We use it here by passing a value of\n * false for fullscreen when intialising the player to determine\n * the value we need to pass for external_fullscreen.\n *\n * external_fullscreen is allowed listed on our CODE and PROD domains.\n */\nconst setAppsConfiguration = async (basePlayerConfiguration, renderingTarget) => {\n    if (renderingTarget === 'Apps') {\n        const requiresWebFullscreen = await getVideoClient().setFullscreen(false);\n        const updatedConfiguration = {\n            ...basePlayerConfiguration,\n            external_fullscreen: requiresWebFullscreen ? 1 : 0,\n        };\n        return updatedConfiguration;\n    }\n    return basePlayerConfiguration;\n};\n/**\n * Dispatches a custom play event so that other players listening\n * for this event will stop playing\n */\nconst dispatchCustomPlayEvent = (uniqueId) => {\n    document.dispatchEvent(new CustomEvent(customPlayEventName, {\n        detail: { uniqueId },\n    }));\n};\n/**\n * Create an onStateChange listener that will invoke all eventEmitters\n * on the following events:\n *\n * - play\n * - pause\n * - cued\n * - ended\n * - 25% progress\n * - 50% progress\n * - 75% progress\n *\n * progressEvents are refs stored by the main component\n */\nconst createOnStateChangeListener = (videoId, uniqueId, progressEvents, eventEmitters) => (event) => {\n    const loggerFrom = 'YoutubeAtomPlayer onStateChange';\n    log('dotcom', {\n        from: loggerFrom,\n        videoId,\n        event,\n    });\n    /**\n     * event.target is the actual underlying YT player\n     */\n    const player = event.target;\n    if (event.data === YT.PlayerState.PLAYING) {\n        /**\n         * Emit video play event so other components\n         * get aware when a video is played\n         */\n        dispatchCustomPlayEvent(uniqueId);\n        if (!progressEvents.hasSentPlayEvent) {\n            log('dotcom', {\n                from: loggerFrom,\n                videoId,\n                msg: 'start play',\n                event,\n            });\n            for (const eventEmitter of eventEmitters)\n                eventEmitter('play');\n            progressEvents.hasSentPlayEvent = true;\n            /**\n             * Set a timeout to check progress again in the future\n             */\n            setTimeout(() => {\n                checkProgress();\n            }, 3000);\n        }\n        else {\n            log('dotcom', {\n                from: loggerFrom,\n                videoId,\n                msg: 'resume',\n                event,\n            });\n            for (const eventEmitter of eventEmitters) {\n                eventEmitter('resume');\n            }\n        }\n        const checkProgress = () => {\n            const currentTime = player.getCurrentTime();\n            const duration = player.getDuration();\n            if (!duration || !currentTime)\n                return;\n            const percentPlayed = (currentTime / duration) * 100;\n            if (!progressEvents.hasSent25Event && 25 < percentPlayed) {\n                log('dotcom', {\n                    from: loggerFrom,\n                    videoId,\n                    msg: 'played 25%',\n                    event,\n                });\n                for (const eventEmitter of eventEmitters) {\n                    eventEmitter('25');\n                }\n                progressEvents.hasSent25Event = true;\n            }\n            if (!progressEvents.hasSent50Event && 50 < percentPlayed) {\n                log('dotcom', {\n                    from: loggerFrom,\n                    videoId,\n                    msg: 'played 50%',\n                    event,\n                });\n                for (const eventEmitter of eventEmitters) {\n                    eventEmitter('50');\n                }\n                progressEvents.hasSent50Event = true;\n            }\n            if (!progressEvents.hasSent75Event && 75 < percentPlayed) {\n                log('dotcom', {\n                    from: loggerFrom,\n                    videoId,\n                    msg: 'played 75%',\n                    event,\n                });\n                for (const eventEmitter of eventEmitters) {\n                    eventEmitter('75');\n                }\n                progressEvents.hasSent75Event = true;\n            }\n            const currentPlayerState = player.getPlayerState();\n            if (currentPlayerState !== YT.PlayerState.ENDED) {\n                /**\n                 * Set a timeout to check progress again in the future\n                 */\n                setTimeout(() => checkProgress(), 3000);\n            }\n            return null;\n        };\n    }\n    if (event.data === YT.PlayerState.PAUSED) {\n        log('dotcom', {\n            from: loggerFrom,\n            videoId,\n            msg: 'pause',\n            event,\n        });\n        for (const eventEmitter of eventEmitters)\n            eventEmitter('pause');\n    }\n    if (event.data === YT.PlayerState.CUED) {\n        log('dotcom', {\n            from: loggerFrom,\n            videoId,\n            msg: 'cued',\n            event,\n        });\n        for (const eventEmitter of eventEmitters)\n            eventEmitter('cued');\n        progressEvents.hasSentPlayEvent = false;\n    }\n    if (event.data === YT.PlayerState.ENDED &&\n        !progressEvents.hasSentEndEvent) {\n        log('dotcom', {\n            from: loggerFrom,\n            videoId,\n            msg: 'ended',\n            event,\n        });\n        for (const eventEmitter of eventEmitters)\n            eventEmitter('end');\n        progressEvents.hasSentEndEvent = true;\n        progressEvents.hasSentPlayEvent = false;\n    }\n};\n/**\n * Creates an onReady listener\n */\nconst createOnReadyListener = (videoId, onReadyCallback, setPlayerReady) => () => {\n    log('dotcom', {\n        from: 'YoutubeAtomPlayer onReady',\n        videoId,\n        msg: 'Ready',\n    });\n    /**\n     * Callback to notify parent YoutubeAtom that the player is ready\n     */\n    onReadyCallback();\n    /**\n     * Callback to set value of playerReady ref\n     */\n    setPlayerReady();\n};\n/**\n * Creates a callback that the IMA manager will use to build an IMA ad request\n * and sets ad rendering settings\n */\nconst createImaAdsRequestCallback = (adTargeting, consentState, abTestParticipations, isSignedIn) => {\n    const adTargetingEnabled = adTargeting && !adTargeting.disableAds;\n    const adUnit = adTargetingEnabled && adTargeting.adUnit ? adTargeting.adUnit : '';\n    const customParams = adTargetingEnabled ? adTargeting.customParams : {};\n    const adsRequestCallback = (adsRequest, adsRenderingSettings) => {\n        adsRequest.adTagUrl = buildImaAdTagUrl({\n            adUnit,\n            customParams,\n            consentState,\n            clientSideParticipations: abTestParticipations,\n            isSignedIn,\n        });\n        adsRenderingSettings.useStyledNonLinearAds = true;\n        if (window.google) {\n            adsRenderingSettings.uiElements = [\n                window.google.ima.UiElements.AD_ATTRIBUTION,\n                window.google.ima.UiElements.COUNTDOWN,\n            ];\n        }\n    };\n    return adsRequestCallback;\n};\n/**\n * Creates listeners for the IMA manager\n */\nconst createImaManagerListeners = (uniqueId) => {\n    return (imaManager) => {\n        const onAdsManagerLoaded = () => {\n            if (window.google) {\n                imaManager\n                    .getAdsManager()\n                    .addEventListener(window.google.ima.AdEvent.Type.Started, () => {\n                    dispatchCustomPlayEvent(uniqueId);\n                });\n            }\n        };\n        if (window.google) {\n            imaManager\n                .getAdsLoader()\n                .addEventListener(window.google.ima.AdsManagerLoadedEvent.Type\n                .AdsManagerLoaded, onAdsManagerLoaded, false);\n        }\n    };\n};\nconst isSignedIn = async () => {\n    try {\n        const authStatus = await getAuthStatus();\n        return (authStatus.kind === 'SignedInWithCookies' ||\n            authStatus.kind === 'SignedInWithOkta');\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            window.guardian.modules.sentry.reportError(error, 'youtube-atom-player-is-signed-in');\n        }\n    }\n    return false;\n};\nexport const YoutubeAtomPlayer = ({ uniqueId, videoId, height, width, title, origin, eventEmitters, autoPlay, onReady, pauseVideo, deactivateVideo, enableAds, adTargeting, consentState, abTestParticipations, renderingTarget, }) => {\n    /**\n     * useRef for player and progressEvents\n     * Provides mutable persistent state for the player across renders\n     * Does not cause re-renders on update\n     */\n    const player = useRef();\n    const progressEvents = useRef({\n        hasSentPlayEvent: false,\n        hasSent25Event: false,\n        hasSent50Event: false,\n        hasSent75Event: false,\n        hasSentEndEvent: false,\n    });\n    const [playerReady, setPlayerReady] = useState(false);\n    const [isFullscreen, setIsFullscreen] = useState(false);\n    const [applyFullscreenStyles, setApplyFullscreenStyles] = useState(false);\n    const playerReadyCallback = useCallback(() => setPlayerReady(true), []);\n    const playerListeners = useRef([]);\n    /**\n     * A map ref with a key of eventname and a value of eventHandler\n     */\n    const customListeners = useRef({});\n    const adsManager = useRef();\n    const id = `youtube-player-${uniqueId}`;\n    /**\n     * Initialise player useEffect\n     */\n    useEffect(() => {\n        if (!player.current) {\n            log('dotcom', {\n                from: 'YoutubeAtomPlayer initialise',\n                videoId,\n            });\n            const onReadyListener = createOnReadyListener(videoId, onReady, playerReadyCallback);\n            const onStateChangeListener = createOnStateChangeListener(videoId, uniqueId, progressEvents.current, eventEmitters);\n            /**\n             * Configuration for the base YouTube player\n             * IMA is configured separately\n             */\n            const basePlayerConfiguration = {\n                id,\n                youtubeOptions: {\n                    height: '100%',\n                    width: '100%',\n                    videoId,\n                    playerVars: {\n                        controls: 1,\n                        fs: 1,\n                        modestbranding: 1,\n                        origin,\n                        playsinline: 1,\n                        rel: 0,\n                    },\n                    embedConfig: {\n                        relatedChannels: [],\n                        // Since IMA ads the YouTube player API no longer accepts ad configuration\n                        adsConfig: { disableAds: true },\n                        enableIma: enableAds,\n                        // YouTube recommends disabling related videos when IMA ads are enabled\n                        disableRelatedVideos: enableAds,\n                    },\n                    events: {\n                        onStateChange: onStateChangeListener,\n                        onFullscreenToggled: () => {\n                            if (renderingTarget === 'Apps') {\n                                log('dotcom', {\n                                    from: 'YoutubeAtomPlayer fullscreen',\n                                    videoId,\n                                });\n                                setIsFullscreen((prev) => !prev);\n                            }\n                        },\n                    },\n                },\n                onReadyListener,\n                enableIma: enableAds,\n            };\n            const basePlayerConfigurationWithApps = setAppsConfiguration(basePlayerConfiguration, renderingTarget);\n            void Promise.allSettled([\n                basePlayerConfigurationWithApps,\n                isSignedIn(),\n            ]).then(([playerConfigurationResult, isSignedInResult]) => {\n                const playerConfiguration = playerConfigurationResult.status === 'fulfilled'\n                    ? playerConfigurationResult.value\n                    : basePlayerConfiguration;\n                const isSignedInValue = isSignedInResult.status === 'fulfilled'\n                    ? isSignedInResult.value\n                    : false;\n                if (enableAds) {\n                    player.current = new YouTubePlayer({\n                        ...playerConfiguration,\n                        imaAdsRequestCallback: createImaAdsRequestCallback(adTargeting, consentState, abTestParticipations, isSignedInValue),\n                        imaAdManagerListeners: createImaManagerListeners(uniqueId),\n                    });\n                }\n                else {\n                    player.current = new YouTubePlayer(playerConfiguration);\n                }\n            });\n            /**\n             * Pause the current video when another video is played\n             * Triggered by the CustomEvent sent by each player on play\n             */\n            const handleCustomPlayEvent = (event) => {\n                if (event.detail) {\n                    const playedVideoId = event.detail.uniqueId;\n                    const thisVideoId = uniqueId;\n                    if (playedVideoId !== thisVideoId) {\n                        const playerStatePromise = player.current?.getPlayerState();\n                        void playerStatePromise?.then((playerState) => {\n                            if (playerState === YT.PlayerState.PLAYING) {\n                                void player.current?.pauseVideo();\n                            }\n                        });\n                        // pause ima ads playing on other videos\n                        adsManager.current?.pause();\n                        // mark player as inactive\n                        deactivateVideo();\n                    }\n                }\n            };\n            /**\n             * add listener for custom play event\n             */\n            document.addEventListener(customPlayEventName, handleCustomPlayEvent);\n            customListeners.current[customPlayEventName] =\n                handleCustomPlayEvent;\n            playerListeners.current.push({ name: 'onReady', listener: onReadyListener }, { name: 'onStateChange', listener: onStateChangeListener });\n        }\n    }, \n    /**\n     * useEffect dependencies are mostly static but added to array for correctness\n     */\n    [\n        abTestParticipations,\n        adTargeting,\n        autoPlay,\n        consentState,\n        enableAds,\n        eventEmitters,\n        deactivateVideo,\n        height,\n        id,\n        onReady,\n        origin,\n        playerReadyCallback,\n        renderingTarget,\n        uniqueId,\n        videoId,\n        width,\n    ]);\n    /**\n     * Autoplay useEffect\n     */\n    useEffect(() => {\n        if (playerReady && autoPlay) {\n            /**\n             * Autoplay is determined by the parent\n             * Typically true when there is a preceding overlay\n             */\n            log('dotcom', {\n                from: 'YoutubeAtomPlayer autoplay',\n                videoId,\n                msg: 'Playing video',\n            });\n            void player.current?.playVideo();\n        }\n    }, [playerReady, autoPlay, videoId]);\n    /**\n     * Player pause useEffect\n     */\n    useEffect(() => {\n        /**\n         * if the 'pauseVideo' prop is true this should pause the video\n         *\n         * 'pauseVideo' is controlled by the close sticky video button\n         */\n        if (pauseVideo) {\n            void player.current?.pauseVideo();\n        }\n    }, [pauseVideo]);\n    /**\n     * For apps rendered articles that return true for `setFullscreen` the web layer\n     * needs to handle the application of fullscreen styles\n     *\n     * This is only for the YouTube player in Android web views which does not support fullscreen\n     */\n    useEffect(() => {\n        if (renderingTarget === 'Apps') {\n            const videoClient = getVideoClient();\n            void videoClient.setFullscreen(isFullscreen).then((success) => {\n                if (success) {\n                    setApplyFullscreenStyles(isFullscreen);\n                }\n            });\n        }\n    }, [isFullscreen, renderingTarget]);\n    /**\n     * Unregister listeners useLayoutEffect\n     */\n    useLayoutEffect(() => {\n        /**\n         * Unregister listeners before component unmount\n         *\n         * An empty dependency array will call its cleanup on unmount.\n         *\n         * Use useLayoutEffect to ensure the cleanup function is run\n         * before the component is removed from the DOM. Usually clean up\n         * functions will run after the render and commit phase.\n         *\n         * If we attempt to unregister listeners after the component is\n         * removed from the DOM the YouTube API logs a warning to the console.\n         */\n        const playerListenerNames = playerListeners.current;\n        const customListenersNames = customListeners.current;\n        return () => {\n            for (const playerListener of playerListenerNames) {\n                player.current?.removeEventListener(playerListener.name, playerListener.listener);\n            }\n            for (const [eventName, eventHandler] of Object.entries(customListenersNames)) {\n                document.removeEventListener(eventName, eventHandler);\n            }\n        };\n    }, []);\n    /**\n     * An element for the YouTube player to hook into the dom\n     */\n    return (_jsxs(_Fragment, { children: [applyFullscreenStyles && _jsx(Global, { styles: fullscreenStyles(id) }), _jsx(\"div\", { id: id, \"data-testid\": id, \"data-atom-type\": \"youtube\", title: title, css: enableAds && imaPlayerStyles })] }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { log } from '@guardian/libs';\nimport { from, palette as sourcePalette, space, } from '@guardian/source/foundations';\nimport { SvgCross } from '@guardian/source/react-components';\nimport detectMobile from 'is-mobile';\nimport { useEffect, useState } from 'react';\nimport { submitComponentEvent } from '../../client/ophan/ophan';\nimport { useIsInView } from '../../lib/useIsInView';\nimport { useConfig } from '../ConfigContext';\nconst buttonStyles = css `\n\tposition: absolute;\n\tleft: -36px;\n\ttop: 0;\n\tz-index: 22;\n\tbackground-color: ${sourcePalette.neutral[7]};\n\theight: 32px;\n\twidth: 32px;\n\tborder-radius: 50%;\n\tborder: 0;\n\tpadding: 0;\n\tcursor: pointer;\n\tdisplay: none;\n\tjustify-content: center;\n\talign-items: center;\n\ttransition: transform 0.2s;\n\n\t&:hover {\n\t\ttransform: scale(1.15);\n\t}\n\n\tsvg {\n\t\tfill: ${sourcePalette.neutral[100]};\n\t}\n`;\n/**\n * This extended hover area allows users to click the close video button more easily\n */\nconst hoverAreaStyles = (fullWidthOverlay) => {\n    const hoverAreaWidth = 37;\n    return css `\n\t\tposition: absolute;\n\t\ttop: -4px;\n\t\tbottom: 0;\n\t\tleft: -${hoverAreaWidth}px;\n\t\twidth: ${hoverAreaWidth}px;\n\n\t\t&:hover button {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\twidth: ${fullWidthOverlay\n        ? `calc(100% + ${hoverAreaWidth}px)`\n        : `${hoverAreaWidth}px`};\n\t`;\n};\nconst stickyStyles = (showButton) => css `\n\t@keyframes fade-in-up {\n\t\tfrom {\n\t\t\ttransform: translateY(100%);\n\t\t\topacity: 0;\n\t\t}\n\n\t\tto {\n\t\t\ttransform: translateY(0%);\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\tposition: fixed;\n\tbottom: 20px;\n\twidth: 215px;\n\tz-index: 21;\n\tanimation: fade-in-up 1s ease both;\n\n\t${from.tablet} {\n\t\twidth: 300px;\n\t}\n\n\tfigcaption {\n\t\tdisplay: none;\n\t}\n\n\tbutton {\n\t\tdisplay: ${showButton ? 'flex' : 'none'};\n\t}\n\n\t&:hover button {\n\t\tdisplay: flex;\n\t}\n`;\nconst stickyContainerStyles = (isMainMedia) => {\n    return css `\n\t\theight: 192px;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tpadding-right: ${isMainMedia ? `${space[5]}px` : 0};\n\n\t\t${from.phablet} {\n\t\t\theight: 349px;\n\t\t}\n\t`;\n};\nconst isMobile = detectMobile({ tablet: true });\nexport const YoutubeAtomSticky = ({ uniqueId, videoId, eventEmitters, shouldStick, setPauseVideo, isActive, isMainMedia, children, isClosed, setIsClosed, shouldPauseOutOfView, }) => {\n    const [isSticky, setIsSticky] = useState(false);\n    const [stickEventSent, setStickEventSent] = useState(false);\n    const [showOverlay, setShowOverlay] = useState(isMobile);\n    const { renderingTarget } = useConfig();\n    const [isIntersecting, setRef] = useIsInView({\n        threshold: 0.5,\n        repeat: true,\n        debounce: true,\n    });\n    /**\n     * Click handler for the sticky video close button\n     */\n    const handleCloseClick = () => {\n        // unstick the video\n        setIsSticky(false);\n        // reset the sticky event sender\n        setStickEventSent(false);\n        // pause the video\n        setPauseVideo(true);\n        // set isClosed so that player won't restick\n        setIsClosed(true);\n        // log a 'close' event\n        log('dotcom', {\n            from: `YoutubeAtom handleCloseClick`,\n            videoId,\n            msg: 'Close',\n        });\n        // submit a 'close' event to Ophan\n        void submitComponentEvent({\n            component: {\n                componentType: 'STICKY_VIDEO',\n                id: videoId,\n            },\n            action: 'CLOSE',\n        }, renderingTarget);\n    };\n    /**\n     * keydown event handler\n     *\n     * closes sticky video when Escape key is pressed\n     */\n    const handleKeydown = (e) => {\n        if (e.key === 'Escape') {\n            handleCloseClick();\n        }\n    };\n    /**\n     * useEffect to create keydown listener\n     */\n    useEffect(() => {\n        window.addEventListener('keydown', handleKeydown);\n        return () => window.removeEventListener('keydown', handleKeydown);\n    });\n    /**\n     * useEffect for the sticky state\n     */\n    useEffect(() => {\n        if (shouldStick)\n            setIsSticky(isActive && !isIntersecting && !isClosed);\n    }, [isIntersecting, isActive, shouldStick, isClosed]);\n    /**\n     * useEffect for the pausing youtubeAtoms that are out of view\n     */\n    useEffect(() => {\n        // Sticky-ness should take precedence over pausing\n        if (!shouldStick && shouldPauseOutOfView) {\n            setPauseVideo(isActive && !isIntersecting && !isClosed);\n        }\n    }, [\n        isIntersecting,\n        shouldStick,\n        isActive,\n        shouldPauseOutOfView,\n        isClosed,\n        setPauseVideo,\n    ]);\n    /**\n     * useEffect for the stick events\n     */\n    useEffect(() => {\n        if (isSticky && !stickEventSent) {\n            setStickEventSent(true);\n            log('dotcom', {\n                from: 'YoutubeAtom stick useEffect',\n                videoId,\n                msg: 'Stick',\n            });\n            void submitComponentEvent({\n                component: {\n                    componentType: 'STICKY_VIDEO',\n                    id: videoId,\n                },\n                action: 'STICK',\n            }, renderingTarget);\n        }\n    }, [isSticky, stickEventSent, videoId, eventEmitters, renderingTarget]);\n    /**\n     * useEffect for mobile only sticky overlay\n     *\n     * this allows mobile uses to tap to reveal the close button\n     */\n    useEffect(() => {\n        setShowOverlay(isMobile && isSticky);\n    }, [isSticky]);\n    const showCloseButton = !showOverlay && isMobile;\n    return (_jsx(\"div\", { ref: setRef, css: isSticky && stickyContainerStyles(isMainMedia), \"data-testid\": `youtube-sticky-${uniqueId}`, \"data-is-sticky\": isSticky, children: _jsxs(\"div\", { css: isSticky && stickyStyles(showCloseButton), children: [children, isSticky && (_jsxs(_Fragment, { children: [_jsx(\"span\", { css: hoverAreaStyles(showOverlay), onClick: () => setShowOverlay(false), onKeyDown: () => setShowOverlay(false), role: \"button\", tabIndex: 0 }), _jsx(\"button\", { css: buttonStyles, onClick: handleCloseClick, \"data-testid\": `youtube-sticky-close-${uniqueId}`, type: \"button\", children: _jsx(SvgCross, { size: \"medium\" }) })] }))] }) }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { useCallback, useState } from 'react';\nimport { MaintainAspectRatio } from '../MaintainAspectRatio';\nimport { YoutubeAtomOverlay } from './YoutubeAtomOverlay';\nimport { YoutubeAtomPlaceholder } from './YoutubeAtomPlaceholder';\nimport { YoutubeAtomPlayer } from './YoutubeAtomPlayer';\nimport { YoutubeAtomSticky } from './YoutubeAtomSticky';\nexport const YoutubeAtom = ({ atomId, videoId, uniqueId, overrideImage, posterImage, adTargeting, consentState, height = 259, width = 460, alt, title, duration, origin, eventEmitters, shouldStick, isMainMedia, abTestParticipations, videoCategory, kicker, format, shouldPauseOutOfView = false, showTextOverlay = false, imageSize, imagePositionOnMobile, renderingTarget, aspectRatio, }) => {\n    const [overlayClicked, setOverlayClicked] = useState(false);\n    const [playerReady, setPlayerReady] = useState(false);\n    const [isActive, setIsActive] = useState(false);\n    const [isClosed, setIsClosed] = useState(false);\n    const [pauseVideo, setPauseVideo] = useState(false);\n    /**\n     * Consent and ad targeting are initially undefined and set by subsequent re-renders\n     */\n    const adTargetingEnabled = !!adTargeting &&\n        !adTargeting.disableAds &&\n        !!consentState &&\n        consentState.canTarget;\n    /**\n     * Update the isActive state based on video events\n     *\n     * @param {VideoEventKey} videoEvent the video event which triggers the callback\n     */\n    const playerState = (videoEvent) => {\n        switch (videoEvent) {\n            case 'play':\n            case 'resume':\n                setPauseVideo(false);\n                setIsClosed(false);\n                setIsActive(true);\n                break;\n            case 'end':\n            case 'cued':\n                setIsActive(false);\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * Combine the videoState and tracking event emitters\n     */\n    const compositeEventEmitters = [playerState, ...eventEmitters];\n    /**\n     * The loading sequence of the YoutubeAtom is as follows:\n     *\n     * Overlay -> Placeholder -> Player\n     *\n     * In detail:\n     *\n     * 1. Initially show the overlay if it exists\n     * 2. When the overlay is clicked\n     *     2.1 Remove the overlay\n     *     2.2 Show the placeholder until the player is ready\n     * 3. When consent and ad targeting is available render the player to initiate loading of the YouTube player\n     * 4. When the player is ready the placeholder is removed and the YouTube player is shown\n     */\n    const hasOverlay = !!(overrideImage ?? posterImage);\n    /**\n     * Show an overlay if:\n     *\n     * - It exists\n     *\n     * AND\n     *\n     * - It hasn't been clicked\n     */\n    const showOverlay = hasOverlay && !overlayClicked;\n    /**\n     * Show a placeholder if:\n     *\n     * - We don't have an overlay OR the user has clicked the overlay\n     *\n     * AND\n     *\n     * - The player is not ready\n     */\n    const showPlaceholder = (!hasOverlay || overlayClicked) && !playerReady;\n    let loadPlayer;\n    if (!hasOverlay) {\n        // load the player if there is no overlay\n        loadPlayer = true;\n    }\n    else if (overlayClicked) {\n        // load the player if the overlay has been clicked\n        loadPlayer = true;\n    }\n    else {\n        loadPlayer = false;\n    }\n    /**\n     * Create a stable callback as it will be a useEffect dependency in YoutubeAtomPlayer\n     */\n    const playerReadyCallback = useCallback(() => setPlayerReady(true), []);\n    return (_jsx(\"div\", { \"data-component\": \"youtube-atom\", \"data-atom-id\": atomId, \"data-video-id\": videoId, \"data-video-unique-id\": uniqueId, children: _jsx(YoutubeAtomSticky, { uniqueId: uniqueId, videoId: videoId, shouldStick: shouldStick, isActive: isActive, eventEmitters: eventEmitters, setPauseVideo: setPauseVideo, isMainMedia: isMainMedia, isClosed: isClosed, setIsClosed: setIsClosed, shouldPauseOutOfView: shouldPauseOutOfView, children: _jsxs(MaintainAspectRatio, { height: height, width: width, aspectRatio: aspectRatio, children: [\n                    /**\n                     * Consent and ad targeting are initially undefined and set by subsequent re-renders\n                     * Wait until they are defined before rendering the player\n                     */\n                    loadPlayer && consentState && adTargeting && (_jsx(YoutubeAtomPlayer, { videoId: videoId, uniqueId: uniqueId, height: height, width: width, title: title, origin: origin, eventEmitters: compositeEventEmitters, \n                        /**\n                         * If there is an overlay we want to autoplay\n                         * If there isn't an overlay the user will use the YouTube player UI to play\n                         */\n                        autoPlay: hasOverlay, onReady: playerReadyCallback, pauseVideo: pauseVideo, deactivateVideo: () => {\n                            setIsActive(false);\n                        }, enableAds: adTargetingEnabled, adTargeting: adTargeting, consentState: consentState, abTestParticipations: abTestParticipations, renderingTarget: renderingTarget })), showOverlay && (_jsx(YoutubeAtomOverlay, { uniqueId: uniqueId, overrideImage: overrideImage, posterImage: posterImage, height: height, width: width, alt: alt, duration: duration, title: title, onClick: () => setOverlayClicked(true), videoCategory: videoCategory, kicker: kicker, format: format, showTextOverlay: showTextOverlay, imageSize: imageSize, imagePositionOnMobile: imagePositionOnMobile, aspectRatio: aspectRatio })), showPlaceholder && (_jsx(YoutubeAtomPlaceholder, { uniqueId: uniqueId }))] }) }) }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { palette, space, textEgyptian17 } from '@guardian/source/foundations';\nimport { SvgAlertRound } from '@guardian/source/react-components';\nimport { Caption } from '../Caption';\nconst expiredOverlayStyles = (overrideImage) => overrideImage\n    ? css `\n\t\t\t\theight: 0px;\n\t\t\t\tposition: relative;\n\t\t\t\tbackground-image: url(${overrideImage});\n\t\t\t\tbackground-size: cover;\n\t\t\t\tbackground-position: 49% 49%;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tpadding-bottom: 56%;\n\t\t\t\tcolor: ${palette.neutral[100]};\n\t\t\t\tbackground-color: ${palette.neutral[20]};\n\t\t  `\n    : undefined;\nconst expiredTextWrapperStyles = css `\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\n\tpadding-top: ${space[4]}px;\n\tpadding-bottom: ${space[4]}px;\n\tpadding-left: ${space[1]}px;\n\tpadding-right: ${space[12]}px;\n\tcolor: ${palette.neutral[100]};\n\tbackground-color: ${palette.neutral[20]};\n`;\nconst expiredSVGWrapperStyles = css `\n\tpadding-right: ${space[1]}px;\n\tsvg {\n\t\twidth: ${space[12]}px;\n\t\theight: ${space[12]}px;\n\t\tfill: ${palette.neutral[100]};\n\t}\n`;\nexport const YoutubeAtomExpiredOverlay = ({ format, hideCaption, isMainMedia, mediaTitle, overrideImage, }) => {\n    return (_jsxs(\"figure\", { css: css `\n\t\t\t\tmargin-top: 16px;\n\t\t\t\tmargin-bottom: 16px;\n\t\t\t`, children: [_jsx(\"div\", { css: expiredOverlayStyles(overrideImage), children: _jsxs(\"div\", { css: expiredTextWrapperStyles, children: [_jsx(\"div\", { css: expiredSVGWrapperStyles, children: _jsx(SvgAlertRound, {}) }), _jsx(\"p\", { css: css `\n\t\t\t\t\t\t\t${textEgyptian17}\n\t\t\t\t\t\t\tline-height: 1.15;\n\t\t\t\t\t\t`, children: \"This video has been removed. This could be because it launched early, our rights have expired, there was a legal issue, or for another reason.\" })] }) }), !hideCaption && (_jsx(Caption, { captionText: mediaTitle ?? '', format: format, displayCredit: false, mediaType: \"Video\", isMainMedia: isMainMedia }))] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { useAB } from '../lib/useAB';\nimport { useAdTargeting } from '../lib/useAdTargeting';\nimport { Caption } from './Caption';\nimport { useConfig } from './ConfigContext';\nimport { ophanTrackerApps, ophanTrackerWeb } from './YoutubeAtom/eventEmitters';\nimport { YoutubeAtom } from './YoutubeAtom/YoutubeAtom';\nimport { YoutubeAtomExpiredOverlay } from './YoutubeAtom/YoutubeAtomExpiredOverlay';\n/**\n * We do our own image optimization in DCR and only need 1 image. Pick the largest image available to\n * us to avoid up-scaling later.\n *\n * @param images an array of the same image at different resolutions\n * @returns largest image from images\n */\nconst getLargestImageSize = (images) => [...images].sort((a, b) => a.width - b.width).pop();\nconst adTargetingDisabled = { disableAds: true };\nexport const YoutubeBlockComponent = ({ id, assetId, index, mediaTitle, altText, format, hideCaption, overrideImage, posterImage = [], expired, isMainMedia, height = 259, width = 460, duration, origin, stickyVideos, kickerText, pauseOffscreenVideo = false, showTextOverlay, imageSize = 'large', imagePositionOnMobile = 'none', enableAds, aspectRatio, }) => {\n    const [consentState, setConsentState] = useState(undefined);\n    const adTargeting = useAdTargeting(duration);\n    const { renderingTarget } = useConfig();\n    const abTests = useAB();\n    const abTestParticipations = abTests?.participations ?? {};\n    /**\n     * It's possible to have duplicate video atoms on the same page\n     * For example liveblogs can have the same video for the main media and in a subsequent block\n     * We need to ensure a unique id for each YouTube player on the page.\n     */\n    const uniqueId = `${assetId}-${index}`;\n    useEffect(() => {\n        if (renderingTarget === 'Web') {\n            const defineConsentState = async () => {\n                const { onConsentChange } = await import('@guardian/libs');\n                onConsentChange((newConsent) => {\n                    setConsentState(newConsent);\n                });\n            };\n            defineConsentState().catch((error) => {\n                window.guardian.modules.sentry.reportError(error instanceof Error\n                    ? error\n                    : new Error(`Error: unknown`), 'youtube-consent');\n            });\n        }\n        if (renderingTarget === 'Apps') {\n            // set the minimum unconsented state for apps\n            setConsentState({\n                canTarget: false,\n                framework: 'tcfv2',\n            });\n        }\n    }, [renderingTarget]);\n    if (expired) {\n        return (_jsx(YoutubeAtomExpiredOverlay, { format: format, hideCaption: hideCaption, isMainMedia: isMainMedia, mediaTitle: mediaTitle, overrideImage: overrideImage }));\n    }\n    return (_jsxs(\"div\", { \"data-chromatic\": \"ignore\", children: [_jsx(YoutubeAtom, { atomId: id, videoId: assetId, uniqueId: uniqueId, overrideImage: overrideImage, posterImage: getLargestImageSize(posterImage)?.url, alt: altText ?? mediaTitle ?? '', adTargeting: enableAds && renderingTarget === 'Web'\n                    ? adTargeting\n                    : adTargetingDisabled, consentState: consentState, height: height, width: width, title: mediaTitle, duration: duration, eventEmitters: renderingTarget === 'Web'\n                    ? [ophanTrackerWeb(id)]\n                    : [ophanTrackerApps(id)], format: format, origin: process.env.NODE_ENV === 'development' ? '' : origin, shouldStick: renderingTarget === 'Web' ? stickyVideos : false, isMainMedia: isMainMedia, abTestParticipations: abTestParticipations, kicker: kickerText, shouldPauseOutOfView: pauseOffscreenVideo, showTextOverlay: showTextOverlay, imageSize: imageSize, imagePositionOnMobile: imagePositionOnMobile, renderingTarget: renderingTarget, aspectRatio: aspectRatio }), !hideCaption && (_jsx(Caption, { captionText: mediaTitle ?? '', format: format, displayCredit: false, mediaType: \"Video\", isMainMedia: isMainMedia }))] }));\n};\n","import { MessageType, TProtocol } from '@creditkarma/thrift-server-core';\nexport class TProtocolDecorator extends TProtocol {\n    concreteProtocol;\n    constructor(protocol) {\n        super(protocol.getTransport());\n        this.concreteProtocol = protocol;\n    }\n    getTransport() {\n        return this.concreteProtocol.getTransport();\n    }\n    flush() {\n        return this.concreteProtocol.flush();\n    }\n    writeMessageBegin(name, type, seqid) {\n        return this.concreteProtocol.writeMessageBegin(name, type, seqid);\n    }\n    writeMessageEnd() {\n        return this.concreteProtocol.writeMessageEnd();\n    }\n    writeStructBegin(name) {\n        return this.concreteProtocol.writeStructBegin(name);\n    }\n    writeStructEnd() {\n        return this.concreteProtocol.writeStructEnd();\n    }\n    writeFieldBegin(name, type, id) {\n        return this.concreteProtocol.writeFieldBegin(name, type, id);\n    }\n    writeFieldEnd() {\n        return this.concreteProtocol.writeFieldEnd();\n    }\n    writeFieldStop() {\n        return this.concreteProtocol.writeFieldStop();\n    }\n    writeMapBegin(keyType, valueType, size) {\n        return this.concreteProtocol.writeMapBegin(keyType, valueType, size);\n    }\n    writeMapEnd() {\n        return this.concreteProtocol.writeMapEnd();\n    }\n    writeListBegin(elementType, size) {\n        return this.concreteProtocol.writeListBegin(elementType, size);\n    }\n    writeListEnd() {\n        return this.concreteProtocol.writeListEnd();\n    }\n    writeSetBegin(elementType, size) {\n        return this.concreteProtocol.writeSetBegin(elementType, size);\n    }\n    writeSetEnd() {\n        return this.concreteProtocol.writeSetEnd();\n    }\n    writeBool(bool) {\n        return this.concreteProtocol.writeBool(bool);\n    }\n    writeByte(b) {\n        return this.concreteProtocol.writeByte(b);\n    }\n    writeI16(i16) {\n        return this.concreteProtocol.writeI16(i16);\n    }\n    writeI32(i32) {\n        return this.concreteProtocol.writeI32(i32);\n    }\n    writeI64(i64) {\n        return this.concreteProtocol.writeI64(i64);\n    }\n    writeDouble(dbl) {\n        return this.concreteProtocol.writeDouble(dbl);\n    }\n    writeString(arg) {\n        return this.concreteProtocol.writeString(arg);\n    }\n    writeBinary(arg) {\n        return this.concreteProtocol.writeBinary(arg);\n    }\n    readMessageBegin() {\n        return this.concreteProtocol.readMessageBegin();\n    }\n    readMessageEnd() {\n        return this.concreteProtocol.readMessageEnd();\n    }\n    readStructBegin() {\n        return this.concreteProtocol.readStructBegin();\n    }\n    readStructEnd() {\n        return this.concreteProtocol.readStructEnd();\n    }\n    readFieldBegin() {\n        return this.concreteProtocol.readFieldBegin();\n    }\n    readFieldEnd() {\n        return this.concreteProtocol.readFieldEnd();\n    }\n    readMapBegin() {\n        return this.concreteProtocol.readMapBegin();\n    }\n    readMapEnd() {\n        return this.concreteProtocol.readMapEnd();\n    }\n    readListBegin() {\n        return this.concreteProtocol.readListBegin();\n    }\n    readListEnd() {\n        return this.concreteProtocol.readListEnd();\n    }\n    readSetBegin() {\n        return this.concreteProtocol.readSetBegin();\n    }\n    readSetEnd() {\n        return this.concreteProtocol.readSetEnd();\n    }\n    readBool() {\n        return this.concreteProtocol.readBool();\n    }\n    readByte() {\n        return this.concreteProtocol.readByte();\n    }\n    readI16() {\n        return this.concreteProtocol.readI16();\n    }\n    readI32() {\n        return this.concreteProtocol.readI32();\n    }\n    readI64() {\n        return this.concreteProtocol.readI64();\n    }\n    readDouble() {\n        return this.concreteProtocol.readDouble();\n    }\n    readBinary() {\n        return this.concreteProtocol.readBinary();\n    }\n    readString() {\n        return this.concreteProtocol.readString();\n    }\n    skip(type) {\n        return this.concreteProtocol.skip(type);\n    }\n}\nexport class TMultiplexedProtocol extends TProtocolDecorator {\n    static separator = ':';\n    serviceName;\n    constructor(protocol, serviceName) {\n        super(protocol);\n        this.serviceName = serviceName;\n    }\n    writeMessageBegin(name, type, seqid) {\n        if (type === MessageType.CALL || type === MessageType.ONEWAY) {\n            super.writeMessageBegin(this.serviceName + TMultiplexedProtocol.separator + name, type, seqid);\n        }\n        else {\n            super.writeMessageBegin(name, type, seqid);\n        }\n    }\n}\n","import { getProtocol, getTransport, TApplicationException, TApplicationExceptionType, ThriftConnection, } from '@creditkarma/thrift-server-core';\nimport { TMultiplexedProtocol } from './protocols';\nconst ACTION_TIMEOUT_MS = 30000;\nfunction sendNativeMessage(nativeMessage) {\n    if (window.android) {\n        window.android.postMessage(nativeMessage.data, nativeMessage.connectionId);\n    }\n    else if (window.webkit) {\n        window.webkit.messageHandlers.iOSWebViewMessage.postMessage(nativeMessage);\n    }\n    else {\n        console.warn('No native APIs available');\n    }\n}\nlet uid = 1;\nconst getUniqueConnectionId = () => `connection-${uid++}`;\nexport class NativeConnection extends ThriftConnection {\n    connectionId = getUniqueConnectionId();\n    promises = [];\n    outBuffer = [];\n    constructor(Transport, Protocol) {\n        super(Transport, Protocol);\n        if (typeof window !== 'undefined') {\n            window.nativeConnections = window.nativeConnections ?? {};\n            window.nativeConnections[this.connectionId] = this;\n        }\n    }\n    reset(oldConnectionId) {\n        if (oldConnectionId === this.connectionId && window.nativeConnections) {\n            console.warn('Reseting connection ' + oldConnectionId);\n            delete window.nativeConnections[this.connectionId];\n            for (const promise of this.promises) {\n                promise.reject(new TApplicationException(TApplicationExceptionType.UNKNOWN, 'Timeout error'));\n            }\n            this.promises = [];\n            this.connectionId = getUniqueConnectionId();\n            window.nativeConnections[this.connectionId] = this;\n        }\n    }\n    receive(message) {\n        const resolver = this.promises.shift();\n        if (resolver) {\n            clearTimeout(resolver.timeoutId);\n            const data = Buffer.from(message.data, 'base64');\n            resolver.resolve(data);\n        }\n        this.sendNextMessage();\n    }\n    sendNextMessage() {\n        const message = this.outBuffer.shift();\n        if (message) {\n            console.log('Sending next message');\n            sendNativeMessage(message);\n        }\n    }\n    send(dataToSend) {\n        const id = this.connectionId;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias -- Reassign this\n        const connection = this;\n        return new Promise(function (res, rej) {\n            connection.promises.push({\n                resolve: res,\n                reject: rej,\n                timeoutId: setTimeout(function () {\n                    connection.reset(id);\n                }, ACTION_TIMEOUT_MS),\n            });\n            const message = {\n                data: dataToSend.toString('base64'),\n                connectionId: id,\n            };\n            if (connection.promises.length === 1) {\n                console.log('Sending message immediately');\n                sendNativeMessage(message);\n            }\n            else {\n                console.log('Queing message because others in flight');\n                connection.outBuffer.push(message);\n            }\n        });\n    }\n}\nexport function createAppClient(ServiceClient, transport = 'buffered', protocol = 'compact') {\n    class NamedMultiplexedProtocol extends TMultiplexedProtocol {\n        constructor(tTransport) {\n            const Protocol = getProtocol(protocol);\n            super(new Protocol(tTransport), ServiceClient.serviceName ?? '');\n        }\n    }\n    const connection = new NativeConnection(getTransport(transport), NamedMultiplexedProtocol);\n    return new ServiceClient(connection);\n}\n","import * as Acquisitions from '@guardian/bridget/Acquisitions';\nimport * as Analytics from '@guardian/bridget/Analytics';\nimport * as Commercial from '@guardian/bridget/Commercial';\nimport * as Discussion from '@guardian/bridget/Discussion';\nimport * as Environment from '@guardian/bridget/Environment';\nimport * as Gallery from '@guardian/bridget/Gallery';\nimport * as Interaction from '@guardian/bridget/Interaction';\nimport * as Metrics from '@guardian/bridget/Metrics';\nimport * as Navigation from '@guardian/bridget/Navigation';\nimport * as Newsletters from '@guardian/bridget/Newsletters';\nimport * as Notifications from '@guardian/bridget/Notifications';\nimport * as Tag from '@guardian/bridget/Tag';\nimport * as User from '@guardian/bridget/User';\nimport * as Video from '@guardian/bridget/Videos';\nimport { isUndefined } from '@guardian/libs';\nimport { createAppClient } from './thrift/nativeConnection';\nlet environmentClient = undefined;\nexport const getEnvironmentClient = () => {\n    if (isUndefined(environmentClient)) {\n        environmentClient = createAppClient(Environment.Client, 'buffered', 'compact');\n    }\n    return environmentClient;\n};\nlet commercialClient = undefined;\nexport const getCommercialClient = () => {\n    if (isUndefined(commercialClient)) {\n        commercialClient = createAppClient(Commercial.Client, 'buffered', 'compact');\n    }\n    return commercialClient;\n};\nlet acquisitionsClient = undefined;\nexport const getAcquisitionsClient = () => {\n    if (!acquisitionsClient) {\n        acquisitionsClient = createAppClient(Acquisitions.Client, 'buffered', 'compact');\n    }\n    return acquisitionsClient;\n};\nlet notificationsClient = undefined;\nexport const getNotificationsClient = () => {\n    if (!notificationsClient) {\n        notificationsClient = createAppClient(Notifications.Client, 'buffered', 'compact');\n    }\n    return notificationsClient;\n};\nlet tagClient = undefined;\nexport const getTagClient = () => {\n    if (!tagClient) {\n        tagClient = createAppClient(Tag.Client, 'buffered', 'compact');\n    }\n    return tagClient;\n};\nlet userClient = undefined;\nexport const getUserClient = () => {\n    if (!userClient) {\n        userClient = createAppClient(User.Client, 'buffered', 'compact');\n    }\n    return userClient;\n};\nlet galleryClient = undefined;\nexport const getGalleryClient = () => {\n    if (!galleryClient) {\n        galleryClient = createAppClient(Gallery.Client, 'buffered', 'compact');\n    }\n    return galleryClient;\n};\nlet videoClient = undefined;\nexport const getVideoClient = () => {\n    if (!videoClient) {\n        videoClient = createAppClient(Video.Client, 'buffered', 'compact');\n    }\n    return videoClient;\n};\nlet metricsClient = undefined;\nexport const getMetricsClient = () => {\n    if (!metricsClient) {\n        metricsClient = createAppClient(Metrics.Client, 'buffered', 'compact');\n    }\n    return metricsClient;\n};\nlet analyticsClient = undefined;\nexport const getAnalyticsClient = () => {\n    if (!analyticsClient) {\n        analyticsClient = createAppClient(Analytics.Client, 'buffered', 'compact');\n    }\n    return analyticsClient;\n};\nlet navigationClient = undefined;\nexport const getNavigationClient = () => {\n    if (!navigationClient) {\n        navigationClient = createAppClient(Navigation.Client, 'buffered', 'compact');\n    }\n    return navigationClient;\n};\nlet newslettersClient = undefined;\nexport const getNewslettersClient = () => {\n    if (!newslettersClient) {\n        newslettersClient = createAppClient(Newsletters.Client, 'buffered', 'compact');\n    }\n    return newslettersClient;\n};\nlet discussionClient = undefined;\nexport const getDiscussionClient = () => {\n    if (!discussionClient) {\n        discussionClient = createAppClient(Discussion.Client, 'buffered', 'compact');\n    }\n    return discussionClient;\n};\nlet interactionClient = undefined;\nexport const getInteractionClient = () => {\n    if (!interactionClient) {\n        interactionClient = createAppClient(Interaction.Client, 'buffered', 'compact');\n    }\n    return interactionClient;\n};\n","/**\n * Temporary fix\n * =============\n *\n * Find the master URL for an image if has already been signed upstream.\n *\n * DCR can handle generating a signed image URL with `generateImageURL`,\n * so this method extracts source URLS from fully signed ones. _e.g.:_\n *\n * - from\n *   `https://i.guim.co.uk/img/media/c56c6217f8fa306d89320cc7915161203b5017b1/0_166_5000_3002/master/5000.jpg?width=300&quality=85&auto=format&fit=max&s=0d205d08639b4ad6e1b86758ab451abb`\n * \t to\n *   `https://media.guim.co.uk/img/media/c56c6217f8fa306d89320cc7915161203b5017b1/0_166_5000_3002/master/5000.jpg`\n *\n * - from\n *   `https://i.guim.co.uk/img/uploads/2017/10/06/George-Monbiot,-L.png?width=173&quality=85&auto=format&fit=max&s=be5b0d3f3aa55682e4930057fc3929a3`\n *   to\n *   `https://uploads.guim.co.uk/2017/10/06/George-Monbiot,-L.png`\n *\n * @deprecated Favour updating image paths sent from frontend to sources\n */\nexport const getSourceImageUrl = (source) => {\n    const url = new URL(source);\n    const buckets = ['/img/media/', '/img/static/', '/img/uploads/'];\n    const prefix = buckets.find((bucket) => url.pathname.startsWith(bucket));\n    if (url.hostname === 'i.guim.co.uk' && prefix) {\n        const path = url.pathname.replace(prefix, '');\n        switch (prefix) {\n            case '/img/media/':\n                return `https://media.guim.co.uk/${path}`;\n            case '/img/static/':\n                return `https://static.guim.co.uk/${path}`;\n            case '/img/uploads/':\n                return `https://uploads.guim.co.uk/${path}`;\n        }\n    }\n    return source;\n};\n","import { mutate } from 'swr';\nimport useSWRImmutable from 'swr/immutable';\nconst apiPromise = new Promise(() => { });\nconst key = 'ab-tests';\n/**\n * A hook which returns the AB Test Api when available,\n * or undefined otherwise.\n *\n * Leverages an immutable SWR to satisfy all requests to the\n * AB Core. As soon as the tests are available, all instances of\n * the useAB hook will render.\n */\nexport const useAB = () => {\n    const { data } = useSWRImmutable(key, () => apiPromise);\n    return data;\n};\nexport const setABTests = ({ api, participations }) => {\n    void mutate(key, { api, participations }, false);\n};\n","import { log } from '@guardian/libs';\nimport { mutate } from 'swr';\nimport useSWRImmutable from 'swr/immutable';\nconst key = 'ad-targeting';\nconst apiPromise = new Promise(() => {\n    /* this never resolves */\n});\n/**\n * A hook which returns the Ad Targeting for a given page.\n *\n * @param videoLength allows overriding video length, when there are multiple videos on a page\n */\nexport const useAdTargeting = (videoLength) => {\n    const { data } = useSWRImmutable(key, () => apiPromise);\n    if (data && !data.disableAds && typeof videoLength === 'number') {\n        data.customParams['vl'] = videoLength;\n        log('commercial', `🎯 Ad Targeting – video length (vl) overriden to ${videoLength}`);\n    }\n    return data;\n};\nexport const setAdTargeting = (adTargeting) => {\n    void mutate(key, adTargeting, false);\n};\n","import libDebounce from 'lodash.debounce';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @returns a tuple containing `[isInView, setNode]`\n */\nconst useIsInView = (options) => {\n    const [isInView, setIsInView] = useState(false);\n    const [node, setNode] = useState(options.node ?? null);\n    const observer = useRef(null);\n    const intersectionObserverCallback = useCallback(([entry]) => {\n        if (!entry)\n            return;\n        if (entry.isIntersecting) {\n            setIsInView(true);\n        }\n        else if (options.repeat) {\n            setIsInView(false);\n        }\n    }, [options.repeat]);\n    const intersectionCallback = options.debounce\n        ? libDebounce(intersectionObserverCallback, 200)\n        : intersectionObserverCallback;\n    useEffect(() => {\n        options.node && setNode(options.node);\n    }, [options.node]);\n    useEffect(() => {\n        if (!node)\n            return;\n        // Check for browser support https://caniuse.com/intersectionobserver\n        if (!('IntersectionObserver' in window))\n            return;\n        observer.current = new window.IntersectionObserver(intersectionCallback, options);\n        observer.current.observe(node);\n        return () => observer.current?.disconnect();\n    }, [node, options, intersectionCallback]);\n    useEffect(() => {\n        if (!options.repeat && isInView)\n            observer.current?.disconnect();\n    }, [isInView, options.repeat]);\n    return [isInView, setNode];\n};\nexport { useIsInView };\n"],"names":["_path","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","props","width","height","viewBox","d","captionStyle","css","textSans14","palette","bottomMarginStyles","name","styles","_ref","_ref2","overlaidStyles","format","display","ArticleDisplay","Showcase","design","ArticleDesign","Review","overlaidBottomPadding","limitedWidth","from","leftCol","wide","veryLimitedWidth","captionPadding","tabletCaptionPadding","until","desktop","bigLeftMargin","space","mobileLandscape","hideIconBelowLeftCol","iconStyle","videoIconStyle","captionLink","CameraIcon","_ref3","_jsx","Immersive","children","CameraSvg","VideoIcon","_ref4","VideoSvg","Caption","_ref5","captionText","_ref5$padCaption","padCaption","credit","_ref5$displayCredit","displayCredit","_ref5$shouldLimitWidt","shouldLimitWidth","isOverlaid","isLeftCol","_ref5$mediaType","mediaType","_ref5$isMainMedia","isMainMedia","trim","isBlog","LiveBlog","DeadBlog","defaultCaption","_jsxs","dangerouslySetInnerHTML","__html","concat","PhotoEssay","theme","ArticleSpecial","Labs","textSans12","sizes","small","button","icon","large","fill","neutral","getIconSizeOnDesktop","imageSize","getIconSizeOnMobile","imagePositionOnMobile","PlayIcon","size","sizeOnMobile","className","tablet","SvgMediaControlsPlay","MaintainAspectRatio","aspectRatio","paddingBottom","durationStyles","textSansBold12","secondsToDuration","secs","_typeof","seconds","Number","h","Math","floor","m","s","duration","push","join","MediaDuration","mediaDuration","imagePositionOnDesktop","Hide","scriptsPromise","youTubeAPIPromise","ophanTrackerWeb","id","trackingEvent","getOphan","then","ophan","event","video","eventType","log","record","ophanTrackerApps","appsMediaEvent","MediaEvent","ready","play","percent25","percent50","percent75","end","getAppsMediaEvent","isUndefined","videoId","getVideoClient","sendVideoEvent","YoutubeAtomPicture","image","alt","sources","generateSources","getSourceImageUrl","breakpoint","breakpoints","mobile","phablet","fallbackSource","getFallbackSource","itemProp","Sources","src","lowResUrl","overlayStyles","pillStyles","sourcePalette","pillItemStyles","pillTextStyles","liveStyles","news","textOverlayStyles","titleStyles","headlineMedium17","headlineMedium20","YoutubeAtomOverlay","str","uniqueId","overrideImage","posterImage","title","onClick","videoCategory","kicker","showTextOverlay","hasDuration","showPill","isLive","hidePillOnMobile","FormatBoundary","type","charAt","toUpperCase","slice","Kicker","text","color","fontWeight","YoutubeAtomPlaceholder","loadScriptAndCatch","loadScript","catch","loadYouTubeAPI","_window$YT","enableIma","undefined","window","YT","Player","Function","Promise","resolve","youtubeAPI","onYouTubeIframeAPIReady","all","loadScripts","noop","YouTubePlayer","_createClass","youtubeOptions","onReadyListener","_ref$imaAdsRequestCal","imaAdsRequestCallback","_ref$imaAdManagerList","imaAdManagerListeners","_classCallCheck","_defineProperty","this","playerPromise","setPlayer","key","value","_setPlayer","_asyncToGenerator","_regeneratorRuntime","_callee","YTAPI","_this","_context","prev","next","sent","reject","_youtubeOptions$event","_youtubeOptions$event2","createPlayerForPublishers","player","imaManager","_objectSpread","events","onReady","onStateChange","onFullscreenToggled","logError","abrupt","stop","_x","_x2","_x3","_x4","_x5","_x6","error","message","guardian","modules","sentry","reportError","_this2","getPlayerState","_this3","playVideo","_this4","pauseVideo","_this5","stopVideo","eventName","listener","_this$player","removeEventListener","customPlayEventName","imaPlayerStyles","fullscreenStyles","getZIndex","setAppsConfiguration","basePlayerConfiguration","renderingTarget","requiresWebFullscreen","updatedConfiguration","setFullscreen","external_fullscreen","dispatchCustomPlayEvent","document","dispatchEvent","CustomEvent","detail","createImaAdsRequestCallback","adTargeting","consentState","abTestParticipations","isSignedIn","adTargetingEnabled","disableAds","adUnit","customParams","adsRequest","adsRenderingSettings","adTagUrl","buildImaAdTagUrl","clientSideParticipations","useStyledNonLinearAds","google","uiElements","ima","UiElements","AD_ATTRIBUTION","COUNTDOWN","createImaManagerListeners","getAdsLoader","addEventListener","AdsManagerLoadedEvent","Type","AdsManagerLoaded","getAdsManager","AdEvent","Started","_callee2","authStatus","_context2","getAuthStatus","kind","t0","Error","YoutubeAtomPlayer","origin","eventEmitters","autoPlay","deactivateVideo","enableAds","useRef","progressEvents","hasSentPlayEvent","hasSent25Event","hasSent50Event","hasSent75Event","hasSentEndEvent","_useState","useState","_useState2","_slicedToArray","playerReady","setPlayerReady","_useState3","_useState4","isFullscreen","setIsFullscreen","_useState5","_useState6","applyFullscreenStyles","setApplyFullscreenStyles","playerReadyCallback","useCallback","playerListeners","customListeners","adsManager","useEffect","current","onReadyCallback","msg","createOnReadyListener","onStateChangeListener","loggerFrom","target","data","PlayerState","PLAYING","_step2","_iterator2","_createForOfIteratorHelper","done","eventEmitter","err","f","_step","_iterator","setTimeout","checkProgress","currentTime","getCurrentTime","getDuration","percentPlayed","_step3","_iterator3","_step4","_iterator4","_step5","_iterator5","ENDED","PAUSED","_step6","_iterator6","CUED","_step7","_iterator7","_step8","_iterator8","createOnStateChangeListener","playerVars","controls","fs","modestbranding","playsinline","rel","embedConfig","relatedChannels","adsConfig","disableRelatedVideos","basePlayerConfigurationWithApps","allSettled","playerConfigurationResult","isSignedInResult","playerConfiguration","status","isSignedInValue","handleCustomPlayEvent","_player$current","_adsManager$current","playerStatePromise","playerState","_player$current2","pause","_player$current3","_player$current4","success","useLayoutEffect","playerListenerNames","customListenersNames","_step9","_iterator9","_player$current5","playerListener","_i","_Object$entries","entries","_Object$entries$_i","eventHandler","_Fragment","Global","buttonStyles","stickyContainerStyles","isMobile","detectMobile","YoutubeAtomSticky","shouldStick","setPauseVideo","isActive","isClosed","setIsClosed","shouldPauseOutOfView","isSticky","setIsSticky","stickEventSent","setStickEventSent","showOverlay","setShowOverlay","useConfig","_useIsInView","useIsInView","threshold","repeat","debounce","_useIsInView2","isIntersecting","setRef","handleCloseClick","submitComponentEvent","component","componentType","action","handleKeydown","fullWidthOverlay","showButton","showCloseButton","ref","onKeyDown","role","tabIndex","SvgCross","YoutubeAtom","loadPlayer","atomId","_ref$height","_ref$width","_ref$shouldPauseOutOf","_ref$showTextOverlay","overlayClicked","setOverlayClicked","setIsActive","_useState7","_useState8","_useState9","_useState10","canTarget","compositeEventEmitters","videoEvent","_toConsumableArray","hasOverlay","showPlaceholder","expiredOverlayStyles","expiredTextWrapperStyles","expiredSVGWrapperStyles","YoutubeAtomExpiredOverlay","hideCaption","mediaTitle","SvgAlertRound","textEgyptian17","adTargetingDisabled","YoutubeBlockComponent","_abTests$participatio","_getLargestImageSize","images","assetId","index","altText","_ref$posterImage","expired","stickyVideos","kickerText","_ref$pauseOffscreenVi","pauseOffscreenVideo","_ref$imageSize","_ref$imagePositionOnM","setConsentState","useAdTargeting","abTests","useAB","participations","defineConsentState","onConsentChange","newConsent","framework","sort","a","b","pop","url","TMultiplexedProtocol","_TProtocolDecorator2","protocol","serviceName","_callSuper","_inherits","seqid","MessageType","CALL","ONEWAY","_superPropGet","separator","_TProtocol","TProtocolDecorator","getTransport","concreteProtocol","flush","writeMessageBegin","writeMessageEnd","writeStructBegin","writeStructEnd","writeFieldBegin","writeFieldEnd","writeFieldStop","keyType","valueType","writeMapBegin","writeMapEnd","elementType","writeListBegin","writeListEnd","writeSetBegin","writeSetEnd","bool","writeBool","writeByte","i16","writeI16","i32","writeI32","i64","writeI64","dbl","writeDouble","arg","writeString","writeBinary","readMessageBegin","readMessageEnd","readStructBegin","readStructEnd","readFieldBegin","readFieldEnd","readMapBegin","readMapEnd","readListBegin","readListEnd","readSetBegin","readSetEnd","readBool","readByte","readI16","readI32","readI64","readDouble","readBinary","readString","skip","TProtocol","sendNativeMessage","nativeMessage","android","postMessage","connectionId","webkit","messageHandlers","iOSWebViewMessage","console","warn","uid","getUniqueConnectionId","NativeConnection","_ThriftConnection","Transport","Protocol","_window$nativeConnect","nativeConnections","oldConnectionId","promises","TApplicationException","TApplicationExceptionType","UNKNOWN","resolver","shift","clearTimeout","timeoutId","Buffer","sendNextMessage","outBuffer","dataToSend","connection","res","rej","reset","toString","ThriftConnection","createAppClient","ServiceClient","transport","NamedMultiplexedProtocol","_TMultiplexedProtocol","tTransport","_ServiceClient$servic","getProtocol","environmentClient","getEnvironmentClient","Environment","Client","commercialClient","getCommercialClient","Commercial","acquisitionsClient","getAcquisitionsClient","Acquisitions","notificationsClient","getNotificationsClient","Notifications","tagClient","getTagClient","Tag","userClient","getUserClient","User","galleryClient","getGalleryClient","Gallery","videoClient","Video","analyticsClient","getAnalyticsClient","Analytics","navigationClient","getNavigationClient","Navigation","discussionClient","getDiscussionClient","Discussion","interactionClient","getInteractionClient","Interaction","source","URL","prefix","find","bucket","pathname","startsWith","hostname","path","replace","apiPromise","useSWRImmutable","setABTests","api","mutate","videoLength","setAdTargeting","options","_options$node","isInView","setIsInView","node","setNode","observer","intersectionObserverCallback","entry","intersectionCallback","libDebounce","IntersectionObserver","observe","_observer$current","disconnect","_observer$current2"],"sourceRoot":""}