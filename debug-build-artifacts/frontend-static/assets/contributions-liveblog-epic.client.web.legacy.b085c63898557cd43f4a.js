"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[6599],{88152:(e,n,r)=>{r.r(n),r.d(n,{ContributionsLiveblogEpic:()=>M});var t=r(22820),i=r(50484),o=r(24017),a=r(50641),s=r(81477),u=r(71653),c=r(59648),d=r(17382),p=r(42702),l=r(67400),f=r(88528),g=r(53132),m=r(21128),v=r(74180),x=r(66007),b=r(93183),h=function(e,n){return(0,o.css)("padding:6px 10px 28px 10px;border-top:1px solid ",a.M.brandAlt[400],";border-bottom:1px solid ",a.M.neutral[86],";background:",function(e){return e?"#E2E3BF":a.M.neutral[100]}(n),";border:1px solid ",a.M.neutral[0],";*{::selection{background:",a.M.brandAlt[400],";}}",s.HT.tablet,"{padding-left:","dcr"===e.clientName?"60px":"80px",";padding-right:20px;}")},C=(0,o.css)(u.Ni,";font-size:16px;p{margin:0;}&>p+p{margin-top:",c.x[3],"px;}",s.HT.tablet,"{&>p+p{margin-top:",c.x[4],"px;}}"),k=function(e,n){return(0,o.css)(u.r9N,";font-size:28px;color:",function(e){return e?"#FFFFFF":a.M.neutral[7]}(n),";background-color:",function(e){return e?"#051D32":a.M.brandAlt[400]}(n),";border-top:1px solid ",a.M.neutral[0],";border-left:1px solid ",a.M.neutral[0],";border-right:1px solid ",a.M.neutral[0],";padding:8px 10px 12px 10px;",s.HT.tablet,"{padding-left:","dcr"===e.clientName?"60px":"80px",";padding-right:20px;}")},A=(0,o.css)("margin-top:",c.x[5],"px;"),E={filledProgressColour:"#C41C1C",progressBarBackgroundColour:"#D9A78E",headlineColour:"#000000",totalColour:"#C41C1C",goalColour:"#000000"},w=function(e){var n=e.paragraph,r=e.numArticles,t=(0,g.k)(n,r,"epic");return(0,i.jsx)("p",{children:t})},T=function(e){var n=e.numArticles,r=e.paragraphs;return(0,i.jsx)("div",{css:C,children:r.map((function(e){return(0,i.jsx)(w,{paragraph:e,numArticles:n},e)}))})},M=function(e){var n=e.variant,r=e.countryCode,o=e.articleCounts,a=e.tracking,s=e.submitComponentEvent,u=e.onReminderOpen,c=e.fetchEmail,g=n.newsletterSignup,C=n.tickerSettings,w=a.abTestName.includes("_LB_EPIC_BG_COLOUR")&&"VARIANT"===a.abTestVariant,M=(0,f.E)({debounce:!0}),j=(0,t.A)(M,2),y=j[0],I=j[1];(0,l.useEffect)((function(){y&&((0,v.B)(a.abTestName),s&&s((0,m.t0)(a,a.campaignCode)))}),[y,s,a]),(0,l.useEffect)((function(){s&&s((0,m.rx)(a,a.campaignCode))}),[s,a]);var R=n.paragraphs.map((function(e){return(0,p.BA)(e,r)})),F=(0,p.BA)(n.heading)||"Support the Guardian";return R.some(p.FT)||(0,p.FT)(F)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)("div",{"data-testid":"contributions-liveblog-epic",ref:I,children:[!!F&&(0,i.jsx)("div",{css:k(a,w),children:F}),(0,i.jsxs)("section",{css:h(a,w),children:[(0,i.jsx)(T,{paragraphs:R,numArticles:o.forTargetedWeeks}),(null==C?void 0:C.tickerData)&&(0,i.jsx)("div",{css:A,children:(0,i.jsx)(d.R,{currencySymbol:C.currencySymbol,copy:{headline:C.copy.countLabel},tickerData:C.tickerData,tickerStylingSettings:E,size:"medium"})}),g?(0,i.jsx)(x.o,{newsletterId:g.newsletterId,successDescription:g.successDescription,tracking:a}):(0,i.jsx)(b.B,{variant:n,tracking:a,countryCode:r,articleCounts:o,onReminderOpen:u,fetchEmail:c,submitComponentEvent:s,isColourInTestVariant:w})]})]})}},46845:(e,n,r)=>{r.d(n,{w:()=>c});var t=r(18247),i=r(57820),o=r.n(i),a=r(10077),s=r(17950),u=function(){var e=(0,t.A)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.kU)((function(e){var n;return null===(n=e.idToken)||void 0===n?void 0:n.claims.email}),(function(){return(0,a.J)(n).then((function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.primaryEmailAddress})).catch((function(e){window.guardian.modules.sentry.reportError(e,"getEmail")}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(e){return function(){return new Promise((function(n){setTimeout((function(){return n(null)}),1e3),u(e).then((function(e){n(e||null)}))}))}}},10077:(e,n,r)=>{r.d(n,{J:()=>s,h:()=>u});var t=r(71456);function i(e){if(!e.ok)throw Error(e.statusText||"getIdApiUserData | An api call returned HTTP status ".concat(e.status));return e}var o=function(e){return fetch(e,{credentials:"include"}).then(i).then((function(e){return e.json()}))},a={},s=function(e){if(!a.idapiUserMeResponse){var n=(0,t.w)(e,"user/me");a.idapiUserMeResponse=o(n)}return a.idapiUserMeResponse},u=function(e){if(!a.idapiUserIdentifiersResponse){var n=(0,t.w)(e,"user/me/identifiers");a.idapiUserIdentifiersResponse=o(n)}return a.idapiUserIdentifiersResponse}},88528:(e,n,r)=>{r.d(n,{E:()=>s});var t=r(22820),i=r(44165),o=r.n(i),a=r(67400),s=function(e){var n,r=(0,a.useState)(!1),i=(0,t.A)(r,2),s=i[0],u=i[1],c=(0,a.useState)(null!==(n=e.node)&&void 0!==n?n:null),d=(0,t.A)(c,2),p=d[0],l=d[1],f=(0,a.useRef)(null),g=(0,a.useCallback)((function(n){var r=(0,t.A)(n,1)[0];r&&(r.isIntersecting?u(!0):e.repeat&&u(!1))}),[e.repeat]),m=e.debounce?o()(g,200):g;return(0,a.useEffect)((function(){e.node&&l(e.node)}),[e.node]),(0,a.useEffect)((function(){if(p&&"IntersectionObserver"in window)return f.current=new window.IntersectionObserver(m,e),f.current.observe(p),function(){var e;return null===(e=f.current)||void 0===e?void 0:e.disconnect()}}),[p,e,m]),(0,a.useEffect)((function(){var n;!e.repeat&&s&&(null===(n=f.current)||void 0===n||n.disconnect())}),[s,e.repeat]),[s,l]}},1954:(e,n,r)=>{r.d(n,{M:()=>t});var t=function(e){return"var(".concat(e,")")}}}]);
//# sourceMappingURL=contributions-liveblog-epic.client.web.legacy.b085c63898557cd43f4a.js.map