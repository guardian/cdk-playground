"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9355],{22219:(n,e,t)=>{t.d(e,{H6:()=>p,K4:()=>s,wV:()=>l,zr:()=>u});var o=t(34013),r=t(30837),a=t(296),c=t(64361),i="gu_article_count_opt_out",s=function(){return(0,o.T)({name:i,value:(new Date).getTime().toString(),daysToLive:90})},u=function(){return(0,r.z)({name:i})},l=function(){a.I.local.remove("gu.history.dailyArticleCount"),a.I.local.remove("gu.history.weeklyArticleCount"),a.I.local.remove("gu.history.articleCountsThisWeek")},p=function(){return!!(0,c.R)({name:i})}},53132:(n,e,t)=>{t.d(e,{k:()=>F});var o=t(50484),r=t(22820),a=t(24017),c=t(81477),i=t(59648),s=t(67400),u=t(88528),l=t(22219),p=t(62335),m=t(99354),d=t(50641),b=t(52230),f=t(71653),y=t(24108),g=t(28673),v=t(6569),h=d.M.brand,x=d.M.neutral,T=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:"white",banner:b.yF.primary},"investigations-moment-banner",x[0]),"us-eoy-moment-banner",x[0]),"global-new-year-moment-banner",x[0]),"election-au-moment-banner",x[0]),A=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:h[400],banner:b.jP.primary},"investigations-moment-banner",x[100]),"us-eoy-moment-banner","#FFEEDB"),"global-new-year-moment-banner","#F79E1B"),"election-au-moment-banner","#e4e4e3"),C=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:"transparent",banner:b.VD.primary},"investigations-moment-banner",x[0]),"us-eoy-moment-banner",x[0]),"global-new-year-moment-banner",x[0]),"election-au-moment-banner",x[0]),M=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:y.fc,banner:y.Wd},"investigations-moment-banner",y.fA),"us-eoy-moment-banner",y.fA),"global-new-year-moment-banner",y.fA),"election-au-moment-banner",y.fA),O=function(n){return(0,a.css)("color:",T[n],";background:",A[n],";border:1px solid ",C[n],";",f.NA0," padding:",i.x[2],"px;box-shadow:0px 4px 10px rgba(0, 0, 0, 0.1);")},w={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},j={name:"q9wwom",styles:"font-size:17px;font-weight:bold"},I=(0,a.css)("margin-top:",i.x[1],"px;font-size:15px;"),k=(0,a.css)("margin-top:",i.x[3],"px;display:flex;flex-direction:row;>*+*{margin-left:",i.x[2],"px;}",c.HT.tablet,"{>*+*{margin-left:",i.x[3],"px;}}"),_=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:x[100],banner:b.yF.primary},"investigations-moment-banner",x[0]),"us-eoy-moment-banner",x[0]),"global-new-year-moment-banner",x[0]),"election-au-moment-banner",x[0]),E=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:(0,a.css)(""),banner:(0,a.css)("")},"investigations-moment-banner",(0,a.css)("background-color:",d.M.neutral[100],";color:",d.M.neutral[0],";border:1px solid ",d.M.neutral[0],";&:hover{background-color:",d.M.neutral[86],";}")),"us-eoy-moment-banner",(0,a.css)("color:",d.M.neutral[7],";border:1px solid ",d.M.neutral[7],";&:hover{background-color:",d.M.culture[350],";color:",d.M.neutral[100],";border:1px solid ",d.M.culture[350],";}")),"global-new-year-moment-banner",(0,a.css)("color:",d.M.neutral[7],";border:1px solid ",d.M.neutral[7],";&:hover{background-color:",d.M.brand[500],";color:",d.M.neutral[100],";border:1px solid ",d.M.brand[500],";}")),"election-au-moment-banner",(0,a.css)("color:",d.M.neutral[7],";border:1px solid ",d.M.neutral[7],";&:hover{background-color:",d.M.brand[500],";color:",d.M.neutral[100],";border:1px solid ",d.M.brand[500],";}")),N=(0,p.A)((0,p.A)((0,p.A)((0,p.A)({epic:(0,a.css)(""),banner:(0,a.css)("")},"investigations-moment-banner",(0,a.css)("background-color:",d.M.neutral[0],";color:",d.M.neutral[100],";border:1px solid ",d.M.neutral[0],";&:hover{background-color:",d.M.neutral[46],";border-color:",d.M.neutral[46],";}")),"us-eoy-moment-banner",(0,a.css)("background-color:",d.M.neutral[7],";color:",d.M.neutral[100],";border:1px solid ",d.M.neutral[7],";&:hover{background-color:",d.M.culture[350],";color:",d.M.neutral[100],";border:1px solid ",d.M.culture[350],";}")),"global-new-year-moment-banner",(0,a.css)("background-color:",d.M.neutral[0],";color:",d.M.neutral[100],";border:1px solid ",d.M.neutral[0],";&:hover{background-color:",d.M.brand[500],";color:",d.M.neutral[100],";border:1px solid ",d.M.brand[500],";}")),"election-au-moment-banner",(0,a.css)("background-color:",d.M.neutral[0],";color:",d.M.neutral[100],";border:1px solid ",d.M.neutral[0],";&:hover{background-color:",b.Tp.ctaPrimaryHover,";color:",d.M.neutral[100],";border:1px solid ",b.Tp.ctaPrimaryHover,";}")),P=function(n){return(0,a.css)("margin-top:",i.x[2],"px;",f.WuG," font-style:italic;a{color:",_[n],"!important;text-decoration:underline!important;}")},S=function(n){var e=n.type,t=n.hasOptedOut,r=n.onClose,a=n.onOptOut;return(0,o.jsxs)("div",{css:O(e),children:[(0,o.jsxs)("div",{css:w,children:[(0,o.jsx)("div",{css:j,children:t?"You've opted out":"What's this?"}),(0,o.jsx)(m.a,{theme:M[e],children:(0,o.jsx)(g.$,{onClick:r,cssOverrides:E[e],icon:(0,o.jsx)(v.F,{}),hideLabel:!0,size:"xsmall",priority:"tertiary",children:"Close"})})]}),(0,o.jsx)("div",{css:I,children:t?"Starting from your next page view, we won't count the articles you read or show you this message for three months.":"We would like to remind you how many Guardian articles youâ€™ve enjoyed on this device. Can we continue showing you this?"}),!t&&(0,o.jsxs)("div",{css:k,children:[(0,o.jsx)(m.a,{theme:M[e],children:(0,o.jsx)(g.$,{onClick:r,cssOverrides:N[e],priority:"primary",size:"xsmall",children:"Yes, that's OK"})}),(0,o.jsx)(m.a,{theme:M[e],children:(0,o.jsx)(g.$,{onClick:a,cssOverrides:E[e],priority:"tertiary",size:"xsmall",children:"No, opt me out"})})]}),(0,o.jsx)("div",{css:P(e),children:t?(0,o.jsxs)("span",{children:["If you have any questions, please"," ",(0,o.jsx)("a",{href:"https://www.theguardian.com/help/contact-us",children:"contact us."})]}):"Please note that opting out is a permanent action and can't be reversed"})]})},R=function(n){return"banner"===n||"investigations-moment-banner"===n||"us-eoy-moment-banner"===n||"global-new-year-moment-banner"===n||"election-au-moment-banner"===n},U=function(n){return(0,a.css)("display:inline-block;",c.HT.tablet,"{",R(n)?"":"position: relative;",";}")},D={name:"r4lpuy",styles:"background:none;border:none;padding:0;cursor:pointer;border-bottom:1px solid;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;color:inherit;&:focus{outline:none!important;}"},H={name:"pc2rt7",styles:"width:400px;left:0"},L={name:"lgttj",styles:"top:10px;left:10px;width:450px"},W={name:"1408o5l",styles:"top:0px;left:0px"},V=function(n){return(0,a.css)("position:absolute;z-index:100;",R(n)?W:(0,a.css)("left:",i.x[4],"px;right:",i.x[4],"px;",R(n)?"bottom: 21px;":"",";")," display:block;",c.HT.tablet,"{",R(n)?L:H,";}")},z=function(n){var e=n.numArticles,t=n.nextWord,a=n.type,c=n.tracking,i=(0,s.useState)(!1),p=(0,r.A)(i,2),m=p[0],d=p[1],b=(0,s.useState)(!1),f=(0,r.A)(b,2),y=f[0],g=f[1],v=(0,u.E)({debounce:!0,rootMargin:"-18px",threshold:0}),h=(0,r.A)(v,2),x=h[0],T=h[1];(0,s.useEffect)((function(){var n;x&&c&&c.submitComponentEvent((n=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-view"},action:"VIEW",value:"article-count-opt-out-popup-".concat(n)}))}),[x,c]);var A=function(){var n;d(!1),c&&c.submitComponentEvent((n=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-close"},action:"CLICK",value:"article-count-opt-out-popup-".concat(n)}))};return(0,o.jsxs)("div",{ref:T,css:U(a),children:[(0,o.jsx)("button",{css:D,onClick:function(){return m?A():(d(!0),void(c&&c.submitComponentEvent((n=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-open"},action:"CLICK",value:"article-count-opt-out-popup-".concat(n)}))));var n},children:"".concat(e).concat(t||"")}),m&&(0,o.jsx)("div",{css:V(a),children:(0,o.jsx)(S,{type:a,hasOptedOut:y,onOptOut:function(){var n;(0,l.K4)(),(0,l.wV)(),g(!0),c&&c.submitComponentEvent((n=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-confirm"},action:"CLICK",value:"article-count-opt-out-popup-".concat(n)}))},onClose:A})})]})},F=function(n,e,t,r){return arguments.length>4&&void 0!==arguments[4]&&!arguments[4]?(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:n.replace(/%%ARTICLE_COUNT%%/,"".concat(e))}}):function(n,e,t,r){for(var a=[],c=n.replace(/%%ARTICLE_COUNT%%( \w+)?/g,(function(n,e){return a.push(e),"%%ARTICLE_COUNT_AND_NEXT_WORD%%"})).split(/%%ARTICLE_COUNT_AND_NEXT_WORD%%/),i=[],s=0,u=0;u<c.length-1;u+=1)i.push((0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:c[u]}},s++)),i.push((0,o.jsx)(z,{numArticles:e,nextWord:a[u],type:t,tracking:r},s++));return i.push((0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:c[c.length-1]}},s++)),i}(n,e,t,r)}},21128:(n,e,t)=>{t.d(e,{Bl:()=>h,Mf:()=>C,Nl:()=>f,Q7:()=>y,QP:()=>d,R9:()=>v,Tv:()=>m,hy:()=>g,m1:()=>p,qU:()=>x,rx:()=>O,t0:()=>M});var o=t(31880),r=t(62335),a=t(22820),c=t(65656),i=t(42702);function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function u(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){(0,r.A)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var l=function(n,e,t,o,r){var i=function(n,e,t,o,r){var a=[{name:n,variant:e}];return t&&a.push({name:t.testName,variant:t.variantName}),o&&r&&a.push({name:o,variant:r,testType:"AMOUNTS_TEST"}),a}(e.abTestName,e.abTestVariant,e.targetingAbTest,o,r),s=function(n,e){return encodeURIComponent(JSON.stringify({source:n.platformId,componentId:n.campaignCode,componentType:n.componentType,campaignCode:n.campaignCode,abTests:e,referrerPageviewId:n.ophanPageId,referrerUrl:n.referrerUrl,isRemote:!0,labels:n.labels}))}(e,i),u=function(n,e,t){var o={REFPVID:n.ophanPageId||"not_found",INTCMP:n.campaignCode||"",acquisitionData:e,numArticles:t||0};return Object.entries(o).filter((function(n){var e=(0,a.A)(n,2)[1];return!(0,c.b)(e)})).map((function(n){var e=(0,a.A)(n,2),t=e[0],o=e[1];return"".concat(t,"=").concat(o)})).join("&")}(e,s,null!=t?t:0),l=n.includes("?");return"".concat(n).concat(l?"&":"?").concat(u)},p=function(n,e,t){return l(function(n,e){switch(e.product){case"Contribution":case"SupporterPlus":return function(n,e){var t=e.region,o=e.amount,r=e.billingPeriod;return"".concat(n,"/").concat(t,"/contribute/checkout?selected-amount=").concat(o,"&selected-contribution-type=").concat(r)}(n,e);default:return n}}(n,e),t)},m=function(n){return/\bsupport\./.test(n)},d=function(n,e,t,o,r,a){if(!m(n))return n;var c=(0,i.u4)(n,o);return l(c,e,t,r,a)},b=/href="(.*?)"/g,f=function(n,e,t,o){var r=A(e,"body-link");return n.replace(b,(function(n,e){return'href="'.concat(d(e,r,t,o),'"')}))},y=function(n,e,t){var o="selected-contribution-type=".concat(e).concat(void 0!==t?"&selected-amount=".concat(t):""),r=n.includes("?");return"".concat(n).concat(r?"&":"?").concat(o)},g=function(n){var e=n.includes("?");return"".concat(n).concat(e?"&":"?").concat("oneTime")},v=function(n,e,t,o){var r="product=".concat(e,"&ratePlan=").concat(t).concat(void 0!==o?"&contribution=".concat(o):""),a=n.includes("?");return"".concat(n).concat(a?"&":"?").concat(r)},h=function(n){return/\bprofile\./.test(n)},x=function(n,e){return h(n)?function(n,e){var t,o={componentType:e.componentType,componentId:e.campaignCode,abTestName:e.abTestName,abTestVariant:e.abTestVariant,viewId:e.ophanPageId},r={componentEventParams:encodeURIComponent((t=o,Object.keys(t).map((function(n){var e=t[n],o=Array.isArray(e)?e.map((function(n){return encodeURIComponent(n)})).join(","):encodeURIComponent(e);return"".concat(n,"=").concat(o)})).join("&"))),returnUrl:e.referrerUrl},i=Object.entries(r).filter((function(n){var e=(0,a.A)(n,2)[1];return!(0,c.b)(e)})).map((function(n){var e=(0,a.A)(n,2),t=e[0],o=e[1];return"".concat(t,"=").concat(o)})),s=n.includes("?");return"".concat(n).concat(s?"&":"?").concat(i.join("&"))}(n,e):n},T=function(n){return function(e,t){var o=e.abTestName,r=e.abTestVariant,a=e.componentType,c=e.products,i=void 0===c?[]:c,s=e.labels,l=void 0===s?[]:s,p=e.campaignCode,m=o&&r?{name:o,variant:r}:null,d=e.targetingAbTest?{name:e.targetingAbTest.testName,variant:e.targetingAbTest.variantName}:null;return u(u(u({component:{componentType:a,products:i,campaignCode:p,id:t,labels:l}},m?{abTest:m}:{}),d?{targetingAbTest:d}:{}),{},{action:n})}},A=function(n,e){return n.labels?u(u({},n),{},{labels:[].concat((0,o.A)(n.labels),[e])}):u(u({},n),{},{labels:[e]})},C=T("CLICK"),M=T("VIEW"),O=T("INSERT")}}]);
//# sourceMappingURL=9355.client.web.legacy.1072a3ab9e5726fda38f.js.map