{"version":3,"file":"9665.client.web.44986e8c5b2e95cd29b6.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/CardPicture.tsx","webpack://@guardian/dotcom-rendering/./src/components/Hide.tsx","webpack://@guardian/dotcom-rendering/./src/components/LeftColumn.tsx","webpack://@guardian/dotcom-rendering/./src/components/NewsletterDetail.tsx","webpack://@guardian/dotcom-rendering/./src/components/NewsletterCard.tsx","webpack://@guardian/dotcom-rendering/./src/lib/useIsInView.ts"],"sourcesContent":["import { css } from '@emotion/react';\nimport { breakpoints, space } from '@guardian/source/foundations';\nimport type { ImgHTMLAttributes } from 'react';\nimport React from 'react';\nimport type { AspectRatio } from '../types/front';\nimport type { ImageSizeType } from './Card/components/ImageWrapper';\nimport type { ImageWidthType } from './Picture';\nimport { generateSources, getFallbackSource } from './Picture';\n\nexport type Loading = NonNullable<ImgHTMLAttributes<unknown>['loading']>;\n\ntype Props = {\n\timageSize: ImageSizeType;\n\tmainImage: string;\n\tloading: Loading;\n\talt?: string;\n\troundedCorners?: boolean;\n\tisCircular?: boolean;\n\taspectRatio?: AspectRatio;\n};\n\n/**\n * **WIP â€“ Some size may be unaccounted for**\n *\n * Currently, this only handles the five (5) image sizes of `ImageSizeType`.\n *\n * This method should cover all use cases with a lot more precision once\n * implemented thoroughly\n */\nconst decideImageWidths = (\n\timageSize: ImageSizeType,\n): [ImageWidthType, ...ImageWidthType[]] => {\n\tswitch (imageSize) {\n\t\t// @TODO missing image size option\n\t\t// case 'tiny':\n\t\t// \treturn [\n\t\t// \t\t{ breakpoint: breakpoints.mobile, width: 120 },\n\t\t// \t\t{ breakpoint: breakpoints.tablet, width: 130 },\n\t\t// \t\t{ breakpoint: breakpoints.desktop, width: 140 },\n\t\t// \t];\n\n\t\tcase 'carousel':\n\t\t\treturn [{ breakpoint: breakpoints.mobile, width: 220 }];\n\n\t\tcase 'small':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 120 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 160 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 220 },\n\t\t\t];\n\n\t\tcase 'medium':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 240 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 330 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 460 },\n\t\t\t];\n\n\t\tcase 'large':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 360 },\n\t\t\t\t{ breakpoint: breakpoints.mobileLandscape, width: 480 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 500 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 700 },\n\t\t\t];\n\n\t\tcase 'jumbo':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 360 },\n\t\t\t\t{ breakpoint: breakpoints.mobileLandscape, width: 480 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 680 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 940 },\n\t\t\t];\n\n\t\tcase 'feature':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 325 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 220 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 300 },\n\t\t\t];\n\t\tcase 'feature-large':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 325 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 337 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 460 },\n\t\t\t];\n\t}\n};\n\n/**\n * Used on `picture` and `img` to prevent having a line-height,\n * as these elements are which are `inline` by default.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#styling_with_css\n *\n */\nconst block = css`\n\tdisplay: block;\n`;\n\nconst getAspectRatioPadding = (aspectRatio?: AspectRatio): string => {\n\tswitch (aspectRatio) {\n\t\tcase '5:4':\n\t\t\treturn '80%';\n\t\tcase '4:5':\n\t\t\treturn '125%';\n\t\tcase '1:1':\n\t\t\treturn '100%';\n\t\tcase '5:3':\n\t\tdefault:\n\t\t\treturn '60%';\n\t}\n};\n/**\n * On fronts, Fairground cards have an image ration of 5:4.\n * This is due to replace the existing card ratio of 5:3\n * For now, we are keeping both ratios.\n */\nconst decideAspectRatioStyles = (aspectRatio?: AspectRatio) => {\n\tconst paddingRatio = getAspectRatioPadding(aspectRatio);\n\treturn css`\n\t\tpadding-top: ${paddingRatio};\n\t\tposition: relative;\n\t\t& > * {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t`;\n};\n\nconst borderRadius = css`\n\t& > * {\n\t\tborder-radius: ${space[2]}px;\n\t}\n`;\n\nconst circularStyles = css`\n\tborder-radius: 100%;\n\tobject-fit: cover;\n\theight: 100%;\n\twidth: 100%;\n`;\n\nexport const CardPicture = ({\n\tmainImage,\n\talt,\n\timageSize,\n\tloading,\n\troundedCorners,\n\tisCircular,\n\taspectRatio,\n}: Props) => {\n\tconst sources = generateSources(\n\t\tmainImage,\n\t\tdecideImageWidths(imageSize),\n\t\taspectRatio,\n\t);\n\n\tconst fallbackSource = getFallbackSource(sources);\n\n\treturn (\n\t\t<picture\n\t\t\tdata-size={imageSize}\n\t\t\tcss={[\n\t\t\t\tblock,\n\t\t\t\tdecideAspectRatioStyles(aspectRatio),\n\t\t\t\troundedCorners && borderRadius,\n\t\t\t\tisCircular && circularStyles,\n\t\t\t]}\n\t\t>\n\t\t\t{sources.map((source) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={source.breakpoint}>\n\t\t\t\t\t\t{/* High resolution (HDPI) sources*/}\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={source.hiResUrl}\n\t\t\t\t\t\t\tmedia={`(min-width: ${source.breakpoint}px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: ${source.breakpoint}px) and (min-resolution: 120dpi)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/* Low resolution (MDPI) source*/}\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={source.lowResUrl}\n\t\t\t\t\t\t\tmedia={`(min-width: ${source.breakpoint}px)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t<img\n\t\t\t\talt={alt ?? ''}\n\t\t\t\tsrc={fallbackSource.lowResUrl}\n\t\t\t\tcss={[block, isCircular && circularStyles]}\n\t\t\t\tloading={loading}\n\t\t\t\tdata-chromatic=\"ignore\"\n\t\t\t/>\n\t\t</picture>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { Breakpoint } from '@guardian/source/foundations';\nimport { from, until } from '@guardian/source/foundations';\n\ninterface Props {\n\tchildren: React.ReactNode;\n\twhen: 'above' | 'below';\n\tbreakpoint: Breakpoint;\n}\n\ninterface PropsSpan extends Props {\n\tel?: 'span';\n}\ninterface PropsLi extends Props {\n\tel: 'li';\n}\n\nexport const Hide = ({\n\tchildren,\n\twhen,\n\tbreakpoint,\n\tel,\n}: PropsSpan | PropsLi) => {\n\tlet whenToHide;\n\tif (when === 'below') {\n\t\twhenToHide = css`\n\t\t\t${until[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t} else {\n\t\twhenToHide = css`\n\t\t\t${from[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t}\n\treturn el === 'li' ? (\n\t\t<li css={whenToHide}>{children}</li>\n\t) : (\n\t\t<span css={whenToHide}>{children}</span>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tbetween,\n\tfrom,\n\tpalette as sourcePalette,\n\tspace,\n\tuntil,\n} from '@guardian/source/foundations';\nimport type { LeftColSize } from '../types/layout';\n\nconst leftWidth = (size: LeftColSize, hasPageSkin: boolean) => {\n\tif (hasPageSkin) {\n\t\treturn css`\n\t\t\tpadding-right: 10px;\n\t\t\tdisplay: none;\n\t\t`;\n\t}\n\tswitch (size) {\n\t\tcase 'wide': {\n\t\t\treturn css`\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\t/* above 1140 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t\tcase 'compact':\n\t\tdefault: {\n\t\t\treturn css`\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t${between.leftCol.and.wide} {\n\t\t\t\t\t/* above 1140, below 1300 */\n\t\t\t\t\tflex-basis: 151px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\n\t\t\t\t${from.wide} {\n\t\t\t\t\t/* above 1300 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t}\n};\n\nconst positionRelative = css`\n\tposition: relative;\n`;\n\nconst partialRightBorder = (colour: string) => css`\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\theight: 30px;\n\t\twidth: 1px;\n\t\tbackground: ${colour};\n\t}\n`;\n\nconst fullRightBorder = (colour: string) => css`\n\tborder-right: 1px solid ${colour};\n`;\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tborderType?: 'full' | 'partial'; // if no borderType provided -> no border\n\tborderColour?: string;\n\tsize?: LeftColSize;\n\tverticalMargins?: boolean;\n\thasPageSkin?: boolean;\n};\n\nexport const LeftColumn = ({\n\tchildren,\n\tborderType,\n\tborderColour = sourcePalette.neutral[86],\n\tsize = 'compact',\n\tverticalMargins = true,\n\thasPageSkin = false,\n}: Props) => {\n\treturn (\n\t\t<section\n\t\t\tcss={[\n\t\t\t\tpositionRelative,\n\t\t\t\tleftWidth(size, hasPageSkin),\n\t\t\t\tborderType === 'full' && fullRightBorder(borderColour),\n\t\t\t\tverticalMargins &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tKeep spacing at the bottom of the container consistent at 36px, regardless of\n\t\t\t\t\t\t\tbreakpoint, based on chat with Harry Fisher\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tpadding-bottom: ${space[9]}px;\n\t\t\t\t\t`,\n\t\t\t]}\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={[\n\t\t\t\t\tborderType === 'partial' &&\n\t\t\t\t\t\tpartialRightBorder(borderColour),\n\t\t\t\t\tcss`\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t`,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tbrandAltBackground,\n\tspace,\n\ttextSansBold14,\n} from '@guardian/source/foundations';\nimport { SvgNewsletter } from '@guardian/source/react-components';\n\ntype Props = {\n\ttext: string;\n\ticonSize?: 'normal' | 'small';\n};\n\nconst containerStyle = css`\n\tdisplay: flex;\n\talign-items: center;\n`;\n\nconst svgStyle = (iconSize: 'normal' | 'small') => css`\n\theight: ${iconSize === 'small' ? '20px' : '28px'};\n\n\tsvg {\n\t\tbackground: ${brandAltBackground.primary};\n\t\tborder-radius: 50%;\n\t\theight: 100%;\n\t\tpadding: 2px;\n\t\tmargin-right: ${space[1]}px;\n\t}\n`;\n\nconst spanStyle = css`\n\t${textSansBold14};\n\t/**\n\t * Typography preset styles should not be overridden.\n\t * This has been done because the styles do not directly map to the new presets.\n\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t */\n\tline-height: 1.15;\n`;\n\nexport const NewsletterDetail = ({ text, iconSize = 'normal' }: Props) => (\n\t<div css={containerStyle}>\n\t\t<div css={svgStyle(iconSize)}>\n\t\t\t<SvgNewsletter />\n\t\t</div>\n\t\t<span css={spanStyle}>{text}</span>\n\t</div>\n);\n","import { css } from '@emotion/react';\nimport {\n\theadlineBold20,\n\tpalette,\n\tspace,\n\ttextEgyptian14,\n} from '@guardian/source/foundations';\nimport {\n\tButton,\n\tSvgCheckmark,\n\tSvgPlus,\n} from '@guardian/source/react-components';\nimport { useCallback, useEffect, useState } from 'react';\nimport { submitComponentEvent } from '../client/ophan/ophan';\nimport { useIsInView } from '../lib/useIsInView';\nimport type { Newsletter } from '../types/content';\nimport { CardPicture } from './CardPicture';\nimport { useConfig } from './ConfigContext';\nimport { NewsletterDetail } from './NewsletterDetail';\n\ninterface Props {\n\tnewsletter: Newsletter;\n\tcardPosition: number;\n\tcarouselPosition?: number;\n\tgroupTitle: string;\n}\n\nexport const BUTTON_ROLE = 'GroupedNewslettersList-sign-up-button';\nexport const BUTTON_SELECTED_CLASS =\n\t'js-GroupedNewslettersList-sign-up-button--selected';\nexport const ICON_PLUS_CLASS =\n\t'js-GroupedNewslettersList-sign-up-button__plus-icon';\nexport const ICON_TICK_CLASS =\n\t'js-GroupedNewslettersList-sign-up-button__tick-icon';\n\nconst groupItemStyle = css`\n\tposition: relative;\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tmin-height: 215px;\n\tbackground-color: ${palette.neutral[97]};\n`;\n\nconst contentWrapperStyle = css`\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: ${space[1]}px;\n\tpadding-bottom: ${space[2]}px;\n\n\th3 {\n\t\t${headlineBold20};\n\t\tmargin-bottom: ${space[3]}px;\n\t}\n\n\tp {\n\t\t${textEgyptian14};\n\t\tline-height: 1.4;\n\t}\n`;\n\nconst buttonHolderStyle = css`\n\tmargin-top: auto;\n\tpadding-top: ${space[6]}px;\n`;\n\nconst buttonStyle = css`\n\tcolor: ${palette.neutral[7]};\n\tborder-color: ${palette.neutral[7]};\n\t.${ICON_TICK_CLASS} {\n\t\tdisplay: none;\n\t}\n\n\t&.${BUTTON_SELECTED_CLASS} {\n\t\tbackground-color: ${palette.neutral[7]};\n\t\tcolor: ${palette.neutral[100]};\n\n\t\t.${ICON_PLUS_CLASS} {\n\t\t\tdisplay: none;\n\t\t}\n\t\t.${ICON_TICK_CLASS} {\n\t\t\tdisplay: inline;\n\t\t}\n\t}\n\n\t&:hover {\n\t\tbackground-color: ${palette.neutral[86]};\n\t}\n\n\t&${'.'}${BUTTON_SELECTED_CLASS}:hover {\n\t\tbackground-color: ${palette.neutral[46]};\n\t\tborder-color: ${palette.neutral[46]};\n\t}\n`;\n\nconst illustrationStyle = css`\n\twidth: 100%;\n\tmargin-bottom: ${space[1]}px;\n`;\n\nconst getButtonInitialAriaAttribute = (newsletterName: string) => ({\n\t'aria-label': `add ${newsletterName} to subscribe list`,\n\t'data-aria-label-when-unchecked': `add ${newsletterName} to subscribe list`,\n\t'data-aria-label-when-checked': `remove ${newsletterName} from subscribe list`,\n});\n\nconst IllustrationPlaceholder = (props: {\n\ttheme?: string;\n\taspectWidth: number;\n\taspectHeight: number;\n\taltText?: string;\n}) => {\n\tconst getBackground = (theme?: string): string => {\n\t\tswitch (theme) {\n\t\t\tcase 'culture':\n\t\t\tcase 'news':\n\t\t\tcase 'sport':\n\t\t\tcase 'lifestyle':\n\t\t\tcase 'opinion':\n\t\t\t\treturn palette[theme][400];\n\t\t\tdefault:\n\t\t\t\treturn palette.brand[400];\n\t\t}\n\t};\n\n\treturn (\n\t\t<figure\n\t\t\trole=\"img\"\n\t\t\tcss={[\n\t\t\t\tillustrationStyle,\n\t\t\t\tcss`\n\t\t\t\t\tposition: relative;\n\t\t\t\t`,\n\t\t\t]}\n\t\t>\n\t\t\t<img\n\t\t\t\tcss={css`\n\t\t\t\t\tbackground-color: ${getBackground(props.theme)};\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: auto;\n\t\t\t\t`}\n\t\t\t\twidth={props.aspectWidth}\n\t\t\t\theight={props.aspectHeight}\n\t\t\t\talt={props.altText ?? ''}\n\t\t\t/>\n\t\t</figure>\n\t);\n};\n\nexport const NewsletterCard = ({\n\tnewsletter,\n\tgroupTitle,\n\tcardPosition,\n\tcarouselPosition,\n}: Props) => {\n\tconst [hasBeenSeen, setIsInViewRef] = useIsInView({ threshold: 0.9 });\n\tconst [haveReportedBeingSeen, setHaveReportedBeingSeen] = useState(false);\n\tconst { renderingTarget } = useConfig();\n\n\tconst reportSeen = useCallback(() => {\n\t\tconst valueData = {\n\t\t\teventDescription: 'card-viewed',\n\t\t\tnewsletterId: newsletter.identityName,\n\t\t\tcarousel: groupTitle,\n\t\t\tcardPosition,\n\t\t\tcarouselPosition,\n\t\t\ttimestamp: Date.now(),\n\t\t};\n\n\t\tvoid submitComponentEvent(\n\t\t\t{\n\t\t\t\tcomponent: {\n\t\t\t\t\tcomponentType: 'CARD',\n\t\t\t\t\tid: `DCR NewsletterCard ${newsletter.identityName}`,\n\t\t\t\t},\n\t\t\t\taction: 'VIEW',\n\t\t\t\tvalue: JSON.stringify(valueData),\n\t\t\t},\n\t\t\trenderingTarget,\n\t\t);\n\t}, [\n\t\tcardPosition,\n\t\tcarouselPosition,\n\t\tgroupTitle,\n\t\tnewsletter.identityName,\n\t\trenderingTarget,\n\t]);\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen && !haveReportedBeingSeen) {\n\t\t\treportSeen();\n\t\t\tsetHaveReportedBeingSeen(true);\n\t\t}\n\t}, [\n\t\thasBeenSeen,\n\t\thaveReportedBeingSeen,\n\t\tsetHaveReportedBeingSeen,\n\t\treportSeen,\n\t]);\n\n\treturn (\n\t\t<article\n\t\t\tref={setIsInViewRef}\n\t\t\tkey={newsletter.name}\n\t\t\tcss={groupItemStyle}\n\t\t\taria-label={newsletter.name}\n\t\t>\n\t\t\t{newsletter.illustrationCard ? (\n\t\t\t\t<div css={illustrationStyle}>\n\t\t\t\t\t<CardPicture\n\t\t\t\t\t\timageSize=\"carousel\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tmainImage={newsletter.illustrationCard}\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<IllustrationPlaceholder\n\t\t\t\t\ttheme={newsletter.theme}\n\t\t\t\t\taspectHeight={300}\n\t\t\t\t\taspectWidth={500}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<div css={contentWrapperStyle}>\n\t\t\t\t<NewsletterDetail\n\t\t\t\t\ttext={newsletter.frequency}\n\t\t\t\t\ticonSize=\"small\"\n\t\t\t\t/>\n\t\t\t\t<h3>{newsletter.name}</h3>\n\t\t\t\t<p>{newsletter.description}</p>\n\t\t\t\t<div css={buttonHolderStyle}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t{...getButtonInitialAriaAttribute(newsletter.name)}\n\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className={ICON_PLUS_CLASS}>\n\t\t\t\t\t\t\t\t\t<SvgPlus />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className={ICON_TICK_CLASS}>\n\t\t\t\t\t\t\t\t\t<SvgCheckmark />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcssOverrides={buttonStyle}\n\t\t\t\t\t\tdata-identity-name={newsletter.identityName}\n\t\t\t\t\t\tdata-list-id={newsletter.listId}\n\t\t\t\t\t\tdata-role={BUTTON_ROLE}\n\t\t\t\t\t>\n\t\t\t\t\t\tSign up\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</article>\n\t);\n};\n","import libDebounce from 'lodash.debounce';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\n/**\n * This file was copied into the source development kitchen from the following repository:\n * https://github.com/guardian/csnx/blob/main/libs/%40guardian/source-development-kitchen/src/react-components/ticker/useIsInView.ts\n *\n * Note: This version of the file uses `lodash.debounce`, whereas the original version does not.\n * As a result, we now have two versions of the `useIsInView` hookâ€”one with `lodash.debounce` and one without.\n *\n * A discussion is needed to determine the best approach for consolidating these two versions into a single file.\n * Consider whether the use of `lodash.debounce` is necessary, and if so, integrate it into the consolidated version.\n */\n\ntype Options = {\n\t/**\n\t * Defaults to `undefined` (falsy),\n\t * which trigger a change the instantaneously.\n\t *\n\t * If `true`, debounce triggers by 200ms.\n\t * Enabling debouncing ensures the target element intersects\n\t * for at least 200ms before the callback is executed\n\t */\n\tdebounce?: true;\n\t/**\n\t * Defaults to `undefined` (falsy),\n\t * which only trigger on the first intersection.\n\t *\n\t * If `true`, trigger the hook on all intersections.\n\t */\n\trepeat?: true;\n\t/** Set the initial HTML Element, if known. */\n\tnode?: HTMLElement;\n};\n\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @returns a tuple containing `[isInView, setNode]`\n */\nconst useIsInView = (\n\toptions: IntersectionObserverInit & Options,\n): [boolean, React.Dispatch<React.SetStateAction<HTMLElement | null>>] => {\n\tconst [isInView, setIsInView] = useState<boolean>(false);\n\tconst [node, setNode] = useState<HTMLElement | null>(options.node ?? null);\n\n\tconst observer = useRef<IntersectionObserver | null>(null);\n\n\tconst intersectionObserverCallback =\n\t\tuseCallback<IntersectionObserverCallback>(\n\t\t\t([entry]) => {\n\t\t\t\tif (!entry) return;\n\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\tsetIsInView(true);\n\t\t\t\t} else if (options.repeat) {\n\t\t\t\t\tsetIsInView(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[options.repeat],\n\t\t);\n\n\tconst intersectionCallback = options.debounce\n\t\t? libDebounce(intersectionObserverCallback, 200)\n\t\t: intersectionObserverCallback;\n\n\tuseEffect(() => {\n\t\toptions.node && setNode(options.node);\n\t}, [options.node]);\n\n\tuseEffect(() => {\n\t\tif (!node) return;\n\t\t// Check for browser support https://caniuse.com/intersectionobserver\n\t\tif (!('IntersectionObserver' in window)) return;\n\n\t\tobserver.current = new window.IntersectionObserver(\n\t\t\tintersectionCallback,\n\t\t\toptions,\n\t\t);\n\n\t\tobserver.current.observe(node);\n\n\t\treturn () => observer.current?.disconnect();\n\t}, [node, options, intersectionCallback]);\n\n\tuseEffect(() => {\n\t\tif (!options.repeat && isInView) observer.current?.disconnect();\n\t}, [isInView, options.repeat]);\n\n\treturn [isInView, setNode];\n};\n\nexport { useIsInView };\n"],"names":["block","css","decideAspectRatioStyles","aspectRatio","paddingRatio","getAspectRatioPadding","borderRadius","space","circularStyles","CardPicture","mainImage","alt","imageSize","loading","roundedCorners","isCircular","sources","generateSources","breakpoint","breakpoints","mobile","width","tablet","desktop","mobileLandscape","decideImageWidths","fallbackSource","getFallbackSource","picture","data-size","map","source","React","srcSet","hiResUrl","media","lowResUrl","img","src","data-chromatic","Hide","whenToHide","children","when","el","until","from","li","span","leftWidth","size","hasPageSkin","leftCol","between","and","wide","positionRelative","partialRightBorder","colour","LeftColumn","borderType","borderColour","sourcePalette","neutral","verticalMargins","section","div","containerStyle","svgStyle","iconSize","brandAltBackground","primary","spanStyle","textSansBold14","NewsletterDetail","text","SvgNewsletter","BUTTON_ROLE","BUTTON_SELECTED_CLASS","ICON_PLUS_CLASS","ICON_TICK_CLASS","groupItemStyle","palette","contentWrapperStyle","headlineBold20","textEgyptian14","buttonHolderStyle","buttonStyle","illustrationStyle","IllustrationPlaceholder","props","figure","role","theme","brand","getBackground","aspectWidth","height","aspectHeight","altText","NewsletterCard","newsletter","groupTitle","cardPosition","carouselPosition","hasBeenSeen","setIsInViewRef","useIsInView","threshold","haveReportedBeingSeen","setHaveReportedBeingSeen","useState","renderingTarget","useConfig","reportSeen","useCallback","valueData","eventDescription","newsletterId","identityName","carousel","timestamp","Date","now","submitComponentEvent","component","componentType","id","action","value","JSON","stringify","useEffect","article","ref","aria-label","name","illustrationCard","frequency","h3","p","description","Button","newsletterName","priority","iconSide","icon","className","SvgPlus","SvgCheckmark","cssOverrides","data-identity-name","data-list-id","listId","data-role","options","isInView","setIsInView","node","setNode","observer","useRef","intersectionObserverCallback","entry","isIntersecting","repeat","intersectionCallback","debounce","libDebounce","window","current","IntersectionObserver","observe","disconnect"],"sourceRoot":""}