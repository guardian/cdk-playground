{"version":3,"file":"SetAdTargeting-importable.client.web.5255f7f2ec35a31b4580.js","mappings":"wMAQO,MAAMA,EAAkB,I,IAAA,YAAEC,GAAoB,EAIpD,OAHAC,EAAAA,EAAAA,GAAeD,IACfE,EAAAA,EAAAA,IAAI,aAAc,kBAAmBF,GAE9B,IAAI,C,gFCPZ,MAAMG,EAAM,eACNC,EAAa,IAAIC,SAAqB,SAS/BC,EACZC,IAEA,MAAM,KAAEC,IAASC,EAAAA,EAAAA,GAAgBN,GAAK,IAAMC,IAU5C,OARII,IAASA,EAAKE,YAAqC,iBAAhBH,IACtCC,EAAKG,aAAiB,GAAIJ,GAC1BL,EAAAA,EAAAA,IACC,aACA,oDAAgE,OAAZK,KAI/CC,CAAI,EAGCP,EAAkBD,KACzBY,EAAAA,EAAAA,IAAOT,EAAKH,GAAa,EAAM,C","sources":["webpack://@guardian/dotcom-rendering/./src/components/SetAdTargeting.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/useAdTargeting.ts"],"sourcesContent":["import { log } from '@guardian/libs';\nimport { setAdTargeting } from '../lib/useAdTargeting';\nimport type { AdTargeting } from '../types/commercial';\n\ntype Props = {\n\tadTargeting: AdTargeting;\n};\n\nexport const SetAdTargeting = ({ adTargeting }: Props) => {\n\tsetAdTargeting(adTargeting);\n\tlog('commercial', 'ðŸŽ¯ Ad targeting', adTargeting);\n\n\treturn null;\n};\n","import { log } from '@guardian/libs';\nimport { mutate } from 'swr';\nimport useSWRImmutable from 'swr/immutable';\nimport type { AdTargeting } from '../types/commercial';\n\nconst key = 'ad-targeting';\nconst apiPromise = new Promise<AdTargeting>(() => {\n\t/* this never resolves */\n});\n\n/**\n * A hook which returns the Ad Targeting for a given page.\n *\n * @param videoLength allows overriding video length, when there are multiple videos on a page\n */\nexport const useAdTargeting = (\n\tvideoLength?: number,\n): AdTargeting | undefined => {\n\tconst { data } = useSWRImmutable(key, () => apiPromise);\n\n\tif (data && !data.disableAds && typeof videoLength === 'number') {\n\t\tdata.customParams['vl'] = videoLength;\n\t\tlog(\n\t\t\t'commercial',\n\t\t\t`ðŸŽ¯ Ad Targeting â€“ video length (vl) overriden to ${videoLength}`,\n\t\t);\n\t}\n\n\treturn data;\n};\n\nexport const setAdTargeting = (adTargeting: AdTargeting): void => {\n\tvoid mutate(key, adTargeting, false);\n};\n"],"names":["SetAdTargeting","adTargeting","setAdTargeting","log","key","apiPromise","Promise","useAdTargeting","videoLength","data","useSWRImmutable","disableAds","customParams","mutate"],"sourceRoot":""}