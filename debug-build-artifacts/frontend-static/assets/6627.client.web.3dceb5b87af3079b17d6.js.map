{"version":3,"file":"6627.client.web.3dceb5b87af3079b17d6.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/Hide.tsx","webpack://@guardian/dotcom-rendering/./src/components/NewsletterPrivacyMessage.tsx","webpack://@guardian/dotcom-rendering/./src/components/SecureSignup.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ContributionsEpicNewsletterSignup.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ThreeTierChoiceCardData.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ThreeTierChoiceCards.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/EpicButton.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicButtons.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicReminderSignedIn.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicReminderSignedOut.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicReminder.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicCtasContainer.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/utils/ophan.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/utils/threeTierChoiceCardAmounts.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useContributionsReminderEmailForm.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useContributionsReminderSignup.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/reminders.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/viewLog.ts"],"sourcesContent":["import { css } from '@emotion/react';\nimport type { Breakpoint } from '@guardian/source/foundations';\nimport { from, until } from '@guardian/source/foundations';\n\ninterface Props {\n\tchildren: React.ReactNode;\n\twhen: 'above' | 'below';\n\tbreakpoint: Breakpoint;\n}\n\ninterface PropsSpan extends Props {\n\tel?: 'span';\n}\ninterface PropsLi extends Props {\n\tel: 'li';\n}\n\nexport const Hide = ({\n\tchildren,\n\twhen,\n\tbreakpoint,\n\tel,\n}: PropsSpan | PropsLi) => {\n\tlet whenToHide;\n\tif (when === 'below') {\n\t\twhenToHide = css`\n\t\t\t${until[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t} else {\n\t\twhenToHide = css`\n\t\t\t${from[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t}\n\treturn el === 'li' ? (\n\t\t<li css={whenToHide}>{children}</li>\n\t) : (\n\t\t<span css={whenToHide}>{children}</span>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tpalette as sourcePalette,\n\ttextSans12,\n} from '@guardian/source/foundations';\nimport { Link } from '@guardian/source/react-components';\nimport { palette as themePalette } from '../palette';\n\ninterface Props {\n\ttextColor?: 'supporting' | 'regular';\n}\n\nconst GUARDIAN_PRIVACY_POLICY =\n\t'https://www.theguardian.com/help/privacy-policy';\nconst GOOGLE_PRIVACY_POLICY = 'https://policies.google.com/privacy';\nconst GOOGLE_TERMS_OF_SERVICE = 'https://policies.google.com/terms';\n\ntype PolicyUrl =\n\t| typeof GUARDIAN_PRIVACY_POLICY\n\t| typeof GOOGLE_PRIVACY_POLICY\n\t| typeof GOOGLE_TERMS_OF_SERVICE;\n\ntype LegalLinkProps = { href: PolicyUrl; children: string };\n\n/** Link component fixed with data-ignore and rel attributes for consistency in this file only */\nconst LegalLink = ({ href, children }: LegalLinkProps) => (\n\t<Link data-ignore=\"global-link-styling\" href={href} rel=\"noreferrer\">\n\t\t{children}\n\t</Link>\n);\n\nconst termsStyle = css`\n\t${textSans12};\n\t/**\n\t * Typography preset styles should not be overridden.\n\t * This has been done because the styles do not directly map to the new presets.\n\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t */\n\tline-height: 1.15;\n\ta {\n\t\t${textSans12};\n\t\ttext-decoration: underline;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\nconst textStyles = (textColor: 'supporting' | 'regular') => {\n\tswitch (textColor) {\n\t\tcase 'supporting':\n\t\t\treturn css`\n\t\t\t\tcolor: ${themePalette('--privacy-text-supporting-subdued')};\n\t\t\t\ta,\n\t\t\t\tstrong {\n\t\t\t\t\tcolor: ${themePalette('--privacy-text-supporting')};\n\t\t\t\t\t:hover {\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'regular':\n\t\t\treturn css`\n\t\t\t\tcolor: ${sourcePalette.neutral[20]};\n\t\t\t\ta,\n\t\t\t\tstrong {\n\t\t\t\t\tcolor: ${themePalette('--privacy-text-regular')};\n\t\t\t\t\t:hover {\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\nexport const NewsletterPrivacyMessage = ({\n\ttextColor = 'supporting',\n}: Props) => (\n\t<span css={[termsStyle, textStyles(textColor)]}>\n\t\t<strong>Privacy Notice: </strong>\n\t\tNewsletters may contain info about charities, online ads, and content\n\t\tfunded by outside parties. For more information see our{' '}\n\t\t<LegalLink href={GUARDIAN_PRIVACY_POLICY}>Privacy Policy</LegalLink>. We\n\t\tuse Google reCaptcha to protect our website and the Google{' '}\n\t\t<LegalLink href={GOOGLE_PRIVACY_POLICY}>Privacy Policy</LegalLink> and{' '}\n\t\t<LegalLink href={GOOGLE_TERMS_OF_SERVICE}>Terms of Service</LegalLink>{' '}\n\t\tapply.\n\t</span>\n);\n","import { css } from '@emotion/react';\nimport {\n\tisString,\n\ttype OphanAction,\n\ttype OphanComponentEvent,\n} from '@guardian/libs';\nimport { space, until } from '@guardian/source/foundations';\nimport {\n\tButton,\n\tInlineError,\n\tInlineSuccess,\n\tLink,\n\tSpinner,\n\tSvgReload,\n\tTextInput,\n} from '@guardian/source/react-components';\nimport type { CSSProperties, FormEvent, ReactEventHandler } from 'react';\nimport { useEffect, useRef, useState } from 'react';\n// Note - the package also exports a component as a named export \"ReCAPTCHA\",\n// that version will compile and render but is non-functional.\n// Use the default export instead.\nimport ReactGoogleRecaptcha from 'react-google-recaptcha';\nimport { submitComponentEvent } from '../client/ophan/ophan';\nimport { lazyFetchEmailWithTimeout } from '../lib/fetchEmail';\nimport { palette } from '../palette';\nimport type { RenderingTarget } from '../types/renderingTarget';\nimport { useConfig } from './ConfigContext';\n\n// The Google documentation specifies that if the 'recaptcha-badge' is hidden,\n// their T+C's must be displayed instead. While this component hides the\n// badge, its parent must include the T+C along side it.\n// The T+C are not included in this componet directly to reduce layout shift\n// from the island hydrating (placeholder height for the text can't\n// be accurately predicated for every breakpoint).\n// https://developers.google.com/recaptcha/docs/faq#id-like-to-hide-the-recaptcha-badge.-what-is-allowed\n\ntype OphanABTest = OphanComponentEvent['abTest'];\n\ntype Props = {\n\tnewsletterId: string;\n\tsuccessDescription: string;\n\tabTest?: OphanABTest;\n};\n\nconst formStyles = css`\n\tdisplay: grid;\n\talign-items: center;\n\tgrid-template-columns: auto min-content;\n\tgrid-template-rows: 24px 48px;\n\tgap: 0 ${space[3]}px;\n\n\tgrid-template-areas:\n\t\t'label label'\n\t\t'input button';\n\n\tlabel {\n\t\tgrid-area: label;\n\t\tdiv {\n\t\t\tcolor: ${palette('--article-text')};\n\t\t}\n\t}\n\tinput {\n\t\tgrid-area: input;\n\t\tmargin-top: 0;\n\t\tcolor: ${palette('--article-text')};\n\t\tbackground-color: ${palette('--article-background')};\n\t}\n\tbutton {\n\t\tgrid-area: button;\n\t\tbackground-color: ${palette('--recaptcha-button')};\n\t\tcolor: ${palette('--recaptcha-button-text')};\n\t\t:hover {\n\t\t\tbackground-color: ${palette('--recaptcha-button-hover')};\n\t\t}\n\t}\n`;\n\nconst formStylesWhenSignedIn = {\n\tgridTemplateColumns: 'auto 1fr',\n\tgridTemplateAreas: [\n\t\t// this is easier to parse over multiple lines\n\t\t'\"label  label\"',\n\t\t'\"button input\"',\n\t].join(' '),\n} satisfies CSSProperties;\n\nconst errorContainerStyles = css`\n\tdisplay: flex;\n\talign-items: flex-start;\n\t${until.tablet} {\n\t\tflex-wrap: wrap;\n\t}\n\tbutton {\n\t\tmargin-left: ${space[1]}px;\n\t\tbackground-color: ${palette('--recaptcha-button')};\n\t\t:hover {\n\t\t\tbackground-color: ${palette('--recaptcha-button-hover')};\n\t\t}\n\t}\n`;\n\nconst ErrorMessageWithAdvice = ({ text }: { text?: string }) => (\n\t<InlineError>\n\t\t<span>\n\t\t\t{text} Please try again or contact{' '}\n\t\t\t<Link\n\t\t\t\thref=\"mailto:customer.help@theguardian.com\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noreferrer\"\n\t\t\t>\n\t\t\t\tcustomer.help@theguardian.com\n\t\t\t</Link>\n\t\t</span>\n\t</InlineError>\n);\n\nconst SuccessMessage = ({ text }: { text?: string }) => (\n\t<InlineSuccess>\n\t\t<span>\n\t\t\t<b>Subscription Confirmed.&nbsp;</b>\n\t\t\t<span>{text}</span>\n\t\t</span>\n\t</InlineSuccess>\n);\n\nconst buildFormData = (\n\temailAddress: string,\n\tnewsletterId: string,\n\ttoken: string,\n): FormData => {\n\tconst pageRef = window.location.origin + window.location.pathname;\n\tconst refViewId = window.guardian.ophan?.pageViewId ?? '';\n\n\tconst formData = new FormData();\n\tformData.append('email', emailAddress);\n\tformData.append('csrfToken', ''); // TO DO - PR on form handlers in frontend/identity to see how/if this is needed\n\tformData.append('listName', newsletterId);\n\tformData.append('ref', pageRef);\n\tformData.append('refViewId', refViewId);\n\tformData.append('name', '');\n\tif (window.guardian.config.switches.emailSignupRecaptcha) {\n\t\tformData.append('g-recaptcha-response', token); // TO DO - PR on form handlers - is the token verified?\n\t}\n\n\treturn formData;\n};\n\nconst resolveEmailIfSignedIn = async (): Promise<string | undefined> => {\n\tconst { idApiUrl } = window.guardian.config.page;\n\tif (!idApiUrl) return;\n\tconst fetchedEmail = await lazyFetchEmailWithTimeout(idApiUrl)();\n\tif (!fetchedEmail) return;\n\treturn fetchedEmail;\n};\n\nconst postFormData = async (\n\tendpoint: string,\n\tformData: FormData,\n): Promise<Response> => {\n\tconst requestBodyStrings: string[] = [];\n\n\tfor (const [key, value] of formData.entries()) {\n\t\trequestBodyStrings.push(\n\t\t\t`${encodeURIComponent(key)}=${encodeURIComponent(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-base-to-string -- people can still sign up (apparently)\n\t\t\t\tvalue.toString(),\n\t\t\t)}`,\n\t\t);\n\t}\n\n\treturn fetch(endpoint, {\n\t\tmethod: 'POST',\n\t\tbody: requestBodyStrings.join('&'),\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t});\n};\n\ntype EventDescription =\n\t| 'click-button'\n\t| 'form-submission'\n\t| 'submission-confirmed'\n\t| 'submission-failed'\n\t| 'open-captcha'\n\t| 'captcha-load-error'\n\t| 'form-submit-error'\n\t| 'captcha-not-passed'\n\t| 'captcha-passed';\n\nconst sendTracking = (\n\tnewsletterId: string,\n\teventDescription: EventDescription,\n\trenderingTarget: RenderingTarget,\n\tabTest?: OphanABTest,\n): void => {\n\tlet action: OphanAction = 'CLICK';\n\n\tswitch (eventDescription) {\n\t\tcase 'form-submission':\n\t\tcase 'captcha-not-passed':\n\t\tcase 'captcha-passed':\n\t\t\taction = 'ANSWER';\n\t\t\tbreak;\n\t\tcase 'submission-confirmed':\n\t\t\taction = 'SUBSCRIBE';\n\t\t\tbreak;\n\t\tcase 'captcha-load-error':\n\t\tcase 'form-submit-error':\n\t\tcase 'submission-failed':\n\t\t\taction = 'CLOSE';\n\t\t\tbreak;\n\t\tcase 'open-captcha':\n\t\t\taction = 'EXPAND';\n\t\t\tbreak;\n\t\tcase 'click-button':\n\t\tdefault:\n\t\t\taction = 'CLICK';\n\t\t\tbreak;\n\t}\n\n\t// The data team use a custom date format for timestamps,\n\t// (yyy-MM-dd hh:mm:ss.ssssss UTC)\n\t// and will cast the integer value  to this\n\t// format at their end\n\tconst value = JSON.stringify({\n\t\teventDescription,\n\t\tnewsletterId,\n\t\ttimestamp: Date.now(),\n\t});\n\n\tvoid submitComponentEvent(\n\t\t{\n\t\t\taction,\n\t\t\tvalue,\n\t\t\t//check if this can be used or needs to be added\n\t\t\tcomponent: {\n\t\t\t\tcomponentType: 'NEWSLETTER_SUBSCRIPTION',\n\t\t\t\tid: `AR SecureSignup ${newsletterId}`,\n\t\t\t},\n\t\t\tabTest,\n\t\t},\n\t\trenderingTarget,\n\t);\n};\n\n/**\n * # Secure Signup\n *\n * We can only inject ReCAPTCHA client-side, and need to respond to user input.\n *\n * ---\n *\n * [`EmailSignup` on Chromatic](https://www.chromatic.com/component?appId=63e251470cfbe61776b0ef19&csfId=components-emailsignup)\n */\nexport const SecureSignup = ({\n\tnewsletterId,\n\tsuccessDescription,\n\tabTest,\n}: Props) => {\n\tconst recaptchaRef = useRef<ReactGoogleRecaptcha>(null);\n\tconst [captchaSiteKey, setCaptchaSiteKey] = useState<string>();\n\tconst [signedInUserEmail, setSignedInUserEmail] = useState<string>();\n\tconst [isWaitingForResponse, setIsWaitingForResponse] =\n\t\tuseState<boolean>(false);\n\tconst [responseOk, setResponseOk] = useState<boolean | undefined>(\n\t\tundefined,\n\t);\n\tconst [errorMessage, setErrorMessage] = useState<string | undefined>(\n\t\tundefined,\n\t);\n\n\tuseEffect(() => {\n\t\tsetCaptchaSiteKey(window.guardian.config.page.googleRecaptchaSiteKey);\n\t\tvoid resolveEmailIfSignedIn().then(setSignedInUserEmail);\n\t}, []);\n\tconst { renderingTarget } = useConfig();\n\n\tconst hasResponse = typeof responseOk === 'boolean';\n\n\tconst submitForm = async (token: string): Promise<void> => {\n\t\tconst input: HTMLInputElement | null =\n\t\t\tdocument.querySelector('input[type=\"email\"]') ?? null;\n\t\tconst emailAddress: string = input?.value ?? '';\n\n\t\tsendTracking(newsletterId, 'form-submission', renderingTarget, abTest);\n\t\tconst response = await postFormData(\n\t\t\twindow.guardian.config.page.ajaxUrl + '/email',\n\t\t\tbuildFormData(emailAddress, newsletterId, token),\n\t\t);\n\n\t\t// The response body could be accessed with await response.text()\n\t\t// here and added to state but the response is not informative\n\t\t// enough to convey the actualreason for a failure to the user,\n\t\t// so a generic failure message is used.\n\t\tsetIsWaitingForResponse(false);\n\t\tsetResponseOk(response.ok);\n\n\t\tsendTracking(\n\t\t\tnewsletterId,\n\t\t\tresponse.ok ? 'submission-confirmed' : 'submission-failed',\n\t\t\trenderingTarget,\n\t\t\tabTest,\n\t\t);\n\t};\n\n\tconst resetForm: ReactEventHandler<HTMLButtonElement> = () => {\n\t\tsetErrorMessage(undefined);\n\t\tsetResponseOk(undefined);\n\t\trecaptchaRef.current?.reset();\n\t};\n\n\tconst handleCaptchaLoadError: ReactEventHandler<HTMLDivElement> = () => {\n\t\tsendTracking(\n\t\t\tnewsletterId,\n\t\t\t'captcha-load-error',\n\t\t\trenderingTarget,\n\t\t\tabTest,\n\t\t);\n\t\tsetErrorMessage(`Sorry, the reCAPTCHA failed to load.`);\n\t\trecaptchaRef.current?.reset();\n\t};\n\n\tconst handleCaptchaComplete = (token: string | null) => {\n\t\tif (!token) {\n\t\t\tsendTracking(\n\t\t\t\tnewsletterId,\n\t\t\t\t'captcha-not-passed',\n\t\t\t\trenderingTarget,\n\t\t\t\tabTest,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tsendTracking(newsletterId, 'captcha-passed', renderingTarget, abTest);\n\t\tsetIsWaitingForResponse(true);\n\t\tsubmitForm(token).catch((error) => {\n\t\t\t// eslint-disable-next-line no-console -- unexpected error\n\t\t\tconsole.error(error);\n\t\t\tsendTracking(\n\t\t\t\tnewsletterId,\n\t\t\t\t'form-submit-error',\n\t\t\t\trenderingTarget,\n\t\t\t\tabTest,\n\t\t\t);\n\t\t\tsetErrorMessage(`Sorry, there was an error signing you up.`);\n\t\t\tsetIsWaitingForResponse(false);\n\t\t});\n\t};\n\n\tconst handleClick = (): void => {\n\t\tsendTracking(newsletterId, 'click-button', renderingTarget, abTest);\n\t};\n\n\tconst handleSubmit = (event: FormEvent<HTMLFormElement>): void => {\n\t\tevent.preventDefault();\n\t\tif (isWaitingForResponse) {\n\t\t\treturn;\n\t\t}\n\t\tsetErrorMessage(undefined);\n\t\tsendTracking(newsletterId, 'open-captcha', renderingTarget, abTest);\n\t\trecaptchaRef.current?.execute();\n\t};\n\n\tconst hideEmailInput = isString(signedInUserEmail);\n\n\treturn (\n\t\t<>\n\t\t\t<form\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\tid={`secure-signup-${newsletterId}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay:\n\t\t\t\t\t\thasResponse || isWaitingForResponse\n\t\t\t\t\t\t\t? 'none'\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t...(hideEmailInput ? formStylesWhenSignedIn : undefined),\n\t\t\t\t}}\n\t\t\t\tcss={formStyles}\n\t\t\t>\n\t\t\t\t<TextInput\n\t\t\t\t\thidden={hideEmailInput}\n\t\t\t\t\thideLabel={hideEmailInput}\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tlabel=\"Enter your email address\"\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tvalue={signedInUserEmail}\n\t\t\t\t/>\n\t\t\t\t<Button onClick={handleClick} size=\"small\" type=\"submit\">\n\t\t\t\t\tSign up\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t\t{isWaitingForResponse && (\n\t\t\t\t<div aria-label=\"loading\">\n\t\t\t\t\t<Spinner size=\"small\" />\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{!!errorMessage && <ErrorMessageWithAdvice text={errorMessage} />}\n\n\t\t\t{hasResponse &&\n\t\t\t\t(responseOk ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<SuccessMessage text={successDescription} />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div css={errorContainerStyles}>\n\t\t\t\t\t\t<ErrorMessageWithAdvice text={`Sign up failed.`} />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ticon={<SvgReload />}\n\t\t\t\t\t\t\ticonSide={'right'}\n\t\t\t\t\t\t\tonClick={resetForm}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tTry again\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\n\t\t\t{!!captchaSiteKey && (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t.grecaptcha-badge {\n\t\t\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<ReactGoogleRecaptcha\n\t\t\t\t\t\tsitekey={captchaSiteKey}\n\t\t\t\t\t\tref={recaptchaRef}\n\t\t\t\t\t\tonChange={handleCaptchaComplete}\n\t\t\t\t\t\tonError={handleCaptchaLoadError}\n\t\t\t\t\t\tsize=\"invisible\"\n\t\t\t\t\t\t// Note - the component supports an onExpired callback\n\t\t\t\t\t\t// (for when the user completed a challenge, but did\n\t\t\t\t\t\t// not submit the form before the token expired.\n\t\t\t\t\t\t// We don't need that here as completing the captcha\n\t\t\t\t\t\t// (onChange callback) triggers the submission\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { space } from '@guardian/source/foundations';\nimport type { Tracking } from '@guardian/support-dotcom-components/dist/shared/types/props/shared';\nimport { NewsletterPrivacyMessage } from '../../NewsletterPrivacyMessage';\nimport { SecureSignup } from '../../SecureSignup.importable';\n\nconst containerStyles = css`\n\tmargin: ${space[6]}px ${space[2]}px ${space[1]}px 0;\n`;\n\ninterface ContributionsEpicNewsletterSignupV2Props {\n\tnewsletterId: string;\n\tsuccessDescription: string;\n\ttracking: Tracking;\n}\n\nexport const ContributionsEpicNewsletterSignup = ({\n\tnewsletterId,\n\tsuccessDescription,\n\ttracking,\n}: ContributionsEpicNewsletterSignupV2Props): JSX.Element => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<SecureSignup\n\t\t\t\tnewsletterId={newsletterId}\n\t\t\t\tsuccessDescription={successDescription}\n\t\t\t\tabTest={{\n\t\t\t\t\tname: tracking.abTestName,\n\t\t\t\t\tvariant: tracking.abTestVariant,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<NewsletterPrivacyMessage />\n\t\t</div>\n\t);\n};\n","import { isUndefined } from '@guardian/libs';\nimport type { ChoiceInfo } from './ThreeTierChoiceCards';\n\nexport const ChoiceCardTestData_REGULAR: ChoiceInfo[] = [\n\t{\n\t\tsupportTier: 'Contribution',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support ${currencySymbol}${amount}/month`,\n\t\tbenefitsLabel: 'Support',\n\t\tbenefits: () => [\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t],\n\t\trecommended: false,\n\t},\n\t{\n\t\tsupportTier: 'SupporterPlus',\n\t\tlabel: (\n\t\t\tamount: number,\n\t\t\tcurrencySymbol: string,\n\t\t\tdiscount?: number,\n\t\t): JSX.Element | string => {\n\t\t\tif (!isUndefined(discount)) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\tSupport{' '}\n\t\t\t\t\t\t<s>\n\t\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t\t{amount}\n\t\t\t\t\t\t</s>{' '}\n\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t{amount * discount}/month{' '}\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn `Support ${currencySymbol}${amount}/month`;\n\t\t\t}\n\t\t},\n\t\tbenefitsLabel: 'All-access digital',\n\t\tbenefits: () => [\n\t\t\t'Unlimited access to the Guardian app',\n\t\t\t'Unlimited access to our new Feast App',\n\t\t\t'Ad-free reading on all your devices',\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t\t'Far fewer asks for support',\n\t\t],\n\t\trecommended: true,\n\t},\n\t{\n\t\tsupportTier: 'OneOff',\n\t\tlabel: (): string => 'Support with another amount',\n\t\tbenefitsLabel: undefined,\n\t\tbenefits: () => ['We welcome support of any size, any time'],\n\t\trecommended: false,\n\t},\n];\n\nexport const ChoiceCardTestData_US: ChoiceInfo[] = [\n\t{\n\t\tsupportTier: 'Contribution',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support ${currencySymbol}${amount}/month`,\n\t\tbenefitsLabel: 'Support',\n\t\tbenefits: () => [\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t],\n\t\trecommended: false,\n\t},\n\t{\n\t\tsupportTier: 'SupporterPlus',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support ${currencySymbol}${amount}/month`,\n\t\tbenefitsLabel: 'All-access digital',\n\t\tbenefits: () => [\n\t\t\t'Unlimited access to the Guardian app',\n\t\t\t'Unlimited access to our new Feast App',\n\t\t\t'Ad-free reading on all your devices',\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t\t'Far fewer asks for support',\n\t\t],\n\t\trecommended: true,\n\t},\n\t{\n\t\tsupportTier: 'OneOff',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support once from just ${currencySymbol}1`,\n\t\tbenefitsLabel: undefined,\n\t\tbenefits: (currencySymbol: string) => [\n\t\t\t`We welcome support of any size, any time - whether you choose to give ${currencySymbol}1 or more`,\n\t\t],\n\t\trecommended: false,\n\t},\n];\n\nexport const ChoiceCardTestData_TwoTier_REGULAR: ChoiceInfo[] = [\n\t{\n\t\tsupportTier: 'SupporterPlus',\n\t\tlabel: (\n\t\t\tamount: number,\n\t\t\tcurrencySymbol: string,\n\t\t\tdiscount?: number,\n\t\t): JSX.Element | string => {\n\t\t\tif (!isUndefined(discount)) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\tSupport{' '}\n\t\t\t\t\t\t<s>\n\t\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t\t{amount}\n\t\t\t\t\t\t</s>{' '}\n\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t{amount * discount}/month{' '}\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn `Support ${currencySymbol}${amount}/month`;\n\t\t\t}\n\t\t},\n\t\tbenefitsLabel: 'All-access digital',\n\t\tbenefits: () => [\n\t\t\t'Unlimited access to the Guardian app',\n\t\t\t'Ad-free reading on all your devices',\n\t\t\t'Exclusive newsletter for supporters',\n\t\t\t'And much more!',\n\t\t],\n\t\trecommended: true,\n\t},\n\t{\n\t\tsupportTier: 'OneOff',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support us from just ${currencySymbol}1`,\n\t\tbenefitsLabel: undefined,\n\t\tbenefits: (currencySymbol: string) => [\n\t\t\t`We welcome support of any size, any time - whether you choose to give ${currencySymbol}1 or more`,\n\t\t],\n\t\trecommended: false,\n\t},\n];\n","import { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport {\n\tpalette,\n\tspace,\n\ttextSans15,\n\ttextSansBold14,\n\ttextSansBold15,\n\tuntil,\n} from '@guardian/source/foundations';\nimport {\n\tRadio,\n\tRadioGroup,\n\tStack,\n\tSvgTickRound,\n} from '@guardian/source/react-components';\nimport type { CountryGroupId } from '@guardian/support-dotcom-components';\nimport {\n\tcountryCodeToCountryGroupId,\n\tgetLocalCurrencySymbol,\n} from '@guardian/support-dotcom-components';\nimport type { Dispatch, SetStateAction } from 'react';\nimport {\n\tChoiceCardTestData_REGULAR,\n\tChoiceCardTestData_TwoTier_REGULAR,\n\tChoiceCardTestData_US,\n} from './ThreeTierChoiceCardData';\nimport type {\n\tSupportRatePlan,\n\tSupportTier,\n} from './utils/threeTierChoiceCardAmounts';\nimport { threeTierChoiceCardAmounts } from './utils/threeTierChoiceCardAmounts';\n\nconst supportTierChoiceCardStyles = (selected: boolean) => css`\n\tdisplay: block;\n\tborder: ${selected\n\t\t? `2px solid ${palette.brand['500']}`\n\t\t: `1px solid ${palette.neutral[46]}`};\n\tbackground-color: ${selected ? palette.sport[800] : palette.neutral[100]};\n\tborder-radius: 10px;\n\tpadding: ${selected\n\t\t? `6px ${space[5]}px 10px ${space[5]}px`\n\t\t: `6px ${space[5]}px`};\n`;\n\nconst benefitsStyles = css`\n\t${textSans15};\n\tcolor: ${palette.neutral[7]};\n\tlist-style: none;\n\tmargin: 0 0 0 -4px;\n\tpadding: 0;\n\n\tli + li {\n\t\tmargin-top: ${space[2]}px;\n\t}\n\n\tli {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tmargin-top: ${space[2]}px;\n\t}\n\n\tsvg {\n\t\tflex-shrink: 0;\n\t\tmargin-right: ${space[2]}px;\n\t\tfill: ${palette.brand[400]};\n\t}\n`;\n\nconst benefitsLabelStyles = css`\n\tcolor: ${palette.neutral[0]};\n\t${textSans15};\n\n\tstrong {\n\t\t${textSansBold15};\n\t}\n`;\n\nconst labelOverrideStyles = css`\n\t+ label div {\n\t\tfont-weight: bold;\n\t\ts {\n\t\t\tfont-weight: normal;\n\t\t}\n\t}\n`;\n\nconst supportingTextStyles = css`\n\tmargin-top: ${space[4]}px;\n`;\n\nconst recommendedPillStyles = css`\n\tborder-radius: 4px;\n\tpadding: ${space[1]}px ${space[2]}px;\n\tbackground-color: ${palette.brand[400]};\n\t${textSansBold14};\n\tcolor: ${palette.neutral[100]};\n\tposition: absolute;\n\ttop: -${space[2]}px;\n\t${until.phablet} {\n\t\tright: ${space[3]}px;\n\t}\n\tright: ${space[5]}px;\n`;\n\nconst discountedPillStyles = css`\n\tborder-radius: 4px;\n\tpadding: ${space[1]}px ${space[2]}px;\n\tbackground-color: ${palette.error[400]};\n\t${textSansBold14};\n\tcolor: ${palette.neutral[100]};\n\tposition: absolute;\n\ttop: -${space[2]}px;\n\t${until.phablet} {\n\t\tright: ${space[3]}px;\n\t}\n\tright: ${space[5]}px;\n`;\n\nexport type ChoiceInfo = {\n\tsupportTier: SupportTier;\n\tlabel: (\n\t\tamount: number,\n\t\tcurrencySymbol: string,\n\t\tdiscount?: number,\n\t) => JSX.Element | string;\n\tbenefitsLabel?: string;\n\tbenefits: (currencySymbol: string) => string[];\n\trecommended: boolean;\n};\n\nfunction getChoiceAmount(\n\tsupportTier: SupportTier,\n\tratePlan: SupportRatePlan,\n\tcountryGroupId: CountryGroupId,\n): number {\n\treturn threeTierChoiceCardAmounts[ratePlan][countryGroupId][supportTier];\n}\n\nconst SupportingBenefits = ({\n\tbenefitsLabel,\n\tbenefits,\n}: {\n\tbenefitsLabel: string | undefined;\n\tbenefits: string[];\n}) => {\n\tconst isBenefit = !!benefitsLabel;\n\treturn (\n\t\t<div css={supportingTextStyles}>\n\t\t\t{!!benefitsLabel && (\n\t\t\t\t<span css={benefitsLabelStyles}>\n\t\t\t\t\tUnlock <strong>{benefitsLabel}</strong> benefits:\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t<ul css={benefitsStyles}>\n\t\t\t\t{benefits.map((benefit) => (\n\t\t\t\t\t<li key={benefit}>\n\t\t\t\t\t\t{isBenefit && <SvgTickRound size=\"xsmall\" />}\n\t\t\t\t\t\t{benefit}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nconst RecommendedPill = () => {\n\treturn <div css={recommendedPillStyles}>Recommended</div>;\n};\n\nconst DiscountedPill = ({ discount }: { discount: number }) => {\n\treturn <div css={discountedPillStyles}>{discount}% off</div>;\n};\n\ntype ThreeTierChoiceCardsProps = {\n\tselectedProduct: SupportTier;\n\tsetSelectedProduct: Dispatch<SetStateAction<SupportTier>>;\n\tcountryCode?: string;\n\tvariantOfChoiceCard: string;\n\tsupporterPlusDiscount?: number;\n};\n\nconst getChoiceCardData = (choiceCardVariant: string): ChoiceInfo[] => {\n\tswitch (choiceCardVariant) {\n\t\tcase 'US_THREE_TIER_CHOICE_CARDS':\n\t\t\treturn ChoiceCardTestData_US;\n\t\tcase 'US_CHECKOUT_THREE_TIER_CHOICE_CARDS':\n\t\t\treturn ChoiceCardTestData_US;\n\t\tcase 'TWO_TIER_CHOICE_CARDS':\n\t\t\treturn ChoiceCardTestData_TwoTier_REGULAR;\n\t\tdefault:\n\t\t\treturn ChoiceCardTestData_REGULAR;\n\t}\n};\n\nexport const ThreeTierChoiceCards = ({\n\tcountryCode,\n\tselectedProduct,\n\tsetSelectedProduct,\n\tvariantOfChoiceCard,\n\tsupporterPlusDiscount,\n}: ThreeTierChoiceCardsProps) => {\n\tconst currencySymbol = getLocalCurrencySymbol(countryCode);\n\tconst countryGroupId = countryCodeToCountryGroupId(countryCode);\n\n\tconst Choices = getChoiceCardData(variantOfChoiceCard);\n\n\treturn (\n\t\t<RadioGroup\n\t\t\tcssOverrides={css`\n\t\t\t\tmargin-top: ${space[6]}px;\n\t\t\t`}\n\t\t>\n\t\t\t<Stack space={3}>\n\t\t\t\t{Choices.map(\n\t\t\t\t\t({\n\t\t\t\t\t\tsupportTier,\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tbenefitsLabel,\n\t\t\t\t\t\tbenefits,\n\t\t\t\t\t\trecommended,\n\t\t\t\t\t}) => {\n\t\t\t\t\t\tconst choiceAmount = getChoiceAmount(\n\t\t\t\t\t\t\tsupportTier,\n\t\t\t\t\t\t\t'Monthly',\n\t\t\t\t\t\t\tcountryGroupId,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst selected = selectedProduct === supportTier;\n\n\t\t\t\t\t\tconst hasDiscount =\n\t\t\t\t\t\t\t!isUndefined(supporterPlusDiscount) &&\n\t\t\t\t\t\t\tsupportTier === 'SupporterPlus';\n\n\t\t\t\t\t\tconst radioId = `choicecard-${supportTier}`;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={supportTier}\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{hasDiscount && (\n\t\t\t\t\t\t\t\t\t<DiscountedPill\n\t\t\t\t\t\t\t\t\t\tdiscount={supporterPlusDiscount * 100}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{recommended && !hasDiscount && (\n\t\t\t\t\t\t\t\t\t<RecommendedPill />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\tcss={supportTierChoiceCardStyles(selected)}\n\t\t\t\t\t\t\t\t\thtmlFor={radioId}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\t\t\tlabel={label(\n\t\t\t\t\t\t\t\t\t\t\tchoiceAmount,\n\t\t\t\t\t\t\t\t\t\t\tcurrencySymbol,\n\t\t\t\t\t\t\t\t\t\t\tsupporterPlusDiscount,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tid={radioId}\n\t\t\t\t\t\t\t\t\t\tvalue={supportTier}\n\t\t\t\t\t\t\t\t\t\tcssOverrides={labelOverrideStyles}\n\t\t\t\t\t\t\t\t\t\tsupporting={\n\t\t\t\t\t\t\t\t\t\t\tselected ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<SupportingBenefits\n\t\t\t\t\t\t\t\t\t\t\t\t\tbenefitsLabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbenefitsLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbenefits={benefits(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrencySymbol,\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tchecked={selected}\n\t\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedProduct(supportTier);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t</Stack>\n\t\t</RadioGroup>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/Button.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css, ThemeProvider } from '@emotion/react';\nimport type { OphanComponentEvent } from '@guardian/libs';\nimport { palette } from '@guardian/source/foundations';\nimport {\n\tButton as DSButton,\n\tLinkButton,\n\tSvgArrowRightStraight,\n} from '@guardian/source/react-components';\nimport React from 'react';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport {\n\tOPHAN_COMPONENT_EVENT_PRIMARY_CTA,\n\tOPHAN_COMPONENT_EVENT_SECONDARY_CTA,\n} from '../utils/ophan';\n\n// Custom theme for Button/LinkButton\n// See also `tertiaryButtonOverrides` below.\nconst buttonStyles = {\n\ttextPrimary: palette.neutral[7],\n\tbackgroundPrimary: palette.brandAlt[400],\n\tbackgroundPrimaryHover: palette.brandAlt[300],\n\ttextSecondary: palette.neutral[7],\n\tbackgroundSecondary: palette.neutral[93],\n\tbackgroundSecondaryHover: palette.neutral[86],\n\tborderSecondary: palette.neutral[86],\n};\n\nconst buttonStylesForTest = {\n\ttextPrimary: '#FFFFFF',\n\tbackgroundPrimary: '#051D32',\n\tbackgroundPrimaryHover: '#072744',\n\ttextSecondary: palette.neutral[7],\n\tbackgroundSecondary: palette.neutral[93],\n\tbackgroundSecondaryHover: palette.neutral[86],\n\tborderSecondary: palette.neutral[86],\n};\n\nconst contributionsTheme = {\n\tbutton: buttonStyles,\n\tlink: buttonStyles,\n};\n\nconst contributionsThemeForTest = {\n\tbutton: buttonStylesForTest,\n\tlink: buttonStylesForTest,\n};\n\ntype Url = string;\n\ntype Props = {\n\t// Accept a function or a string;\n\t// A function will render a <Button>\n\t// A string will render a <LinkButton>\n\t// Both using the same interface\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\tonClickAction: Function | Url;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n\tchildren: React.ReactElement | string;\n\tpriority?: 'primary' | 'secondary';\n\tshowArrow?: boolean;\n\tisTertiary?: boolean;\n\tcssOverrides?: SerializedStyles;\n\ticon?: React.ReactElement;\n\tisColourInTestVariant?: boolean;\n};\n\n// Overrides for tertiary button\n// Unfortunatly they all need !important :(\nconst tertiaryButtonOverrides = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tborder: 1px solid ${palette.neutral[7]} !important;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tbackground-color: transparent !important;\n\n\t:hover {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tbackground-color: ${palette.neutral[86]} !important;\n\t}\n`;\n\nexport const EpicButton: ReactComponent<Props> = (allProps: Props) => {\n\tconst {\n\t\tonClickAction,\n\t\tsubmitComponentEvent,\n\t\tchildren,\n\t\tshowArrow = false,\n\t\tpriority = 'primary',\n\t\tisTertiary,\n\t\tcssOverrides,\n\t\ticon,\n\t\tisColourInTestVariant,\n\t\t...props\n\t} = allProps;\n\n\tconst onButtonCtaClick = () => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(\n\t\t\t\tpriority == 'primary'\n\t\t\t\t\t? OPHAN_COMPONENT_EVENT_PRIMARY_CTA\n\t\t\t\t\t: OPHAN_COMPONENT_EVENT_SECONDARY_CTA,\n\t\t\t);\n\t\t}\n\t};\n\n\tif (typeof onClickAction === 'string') {\n\t\t// LinkButton doesn't support 'tertiary' priority (unlike Button)\n\t\t// So we'll map that to 'primary' and apply a CSS override on both of\n\t\t// them so they get the same styles for 'tertiary' priority\n\t\treturn (\n\t\t\t<ThemeProvider\n\t\t\t\ttheme={\n\t\t\t\t\tisColourInTestVariant\n\t\t\t\t\t\t? contributionsThemeForTest\n\t\t\t\t\t\t: contributionsTheme\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<LinkButton\n\t\t\t\t\thref={onClickAction}\n\t\t\t\t\ticon={icon ?? <SvgArrowRightStraight />}\n\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\tonClick={onButtonCtaClick}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tpriority={isTertiary ? 'primary' : priority}\n\t\t\t\t\tcssOverrides={css(\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\t? [tertiaryButtonOverrides, cssOverrides]\n\t\t\t\t\t\t\t: cssOverrides,\n\t\t\t\t\t)}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</LinkButton>\n\t\t\t</ThemeProvider>\n\t\t);\n\t}\n\treturn (\n\t\t<ThemeProvider\n\t\t\ttheme={\n\t\t\t\tisColourInTestVariant\n\t\t\t\t\t? contributionsThemeForTest\n\t\t\t\t\t: contributionsTheme\n\t\t\t}\n\t\t>\n\t\t\t<DSButton\n\t\t\t\ticonSide=\"right\"\n\t\t\t\ticon={showArrow ? <SvgArrowRightStraight /> : undefined}\n\t\t\t\tonClick={(): void => onClickAction()}\n\t\t\t\tpriority={isTertiary ? 'primary' : priority}\n\t\t\t\tcssOverrides={css(\n\t\t\t\t\tisTertiary\n\t\t\t\t\t\t? [tertiaryButtonOverrides, cssOverrides]\n\t\t\t\t\t\t: cssOverrides,\n\t\t\t\t)}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DSButton>\n\t\t</ThemeProvider>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicButtons.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport type { OphanComponentEvent } from '@guardian/libs';\nimport { space } from '@guardian/source/foundations';\nimport {\n\tcountryCodeToCountryGroupId,\n\tSecondaryCtaType,\n} from '@guardian/support-dotcom-components';\nimport type { EpicVariant } from '@guardian/support-dotcom-components/dist/shared/types/abTests/epic';\nimport type {\n\tCta,\n\tTracking,\n} from '@guardian/support-dotcom-components/dist/shared/types/props/shared';\nimport { useEffect } from 'react';\nimport { useIsInView } from '../../../../lib/useIsInView';\nimport { hasSetReminder } from '../../lib/reminders';\nimport {\n\taddChoiceCardsOneTimeParams,\n\taddChoiceCardsParams,\n\taddChoiceCardsProductParams,\n\taddRegionIdAndTrackingParamsToSupportUrl,\n\tisSupportUrl,\n} from '../../lib/tracking';\nimport {\n\tgetReminderViewEvent,\n\tOPHAN_COMPONENT_EVENT_CTAS_VIEW,\n\tOPHAN_COMPONENT_EVENT_REMINDER_OPEN,\n} from '../utils/ophan';\nimport {\n\ttype SupportTier,\n\tthreeTierChoiceCardAmounts,\n} from '../utils/threeTierChoiceCardAmounts';\nimport { EpicButton } from './EpicButton';\n\nconst paymentImageStyles = css`\n\tdisplay: inline-block;\n\twidth: auto;\n\theight: 25px;\n\tmargin: ${space[1]}px 0;\n`;\n\nconst buttonWrapperStyles: SerializedStyles = css`\n\tmargin: ${space[6]}px ${space[2]}px ${space[1]}px 0;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\n\t&.hidden {\n\t\tdisplay: none;\n\t}\n`;\n\nconst buttonMarginStyles: SerializedStyles = css`\n\tmargin: ${space[1]}px ${space[2]}px ${space[1]}px 0;\n`;\n\nconst PrimaryCtaButton = ({\n\tcta,\n\ttracking,\n\tcountryCode,\n\tamountsTestName,\n\tamountsVariantName,\n\tnumArticles,\n\tsubmitComponentEvent,\n\tisColourInTestVariant,\n}: {\n\tcta?: Cta;\n\ttracking: Tracking;\n\tcountryCode?: string;\n\tamountsTestName?: string;\n\tamountsVariantName?: string;\n\tnumArticles: number;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n\tisColourInTestVariant?: boolean;\n}): JSX.Element | null => {\n\tif (!cta) {\n\t\treturn null;\n\t}\n\n\tconst buttonText = cta.text || 'Support The Guardian';\n\tconst baseUrl = cta.baseUrl || 'https://support.theguardian.com/contribute';\n\tconst urlWithRegionAndTracking = addRegionIdAndTrackingParamsToSupportUrl(\n\t\tbaseUrl,\n\t\ttracking,\n\t\tnumArticles,\n\t\tcountryCode,\n\t\tamountsTestName,\n\t\tamountsVariantName,\n\t);\n\n\treturn (\n\t\t<div css={buttonMarginStyles}>\n\t\t\t<EpicButton\n\t\t\t\tonClickAction={urlWithRegionAndTracking}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tshowArrow={true}\n\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t>\n\t\t\t\t{buttonText}\n\t\t\t</EpicButton>\n\t\t</div>\n\t);\n};\n\nconst SecondaryCtaButton = ({\n\tcta,\n\ttracking,\n\tnumArticles,\n\tcountryCode,\n\tsubmitComponentEvent,\n}: {\n\tcta: Cta;\n\ttracking: Tracking;\n\tcountryCode?: string;\n\tnumArticles: number;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n}): JSX.Element | null => {\n\tconst url = addRegionIdAndTrackingParamsToSupportUrl(\n\t\tcta.baseUrl,\n\t\ttracking,\n\t\tnumArticles,\n\t\tcountryCode,\n\t);\n\treturn (\n\t\t<div css={buttonMarginStyles}>\n\t\t\t<EpicButton\n\t\t\t\tonClickAction={url}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tshowArrow={true}\n\t\t\t\tpriority=\"secondary\"\n\t\t\t>\n\t\t\t\t{cta.text}\n\t\t\t</EpicButton>\n\t\t</div>\n\t);\n};\n\ninterface ContributionsEpicButtonsProps {\n\tvariant: EpicVariant;\n\ttracking: Tracking;\n\tcountryCode?: string;\n\tonOpenReminderClick: () => void;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n\tisReminderActive: boolean;\n\tisSignedIn: boolean;\n\tthreeTierChoiceCardSelectedProduct: SupportTier;\n\tshowChoiceCards?: boolean;\n\tamountsTestName?: string;\n\tamountsVariantName?: string;\n\tnumArticles: number;\n\tvariantOfChoiceCard?: string;\n\tisColourInTestVariant?: boolean;\n}\n\nexport const ContributionsEpicButtons = ({\n\tvariant,\n\ttracking,\n\tcountryCode,\n\tonOpenReminderClick,\n\tsubmitComponentEvent,\n\tisReminderActive,\n\tisSignedIn,\n\tshowChoiceCards,\n\tthreeTierChoiceCardSelectedProduct,\n\tamountsTestName,\n\tamountsVariantName,\n\tnumArticles,\n\tvariantOfChoiceCard,\n\tisColourInTestVariant,\n}: ContributionsEpicButtonsProps): JSX.Element | null => {\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tdebounce: true,\n\t});\n\n\tconst { secondaryCta, showReminderFields } = variant;\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen && submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_CTAS_VIEW);\n\n\t\t\tif (showReminderFields && !hasSetReminder()) {\n\t\t\t\tsubmitComponentEvent(getReminderViewEvent(isSignedIn));\n\t\t\t}\n\t\t}\n\t}, [hasBeenSeen, isSignedIn, showReminderFields, submitComponentEvent]);\n\n\tif (!variant.cta) {\n\t\treturn null;\n\t}\n\n\tconst getChoiceCardCta = (cta: Cta): Cta => {\n\t\t/** In the US - direct 50 % traffic to the checkout page and 50 % traffic to the landing page for the AB test  */\n\n\t\tif (showChoiceCards && countryCode === 'US') {\n\t\t\tif (threeTierChoiceCardSelectedProduct === 'OneOff') {\n\t\t\t\tif (\n\t\t\t\t\tvariantOfChoiceCard ===\n\t\t\t\t\t'US_CHECKOUT_THREE_TIER_CHOICE_CARDS'\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: cta.text,\n\t\t\t\t\t\tbaseUrl: addChoiceCardsParams(\n\t\t\t\t\t\t\t'https://support.theguardian.com/contribute/checkout',\n\t\t\t\t\t\t\t'ONE_OFF',\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttext: cta.text,\n\t\t\t\t\tbaseUrl: addChoiceCardsOneTimeParams(cta.baseUrl),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/** Contribution amount is variable, unlike the SupporterPlus amount which is fixed */\n\t\t\tconst countryGroupId = countryCodeToCountryGroupId(countryCode);\n\t\t\tconst contributionAmount =\n\t\t\t\tthreeTierChoiceCardSelectedProduct === 'Contribution'\n\t\t\t\t\t? threeTierChoiceCardAmounts['Monthly'][countryGroupId]\n\t\t\t\t\t\t\t.Contribution\n\t\t\t\t\t: undefined;\n\t\t\tconst url =\n\t\t\t\tvariantOfChoiceCard === 'US_CHECKOUT_THREE_TIER_CHOICE_CARDS'\n\t\t\t\t\t? 'https://support.theguardian.com/checkout'\n\t\t\t\t\t: cta.baseUrl;\n\n\t\t\treturn {\n\t\t\t\ttext: cta.text,\n\t\t\t\tbaseUrl: addChoiceCardsProductParams(\n\t\t\t\t\turl,\n\t\t\t\t\tthreeTierChoiceCardSelectedProduct,\n\t\t\t\t\t'Monthly',\n\t\t\t\t\tcontributionAmount,\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t/** Not in the US - direct taffic to the landing page */\n\t\tif (\n\t\t\tshowChoiceCards &&\n\t\t\tvariantOfChoiceCard === 'THREE_TIER_CHOICE_CARDS'\n\t\t) {\n\t\t\tif (threeTierChoiceCardSelectedProduct === 'OneOff') {\n\t\t\t\t/**\n\t\t\t\t * OneOff payments are not supported by the generic checkout yet.\n\t\t\t\t * We also have no way of highlighting to a contributor that \"OneOff\"\n\t\t\t\t * was selected, so we just send them to the homepage.\n\t\t\t\t */\n\t\t\t\treturn {\n\t\t\t\t\ttext: cta.text,\n\t\t\t\t\tbaseUrl: 'https://support.theguardian.com/contribute',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: cta.text,\n\t\t\t\tbaseUrl: addChoiceCardsProductParams(\n\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\tthreeTierChoiceCardSelectedProduct,\n\t\t\t\t\t'Monthly',\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\treturn cta;\n\t};\n\n\tconst getCta = (cta: Cta): Cta =>\n\t\tshowChoiceCards ? getChoiceCardCta(cta) : cta;\n\n\tconst openReminder = () => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_REMINDER_OPEN);\n\t\t}\n\t\tonOpenReminderClick();\n\t};\n\n\tconst hasSupportCta =\n\t\tisSupportUrl(variant.cta.baseUrl) ||\n\t\t(secondaryCta?.type === SecondaryCtaType.Custom &&\n\t\t\tisSupportUrl(secondaryCta.cta.baseUrl));\n\n\treturn (\n\t\t<div ref={setNode} css={buttonWrapperStyles} data-testid=\"epic=buttons\">\n\t\t\t{!isReminderActive && (\n\t\t\t\t<>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PrimaryCtaButton\n\t\t\t\t\t\t\tcta={getCta(variant.cta)}\n\t\t\t\t\t\t\ttracking={tracking}\n\t\t\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t\t\t\tamountsTestName={amountsTestName}\n\t\t\t\t\t\t\tamountsVariantName={amountsVariantName}\n\t\t\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{secondaryCta?.type === SecondaryCtaType.Custom &&\n\t\t\t\t\t\t\t!!secondaryCta.cta.baseUrl &&\n\t\t\t\t\t\t\t!!secondaryCta.cta.text && (\n\t\t\t\t\t\t\t\t<SecondaryCtaButton\n\t\t\t\t\t\t\t\t\tcta={secondaryCta.cta}\n\t\t\t\t\t\t\t\t\ttracking={tracking}\n\t\t\t\t\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\n\t\t\t\t\t{secondaryCta?.type ===\n\t\t\t\t\t\tSecondaryCtaType.ContributionsReminder &&\n\t\t\t\t\t\tshowReminderFields &&\n\t\t\t\t\t\t!hasSetReminder() && (\n\t\t\t\t\t\t\t<div css={buttonMarginStyles}>\n\t\t\t\t\t\t\t\t<EpicButton\n\t\t\t\t\t\t\t\t\tonClickAction={openReminder}\n\t\t\t\t\t\t\t\t\tisTertiary={true}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{showReminderFields.reminderCta}\n\t\t\t\t\t\t\t\t</EpicButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t{hasSupportCta && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\twidth={422}\n\t\t\t\t\t\t\theight={60}\n\t\t\t\t\t\t\tsrc=\"https://assets.guim.co.uk/images/acquisitions/2db3a266287f452355b68d4240df8087/payment-methods.png\"\n\t\t\t\t\t\t\talt=\"Accepted payment methods: Visa, Mastercard, American Express and PayPal\"\n\t\t\t\t\t\t\tcss={paymentImageStyles}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicReminderSignedIn.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tarticle17,\n\tfrom,\n\theadlineBold20,\n\tpalette,\n\tspace,\n\ttextSans15,\n\ttextSansBold15,\n} from '@guardian/source/foundations';\nimport {\n\tButton,\n\tSvgCheckmark,\n\tSvgCross,\n} from '@guardian/source/react-components';\nimport { StraightLines } from '@guardian/source-development-kitchen/react-components';\nimport { Hide } from '../../../Hide';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { ensureHasPreposition, ReminderStatus } from '../../lib/reminders';\n\n// --- Styles --- //\n\nconst rootStyles = css`\n\tposition: relative;\n\n\tbackground-color: ${palette.neutral[97]};\n\n\t* {\n\t\tbox-sizing: border-box;\n\t}\n\n\tp {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst lineWrapperStyles = css`\n\tmargin: ${space[3]}px auto;\n`;\n\nconst remindHeading = css`\n\t${headlineBold20};\n\tmargin: 0 ${space[5]}px ${space[2]}px 0;\n`;\n\nconst successTextStyles = css`\n\tmargin: 0 auto ${space[2]}px;\n\t${article17};\n`;\n\nconst linkStyles = css`\n\tcolor: ${palette.neutral[7]};\n`;\n\nconst errorTextStyles = css`\n\t${textSansBold15};\n\tcolor: ${palette.error[400]};\n\tfont-style: italic;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tmargin-top: ${space[2]}px !important;\n\tmargin-bottom: 0;\n`;\n\nconst closeButtonContainerStyles = css`\n\tdisplay: none;\n\tposition: absolute;\n\ttop: 20px;\n\tright: 0;\n\n\t${from.tablet} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst bodyCopyStyles = css`\n\t${article17};\n\t${from.tablet} {\n\t\tmargin-right: ${space[9]}px;\n\t}\n`;\n\nconst infoCopyStyles = css`\n\t${textSans15};\n\tfont-style: italic;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tmargin-top: ${space[2]}px !important;\n`;\n\nconst ctaContainerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tmargin-top: ${space[4]}px;\n\n\t& > * + * {\n\t\tmargin-left: ${space[6]}px;\n\t}\n`;\n\n// --- Types --- //\n\nexport interface ContributionsEpicReminderSignedInProps {\n\treminderLabel: string;\n\treminderStatus: ReminderStatus;\n\tonSetReminderClick: () => void;\n\tonCloseReminderClick: () => void;\n}\n\n// --- Components --- //\n\nexport const ContributionsEpicReminderSignedIn: ReactComponent<\n\tContributionsEpicReminderSignedInProps\n> = ({\n\treminderLabel,\n\treminderStatus,\n\tonSetReminderClick,\n\tonCloseReminderClick,\n}: ContributionsEpicReminderSignedInProps) => {\n\tconst reminderDateWithPreposition = ensureHasPreposition(reminderLabel);\n\n\treturn (\n\t\t<div css={rootStyles}>\n\t\t\t<div css={closeButtonContainerStyles}>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={onCloseReminderClick}\n\t\t\t\t\ticon={<SvgCross />}\n\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\thideLabel={true}\n\t\t\t\t>\n\t\t\t\t\tClose\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t<div css={lineWrapperStyles}>\n\t\t\t\t<StraightLines />\n\t\t\t</div>\n\n\t\t\t{reminderStatus === ReminderStatus.Completed ? (\n\t\t\t\t<>\n\t\t\t\t\t<h4 css={remindHeading}>\n\t\t\t\t\t\tThank you! Your reminder is set.\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p css={successTextStyles}>\n\t\t\t\t\t\tWe will be in touch to invite you to contribute. Look\n\t\t\t\t\t\tout for a message in your inbox{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}. If you have any questions\n\t\t\t\t\t\tabout contributing, please{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"mailto:contribution.support@theguardian.com\"\n\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tcontact us\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<p css={bodyCopyStyles}>\n\t\t\t\t\t\tShow your support for the Guardian at a later date. To\n\t\t\t\t\t\tmake this easier, set a reminder and we’ll email you{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<div css={ctaContainerStyles}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={onSetReminderClick}\n\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Hide>\n\n\t\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={onSetReminderClick}\n\t\t\t\t\t\t\t\t\ticon={<SvgCheckmark />}\n\t\t\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={onCloseReminderClick}\n\t\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNot now\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{reminderStatus === ReminderStatus.Error && (\n\t\t\t\t\t\t<p css={errorTextStyles}>\n\t\t\t\t\t\t\tSorry we couldn&apos;t set a reminder for you this\n\t\t\t\t\t\t\ttime. Please try again later.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<p css={infoCopyStyles}>\n\t\t\t\t\t\tWe will send you a maximum of two emails{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}. To find out what personal\n\t\t\t\t\t\tdata we collect and how we use it, view our{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPrivacy Policy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicReminderSignedOut.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport {\n\tarticle17,\n\tfrom,\n\theadlineBold20,\n\tpalette,\n\tspace,\n\ttextSans15,\n\ttextSansBold15,\n} from '@guardian/source/foundations';\nimport {\n\tButton,\n\tSvgArrowRightStraight,\n\tSvgCross,\n\tTextInput,\n} from '@guardian/source/react-components';\nimport { StraightLines } from '@guardian/source-development-kitchen/react-components';\nimport { useContributionsReminderEmailForm } from '../../hooks/useContributionsReminderEmailForm';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { ensureHasPreposition, ReminderStatus } from '../../lib/reminders';\n\n// --- Styles --- //\n\nconst rootStyles = css`\n\tposition: relative;\n\n\t* {\n\t\tbox-sizing: border-box;\n\t}\n`;\n\nconst closeButtonStyles = css`\n\twidth: 30px;\n\theight: 30px;\n\tcursor: pointer;\n\tposition: absolute;\n\ttop: 20px;\n\tright: 0;\n\tbackground: none;\n\tborder: none;\n\tpadding: 0;\n`;\n\nconst lineWrapperStyles = css`\n\tmargin: ${space[3]}px auto;\n`;\n\nconst containerStyles = css`\n\tpadding: 0 ${space[1]}px;\n`;\n\nconst remindHeading = css`\n\t${headlineBold20};\n\tmargin: 0 ${space[5]}px ${space[2]}px 0;\n`;\n\nconst successTextStyles = css`\n\tmargin: 0 auto ${space[2]}px;\n\t${article17};\n`;\n\nconst linkStyles = css`\n\tcolor: ${palette.neutral[7]};\n`;\n\nconst formWrapper = css`\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\n\t${from.tablet} {\n\t\tflex-direction: row;\n\t\talign-items: flex-end;\n\t\tjustify-content: flex-start;\n\t}\n`;\n\nconst inputWrapper = css`\n\twidth: 100%;\n\tmargin-bottom: ${space[2]}px;\n\tflex-grow: 1;\n\n\t${from.tablet} {\n\t\twidth: auto;\n\t\tmargin-right: ${space[2]}px;\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst formTextStyles = css`\n\t${textSans15};\n\tfont-style: italic;\n\tmargin-top: ${space[1]}px;\n`;\n\nconst errorTextStyles = css`\n\t${textSansBold15};\n\tcolor: ${palette.error[400]};\n\tfont-style: italic;\n\tmargin-top: ${space[1]}px;\n\tmargin-bottom: 0;\n`;\n\nconst getCustomSubmitStyles = (\n\tisDisabled: boolean,\n): SerializedStyles | undefined => {\n\tif (isDisabled) {\n\t\t// Unfortunately these overrides need !important as otherwise they'll lose\n\t\t// the specificity war against the default Source styles.\n\t\treturn css`\n\t\t\tpointer-events: none;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tcolor: ${palette.neutral[60]} !important;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tbackground-color: ${palette.neutral[93]} !important;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tborder: 1px solid ${palette.neutral[86]} !important;\n\t\t`;\n\t}\n\n\treturn undefined;\n};\n\n// --- Types --- //\n\nexport interface ContributionsEpicReminderSignedOutProps {\n\treminderLabel: string;\n\treminderStatus: ReminderStatus;\n\tonSetReminderClick: (email: string) => void;\n\tonCloseReminderClick: () => void;\n}\n\n// --- Components --- //\n\nexport const ContributionsEpicReminderSignedOut: ReactComponent<\n\tContributionsEpicReminderSignedOutProps\n> = ({\n\treminderLabel,\n\treminderStatus,\n\tonSetReminderClick,\n\tonCloseReminderClick,\n}: ContributionsEpicReminderSignedOutProps) => {\n\tconst { email, updateEmail, inputError, handleSubmit } =\n\t\tuseContributionsReminderEmailForm();\n\n\tconst reminderDateWithPreposition = ensureHasPreposition(reminderLabel);\n\n\treturn (\n\t\t<div css={rootStyles}>\n\t\t\t<button\n\t\t\t\tcss={closeButtonStyles}\n\t\t\t\tonClick={(): void => onCloseReminderClick()}\n\t\t\t>\n\t\t\t\t<SvgCross />\n\t\t\t</button>\n\n\t\t\t<div css={lineWrapperStyles}>\n\t\t\t\t<StraightLines />\n\t\t\t</div>\n\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<form onSubmit={handleSubmit(() => onSetReminderClick(email))}>\n\t\t\t\t\t{reminderStatus !== ReminderStatus.Completed && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<h4 css={remindHeading}>\n\t\t\t\t\t\t\t\tRemind me {reminderDateWithPreposition}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<div css={formWrapper}>\n\t\t\t\t\t\t\t\t<div css={inputWrapper}>\n\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email address\"\n\t\t\t\t\t\t\t\t\t\terror={inputError}\n\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\tonChange={updateEmail}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\t\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcssOverrides={getCustomSubmitStyles(\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting,\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{reminderStatus === ReminderStatus.Error && (\n\t\t\t\t\t\t<p css={errorTextStyles}>\n\t\t\t\t\t\t\tSorry we couldn&apos;t set a reminder for you this\n\t\t\t\t\t\t\ttime. Please try again later.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</form>\n\n\t\t\t\t{reminderStatus !== ReminderStatus.Completed && (\n\t\t\t\t\t<p css={formTextStyles}>\n\t\t\t\t\t\tWe will send you a maximum of two emails{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}. To find out what personal\n\t\t\t\t\t\tdata we collect and how we use it, view our{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPrivacy Policy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\n\t\t\t\t{reminderStatus === ReminderStatus.Completed && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<h4 css={remindHeading}>\n\t\t\t\t\t\t\tThank you! Your reminder is set.\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<p css={successTextStyles}>\n\t\t\t\t\t\t\tWe will be in touch to invite you to contribute.\n\t\t\t\t\t\t\tLook out for a message in your inbox{' '}\n\t\t\t\t\t\t\t{reminderDateWithPreposition}. If you have any\n\t\t\t\t\t\t\tquestions about contributing, please{' '}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"mailto:contribution.support@theguardian.com\"\n\t\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tcontact us\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicReminder.tsx\n */\nimport type { OphanComponentEvent } from '@guardian/libs';\nimport type { ReminderFields } from '@guardian/support-dotcom-components/dist/shared/lib';\nimport { useContributionsReminderSignup } from '../../hooks/useContributionsReminderSignup';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport {\n\tOPHAN_COMPONENT_EVENT_REMINDER_CLOSE,\n\tOPHAN_COMPONENT_EVENT_REMINDER_SET,\n} from '../utils/ophan';\nimport { ContributionsEpicReminderSignedIn } from './ContributionsEpicReminderSignedIn';\nimport { ContributionsEpicReminderSignedOut } from './ContributionsEpicReminderSignedOut';\n\n// --- Types --- //\n\nexport interface ContributionsEpicReminderProps {\n\tinitialEmailAddress?: string;\n\treminderFields: ReminderFields;\n\tonCloseReminderClick: () => void;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n}\n\n// --- Components --- //\n\nexport const ContributionsEpicReminder: ReactComponent<\n\tContributionsEpicReminderProps\n> = ({\n\tinitialEmailAddress,\n\treminderFields,\n\tonCloseReminderClick,\n\tsubmitComponentEvent,\n}: ContributionsEpicReminderProps) => {\n\tconst { reminderStatus, createReminder } = useContributionsReminderSignup(\n\t\treminderFields.reminderPeriod,\n\t\t'WEB',\n\t\t'EPIC',\n\t\t'PRE',\n\t\treminderFields.reminderOption,\n\t);\n\n\tconst onSetReminderClick = (email: string) => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_REMINDER_SET);\n\t\t}\n\t\tcreateReminder(email);\n\t};\n\n\tconst closeReminder = () => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_REMINDER_CLOSE);\n\t\t}\n\t\tonCloseReminderClick();\n\t};\n\n\treturn initialEmailAddress ? (\n\t\t<ContributionsEpicReminderSignedIn\n\t\t\treminderLabel={reminderFields.reminderLabel}\n\t\t\treminderStatus={reminderStatus}\n\t\t\tonSetReminderClick={() => onSetReminderClick(initialEmailAddress)}\n\t\t\tonCloseReminderClick={closeReminder}\n\t\t/>\n\t) : (\n\t\t<ContributionsEpicReminderSignedOut\n\t\t\treminderLabel={reminderFields.reminderLabel}\n\t\t\treminderStatus={reminderStatus}\n\t\t\tonSetReminderClick={onSetReminderClick}\n\t\t\tonCloseReminderClick={closeReminder}\n\t\t/>\n\t);\n};\n","import type { EpicProps } from '@guardian/support-dotcom-components/dist/shared/types/props/epic';\nimport { useState } from 'react';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { ThreeTierChoiceCards } from '../ThreeTierChoiceCards';\nimport type { SupportTier } from '../utils/threeTierChoiceCardAmounts';\nimport { ContributionsEpicButtons } from './ContributionsEpicButtons';\nimport { ContributionsEpicReminder } from './ContributionsEpicReminder';\n\ninterface OnReminderOpen {\n\tbuttonCopyAsString: string;\n}\n\ntype Props = EpicProps & {\n\tamountsTestName?: string;\n\tamountsVariantName?: string;\n\tisColourInTestVariant?: boolean;\n};\n\nexport const ContributionsEpicCtasContainer: ReactComponent<Props> = ({\n\tvariant,\n\tcountryCode,\n\tarticleCounts,\n\ttracking,\n\tsubmitComponentEvent,\n\tonReminderOpen,\n\tfetchEmail,\n\tamountsTestName,\n\tamountsVariantName,\n\tisColourInTestVariant,\n}: Props): JSX.Element => {\n\t// reminders\n\tconst [fetchedEmail, setFetchedEmail] = useState<string | undefined>(\n\t\tundefined,\n\t);\n\tconst [isReminderActive, setIsReminderActive] = useState(false);\n\tconst showReminderFields = variant.showReminderFields;\n\tconst onCloseReminderClick = () => {\n\t\tsetIsReminderActive(false);\n\t};\n\n\t// choice cards\n\tconst isNonVatCompliantCountry =\n\t\tvariant.choiceCardAmounts?.testName === 'VAT_COMPLIANCE';\n\n\tconst showChoiceCards =\n\t\tvariant.showChoiceCards && !isNonVatCompliantCountry;\n\n\t/**\n\t * This corresponds to the products in the Product API\n\t * @see https://product-catalog.guardianapis.com/product-catalog.json\n\t */\n\tconst [\n\t\tthreeTierChoiceCardSelectedProduct,\n\t\tsetThreeTierChoiceCardSelectedProduct,\n\t] = useState<SupportTier>('SupporterPlus');\n\n\tconst showUSSupportCheckout =\n\t\tshowChoiceCards && variant.name.includes('US_CHECKOUT_PAGE');\n\n\tconst hasSupporterPlusPromoCode =\n\t\tvariant.cta?.baseUrl.includes('BLACK_FRIDAY_DISCOUNT_2024') ?? false;\n\n\tconst variantOfChoiceCard =\n\t\tcountryCode === 'US' && showUSSupportCheckout\n\t\t\t? 'US_CHECKOUT_THREE_TIER_CHOICE_CARDS'\n\t\t\t: countryCode === 'US'\n\t\t\t? 'US_THREE_TIER_CHOICE_CARDS'\n\t\t\t: 'THREE_TIER_CHOICE_CARDS';\n\n\treturn (\n\t\t<>\n\t\t\t{showChoiceCards && (\n\t\t\t\t<ThreeTierChoiceCards\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tselectedProduct={threeTierChoiceCardSelectedProduct}\n\t\t\t\t\tsetSelectedProduct={setThreeTierChoiceCardSelectedProduct}\n\t\t\t\t\tvariantOfChoiceCard={variantOfChoiceCard}\n\t\t\t\t\tsupporterPlusDiscount={\n\t\t\t\t\t\thasSupporterPlusPromoCode ? 0.5 : undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<ContributionsEpicButtons\n\t\t\t\tvariant={variant}\n\t\t\t\ttracking={tracking}\n\t\t\t\tcountryCode={countryCode}\n\t\t\t\tonOpenReminderClick={(): void => {\n\t\t\t\t\tconst buttonCopyAsString = showReminderFields?.reminderCta\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.replace(/\\s/g, '-');\n\n\t\t\t\t\t// This callback lets the platform react to the user interaction with the\n\t\t\t\t\t// 'Remind me' button\n\t\t\t\t\tif (onReminderOpen) {\n\t\t\t\t\t\tonReminderOpen({\n\t\t\t\t\t\t\tbuttonCopyAsString,\n\t\t\t\t\t\t} as OnReminderOpen);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fetchEmail) {\n\t\t\t\t\t\tvoid fetchEmail().then((resolvedEmail) => {\n\t\t\t\t\t\t\tif (resolvedEmail) {\n\t\t\t\t\t\t\t\tsetFetchedEmail(resolvedEmail);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetIsReminderActive(true);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetIsReminderActive(true);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tisReminderActive={isReminderActive}\n\t\t\t\tisSignedIn={Boolean(fetchedEmail)}\n\t\t\t\tshowChoiceCards={showChoiceCards}\n\t\t\t\tthreeTierChoiceCardSelectedProduct={\n\t\t\t\t\tthreeTierChoiceCardSelectedProduct\n\t\t\t\t}\n\t\t\t\tamountsTestName={amountsTestName}\n\t\t\t\tamountsVariantName={amountsVariantName}\n\t\t\t\tnumArticles={articleCounts.for52Weeks}\n\t\t\t\tvariantOfChoiceCard={variantOfChoiceCard}\n\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t/>\n\t\t\t{isReminderActive && showReminderFields && (\n\t\t\t\t<ContributionsEpicReminder\n\t\t\t\t\tinitialEmailAddress={fetchedEmail}\n\t\t\t\t\treminderFields={showReminderFields}\n\t\t\t\t\tonCloseReminderClick={onCloseReminderClick}\n\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/utils/ophan.ts#L3\n */\nimport type { OphanComponentEvent } from '@guardian/libs';\n\nconst OPHAN_COMPONENT_ID_CTAS_VIEW = 'contributions-epic-ctas-view';\nconst OPHAN_COMPONENT_ID_PRIMARY_CTA = 'contributions-epic-primary-cta';\nconst OPHAN_COMPONENT_ID_SECONDARY_CTA = 'contributions-epic-secondary-cta';\nconst OPHAN_COMPONENT_ID_REMINDER_VIEW = 'contributions-epic-reminder-view';\nconst OPHAN_COMPONENT_ID_REMINDER_OPEN = 'contributions-epic-reminder-open';\nconst OPHAN_COMPONENT_ID_REMINDER_SET = 'contributions-epic-reminder-set';\nconst OPHAN_COMPONENT_ID_REMINDER_CLOSE = 'contributions-epic-reminder-close';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_OPEN =\n\t'contributions-epic-article-count-open';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_CLOSE =\n\t'contributions-epic-article-count-close';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_IN =\n\t'contributions-epic-article-count-stay-on';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT =\n\t'contributions-epic-article-count-opt-out';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_OUT =\n\t'contributions-epic-article-count-stay-out';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_IN =\n\t'contributions-epic-article-count-opt-in';\nconst OPHAN_COMPONENT_ID_SIGN_IN = 'contributions-epic-sign-in';\n\nexport const getReminderViewEvent = (\n\tisSignedIn: boolean,\n): OphanComponentEvent => ({\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_VIEW,\n\t},\n\taction: 'VIEW',\n\tvalue: isSignedIn.toString(),\n});\n\nexport const OPHAN_COMPONENT_EVENT_CTAS_VIEW: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_CTAS_VIEW,\n\t},\n\taction: 'VIEW',\n};\n\nexport const OPHAN_COMPONENT_EVENT_PRIMARY_CTA: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_EPIC',\n\t\tid: OPHAN_COMPONENT_ID_PRIMARY_CTA,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_SECONDARY_CTA: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_SECONDARY_CTA,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_REMINDER_OPEN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_OPEN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_REMINDER_SET: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_SET,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_REMINDER_CLOSE: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_CLOSE,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_OPEN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_OPEN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_CLOSE: OphanComponentEvent =\n\t{\n\t\tcomponent: {\n\t\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_CLOSE,\n\t\t},\n\t\taction: 'CLICK',\n\t};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_STAY_IN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_IN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_STAY_OUT: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_OUT,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_IN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_IN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_SIGN_IN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_SIGN_IN,\n\t},\n\taction: 'CLICK',\n};\n","import { type CountryGroupId } from '@guardian/support-dotcom-components';\n\nexport type SupportTier = 'Contribution' | 'SupporterPlus' | 'OneOff';\nexport type SupportRatePlan = 'Monthly' | 'Annual';\n\n// ToDo: fetch this in a way that isn't hardcoded\nexport const threeTierChoiceCardAmounts = {\n\tMonthly: {\n\t\tGBPCountries: {\n\t\t\tContribution: 4,\n\t\t\tSupporterPlus: 12,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tUnitedStates: {\n\t\t\tContribution: 5,\n\t\t\tSupporterPlus: 15,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tAUDCountries: {\n\t\t\tContribution: 10,\n\t\t\tSupporterPlus: 20,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tEURCountries: {\n\t\t\tContribution: 4,\n\t\t\tSupporterPlus: 12,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tNZDCountries: {\n\t\t\tContribution: 10,\n\t\t\tSupporterPlus: 20,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tCanada: {\n\t\t\tContribution: 5,\n\t\t\tSupporterPlus: 15,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tInternational: {\n\t\t\tContribution: 3,\n\t\t\tSupporterPlus: 15,\n\t\t\tOneOff: 0,\n\t\t},\n\t},\n\tAnnual: {\n\t\tGBPCountries: {\n\t\t\tContribution: 50,\n\t\t\tSupporterPlus: 120,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tUnitedStates: {\n\t\t\tContribution: 60,\n\t\t\tSupporterPlus: 150,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tAUDCountries: {\n\t\t\tContribution: 80,\n\t\t\tSupporterPlus: 200,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tEURCountries: {\n\t\t\tContribution: 50,\n\t\t\tSupporterPlus: 120,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tNZDCountries: {\n\t\t\tContribution: 80,\n\t\t\tSupporterPlus: 200,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tCanada: {\n\t\t\tContribution: 60,\n\t\t\tSupporterPlus: 150,\n\t\t\tOneOff: 0,\n\t\t},\n\t\tInternational: {\n\t\t\tContribution: 30,\n\t\t\tSupporterPlus: 150,\n\t\t\tOneOff: 0,\n\t\t},\n\t},\n} as const satisfies Record<\n\tSupportRatePlan,\n\tRecord<CountryGroupId, Record<SupportTier, number>>\n>;\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/hooks/useContributionsReminderEmailForm.ts\n */\nimport type React from 'react';\nimport { useState } from 'react';\nimport { emailIsShortEnoughForIdentity, isValidEmail } from '../lib/reminders';\n\ntype SubmitHandler = (e: React.FormEvent<HTMLFormElement>) => void;\n\ninterface ContributionsReminderEmailForm {\n\temail: string;\n\tinputError?: string;\n\tupdateEmail: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\thandleSubmit: (onSubmit: () => void) => SubmitHandler;\n}\n\nexport function useContributionsReminderEmailForm(): ContributionsReminderEmailForm {\n\tconst [isDirty, setIsDirty] = useState(false);\n\tconst [email, setEmail] = useState('');\n\n\tconst updateEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetEmail(e.target.value);\n\t\tif (isDirty) {\n\t\t\tsetIsDirty(false);\n\t\t}\n\t};\n\n\tconst isEmpty = email.trim().length === 0;\n\tconst isValid = isValidEmail(email) && emailIsShortEnoughForIdentity(email);\n\n\tlet inputError;\n\tif (isDirty && isEmpty) {\n\t\tinputError = 'Please enter your email address';\n\t} else if (isDirty && !isValid) {\n\t\tinputError = 'Please enter a valid email address';\n\t}\n\n\tconst handleSubmit = (onSubmit: () => void) => {\n\t\tconst handler = (e: React.FormEvent<HTMLFormElement>) => {\n\t\t\te.preventDefault();\n\t\t\tif (isValid) {\n\t\t\t\tonSubmit();\n\t\t\t} else {\n\t\t\t\tsetIsDirty(true);\n\t\t\t}\n\t\t};\n\t\treturn handler;\n\t};\n\n\treturn { email, inputError, updateEmail, handleSubmit };\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/hooks/useContributionsReminderSignup.ts\n */\nimport type {\n\tOneOffSignupRequest,\n\tReminderComponent,\n\tReminderPlatform,\n\tReminderStage,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useState } from 'react';\nimport {\n\taddContributionReminderCookie,\n\tReminderStatus,\n} from '../lib/reminders';\n\nconst CREATE_ONE_OFF_REMINDER_ENDPOINT =\n\t'https://support.theguardian.com/reminders/create/one-off';\n\ninterface ContributionsReminderSignup {\n\treminderStatus: ReminderStatus;\n\tcreateReminder: (email: string) => void;\n}\n\nexport function useContributionsReminderSignup(\n\treminderPeriod: string,\n\treminderPlatform: ReminderPlatform,\n\treminderComponent: ReminderComponent,\n\treminderStage: ReminderStage,\n\treminderOption?: string,\n): ContributionsReminderSignup {\n\tconst [reminderStatus, setReminderStatus] = useState<ReminderStatus>(\n\t\tReminderStatus.Editing,\n\t);\n\n\tconst createReminder = (email: string): void => {\n\t\tconst reminderSignupData: OneOffSignupRequest = {\n\t\t\temail,\n\t\t\treminderPeriod,\n\t\t\treminderPlatform,\n\t\t\treminderComponent,\n\t\t\treminderStage,\n\t\t\treminderOption,\n\t\t};\n\n\t\tsetReminderStatus(ReminderStatus.Submitting);\n\t\tfetch(CREATE_ONE_OFF_REMINDER_ENDPOINT, {\n\t\t\tbody: JSON.stringify(reminderSignupData),\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tsetReminderStatus(ReminderStatus.Error);\n\t\t\t\t} else {\n\t\t\t\t\tsetReminderStatus(ReminderStatus.Completed);\n\t\t\t\t\taddContributionReminderCookie(reminderPeriod);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => setReminderStatus(ReminderStatus.Error));\n\t};\n\n\treturn { reminderStatus, createReminder };\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/utils/reminders.ts\n */\nimport { getCookie, setCookie } from '@guardian/libs';\n\nexport enum ReminderStatus {\n\tEditing = 'Editing',\n\tSubmitting = 'Submitting',\n\tError = 'Error',\n\tCompleted = 'Completed',\n}\n\n// --- Cookie utils --- //\n\nconst dateDiff = (start: Date, end: Date): number => {\n\tconst twentyFourHours = 86400000;\n\treturn Math.round((end.valueOf() - start.valueOf()) / twentyFourHours);\n};\n\nexport const addContributionReminderCookie = (\n\treminderDateString: string,\n): void => {\n\tconst today = new Date();\n\tconst reminderDate = new Date(Date.parse(reminderDateString));\n\n\tsetCookie({\n\t\tname: 'gu_epic_contribution_reminder',\n\t\tvalue: '1',\n\t\tdaysToLive: dateDiff(today, reminderDate),\n\t});\n};\n\nexport const hasSetReminder = (): boolean => {\n\treturn !!getCookie({ name: 'gu_epic_contribution_reminder' });\n};\n\n// --- Text utils --- //\n\nconst PREPOSITION_REGEX = /^(on|in)/;\n\nconst containsPreposition = (text: string): boolean =>\n\tPREPOSITION_REGEX.test(text);\n\nconst addPreposition = (text: string): string => 'in ' + text;\n\nexport const ensureHasPreposition = (text: string): string =>\n\tcontainsPreposition(text) ? text : addPreposition(text);\n\n// --- Validation utils --- //\n\nexport const isValidEmail = (email: string): boolean => {\n\tconst re =\n\t\t/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(String(email).toLowerCase());\n};\n\nexport const emailIsShortEnoughForIdentity = (email: string): boolean => {\n\t// Identity errors on email addresses longer than 100 characters\n\treturn email.length <= 100;\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/shared/src/lib/viewLog.ts\n */\n\n/**\n * We log epic views in this local storage item.\n * This is used to limit the number of epics a browser sees in a period of time.\n */\nimport { storage } from '@guardian/libs';\n\nconst viewLogKey = 'gu.contributions.views';\n\nconst maxLogEntries = 50;\n\ninterface EpicView {\n\tdate: number;\n\ttestId: string;\n}\nexport type EpicViewLog = EpicView[];\n\n/**\n * Return the entire viewLog.\n */\nexport const getEpicViewLog = (): EpicViewLog | undefined => {\n\tconst item = storage.local.get(viewLogKey);\n\tif (Array.isArray(item)) {\n\t\treturn item as EpicView[];\n\t}\n\treturn undefined;\n};\n\n/**\n * Add a new entry to the viewLog.\n * The number of entries is limited to the number in maxLogEntries.\n */\nexport const logEpicView = (testId: string): void => {\n\tconst viewLog = getEpicViewLog() ?? [];\n\n\tconst newView = {\n\t\tdate: new Date().getTime(),\n\t\ttestId,\n\t};\n\n\tconst newValue = [...viewLog, newView].slice(-maxLogEntries);\n\n\tstorage.local.set(viewLogKey, newValue);\n};\n"],"names":["Hide","whenToHide","children","when","breakpoint","el","css","until","from","li","span","LegalLink","href","Link","data-ignore","rel","termsStyle","textSans12","textStyles","textColor","themePalette","sourcePalette","neutral","NewsletterPrivacyMessage","strong","formStyles","space","palette","formStylesWhenSignedIn","gridTemplateColumns","gridTemplateAreas","join","errorContainerStyles","tablet","ErrorMessageWithAdvice","text","InlineError","target","SuccessMessage","InlineSuccess","b","sendTracking","newsletterId","eventDescription","renderingTarget","abTest","action","value","JSON","stringify","timestamp","Date","now","submitComponentEvent","component","componentType","id","SecureSignup","successDescription","recaptchaRef","useRef","captchaSiteKey","setCaptchaSiteKey","useState","signedInUserEmail","setSignedInUserEmail","isWaitingForResponse","setIsWaitingForResponse","responseOk","setResponseOk","undefined","errorMessage","setErrorMessage","useEffect","window","guardian","config","page","googleRecaptchaSiteKey","async","idApiUrl","lazyFetchEmailWithTimeout","resolveEmailIfSignedIn","then","useConfig","hasResponse","hideEmailInput","isString","form","onSubmit","event","preventDefault","current","execute","style","display","TextInput","hidden","hideLabel","name","label","type","Button","onClick","size","div","aria-label","Spinner","icon","SvgReload","iconSide","reset","ReactGoogleRecaptcha","sitekey","ref","onChange","token","document","input","querySelector","emailAddress","response","endpoint","formData","requestBodyStrings","key","entries","push","encodeURIComponent","toString","fetch","method","body","headers","Accept","postFormData","ajaxUrl","pageRef","location","origin","pathname","refViewId","ophan","pageViewId","FormData","append","switches","emailSignupRecaptcha","buildFormData","ok","submitForm","catch","error","console","onError","containerStyles","ContributionsEpicNewsletterSignup","tracking","abTestName","variant","abTestVariant","ChoiceCardTestData_REGULAR","supportTier","amount","currencySymbol","benefitsLabel","benefits","recommended","discount","isUndefined","s","ChoiceCardTestData_US","ChoiceCardTestData_TwoTier_REGULAR","supportTierChoiceCardStyles","selected","brand","sport","benefitsStyles","textSans15","benefitsLabelStyles","textSansBold15","labelOverrideStyles","supportingTextStyles","recommendedPillStyles","textSansBold14","phablet","discountedPillStyles","SupportingBenefits","isBenefit","ul","map","benefit","SvgTickRound","RecommendedPill","DiscountedPill","ThreeTierChoiceCards","countryCode","selectedProduct","setSelectedProduct","variantOfChoiceCard","supporterPlusDiscount","getLocalCurrencySymbol","countryGroupId","countryCodeToCountryGroupId","Choices","choiceCardVariant","getChoiceCardData","RadioGroup","cssOverrides","Stack","choiceAmount","ratePlan","threeTierChoiceCardAmounts","getChoiceAmount","hasDiscount","radioId","htmlFor","Radio","supporting","checked","buttonStyles","textPrimary","backgroundPrimary","brandAlt","backgroundPrimaryHover","textSecondary","backgroundSecondary","backgroundSecondaryHover","borderSecondary","buttonStylesForTest","contributionsTheme","button","link","contributionsThemeForTest","tertiaryButtonOverrides","EpicButton","allProps","onClickAction","showArrow","priority","isTertiary","isColourInTestVariant","props","ThemeProvider","theme","LinkButton","SvgArrowRightStraight","OPHAN_COMPONENT_EVENT_PRIMARY_CTA","OPHAN_COMPONENT_EVENT_SECONDARY_CTA","DSButton","paymentImageStyles","buttonWrapperStyles","buttonMarginStyles","PrimaryCtaButton","cta","amountsTestName","amountsVariantName","numArticles","buttonText","baseUrl","urlWithRegionAndTracking","addRegionIdAndTrackingParamsToSupportUrl","SecondaryCtaButton","url","ContributionsEpicButtons","onOpenReminderClick","isReminderActive","isSignedIn","showChoiceCards","threeTierChoiceCardSelectedProduct","hasBeenSeen","setNode","useIsInView","debounce","secondaryCta","showReminderFields","OPHAN_COMPONENT_EVENT_CTAS_VIEW","hasSetReminder","getReminderViewEvent","hasSupportCta","isSupportUrl","SecondaryCtaType","Custom","data-testid","addChoiceCardsParams","addChoiceCardsOneTimeParams","contributionAmount","Contribution","addChoiceCardsProductParams","getChoiceCardCta","ContributionsReminder","OPHAN_COMPONENT_EVENT_REMINDER_OPEN","reminderCta","img","width","height","src","alt","rootStyles","lineWrapperStyles","remindHeading","headlineBold20","successTextStyles","article17","linkStyles","errorTextStyles","closeButtonContainerStyles","bodyCopyStyles","infoCopyStyles","ctaContainerStyles","ContributionsEpicReminderSignedIn","reminderLabel","reminderStatus","onSetReminderClick","onCloseReminderClick","reminderDateWithPreposition","ensureHasPreposition","SvgCross","StraightLines","ReminderStatus","Completed","h4","p","a","disabled","Submitting","SvgCheckmark","Error","closeButtonStyles","formWrapper","inputWrapper","formTextStyles","getCustomSubmitStyles","isDisabled","ContributionsEpicReminderSignedOut","email","updateEmail","inputError","handleSubmit","useContributionsReminderEmailForm","ContributionsEpicReminder","initialEmailAddress","reminderFields","createReminder","useContributionsReminderSignup","reminderPeriod","reminderOption","OPHAN_COMPONENT_EVENT_REMINDER_SET","closeReminder","OPHAN_COMPONENT_EVENT_REMINDER_CLOSE","ContributionsEpicCtasContainer","articleCounts","onReminderOpen","fetchEmail","fetchedEmail","setFetchedEmail","setIsReminderActive","isNonVatCompliantCountry","choiceCardAmounts","testName","setThreeTierChoiceCardSelectedProduct","showUSSupportCheckout","includes","hasSupporterPlusPromoCode","buttonCopyAsString","toLowerCase","replace","resolvedEmail","Boolean","for52Weeks","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_OPEN","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_CLOSE","OPHAN_COMPONENT_ARTICLE_COUNT_STAY_IN","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT","OPHAN_COMPONENT_ARTICLE_COUNT_STAY_OUT","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_IN","OPHAN_COMPONENT_SIGN_IN","Monthly","GBPCountries","SupporterPlus","OneOff","UnitedStates","AUDCountries","EURCountries","NZDCountries","Canada","International","Annual","isDirty","setIsDirty","setEmail","isEmpty","trim","length","isValid","isValidEmail","emailIsShortEnoughForIdentity","e","CREATE_ONE_OFF_REMINDER_ENDPOINT","reminderPlatform","reminderComponent","reminderStage","setReminderStatus","Editing","reminderSignupData","addContributionReminderCookie","reminderDateString","today","reminderDate","parse","start","end","setCookie","daysToLive","Math","round","valueOf","getCookie","PREPOSITION_REGEX","test","containsPreposition","addPreposition","String","viewLogKey","logEpicView","testId","getEpicViewLog","newValue","item","storage","local","get","Array","isArray","date","getTime","slice","set"],"sourceRoot":""}