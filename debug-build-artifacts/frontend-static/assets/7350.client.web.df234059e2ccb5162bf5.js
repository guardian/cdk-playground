"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[7350],{71849:(e,t,n)=>{n.d(t,{d:()=>l,z:()=>u});var r=n(50484),a=n(29995),c=n(67400),o=n(58452),i=n(81412);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=e=>t=>{let{content:n,mobileContent:a,tracking:s,countryCode:l,submitComponentEvent:u,numArticles:d}=t;const p=e=>(0,i.Bl)(e.baseUrl)?{ctaUrl:(0,i.qU)(e.baseUrl,s),ctaText:e.text}:{ctaUrl:(0,i.QP)(e.baseUrl,s,d,l),ctaText:e.text},b=n.primaryCta?p(n.primaryCta):null,m=n.secondaryCta?p(n.secondaryCta):null,f={heading:n.heading,subheading:n.subheading,primaryCta:b,secondaryCta:m},g=(null==a?void 0:a.primaryCta)?p(a.primaryCta):b,y=(null==a?void 0:a.secondaryCta)?p(a.secondaryCta):m,v=a?{heading:a.heading,subheading:a.subheading,primaryCta:g,secondaryCta:y}:void 0,{abTestName:h,abTestVariant:C,componentType:j,campaignCode:T}=s,O=(0,c.useCallback)((e=>{u&&u({component:{componentType:j,id:T,campaignCode:T},action:e,abTest:{name:h,variant:C}})}),[h,C,T,j,u]),[x,P]=(0,o.E)({debounce:!0,threshold:0});return(0,c.useEffect)((()=>{x&&O("VIEW")}),[x,O]),(0,c.useEffect)((()=>{O("INSERT")}),[O]),(0,r.jsx)("div",{ref:P,children:(0,r.jsx)(e,{content:f,mobileContent:v,onCtaClick:(w=T,()=>{const e=(0,i.Mf)(s,"".concat(w," : cta"));u&&u(e)})})});var w},u=e=>t=>{if((e=>a.n5.safeParse(e).success)(t)){const n=l(e);return(0,r.jsx)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},t))}return(0,r.jsx)(r.Fragment,{})}},77350:(e,t,n)=>{n.r(t),n.d(t,{SignInPromptHeader:()=>I,SignInPromptHeaderUnvalidated:()=>w});var r=n(50484),a=n(24017),c=n(96378),o=n(7351),i=n(99923),s=n(3959),l=n(68163),u=n(14302),d=n(15168),p=n(53694),b=n(71849);function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(){const e=m(["\n\tdisplay: grid;\n\n\tgrid-template-rows: auto;\n\tgrid-template-columns: auto;\n\n\tgrid-template-areas:\n\t\t'heading     cta1'\n\t\t'subheading  .   ';\n"]);return f=function(){return e},e}function g(){const e=m(["\n\tmargin-right: ","px;\n"]);return g=function(){return e},e}function y(){const e=m(["\n\tgrid-area: 'heading';\n\n\tcolor: ",";\n\t","\n\n\t"," {\n\t\t","\n\t}\n"]);return y=function(){return e},e}function v(){const e=m(["\n\tgrid-area: 'subheading';\n\n\tcolor: ",";\n\t","\n"]);return v=function(){return e},e}function h(){const e=m(["\n\tmargin: 0 0 0 ","px;\n\n\t"," {\n\t\tmargin: ","px 0 0 ","px;\n\t}\n"]);return h=function(){return e},e}const C=(0,a.css)(f()),j=(0,a.css)(g(),c.x[3]),T=(0,a.css)(y(),(0,p.M)("--masthead-top-bar-text"),o.aal,i.HT.desktop,o.OAJ),O=(0,a.css)(v(),(0,p.M)("--masthead-top-bar-text"),o.WuG),x=(0,a.css)(h(),c.x[2],i.HT.tablet,c.x[1],c.x[2]),P=e=>{var t,n,a,c;const{heading:o,subheading:i,primaryCta:p}=e.content;var b,m;return(0,r.jsxs)("div",{css:C,children:[(0,r.jsx)(s.L,{until:"tablet",children:(0,r.jsxs)("div",{css:j,children:[(0,r.jsx)("h2",{css:T,children:o}),(0,r.jsx)("span",{css:O,children:i})]})}),p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.L,{until:"tablet",children:(0,r.jsx)(l.z,{theme:u.Tu,priority:"primary",href:p.ctaUrl,icon:(0,r.jsx)(d._,{}),iconSide:"right",onClick:()=>{var t;return null===(t=e.onCtaClick)||void 0===t?void 0:t.call(e)},nudgeIcon:!0,size:"xsmall",cssOverrides:x,style:{gridArea:"cta1"},children:p.ctaText})}),(0,r.jsx)(s.L,{from:"tablet",children:(0,r.jsx)(l.z,{theme:u.Tu,priority:"primary",href:null!==(b=null===(n=e.mobileContent)||void 0===n||null===(t=n.primaryCta)||void 0===t?void 0:t.ctaUrl)&&void 0!==b?b:p.ctaUrl,cssOverrides:x,size:"xsmall",children:null!==(m=null===(c=e.mobileContent)||void 0===c||null===(a=c.primaryCta)||void 0===a?void 0:a.ctaText)&&void 0!==m?m:p.ctaText})})]})]})},w=(0,b.d)(P),I=(0,b.z)(P)},81412:(e,t,n)=>{n.d(t,{Bl:()=>y,Mf:()=>j,Nl:()=>b,Q7:()=>m,QP:()=>d,R9:()=>g,Tv:()=>u,hy:()=>f,m1:()=>l,qU:()=>v,rx:()=>O,t0:()=>T});var r=n(9474),a=n(29995);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const s=(e,t,n,a,c)=>{const o=((e,t,n,r,a)=>{const c=[{name:e,variant:t}];return n&&c.push({name:n.testName,variant:n.variantName}),r&&a&&c.push({name:r,variant:a,testType:"AMOUNTS_TEST"}),c})(t.abTestName,t.abTestVariant,t.targetingAbTest,a,c),i=((e,t)=>encodeURIComponent(JSON.stringify({source:e.platformId,componentId:e.campaignCode,componentType:e.componentType,campaignCode:e.campaignCode,abTests:t,referrerPageviewId:e.ophanPageId,referrerUrl:e.referrerUrl,isRemote:!0,labels:e.labels})))(t,o),s=((e,t,n)=>{const a={REFPVID:e.ophanPageId||"not_found",INTCMP:e.campaignCode||"",acquisitionData:t,numArticles:n||0};return Object.entries(a).filter((e=>{let[,t]=e;return!(0,r.b)(t)})).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)})).join("&")})(t,i,null!=n?n:0),l=e.includes("?");return"".concat(e).concat(l?"&":"?").concat(s)},l=(e,t,n)=>s(((e,t)=>{switch(t.product){case"Contribution":case"SupporterPlus":return((e,t)=>{let{region:n,amount:r,billingPeriod:a}=t;return"".concat(e,"/").concat(n,"/contribute/checkout?selected-amount=").concat(r,"&selected-contribution-type=").concat(a)})(e,t);default:return e}})(e,t),n),u=e=>/\bsupport\./.test(e),d=(e,t,n,r,c,o)=>{if(!u(e))return e;const i=(0,a.u4)(e,r);return s(i,t,n,c,o)},p=/href="(.*?)"/g,b=(e,t,n,r)=>{const a=C(t,"body-link");return e.replace(p,((e,t)=>'href="'.concat(d(t,a,n,r),'"')))},m=(e,t,n)=>{const r="selected-contribution-type=".concat(t).concat(void 0!==n?"&selected-amount=".concat(n):""),a=e.includes("?");return"".concat(e).concat(a?"&":"?").concat(r)},f=e=>{const t=e.includes("?");return"".concat(e).concat(t?"&":"?").concat("oneTime")},g=(e,t,n,r)=>{const a="product=".concat(t,"&ratePlan=").concat(n).concat(void 0!==r?"&contribution=".concat(r):""),c=e.includes("?");return"".concat(e).concat(c?"&":"?").concat(a)},y=e=>/\bprofile\./.test(e),v=(e,t)=>y(e)?((e,t)=>{const n={componentType:t.componentType,componentId:t.campaignCode,abTestName:t.abTestName,abTestVariant:t.abTestVariant,viewId:t.ophanPageId},a={componentEventParams:encodeURIComponent((c=n,Object.keys(c).map((e=>{const t=c[e],n=Array.isArray(t)?t.map((e=>encodeURIComponent(e))).join(","):encodeURIComponent(t);return"".concat(e,"=").concat(n)})).join("&"))),returnUrl:t.referrerUrl};var c;const o=Object.entries(a).filter((e=>{let[,t]=e;return!(0,r.b)(t)})).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)})),i=e.includes("?");return"".concat(e).concat(i?"&":"?").concat(o.join("&"))})(e,t):e,h=e=>(t,n)=>{const{abTestName:r,abTestVariant:a,componentType:c,products:s=[],labels:l=[],campaignCode:u}=t,d=r&&a?{name:r,variant:a}:null,p=t.targetingAbTest?{name:t.targetingAbTest.testName,variant:t.targetingAbTest.variantName}:null;return i(o({component:{componentType:c,products:s,campaignCode:u,id:n,labels:l}},d?{abTest:d}:{},p?{targetingAbTest:p}:{}),{action:e})},C=(e,t)=>e.labels?i(o({},e),{labels:[...e.labels,t]}):i(o({},e),{labels:[t]}),j=h("CLICK"),T=h("VIEW"),O=h("INSERT")},58452:(e,t,n)=>{n.d(t,{E:()=>o});var r=n(44165),a=n.n(r),c=n(67400);const o=e=>{const[t,n]=(0,c.useState)(!1);var r;const[o,i]=(0,c.useState)(null!==(r=e.node)&&void 0!==r?r:null),s=(0,c.useRef)(null),l=(0,c.useCallback)((t=>{let[r]=t;r&&(r.isIntersecting?n(!0):e.repeat&&n(!1))}),[e.repeat]),u=e.debounce?a()(l,200):l;return(0,c.useEffect)((()=>{e.node&&i(e.node)}),[e.node]),(0,c.useEffect)((()=>{if(o&&"IntersectionObserver"in window)return s.current=new window.IntersectionObserver(u,e),s.current.observe(o),()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.disconnect()}}),[o,e,u]),(0,c.useEffect)((()=>{var n;!e.repeat&&t&&(null===(n=s.current)||void 0===n||n.disconnect())}),[t,e.repeat]),[t,i]}},53694:(e,t,n)=>{n.d(t,{M:()=>r});const r=e=>"var(".concat(e,")")}}]);
//# sourceMappingURL=7350.client.web.df234059e2ccb5162bf5.js.map