{"version":3,"file":"sentry.client.web.legacy.119bf5002d1c101c4136.js","mappings":"qOAGMA,EAAY,CACd,mBACA,IAAIC,OAAO,4CACX,uBACA,iBAuBIC,EAAWC,OAAOC,SAAlBF,OACQG,EAA2BH,EAAnCI,KAAQD,aAAgBE,EAAWL,EAAXK,MAChCC,EAAAA,GAAY,CACRC,aAtBiB,CACjB,yCACA,sBACA,qCACA,eACA,8BAIA,iBACA,yBACA,eACA,kBACA,6BACA,4DACA,yBACA,8CACA,wDAMAT,UAAAA,EACAU,IAAKL,EACLM,YAAaJ,GAAS,MACtBK,aAAc,CAAC,IAAIC,EAAAA,EAAe,CAAEC,OAAQ,CAAC,YAC7CC,eAAgB,KAGhBC,EAAAA,eACiE,YAAjEb,OAAOC,SAASF,OAAOe,OAAMC,EAAAA,EAAAA,qBAAoB,aACjDV,EAAAA,GAAc,cAAcU,EAAAA,EAAAA,qBAAoB,YAE7C,IAAMC,EAAc,SAACC,EAAOC,EAASC,GACxCd,EAAAA,IAAiB,WAEb,GADAA,EAAAA,GAAc,UAAWa,GACrBC,EACA,QAAAC,EAAA,EAAAC,EAA2BC,OAAOC,QAAQJ,GAAKC,EAAAC,EAAAG,OAAAJ,IAAE,CAA5C,IAAAK,GAAAC,EAAAA,EAAAA,GAAAL,EAAAD,GAAA,GAAOO,EAAGF,EAAA,GAAEG,EAAKH,EAAA,GAClBpB,EAAAA,GAAcsB,EAAKC,EACvB,CAEJvB,EAAAA,GAAwBY,EAC5B,GACJ,C","sources":["webpack://@guardian/dotcom-rendering/./src/client/sentryLoader/sentry.ts"],"sourcesContent":["import * as Sentry from '@sentry/browser';\nimport { CaptureConsole } from '@sentry/integrations';\nimport { BUILD_VARIANT, dcrJavascriptBundle } from '../../../webpack/bundles';\nconst allowUrls = [\n    /webpack-internal/,\n    new RegExp(`/$(process.env.HOSTNAME || 'localhost')/`),\n    /assets\\.guim\\.co\\.uk/,\n    /ophan\\.co\\.uk/,\n];\n// Ignore these errors\n// https://docs.sentry.io/platforms/javascript/#decluttering-sentry\nconst ignoreErrors = [\n    \"Can't execute code from a freed script\",\n    /InvalidStateError/gi,\n    'This video is no longer available.',\n    'UnknownError',\n    'The quota has been exceeded',\n    // Browsers throw exceptions for cancelled network requests\n    // https://stackoverflow.com/questions/55738408/javascript-typeerror-cancelled-error-when-calling-fetch-on-ios/70452078#70452078\n    // https://request-cancellation-test.vercel.app/\n    /Fetch error:/gi,\n    'Network request failed',\n    'NetworkError',\n    'Failed to fetch',\n    'TypeError: Failed to fetch',\n    'TypeError: NetworkError when attempting to fetch resource',\n    'TypeError: Load failed',\n    'TypeError: Importing a module script failed',\n    'TypeError: error loading dynamically imported module',\n];\nconst { config } = window.guardian;\nconst { page: { dcrSentryDsn }, stage, } = config;\nSentry.init({\n    ignoreErrors,\n    allowUrls,\n    dsn: dcrSentryDsn,\n    environment: stage || 'DEV',\n    integrations: [new CaptureConsole({ levels: ['error'] })],\n    maxBreadcrumbs: 50,\n    // sampleRate: // We use Math.random in init.ts to sample errors\n});\nif (BUILD_VARIANT &&\n    window.guardian.config.tests[dcrJavascriptBundle('Variant')] === 'variant') {\n    Sentry.setTag('dcr.bundle', dcrJavascriptBundle('Variant'));\n}\nexport const reportError = (error, feature, tags) => {\n    Sentry.withScope(() => {\n        Sentry.setTag('feature', feature);\n        if (tags) {\n            for (const [key, value] of Object.entries(tags)) {\n                Sentry.setTag(key, value);\n            }\n        }\n        Sentry.captureException(error);\n    });\n};\n"],"names":["allowUrls","RegExp","config","window","guardian","dcrSentryDsn","page","stage","Sentry","ignoreErrors","dsn","environment","integrations","CaptureConsole","levels","maxBreadcrumbs","BUILD_VARIANT","tests","dcrJavascriptBundle","reportError","error","feature","tags","_i","_Object$entries","Object","entries","length","_Object$entries$_i","_slicedToArray","key","value"],"sourceRoot":""}