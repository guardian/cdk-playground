{"version":3,"file":"SlotBodyEnd-importable.client.web.3b3043cfdb538705eb8a.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/Island.tsx","webpack://@guardian/dotcom-rendering/./src/components/SlotBodyEnd/BrazeEpic.tsx","webpack://@guardian/dotcom-rendering/./src/components/SlotBodyEnd/ReaderRevenueEpic.tsx","webpack://@guardian/dotcom-rendering/./src/components/SlotBodyEnd.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/articleFormat.ts","webpack://@guardian/dotcom-rendering/./src/palette.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__generated__/breakpoints.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/mq/mq.js"],"sourcesContent":["import type { ScheduleOptions, SchedulePriority } from '../lib/scheduler';\n\ntype DeferredProps = {\n\tvisible: {\n\t\tuntil: 'visible';\n\t\t/**\n\t\t * @see https://developer.mozilla.org/en-us/docs/web/api/intersectionobserver/rootmargin\n\t\t */\n\t\trootMargin?: string;\n\t};\n\tidle: {\n\t\tuntil: 'idle';\n\t};\n\tinteraction: {\n\t\tuntil: 'interaction';\n\t};\n\thash: {\n\t\tuntil: 'hash';\n\t};\n};\n\ntype PriorityProps = {\n\tcritical: {\n\t\tpriority: SchedulePriority['critical'];\n\t\tdefer?: DeferredProps[keyof DeferredProps];\n\t};\n\tfeature: {\n\t\tpriority: SchedulePriority['feature'];\n\t\tdefer: DeferredProps[keyof DeferredProps];\n\t};\n\tenhancement: {\n\t\tpriority: SchedulePriority['enhancement'];\n\t\tdefer: DeferredProps[keyof DeferredProps];\n\t};\n};\n\ntype IslandProps = {\n\tchildren: JSX.Element;\n\trole?: string;\n} & PriorityProps[keyof PriorityProps];\n\n/**\n * Adds interactivity to the client by either hydrating or inserting content.\n *\n * Note. The component passed as children must follow the [MyComponent].importable.tsx\n * namimg convention\n *\n * @param {IslandProps} props - JSX Props\n * @param {JSX.Element} props.children - The component being inserted. Must be a single JSX Element\n */\nexport const Island = ({ priority, defer, children, role }: IslandProps) => {\n\tconst rootMargin =\n\t\tdefer?.until === 'visible' ? defer.rootMargin : undefined;\n\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- Type definitions on children are limited\n\tconst name = String(children.type.name);\n\n\treturn (\n\t\t<gu-island\n\t\t\tname={name}\n\t\t\tpriority={priority}\n\t\t\tdeferUntil={defer?.until}\n\t\t\tprops={JSON.stringify(children.props)}\n\t\t\trootMargin={rootMargin}\n\t\t\tdata-spacefinder-role={role}\n\t\t>\n\t\t\t{children}\n\t\t</gu-island>\n\t);\n};\n\n/**\n * Used for JSX custom element declaration\n * {@link ../../index.d.ts}\n */\nexport type GuIsland = {\n\tname: string;\n\tpriority: ScheduleOptions['priority'];\n\tdeferUntil?: NonNullable<IslandProps['defer']>['until'];\n\trootMargin?: string;\n\tprops: string;\n\tchildren: React.ReactNode;\n};\n","import { css } from '@emotion/react';\nimport type { BrazeEndOfArticleComponent } from '@guardian/braze-components/end-of-article';\nimport type {\n\tBrazeArticleContext,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport { useEffect, useRef, useState } from 'react';\nimport { submitComponentEvent } from '../../client/ophan/ophan';\nimport { getBrazeMetaFromUrlFragment } from '../../lib/braze/forceBrazeMessage';\nimport { suppressForTaylorReport } from '../../lib/braze/taylorReport';\nimport { lazyFetchEmailWithTimeout } from '../../lib/fetchEmail';\nimport { getOptionsHeadersWithOkta } from '../../lib/identity';\nimport type { CanShowResult } from '../../lib/messagePicker';\nimport { useAuthStatus } from '../../lib/useAuthStatus';\nimport { useIsInView } from '../../lib/useIsInView';\nimport { useOnce } from '../../lib/useOnce';\nimport type { TagType } from '../../types/tag';\nimport { useConfig } from '../ConfigContext';\n\nconst wrapperMargins = css`\n\tmargin: 18px 0;\n`;\n\nconst COMPONENT_TYPE = 'RETENTION_EPIC';\n\ntype Meta = {\n\tdataFromBraze: { [key: string]: string };\n\tlogImpressionWithBraze: () => void;\n\tlogButtonClickWithBraze: (id: number) => void;\n};\n\ntype EpicConfig = {\n\tmeta: Meta;\n\tcountryCode: string;\n\tidApiUrl: string;\n};\n\nexport const canShowBrazeEpic = async (\n\tbrazeMessages: BrazeMessagesInterface,\n\tbrazeArticleContext: BrazeArticleContext,\n\tcontentType: string,\n\ttags: TagType[],\n\tshouldHideReaderRevenue: boolean,\n): Promise<CanShowResult<Meta>> => {\n\tif (contentType.toLowerCase() === 'interactive') {\n\t\treturn { show: false };\n\t}\n\n\tconst forcedBrazeMeta = getBrazeMetaFromUrlFragment();\n\tif (forcedBrazeMeta) {\n\t\treturn {\n\t\t\tshow: true,\n\t\t\tmeta: forcedBrazeMeta,\n\t\t};\n\t}\n\n\tif (shouldHideReaderRevenue) {\n\t\treturn { show: false };\n\t}\n\n\tif (suppressForTaylorReport(tags)) {\n\t\treturn { show: false };\n\t}\n\n\ttry {\n\t\tconst message =\n\t\t\tawait brazeMessages.getMessageForEndOfArticle(brazeArticleContext);\n\n\t\tif (message.extras) {\n\t\t\treturn {\n\t\t\t\tshow: true,\n\t\t\t\tmeta: {\n\t\t\t\t\tdataFromBraze: message.extras,\n\t\t\t\t\tlogImpressionWithBraze: () => {\n\t\t\t\t\t\tmessage.logImpression();\n\t\t\t\t\t},\n\t\t\t\t\tlogButtonClickWithBraze: (internalButtonId: number) => {\n\t\t\t\t\t\tmessage.logButtonClick(internalButtonId);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\treturn { show: false };\n\t} catch (e) {\n\t\treturn { show: false };\n\t}\n};\n\ntype InnerProps = {\n\tmeta: Meta;\n\tcountryCode: string;\n\tBrazeComponent: typeof BrazeEndOfArticleComponent;\n\tidApiUrl: string;\n};\n\nconst BrazeEpicWithSatisfiedDependencies = ({\n\tBrazeComponent,\n\tmeta,\n\tcountryCode,\n\tidApiUrl,\n}: InnerProps) => {\n\tconst authStatus = useAuthStatus();\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\trootMargin: '-18px',\n\t\tthreshold: 0,\n\t\tdebounce: true,\n\t});\n\n\tconst epicRef = useRef(null);\n\n\tconst { renderingTarget } = useConfig();\n\n\tuseOnce(() => {\n\t\tvoid submitComponentEvent(\n\t\t\t{\n\t\t\t\tcomponent: {\n\t\t\t\t\tcomponentType: COMPONENT_TYPE,\n\t\t\t\t\tid: meta.dataFromBraze.ophanComponentId,\n\t\t\t\t},\n\t\t\t\taction: 'INSERT',\n\t\t\t},\n\t\t\trenderingTarget,\n\t\t);\n\t}, [meta.dataFromBraze, epicRef.current]);\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen) {\n\t\t\tmeta.logImpressionWithBraze();\n\n\t\t\t// Log VIEW event with Ophan\n\t\t\tvoid submitComponentEvent(\n\t\t\t\t{\n\t\t\t\t\tcomponent: {\n\t\t\t\t\t\tcomponentType: COMPONENT_TYPE,\n\t\t\t\t\t\tid: meta.dataFromBraze.ophanComponentId,\n\t\t\t\t\t},\n\t\t\t\t\taction: 'VIEW',\n\t\t\t\t},\n\t\t\t\trenderingTarget,\n\t\t\t);\n\t\t}\n\t}, [hasBeenSeen, meta, renderingTarget]);\n\n\tconst componentName = meta.dataFromBraze.componentName;\n\tif (!componentName) return null;\n\n\tconst subscribeToNewsletter = async (newsletterId: string) => {\n\t\tif (\n\t\t\tauthStatus.kind == 'SignedInWithCookies' ||\n\t\t\tauthStatus.kind == 'SignedInWithOkta'\n\t\t) {\n\t\t\tconst options = getOptionsHeadersWithOkta(authStatus);\n\n\t\t\tawait fetch(`${idApiUrl}/users/me/newsletters`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tid: newsletterId,\n\t\t\t\t\tsubscribed: true,\n\t\t\t\t}),\n\t\t\t\t...options,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst fetchEmail: () => Promise<string | null> =\n\t\tlazyFetchEmailWithTimeout(idApiUrl);\n\n\treturn (\n\t\t<div ref={setNode} css={wrapperMargins}>\n\t\t\t<div ref={epicRef}>\n\t\t\t\t<BrazeComponent\n\t\t\t\t\tcomponentName={componentName}\n\t\t\t\t\tbrazeMessageProps={meta.dataFromBraze}\n\t\t\t\t\tsubscribeToNewsletter={subscribeToNewsletter}\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tlogButtonClickWithBraze={meta.logButtonClickWithBraze}\n\t\t\t\t\tsubmitComponentEvent={(event) =>\n\t\t\t\t\t\tvoid submitComponentEvent(event, renderingTarget)\n\t\t\t\t\t}\n\t\t\t\t\tfetchEmail={fetchEmail}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const MaybeBrazeEpic = ({ meta, countryCode, idApiUrl }: EpicConfig) => {\n\tconst [BrazeComponent, setBrazeComponent] =\n\t\tuseState<typeof BrazeEndOfArticleComponent>();\n\n\tuseEffect(() => {\n\t\timport(\n\t\t\t/* webpackChunkName: \"guardian-braze-components-end-of-article\" */ '@guardian/braze-components/end-of-article'\n\t\t)\n\t\t\t.then((module) => {\n\t\t\t\tsetBrazeComponent(() => module.BrazeEndOfArticleComponent);\n\t\t\t})\n\t\t\t.catch((error) =>\n\t\t\t\twindow.guardian.modules.sentry.reportError(error, 'braze-epic'),\n\t\t\t);\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{BrazeComponent ? (\n\t\t\t\t<BrazeEpicWithSatisfiedDependencies\n\t\t\t\t\tBrazeComponent={BrazeComponent}\n\t\t\t\t\tmeta={meta}\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tidApiUrl={idApiUrl}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<div />\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tcmp,\n\tgetCookie,\n\tstartPerformanceMeasure,\n\tstorage,\n} from '@guardian/libs';\nimport type { ComponentEvent } from '@guardian/ophan-tracker-js';\nimport { getEpic, getEpicViewLog } from '@guardian/support-dotcom-components';\nimport type {\n\tEpicPayload,\n\tModuleData,\n\tModuleDataResponse,\n\tWeeklyArticleHistory,\n} from '@guardian/support-dotcom-components/dist/dotcom/types';\nimport { useEffect, useState } from 'react';\nimport { submitComponentEvent } from '../../client/ophan/ophan';\nimport {\n\thasCmpConsentForBrowserId,\n\thasCmpConsentForWeeklyArticleCount,\n\thasOptedOutOfArticleCount,\n\tshouldHideSupportMessaging,\n} from '../../lib/contributions';\nimport { lazyFetchEmailWithTimeout } from '../../lib/fetchEmail';\nimport type { CanShowResult } from '../../lib/messagePicker';\nimport { setAutomat } from '../../lib/setAutomat';\nimport type { TagType } from '../../types/tag';\nimport { useConfig } from '../ConfigContext';\n\nexport type EpicConfig = {\n\tmodule: ModuleData;\n\tfetchEmail?: () => Promise<string | null>;\n\thasConsentForArticleCount: boolean;\n\tstage: string;\n};\n\nconst wrapperMargins = css`\n\tmargin: 18px 0;\n\tclear: both;\n`;\n\nexport type CanShowData = {\n\tisSignedIn: boolean;\n\tcountryCode?: string;\n\tcontentType: string;\n\tsectionId: string;\n\tshouldHideReaderRevenue: boolean;\n\tisMinuteArticle: boolean;\n\tisPaidContent: boolean;\n\ttags: TagType[];\n\tcontributionsServiceUrl: string;\n\tidApiUrl: string;\n\tstage: string;\n\tasyncArticleCount: Promise<WeeklyArticleHistory | undefined>;\n\tbrowserId?: string;\n};\n\nconst buildPayload = async (\n\tdata: CanShowData & { hideSupportMessagingForUser: boolean },\n): Promise<EpicPayload> => ({\n\ttracking: {\n\t\tophanPageId: window.guardian.config.ophan.pageViewId,\n\t\tplatformId: 'GUARDIAN_WEB',\n\t\tclientName: 'dcr',\n\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t},\n\ttargeting: {\n\t\tcontentType: data.contentType,\n\t\tsectionId: data.sectionId,\n\t\tshouldHideReaderRevenue: data.shouldHideReaderRevenue,\n\t\tisMinuteArticle: data.isMinuteArticle,\n\t\tisPaidContent: data.isPaidContent,\n\t\ttags: data.tags,\n\t\tshowSupportMessaging: !data.hideSupportMessagingForUser,\n\t\tepicViewLog: getEpicViewLog(storage.local),\n\t\tweeklyArticleHistory: await data.asyncArticleCount,\n\n\t\thasOptedOutOfArticleCount: await hasOptedOutOfArticleCount(),\n\t\tmvtId: Number(getCookie({ name: 'GU_mvt_id', shouldMemoize: true })),\n\t\tcountryCode: data.countryCode,\n\t\turl: window.location.origin + window.location.pathname,\n\t\tbrowserId: (await hasCmpConsentForBrowserId())\n\t\t\t? data.browserId\n\t\t\t: undefined,\n\t\tisSignedIn: data.isSignedIn,\n\t},\n});\n\nexport const canShowReaderRevenueEpic = async (\n\tdata: CanShowData,\n): Promise<CanShowResult<EpicConfig>> => {\n\tconst {\n\t\tisSignedIn,\n\t\tshouldHideReaderRevenue,\n\t\tisPaidContent,\n\t\tcontributionsServiceUrl,\n\t\tidApiUrl,\n\t\tstage,\n\t} = data;\n\n\tconst hideSupportMessagingForUser = shouldHideSupportMessaging(isSignedIn);\n\n\tif (hideSupportMessagingForUser === 'Pending') {\n\t\t// We don't yet know the user's supporter status\n\t\treturn Promise.resolve({ show: false });\n\t}\n\n\tif (shouldHideReaderRevenue || isPaidContent) {\n\t\t// We never serve Reader Revenue epics in this case\n\t\treturn Promise.resolve({ show: false });\n\t}\n\tconst { endPerformanceMeasure } = startPerformanceMeasure(\n\t\t'supporterRevenue',\n\t\t'contributions-epic-data',\n\t);\n\n\tconst contributionsPayload = await buildPayload({\n\t\t...data,\n\t\thideSupportMessagingForUser,\n\t});\n\n\tconst response: ModuleDataResponse = await getEpic(\n\t\tcontributionsServiceUrl,\n\t\tcontributionsPayload,\n\t);\n\tconst module: ModuleData | undefined = response.data?.module;\n\n\tendPerformanceMeasure();\n\n\tif (!module) {\n\t\treturn { show: false };\n\t}\n\n\tconst fetchEmail: (() => Promise<string | null>) | undefined = isSignedIn\n\t\t? lazyFetchEmailWithTimeout(idApiUrl)\n\t\t: undefined;\n\n\tconst hasConsentForArticleCount =\n\t\tawait hasCmpConsentForWeeklyArticleCount();\n\n\treturn {\n\t\tshow: true,\n\t\tmeta: {\n\t\t\tmodule,\n\t\t\tfetchEmail,\n\t\t\thasConsentForArticleCount,\n\t\t\tstage,\n\t\t},\n\t};\n};\n\nexport const ReaderRevenueEpic = ({\n\tmodule,\n\tfetchEmail,\n\thasConsentForArticleCount,\n\tstage,\n}: EpicConfig) => {\n\tconst [Epic, setEpic] = useState<React.ElementType | null>(null);\n\tconst { renderingTarget } = useConfig();\n\n\tconst openCmp = () => {\n\t\tcmp.showPrivacyManager();\n\t};\n\n\tuseEffect(() => {\n\t\tsetAutomat();\n\n\t\tconst { endPerformanceMeasure } = startPerformanceMeasure(\n\t\t\t'supporterRevenue',\n\t\t\t'contributions-epic-module',\n\t\t);\n\n\t\timport(\n\t\t\t/* webpackChunkName: \"contributions-epic\" */ `../marketing/epics/ContributionsEpic`\n\t\t)\n\t\t\t.then((epicModule) => {\n\t\t\t\tendPerformanceMeasure();\n\t\t\t\tsetEpic(() => epicModule.ContributionsEpic); // useState requires functions to be wrapped\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst msg =\n\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t? `Error importing RR epic: ${error.message}`\n\t\t\t\t\t\t: 'Unknown error';\n\n\t\t\t\tconsole.log(msg);\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'rr-epic',\n\t\t\t\t);\n\t\t\t});\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tif (Epic !== null) {\n\t\treturn (\n\t\t\t<div css={wrapperMargins}>\n\t\t\t\t{}\n\t\t\t\t<Epic\n\t\t\t\t\t{...module.props}\n\t\t\t\t\tfetchEmail={fetchEmail}\n\t\t\t\t\tsubmitComponentEvent={(event: ComponentEvent) =>\n\t\t\t\t\t\tvoid submitComponentEvent(event, renderingTarget)\n\t\t\t\t\t}\n\t\t\t\t\topenCmp={openCmp}\n\t\t\t\t\thasConsentForArticleCount={hasConsentForArticleCount}\n\t\t\t\t\tstage={stage}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","import { css } from '@emotion/react';\nimport type {\n\tBrazeArticleContext,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport { adSizes, type SizeMapping } from '@guardian/commercial';\nimport type { CountryCode } from '@guardian/libs';\nimport { getCookie, isString, isUndefined } from '@guardian/libs';\nimport { palette } from '@guardian/source/foundations';\nimport type { WeeklyArticleHistory } from '@guardian/support-dotcom-components/dist/dotcom/types';\nimport { useEffect, useState } from 'react';\nimport { getArticleCounts } from '../lib/articleCount';\nimport type {\n\tCandidateConfig,\n\tMaybeFC,\n\tSlotConfig,\n} from '../lib/messagePicker';\nimport { pickMessage } from '../lib/messagePicker';\nimport { useAB } from '../lib/useAB';\nimport { useIsSignedIn } from '../lib/useAuthStatus';\nimport { useBraze } from '../lib/useBraze';\nimport { useCountryCode } from '../lib/useCountryCode';\nimport type { TagType } from '../types/tag';\nimport { AdSlot } from './AdSlot.web';\nimport { useConfig } from './ConfigContext';\nimport { canShowBrazeEpic, MaybeBrazeEpic } from './SlotBodyEnd/BrazeEpic';\nimport {\n\tcanShowReaderRevenueEpic,\n\tReaderRevenueEpic,\n} from './SlotBodyEnd/ReaderRevenueEpic';\nimport type {\n\tCanShowData as RRCanShowData,\n\tEpicConfig as RREpicConfig,\n} from './SlotBodyEnd/ReaderRevenueEpic';\n\ntype Props = {\n\tcontentType: string;\n\tsectionId: string;\n\tshouldHideReaderRevenue: boolean;\n\tisMinuteArticle: boolean;\n\tisPaidContent: boolean;\n\ttags: TagType[];\n\tcontributionsServiceUrl: string;\n\tidApiUrl: string;\n\tstage: string;\n\tpageId: string;\n\trenderAds: boolean;\n\tisLabs: boolean;\n\tarticleEndSlot: boolean;\n};\n\nconst slotStyles = css`\n\tcolor: ${palette.neutral[7]};\n`;\n\nconst buildReaderRevenueEpicConfig = (\n\tcanShowData: RRCanShowData,\n): CandidateConfig<RREpicConfig> => {\n\treturn {\n\t\tcandidate: {\n\t\t\tid: 'reader-revenue-banner',\n\t\t\tcanShow: () => canShowReaderRevenueEpic(canShowData),\n\t\t\tshow: (meta: RREpicConfig) => () => {\n\t\t\t\treturn <ReaderRevenueEpic {...meta} />;\n\t\t\t},\n\t\t},\n\t\ttimeoutMillis: null,\n\t};\n};\n\nconst buildBrazeEpicConfig = (\n\tbrazeMessages: BrazeMessagesInterface,\n\tcountryCode: CountryCode,\n\tidApiUrl: string,\n\tcontentType: string,\n\tbrazeArticleContext: BrazeArticleContext,\n\ttags: TagType[],\n\tshouldHideReaderRevenue: boolean,\n): CandidateConfig<any> => {\n\treturn {\n\t\tcandidate: {\n\t\t\tid: 'braze-epic',\n\t\t\tcanShow: () =>\n\t\t\t\tcanShowBrazeEpic(\n\t\t\t\t\tbrazeMessages,\n\t\t\t\t\tbrazeArticleContext,\n\t\t\t\t\tcontentType,\n\t\t\t\t\ttags,\n\t\t\t\t\tshouldHideReaderRevenue,\n\t\t\t\t),\n\t\t\tshow: (meta: any) => () => (\n\t\t\t\t<MaybeBrazeEpic\n\t\t\t\t\tmeta={meta}\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tidApiUrl={idApiUrl}\n\t\t\t\t/>\n\t\t\t),\n\t\t},\n\t\ttimeoutMillis: 2000,\n\t};\n};\n\nconst useBrowserId = () => {\n\tconst [browserId, setBrowserId] = useState<string>();\n\n\tuseEffect(() => {\n\t\tconst cookie = getCookie({ name: 'bwid', shouldMemoize: true });\n\n\t\tconst id = isString(cookie) ? cookie : 'no-browser-id-available';\n\n\t\tsetBrowserId(id);\n\t}, []);\n\n\treturn browserId;\n};\n\nexport const SlotBodyEnd = ({\n\tcontentType,\n\tsectionId,\n\tshouldHideReaderRevenue,\n\tisMinuteArticle,\n\tisPaidContent,\n\ttags,\n\tcontributionsServiceUrl,\n\tidApiUrl,\n\tstage,\n\tpageId,\n\trenderAds,\n\tisLabs,\n\tarticleEndSlot,\n}: Props) => {\n\tconst { renderingTarget } = useConfig();\n\tconst { brazeMessages } = useBraze(idApiUrl, renderingTarget);\n\tconst countryCode = useCountryCode('slot-body-end');\n\tconst isSignedIn = useIsSignedIn();\n\tconst browserId = useBrowserId();\n\tconst [SelectedEpic, setSelectedEpic] = useState<\n\t\tReact.ElementType | null | undefined\n\t>();\n\tconst [asyncArticleCount, setAsyncArticleCount] =\n\t\tuseState<Promise<WeeklyArticleHistory | undefined>>();\n\n\tconst showPublicGood = countryCode === 'US';\n\n\tconst abTests = useAB();\n\tconst abTestsApi = abTests?.api;\n\tconst mpuWhenNoEpicEnabled =\n\t\t(abTestsApi?.isUserInVariant('MpuWhenNoEpic', 'variant') &&\n\t\t\tcountryCode === 'GB') ??\n\t\tfalse;\n\n\tconst showArticleEndSlot =\n\t\trenderAds &&\n\t\t!isLabs &&\n\t\t(showPublicGood || mpuWhenNoEpicEnabled) &&\n\t\tarticleEndSlot;\n\n\tuseEffect(() => {\n\t\tsetAsyncArticleCount(\n\t\t\tgetArticleCounts(pageId, tags, contentType).then(\n\t\t\t\t(counts) => counts?.weeklyArticleHistory,\n\t\t\t),\n\t\t);\n\t}, [contentType, tags, pageId]);\n\n\tuseEffect(() => {\n\t\t// Wait for the following dependencies before checking for Braze + RRCP messages\n\t\tif (\n\t\t\tisUndefined(countryCode) ||\n\t\t\tisUndefined(brazeMessages) ||\n\t\t\tisUndefined(asyncArticleCount) ||\n\t\t\tisUndefined(browserId) ||\n\t\t\tisSignedIn === 'Pending'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst readerRevenueEpic = buildReaderRevenueEpicConfig({\n\t\t\tisSignedIn,\n\t\t\tcountryCode,\n\t\t\tcontentType,\n\t\t\tsectionId,\n\t\t\tshouldHideReaderRevenue,\n\t\t\tisMinuteArticle,\n\t\t\tisPaidContent,\n\t\t\ttags,\n\t\t\tcontributionsServiceUrl,\n\t\t\tidApiUrl,\n\t\t\tstage,\n\t\t\tasyncArticleCount,\n\t\t\tbrowserId,\n\t\t});\n\t\tconst brazeArticleContext: BrazeArticleContext = {\n\t\t\tsection: sectionId,\n\t\t};\n\t\tconst brazeEpic = buildBrazeEpicConfig(\n\t\t\tbrazeMessages,\n\t\t\tcountryCode,\n\t\t\tidApiUrl,\n\t\t\tcontentType,\n\t\t\tbrazeArticleContext,\n\t\t\ttags,\n\t\t\tshouldHideReaderRevenue,\n\t\t);\n\t\tconst epicConfig: SlotConfig = {\n\t\t\tcandidates: [brazeEpic, readerRevenueEpic],\n\t\t\tname: 'slotBodyEnd',\n\t\t};\n\t\tpickMessage(epicConfig, renderingTarget)\n\t\t\t.then((PickedEpic: () => MaybeFC) => setSelectedEpic(PickedEpic))\n\t\t\t.catch((e) =>\n\t\t\t\tconsole.error(`SlotBodyEnd pickMessage - error: ${String(e)}`),\n\t\t\t);\n\t}, [\n\t\tisSignedIn,\n\t\tcountryCode,\n\t\tbrazeMessages,\n\t\tasyncArticleCount,\n\t\tbrowserId,\n\t\tcontentType,\n\t\tcontributionsServiceUrl,\n\t\tidApiUrl,\n\t\tisMinuteArticle,\n\t\tisPaidContent,\n\t\trenderingTarget,\n\t\tsectionId,\n\t\tshouldHideReaderRevenue,\n\t\tstage,\n\t\ttags,\n\t]);\n\n\tuseEffect(() => {\n\t\tif (SelectedEpic === null && showArticleEndSlot) {\n\t\t\tconst additionalSizes = (): SizeMapping => {\n\t\t\t\tif (mpuWhenNoEpicEnabled) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdesktop: [\n\t\t\t\t\t\t\tadSizes.outstreamDesktop,\n\t\t\t\t\t\t\tadSizes.outstreamGoogleDesktop,\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t} else if (showPublicGood) {\n\t\t\t\t\treturn { mobile: [adSizes.fluid] };\n\t\t\t\t}\n\t\t\t\treturn {};\n\t\t\t};\n\t\t\tdocument.dispatchEvent(\n\t\t\t\tnew CustomEvent('gu.commercial.slot.fill', {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tslotId: 'dfp-ad--article-end',\n\t\t\t\t\t\tadditionalSizes: additionalSizes(),\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}, [\n\t\tSelectedEpic,\n\t\tshowArticleEndSlot,\n\t\tmpuWhenNoEpicEnabled,\n\t\tshowPublicGood,\n\t]);\n\n\tif (SelectedEpic !== null && !isUndefined(SelectedEpic)) {\n\t\treturn (\n\t\t\t<div id=\"slot-body-end\" css={slotStyles}>\n\t\t\t\t<SelectedEpic />\n\t\t\t</div>\n\t\t);\n\t} else if (SelectedEpic === null && showArticleEndSlot) {\n\t\treturn (\n\t\t\t<div id=\"slot-body-end\" css={slotStyles}>\n\t\t\t\t<AdSlot data-print-layout=\"hide\" position=\"article-end\" />\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","import { isString } from '@guardian/libs';\nimport type { FEDesign, FEDisplay, FEFormat, FETheme } from '../types/frontend';\n\nexport enum ArticleDesign {\n\tStandard,\n\tPicture,\n\tGallery,\n\tAudio,\n\tVideo,\n\tReview,\n\tAnalysis,\n\tExplainer,\n\tComment,\n\tLetter,\n\tFeature,\n\tLiveBlog,\n\tDeadBlog,\n\tRecipe,\n\tMatchReport,\n\tInterview,\n\tEditorial,\n\tQuiz,\n\tInteractive,\n\tPhotoEssay,\n\tObituary,\n\tCorrection,\n\tFullPageInteractive,\n\tNewsletterSignup,\n\tTimeline,\n\tProfile,\n}\n\nexport enum ArticleDisplay {\n\tStandard,\n\tImmersive,\n\tShowcase,\n\tNumberedList,\n}\n\nexport enum Pillar {\n\tNews = 0,\n\tOpinion = 1,\n\tSport = 2,\n\tCulture = 3,\n\tLifestyle = 4,\n}\n\nexport enum ArticleSpecial {\n\tSpecialReport = 5,\n\tLabs = 6,\n\tSpecialReportAlt = 7,\n}\n\nexport type ArticleTheme = Pillar | ArticleSpecial;\n\nexport interface ArticleFormat {\n\ttheme: ArticleTheme;\n\tdesign: ArticleDesign;\n\tdisplay: ArticleDisplay;\n}\n\n/**\n * NOTE: Immersive Opinion pieces are not supported,\n * i.e. when `CommentDesign` and `ImmersiveDisplay` are used jointly.\n */\nexport const decideDesign = ({ design }: Partial<FEFormat>): ArticleDesign => {\n\tswitch (design) {\n\t\tcase 'ArticleDesign':\n\t\t\treturn ArticleDesign.Standard;\n\t\tcase 'PictureDesign':\n\t\t\treturn ArticleDesign.Picture;\n\t\tcase 'GalleryDesign':\n\t\t\treturn ArticleDesign.Gallery;\n\t\tcase 'AudioDesign':\n\t\t\treturn ArticleDesign.Audio;\n\t\tcase 'VideoDesign':\n\t\t\treturn ArticleDesign.Video;\n\t\tcase 'ReviewDesign':\n\t\t\treturn ArticleDesign.Review;\n\t\tcase 'AnalysisDesign':\n\t\t\treturn ArticleDesign.Analysis;\n\t\tcase 'CommentDesign':\n\t\t\treturn ArticleDesign.Comment;\n\t\tcase 'LetterDesign':\n\t\t\treturn ArticleDesign.Letter;\n\t\tcase 'FeatureDesign':\n\t\t\treturn ArticleDesign.Feature;\n\t\tcase 'LiveBlogDesign':\n\t\t\treturn ArticleDesign.LiveBlog;\n\t\tcase 'DeadBlogDesign':\n\t\t\treturn ArticleDesign.DeadBlog;\n\t\tcase 'RecipeDesign':\n\t\t\treturn ArticleDesign.Recipe;\n\t\tcase 'MatchReportDesign':\n\t\t\treturn ArticleDesign.MatchReport;\n\t\tcase 'InterviewDesign':\n\t\t\treturn ArticleDesign.Interview;\n\t\tcase 'EditorialDesign':\n\t\t\treturn ArticleDesign.Editorial;\n\t\tcase 'QuizDesign':\n\t\t\treturn ArticleDesign.Quiz;\n\t\tcase 'InteractiveDesign':\n\t\t\treturn ArticleDesign.Interactive;\n\t\tcase 'PhotoEssayDesign':\n\t\t\treturn ArticleDesign.PhotoEssay;\n\t\tcase 'ObituaryDesign':\n\t\t\treturn ArticleDesign.Obituary;\n\t\tcase 'FullPageInteractiveDesign':\n\t\t\treturn ArticleDesign.FullPageInteractive;\n\t\tcase 'NewsletterSignupDesign':\n\t\t\treturn ArticleDesign.NewsletterSignup;\n\t\tcase 'ExplainerDesign':\n\t\t\treturn ArticleDesign.Explainer;\n\t\tcase 'TimelineDesign':\n\t\t\treturn ArticleDesign.Timeline;\n\t\tcase 'ProfileDesign':\n\t\t\treturn ArticleDesign.Profile;\n\t\tdefault:\n\t\t\treturn ArticleDesign.Standard;\n\t}\n};\n\nconst decideDisplay = ({\n\tdisplay,\n\tdesign,\n}: Partial<FEFormat>): ArticleDisplay => {\n\tswitch (display) {\n\t\tcase 'StandardDisplay':\n\t\t\treturn ArticleDisplay.Standard;\n\t\tcase 'ImmersiveDisplay':\n\t\t\t// Temporary hack until we can handle Immersive Comment pieces\n\t\t\treturn design === 'CommentDesign'\n\t\t\t\t? ArticleDisplay.Standard\n\t\t\t\t: ArticleDisplay.Immersive;\n\t\tcase 'ShowcaseDisplay':\n\t\t\treturn ArticleDisplay.Showcase;\n\t\tcase 'NumberedListDisplay':\n\t\t\treturn ArticleDisplay.NumberedList;\n\t\tdefault:\n\t\t\treturn ArticleDisplay.Standard;\n\t}\n};\n\nexport const decideTheme = ({ theme }: Partial<FEFormat>): ArticleTheme => {\n\tswitch (theme) {\n\t\tcase 'NewsPillar':\n\t\t\treturn Pillar.News;\n\t\tcase 'OpinionPillar':\n\t\t\treturn Pillar.Opinion;\n\t\tcase 'SportPillar':\n\t\t\treturn Pillar.Sport;\n\t\tcase 'CulturePillar':\n\t\t\treturn Pillar.Culture;\n\t\tcase 'LifestylePillar':\n\t\t\treturn Pillar.Lifestyle;\n\t\tcase 'SpecialReportTheme':\n\t\t\treturn ArticleSpecial.SpecialReport;\n\t\tcase 'SpecialReportAltTheme':\n\t\t\treturn ArticleSpecial.SpecialReportAlt;\n\t\tcase 'Labs':\n\t\t\treturn ArticleSpecial.Labs;\n\t\tdefault:\n\t\t\treturn Pillar.News;\n\t}\n};\n\nexport const decideFormat = (format: Partial<FEFormat>): ArticleFormat => ({\n\tdesign: decideDesign(format),\n\tdisplay: decideDisplay(format),\n\ttheme: decideTheme(format),\n});\n\nexport const getThemeNameAsString = (format: ArticleFormat): string => {\n\tconst themeName = Pillar[format.theme] ?? ArticleSpecial[format.theme];\n\tif (!themeName) throw new Error('Unknown theme');\n\treturn themeName;\n};\n\n/**\n * We need a type guard because TypeScript enums are (confusingly)\n * returning both strings and numbers.\n */\nconst isTheme = (theme: string | ArticleTheme): theme is ArticleTheme =>\n\t!isString(theme);\n\nconst isDesign = (design: string | ArticleDesign): design is ArticleDesign =>\n\t!isString(design);\n\nexport const getAllThemes = ({\n\tdisplay,\n\tdesign,\n}: {\n\tdisplay: ArticleDisplay;\n\tdesign: ArticleDesign;\n}): Array<ArticleFormat> =>\n\tObject.values({ ...Pillar, ...ArticleSpecial })\n\t\t.filter(isTheme)\n\t\t.map((theme) => ({\n\t\t\ttheme,\n\t\t\tdisplay,\n\t\t\tdesign,\n\t\t}));\n\nexport const getAllDesigns = ({\n\tdisplay,\n\ttheme,\n}: {\n\tdisplay: ArticleDisplay;\n\ttheme: ArticleTheme;\n}): Array<ArticleFormat> =>\n\tObject.values({ ...ArticleDesign })\n\t\t.filter(isDesign)\n\t\t.map((design) => ({\n\t\t\ttheme,\n\t\t\tdisplay,\n\t\t\tdesign,\n\t\t}));\n\nconst designToFEDesign = (design: ArticleDesign): FEDesign => {\n\tswitch (design) {\n\t\tcase ArticleDesign.Standard:\n\t\t// Correction doesn't exist in `FEFormat`.\n\t\tcase ArticleDesign.Correction:\n\t\t\treturn 'ArticleDesign';\n\t\tcase ArticleDesign.Picture:\n\t\t\treturn 'PictureDesign';\n\t\tcase ArticleDesign.Gallery:\n\t\t\treturn 'GalleryDesign';\n\t\tcase ArticleDesign.Audio:\n\t\t\treturn 'AudioDesign';\n\t\tcase ArticleDesign.Video:\n\t\t\treturn 'VideoDesign';\n\t\tcase ArticleDesign.Review:\n\t\t\treturn 'ReviewDesign';\n\t\tcase ArticleDesign.Analysis:\n\t\t\treturn 'AnalysisDesign';\n\t\tcase ArticleDesign.Explainer:\n\t\t\treturn 'ExplainerDesign';\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn 'CommentDesign';\n\t\tcase ArticleDesign.Letter:\n\t\t\treturn 'LetterDesign';\n\t\tcase ArticleDesign.Feature:\n\t\t\treturn 'FeatureDesign';\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\treturn 'LiveBlogDesign';\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn 'DeadBlogDesign';\n\t\tcase ArticleDesign.Recipe:\n\t\t\treturn 'RecipeDesign';\n\t\tcase ArticleDesign.MatchReport:\n\t\t\treturn 'MatchReportDesign';\n\t\tcase ArticleDesign.Interview:\n\t\t\treturn 'InterviewDesign';\n\t\tcase ArticleDesign.Editorial:\n\t\t\treturn 'EditorialDesign';\n\t\tcase ArticleDesign.Quiz:\n\t\t\treturn 'QuizDesign';\n\t\tcase ArticleDesign.Interactive:\n\t\t\treturn 'InteractiveDesign';\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\treturn 'PhotoEssayDesign';\n\t\tcase ArticleDesign.Obituary:\n\t\t\treturn 'ObituaryDesign';\n\t\tcase ArticleDesign.FullPageInteractive:\n\t\t\treturn 'FullPageInteractiveDesign';\n\t\tcase ArticleDesign.NewsletterSignup:\n\t\t\treturn 'NewsletterSignupDesign';\n\t\tcase ArticleDesign.Timeline:\n\t\t\treturn 'TimelineDesign';\n\t\tcase ArticleDesign.Profile:\n\t\t\treturn 'ProfileDesign';\n\t}\n};\n\nconst displayToFEDisplay = (display: ArticleDisplay): FEDisplay => {\n\tswitch (display) {\n\t\tcase ArticleDisplay.Standard:\n\t\t\treturn 'StandardDisplay';\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn 'ImmersiveDisplay';\n\t\tcase ArticleDisplay.Showcase:\n\t\t\treturn 'ShowcaseDisplay';\n\t\tcase ArticleDisplay.NumberedList:\n\t\t\treturn 'NumberedListDisplay';\n\t}\n};\n\nconst themeToFETheme = (theme: ArticleTheme): FETheme => {\n\tswitch (theme) {\n\t\tcase Pillar.News:\n\t\t\treturn 'NewsPillar';\n\t\tcase Pillar.Opinion:\n\t\t\treturn 'OpinionPillar';\n\t\tcase Pillar.Sport:\n\t\t\treturn 'SportPillar';\n\t\tcase Pillar.Culture:\n\t\t\treturn 'CulturePillar';\n\t\tcase Pillar.Lifestyle:\n\t\t\treturn 'LifestylePillar';\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn 'SpecialReportTheme';\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn 'Labs';\n\t\tcase ArticleSpecial.SpecialReportAlt:\n\t\t\treturn 'SpecialReportAltTheme';\n\t}\n};\n\nexport const formatToFEFormat = ({\n\tdesign,\n\tdisplay,\n\ttheme,\n}: ArticleFormat): FEFormat => ({\n\tdesign: designToFEDesign(design),\n\tdisplay: displayToFEDisplay(display),\n\ttheme: themeToFETheme(theme),\n});\n\n/**\n * Creates a string representation of {@linkcode ArticleFormat}. Useful for\n * logging, storybook UI etc.\n *\n * @param format An {@linkcode ArticleFormat}\n * @returns A string representation of `ArticleFormat`\n */\nexport const formatToString = ({\n\tdesign,\n\tdisplay,\n\ttheme,\n}: ArticleFormat): string =>\n\t[\n\t\t`${ArticleDesign[design]} Design`,\n\t\t`${ArticleDisplay[display]} Display`,\n\t\t`and ${Pillar[theme] ?? ArticleSpecial[theme]} Theme`,\n\t].join(', ');\n","import type { ColourName } from './paletteDeclarations';\n\n/**\n * Looks up a palette colour by name. Retrieves a CSS value for the specified\n * colour, for use in CSS declarations. See the examples for how this is\n * commonly used with our Emotion-based styles.\n *\n * @param a The name of a palette colour; for example `--headline-colour`.\n * @returns A CSS `var` function call; for example `var(--headline-colour)`.\n * @example\n * const styles = css`\n *   color: ${palette('--headline-colour')};\n *   background-color: ${palette('--headline-background-colour')};\n * `;\n */\nconst palette = (colour: ColourName): string => `var(${colour})`;\n\n// ----- Exports ----- //\n\nexport { palette };\n","const breakpoints = {\n  desktop: 980,\n  leftCol: 1140,\n  mobile: 320,\n  mobileLandscape: 480,\n  mobileMedium: 375,\n  phablet: 660,\n  tablet: 740,\n  wide: 1300\n};\n\nexport { breakpoints };\n","import { breakpoints } from '../__generated__/breakpoints.js';\n\nconst smidgen = 0.1;\nconst minWidth = (from2) => `@media (min-width: ${`${from2}px`})`;\nconst maxWidth = (until2) => `@media (max-width: ${`${until2 - smidgen}px`})`;\nconst minWidthMaxWidth = (from2, until2) => `@media (min-width: ${`${from2}px`}) and (max-width: ${`${until2 - smidgen}px`})`;\nconst from = {\n  mobile: minWidth(breakpoints.mobile),\n  mobileMedium: minWidth(breakpoints.mobileMedium),\n  mobileLandscape: minWidth(breakpoints.mobileLandscape),\n  phablet: minWidth(breakpoints.phablet),\n  tablet: minWidth(breakpoints.tablet),\n  desktop: minWidth(breakpoints.desktop),\n  leftCol: minWidth(breakpoints.leftCol),\n  wide: minWidth(breakpoints.wide)\n};\nconst until = {\n  mobile: maxWidth(breakpoints.mobile),\n  mobileMedium: maxWidth(breakpoints.mobileMedium),\n  mobileLandscape: maxWidth(breakpoints.mobileLandscape),\n  phablet: maxWidth(breakpoints.phablet),\n  tablet: maxWidth(breakpoints.tablet),\n  desktop: maxWidth(breakpoints.desktop),\n  leftCol: maxWidth(breakpoints.leftCol),\n  wide: maxWidth(breakpoints.wide)\n};\nconst between = {\n  mobile: {\n    and: {\n      mobileMedium: minWidthMaxWidth(\n        breakpoints.mobile,\n        breakpoints.mobileMedium\n      ),\n      mobileLandscape: minWidthMaxWidth(\n        breakpoints.mobile,\n        breakpoints.mobileLandscape\n      ),\n      phablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.phablet),\n      tablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.tablet),\n      desktop: minWidthMaxWidth(breakpoints.mobile, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.mobile, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide)\n    }\n  },\n  mobileMedium: {\n    and: {\n      mobileLandscape: minWidthMaxWidth(\n        breakpoints.mobileMedium,\n        breakpoints.mobileLandscape\n      ),\n      phablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.phablet),\n      tablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.tablet),\n      desktop: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide)\n    }\n  },\n  mobileLandscape: {\n    and: {\n      phablet: minWidthMaxWidth(\n        breakpoints.mobileLandscape,\n        breakpoints.phablet\n      ),\n      tablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.tablet),\n      desktop: minWidthMaxWidth(\n        breakpoints.mobileLandscape,\n        breakpoints.desktop\n      ),\n      leftCol: minWidthMaxWidth(\n        breakpoints.mobileLandscape,\n        breakpoints.leftCol\n      ),\n      wide: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.wide)\n    }\n  },\n  phablet: {\n    and: {\n      tablet: minWidthMaxWidth(breakpoints.phablet, breakpoints.tablet),\n      desktop: minWidthMaxWidth(breakpoints.phablet, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.phablet, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.phablet, breakpoints.wide)\n    }\n  },\n  tablet: {\n    and: {\n      desktop: minWidthMaxWidth(breakpoints.tablet, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.tablet, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.tablet, breakpoints.wide)\n    }\n  },\n  desktop: {\n    and: {\n      leftCol: minWidthMaxWidth(breakpoints.desktop, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.desktop, breakpoints.wide)\n    }\n  },\n  leftCol: {\n    and: {\n      wide: minWidthMaxWidth(breakpoints.leftCol, breakpoints.wide)\n    }\n  }\n};\n\nexport { between, from, until };\n"],"names":["Island","priority","defer","children","role","rootMargin","until","undefined","name","String","type","gu-island","deferUntil","props","JSON","stringify","data-spacefinder-role","wrapperMargins","css","COMPONENT_TYPE","BrazeEpicWithSatisfiedDependencies","BrazeComponent","meta","countryCode","idApiUrl","authStatus","useAuthStatus","hasBeenSeen","setNode","useIsInView","threshold","debounce","epicRef","useRef","renderingTarget","useConfig","useOnce","submitComponentEvent","component","componentType","id","dataFromBraze","ophanComponentId","action","current","useEffect","logImpressionWithBraze","componentName","fetchEmail","lazyFetchEmailWithTimeout","div","ref","brazeMessageProps","subscribeToNewsletter","async","newsletterId","kind","options","getOptionsHeadersWithOkta","fetch","method","body","subscribed","logButtonClickWithBraze","event","MaybeBrazeEpic","setBrazeComponent","useState","then","module","BrazeEndOfArticleComponent","catch","error","window","guardian","modules","sentry","reportError","ReaderRevenueEpic","hasConsentForArticleCount","stage","Epic","setEpic","setAutomat","endPerformanceMeasure","startPerformanceMeasure","epicModule","ContributionsEpic","msg","Error","message","console","log","openCmp","cmp","showPrivacyManager","slotStyles","palette","neutral","buildReaderRevenueEpicConfig","canShowData","candidate","canShow","data","response","isSignedIn","shouldHideReaderRevenue","isPaidContent","contributionsServiceUrl","hideSupportMessagingForUser","shouldHideSupportMessaging","Promise","resolve","show","contributionsPayload","tracking","ophanPageId","config","ophan","pageViewId","platformId","clientName","referrerUrl","location","origin","pathname","targeting","contentType","sectionId","isMinuteArticle","tags","showSupportMessaging","epicViewLog","getEpicViewLog","storage","local","weeklyArticleHistory","asyncArticleCount","hasOptedOutOfArticleCount","mvtId","Number","getCookie","shouldMemoize","url","browserId","hasCmpConsentForBrowserId","buildPayload","getEpic","hasCmpConsentForWeeklyArticleCount","canShowReaderRevenueEpic","timeoutMillis","buildBrazeEpicConfig","brazeMessages","brazeArticleContext","toLowerCase","forcedBrazeMeta","getBrazeMetaFromUrlFragment","suppressForTaylorReport","getMessageForEndOfArticle","extras","logImpression","internalButtonId","logButtonClick","e","canShowBrazeEpic","SlotBodyEnd","pageId","renderAds","isLabs","articleEndSlot","useBraze","useCountryCode","useIsSignedIn","setBrowserId","cookie","isString","useBrowserId","SelectedEpic","setSelectedEpic","setAsyncArticleCount","showPublicGood","abTests","useAB","abTestsApi","api","mpuWhenNoEpicEnabled","isUserInVariant","showArticleEndSlot","getArticleCounts","counts","isUndefined","readerRevenueEpic","epicConfig","candidates","section","pickMessage","PickedEpic","additionalSizes","desktop","adSizes","outstreamDesktop","outstreamGoogleDesktop","mobile","fluid","document","dispatchEvent","CustomEvent","detail","slotId","AdSlot","data-print-layout","position","ArticleDesign","ArticleDisplay","Pillar","ArticleSpecial","decideDesign","design","decideDisplay","display","decideTheme","theme","decideFormat","format","colour","breakpoints","leftCol","mobileLandscape","mobileMedium","phablet","tablet","wide","minWidth","from2","maxWidth","until2","minWidthMaxWidth","from","between","and"],"sourceRoot":""}