"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[2992],{98375:(e,n,t)=>{t.r(n),t.d(n,{LiveBlogEpic:()=>I});var r=t(62335),i=t(22820),o=t(50484),a=t(24017),u=t(64361),c=t(16346),d=t(296),s=t(65656),l=t(59648),f=t(42702),v=t(67400),p=t(85918),g=t(30556),w=t(28118),m=t(66186),h=t(59695),y=t(53994),b=t(7693);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=function(e){var n=e.name,r=e.props,u=function(e){var n=e.name,r=(0,v.useState)(),o=(0,i.A)(r,2),a=o[0],u=o[1];return(0,v.useEffect)((function(){Promise.all([t.e(8219),t.e(9428),t.e(8079),t.e(6926),t.e(9355),t.e(5496),t.e(6599)]).then(t.bind(t,88152)).then((function(e){u((function(){return e.ContributionsLiveblogEpic}))})).catch((function(e){var n="Error importing LiveBlog epic: ".concat(String(e));window.guardian.modules.sentry.reportError(new Error(n),"liveblog-epic")}))}),[n]),{Epic:a}}({name:n}),d=u.Epic;return(0,s.b)(d)?null:((0,c.Rm)("dotcom","LiveBlogEpic has the Epic"),(0,o.jsx)("aside",{css:(0,a.css)("margin-bottom:",l.x[3],"px;"),children:(0,o.jsx)(d,k({},r))}))},P=function(e){var n=e.payload,t=function(e,n){return t="liveblog-epic",r=function(){return(0,f.qY)(e,n)},i=(0,y.A)(t,r,{revalidateOnFocus:!1}),o=i.data,(a=i.error)&&window.guardian.modules.sentry.reportError(a,"rr-epic"),o;var t,r,i,o,a}(e.contributionsServiceUrl,n),r=(0,b.U)().renderingTarget;if(null==t||!t.data||0===Object.keys(t).length)return null;(0,c.Rm)("dotcom","LiveBlogEpic has a module");var i=k(k({},t.data.module.props),{},{submitComponentEvent:function(e){return(0,p.u_)(e,r)}});return(0,o.jsx)(E,{name:t.data.module.name,props:i})};function C(e,n){var t;null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling)}var I=function(e){var n=e.sectionId,t=e.shouldHideReaderRevenue,r=e.isPaidContent,a=e.tags,s=e.contributionsServiceUrl,l=e.pageId,p=e.keywordIds;(0,c.Rm)("dotcom","LiveBlogEpic started");var y=function(e){var n=e.shouldHideReaderRevenue,t=e.sectionId,r=e.isPaidContent,o=e.tags,a=e.pageId,s=(0,g.af)(a,o,"LiveBlog"),l=(0,w.mG)(),p=(0,h.F)("liveblog-epic"),y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,v.useState)(0),t=(0,i.A)(n,2),r=t[0],o=t[1];return(0,v.useEffect)((function(){var e=(0,u.R)({name:"GU_mvt_id",shouldMemoize:!0});if(null!==e){var n=Number(e)||0;o(n)}}),[e]),r}(),b=(0,m.T)();if("Pending"!==b){var A=(0,w.h3)(b);if("Pending"!==A&&"Pending"!==s&&"Pending"!==l&&((0,c.Rm)("dotcom","LiveBlogEpic has consent state"),p))return(0,c.Rm)("dotcom","LiveBlogEpic has countryCode"),{tracking:{ophanPageId:window.guardian.config.ophan.pageViewId,platformId:"GUARDIAN_WEB",clientName:"dcr",referrerUrl:window.location.origin+window.location.pathname},targeting:{contentType:"LiveBlog",sectionId:t,shouldHideReaderRevenue:n,isMinuteArticle:!0,isPaidContent:r,tags:o,showSupportMessaging:!A,mvtId:y,countryCode:p,epicViewLog:(0,f.DS)(d.I.local),weeklyArticleHistory:null==s?void 0:s.weeklyArticleHistory,hasOptedOutOfArticleCount:l,url:window.location.origin+window.location.pathname}}}}({shouldHideReaderRevenue:t,sectionId:n,isPaidContent:r,tags:a,pageId:l,keywordIds:p});if(!y)return null;var b=document.createElement("article");if(window.location.href.includes("#block-")){b.classList.add("pending");var A=window.location.hash.slice(1),k=document.getElementById(A);k&&C(k,b),b.classList.add("reveal"),b.classList.remove("pending")}else{var E=Math.floor(3*Math.random())+1,I=document.querySelectorAll("article.block")[E];I&&C(I,b)}return(0,v.createPortal)((0,o.jsx)(P,{payload:y,contributionsServiceUrl:s}),b)}},30556:(e,n,t)=>{t.d(n,{af:()=>w,r2:()=>g});var r=t(22820),i=t(18247),o=t(57820),a=t.n(o),u=t(296),c=t(42702),d=t(67400),s=t(28118),l=t(45025),f=function(e){return["article","liveblog","gallery","video","interactive","audio"].includes(e.toLowerCase())},v=function(e){return window.guardian.dailyArticleCount||(f(e)&&(0,l.Q_)(),window.guardian.dailyArticleCount=(0,l.L3)()),window.guardian.dailyArticleCount},p=function(){var e=(0,i.A)(a().mark((function e(n,t,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.yw)();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",void 0);case 4:return window.guardian.weeklyArticleCount||(f(r)&&(i=t.filter((function(e){return["tone","keyword"].includes(e.type.toLowerCase())})).map((function(e){return e.id})),(0,c.sB)(u.I.local,n,i)),window.guardian.weeklyArticleCount=(0,c.sQ)(u.I.local)),e.abrupt("return",window.guardian.weeklyArticleCount);case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.A)(a().mark((function e(n,t,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(r),e.next=3,p(n,t,r);case 3:return e.abrupt("return",{dailyArticleHistory:null!==(i=window.guardian.dailyArticleCount)&&void 0!==i?i:[],weeklyArticleHistory:null!==(o=window.guardian.weeklyArticleCount)&&void 0!==o?o:[]});case 4:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),w=function(e,n,t){var i=(0,d.useState)("Pending"),o=(0,r.A)(i,2),a=o[0],u=o[1];return(0,d.useEffect)((function(){g(e,n,t).then(u).catch((function(){return u(void 0)}))}),[t,e,n]),a}},28118:(e,n,t)=>{t.d(n,{Jj:()=>A,Pp:()=>v,VF:()=>p,Vi:()=>f,Xr:()=>P,_f:()=>I,h3:()=>w,mG:()=>E,mV:()=>b,n8:()=>C,q6:()=>R,tZ:()=>O,yw:()=>k});var r=t(22820),i=t(18247),o=t(57820),a=t.n(o),u=t(64361),c=t(65656),d=t(296),s=t(63854),l=t(67400),f="gu_hide_support_messaging",v="gu_recurring_contributor",p="gu.contributions.contrib-timestamp",g="gu.noRRBanner",w=function(e){var n,t,r=function(e){switch((0,u.R)({name:f})){case"true":return!0;case"false":return!1;default:return!!e&&"Pending"}}(e);return"Pending"===r?"Pending":r||(t=function(){var e=(0,u.R)({name:p});if(e)return(e?parseInt(e,10):0)||void 0}(),!(0,c.b)(t)&&(n=Date.now()-t,Math.floor(n/864e5)<=90))},m=[1,3,7],h=[1,3,5,7],y=function(){return null!==(0,u.R)({name:"gu_article_count_opt_out"})},b=function(){return new Promise((function(e){(0,u.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&e(!0),(0,s.Ym)((function(n){var t=n.usnat,r=n.tcfv2,i=n.aus;if(null!=t?t:i)e(!0);else if(r){var o=m.every((function(e){return r.consents[e]}));o||d.I.local.remove("gu.history.weeklyArticleCount"),e(o)}}))}))},A=function(){var e=(0,i.A)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return n=e.sent,e.abrupt("return",!n||y());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.A)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return n=e.sent,e.abrupt("return",!n||y());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,l.useState)("Pending"),n=(0,r.A)(e,2),t=n[0],i=n[1];return(0,l.useEffect)((function(){A().then(i).catch((function(){return i(!0)}))}),[]),t},P=function(){return new Promise((function(e){(0,u.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&e(!0),(0,s.Ym)((function(n){var t=n.usnat,r=n.tcfv2,i=n.aus;if(null!=t?t:i)e(!0);else if(r){var o=h.every((function(e){return r.consents[e]}));e(o)}}))}))},C=function(){return!!d.I.local.get(g)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return d.I.local.set(g,!0,e+12e5)},O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!!e&&n-new Date(e).getTime()<36e5},R=function(){var e=(0,u.R)({name:"GU_CO_COMPLETE",shouldMemoize:!0});if(e){var n;try{n=JSON.parse(decodeURIComponent(e))}catch(e){}return n}}},45025:(e,n,t)=>{t.d(n,{Gq:()=>u,L3:()=>a,Q_:()=>c});var r=t(90760),i=t(296),o="gu.history.dailyArticleCount",a=function(){try{var e=i.I.local.get(o);if(n=e,!Array.isArray(n)||!n.every((function(e){return(0,r.G)(e)&&"day"in e&&"count"in e&&"number"==typeof e.day&&"number"==typeof e.count})))throw new Error("Invalid gu.history.dailyArticleCount value");return e}catch(e){return void i.I.local.remove(o)}var n},u=function(){return Math.floor(Date.now()/864e5)},c=function(){var e,n,t=null!==(e=a())&&void 0!==e?e:[],r=u();if((null===(n=t[0])||void 0===n?void 0:n.day)===r)t[0].count+=1;else{t.unshift({day:r,count:1});var c=r-60,d=t.findIndex((function(e){return e.day&&e.day<c}));d>0&&t.splice(d)}i.I.local.set(o,t)}},66186:(e,n,t)=>{t.d(n,{T:()=>a,w:()=>u});var r=t(22820),i=t(67400),o=t(17950),a=function(){switch(u().kind){case"Pending":return"Pending";case"SignedInWithCookies":case"SignedInWithOkta":return!0;case"SignedOutWithCookies":case"SignedOutWithOkta":return!1}},u=function(){var e=(0,i.useState)({kind:"Pending"}),n=(0,r.A)(e,2),t=n[0],a=n[1];return(0,i.useEffect)((function(){(0,o.kU)((function(e){a((0,o.dx)(e))}),(function(){return a((0,o.Hn)())})).catch((function(e){console.error(e)}))}),[]),t}},59695:(e,n,t)=>{t.d(n,{F:()=>u});var r=t(22820),i=t(76720),o=t(67400),a=t(34166),u=function(e){var n=(0,o.useState)(),t=(0,r.A)(n,2),u=t[0],c=t[1];return(0,o.useEffect)((function(){(0,a.C)().then((function(e){(0,i.R)(e)&&c(e)})).catch((function(n){var t="Error fetching country code: ".concat(String(n));window.guardian.modules.sentry.reportError(new Error(t),e)}))}),[e]),u}}}]);
//# sourceMappingURL=LiveBlogEpic-importable.client.web.legacy.f8574b8278612d51d013.js.map