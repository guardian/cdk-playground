{"version":3,"file":"InteractiveBlockComponent-importable.client.web.bcb127023dd6d13e27d3.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/lodash.debounce@4.0.8/node_modules/lodash.debounce/index.js","webpack://@guardian/dotcom-rendering/./src/static/icons/camera.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/video-icon.svg","webpack://@guardian/dotcom-rendering/./src/components/Caption.tsx","webpack://@guardian/dotcom-rendering/./src/components/Figure.tsx","webpack://@guardian/dotcom-rendering/./src/components/InteractiveBlockComponent.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/Placeholder.tsx","webpack://@guardian/dotcom-rendering/./src/layouts/lib/interactiveLegacyStyling.ts","webpack://@guardian/dotcom-rendering/./src/lib/articleFormat.ts","webpack://@guardian/dotcom-rendering/./src/lib/center.ts","webpack://@guardian/dotcom-rendering/./src/lib/useOnce.ts","webpack://@guardian/dotcom-rendering/./src/palette.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__generated__/breakpoints.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/mq/mq.js"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgCamera = function SvgCamera(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 13,\n    viewBox: \"0 0 18 13\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z\"\n  })));\n};\nexport default SvgCamera;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgVideoIcon = function SvgVideoIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 36,\n    height: 23,\n    viewBox: \"0 0 36 23\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.2 0l-3.2 3.3v16.4l3.3 3.3h18.7v-23h-18.8m30.4 1l-8.6 8v5l8.6 8h2.4v-21h-2.4\"\n  })));\n};\nexport default SvgVideoIcon;","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\tspace,\n\ttextSans12,\n\ttextSans14,\n\tuntil,\n} from '@guardian/source/foundations';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\ttype ArticleFormat,\n\tArticleSpecial,\n} from '../lib/articleFormat';\nimport { palette } from '../palette';\nimport CameraSvg from '../static/icons/camera.svg';\nimport VideoSvg from '../static/icons/video-icon.svg';\nimport type { MediaType } from '../types/layout';\n\ntype Props = {\n\tcaptionText?: string;\n\tformat: ArticleFormat;\n\tpadCaption?: boolean;\n\tcredit?: string;\n\tdisplayCredit?: boolean;\n\tshouldLimitWidth?: boolean;\n\tisOverlaid?: boolean;\n\tisLeftCol?: boolean;\n\tmediaType?: MediaType;\n\tisMainMedia?: boolean;\n};\n\ntype IconProps = {\n\tformat: ArticleFormat;\n};\n\nconst captionStyle = css`\n\t${textSans14};\n\tline-height: 135%;\n\tpadding-top: 6px;\n\toverflow-wrap: break-word;\n\tcolor: ${palette('--caption-text')};\n`;\n\nconst bottomMarginStyles = css`\n\tmargin-bottom: 6px;\n`;\n\nconst overlaidBottomPadding = (format: ArticleFormat) => {\n\tif (\n\t\tformat.display === ArticleDisplay.Showcase &&\n\t\tformat.design === ArticleDesign.Review\n\t) {\n\t\treturn css`\n\t\t\tpadding-bottom: 2.5rem;\n\t\t`;\n\t}\n\treturn css`\n\t\tpadding-bottom: 0.375rem;\n\t`;\n};\n\nconst overlaidStyles = (format: ArticleFormat) => css`\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(18, 18, 18, 0.8);\n\n\tspan {\n\t\tcolor: ${palette('--caption-overlay-text')};\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\tsvg {\n\t\tfill: currentcolor;\n\t}\n\tcolor: ${palette('--caption-overlay-text')};\n\tfont-size: 0.75rem;\n\tline-height: 1rem;\n\tpadding-top: 0.375rem;\n\tpadding-right: 2.5rem;\n\tpadding-left: 0.75rem;\n\t${overlaidBottomPadding(format)};\n\n\tflex-grow: 1;\n\tmin-height: 2.25rem;\n`;\n\nconst limitedWidth = css`\n\t${from.leftCol} {\n\t\twidth: 140px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 220px;\n\t}\n`;\n\nconst veryLimitedWidth = css`\n\t${from.leftCol} {\n\t\twidth: 120px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 184px;\n\t}\n`;\n\nconst captionPadding = css`\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`;\n\nconst tabletCaptionPadding = css`\n\t${until.desktop} {\n\t\t${captionPadding}\n\t}\n`;\n\nconst bigLeftMargin = css`\n\twidth: inherit;\n\tmargin-left: ${space[9]}px;\n\t${until.wide} {\n\t\tmargin-left: 20px;\n\t\tmargin-right: 20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst hideIconBelowLeftCol = css`\n\t${until.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst pictureRatio = (13 / 18) * 100;\nconst videoRatio = (23 / 36) * 100;\n\nconst iconStyle = css`\n\tfill: ${palette('--caption-text')};\n\tmargin-right: ${space[1]}px;\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 1em;\n\tvertical-align: baseline;\n\t::before {\n\t\tcontent: ' ';\n\t\tdisplay: block;\n\t\tpadding-top: ${pictureRatio}%;\n\t}\n\tsvg {\n\t\ttop: 0px;\n\t\tright: 0px;\n\t\tbottom: 0px;\n\t\tleft: 0px;\n\t\twidth: 100%;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t}\n`;\n\nconst videoIconStyle = css`\n\twidth: 1.1em;\n\t::before {\n\t\tpadding-top: ${videoRatio}%;\n\t}\n`;\n\nconst captionLink = css`\n\ta {\n\t\tcolor: ${palette('--caption-link')};\n\t\ttext-decoration: none;\n\t}\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\n\nconst CameraIcon = ({ format }: IconProps) => {\n\treturn (\n\t\t<span\n\t\t\tcss={[\n\t\t\t\ticonStyle,\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\thideIconBelowLeftCol,\n\t\t\t]}\n\t\t>\n\t\t\t<CameraSvg />\n\t\t</span>\n\t);\n};\n\nconst VideoIcon = ({ format }: IconProps) => {\n\treturn (\n\t\t<span\n\t\t\tcss={[\n\t\t\t\ticonStyle,\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\thideIconBelowLeftCol,\n\t\t\t\tvideoIconStyle,\n\t\t\t]}\n\t\t>\n\t\t\t<VideoSvg />\n\t\t</span>\n\t);\n};\n\nexport const Caption = ({\n\tcaptionText,\n\tformat,\n\tpadCaption = false,\n\tcredit,\n\tdisplayCredit = true,\n\tshouldLimitWidth = false,\n\tisOverlaid,\n\tisLeftCol,\n\tmediaType = 'Gallery',\n\tisMainMedia = false,\n}: Props) => {\n\t// Sometimes captions come thorough as a single blank space, so we trim here to ignore those\n\tconst noCaption = !captionText?.trim();\n\tconst noCredit = !credit;\n\tconst hideCredit = !displayCredit;\n\tif (noCaption && (noCredit || hideCredit)) return null;\n\n\tconst isBlog =\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog;\n\n\tconst defaultCaption = (\n\t\t<figcaption\n\t\t\tcss={[\n\t\t\t\tcaptionStyle,\n\t\t\t\tshouldLimitWidth && limitedWidth,\n\t\t\t\tisOverlaid ? overlaidStyles(format) : bottomMarginStyles,\n\t\t\t\tisMainMedia &&\n\t\t\t\t\t(isBlog || mediaType === 'Video') &&\n\t\t\t\t\ttabletCaptionPadding,\n\t\t\t\tpadCaption && captionPadding,\n\t\t\t]}\n\t\t\tdata-spacefinder-role=\"inline\"\n\t\t>\n\t\t\t{mediaType === 'Video' ? (\n\t\t\t\t<VideoIcon format={format} />\n\t\t\t) : (\n\t\t\t\t<CameraIcon format={format} />\n\t\t\t)}\n\t\t\t{!!captionText && (\n\t\t\t\t<span\n\t\t\t\t\tcss={captionLink}\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: captionText || '',\n\t\t\t\t\t}}\n\t\t\t\t\tkey=\"caption\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{!!credit && displayCredit && ` ${credit}`}\n\t\t</figcaption>\n\t);\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\tif (format.theme === ArticleSpecial.Labs && isLeftCol) {\n\t\t\t\treturn defaultCaption;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<figcaption\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t${textSans12};\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Typography preset styles should not be overridden.\n\t\t\t\t\t\t\t * This has been done because the styles do not directly map to the new presets.\n\t\t\t\t\t\t\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tline-height: 1.15;\n\t\t\t\t\t\t\tcolor: ${isMainMedia\n\t\t\t\t\t\t\t\t? palette(\n\t\t\t\t\t\t\t\t\t\t'--caption-photo-essay-main-media-text',\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: palette('--caption-text')};\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\tli:not(:first-child) {\n\t\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tli {\n\t\t\t\t\t\t\t\tpadding-top: ${space[2]}px;\n\t\t\t\t\t\t\t\tborder-top: 1px solid\n\t\t\t\t\t\t\t\t\t${isMainMedia\n\t\t\t\t\t\t\t\t\t\t? palette(\n\t\t\t\t\t\t\t\t\t\t\t\t'--caption-photo-essay-main-media-text',\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: palette('--caption-text')};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t\tbottomMarginStyles,\n\t\t\t\t\t\tpadCaption && captionPadding,\n\t\t\t\t\t\tshouldLimitWidth && veryLimitedWidth,\n\t\t\t\t\t\tshouldLimitWidth && bigLeftMargin,\n\t\t\t\t\t]}\n\t\t\t\t\tdata-spacefinder-role=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t{!!captionText && (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={captionLink}\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: captionText || '',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey=\"caption\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!credit && displayCredit && ` ${credit}`}\n\t\t\t\t</figcaption>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn defaultCaption;\n\t}\n};\n","import { css } from '@emotion/react';\nimport { from, space, until } from '@guardian/source/foundations';\nimport { ArticleDesign, type ArticleFormat } from '../lib/articleFormat';\nimport type { FEElement, RoleType } from '../types/content';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n\tisMainMedia: boolean;\n\trole?: RoleType | 'richLink';\n\tid?: string;\n\tclassName?: string;\n\ttype?: FEElement['_type'];\n\tisTimeline?: boolean;\n};\n\nconst roleCss = {\n\tinline: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t`,\n\n\tsupporting: css`\n\t\tclear: left;\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\t${from.tablet} {\n\t\t\tposition: relative;\n\t\t\tfloat: left;\n\t\t\twidth: 300px;\n\t\t\tmargin-right: 20px;\n\t\t\tline-height: 0;\n\t\t\tmargin-top: ${space[2]}px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tmargin-left: -160px;\n\t\t}\n\t\t${from.wide} {\n\t\t\twidth: 380px;\n\t\t\tmargin-left: -240px;\n\t\t}\n\t`,\n\n\timmersive: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\t${until.tablet} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -20px;\n\t\t}\n\t\t${until.mobileLandscape} {\n\t\t\tmargin-left: -10px;\n\t\t\tmargin-right: -10px;\n\t\t}\n\t\t${from.tablet} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -100px;\n\t\t}\n\t\t${from.desktop} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -340px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tmargin-left: -160px;\n\t\t\tmargin-right: -320px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t\tmargin-right: -400px;\n\t\t}\n\t`,\n\n\tshowcase: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\tposition: relative;\n\t\t${from.leftCol} {\n\t\t\tmargin-left: -160px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t}\n\t`,\n\n\tthumbnail: css`\n\t\tmargin-top: ${space[2]}px;\n\t\tmargin-bottom: ${space[2]}px;\n\t\tfloat: left;\n\t\tclear: left;\n\t\twidth: 120px;\n\t\tmargin-right: 20px;\n\t\t${from.tablet} {\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tposition: relative;\n\t\t\tmargin-left: -160px;\n\t\t}\n\t`,\n\n\t// This is a special use case where we want RichLinks to appear wider when in the left col\n\trichLink: css`\n\t\tmargin-bottom: ${space[1]}px;\n\t\tfloat: left;\n\t\tclear: left;\n\t\twidth: 8.75rem;\n\t\tmargin-right: 20px;\n\n\t\t/*\n\t\t Acts as until.mobileMedium but accounts for font scaling. On small screens and/or\n\t\t at certain font sizes, the RichLink will change to a full width version\n\t\t*/\n\t\t@media (max-width: 23.4rem) {\n\t\t\twidth: 100%;\n\t\t\tbox-sizing: border-box;\n\n\t\t\timg,\n\t\t\t.avatar {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tposition: relative;\n\t\t\tmargin-left: -160px;\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t\twidth: 220px;\n\t\t}\n\t`,\n\n\thalfWidth: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\twidth: 50%;\n\t\tfloat: left;\n\t\tclear: left;\n\t\tmargin-right: 16px;\n\t`,\n};\n\n// Used for vast majority of layouts.\nexport const defaultRoleStyles = (\n\trole: RoleType | 'richLink',\n\tformat: ArticleFormat,\n\tisTimeline = false,\n) => {\n\tswitch (role) {\n\t\tcase 'inline':\n\t\t\treturn roleCss.inline;\n\t\tcase 'supporting':\n\t\t\treturn roleCss.supporting;\n\t\tcase 'immersive':\n\t\t\treturn roleCss.immersive;\n\t\tcase 'showcase':\n\t\t\tif (isTimeline) {\n\t\t\t\treturn css`\n\t\t\t\t\tmargin: 0 -10px;\n\t\t\t\t\t${from.tablet} {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t}\n\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\tmargin-left: -160px;\n\t\t\t\t\t}\n\t\t\t\t\t${from.wide} {\n\t\t\t\t\t\tmargin-left: -240px;\n\t\t\t\t\t}\n\t\t\t\t`;\n\t\t\t}\n\t\t\treturn roleCss.showcase;\n\t\tcase 'thumbnail':\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\t// In blogs we don't want to use negative left margins\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${roleCss.thumbnail}\n\t\t\t\t\t\t/* It's important we use the media query here to ensure we override the default values */\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn roleCss.thumbnail;\n\t\t\t}\n\t\tcase 'richLink':\n\t\t\treturn roleCss.richLink;\n\t\tcase 'halfWidth':\n\t\t\treturn roleCss.halfWidth;\n\t\tdefault:\n\t\t\treturn roleCss.inline;\n\t}\n};\n\nconst mainMediaFigureStyles = css`\n\theight: 100%;\n`;\n\nexport const Figure = ({\n\trole = 'inline',\n\tformat,\n\tchildren,\n\tid,\n\tisMainMedia,\n\tclassName = '',\n\ttype,\n\tisTimeline = false,\n}: Props) => {\n\tif (isMainMedia && !isTimeline) {\n\t\t// Don't add in-body styles for main media elements\n\t\t// TODO: If we want to support other element types having role position, such\n\t\t// as showcase twitter embeds, then we should remove the role positioning which\n\t\t// currently lives in ImageComponent and hoist it up to here, the same as we're\n\t\t// doing using decidePosition for in-body elements\n\t\treturn (\n\t\t\t<figure id={id} key={id} css={mainMediaFigureStyles}>\n\t\t\t\t{children}\n\t\t\t</figure>\n\t\t);\n\t}\n\n\treturn (\n\t\t<figure\n\t\t\tid={id}\n\t\t\tcss={defaultRoleStyles(role, format, isTimeline)}\n\t\t\tdata-spacefinder-role={role}\n\t\t\tdata-spacefinder-type={type}\n\t\t\tclassName={className}\n\t\t>\n\t\t\t{children}\n\t\t</figure>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { SerializedStyles } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport {\n\tarticle17,\n\tfrom,\n\tspace,\n\ttextSans17,\n} from '@guardian/source/foundations';\nimport libDebounce from 'lodash.debounce';\nimport { useRef, useState } from 'react';\nimport { interactiveLegacyFigureClasses } from '../layouts/lib/interactiveLegacyStyling';\nimport { type ArticleFormat, ArticleSpecial } from '../lib/articleFormat';\nimport { useOnce } from '../lib/useOnce';\nimport { palette as themePalette } from '../palette';\nimport type { RoleType } from '../types/content';\nimport { Caption } from './Caption';\nimport { defaultRoleStyles } from './Figure';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\turl?: string;\n\tscriptUrl?: string;\n\talt?: string;\n\trole?: RoleType;\n\tcaption?: string;\n\tformat: ArticleFormat;\n\telementId?: string;\n\tisMainMedia: boolean;\n};\n\n/*\nHISTORY\n\nA CAPI response for an interactive elements looks like:\n{\n\t\"type\": \"interactive\",\n\t\"assets\": [],\n\t\"interactiveTypeData\": {\n\t\t\"originalUrl\": \"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\",\n\t\t\"source\": \"Guardian\",\n\t\t\"alt\": \"china 1978 gdp\",\n\t\t\"scriptUrl\": \"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\",\n\t\t\"html\": \"<a href=\\\"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\\\">china 1978 gdp</a>\",\n\t\t\"scriptName\": \"iframe-wrapper\",\n\t\t\"iframeUrl\": \"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\",\n\t\t\"role\": \"supporting\",\n\t\t\"isMandatory\": false\n\t\t}\n}\n\nOn Frontend, the HTML that we send to the browser is:\n<figure class=\"element element-interactive interactive element--supporting\" data-interactive=\"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\" data-canonical-url=\"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\" data-alt=\"china 1978 gdp\">\n\t<a href=\"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\" data-link-name=\"in body link\" class=\"u-underline\">china 1978 gdp</a>\n</figure>\n\nhttps://github.com/guardian/frontend/blob/e38da96c59eaaef143b9f89b2318eab9dcf2fc5a/common/app/views/fragments/inlineJSNonBlocking.scala.html#L52\nWe use the curl AMD loader to load the boot script from the data-interactive attribute:\n\trequire([el.getAttribute('data-interactive')], function (interactive) {\n\t\tinteractive.boot(el, document, window.guardian.config);\n\t}\n\nPulling from Kibana, 99% of articles use the standard iframe-wrapper/1.0/boot.js\nA vast minority of pre interactive atom use a customised boot.js\nhttps://gist.github.com/gtrufitt/c8f08caef0ae810a42fde5a4c0549ad0\n\n\nTHE STANDARD BOOT.js\nboot.js is defined from https://github.com/guardian/interactive-boot-scripts/blob/master/iframe-wrapper/boot.js\nand is sent with all interactive elements in the scriptUrl from CAPI to do a two simple things:\n- Create an iframe using the href of the anchor and set the src\n- Add event listener to the window to listen for 'message' of the following types\n\t- set-height\n\t- navigate\n\t- scroll-to\n\t- get-location\n\t- get-position\n\t- monitor-position\n\nIt has not been updated since 2016.\n\nMIGRATION FROM FRONTEND\n- For the standard boot.js, we have re-written the behavior in modern JS to avoid the requirement of an AMD loader\nand to avoid loading the boot.js file.\n- For all other files that do not load the standard boot.js, we'll add a AMD loader to the page\n\nFor the remaining few we dynamically load and AMD loader and support the contract as defined with curl AMD loader\n\n*/\nconst decideHeight = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'supporting':\n\t\t\treturn 200;\n\t\tdefault:\n\t\t\treturn 500;\n\t}\n};\nconst getMinHeight = (role: RoleType, loaded: boolean) => {\n\tif (loaded) {\n\t\treturn `auto`;\n\t}\n\treturn `${decideHeight(role)}px`;\n};\nconst wrapperStyle = ({\n\tformat,\n\trole,\n\tloaded,\n\tisDatawrapperGraphic,\n}: {\n\tformat: ArticleFormat;\n\trole: RoleType;\n\tloaded: boolean;\n\tisDatawrapperGraphic: boolean;\n}) => css`\n\t${format.theme === ArticleSpecial.Labs ? textSans17 : article17}\n\tbackground-color: ${themePalette(\n\t\tisDatawrapperGraphic\n\t\t\t? '--interactive-block-background-datawrapper'\n\t\t\t: '--interactive-block-background',\n\t)};\n\tmin-height: ${getMinHeight(role, loaded)};\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\t${isDatawrapperGraphic\n\t\t? `\n\tborder-top: 1px solid ${themePalette('--branding-border')};\n\tpadding-top: ${space[2]}px;\n\t`\n\t\t: ''}\n`;\n\nconst datawrapperRoleStyles = (role: RoleType): SerializedStyles | null => {\n\tswitch (role) {\n\t\tcase 'inline':\n\t\t\treturn datawrapperRoleCss.inline;\n\t\tcase 'supporting':\n\t\t\treturn datawrapperRoleCss.supporting;\n\t\tcase 'immersive':\n\t\t\treturn datawrapperRoleCss.immersive;\n\t\tcase 'showcase':\n\t\t\treturn datawrapperRoleCss.showcase;\n\t\tcase 'thumbnail':\n\t\tcase 'halfWidth':\n\t\t\treturn null;\n\t}\n};\n\nconst datawrapperRoleCss = {\n\tinline: css`\n\t\tmargin-top: ${space[6]}px;\n\t\tmargin-bottom: ${space[6]}px;\n\t`,\n\n\tsupporting: css`\n\t\tclear: left;\n\t\tmargin-top: ${space[6]}px;\n\t\tmargin-bottom: ${space[6]}px;\n\n\t\t${from.leftCol} {\n\t\t\tmargin-bottom: ${space[2]}px;\n\t\t\tpadding-bottom: ${space[4]}px;\n\t\t\tborder-bottom: 1px solid ${themePalette('--branding-border')};\n\t\t}\n\t\t${from.wide} {\n\t\t\twidth: 380px;\n\t\t\tmargin-left: -240px;\n\t\t}\n\t`,\n\n\timmersive: css`\n\t\tmargin-top: ${space[6]}px;\n\t\tmargin-bottom: ${space[6]}px;\n\n\t\t${from.leftCol} {\n\t\t\tmargin-bottom: ${space[4]}px;\n\t\t\tpadding-bottom: ${space[4]}px;\n\t\t\tborder-bottom: 1px solid ${themePalette('--branding-border')};\n\t\t}\n\t`,\n\n\tshowcase: css`\n\t\tmargin-top: ${space[6]}px;\n\t\tmargin-bottom: ${space[6]}px;\n\n\t\t${from.leftCol} {\n\t\t\tmargin-bottom: ${space[4]}px;\n\t\t\tpadding-bottom: ${space[4]}px;\n\t\t\tborder-bottom: 1px solid ${themePalette('--branding-border')};\n\t\t}\n\t`,\n};\n\nconst placeholderLinkStyle = css`\n\tposition: absolute;\n\tbottom: ${space[1]}px;\n\tleft: ${space[1]}px;\n`;\n\nconst mainMediaFigureStyles = css`\n\theight: 100%;\n`;\n\n// https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\nconst setupWindowListeners = (iframe: HTMLIFrameElement) => {\n\t// Calls func on trailing edge of the wait period\n\n\tconst postMessage = (message: Record<string, unknown>) => {\n\t\tif (iframe.contentWindow) {\n\t\t\tiframe.contentWindow.postMessage(JSON.stringify(message), '*');\n\t\t}\n\t};\n\n\twindow.addEventListener(\n\t\t'message',\n\t\t(event) => {\n\t\t\tif (event.source !== iframe.contentWindow) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet message: Record<string, unknown> | undefined;\n\t\t\ttry {\n\t\t\t\tmessage = JSON.parse(event.data);\n\t\t\t} catch (e) {\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\te,\n\t\t\t\t\t'Json parse Failed on in interactiveBlockComponent',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (isUndefined(message)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postPositionMessage = (subscribe?: boolean) => {\n\t\t\t\tconst iframeBox = iframe.getBoundingClientRect();\n\t\t\t\tpostMessage({\n\t\t\t\t\tid: message?.id || '',\n\t\t\t\t\ttype: message?.type || '',\n\t\t\t\t\tsubscribe: !!subscribe,\n\t\t\t\t\tiframeTop: iframeBox.top,\n\t\t\t\t\tiframeRight: iframeBox.right,\n\t\t\t\t\tiframeBottom: iframeBox.bottom,\n\t\t\t\t\tiframeLeft: iframeBox.left,\n\t\t\t\t\tinnerHeight: window.innerHeight,\n\t\t\t\t\tinnerWidth: window.innerWidth,\n\t\t\t\t\tpageYOffset: window.pageYOffset,\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// Actions\n\t\t\tswitch (message.type) {\n\t\t\t\tcase 'set-height':\n\t\t\t\t\tif (typeof message.value === 'number') {\n\t\t\t\t\t\tiframe.height = message.value.toString();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'navigate':\n\t\t\t\t\tif (typeof message.value === 'string') {\n\t\t\t\t\t\tdocument.location.href = message.value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scroll-to':\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof message.x === 'number' &&\n\t\t\t\t\t\ttypeof message.y === 'number'\n\t\t\t\t\t) {\n\t\t\t\t\t\twindow.scrollTo(message.x, message.y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'get-location':\n\t\t\t\t\tpostMessage({\n\t\t\t\t\t\tid: message.id,\n\t\t\t\t\t\ttype: message.type,\n\t\t\t\t\t\thash: window.location.hash,\n\t\t\t\t\t\thost: window.location.host,\n\t\t\t\t\t\thostname: window.location.hostname,\n\t\t\t\t\t\thref: window.location.href,\n\t\t\t\t\t\torigin: window.location.origin,\n\t\t\t\t\t\tpathname: window.location.pathname,\n\t\t\t\t\t\tport: window.location.port,\n\t\t\t\t\t\tprotocol: window.location.protocol,\n\t\t\t\t\t\tsearch: window.location.search,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'get-position':\n\t\t\t\t\tpostPositionMessage();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'monitor-position':\n\t\t\t\t\t// Send initial position\n\t\t\t\t\tpostPositionMessage(true);\n\n\t\t\t\t\t// Send updated position on scroll or resize\n\t\t\t\t\twindow.addEventListener(\n\t\t\t\t\t\t'scroll',\n\t\t\t\t\t\tlibDebounce(() => {\n\t\t\t\t\t\t\tpostPositionMessage(true);\n\t\t\t\t\t\t}, 50),\n\t\t\t\t\t);\n\t\t\t\t\twindow.addEventListener(\n\t\t\t\t\t\t'resize',\n\t\t\t\t\t\tlibDebounce(() => {\n\t\t\t\t\t\t\tpostPositionMessage(true);\n\t\t\t\t\t\t}, 50),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tfalse,\n\t);\n};\n\nexport const InteractiveBlockComponent = ({\n\turl,\n\tscriptUrl,\n\talt,\n\trole = 'inline',\n\tcaption,\n\tformat,\n\telementId = '',\n\tisMainMedia,\n}: Props) => {\n\tconst wrapperRef = useRef<HTMLDivElement>(null);\n\tconst placeholderLinkRef = useRef<HTMLAnchorElement>(null);\n\tconst [loaded, setLoaded] = useState(false);\n\tuseOnce(() => {\n\t\t// We've brought the behavior from boot.js into this file to avoid loading 2 extra scripts\n\t\tif (\n\t\t\tscriptUrl ===\n\t\t\t\t'https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js' &&\n\t\t\turl &&\n\t\t\tplaceholderLinkRef.current\n\t\t) {\n\t\t\tconst iframe = document.createElement('iframe');\n\t\t\tiframe.style.width = '100%';\n\t\t\tiframe.style.border = 'none';\n\t\t\tiframe.height = decideHeight(role).toString();\n\t\t\tiframe.title = caption ?? alt ?? 'Interactive Content';\n\t\t\tif (url.startsWith('http:')) {\n\t\t\t\tiframe.src = url.replace('http:', 'https:');\n\t\t\t} else {\n\t\t\t\tiframe.src = url;\n\t\t\t}\n\n\t\t\tsetupWindowListeners(iframe);\n\n\t\t\twrapperRef.current?.prepend(iframe);\n\n\t\t\tsetLoaded(true);\n\t\t} else if (scriptUrl) {\n\t\t\t// We're going to use curl AMD loader to load the script that the\n\t\t\t// interactive has given us.\n\t\t\twindow.require(\n\t\t\t\t[scriptUrl],\n\t\t\t\t(interactive: {\n\t\t\t\t\tboot: (\n\t\t\t\t\t\tel: HTMLDivElement,\n\t\t\t\t\t\tdocument: Document,\n\t\t\t\t\t\tconfig: unknown,\n\t\t\t\t\t) => void;\n\t\t\t\t}) => {\n\t\t\t\t\tif (wrapperRef.current !== null) {\n\t\t\t\t\t\tinteractive.boot(\n\t\t\t\t\t\t\twrapperRef.current,\n\t\t\t\t\t\t\tdocument,\n\t\t\t\t\t\t\twindow.guardian.config,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tsetLoaded(true);\n\t\t}\n\t}, [loaded]);\n\n\tconst isDatawrapperGraphic =\n\t\turl == undefined\n\t\t\t? false\n\t\t\t: /^https?:\\/\\/interactive\\.guim\\.co\\.uk\\/datawrapper(-test)?\\/embed/.test(\n\t\t\t\t\turl,\n\t\t\t  );\n\n\treturn (\n\t\t<>\n\t\t\t<figure\n\t\t\t\tid={elementId} // boot scripts use id when inserting interactive content\n\t\t\t\tref={wrapperRef}\n\t\t\t\tcss={[\n\t\t\t\t\tisMainMedia\n\t\t\t\t\t\t? mainMediaFigureStyles\n\t\t\t\t\t\t: defaultRoleStyles(role, format),\n\t\t\t\t\tisDatawrapperGraphic ? datawrapperRoleStyles(role) : null,\n\t\t\t\t\twrapperStyle({\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\trole,\n\t\t\t\t\t\tloaded,\n\t\t\t\t\t\tisDatawrapperGraphic,\n\t\t\t\t\t}),\n\t\t\t\t]}\n\t\t\t\tclassName={interactiveLegacyFigureClasses(\n\t\t\t\t\t'model.dotcomrendering.pageElements.InteractiveBlockElement',\n\t\t\t\t\trole,\n\t\t\t\t)}\n\t\t\t\tdata-alt={alt} // for compatibility with custom boot scripts\n\t\t\t\tdata-testid={`interactive-element-${encodeURI(alt ?? '')}`}\n\t\t\t\tdata-spacefinder-role={role}\n\t\t\t>\n\t\t\t\t{!loaded && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Placeholder // removed by HydrateInteractiveOnce\n\t\t\t\t\t\t\theight={decideHeight(role)}\n\t\t\t\t\t\t\tshouldShimmer={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tref={placeholderLinkRef}\n\t\t\t\t\t\t\tdata-name=\"placeholder\" // removed by HydrateInteractiveOnce\n\t\t\t\t\t\t\tcss={placeholderLinkStyle}\n\t\t\t\t\t\t\thref={url}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{alt}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{!!caption && (\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</figure>\n\t\t</>\n\t);\n};\n","import { css, keyframes } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport { palette, space } from '@guardian/source/foundations';\n\nconst BACKGROUND_COLOUR = palette.neutral[93];\n\ntype Props = {\n\theight: number;\n\trootId?: string;\n\twidth?: number;\n\tspaceBelow?: 1 | 2 | 3 | 4 | 5 | 6 | 9;\n\tspaceLeft?: 1 | 2 | 3 | 4 | 5 | 6 | 9;\n\tshouldShimmer?: boolean;\n\tbackgroundColor?: string;\n};\n\nconst shimmer = keyframes`\n  0% {\n    background-position: -1500px 0;\n  }\n  100% {\n    background-position: 1500px 0;\n  }\n`;\n\nconst shimmerStyles = (backgroundColor: string) => css`\n\tanimation: ${shimmer} 2s infinite linear;\n\tbackground: linear-gradient(\n\t\tto right,\n\t\t${backgroundColor} 4%,\n\t\twhite 25%,\n\t\t${backgroundColor} 36%\n\t);\n\tbackground-size: 1500px 100%;\n`;\n\nexport const Placeholder = ({\n\theight,\n\trootId,\n\twidth,\n\tspaceBelow,\n\tspaceLeft,\n\tshouldShimmer = true,\n\tbackgroundColor = BACKGROUND_COLOUR,\n}: Props) => (\n\t<div\n\t\tid={rootId}\n\t\tcss={css`\n\t\t\tflex-grow: 1;\n\t\t`}\n\t\tdata-name=\"placeholder\"\n\t>\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tmin-height: ${height}px;\n\t\t\t\twidth: ${!isUndefined(width) ? `${width}px` : '100%'};\n\t\t\t\tmargin-bottom: ${spaceBelow && space[spaceBelow]}px;\n\t\t\t\tmargin-left: ${spaceLeft && space[spaceLeft]}px;\n\t\t\t\tbackground-color: ${backgroundColor};\n\n\t\t\t\t${shouldShimmer && shimmerStyles(backgroundColor)}\n\t\t\t`}\n\t\t/>\n\t</div>\n);\n","import { css } from '@emotion/react';\nimport { from, until } from '@guardian/source/foundations';\nimport { ArticleDesign } from '../../lib/articleFormat';\nimport { center } from '../../lib/center';\nimport type { RoleType } from '../../types/content';\n\nexport const isInteractive = (design: ArticleDesign): boolean =>\n\tdesign === ArticleDesign.Interactive;\n\nexport const interactiveLegacyFigureClasses = (\n\telementType: string,\n\trole?: RoleType,\n): string => {\n\tconst elementClasses: { [key: string]: string } = {\n\t\t'model.dotcomrendering.pageElements.InteractiveAtomBlockElement':\n\t\t\t'element-atom',\n\t\t'model.dotcomrendering.pageElements.InteractiveBlockElement':\n\t\t\t'element-interactive',\n\t};\n\n\tconst roleClass = role ? ` element-${role}` : '';\n\tconst elementClass = elementClasses[elementType] ?? '';\n\tconst legacyRoleClass = role ? ` element--${role}` : '';\n\treturn `element ${elementClass}${legacyRoleClass}${roleClass}`;\n};\n\n// Classes present in Frontend that we add for legacy interactives.\nexport const interactiveLegacyClasses = {\n\tcontentInteractive: 'content--interactive',\n\tcontentInteractiveGrid: 'content--interactive-grid',\n\tcontentLabels: 'content__labels',\n\tcontentLabelsNotImmersive: 'content__labels--not-immersive',\n\tcontentMainColumn: 'content__main-column--interactive',\n\theadline: 'content__headline',\n\tlabelLink: 'content__label__link',\n\tmetaContainer: 'content__meta-container_dcr',\n\tstandFirst: 'content__standfirst',\n\tbyline: 'byline',\n\tshareIcons: 'meta__social',\n\tshareAndCommentCounts: 'meta__comment',\n\n\t// some legacy interactives do not use the content--interactive container\n\t// to ensure all editorial content has correct font, we need to target this too\n\tinteractiveWrapper: 'interactive-wrapper',\n};\n\n// Styles expected by interactives from the Frontend days. These shouldn't be\n// used for new interactives though.\nexport const interactiveGlobalStyles = css`\n\t/* Scope this as tightly as possible. Otherwise, e.g. box-model will break\n\tfooter. */\n\tbody article {\n\t\t*:before,\n\t\t*:after {\n\t\t\tbox-sizing: content-box;\n\t\t}\n\n\t\t.fc-container__inner,\n\t\t.gs-container {\n\t\t\t${center}\n\t\t}\n\n\t\t/* There is room for better solution where we don't have to load global styles onto the body.\n\t\t\tFor now this works, but we shouldn't support for it for newly made interactives. */\n\t\t.${interactiveLegacyClasses.contentInteractive},\n\t\t\t.${interactiveLegacyClasses.interactiveWrapper} {\n\t\t\tmargin-bottom: 1rem;\n\n\t\t\t/* stylelint-disable */\n\t\t\tfont-family:\n\t\t\t\tGuardianTextEgyptian,\n\t\t\t\tGuardian Text Egyptian Web,\n\t\t\t\tGeorgia,\n\t\t\t\tserif;\n\t\t\t/* stylelint-enable */\n\n\t\t\tfont-size: 1.0625rem;\n\t\t\tline-height: 1.5;\n\t\t\tfont-weight: 400;\n\t\t}\n\n\t\tbutton,\n\t\tinput,\n\t\toptgroup,\n\t\tselect,\n\t\ttextarea {\n\t\t\tcolor: inherit;\n\t\t}\n\n\t\tbutton,\n\t\thtml input[type='button'],\n\t\tinput[type='reset'],\n\t\tinput[type='submit'] {\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t/* Start social icon support */\n\t\t.meta__social {\n\t\t\tpadding-top: 0.375rem;\n\t\t}\n\n\t\t.social__item {\n\t\t\tfloat: left;\n\t\t\tmin-width: 2rem;\n\t\t\tpadding: 0 0.1875rem 0.375rem 0;\n\t\t\tcursor: pointer;\n\n\t\t\t.inline-icon__fallback {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.inline-icon {\n\t\t\t\tbackground-color: transparent;\n\t\t\t\tborder: 1px solid #dcdcdc; /* stylelint-disable-line */\n\t\t\t\ttransition:\n\t\t\t\t\tfill 0.3s ease,\n\t\t\t\t\tbackground-color 0.3s ease;\n\t\t\t}\n\n\t\t\t.social-icon {\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\tborder: 0;\n\t\t\t\tmin-width: 2rem;\n\t\t\t\tmax-width: 100%;\n\t\t\t\twidth: auto;\n\t\t\t\theight: 2rem;\n\t\t\t\tsvg {\n\t\t\t\t\theight: 88%;\n\t\t\t\t\twidth: 88%;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.rounded-icon {\n\t\t\t\tborder-radius: 62.5rem;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tvertical-align: middle;\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t.centered-icon svg {\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tright: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tmargin: auto;\n\t\t\t\tposition: absolute;\n\t\t\t}\n\t\t}\n\n\t\t.content__dateline {\n\t\t\tfont-size: 0.75rem;\n\t\t\tline-height: 1rem;\n\t\t\tposition: relative;\n\t\t\tbox-sizing: border-box;\n\t\t\tpadding-top: 0.125rem;\n\t\t\tmargin-bottom: 0.375rem;\n\t\t}\n\t\t/* End social icon support */\n\n\t\t/* Typically required for ad display. */\n\t\t${until.tablet} {\n\t\t\t.hide-until-tablet {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\t.mobile-only {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\t.interactive-atom {\n\t\t\tposition: relative;\n\t\t}\n\n\t\tol,\n\t\tul {\n\t\t\tpadding: 0;\n\t\t\tmargin-left: 1.5625rem;\n\t\t}\n\t}\n`;\n","import { isString } from '@guardian/libs';\nimport type { FEDesign, FEDisplay, FEFormat, FETheme } from '../types/frontend';\n\nexport enum ArticleDesign {\n\tStandard,\n\tPicture,\n\tGallery,\n\tAudio,\n\tVideo,\n\tReview,\n\tAnalysis,\n\tExplainer,\n\tComment,\n\tLetter,\n\tFeature,\n\tLiveBlog,\n\tDeadBlog,\n\tRecipe,\n\tMatchReport,\n\tInterview,\n\tEditorial,\n\tQuiz,\n\tInteractive,\n\tPhotoEssay,\n\tObituary,\n\tCorrection,\n\tFullPageInteractive,\n\tNewsletterSignup,\n\tTimeline,\n\tProfile,\n}\n\nexport enum ArticleDisplay {\n\tStandard,\n\tImmersive,\n\tShowcase,\n\tNumberedList,\n}\n\nexport enum Pillar {\n\tNews = 0,\n\tOpinion = 1,\n\tSport = 2,\n\tCulture = 3,\n\tLifestyle = 4,\n}\n\nexport enum ArticleSpecial {\n\tSpecialReport = 5,\n\tLabs = 6,\n\tSpecialReportAlt = 7,\n}\n\nexport type ArticleTheme = Pillar | ArticleSpecial;\n\nexport interface ArticleFormat {\n\ttheme: ArticleTheme;\n\tdesign: ArticleDesign;\n\tdisplay: ArticleDisplay;\n}\n\n/**\n * NOTE: Immersive Opinion pieces are not supported,\n * i.e. when `CommentDesign` and `ImmersiveDisplay` are used jointly.\n */\nexport const decideDesign = ({ design }: Partial<FEFormat>): ArticleDesign => {\n\tswitch (design) {\n\t\tcase 'ArticleDesign':\n\t\t\treturn ArticleDesign.Standard;\n\t\tcase 'PictureDesign':\n\t\t\treturn ArticleDesign.Picture;\n\t\tcase 'GalleryDesign':\n\t\t\treturn ArticleDesign.Gallery;\n\t\tcase 'AudioDesign':\n\t\t\treturn ArticleDesign.Audio;\n\t\tcase 'VideoDesign':\n\t\t\treturn ArticleDesign.Video;\n\t\tcase 'ReviewDesign':\n\t\t\treturn ArticleDesign.Review;\n\t\tcase 'AnalysisDesign':\n\t\t\treturn ArticleDesign.Analysis;\n\t\tcase 'CommentDesign':\n\t\t\treturn ArticleDesign.Comment;\n\t\tcase 'LetterDesign':\n\t\t\treturn ArticleDesign.Letter;\n\t\tcase 'FeatureDesign':\n\t\t\treturn ArticleDesign.Feature;\n\t\tcase 'LiveBlogDesign':\n\t\t\treturn ArticleDesign.LiveBlog;\n\t\tcase 'DeadBlogDesign':\n\t\t\treturn ArticleDesign.DeadBlog;\n\t\tcase 'RecipeDesign':\n\t\t\treturn ArticleDesign.Recipe;\n\t\tcase 'MatchReportDesign':\n\t\t\treturn ArticleDesign.MatchReport;\n\t\tcase 'InterviewDesign':\n\t\t\treturn ArticleDesign.Interview;\n\t\tcase 'EditorialDesign':\n\t\t\treturn ArticleDesign.Editorial;\n\t\tcase 'QuizDesign':\n\t\t\treturn ArticleDesign.Quiz;\n\t\tcase 'InteractiveDesign':\n\t\t\treturn ArticleDesign.Interactive;\n\t\tcase 'PhotoEssayDesign':\n\t\t\treturn ArticleDesign.PhotoEssay;\n\t\tcase 'ObituaryDesign':\n\t\t\treturn ArticleDesign.Obituary;\n\t\tcase 'FullPageInteractiveDesign':\n\t\t\treturn ArticleDesign.FullPageInteractive;\n\t\tcase 'NewsletterSignupDesign':\n\t\t\treturn ArticleDesign.NewsletterSignup;\n\t\tcase 'ExplainerDesign':\n\t\t\treturn ArticleDesign.Explainer;\n\t\tcase 'TimelineDesign':\n\t\t\treturn ArticleDesign.Timeline;\n\t\tcase 'ProfileDesign':\n\t\t\treturn ArticleDesign.Profile;\n\t\tdefault:\n\t\t\treturn ArticleDesign.Standard;\n\t}\n};\n\nconst decideDisplay = ({\n\tdisplay,\n\tdesign,\n}: Partial<FEFormat>): ArticleDisplay => {\n\tswitch (display) {\n\t\tcase 'StandardDisplay':\n\t\t\treturn ArticleDisplay.Standard;\n\t\tcase 'ImmersiveDisplay':\n\t\t\t// Temporary hack until we can handle Immersive Comment pieces\n\t\t\treturn design === 'CommentDesign'\n\t\t\t\t? ArticleDisplay.Standard\n\t\t\t\t: ArticleDisplay.Immersive;\n\t\tcase 'ShowcaseDisplay':\n\t\t\treturn ArticleDisplay.Showcase;\n\t\tcase 'NumberedListDisplay':\n\t\t\treturn ArticleDisplay.NumberedList;\n\t\tdefault:\n\t\t\treturn ArticleDisplay.Standard;\n\t}\n};\n\nexport const decideTheme = ({ theme }: Partial<FEFormat>): ArticleTheme => {\n\tswitch (theme) {\n\t\tcase 'NewsPillar':\n\t\t\treturn Pillar.News;\n\t\tcase 'OpinionPillar':\n\t\t\treturn Pillar.Opinion;\n\t\tcase 'SportPillar':\n\t\t\treturn Pillar.Sport;\n\t\tcase 'CulturePillar':\n\t\t\treturn Pillar.Culture;\n\t\tcase 'LifestylePillar':\n\t\t\treturn Pillar.Lifestyle;\n\t\tcase 'SpecialReportTheme':\n\t\t\treturn ArticleSpecial.SpecialReport;\n\t\tcase 'SpecialReportAltTheme':\n\t\t\treturn ArticleSpecial.SpecialReportAlt;\n\t\tcase 'Labs':\n\t\t\treturn ArticleSpecial.Labs;\n\t\tdefault:\n\t\t\treturn Pillar.News;\n\t}\n};\n\nexport const decideFormat = (format: Partial<FEFormat>): ArticleFormat => ({\n\tdesign: decideDesign(format),\n\tdisplay: decideDisplay(format),\n\ttheme: decideTheme(format),\n});\n\nexport const getThemeNameAsString = (format: ArticleFormat): string => {\n\tconst themeName = Pillar[format.theme] ?? ArticleSpecial[format.theme];\n\tif (!themeName) throw new Error('Unknown theme');\n\treturn themeName;\n};\n\n/**\n * We need a type guard because TypeScript enums are (confusingly)\n * returning both strings and numbers.\n */\nconst isTheme = (theme: string | ArticleTheme): theme is ArticleTheme =>\n\t!isString(theme);\n\nconst isDesign = (design: string | ArticleDesign): design is ArticleDesign =>\n\t!isString(design);\n\nexport const getAllThemes = ({\n\tdisplay,\n\tdesign,\n}: {\n\tdisplay: ArticleDisplay;\n\tdesign: ArticleDesign;\n}): Array<ArticleFormat> =>\n\tObject.values({ ...Pillar, ...ArticleSpecial })\n\t\t.filter(isTheme)\n\t\t.map((theme) => ({\n\t\t\ttheme,\n\t\t\tdisplay,\n\t\t\tdesign,\n\t\t}));\n\nexport const getAllDesigns = ({\n\tdisplay,\n\ttheme,\n}: {\n\tdisplay: ArticleDisplay;\n\ttheme: ArticleTheme;\n}): Array<ArticleFormat> =>\n\tObject.values({ ...ArticleDesign })\n\t\t.filter(isDesign)\n\t\t.map((design) => ({\n\t\t\ttheme,\n\t\t\tdisplay,\n\t\t\tdesign,\n\t\t}));\n\nconst designToFEDesign = (design: ArticleDesign): FEDesign => {\n\tswitch (design) {\n\t\tcase ArticleDesign.Standard:\n\t\t// Correction doesn't exist in `FEFormat`.\n\t\tcase ArticleDesign.Correction:\n\t\t\treturn 'ArticleDesign';\n\t\tcase ArticleDesign.Picture:\n\t\t\treturn 'PictureDesign';\n\t\tcase ArticleDesign.Gallery:\n\t\t\treturn 'GalleryDesign';\n\t\tcase ArticleDesign.Audio:\n\t\t\treturn 'AudioDesign';\n\t\tcase ArticleDesign.Video:\n\t\t\treturn 'VideoDesign';\n\t\tcase ArticleDesign.Review:\n\t\t\treturn 'ReviewDesign';\n\t\tcase ArticleDesign.Analysis:\n\t\t\treturn 'AnalysisDesign';\n\t\tcase ArticleDesign.Explainer:\n\t\t\treturn 'ExplainerDesign';\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn 'CommentDesign';\n\t\tcase ArticleDesign.Letter:\n\t\t\treturn 'LetterDesign';\n\t\tcase ArticleDesign.Feature:\n\t\t\treturn 'FeatureDesign';\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\treturn 'LiveBlogDesign';\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn 'DeadBlogDesign';\n\t\tcase ArticleDesign.Recipe:\n\t\t\treturn 'RecipeDesign';\n\t\tcase ArticleDesign.MatchReport:\n\t\t\treturn 'MatchReportDesign';\n\t\tcase ArticleDesign.Interview:\n\t\t\treturn 'InterviewDesign';\n\t\tcase ArticleDesign.Editorial:\n\t\t\treturn 'EditorialDesign';\n\t\tcase ArticleDesign.Quiz:\n\t\t\treturn 'QuizDesign';\n\t\tcase ArticleDesign.Interactive:\n\t\t\treturn 'InteractiveDesign';\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\treturn 'PhotoEssayDesign';\n\t\tcase ArticleDesign.Obituary:\n\t\t\treturn 'ObituaryDesign';\n\t\tcase ArticleDesign.FullPageInteractive:\n\t\t\treturn 'FullPageInteractiveDesign';\n\t\tcase ArticleDesign.NewsletterSignup:\n\t\t\treturn 'NewsletterSignupDesign';\n\t\tcase ArticleDesign.Timeline:\n\t\t\treturn 'TimelineDesign';\n\t\tcase ArticleDesign.Profile:\n\t\t\treturn 'ProfileDesign';\n\t}\n};\n\nconst displayToFEDisplay = (display: ArticleDisplay): FEDisplay => {\n\tswitch (display) {\n\t\tcase ArticleDisplay.Standard:\n\t\t\treturn 'StandardDisplay';\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn 'ImmersiveDisplay';\n\t\tcase ArticleDisplay.Showcase:\n\t\t\treturn 'ShowcaseDisplay';\n\t\tcase ArticleDisplay.NumberedList:\n\t\t\treturn 'NumberedListDisplay';\n\t}\n};\n\nconst themeToFETheme = (theme: ArticleTheme): FETheme => {\n\tswitch (theme) {\n\t\tcase Pillar.News:\n\t\t\treturn 'NewsPillar';\n\t\tcase Pillar.Opinion:\n\t\t\treturn 'OpinionPillar';\n\t\tcase Pillar.Sport:\n\t\t\treturn 'SportPillar';\n\t\tcase Pillar.Culture:\n\t\t\treturn 'CulturePillar';\n\t\tcase Pillar.Lifestyle:\n\t\t\treturn 'LifestylePillar';\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn 'SpecialReportTheme';\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn 'Labs';\n\t\tcase ArticleSpecial.SpecialReportAlt:\n\t\t\treturn 'SpecialReportAltTheme';\n\t}\n};\n\nexport const formatToFEFormat = ({\n\tdesign,\n\tdisplay,\n\ttheme,\n}: ArticleFormat): FEFormat => ({\n\tdesign: designToFEDesign(design),\n\tdisplay: displayToFEDisplay(display),\n\ttheme: themeToFETheme(theme),\n});\n\n/**\n * Creates a string representation of {@linkcode ArticleFormat}. Useful for\n * logging, storybook UI etc.\n *\n * @param format An {@linkcode ArticleFormat}\n * @returns A string representation of `ArticleFormat`\n */\nexport const formatToString = ({\n\tdesign,\n\tdisplay,\n\ttheme,\n}: ArticleFormat): string =>\n\t[\n\t\t`${ArticleDesign[design]} Design`,\n\t\t`${ArticleDisplay[display]} Display`,\n\t\t`and ${Pillar[theme] ?? ArticleSpecial[theme]} Theme`,\n\t].join(', ');\n","import { css } from '@emotion/react';\nimport { from } from '@guardian/source/foundations';\n\nexport const center = css`\n\tposition: relative;\n\tmargin: auto;\n\n\t${from.tablet} {\n\t\tmax-width: 740px;\n\t}\n\n\t${from.desktop} {\n\t\tmax-width: 980px;\n\t}\n\n\t${from.leftCol} {\n\t\tmax-width: 1140px;\n\t}\n\n\t${from.wide} {\n\t\tmax-width: 1300px;\n\t}\n`;\n","import { isUndefined } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport type { NonEmptyArray } from './tuple';\n\n/**\n * Ensures that the given task is only run once and only after all items in waitFor are defined\n * @param {Function} task - The task to execute once\n * @param {Array} waitFor - An array of variables that must be defined before the task is executed\n * */\nexport const useOnce = (\n\ttask: () => void,\n\twaitFor: NonEmptyArray<unknown>,\n): void => {\n\tconst [alreadyRun, setAlreadyRun] = useState(false);\n\tconst isReady = waitFor.every((dep) => !isUndefined(dep));\n\tuseEffect(() => {\n\t\tif (!alreadyRun && isReady) {\n\t\t\ttask();\n\t\t\tsetAlreadyRun(true);\n\t\t}\n\t}, [alreadyRun, isReady, task]);\n};\n","import type { ColourName } from './paletteDeclarations';\n\n/**\n * Looks up a palette colour by name. Retrieves a CSS value for the specified\n * colour, for use in CSS declarations. See the examples for how this is\n * commonly used with our Emotion-based styles.\n *\n * @param a The name of a palette colour; for example `--headline-colour`.\n * @returns A CSS `var` function call; for example `var(--headline-colour)`.\n * @example\n * const styles = css`\n *   color: ${palette('--headline-colour')};\n *   background-color: ${palette('--headline-background-colour')};\n * `;\n */\nconst palette = (colour: ColourName): string => `var(${colour})`;\n\n// ----- Exports ----- //\n\nexport { palette };\n","const breakpoints = {\n  desktop: 980,\n  leftCol: 1140,\n  mobile: 320,\n  mobileLandscape: 480,\n  mobileMedium: 375,\n  phablet: 660,\n  tablet: 740,\n  wide: 1300\n};\n\nexport { breakpoints };\n","import { breakpoints } from '../__generated__/breakpoints.js';\n\nconst smidgen = 0.1;\nconst minWidth = (from2) => `@media (min-width: ${`${from2}px`})`;\nconst maxWidth = (until2) => `@media (max-width: ${`${until2 - smidgen}px`})`;\nconst minWidthMaxWidth = (from2, until2) => `@media (min-width: ${`${from2}px`}) and (max-width: ${`${until2 - smidgen}px`})`;\nconst from = {\n  mobile: minWidth(breakpoints.mobile),\n  mobileMedium: minWidth(breakpoints.mobileMedium),\n  mobileLandscape: minWidth(breakpoints.mobileLandscape),\n  phablet: minWidth(breakpoints.phablet),\n  tablet: minWidth(breakpoints.tablet),\n  desktop: minWidth(breakpoints.desktop),\n  leftCol: minWidth(breakpoints.leftCol),\n  wide: minWidth(breakpoints.wide)\n};\nconst until = {\n  mobile: maxWidth(breakpoints.mobile),\n  mobileMedium: maxWidth(breakpoints.mobileMedium),\n  mobileLandscape: maxWidth(breakpoints.mobileLandscape),\n  phablet: maxWidth(breakpoints.phablet),\n  tablet: maxWidth(breakpoints.tablet),\n  desktop: maxWidth(breakpoints.desktop),\n  leftCol: maxWidth(breakpoints.leftCol),\n  wide: maxWidth(breakpoints.wide)\n};\nconst between = {\n  mobile: {\n    and: {\n      mobileMedium: minWidthMaxWidth(\n        breakpoints.mobile,\n        breakpoints.mobileMedium\n      ),\n      mobileLandscape: minWidthMaxWidth(\n        breakpoints.mobile,\n        breakpoints.mobileLandscape\n      ),\n      phablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.phablet),\n      tablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.tablet),\n      desktop: minWidthMaxWidth(breakpoints.mobile, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.mobile, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide)\n    }\n  },\n  mobileMedium: {\n    and: {\n      mobileLandscape: minWidthMaxWidth(\n        breakpoints.mobileMedium,\n        breakpoints.mobileLandscape\n      ),\n      phablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.phablet),\n      tablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.tablet),\n      desktop: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide)\n    }\n  },\n  mobileLandscape: {\n    and: {\n      phablet: minWidthMaxWidth(\n        breakpoints.mobileLandscape,\n        breakpoints.phablet\n      ),\n      tablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.tablet),\n      desktop: minWidthMaxWidth(\n        breakpoints.mobileLandscape,\n        breakpoints.desktop\n      ),\n      leftCol: minWidthMaxWidth(\n        breakpoints.mobileLandscape,\n        breakpoints.leftCol\n      ),\n      wide: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.wide)\n    }\n  },\n  phablet: {\n    and: {\n      tablet: minWidthMaxWidth(breakpoints.phablet, breakpoints.tablet),\n      desktop: minWidthMaxWidth(breakpoints.phablet, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.phablet, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.phablet, breakpoints.wide)\n    }\n  },\n  tablet: {\n    and: {\n      desktop: minWidthMaxWidth(breakpoints.tablet, breakpoints.desktop),\n      leftCol: minWidthMaxWidth(breakpoints.tablet, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.tablet, breakpoints.wide)\n    }\n  },\n  desktop: {\n    and: {\n      leftCol: minWidthMaxWidth(breakpoints.desktop, breakpoints.leftCol),\n      wide: minWidthMaxWidth(breakpoints.desktop, breakpoints.wide)\n    }\n  },\n  leftCol: {\n    and: {\n      wide: minWidthMaxWidth(breakpoints.leftCol, breakpoints.wide)\n    }\n  }\n};\n\nexport { between, from, until };\n"],"names":["reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","g","Object","freeSelf","self","root","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","isObject","value","type","toNumber","isObjectLike","call","isSymbol","other","valueOf","replace","isBinary","test","slice","module","exports","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","cancel","clearTimeout","flush","_path","_extends","assign","bind","n","e","length","t","r","hasOwnProperty","props","width","height","viewBox","d","captionStyle","css","textSans14","palette","bottomMarginStyles","overlaidStyles","format","display","ArticleDisplay","Showcase","design","ArticleDesign","Review","overlaidBottomPadding","limitedWidth","from","leftCol","wide","veryLimitedWidth","captionPadding","tabletCaptionPadding","until","desktop","bigLeftMargin","space","mobileLandscape","hideIconBelowLeftCol","iconStyle","videoIconStyle","captionLink","CameraIcon","span","Immersive","CameraSvg","VideoIcon","VideoSvg","Caption","captionText","padCaption","credit","displayCredit","shouldLimitWidth","isOverlaid","isLeftCol","mediaType","isMainMedia","trim","isBlog","LiveBlog","DeadBlog","defaultCaption","figcaption","data-spacefinder-role","dangerouslySetInnerHTML","__html","PhotoEssay","theme","ArticleSpecial","Labs","textSans12","roleCss","inline","supporting","tablet","immersive","showcase","thumbnail","richLink","halfWidth","defaultRoleStyles","role","isTimeline","decideHeight","wrapperStyle","loaded","isDatawrapperGraphic","textSans17","article17","themePalette","getMinHeight","datawrapperRoleStyles","datawrapperRoleCss","placeholderLinkStyle","mainMediaFigureStyles","InteractiveBlockComponent","url","scriptUrl","alt","caption","elementId","wrapperRef","useRef","placeholderLinkRef","setLoaded","useState","useOnce","current","iframe","document","createElement","style","border","title","startsWith","src","postMessage","message","contentWindow","JSON","stringify","window","addEventListener","event","source","parse","data","guardian","modules","sentry","reportError","isUndefined","postPositionMessage","subscribe","iframeBox","getBoundingClientRect","id","iframeTop","top","iframeRight","right","iframeBottom","bottom","iframeLeft","left","innerHeight","innerWidth","pageYOffset","location","href","x","y","scrollTo","hash","host","hostname","origin","pathname","port","protocol","search","libDebounce","setupWindowListeners","prepend","require","interactive","boot","config","figure","ref","className","interactiveLegacyFigureClasses","data-alt","data-testid","encodeURI","Placeholder","shouldShimmer","a","data-name","BACKGROUND_COLOUR","neutral","shimmer","keyframes","shimmerStyles","backgroundColor","rootId","spaceBelow","spaceLeft","div","elementType","roleClass","elementClasses","elementClass","legacyRoleClass","interactiveLegacyClasses","contentInteractive","contentInteractiveGrid","contentLabels","contentLabelsNotImmersive","contentMainColumn","headline","labelLink","metaContainer","standFirst","byline","shareIcons","shareAndCommentCounts","interactiveWrapper","center","Pillar","decideDesign","decideDisplay","decideTheme","decideFormat","task","waitFor","alreadyRun","setAlreadyRun","isReady","every","dep","useEffect","colour","breakpoints","mobile","mobileMedium","phablet","minWidth","from2","maxWidth","until2","minWidthMaxWidth","between","and"],"sourceRoot":""}