"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[6929],{10597:(t,e,n)=>{n.r(e),n.d(e,{KnowledgeQuizAtom:()=>C,Question:()=>T,Result:()=>G});var r=n(50484),s=n(24017),i=n(9474),c=n(7351),o=n(77907),l=n(96378),u=n(27123),a=n(69913),d=n(90789),x=n(67400),f=n(16632),p=n(73443),h=n(40562);function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function b(){const t=m(["\n\tmargin-bottom: 12px;\n\tborder: 0px;\n\tpadding: 0px;\n\n\tlabel {\n\t\twidth: inherit;\n\t}\n"]);return b=function(){return t},t}function j(){const t=m(["\n\t\t\t\t","\n\t\t\t"]);return j=function(){return t},t}function w(){const t=m(["\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t"]);return w=function(){return t},t}function y(){const t=m(["\n\t\t\t\t\t\t\tpadding-right: 12px;\n\t\t\t\t\t\t"]);return y=function(){return t},t}function v(){const t=m(["\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t"]);return v=function(){return t},t}function O(){const t=m(["\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: row;\n\t\t\t\t\t\tmargin-bottom: 8px;\n\t\t\t\t\t\tbutton {\n\t\t\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return O=function(){return t},t}function k(){const t=m(["\n\tbackground-color: ",";\n\tmargin-top: ","px;\n\tmargin-bottom: ","px;\n\tpadding: ","px;\n"]);return k=function(){return t},t}function S(){const t=m(["\n\t","\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return S=function(){return t},t}function z(){const t=m(["\n\t","\n\tcolor: ",";\n"]);return z=function(){return t},t}function P(){const t=m(["\n\t","\n\tcolor: ",";\n\tpadding-bottom: ","px;\n"]);return P=function(){return t},t}const A=(0,s.css)(b()),C=t=>{let{id:e,questions:n,resultGroups:s,sharingUrls:i,theme:c}=t;const[o,l]=(0,x.useState)({}),u=Object.keys(o).length===n.length;return(0,r.jsxs)("form",{"data-atom-id":e,"data-atom-type":"knowledgequiz",children:[u&&(0,r.jsx)("div",{"data-testid":"quiz-results-block-top",children:(0,r.jsx)(G,{quizSelection:o,resultGroups:s,sharingUrls:i})}),(0,r.jsx)("ol",{"data-ignore":"global-ol-styling",children:n.map(((t,e)=>(0,r.jsx)(T,{id:t.id,number:e+1,text:t.text,imageUrl:t.imageUrl,imageAlt:t.imageAlt,answers:t.answers,setQuizSelection:l,theme:c},t.id)))}),u&&(0,r.jsx)("div",{"data-testid":"quiz-results-block-top",children:(0,r.jsx)(G,{quizSelection:o,resultGroups:s,sharingUrls:i})})]})},T=t=>{let{id:e,text:n,imageUrl:i,imageAlt:o,answers:l,number:a,setQuizSelection:d,theme:p}=t;const[h,m]=(0,x.useState)(),[b,k]=(0,x.useState)(!1);return(0,x.useEffect)((()=>{if(h&&b){const t=l.find((t=>t.id===h));t&&d((n=>{return r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){g(t,e,n[e])}))}return t}({},n),s=null!=(s={[e]:t})?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(s)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(s,t))})),r;var r,s}))}}),[h,d,b,l,e]),(0,r.jsx)("li",{css:(0,s.css)(j(),p===f.A$.Labs?c.NA0:c.Ni),children:(0,r.jsxs)("fieldset",{css:A,children:[(0,r.jsxs)("legend",{css:(0,s.css)(w()),children:[(0,r.jsx)("span",{css:(0,s.css)(y()),children:"".concat(a,".")}),n]}),!!i&&(0,r.jsx)("img",{css:(0,s.css)(v()),src:i,alt:null!=o?o:""}),(0,r.jsx)(q,{id:e,answers:l,hasSubmitted:b,selectedAnswerId:h,setSelectedAnswerId:m,theme:p}),(0,r.jsx)("div",{css:(0,s.css)(O()),children:(0,r.jsx)(u.$,{size:"small","data-testid":"submit-question-".concat(e),onClick:()=>{k(!0)},onKeyDown:t=>{var e;(null!==(e=32===t.keyCode)&&void 0!==e?e:13===t.keyCode)&&k(!0)},children:"Reveal"})})]})})},q=t=>{let{answers:e,id:n,hasSubmitted:s,selectedAnswerId:i,setSelectedAnswerId:c,theme:o}=t;return s?(0,r.jsx)(x.Fragment,{children:e.map((t=>{if(i===t.id){var e;if(t.isCorrect)return(0,r.jsx)(p.GL,{id:t.id,answerText:t.text,explainerText:null!==(e=t.revealText)&&void 0!==e?e:"",theme:o},t.id);if(!t.isCorrect)return(0,r.jsx)(p.eb,{id:t.id,answerText:t.text,theme:o},t.id)}var n;return t.isCorrect?(0,r.jsx)(p.$g,{id:t.id,answerText:t.text,explainerText:null!==(n=t.revealText)&&void 0!==n?n:"",theme:o},t.id):(0,r.jsx)(p.Lh,{id:t.id,answerText:t.text,theme:o},t.id)}))}):(0,r.jsx)("div",{css:(0,p.bP)(o),children:(0,r.jsx)(a.z,{name:n,children:e.map((t=>(0,r.jsx)(d.s,{value:t.text,"data-testid":t.id,"data-answer-type":i===t.id?"selected-enabled-answer":"unselected-enabled-answer",name:n,label:t.text,onChange:()=>c(t.id),checked:i===t.id},t.id)))})})},U=(0,s.css)(k(),o.M.neutral[93],l.x[3],l.x[3],l.x[2]),D=(0,s.css)(S(),c.NA0),I=(0,s.css)(z(),c.LDt,o.M.brand[400]),_=(0,s.css)(P(),c.keT,o.M.neutral[20],l.x[1]),G=t=>{let{quizSelection:e,resultGroups:n,sharingUrls:s}=t;const c=Object.keys(e).length,o=Object.keys(e).filter((t=>{var n;return null===(n=e[t])||void 0===n?void 0:n.isCorrect})).length,l=n.length;let u;const a=[];let d=0;if(n.sort((function(t,e){return t.minScore-e.minScore})),c===l)for(const t of n)o===t.minScore&&(u=t);else{for(let t=0;t<n.length;t++){const e=n[t];e&&(a[t]=e.minScore)}a.sort((function(t,e){return t-e}));for(let t=0;t<a.length;t++){const e=a[t];(0,i.b)(e)||o>=e&&(d=t)}}return u=n[d],(0,r.jsxs)("div",{css:U,children:[(0,r.jsxs)("div",{css:D,children:[(0,r.jsx)("span",{children:"You got..."}),(0,r.jsx)("span",{css:I,children:"".concat(o,"/").concat(c)}),u&&(0,r.jsx)("span",{children:u.title})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{css:_,children:"Challenge your friends"}),(0,r.jsx)(h.N,{sharingUrls:s,displayIcons:["facebook","twitter","email","whatsApp","messenger","linkedIn","pinterest"]})]})}}}]);
//# sourceMappingURL=KnowledgeQuizAtom-importable.client.web.644ad426fc83ccf77ca4.js.map