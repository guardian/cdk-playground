(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[1564],{44165:(t,e,n)=>{var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,g=Math.min,p=function(){return u.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==d.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=o.test(t);return n||a.test(t)?s(t.slice(2),n?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var i,r,o,a,s,l,c=0,u=!1,d=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=i,o=r;return i=r=void 0,c=e,a=t.apply(o,n)}function v(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-c>=o}function k(){var t=p();if(v(t))return w(t);s=setTimeout(k,function(t){var n=e-(t-l);return d?g(n,o-(t-c)):n}(t))}function w(t){return s=void 0,b&&i?h(t):(i=r=void 0,a)}function j(){var t=p(),n=v(t);if(i=arguments,r=this,l=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(k,e),u?h(t):a}(l);if(d)return s=setTimeout(k,e),h(l)}return void 0===s&&(s=setTimeout(k,e)),a}return e=x(e)||0,m(n)&&(u=!!n.leading,o=(d="maxWait"in n)?f(x(n.maxWait)||0,e):o,b="trailing"in n?!!n.trailing:b),j.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=r=s=void 0},j.flush=function(){return void 0===s?a:w(p())},j}},61350:(t,e,n)=>{"use strict";n.d(e,{L:()=>u,j:()=>d});var i=n(50484),r=n(24017),o=n(96378),a=n(7351),s=n(3959);function l(){const t=(e=["\n\tposition: absolute;\n\ttop: ","px;\n\tright: ","px;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\twidth: fit-content;\n\tpadding: ","px ","px;\n\tborder-radius: ","px;\n\tcolor: white;\n\t",";\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return l=function(){return t},t}const c=(0,r.css)(l(),o.x[2],o.x[2],o.x[1],o.x[3],o.x[3],a.rDY);function u(t){if(void 0===t||0===t)return"";const e=Number(t),n=Math.floor(e/3600),i=Math.floor(e%3600/60),r=Math.floor(e%3600%60),o=[];return n>0&&o.push(n),0===n&&i>0&&0===r?o.push("".concat(i,":00")):n>0&&i<10?o.push("0".concat(i)):o.push(i),r>0&&(r<10?o.push("0".concat(r)):o.push(r)),o.join(":")}const d=t=>{let{mediaDuration:e,imagePositionOnDesktop:n,imagePositionOnMobile:r}=t;return"left"===n?null:"left"===r?(0,i.jsx)(s.L,{until:"tablet",children:(0,i.jsx)("div",{css:c,children:(0,i.jsx)("p",{children:u(e)})})}):(0,i.jsx)("div",{css:c,children:(0,i.jsx)("p",{children:u(e)})})}},60801:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ScrollableFeature:()=>$});var i=n(50484),r=n(16632),o=n(24017),a=n(96378),s=n(95571),l=n(82871),c=n(2634),u=n(53694),d=n(22789),f=n(78255),g=n(82086),p=n(45895),m=n(92209),x=n(98030),b=n(52150),h=n(92172),v=n(78410),k=n(39395),w=n(61350),j=n(86503),y=n(86344);function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function P(){const t=O(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\twidth: 100%;\n\t/* We absolutely position the faux link\n\t\tso this is required here */\n\tposition: relative;\n\n\t/* Target Safari 10.1 */\n\t/* https://www.browserstack.com/guide/create-browser-specific-css */\n\t@media not all and (min-resolution: 0.001dpcm) {\n\t\t@supports (-webkit-appearance: none) and\n\t\t\t(not (stroke-color: transparent)) {\n\t\t\tdisplay: grid;\n\t\t\tgrid-auto-rows: min-content;\n\t\t\talign-content: start;\n\t\t}\n\t}\n\n\t/* a tag specific styles */\n\tcolor: inherit;\n\ttext-decoration: none;\n"]);return P=function(){return t},t}function M(){const t=O(["\n\t:hover .image-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tleft: 0;\n\t\tbackground-color: ",";\n\t}\n\n\t/* Only underline the headline element we want to target (not kickers/sublink headlines) */\n\t:hover .card-headline .show-underline {\n\t\ttext-decoration: underline;\n\t}\n"]);return M=function(){return t},t}function C(){const t=O(["\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-start;\n\tflex-grow: 1;\n\tgap: ","px;\n\tpadding: 64px ","px ","px;\n\tmask-image: linear-gradient(\n\t\t180deg,\n\t\ttransparent 0px,\n\t\trgba(0, 0, 0, 0.0381) 8px,\n\t\trgba(0, 0, 0, 0.1464) 16px,\n\t\trgba(0, 0, 0, 0.3087) 24px,\n\t\trgba(0, 0, 0, 0.5) 32px,\n\t\trgba(0, 0, 0, 0.6913) 40px,\n\t\trgba(0, 0, 0, 0.8536) 48px,\n\t\trgba(0, 0, 0, 0.9619) 56px,\n\t\trgb(0, 0, 0) 64px\n\t);\n\tbackdrop-filter: blur(12px) brightness(0.5);\n"]);return C=function(){return t},t}function S(){const t=O(["\n\tbackground-color: ",";\n\tcolor: ",";\n\tmargin-top: ","px;\n\tdisplay: inline-block;\n\twidth: fit-content;\n"]);return S=function(){return t},t}function L(){const t=O(["\n\tmargin-top: ","px;\n"]);return L=function(){return t},t}function D(){const t=O(["\n\t\t\t\t/* See: https://css-tricks.com/nested-links/ */\n\t\t\t\tz-index: ",";\n\t\t\t\t/* The following styles turn off those provided by Link */\n\t\t\t\tcolor: inherit;\n\t\t\t\t/* stylelint-disable-next-line property-disallowed-list */\n\t\t\t\tfont-family: inherit;\n\t\t\t\tfont-size: inherit;\n\t\t\t\tline-height: inherit;\n\t\t\t\ttext-decoration: none;\n\t\t\t\tmin-height: 10px;\n\t\t\t"]);return D=function(){return t},t}function I(){const t=O(["\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\tflex-basis: 100%;\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\tgap: ","px;\n\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t"]);return I=function(){return t},t}function z(){const t=O(["\n\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\t\t\timg {\n\t\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t"]);return z=function(){return t},t}const B=(0,o.css)(P()),U=(0,o.css)(M(),(0,u.M)("--card-background-hover")),E=(0,o.css)(C(),a.x[1],a.x[2],a.x[2]),N=(0,o.css)(S(),(0,u.M)("--star-rating-background"),(0,u.M)("--star-rating-fill"),a.x[1]),A=(0,o.css)(L(),a.x[3]),R=t=>{let{showClock:e,absoluteServerTimes:n,webPublicationDate:r}=t;if(!r)return;const o=(t=>Math.abs((new Date).getTime()-new Date(t).getTime())/36e5<=12)(r);return(0,i.jsx)(d.K,{webPublication:{date:r,isWithinTwelveHours:o},showClock:e,absoluteServerTimes:n,isTagPage:!1,colour:(0,u.M)("--feature-card-footer-text")})},_=t=>{let{discussionId:e,linkTo:n,discussionApiUrl:r}=t;return e&&r?(0,i.jsx)(s.N,{[c.z6]:e,"data-ignore":"global-link-styling","data-link-name":"Comment count",href:"".concat(n,"#comments"),cssOverrides:(0,o.css)(D(),(0,l.f)("card-nested-link")),children:(0,i.jsx)(k.u,{priority:"feature",defer:{until:"visible"},children:(0,i.jsx)(m.CardCommentCount,{discussionApiUrl:r,discussionId:e,colour:(0,u.M)("--feature-card-footer-text")})})}):null},F=t=>{let{linkTo:e,format:n,headlineText:s,headlineSizes:l,byline:c,showByline:d,webPublicationDate:m,image:k,imagePositionOnDesktop:O="top",imagePositionOnMobile:P="left",imageSize:M="small",trailText:C,imageLoading:S,showClock:L,mainMedia:D,canPlayInline:F,kickerText:W,showPulsingDot:$,dataLinkName:K,supportingContent:Q,containerPalette:V,discussionApiUrl:q,discussionId:G,isExternalLink:H,absoluteServerTimes:X,aspectRatio:Y,starRating:J,showQuotes:Z}=t;const tt=Q&&Q.length>0,et="Video"===(null==D?void 0:D.type),nt=(t=>{let{imageUrl:e,imageAltText:n,mainMedia:i,canPlayInline:r}=t;return i&&"Video"===i.type&&r?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){T(t,e,n[e])}))}return t}({type:"video",mainMedia:i},e&&{imageUrl:e}):e?{type:"picture",imageUrl:e,imageAltText:n}:void 0})({imageUrl:null==k?void 0:k.src,imageAltText:null==k?void 0:k.altText,mainMedia:D,canPlayInline:F});return(0,i.jsx)(v.I,{format:n,children:(0,i.jsx)(h.X,{containerPalette:V,children:(0,i.jsxs)("div",{css:[B,U],children:[(0,i.jsx)(g.h,{linkTo:e,headlineText:s,dataLinkName:K,isExternalLink:H}),(0,i.jsx)("div",{css:[(0,o.css)(I(),a.x[2])],children:nt&&(0,i.jsxs)("div",{css:(0,o.css)(z(),(0,u.M)("--feature-card-background")),children:["video"===nt.type&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:(0,i.jsx)(b.B,{mainImage:nt.imageUrl?nt.imageUrl:nt.mainMedia.images.reduce(((t,e)=>t.width>e.width?t:e)).url,imageSize:M,alt:s,loading:S,roundedCorners:!1,aspectRatio:Y})})}),"picture"===nt.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.B,{mainImage:nt.imageUrl,imageSize:M,alt:nt.imageAltText,loading:S,roundedCorners:!1,aspectRatio:Y}),et&&D.duration>0&&(0,i.jsx)(w.j,{mediaDuration:D.duration,imagePositionOnDesktop:O,imagePositionOnMobile:P})]}),(0,i.jsx)("div",{className:"image-overlay"}),(0,i.jsxs)("div",{css:E,children:[(0,i.jsx)("div",{children:(0,i.jsx)(x.Ly,{headlineText:s,format:n,fontSizes:l,showQuotes:Z,kickerText:n.design!==r.vw.LiveBlog||W?W:"Live",showPulsingDot:n.design===r.vw.LiveBlog||$,byline:c,showByline:d,isExternalLink:H,headlineColour:(0,u.M)("--feature-card-headline"),kickerColour:(0,u.M)("--feature-card-kicker-text"),isBetaContainer:!0})}),void 0!==J?(0,i.jsx)("div",{css:N,children:(0,i.jsx)(j.G,{rating:J,size:"small"})}):null,!!C&&(0,i.jsx)("div",{css:A,children:(0,i.jsx)(p.K,{trailText:C,trailTextColour:(0,u.M)("--feature-card-trail-text"),trailTextSize:"regular",padBottom:!1})}),(0,i.jsx)(f.w,{format:n,age:(0,i.jsx)(R,{webPublicationDate:m,showClock:!!L,absoluteServerTimes:X}),commentCount:(0,i.jsx)(_,{linkTo:e,discussionId:G,discussionApiUrl:q}),showLivePlayable:!1})]})]})}),tt&&(0,i.jsx)(y.D,{supportingContent:Q,containerPalette:V,alignment:"vertical",fillBackgroundOnDesktop:!0,fillBackgroundOnMobile:!0})]})})})};var W=n(71123);const $=t=>{let{trails:e,containerPalette:n,absoluteServerTimes:o,imageLoading:a,aspectRatio:s}=t;return(0,i.jsx)(W.g,{carouselLength:e.length,visibleCardsOnMobile:1,visibleCardsOnTablet:3,children:e.map((t=>(0,i.jsx)(W.g.Item,{children:(0,i.jsx)(F,{linkTo:t.url,format:t.format,headlineText:t.headline,byline:t.byline,showByline:t.showByline,webPublicationDate:t.webPublicationDate,kickerText:t.kickerText,showPulsingDot:t.format.design===r.vw.LiveBlog,showClock:!1,image:t.image,canPlayInline:!0,starRating:t.starRating,dataLinkName:t.dataLinkName,discussionApiUrl:t.discussionApiUrl,discussionId:t.discussionId,mainMedia:t.mainMedia,isExternalLink:t.isExternalLink,containerPalette:n,absoluteServerTimes:o,imageLoading:a,aspectRatio:s,imageSize:"feature",headlineSizes:{desktop:"xsmall",tablet:"xxsmall",mobile:"xsmall"}})},t.url)))})}},58452:(t,e,n)=>{"use strict";n.d(e,{E:()=>a});var i=n(44165),r=n.n(i),o=n(67400);const a=t=>{const[e,n]=(0,o.useState)(!1);var i;const[a,s]=(0,o.useState)(null!==(i=t.node)&&void 0!==i?i:null),l=(0,o.useRef)(null),c=(0,o.useCallback)((e=>{let[i]=e;i&&(i.isIntersecting?n(!0):t.repeat&&n(!1))}),[t.repeat]),u=t.debounce?r()(c,200):c;return(0,o.useEffect)((()=>{t.node&&s(t.node)}),[t.node]),(0,o.useEffect)((()=>{if(a&&"IntersectionObserver"in window)return l.current=new window.IntersectionObserver(u,t),l.current.observe(a),()=>{var t;return null===(t=l.current)||void 0===t?void 0:t.disconnect()}}),[a,t,u]),(0,o.useEffect)((()=>{var n;!t.repeat&&e&&(null===(n=l.current)||void 0===n||n.disconnect())}),[e,t.repeat]),[e,s]}}}]);
//# sourceMappingURL=ScrollableFeature-importable.client.web.b9ad4f00592904fd2d3d.js.map