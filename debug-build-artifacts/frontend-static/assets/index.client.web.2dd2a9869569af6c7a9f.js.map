{"version":3,"file":"index.client.web.2dd2a9869569af6c7a9f.js","mappings":"UAAIA,ECCAC,EADAC,ECAAC,EACAC,E,kBCDJ,IAAIC,EAAM,CACT,6BAA8B,CAC7B,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,GACA,IACA,MAED,0BAA2B,CAC1B,MACA,IACA,MAED,yBAA0B,CACzB,MACA,KACA,MAED,8BAA+B,CAC9B,MACA,KAED,wBAAyB,CACxB,MACA,KACA,KACA,KACA,MAED,0BAA2B,CAC1B,MACA,KACA,MAED,iCAAkC,CACjC,MACA,KACA,KACA,MAED,sCAAuC,CACtC,MACA,KACA,MAED,gCAAiC,CAChC,MACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,gCAAiC,CAChC,KACA,KAED,kCAAmC,CAClC,MACA,MAED,2CAA4C,CAC3C,MACA,KACA,KACA,KACA,MAED,wBAAyB,CACxB,MACA,MAED,8BAA+B,CAC9B,MACA,IACA,KACA,MAED,qCAAsC,CACrC,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,0CAA2C,CAC1C,MACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,gCAAiC,CAChC,MACA,IACA,KACA,MAED,wBAAyB,CACxB,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,sCAAuC,CACtC,MACA,KACA,KACA,KACA,KACA,MAED,yBAA0B,CACzB,MACA,MAED,4BAA6B,CAC5B,MACA,IACA,MAED,8BAA+B,CAC9B,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,8BAA+B,CAC9B,MACA,IACA,KACA,KACA,KACA,MAED,6BAA8B,CAC7B,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,sCAAuC,CACtC,MACA,KACA,MAED,wBAAyB,CACxB,MACA,KACA,MAED,qCAAsC,CACrC,MACA,IACA,KACA,MAED,mCAAoC,CACnC,MACA,KACA,MAED,iCAAkC,CACjC,MACA,MAED,8CAA+C,CAC9C,MACA,IACA,KACA,MAED,gCAAiC,CAChC,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,qCAAsC,CACrC,MACA,MAED,2BAA4B,CAC3B,KACA,MAED,6BAA8B,CAC7B,MACA,KACA,IACA,MAED,2BAA4B,CAC3B,MACA,MAED,wCAAyC,CACxC,MACA,MAED,2BAA4B,CAC3B,MACA,IACA,KACA,KACA,GACA,MAED,oCAAqC,CACpC,MACA,IACA,MAED,2BAA4B,CAC3B,MACA,IACA,KACA,KACA,KACA,IACA,MAED,6BAA8B,CAC7B,MACA,IACA,MAED,4BAA6B,CAC5B,MACA,IACA,MAED,gCAAiC,CAChC,MACA,KACA,MAED,uCAAwC,CACvC,MACA,KACA,MAED,wCAAyC,CACxC,MACA,KACA,MAED,yCAA0C,CACzC,MACA,MAED,iDAAkD,CACjD,MACA,MAED,iCAAkC,CACjC,MACA,KACA,KACA,KACA,MAED,iCAAkC,CACjC,MACA,KACA,KACA,KACA,KACA,KACA,MAED,2BAA4B,CAC3B,MACA,IACA,KACA,KACA,MAED,4BAA6B,CAC5B,MACA,MAED,8BAA+B,CAC9B,KACA,KACA,KACA,MAED,4BAA6B,CAC5B,MACA,IACA,KACA,MAED,qCAAsC,CACrC,MACA,KACA,MAED,wBAAyB,CACxB,MACA,IACA,KACA,MAED,oCAAqC,CACpC,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,GACA,KACA,MAED,sCAAuC,CACtC,MACA,KACA,MAED,uBAAwB,CACvB,MACA,IACA,MAED,gCAAiC,CAChC,MACA,KACA,KACA,MAED,oCAAqC,CACpC,MACA,IACA,KACA,KACA,MAED,qCAAsC,CACrC,MACA,IACA,KACA,KACA,KACA,KACA,KAED,4BAA6B,CAC5B,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,GACA,KACA,MAED,mCAAoC,CACnC,KACA,KACA,KACA,KACA,KACA,KACA,KAED,mCAAoC,CACnC,OAED,2BAA4B,CAC3B,MACA,KACA,MAED,kCAAmC,CAClC,KACA,KACA,MAED,0BAA2B,CAC1B,MACA,MAED,yBAA0B,CACzB,KACA,KACA,MAED,gCAAiC,CAChC,MACA,MAED,4BAA6B,CAC5B,MACA,MAED,iCAAkC,CACjC,MACA,IACA,KACA,KACA,KAED,iCAAkC,CACjC,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,oCAAqC,CACpC,MACA,KACA,KACA,KACA,KACA,KACA,MAED,gCAAiC,CAChC,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,+BAAgC,CAC/B,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAED,4BAA6B,CAC5B,MACA,KACA,KACA,KACA,MAED,mCAAoC,CACnC,MACA,KACA,MAED,0BAA2B,CAC1B,MACA,IACA,MAED,8BAA+B,CAC9B,MACA,IACA,MAED,2BAA4B,CAC3B,MACA,KACA,KAED,kCAAmC,CAClC,MACA,MAED,wBAAyB,CACxB,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MAED,kCAAmC,CAClC,MACA,IACA,MAED,iCAAkC,CACjC,MACA,KACA,KACA,MAED,2BAA4B,CAC3B,MACA,IACA,KACA,KACA,KACA,KACA,MAED,qCAAsC,CACrC,MACA,KACA,MAED,kCAAmC,CAClC,MACA,IACA,KACA,KACA,KACA,MAED,wCAAyC,CACxC,MACA,KACA,KACA,MAED,sBAAuB,CACtB,MACA,MAED,+BAAgC,CAC/B,MACA,MAED,4BAA6B,CAC5B,MACA,KACA,MAED,0BAA2B,CAC1B,MACA,IACA,KACA,KACA,KACA,KACA,MAED,sBAAuB,CACtB,MACA,IACA,KACA,KACA,KACA,MAED,6BAA8B,CAC7B,MACA,KACA,MAED,mCAAoC,CACnC,MACA,MAED,yCAA0C,CA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uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,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","sources":["webpack://@guardian/dotcom-rendering/webpack/runtime/chunk loaded","webpack://@guardian/dotcom-rendering/webpack/runtime/create fake namespace object","webpack://@guardian/dotcom-rendering/webpack/runtime/load script","webpack://@guardian/dotcom-rendering/./src/components/ lazy ^\\.\\/.*\\.importable$ include: \\.importable\\.tsx$ chunkName: [request] namespace object","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/hoist-non-react-statics@3.3.2/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack://@guardian/dotcom-rendering/./src/client/adaptiveSite.ts","webpack://@guardian/dotcom-rendering/./src/client/bootCmp.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/dynamic-import-polyfill@0.1.1/node_modules/dynamic-import-polyfill/dist/dynamic-import-polyfill.mjs","webpack://@guardian/dotcom-rendering/./src/client/dynamicImport.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/doHydration.tsx","webpack://@guardian/dotcom-rendering/./src/client/islands/emotion.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/getConfig.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/getName.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/getProps.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/initHydration.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/getPriority.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/whenIdle.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/whenVisible.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/onInteraction.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/onNavigation.ts","webpack://@guardian/dotcom-rendering/./src/client/islands/islands.ts","webpack://@guardian/dotcom-rendering/./src/client/startup.ts","webpack://@guardian/dotcom-rendering/./src/client/main.web.ts","webpack://@guardian/dotcom-rendering/./src/client/ophan/ophan.ts","webpack://@guardian/dotcom-rendering/./src/client/ophan/recordInitialPageEvents.ts","webpack://@guardian/dotcom-rendering/./src/client/poorPerformanceMonitoring.ts","webpack://@guardian/dotcom-rendering/./src/client/sentryLoader/loadSentry.ts","webpack://@guardian/dotcom-rendering/./src/client/sentryLoader/sentryLoader.ts","webpack://@guardian/dotcom-rendering/./src/client/userFeatures/user-features-lib.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/isBoolean/isBoolean.js","webpack://@guardian/dotcom-rendering/./src/client/userFeatures/user-features.ts","webpack://@guardian/dotcom-rendering/./src/client/webpackPublicPath.ts","webpack://@guardian/dotcom-rendering/./src/client/decidePublicPath.ts","webpack://@guardian/dotcom-rendering/./src/components/ConfigContext.tsx","webpack://@guardian/dotcom-rendering/./src/components/PrivacySettingsLink.importable.tsx","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/locale/getLocale.js","webpack://@guardian/dotcom-rendering/./src/lib/getCountryCode.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/setSessionCookie.js","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/authState.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/autoRenew.ts","webpack://@guardian/dotcom-rendering/../../../../../../libs/@guardian/identity-auth/src/@types/guard.ts","webpack://@guardian/dotcom-rendering/../../../../../../libs/@guardian/identity-auth/src/@types/OAuth.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/error.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/cookieRefresh.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/emitter.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/crypto.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/token.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/tokenManager.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth/src/identityAuth.ts","webpack://@guardian/dotcom-rendering/../../../../../libs/@guardian/identity-auth-frontend/src/index.ts","webpack://@guardian/dotcom-rendering/./src/lib/identity.ts","webpack://@guardian/dotcom-rendering/./src/lib/isServer.ts","webpack://@guardian/dotcom-rendering/./src/lib/scheduler.ts","webpack://@guardian/dotcom-rendering/./webpack/bundles.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/detect-ad-blocker.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/event-timer.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/ad-sizes.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/constants/ad-label-height.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/send-commercial-metrics.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/performance/getMeasures.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/lib/get-locale.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/content.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/permutive.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/personalised.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/session.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/pick-targeting-values.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/shared.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/build-page-targeting.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/viewport.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+commercial@23.7.4_@guardian+ab-core@8.0.0_@guardian+core-web-vitals@7.0.0_@guardian_zzk3jzqcq7g4vmmfhkvtlp4cae/node_modules/@guardian/commercial/dist/esm/core/targeting/youtube-ima.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@babel+runtime@7.25.7/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/package.json.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/getCurrentFramework.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/lib/mark.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/server.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/lib/domain.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/lib/sourcepointConfig.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/aus/getConsentState.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/aus/api.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/tcfv2/api.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/tcfv2/getConsentState.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/usnat/getConsentState.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/usnat/api.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/onConsentChange.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/lib/signals.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/stub_tcfv2.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/stub_uspapi_ccpa.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/sourcepoint.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/stub.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/stub_gpp_usnat.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/cmp.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/disable.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/vendors.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/getConsentFor.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/vendorStorageIds.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/vendorDataManager.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/index.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/getFramework.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/consent-management-platform/onConsent.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/ERR_INVALID_COOKIE.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/getCookie.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/getCookieValues.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/getDomainAttribute.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/getShortDomain.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/isValidCookie.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/memoizedCookies.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/removeCookie.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/cookies/setCookie.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/isNonNullable/isNonNullable.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/isObject/isObject.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/isOneOf/isOneOf.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/isString/isString.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/isUndefined/isUndefined.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/logger/storage-key.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/logger/logger.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/logger/subscriptions.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/performance/serialise.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/performance/startPerformanceMeasure.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/performance/log.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+libs@19.2.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/libs/dist/storage/storage.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/transmit.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/visibility.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/vendor/adBlockDetectionLib.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/adblock-detection.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/core.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/components.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/attention.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/privatebrowsing.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/heatmap.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/click-path-capture.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/perf.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/iframe-tracking.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/ng.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__generated__/palette.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__generated__/size.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__generated__/space.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__generated__/typography.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/accessibility/focus-halo.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/link/ButtonLink.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/link/shared.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/link/theme.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/link/styles.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/utils/themes.js","webpack://@guardian/dotcom-rendering/webpack/bootstrap","webpack://@guardian/dotcom-rendering/webpack/runtime/compat get default export","webpack://@guardian/dotcom-rendering/webpack/runtime/define property getters","webpack://@guardian/dotcom-rendering/webpack/runtime/ensure chunk","webpack://@guardian/dotcom-rendering/webpack/runtime/get javascript chunk filename","webpack://@guardian/dotcom-rendering/webpack/runtime/global","webpack://@guardian/dotcom-rendering/webpack/runtime/harmony module decorator","webpack://@guardian/dotcom-rendering/webpack/runtime/hasOwnProperty shorthand","webpack://@guardian/dotcom-rendering/webpack/runtime/make namespace object","webpack://@guardian/dotcom-rendering/webpack/runtime/node module decorator","webpack://@guardian/dotcom-rendering/webpack/runtime/publicPath","webpack://@guardian/dotcom-rendering/webpack/runtime/jsonp chunk loading","webpack://@guardian/dotcom-rendering/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"@guardian/dotcom-rendering:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var map = {\n\t\"./Accessibility.importable\": [\n\t\t54862,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t8920,\n\t\t7351,\n\t\t4237,\n\t\t9766,\n\t\t3366,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t39,\n\t\t348,\n\t\t6981\n\t],\n\t\"./AdBlockAsk.importable\": [\n\t\t54841,\n\t\t7000,\n\t\t2552\n\t],\n\t\"./AdPortals.importable\": [\n\t\t29087,\n\t\t2482,\n\t\t1005\n\t],\n\t\"./AlreadyVisited.importable\": [\n\t\t38298,\n\t\t689\n\t],\n\t\"./AppsEpic.importable\": [\n\t\t29051,\n\t\t4684,\n\t\t2482,\n\t\t8067,\n\t\t4942\n\t],\n\t\"./AppsFooter.importable\": [\n\t\t93980,\n\t\t2482,\n\t\t3988\n\t],\n\t\"./AppsLightboxImage.importable\": [\n\t\t20639,\n\t\t2482,\n\t\t7540,\n\t\t4111\n\t],\n\t\"./AppsLightboxImageStore.importable\": [\n\t\t25816,\n\t\t2482,\n\t\t8968\n\t],\n\t\"./AuEoy2024Wrapper.importable\": [\n\t\t95419,\n\t\t4684,\n\t\t8920,\n\t\t9995,\n\t\t9766,\n\t\t1908,\n\t\t7460,\n\t\t2075\n\t],\n\t\"./AudioAtomWrapper.importable\": [\n\t\t7888,\n\t\t829\n\t],\n\t\"./AudioPlayerWrapper.importable\": [\n\t\t89951,\n\t\t6205\n\t],\n\t\"./AustralianTerritorySwitcher.importable\": [\n\t\t83120,\n\t\t4684,\n\t\t8920,\n\t\t9766,\n\t\t4672\n\t],\n\t\"./Branding.importable\": [\n\t\t93556,\n\t\t1204\n\t],\n\t\"./BrazeMessaging.importable\": [\n\t\t54041,\n\t\t7000,\n\t\t1891,\n\t\t8301\n\t],\n\t\"./CalloutBlockComponent.importable\": [\n\t\t7949,\n\t\t4684,\n\t\t8920,\n\t\t6398,\n\t\t3789,\n\t\t5095,\n\t\t6903,\n\t\t5922,\n\t\t1505\n\t],\n\t\"./CalloutEmbedBlockComponent.importable\": [\n\t\t65744,\n\t\t4684,\n\t\t8920,\n\t\t6398,\n\t\t3789,\n\t\t5095,\n\t\t6903,\n\t\t9382\n\t],\n\t\"./CardCommentCount.importable\": [\n\t\t92209,\n\t\t7000,\n\t\t6931,\n\t\t5661\n\t],\n\t\"./Carousel.importable\": [\n\t\t26965,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t7351,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t4057\n\t],\n\t\"./CarouselForNewsletters.importable\": [\n\t\t69688,\n\t\t4684,\n\t\t6876,\n\t\t7540,\n\t\t9665,\n\t\t1720\n\t],\n\t\"./ChartAtom.importable\": [\n\t\t37084,\n\t\t2372\n\t],\n\t\"./CommentCount.importable\": [\n\t\t24855,\n\t\t7000,\n\t\t2695\n\t],\n\t\"./DiscussionApps.importable\": [\n\t\t74899,\n\t\t4684,\n\t\t2482,\n\t\t6398,\n\t\t6061,\n\t\t5095,\n\t\t6880,\n\t\t9242,\n\t\t3769,\n\t\t8979\n\t],\n\t\"./DiscussionMeta.importable\": [\n\t\t68286,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t9242,\n\t\t7018\n\t],\n\t\"./DiscussionWeb.importable\": [\n\t\t94471,\n\t\t4684,\n\t\t2482,\n\t\t6398,\n\t\t6061,\n\t\t5095,\n\t\t6880,\n\t\t9242,\n\t\t3769,\n\t\t8047\n\t],\n\t\"./DocumentBlockComponent.importable\": [\n\t\t61298,\n\t\t4684,\n\t\t3222\n\t],\n\t\"./Dropdown.importable\": [\n\t\t93937,\n\t\t3937,\n\t\t2118\n\t],\n\t\"./EditionSwitcherBanner.importable\": [\n\t\t85797,\n\t\t7000,\n\t\t4684,\n\t\t4650\n\t],\n\t\"./EmbedBlockComponent.importable\": [\n\t\t23088,\n\t\t4684,\n\t\t7728\n\t],\n\t\"./EnhancePinnedPost.importable\": [\n\t\t41959,\n\t\t4767\n\t],\n\t\"./ExpandableMarketingCardWrapper.importable\": [\n\t\t27564,\n\t\t7000,\n\t\t4684,\n\t\t3642\n\t],\n\t\"./FetchOnwardsData.importable\": [\n\t\t36603,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t7351,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t4057,\n\t\t2115\n\t],\n\t\"./FilterKeyEventsToggle.importable\": [\n\t\t71419,\n\t\t6005\n\t],\n\t\"./FocusStyles.importable\": [\n\t\t1573,\n\t\t6799\n\t],\n\t\"./FollowWrapper.importable\": [\n\t\t84538,\n\t\t2482,\n\t\t719,\n\t\t3585\n\t],\n\t\"./FooterLabel.importable\": [\n\t\t98736,\n\t\t5926\n\t],\n\t\"./FooterReaderRevenueLinks.importable\": [\n\t\t14694,\n\t\t8858\n\t],\n\t\"./FrontSubNav.importable\": [\n\t\t84373,\n\t\t7000,\n\t\t7540,\n\t\t6021,\n\t\t39,\n\t\t5801\n\t],\n\t\"./GetCricketScoreboard.importable\": [\n\t\t81671,\n\t\t7000,\n\t\t9442\n\t],\n\t\"./GetMatchNav.importable\": [\n\t\t32154,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t9771,\n\t\t719,\n\t\t1631\n\t],\n\t\"./GetMatchStats.importable\": [\n\t\t26164,\n\t\t7000,\n\t\t6025\n\t],\n\t\"./GetMatchTabs.importable\": [\n\t\t39727,\n\t\t7000,\n\t\t9762\n\t],\n\t\"./GuideAtomWrapper.importable\": [\n\t\t88594,\n\t\t9558,\n\t\t2407\n\t],\n\t\"./InstagramBlockComponent.importable\": [\n\t\t87365,\n\t\t4684,\n\t\t3481\n\t],\n\t\"./InteractiveAtomMessenger.importable\": [\n\t\t32011,\n\t\t6061,\n\t\t7763\n\t],\n\t\"./InteractiveBlockComponent.importable\": [\n\t\t84401,\n\t\t4889\n\t],\n\t\"./InteractiveContentsBlockComponent.importable\": [\n\t\t12115,\n\t\t8019\n\t],\n\t\"./KeyEventsCarousel.importable\": [\n\t\t79526,\n\t\t4684,\n\t\t2482,\n\t\t6080,\n\t\t7865\n\t],\n\t\"./KnowledgeQuizAtom.importable\": [\n\t\t10597,\n\t\t4684,\n\t\t8920,\n\t\t3789,\n\t\t4640,\n\t\t8568,\n\t\t6929\n\t],\n\t\"./LatestLinks.importable\": [\n\t\t53560,\n\t\t7000,\n\t\t6931,\n\t\t8030,\n\t\t4541\n\t],\n\t\"./LightboxHash.importable\": [\n\t\t87578,\n\t\t4702\n\t],\n\t\"./LightboxLayout.importable\": [\n\t\t7756,\n\t\t7026,\n\t\t7540,\n\t\t2704\n\t],\n\t\"./LiveBlogEpic.importable\": [\n\t\t62556,\n\t\t7000,\n\t\t9995,\n\t\t2992\n\t],\n\t\"./LiveblogNotifications.importable\": [\n\t\t20587,\n\t\t2482,\n\t\t6171\n\t],\n\t\"./Liveness.importable\": [\n\t\t34270,\n\t\t7000,\n\t\t4684,\n\t\t3454\n\t],\n\t\"./ManyNewsletterSignUp.importable\": [\n\t\t82794,\n\t\t4684,\n\t\t6398,\n\t\t1076,\n\t\t6876,\n\t\t6574,\n\t\t7540,\n\t\t6021,\n\t\t39,\n\t\t9665,\n\t\t9267\n\t],\n\t\"./MapEmbedBlockComponent.importable\": [\n\t\t79564,\n\t\t4684,\n\t\t5532\n\t],\n\t\"./Metrics.importable\": [\n\t\t23825,\n\t\t7000,\n\t\t5904\n\t],\n\t\"./MostViewedFooter.importable\": [\n\t\t76706,\n\t\t6021,\n\t\t1301,\n\t\t9959\n\t],\n\t\"./MostViewedFooterData.importable\": [\n\t\t51375,\n\t\t7000,\n\t\t6021,\n\t\t1301,\n\t\t8295\n\t],\n\t\"./MostViewedRightWithAd.importable\": [\n\t\t92129,\n\t\t7000,\n\t\t7540,\n\t\t6021,\n\t\t1301,\n\t\t7546,\n\t\t543\n\t],\n\t\"./OnwardsUpper.importable\": [\n\t\t78272,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t7351,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t39,\n\t\t4057,\n\t\t2919\n\t],\n\t\"./PersonalityQuizAtom.importable\": [\n\t\t1413,\n\t\t4684,\n\t\t8920,\n\t\t3789,\n\t\t4640,\n\t\t8568,\n\t\t729\n\t],\n\t\"./PrivacySettingsLink.importable\": [\n\t\t98612\n\t],\n\t\"./ProfileAtom.importable\": [\n\t\t56453,\n\t\t9558,\n\t\t2713\n\t],\n\t\"./ProfileAtomWrapper.importable\": [\n\t\t6948,\n\t\t9558,\n\t\t1836\n\t],\n\t\"./PulsingDot.importable\": [\n\t\t53510,\n\t\t2242\n\t],\n\t\"./QandaAtom.importable\": [\n\t\t6367,\n\t\t9558,\n\t\t8207\n\t],\n\t\"./ReaderRevenueDev.importable\": [\n\t\t17207,\n\t\t5927\n\t],\n\t\"./RelativeTime.importable\": [\n\t\t33254,\n\t\t8970\n\t],\n\t\"./RichLinkComponent.importable\": [\n\t\t49295,\n\t\t7000,\n\t\t7540,\n\t\t6021,\n\t\t288\n\t],\n\t\"./ScrollableFeature.importable\": [\n\t\t60801,\n\t\t7000,\n\t\t4684,\n\t\t7351,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t9646,\n\t\t3473,\n\t\t1564\n\t],\n\t\"./ScrollableHighlights.importable\": [\n\t\t86637,\n\t\t4684,\n\t\t7351,\n\t\t7540,\n\t\t6021,\n\t\t8030,\n\t\t3015\n\t],\n\t\"./ScrollableMedium.importable\": [\n\t\t51805,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t7351,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t3473,\n\t\t4001\n\t],\n\t\"./ScrollableSmall.importable\": [\n\t\t47333,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t7351,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t3473,\n\t\t4289\n\t],\n\t\"./SecureSignup.importable\": [\n\t\t40078,\n\t\t4684,\n\t\t6398,\n\t\t1076,\n\t\t2066\n\t],\n\t\"./SendTargetingParams.importable\": [\n\t\t47402,\n\t\t2482,\n\t\t7362\n\t],\n\t\"./SetABTests.importable\": [\n\t\t60220,\n\t\t7000,\n\t\t9339\n\t],\n\t\"./SetAdTargeting.importable\": [\n\t\t67027,\n\t\t7000,\n\t\t4331\n\t],\n\t\"./ShareButton.importable\": [\n\t\t85598,\n\t\t4684,\n\t\t970\n\t],\n\t\"./ShowHideContainers.importable\": [\n\t\t19746,\n\t\t2014\n\t],\n\t\"./ShowMore.importable\": [\n\t\t40348,\n\t\t7000,\n\t\t4684,\n\t\t2482,\n\t\t7351,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6931,\n\t\t8030,\n\t\t6149,\n\t\t9646,\n\t\t1424,\n\t\t348,\n\t\t8351\n\t],\n\t\"./SignInGateSelector.importable\": [\n\t\t44940,\n\t\t7000,\n\t\t7171\n\t],\n\t\"./SlideshowCarousel.importable\": [\n\t\t58336,\n\t\t4684,\n\t\t7540,\n\t\t4747\n\t],\n\t\"./SlotBodyEnd.importable\": [\n\t\t44175,\n\t\t7000,\n\t\t9995,\n\t\t1891,\n\t\t7546,\n\t\t3213,\n\t\t1104\n\t],\n\t\"./SpotifyBlockComponent.importable\": [\n\t\t41811,\n\t\t4684,\n\t\t6827\n\t],\n\t\"./StickyBottomBanner.importable\": [\n\t\t96830,\n\t\t7000,\n\t\t9995,\n\t\t1891,\n\t\t3213,\n\t\t9761\n\t],\n\t\"./StickyLiveblogAskWrapper.importable\": [\n\t\t35878,\n\t\t4684,\n\t\t9995,\n\t\t6274\n\t],\n\t\"./SubNav.importable\": [\n\t\t52756,\n\t\t9116\n\t],\n\t\"./TableOfContents.importable\": [\n\t\t94834,\n\t\t4454\n\t],\n\t\"./TimelineAtom.importable\": [\n\t\t31173,\n\t\t9558,\n\t\t1169\n\t],\n\t\"./Titlepiece.importable\": [\n\t\t94573,\n\t\t7000,\n\t\t4684,\n\t\t6398,\n\t\t4714,\n\t\t3937,\n\t\t5307\n\t],\n\t\"./TopBar.importable\": [\n\t\t31492,\n\t\t7000,\n\t\t9995,\n\t\t1891,\n\t\t3937,\n\t\t5427\n\t],\n\t\"./TopBarSupport.importable\": [\n\t\t46649,\n\t\t9995,\n\t\t4490\n\t],\n\t\"./TweetBlockComponent.importable\": [\n\t\t79900,\n\t\t7844\n\t],\n\t\"./UnsafeEmbedBlockComponent.importable\": [\n\t\t5494,\n\t\t4684,\n\t\t7322\n\t],\n\t\"./UsEoy2024Wrapper.importable\": [\n\t\t21961,\n\t\t4684,\n\t\t8920,\n\t\t9995,\n\t\t9766,\n\t\t1908,\n\t\t7460,\n\t\t5645\n\t],\n\t\"./VideoFacebookBlockComponent.importable\": [\n\t\t9686,\n\t\t4684,\n\t\t490\n\t],\n\t\"./VineBlockComponent.importable\": [\n\t\t58387,\n\t\t4684,\n\t\t1491\n\t],\n\t\"./WeatherWrapper.importable\": [\n\t\t88840,\n\t\t7000,\n\t\t6061,\n\t\t6508\n\t],\n\t\"./YoutubeBlockComponent.importable\": [\n\t\t23264,\n\t\t7000,\n\t\t2482,\n\t\t4237,\n\t\t7540,\n\t\t6021,\n\t\t6149,\n\t\t3408\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 6851;\nmodule.exports = webpackAsyncContext;","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import { log } from '@guardian/libs';\nimport { isServer } from '../lib/isServer';\nimport { setSchedulerPriorityLastStartTime } from '../lib/scheduler';\nimport type { RenderingTarget } from '../types/renderingTarget';\nimport { recordExperiences } from './ophan/ophan';\n\n/**\n * Whether we should adapt the current page to address poor performance issues.\n *\n * It will resolve immediately if `false`, but needs to wait for perf check to\n * complete if you're in the adaptive site test variant.\n */\nexport const shouldAdapt = async (): Promise<boolean> => {\n\tif (isServer) return false;\n\tif (window.location.hash === '#adapt') return true;\n\tif (!window.guardian.config.switches.adaptiveSite) return false;\n\tif (window.location.host !== 'www.theguardian.com') return false;\n\n\t// only evaluate this code if we want to adapt in response to page performance\n\tconst { isPerformingPoorly } = await import(\n\t\t/* webpackMode: \"eager\" */ './poorPerformanceMonitoring'\n\t);\n\n\treturn isPerformingPoorly();\n};\n\n/**  Hide all placeholders of non-critical islands */\nconst hideAdaptedIslands = () => {\n\tconst style = document.createElement('style');\n\tstyle.innerHTML = `gu-island:not([priority=critical]) [data-name=placeholder] { display: none; }`;\n\tdocument.head.appendChild(style);\n};\n\nconst recordAdaptedSite = (renderingTarget: RenderingTarget) =>\n\trecordExperiences(renderingTarget, ['adapted']);\n\nexport const adaptSite = (renderingTarget: RenderingTarget): void => {\n\tlog('dotcom', '🎛️ Adapting');\n\n\t// disable all tasks except critical ones\n\tsetSchedulerPriorityLastStartTime('feature', 0);\n\tsetSchedulerPriorityLastStartTime('enhancement', 0);\n\thideAdaptedIslands();\n\n\tvoid recordAdaptedSite(renderingTarget);\n};\n","import type { ConsentState } from '@guardian/libs';\nimport { cmp, onConsent } from '@guardian/libs';\nimport { getCookie, log } from '@guardian/libs';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport type { RenderingTarget } from '../types/renderingTarget';\nimport { getOphan } from './ophan/ophan';\n\nconst submitConsentToOphan = async (renderingTarget: RenderingTarget) => {\n\tconst consentState: ConsentState = await onConsent();\n\n\tconst consentDetails = (): {\n\t\tconsentJurisdiction: 'TCF' | 'USNAT' | 'AUS' | 'OTHER';\n\t\tconsentUUID: string;\n\t\tconsent: string;\n\t} => {\n\t\tif (consentState.tcfv2) {\n\t\t\treturn {\n\t\t\t\tconsentJurisdiction: 'TCF',\n\t\t\t\tconsentUUID: getCookie({ name: 'consentUUID' }) ?? '',\n\t\t\t\tconsent: consentState.tcfv2.tcString,\n\t\t\t};\n\t\t}\n\t\tif (consentState.usnat) {\n\t\t\t// Users who interacted with the CCPA banner before the migration to usnat will still have a ccpaUUID cookie. The usnatUUID cookie is set when the USNAT banner is interacted with. We need to check both cookies to ensure we have the correct consentUUID.\n\t\t\tconst consentUUID =\n\t\t\t\tgetCookie({ name: 'usnatUUID' }) ??\n\t\t\t\tgetCookie({ name: 'ccpaUUID' });\n\t\t\treturn {\n\t\t\t\tconsentJurisdiction: 'USNAT',\n\t\t\t\tconsentUUID: consentUUID ?? '',\n\t\t\t\tconsent: consentState.usnat.doNotSell ? 'false' : 'true',\n\t\t\t};\n\t\t}\n\t\tif (consentState.aus) {\n\t\t\treturn {\n\t\t\t\tconsentJurisdiction: 'AUS',\n\t\t\t\tconsentUUID: getCookie({ name: 'ccpaUUID' }) ?? '',\n\t\t\t\t/*consent =\n\t\t\t\t\t\tgetCookie({ name: 'consentStatus' }) ?? '';\n\t\t\t\t\t\t*/\n\t\t\t\tconsent: consentState.aus.personalisedAdvertising\n\t\t\t\t\t? 'true'\n\t\t\t\t\t: 'false',\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tconsentJurisdiction: 'OTHER',\n\t\t\tconsentUUID: '',\n\t\t\tconsent: '',\n\t\t};\n\t};\n\n\t// Register changes in consent state with Ophan\n\tconst ophan = await getOphan(renderingTarget);\n\treturn ophan.record(consentDetails());\n};\n\nconst initialiseCmp = async () => {\n\tconst code = await getLocaleCode();\n\tconst browserId = getCookie({ name: 'bwid', shouldMemoize: true });\n\tconst { pageViewId } = window.guardian.config.ophan;\n\n\tconst country = code ?? undefined;\n\tcmp.init({\n\t\tpubData: {\n\t\t\tplatform: 'next-gen',\n\t\t\t// If `undefined`, the resulting consent signal cannot be joined to a page view.\n\t\t\tbrowserId: browserId ?? undefined,\n\t\t\tpageViewId,\n\t\t},\n\t\tcountry,\n\t});\n\tlog('dotcom', 'CMP initialised');\n};\n/**\n * Hydrating this island is so critical that it should not be imported\n * as a separate chunk. @see {PrivacySettingsLink.importable.tsx}\n */\nconst eagerlyImportPrivacySettingsLinkIsland = () =>\n\timport(\n\t\t/* webpackMode: 'eager' */ '../components/PrivacySettingsLink.importable'\n\t);\n\n/**\n * Keep this file in sync with CONSENT_TIMING in static/src/javascripts/boot.js in frontend\n * mark: CONSENT_TIMING\n */\nexport const bootCmp = async (\n\trenderingTarget: RenderingTarget,\n): Promise<void> => {\n\tif (!window.guardian.config.switches.consentManagement) return; // CMP turned off!\n\n\tawait Promise.all([\n\t\tinitialiseCmp(),\n\t\teagerlyImportPrivacySettingsLinkIsland(),\n\t\tsubmitConsentToOphan(renderingTarget),\n\t]);\n};\n","function e({modulePath:e=\".\",importFunctionName:t=\"__import__\"}={}){try{self[t]=new Function(\"u\",\"return import(u)\")}catch(o){const r=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise((o,a)=>{const c=new URL(e,r);if(self[t].moduleMap[c])return o(self[t].moduleMap[c]);const l=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:\"text/javascript\"}),m=Object.assign(document.createElement(\"script\"),{type:\"module\",src:URL.createObjectURL(l),onerror(){a(new Error(`Failed to import: ${e}`)),n(m)},onload(){o(self[t].moduleMap[c]),n(m)}});document.head.appendChild(m)}),self[t].moduleMap={}}}var t=Object.freeze({initialize:e});export default t;export{e as initialize};\n","import dynamicImportPolyfill from 'dynamic-import-polyfill';\n\n// Provides an import function to use for dynamic imports. **Only works on\n// browsers that cut the mustard (support modules).**\nconst initialiseDynamicImport = () => {\n\ttry {\n\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\n\t\twindow.guardianPolyfilledImport = new Function(\n\t\t\t'url',\n\t\t\t`return import(url)`,\n\t\t) as (url: string) => Promise<any>;\n\t} catch (e) {\n\t\tdynamicImportPolyfill.initialize({\n\t\t\timportFunctionName: 'guardianPolyfilledImport', // must be a direct property of the window\n\t\t});\n\t}\n};\n\n// Provides an import function to use for dynamic imports. **Designed for\n// legacy browsers. Dynamic loads a ~4k bundle.**\nconst initialiseDynamicImportLegacy = async () => {\n\tconst shimport = await import(\n\t\t/* webpackChunkName: \"shimport\" */ '@guardian/shimport'\n\t);\n\tshimport.initialise(); // note this adds a __shimport__ global\n\twindow.guardianPolyfilledImport = shimport.load;\n};\n\nexport const dynamicImport = (): Promise<void> => {\n\twindow.guardianPolyfilledImport = (url: string) =>\n\t\tPromise.reject(\n\t\t\tnew Error(`import not polyfilled; attempted import(${url})`),\n\t\t);\n\n\tif (window.guardian.mustardCut) {\n\t\treturn Promise.resolve(initialiseDynamicImport());\n\t}\n\n\treturn initialiseDynamicImportLegacy();\n};\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access -- necessary for calling our async loaded modules */\nimport type { EmotionCache } from '@emotion/react';\nimport { CacheProvider } from '@emotion/react';\nimport { isUndefined, log, startPerformanceMeasure } from '@guardian/libs';\nimport { createElement } from 'react';\nimport { hydrateRoot } from 'react-dom/client';\nimport { ConfigProvider } from '../../components/ConfigContext';\nimport type { Config } from '../../types/configContext';\n\ndeclare global {\n\tinterface DOMStringMap {\n\t\t/**\n\t\t * Defines the current state of the Island.\n\t\t * `undefined` at server-side rendering\n\t\t */\n\t\tislandStatus?: 'identified' | 'imported' | 'rendered' | 'hydrated';\n\t}\n}\n\n/**\n * This function dynamically imports and then hydrates a specific component in\n * a specific part of the page\n *\n * If the content being hydrated is not present in the dom then React renders\n * it. This is how portals (non server side rendered content) work\n *\n * @param name The name of the component we want to hydrate\n * @param data The deserialised props we want to use for hydration\n * @param element The location on the DOM where the component to hydrate exists\n * @param emotionCache An instance of an emotion cache to use for the island\n * @param config Application configuration to be passed to the config context for the hydrated component\n */\nexport const doHydration = async (\n\tname: string,\n\tdata: { [key: string]: unknown } | null,\n\telement: HTMLElement,\n\temotionCache: EmotionCache,\n\tconfig: Config,\n): Promise<void> => {\n\t// If this function has already been run for an element then don't try to\n\t// run it a second time\n\tif (!isUndefined(element.dataset.islandStatus)) return;\n\telse element.dataset.islandStatus = 'identified';\n\n\tconst { endPerformanceMeasure: endImportPerformanceMeasure } =\n\t\tstartPerformanceMeasure('dotcom', name, 'import');\n\tawait import(\n\t\t/* webpackInclude: /\\.importable\\.tsx$/ */\n\t\t/* webpackChunkName: \"[request]\" */\n\t\t`../../components/${name}.importable`\n\t)\n\t\t.then((module) => {\n\t\t\t/** The duration of importing the module for this island */\n\t\t\tconst importDuration = endImportPerformanceMeasure();\n\t\t\telement.dataset.islandStatus = 'imported';\n\n\t\t\tconst { endPerformanceMeasure: endIslandPerformanceMeasure } =\n\t\t\t\tstartPerformanceMeasure('dotcom', name, 'island');\n\n\t\t\thydrateRoot(\n\t\t\t\telement,\n\t\t\t\t<ConfigProvider value={config}>\n\t\t\t\t\t<CacheProvider value={emotionCache}>\n\t\t\t\t\t\t{createElement(module[name], data)}\n\t\t\t\t\t</CacheProvider>\n\t\t\t\t</ConfigProvider>,\n\t\t\t);\n\n\t\t\t/** The duration of rendering or hydrating this island */\n\t\t\tconst islandDuration = endIslandPerformanceMeasure();\n\n\t\t\treturn { importDuration, islandDuration };\n\t\t})\n\t\t.then(({ importDuration, islandDuration }) => {\n\t\t\tif (!('getEntriesByType' in window.performance)) return;\n\n\t\t\telement.dataset.islandStatus = 'hydrated';\n\n\t\t\tlog(\n\t\t\t\t'dotcom',\n\t\t\t\t`🏝 <${name} /> hydrated in ${islandDuration}ms (imported in ${importDuration}ms)`,\n\t\t\t);\n\t\t})\n\t\t.catch((error) => {\n\t\t\telement.dataset.islandStatus = undefined; // remove any island status\n\t\t\tif (name && error.message.includes(name)) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t`🚨 Error importing ${name}. Components must live in the root of /components and follow the [MyComponent].importable.tsx naming convention 🚨`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow error;\n\t\t});\n};\n","import type { EmotionCache } from '@emotion/cache';\nimport createCache from '@emotion/cache';\nimport { isUndefined } from '@guardian/libs';\n\n/**\n * Emotion Cache\n *\n * Emotion uses a cache to avoid having to re-calculate the same CSS multiple times,\n * We want to re-use this cache between islands to avoid duplicate work or\n * conflicts between caches.\n *\n * We need to keep this cache available for any islands added to the page after the\n * initial page load (e.g with liveblogs), so we store it on window.guardian\n */\nexport const getEmotionCache = (): EmotionCache => {\n\tif (isUndefined(window.guardian.emotionCache)) {\n\t\tconst key = 'dcr';\n\t\tconst emotionCache = createCache({ key });\n\t\twindow.guardian.emotionCache = emotionCache;\n\t\treturn emotionCache;\n\t} else {\n\t\treturn window.guardian.emotionCache;\n\t}\n};\n","import type { Config } from '../../types/configContext';\n\nlet config: Config | undefined;\n/**\n * Reads the config from a JSON script tag,\n * or reuse the memoised value if it exists.\n *\n * @returns {Config} an immutable, global config\n */\nexport const getConfig = (): Readonly<Config> => {\n\tif (config) return config;\n\n\tconst serialised = document.querySelector('script#config')?.innerHTML;\n\n\ttry {\n\t\tif (!serialised) {\n\t\t\tthrow Error('Unable to fetch config attribute from #config');\n\t\t} else {\n\t\t\tconfig = JSON.parse(serialised) as Config;\n\t\t\treturn config;\n\t\t}\n\t} catch (error: unknown) {\n\t\tconsole.error(\n\t\t\t`🚨 Error parsing config. Is this data serialisable? ${String(\n\t\t\t\tserialised,\n\t\t\t)} 🚨`,\n\t\t);\n\t\tthrow error;\n\t}\n};\n","/**\n * getName takes the given html element and returns its name attribute\n *\n * We expect the element to always be a `gu-*` custom element\n *\n * @param marker : The html element that we want to read the name attribute from;\n * @returns\n */\nexport const getName = (marker: HTMLElement): string | null => {\n\tconst name = marker.getAttribute('name');\n\tif (!name) {\n\t\tconsole.error(\n\t\t\t`🚨 Error - no name attribute supplied. We need name to know what component to import 🚨`,\n\t\t);\n\t}\n\treturn name;\n};\n","/**\n * getProps takes the given html element and returns its props attibute\n *\n * We expect the element to always be a `gu-*` custom element\n *\n * @param marker : The html element that we want to read the props attribute from;\n * @returns\n */\nexport const getProps = (marker: HTMLElement): { [key: string]: unknown } => {\n\tconst serialised = marker.getAttribute('props');\n\tlet props: { [key: string]: unknown };\n\ttry {\n\t\tprops = serialised && JSON.parse(serialised);\n\t} catch (error: unknown) {\n\t\tconsole.error(\n\t\t\t`🚨 Error parsing props. Is this data serialisable? ${String(\n\t\t\t\tserialised,\n\t\t\t)} 🚨`,\n\t\t);\n\t\tthrow error;\n\t}\n\treturn props;\n};\n","import type { EmotionCache } from '@emotion/cache';\nimport { isUndefined } from '@guardian/libs';\nimport { schedule } from '../../lib/scheduler';\nimport { doHydration } from './doHydration';\nimport { getConfig } from './getConfig';\nimport { getName } from './getName';\nimport { getPriority } from './getPriority';\nimport { getProps } from './getProps';\nimport { onInteraction } from './onInteraction';\nimport { onNavigation } from './onNavigation';\nimport { whenIdle } from './whenIdle';\nimport { whenVisible } from './whenVisible';\n\n/**\n * The hash values that we want to use to trigger hydration are different\n * for lightbox. Instead of using the name of the component, we look for\n * the img- text at the start.\n */\nfunction hasLightboxHash(name: string) {\n\treturn (\n\t\tname === 'LightboxLayout' && window.location.hash.startsWith('#img-')\n\t);\n}\n\n/**\n * Partial Hydration / React Islands\n *\n * The code here looks for parts of the dom that have been marked using the `gu-island`\n * marker, hydrating/rendering each one using the following properties:\n *\n * deferUntil - Used to optionally defer execution\n * name - The name of the component. Used to dynamically import the code\n * props - The data for the component that has been serialised in the dom\n * element - The `gu-island` custom element which is wrapping the content\n */\nexport const initHydration = async (\n\telement: HTMLElement,\n\temotionCache: EmotionCache,\n): Promise<void> => {\n\tconst name = getName(element);\n\tconst props = getProps(element);\n\tconst config = getConfig();\n\tconst priority = getPriority(element);\n\n\tif (!name) return;\n\tif (isUndefined(priority)) return;\n\n\tconst scheduleHydration = () =>\n\t\tschedule(\n\t\t\tname,\n\t\t\t() => doHydration(name, props, element, emotionCache, config),\n\t\t\t{ priority },\n\t\t);\n\n\tconst deferUntil = element.getAttribute('deferuntil');\n\tswitch (deferUntil) {\n\t\tcase 'idle': {\n\t\t\twhenIdle(() => void scheduleHydration());\n\t\t\treturn;\n\t\t}\n\t\tcase 'visible': {\n\t\t\tconst rootMargin = element.getAttribute('rootmargin') ?? undefined;\n\t\t\twhenVisible(element, () => void scheduleHydration(), {\n\t\t\t\trootMargin,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tcase 'interaction': {\n\t\t\tonInteraction(element, async (targetElement) => {\n\t\t\t\tawait scheduleHydration();\n\t\t\t\ttargetElement.dispatchEvent(new MouseEvent('click'));\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tcase 'hash': {\n\t\t\tif (window.location.hash.includes(name) || hasLightboxHash(name)) {\n\t\t\t\treturn scheduleHydration();\n\t\t\t} else {\n\t\t\t\t// If we didn't find a matching hash on page load, set a\n\t\t\t\t// listener so that we check again each time the reader\n\t\t\t\t// navigates within the page (changes the hash on the url)\n\t\t\t\tonNavigation(() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\twindow.location.hash.includes(name) ||\n\t\t\t\t\t\thasLightboxHash(name)\n\t\t\t\t\t) {\n\t\t\t\t\t\tvoid scheduleHydration();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tdefault: {\n\t\t\treturn scheduleHydration();\n\t\t}\n\t}\n};\n","import { isString } from '@guardian/libs';\nimport type { Priority } from '../../lib/scheduler';\nimport { isValidSchedulerPriority } from '../../lib/scheduler';\n\n/**\n * getPriority takes the given html element and returns its priority attribute\n *\n * We expect the element to always be a `gu-*` custom element\n *\n * @param marker : The html element that we want to read the priority attribute from;\n * @returns\n */\nexport const getPriority = (marker: HTMLElement): Priority | undefined => {\n\tconst priority = marker.getAttribute('priority');\n\n\tif (isString(priority) && isValidSchedulerPriority(priority)) {\n\t\treturn priority;\n\t}\n\n\tconsole.error(\n\t\t'Unable to find valid priority attribute on gu-island',\n\t\tmarker,\n\t);\n\n\treturn;\n};\n","const timeout = 500;\n/**\n * whenIdle executes a callback when the browser is 'idle' or after a short timeout, whichever comes first\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback\n *\n * @param callback the function to execute once the browser is 'idle'\n */\nexport const whenIdle = (callback: () => void): void => {\n\tif ('requestIdleCallback' in window) {\n\t\twindow.requestIdleCallback(callback, { timeout });\n\t} else {\n\t\tsetTimeout(callback, timeout);\n\t}\n};\n","type WhenVisibleOptions = {\n\trootMargin?: string;\n};\n\n/**\n * Use this function to delay execution of something until an element\n * is within some distance of the viewport.\n *\n * @param element : The html element that we want to observe;\n * @param callback : This is fired when the element is visible in the viewport\n * @param options.rootMargin - The root margin used to control lazy loading\n * See https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin\n */\nexport const whenVisible = (\n\telement: HTMLElement,\n\tcallback: () => void,\n\t{ rootMargin }: WhenVisibleOptions = { rootMargin: '100px' },\n): void => {\n\tif ('IntersectionObserver' in window) {\n\t\tconst io = new IntersectionObserver(\n\t\t\t([entry]) => {\n\t\t\t\tif (!entry?.isIntersecting) return;\n\t\t\t\t// Disconnect this IntersectionObserver once seen\n\t\t\t\tio.disconnect();\n\t\t\t\tcallback();\n\t\t\t},\n\t\t\t{ rootMargin },\n\t\t);\n\n\t\tio.observe(element);\n\t} else {\n\t\t// IntersectionObserver is not supported so failover to calling back at the end of the call stack\n\t\tsetTimeout(() => callback(), 0);\n\t}\n};\n","/**\n * Use this function to delay execution of something until an element is interacted\n * with\n *\n * @param element : The html element that we want to wait for an interaction on;\n * @param callback : This is fired when the element is clicked on\n */\nexport const onInteraction = (\n\telement: HTMLElement,\n\tcallback: (e: HTMLElement) => Promise<void> | void,\n): void => {\n\telement.addEventListener(\n\t\t'click',\n\t\t(e) => {\n\t\t\tif (e.target instanceof HTMLElement) {\n\t\t\t\tvoid callback(e.target);\n\t\t\t}\n\t\t},\n\t\t{ once: true },\n\t);\n};\n","/**\n * Will callback each time the reader navigates back or forward in\n * their browser\n *\n * @param callback : This is fired when the popstate event is fired\n */\nexport const onNavigation = (callback: () => void): void => {\n\twindow.addEventListener('popstate', callback, { once: false });\n};\n","import { getEmotionCache } from './emotion';\nimport { initHydration } from './initHydration';\n\nexport const islands = async (): Promise<void> => {\n\t// Get the emotion cache which is shared between islands\n\tconst emotionCache = getEmotionCache();\n\tconst elements = document.querySelectorAll<HTMLElement>('gu-island');\n\tawait Promise.all(\n\t\t[...elements].map((element) => initHydration(element, emotionCache)),\n\t);\n};\n","import { log } from '@guardian/libs';\nimport type { ScheduleOptions } from '../lib/scheduler';\nimport { schedule } from '../lib/scheduler';\n\nconst isPolyfilled = new Promise<void>((resolve) => {\n\tif (window.guardian.mustardCut || window.guardian.polyfilled) {\n\t\treturn resolve();\n\t}\n\twindow.guardian.queue.push(resolve);\n});\n\nexport const startup = async (\n\tname: string,\n\ttask: () => Promise<unknown>,\n\toptions: ScheduleOptions,\n): Promise<void> => {\n\tawait isPolyfilled;\n\tlog('dotcom', `🎬 booting ${name}`);\n\tawait schedule(name, task, options);\n\tlog('dotcom', `🥾 booted ${name}`);\n};\n","import './webpackPublicPath';\nimport { adaptSite, shouldAdapt } from './adaptiveSite';\nimport { startup } from './startup';\n\nvoid (async () => {\n\tif (await shouldAdapt()) {\n\t\tadaptSite('Web');\n\t}\n\n\t/*************************************************************\n\t *\n\t * The following modules are bundled in the entry chunk,\n\t * so they can be run immediately, but we still want to report\n\t * on the duration of loading and evaluating them.\n\t *\n\t *************************************************************/\n\n\tvoid startup(\n\t\t'bootCmp',\n\t\t() =>\n\t\t\timport(/* webpackMode: \"eager\" */ './bootCmp').then(({ bootCmp }) =>\n\t\t\t\tbootCmp('Web'),\n\t\t\t),\n\t\t{\n\t\t\tpriority: 'critical',\n\t\t},\n\t);\n\n\tvoid startup(\n\t\t'recordInitialPageEvents',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: \"eager\" */ './ophan/recordInitialPageEvents'\n\t\t\t).then(({ recordInitialPageEvents }) =>\n\t\t\t\trecordInitialPageEvents('Web'),\n\t\t\t),\n\t\t{\n\t\t\tpriority: 'critical',\n\t\t},\n\t);\n\n\tvoid startup(\n\t\t'sentryLoader',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: \"eager\" */ './sentryLoader/sentryLoader'\n\t\t\t).then(({ sentryLoader }) => sentryLoader()),\n\t\t{\n\t\t\tpriority: 'critical',\n\t\t},\n\t);\n\n\tvoid startup(\n\t\t'dynamicImport',\n\t\t() =>\n\t\t\timport(/* webpackMode: \"eager\" */ './dynamicImport').then(\n\t\t\t\t({ dynamicImport }) => dynamicImport(),\n\t\t\t),\n\t\t{\n\t\t\tpriority: 'critical',\n\t\t},\n\t);\n\n\tvoid startup(\n\t\t'islands',\n\t\t() =>\n\t\t\timport(/* webpackMode: \"eager\" */ './islands/islands').then(\n\t\t\t\t({ islands }) => islands(),\n\t\t\t),\n\t\t{\n\t\t\tpriority: 'critical',\n\t\t},\n\t);\n\n\tvoid startup(\n\t\t'poorPerformanceMonitoring',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: \"eager\" */ './poorPerformanceMonitoring'\n\t\t\t).then(({ recordPoorPerformance }) => recordPoorPerformance('Web')),\n\t\t{\n\t\t\tpriority: 'critical',\n\t\t},\n\t);\n\n\tvoid startup(\n\t\t'userFeatures',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: 'eager' */ './userFeatures/user-features'\n\t\t\t).then(({ refresh }) => refresh()),\n\t\t{ priority: 'critical' },\n\t);\n\n\t/*************************************************************\n\t *\n\t * The following modules are lazy loaded,\n\t * because they are lower priority and do not want to block\n\t * the modules above on loading these.\n\t *\n\t * We are not assigning chunk name to allow Webpack\n\t * to optimise chunking based on its algorithm.\n\t *\n\t *************************************************************/\n\n\tvoid startup(\n\t\t'atomIframe',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: 'lazy' */\n\t\t\t\t'./atomIframe'\n\t\t\t).then(({ atomIframe }) => atomIframe()),\n\t\t{ priority: 'feature' },\n\t);\n\n\tvoid startup(\n\t\t'embedIframe',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: 'lazy' */\n\t\t\t\t'./embedIframe'\n\t\t\t).then(({ embedIframe }) => embedIframe()),\n\t\t{ priority: 'feature' },\n\t);\n\n\tvoid startup(\n\t\t'newsletterEmbedIframe',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: 'lazy' */\n\t\t\t\t'./newsletterEmbedIframe'\n\t\t\t).then(({ newsletterEmbedIframe }) => newsletterEmbedIframe()),\n\t\t{ priority: 'feature' },\n\t);\n\n\tvoid startup(\n\t\t'initDiscussion',\n\t\t() =>\n\t\t\timport(\n\t\t\t\t/* webpackMode: 'lazy' */\n\t\t\t\t'./discussion'\n\t\t\t).then(({ discussion }) => discussion()),\n\t\t{ priority: 'feature' },\n\t);\n})();\n","import { log } from '@guardian/libs';\nimport type ophan from '@guardian/ophan-tracker-js';\nimport type { ComponentEvent, TAction } from '@guardian/ophan-tracker-js';\nimport type { RenderingTarget } from '../../types/renderingTarget';\n\ntype Ophan = typeof ophan;\n\n/**\n * Store a reference to Ophan so that we don't need to load/enhance it more than once.\n */\nlet cachedOphan: Ophan | undefined;\n\n/**\n * Loads Ophan (if it hasn't already been loaded) and returns a promise of Ophan's methods.\n */\nexport const getOphan = async (\n\trenderingTarget: RenderingTarget,\n): Promise<Ophan> => {\n\tif (cachedOphan) {\n\t\treturn cachedOphan;\n\t}\n\n\tif (renderingTarget === 'Apps') {\n\t\tcachedOphan = {\n\t\t\tsetEventEmitter: () => undefined, // We don't currently have a custom eventEmitter on DCR - like 'mediator' in Frontend.\n\t\t\ttrackComponentAttention: () => undefined,\n\t\t\trecord: (e) => {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\t\te,\n\t\t\t\t\t\t\"We are in DCAR but Ophan record method got called. This shouldn't have happened. Please investigate why\",\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tviewId: 'Apps',\n\t\t\tpageViewId: 'Apps',\n\t\t};\n\n\t\treturn cachedOphan;\n\t}\n\n\t// We've taken '@guardian/ophan-tracker-js' out of the apps client bundle (made it external in webpack) because we don't ever expect this method to be called. Tracking in apps is done natively.\n\tconst { default: ophan } = await import(\n\t\t/* webpackMode: \"eager\" */ '@guardian/ophan-tracker-js'\n\t);\n\n\tconst record: (typeof ophan)['record'] = (event, callback) => {\n\t\tophan.record(event, callback);\n\t\tlog('dotcom', '🧿 Ophan event recorded:', event);\n\t};\n\n\tconst trackComponentAttention: typeof ophan.trackComponentAttention = (\n\t\tname,\n\t\tel,\n\t\tvisibilityThreshold,\n\t) => {\n\t\tophan.trackComponentAttention(name, el, visibilityThreshold);\n\t\tlog('dotcom', '🧿 Ophan tracking component attention:', name, {\n\t\t\tel,\n\t\t\tvisibilityThreshold,\n\t\t});\n\t};\n\n\tcachedOphan = { ...ophan, record, trackComponentAttention };\n\treturn cachedOphan;\n};\n\nexport const submitComponentEvent = async (\n\tcomponentEvent: ComponentEvent,\n\trenderingTarget: RenderingTarget,\n): Promise<void> => {\n\tconst ophan = await getOphan(renderingTarget);\n\tophan.record({ componentEvent });\n};\n\ninterface SdcTestMeta {\n\tabTestName: NonNullable<ComponentEvent['abTest']>['name'];\n\tabTestVariant: NonNullable<ComponentEvent['abTest']>['name'];\n\tcomponentType: ComponentEvent['component']['componentType'];\n\tcampaignCode: ComponentEvent['component']['campaignCode'];\n\tproducts: ComponentEvent['component']['products'];\n\tlabels: ComponentEvent['component']['labels'];\n\tcampaignId?: string;\n}\n\nexport const sendOphanComponentEvent = async (\n\taction: TAction,\n\ttestMeta: SdcTestMeta,\n\trenderingTarget: RenderingTarget,\n): Promise<void> => {\n\tconst {\n\t\tabTestName,\n\t\tabTestVariant,\n\t\tcomponentType,\n\t\tproducts = [],\n\t\tcampaignCode,\n\t\tlabels = [],\n\t} = testMeta;\n\n\tconst componentEvent: ComponentEvent = {\n\t\tcomponent: {\n\t\t\tcomponentType,\n\t\t\tproducts,\n\t\t\tcampaignCode,\n\t\t\tid: testMeta.campaignId ?? testMeta.campaignCode,\n\t\t\tlabels,\n\t\t},\n\t\tabTest: {\n\t\t\tname: abTestName,\n\t\t\tvariant: abTestVariant,\n\t\t},\n\t\taction,\n\t};\n\n\tawait submitComponentEvent(componentEvent, renderingTarget);\n};\n\nexport const recordPerformance = async (\n\trenderingTarget: RenderingTarget,\n): Promise<void> => {\n\tconst { performance: performanceAPI } = window;\n\tconst supportsPerformanceProperties =\n\t\t// eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-condition -- Safety on browsers\n\t\tperformanceAPI &&\n\t\t'navigation' in performanceAPI &&\n\t\t'timing' in performanceAPI;\n\n\tif (!supportsPerformanceProperties) {\n\t\treturn;\n\t}\n\n\tconst { timing } = performanceAPI;\n\n\tconst performance = {\n\t\tdns: timing.domainLookupEnd - timing.domainLookupStart,\n\t\tconnection: timing.connectEnd - timing.connectStart,\n\t\tfirstByte: timing.responseStart - timing.connectEnd,\n\t\tlastByte: timing.responseEnd - timing.responseStart,\n\t\tdomContentLoadedEvent:\n\t\t\ttiming.domContentLoadedEventStart - timing.responseEnd,\n\t\tloadEvent: timing.loadEventStart - timing.domContentLoadedEventStart,\n\t\tnavType: performanceAPI.navigation.type,\n\t\tredirectCount: performanceAPI.navigation.redirectCount,\n\t};\n\n\tconst ophan = await getOphan(renderingTarget);\n\tophan.record({\n\t\tperformance,\n\t});\n};\n\nconst experiencesSet = new Set(['dotcom-rendering']);\nexport const recordExperiences = async (\n\trenderingTarget: RenderingTarget,\n\texperiences: string[],\n): Promise<void> => {\n\tfor (const experience of experiences) {\n\t\texperiencesSet.add(experience);\n\t}\n\n\tconst { record } = await getOphan(renderingTarget);\n\n\t// this is the only allowed usage of sending experiences!\n\t// otherwise, race conditions might lead to different results\n\trecord({\n\t\t['experiences' as string]: [...experiencesSet].sort().join(','),\n\t});\n};\n","import { type EditionId } from '../../lib/edition';\nimport type { RenderingTarget } from '../../types/renderingTarget';\nimport { getOphan, recordExperiences, recordPerformance } from './ophan';\n\nconst getEditionForOphan = (editionId: EditionId) => {\n\tswitch (editionId) {\n\t\tcase 'UK':\n\t\tcase 'US':\n\t\tcase 'AU':\n\t\t\treturn editionId;\n\t\tcase 'INT':\n\t\t\treturn 'International';\n\t\tcase 'EUR':\n\t\t\treturn 'Europe';\n\t}\n};\n\nexport const recordInitialPageEvents = async (\n\trenderingTarget: RenderingTarget,\n): Promise<void> => {\n\tconst { record } = await getOphan(renderingTarget);\n\n\tvoid recordExperiences(renderingTarget, ['dotcom-rendering']);\n\tconst edition = getEditionForOphan(window.guardian.config.page.edition);\n\trecord({ edition });\n\n\t// We wait for the load event so that we can be sure our assetPerformance is reported as expected.\n\twindow.addEventListener('load', function load() {\n\t\tvoid recordPerformance(renderingTarget);\n\t\twindow.removeEventListener('load', load, false);\n\t});\n};\n","import { log } from '@guardian/libs';\nimport type { RenderingTarget } from '../types/renderingTarget';\nimport { recordExperiences } from './ophan/ophan';\n\nconst logPerformanceInfo = (name: string, data?: unknown) =>\n\tlog('dotcom', '⏱', name, data);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Glossary/First_contentful_paint\n *\n * @note Assumes it is above the threshold if the browser does not support the API.\n */\nconst isFirstContentfulPaintAboveThreshold = async (threshold = 2400) => {\n\ttry {\n\t\tconst fcp = await new Promise<number>((resolve) => {\n\t\t\t// resolve this promise early if we know we’ve passed the threshold\n\t\t\tsetTimeout(() => resolve(Infinity), threshold - performance.now());\n\n\t\t\tnew PerformanceObserver((entries, observer) => {\n\t\t\t\tfor (const entry of entries.getEntries()) {\n\t\t\t\t\tif (entry.name !== 'first-contentful-paint') return;\n\n\t\t\t\t\tlogPerformanceInfo('paint', entry);\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\tresolve(entry.startTime);\n\t\t\t\t}\n\t\t\t}).observe({\n\t\t\t\ttype: 'paint',\n\t\t\t\tbuffered: true,\n\t\t\t});\n\t\t});\n\n\t\treturn fcp > threshold;\n\t} catch (error) {\n\t\treturn true;\n\t}\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Time_to_first_byte\n *\n * @note Assumes it is above the threshold if the browser does not support the API.\n */\nconst isTimeToFirstByteAboveThreshold = (threshold = 1200) => {\n\ttry {\n\t\tconst [nav] = window.performance.getEntriesByType('navigation');\n\t\tif (!nav) return true;\n\n\t\tif (nav instanceof PerformanceNavigationTiming) {\n\t\t\tlogPerformanceInfo('navigation', {\n\t\t\t\tdomContentLoadedEventEnd: nav.domContentLoadedEventEnd,\n\t\t\t\ttype: nav.type,\n\t\t\t\tresponseEnd: nav.responseEnd,\n\t\t\t});\n\t\t\treturn nav.responseStart - nav.startTime > threshold;\n\t\t}\n\t\treturn false;\n\t} catch (error) {\n\t\treturn true;\n\t}\n};\n\nlet memoizedPerformingPoorly: boolean | undefined;\n/**\n * Whether or not the current page is running more slowly than acceptable.\n *\n * First contentful paint and time to first byte are good indicators of\n * whether a page will get at least one “poor” core web vital.\n *\n * @see https://web.dev/vitals/#core-web-vitals\n */\nexport const isPerformingPoorly = async (): Promise<boolean> =>\n\t(memoizedPerformingPoorly ??=\n\t\tisTimeToFirstByteAboveThreshold() &&\n\t\t(await isFirstContentfulPaintAboveThreshold()));\n\n/** If the current page is performing poorly, record it in Ophan */\nexport const recordPoorPerformance = async (\n\trenderingTarget: RenderingTarget,\n): Promise<void> => {\n\ttry {\n\t\tif (await isPerformingPoorly()) {\n\t\t\tlog('dotcom', `🐌 Poor page performance`);\n\t\t\treturn recordExperiences(renderingTarget, [\n\t\t\t\t'poor-page-performance',\n\t\t\t]);\n\t\t}\n\t} catch (error) {\n\t\t// do nothing if the performance API is not available\n\t}\n};\n","import { isAdBlockInUse } from '@guardian/commercial';\nimport { log, startPerformanceMeasure } from '@guardian/libs';\nimport '../webpackPublicPath';\nimport type { ReportError } from '../../types/sentry';\n\ntype ReportErrorError = Parameters<ReportError>[0];\ntype ReportErrorFeature = Parameters<ReportError>[1];\ntype ReportErrorTags = Parameters<ReportError>[2];\n\ntype ErrorQueue = Array<{\n\terror: ReportErrorError;\n\tfeature: ReportErrorFeature;\n\ttags?: ReportErrorTags;\n}>;\n\nconst loadSentryCreator = () => {\n\t/**\n\t * Downloading and initialising Sentry is asynchronous so we need a way\n\t * to ensure initialisation only happens once and to queue and report any\n\t * error that might happen while this script is loading\n\t */\n\tlet initialised = false;\n\tconst errorQueue: ErrorQueue = [];\n\n\t/**\n\t * Function that gets called when an error happens before Sentry is ready\n\t */\n\tconst loadSentry = async (\n\t\terror: ReportErrorError | undefined,\n\t\tfeature: ReportErrorFeature = 'unknown',\n\t\ttags?: ReportErrorTags,\n\t) => {\n\t\tconst { endPerformanceMeasure } = startPerformanceMeasure(\n\t\t\t'dotcom',\n\t\t\t'sentryLoader',\n\t\t\t'initialise',\n\t\t);\n\t\t/**\n\t\t * Queue this error for later\n\t\t */\n\t\tif (error) errorQueue.push({ error, feature, tags });\n\n\t\t/**\n\t\t * Only initialise once\n\t\t */\n\t\tif (initialised) {\n\t\t\treturn;\n\t\t}\n\t\tinitialised = true;\n\n\t\t/**\n\t\t * Make this call blocking. We are queing errors while we wait for this code to run\n\t\t * so we won't miss any and by waiting here we ensure we will never make calls we\n\t\t * expect to be blocked\n\t\t * Ad blocker detection can be expensive so it is checked here rather than in init\n\t\t * to avoid blocking of the init flow\n\t\t */\n\t\tconst adBlockInUse: boolean = await isAdBlockInUse();\n\t\tif (adBlockInUse) {\n\t\t\t/**\n\t\t\t * Ad Blockers prevent calls to Sentry from working so don't try to load the lib\n\t\t\t */\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Dynamically load sentry.ts\n\t\t */\n\t\tconst { reportError } = await import(\n\t\t\t/* webpackChunkName: \"lazy\" */\n\t\t\t/* webpackChunkName: \"sentry\" */ './sentry'\n\t\t);\n\n\t\t/**\n\t\t * Replace the lazy loader stub with our custom error reporting function\n\t\t */\n\t\twindow.guardian.modules.sentry.reportError = reportError;\n\n\t\t/**\n\t\t * Now that we have the real reportError function available,\n\t\t * report any queued errors\n\t\t */\n\t\twhile (errorQueue.length) {\n\t\t\tconst queuedError = errorQueue.shift();\n\t\t\tif (queuedError) {\n\t\t\t\treportError(\n\t\t\t\t\tqueuedError.error,\n\t\t\t\t\tqueuedError.feature,\n\t\t\t\t\tqueuedError.tags,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tlog('dotcom', `Initialise Sentry in ${endPerformanceMeasure()}ms`);\n\t};\n\treturn loadSentry;\n};\n\n/**\n * Set up error handlers to initialise and call Sentry when an error occurs.\n * If no error happens, Sentry is not loaded.\n */\nconst loadSentryOnError = (): void => {\n\ttry {\n\t\tconst loadSentry = loadSentryCreator();\n\n\t\t/**\n\t\t * This is how we lazy load Sentry. We setup custom functions and\n\t\t * listeners to initialise Sentry when an error happens\n\t\t *\n\t\t * Sentry will replace onerror and onunhandledrejection listeners\n\t\t * with its own handlers once initialised\n\t\t *\n\t\t * reportError is replaced by loadSentry\n\t\t */\n\t\twindow.onerror = (message, url, line, column, error) =>\n\t\t\tloadSentry(error);\n\t\twindow.onunhandledrejection = (\n\t\t\tevent: undefined | { reason?: unknown },\n\t\t) => event?.reason instanceof Error && loadSentry(event.reason);\n\t\twindow.guardian.modules.sentry.reportError = (error, feature, tags) => {\n\t\t\tloadSentry(error, feature, tags).catch((e) =>\n\t\t\t\t// eslint-disable-next-line no-console -- fallback to console.error\n\t\t\t\tconsole.error(`loadSentryOnError error: ${String(e)}`),\n\t\t\t);\n\t\t};\n\t} catch (e) {\n\t\t// eslint-disable-next-line no-console -- fallback to console.error\n\t\tconsole.error(`loadSentryOnError error: ${String(e)}`);\n\t}\n};\n\nexport { loadSentryOnError };\n","import { BUILD_VARIANT, dcrJavascriptBundle } from '../../../webpack/bundles';\nimport { loadSentryOnError } from './loadSentry';\n\ntype IsSentryEnabled = {\n\tenableSentryReporting: boolean;\n\tisDev: boolean;\n\tisInBrowserVariantTest: boolean;\n\trandom: number;\n};\n\nconst isSentryEnabled = ({\n\tenableSentryReporting,\n\tisDev,\n\tisInBrowserVariantTest,\n\trandom,\n}: IsSentryEnabled): boolean => {\n\t// We don't send errors on the dev server, or if the enableSentryReporting switch is off\n\tif (isDev || !enableSentryReporting) return false;\n\t// We want to log all errors for users in the bundle variant AB test.\n\t// Please ensure that the test sample rate is low.\n\t// If the sample size of the variant test is > 1% adjust the sample rates for _both_\n\t// the variant and control so they each represent 1% of the overall traffic.\n\t// This will allow a like for like comparison in Sentry.\n\tif (isInBrowserVariantTest) return true;\n\t// Sentry lets you configure sampleRate to reduce the volume of events sent\n\t// but this filter only happens _after_ the library is loaded. The Guardian\n\t// measures page views in the billions so we only want to log 1% of errors that\n\t// happen but if we used sampleRate to do this we'd be needlessly downloading\n\t// Sentry 99% of the time. So instead we just do some math here and use that\n\t// to prevent the Sentry script from ever loading.\n\tif (random <= 99 / 100) return false;\n\treturn true;\n};\n\n/** When stubbed errors are only sent to the console */\nconst stubSentry = (): void => {\n\twindow.guardian.modules.sentry.reportError = (error, feature, tags) => {\n\t\t// eslint-disable-next-line no-console -- fallback to console.error\n\t\tconsole.error(error, feature, tags);\n\t};\n};\n\nexport const sentryLoader = (): Promise<void> => {\n\tconst { switches, isDev, tests } = window.guardian.config;\n\tconst enableSentryReporting = !!switches.enableSentryReporting;\n\tconst isInBrowserVariantTest =\n\t\tBUILD_VARIANT && tests[dcrJavascriptBundle('Variant')] === 'variant';\n\n\tconst canLoadSentry = isSentryEnabled({\n\t\tenableSentryReporting,\n\t\tisDev,\n\t\tisInBrowserVariantTest,\n\t\trandom: Math.random(),\n\t});\n\tcanLoadSentry ? loadSentryOnError() : stubSentry();\n\treturn Promise.resolve();\n};\n\nexport { isSentryEnabled };\n","/**\n * @file Sets the user subscription and ad free cookies\n * This file was migrated from:\n * https://github.com/guardian/commercial/blob/1a429d6be05657f20df4ca909df7d01a5c3d7402/src/lib/user-features.ts\n */\n\nimport { getCookie, setCookie } from '@guardian/libs';\n\nconst timeInDaysFromNow = (daysFromNow: number): string => {\n\tconst tmpDate = new Date();\n\ttmpDate.setDate(tmpDate.getDate() + daysFromNow);\n\treturn tmpDate.getTime().toString();\n};\n\nconst cookieIsExpiredOrMissing = (cookieName: string): boolean => {\n\tconst cookie = getCookie({ name: cookieName });\n\tif (!cookie) return true;\n\tconst expiryTime = parseInt(cookie, 10);\n\tconst timeNow = new Date().getTime();\n\treturn timeNow >= expiryTime;\n};\n\nconst AD_FREE_USER_COOKIE = 'GU_AF1';\n\nconst getAdFreeCookie = (): string | null =>\n\tgetCookie({ name: AD_FREE_USER_COOKIE });\n\nconst adFreeDataIsPresent = (): boolean => {\n\tconst cookieVal = getAdFreeCookie();\n\tif (!cookieVal) return false;\n\treturn !Number.isNaN(parseInt(cookieVal, 10));\n};\n\n/*\n * Set the ad free cookie\n *\n * @param daysToLive - number of days the cookie should be valid\n */\nconst setAdFreeCookie = (daysToLive = 1): void => {\n\tconst expires = new Date();\n\texpires.setMonth(expires.getMonth() + 6);\n\tsetCookie({\n\t\tname: AD_FREE_USER_COOKIE,\n\t\tvalue: expires.getTime().toString(),\n\t\tdaysToLive,\n\t});\n};\n\n/**\n * Check that path is a path-absolute-URL string as described in https://url.spec.whatwg.org/#path-absolute-url-string\n * A path-absolute-URL string is U+002F (/) followed by a path-relative-URL string, for instance `/plop` or `/plop/plop`\n */\nfunction isPathAbsoluteURL(path: string): boolean {\n\treturn !RegExp('^(https?:)?//').exec(path);\n}\n\nconst fetchJson = async (\n\tresource: string,\n\tinit: RequestInit = {},\n): Promise<unknown> => {\n\tif (typeof resource !== 'string') {\n\t\tthrow new Error('First argument should be of type `string`');\n\t}\n\n\tlet path = resource;\n\tif (isPathAbsoluteURL(path)) {\n\t\tpath = window.guardian.config.page.ajaxUrl + resource;\n\t\tinit.mode = 'cors';\n\t}\n\n\tconst resp = await fetch(path, init);\n\tif (resp.ok) {\n\t\tswitch (resp.status) {\n\t\t\tcase 204:\n\t\t\t\treturn {};\n\t\t\tdefault:\n\t\t\t\ttry {\n\t\t\t\t\treturn resp.json();\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Fetch error while requesting ${path}: Invalid JSON response`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t}\n\t}\n\tthrow new Error(`Fetch error while requesting ${path}: ${resp.statusText}`);\n};\n\nconst dates = {\n\t1: '01',\n\t2: '02',\n\t3: '03',\n\t4: '04',\n\t5: '05',\n\t6: '06',\n\t7: '07',\n\t8: '08',\n\t9: '09',\n\t10: '10',\n\t11: '11',\n\t12: '12',\n\t13: '13',\n\t14: '14',\n\t15: '15',\n\t16: '16',\n\t17: '17',\n\t18: '18',\n\t19: '19',\n\t20: '20',\n\t21: '21',\n\t22: '22',\n\t23: '23',\n\t24: '24',\n\t25: '25',\n\t26: '26',\n\t27: '27',\n\t28: '28',\n\t29: '29',\n\t30: '30',\n\t31: '31',\n} as const;\n\nconst months = {\n\t1: '01',\n\t2: '02',\n\t3: '03',\n\t4: '04',\n\t5: '05',\n\t6: '06',\n\t7: '07',\n\t8: '08',\n\t9: '09',\n\t10: '10',\n\t11: '11',\n\t12: '12',\n} as const;\n\ntype LocalDate =\n\t`${number}-${(typeof months)[keyof typeof months]}-${(typeof dates)[keyof typeof dates]}`;\n\n/**\n * This type is manually kept in sync with the Membership API:\n * https://github.com/guardian/members-data-api/blob/a48acdebed6a334ceb4336ece275b9cf9b3d6bb7/membership-attribute-service/app/models/Attributes.scala#L134-L151\n */\ntype UserFeaturesResponse = {\n\tuserId: string;\n\ttier?: string;\n\trecurringContributionPaymentPlan?: string;\n\toneOffContributionDate?: LocalDate;\n\tmembershipJoinDate?: LocalDate;\n\tdigitalSubscriptionExpiryDate?: LocalDate;\n\tpaperSubscriptionExpiryDate?: LocalDate;\n\tguardianWeeklyExpiryDate?: LocalDate;\n\tliveAppSubscriptionExpiryDate?: LocalDate;\n\talertAvailableFor?: string;\n\tshowSupportMessaging: boolean;\n\tcontentAccess: {\n\t\tmember: boolean;\n\t\tpaidMember: boolean;\n\t\trecurringContributor: boolean;\n\t\tdigitalPack: boolean;\n\t\tpaperSubscriber: boolean;\n\t\tguardianWeeklySubscriber: boolean;\n\t};\n};\n\nexport type { UserFeaturesResponse };\n\nexport {\n\tadFreeDataIsPresent,\n\tcookieIsExpiredOrMissing,\n\tfetchJson,\n\tgetAdFreeCookie,\n\tsetAdFreeCookie,\n\ttimeInDaysFromNow,\n};\n","const isBoolean = (_) => {\n  return typeof _ === \"boolean\";\n};\n\nexport { isBoolean };\n","/**\n * @file Sets the user subscription and ad free cookies\n * This file was migrated from:\n * https://github.com/guardian/commercial/blob/1a429d6be05657f20df4ca909df7d01a5c3d7402/src/lib/user-features.ts\n */\n\nimport {\n\tgetCookie,\n\tisBoolean,\n\tisObject,\n\tremoveCookie,\n\tsetCookie,\n} from '@guardian/libs';\nimport {\n\tgetAuthStatus,\n\tgetOptionsHeadersWithOkta,\n\tisUserLoggedInOktaRefactor,\n} from '../../lib/identity';\nimport {\n\tadFreeDataIsPresent,\n\tcookieIsExpiredOrMissing,\n\tfetchJson,\n\tgetAdFreeCookie,\n\tsetAdFreeCookie,\n\ttimeInDaysFromNow,\n} from './user-features-lib';\nimport type { UserFeaturesResponse } from './user-features-lib';\n\nconst USER_FEATURES_EXPIRY_COOKIE = 'gu_user_features_expiry';\nconst ACTION_REQUIRED_FOR_COOKIE = 'gu_action_required_for';\nconst DIGITAL_SUBSCRIBER_COOKIE = 'gu_digital_subscriber';\nconst HIDE_SUPPORT_MESSAGING_COOKIE = 'gu_hide_support_messaging';\nconst AD_FREE_USER_COOKIE = 'GU_AF1';\n\nconst forcedAdFreeMode = !!/[#&]noadsaf(&.*)?$/.exec(window.location.hash);\n\nconst userHasData = () => {\n\tconst cookie =\n\t\tgetAdFreeCookie() ??\n\t\tgetCookie({ name: ACTION_REQUIRED_FOR_COOKIE }) ??\n\t\tgetCookie({ name: USER_FEATURES_EXPIRY_COOKIE }) ??\n\t\tgetCookie({ name: DIGITAL_SUBSCRIBER_COOKIE }) ??\n\t\tgetCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE });\n\treturn !!cookie;\n};\n\nconst validateResponse = (\n\tresponse: unknown,\n): response is UserFeaturesResponse => {\n\treturn (\n\t\tisObject(response) &&\n\t\tisBoolean(response.showSupportMessaging) &&\n\t\tisObject(response.contentAccess) &&\n\t\tisBoolean(response.contentAccess.paidMember) &&\n\t\tisBoolean(response.contentAccess.recurringContributor) &&\n\t\tisBoolean(response.contentAccess.digitalPack)\n\t);\n};\n\nconst persistResponse = (JsonResponse: UserFeaturesResponse) => {\n\tsetCookie({\n\t\tname: USER_FEATURES_EXPIRY_COOKIE,\n\t\tvalue: timeInDaysFromNow(1),\n\t});\n\tsetCookie({\n\t\tname: DIGITAL_SUBSCRIBER_COOKIE,\n\t\tvalue: String(JsonResponse.contentAccess.digitalPack),\n\t});\n\tsetCookie({\n\t\tname: HIDE_SUPPORT_MESSAGING_COOKIE,\n\t\tvalue: String(!JsonResponse.showSupportMessaging),\n\t});\n\n\tremoveCookie({ name: ACTION_REQUIRED_FOR_COOKIE });\n\tif (JsonResponse.alertAvailableFor) {\n\t\tsetCookie({\n\t\t\tname: ACTION_REQUIRED_FOR_COOKIE,\n\t\t\tvalue: JsonResponse.alertAvailableFor,\n\t\t});\n\t}\n\n\tif (JsonResponse.contentAccess.digitalPack) {\n\t\tsetAdFreeCookie(2);\n\t} else if (adFreeDataIsPresent() && !forcedAdFreeMode) {\n\t\tremoveCookie({ name: AD_FREE_USER_COOKIE });\n\t}\n};\n\nconst deleteOldData = (): void => {\n\tremoveCookie({ name: AD_FREE_USER_COOKIE });\n\tremoveCookie({ name: USER_FEATURES_EXPIRY_COOKIE });\n\tremoveCookie({ name: ACTION_REQUIRED_FOR_COOKIE });\n\tremoveCookie({ name: DIGITAL_SUBSCRIBER_COOKIE });\n\tremoveCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE });\n};\n\nconst requestNewData = () => {\n\treturn getAuthStatus()\n\t\t.then((authStatus) =>\n\t\t\tauthStatus.kind === 'SignedInWithCookies' ||\n\t\t\tauthStatus.kind === 'SignedInWithOkta'\n\t\t\t\t? authStatus\n\t\t\t\t: Promise.reject('The user is not signed in'),\n\t\t)\n\t\t.then((signedInAuthStatus) => {\n\t\t\treturn fetchJson(\n\t\t\t\t`${\n\t\t\t\t\twindow.guardian.config.page.userAttributesApiUrl ??\n\t\t\t\t\t'/USER_ATTRIBUTE_API_NOT_FOUND'\n\t\t\t\t}/me`,\n\t\t\t\t{\n\t\t\t\t\tmode: 'cors',\n\t\t\t\t\t...getOptionsHeadersWithOkta(signedInAuthStatus),\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!validateResponse(response)) {\n\t\t\t\t\t\tthrow new Error('invalid response');\n\t\t\t\t\t}\n\t\t\t\t\treturn response;\n\t\t\t\t})\n\t\t\t\t.then(persistResponse)\n\t\t\t\t.catch(() => {\n\t\t\t\t\t// eslint-disable-next-line no-console -- error logging\n\t\t\t\t\tconsole.error('Error fetching user data');\n\t\t\t\t});\n\t\t});\n};\n\nconst featuresDataIsOld = () =>\n\tcookieIsExpiredOrMissing(USER_FEATURES_EXPIRY_COOKIE);\n\nconst isDigitalSubscriber = (): boolean =>\n\tgetCookie({ name: DIGITAL_SUBSCRIBER_COOKIE }) === 'true';\n\nconst userNeedsNewFeatureData = (): boolean =>\n\tfeaturesDataIsOld() || (isDigitalSubscriber() && !adFreeDataIsPresent());\n\nconst userHasDataAfterSignout = async (): Promise<boolean> =>\n\t!(await isUserLoggedInOktaRefactor()) && userHasData();\n\nconst refresh = async (): Promise<void> => {\n\tif ((await isUserLoggedInOktaRefactor()) && userNeedsNewFeatureData()) {\n\t\treturn requestNewData();\n\t} else if ((await userHasDataAfterSignout()) && !forcedAdFreeMode) {\n\t\tdeleteOldData();\n\t}\n\treturn Promise.resolve();\n};\n\nexport { refresh, isDigitalSubscriber };\n","// allows us to define public path dynamically\n// dynamic imports will use this as the base to find their assets\n\nimport { decidePublicPath } from './decidePublicPath';\n\n// https://webpack.js.org/guides/public-path/#on-the-fly\n__webpack_public_path__ = decidePublicPath();\n","/**\n * Determine the path that webpack should use as base for dynamic imports\n *\n * @returns The webpack public path to use\n */\nexport const decidePublicPath = (): string => {\n\tconst isDev = process.env.NODE_ENV === 'development';\n\tconst isLocalHost = window.location.hostname === 'localhost';\n\t// Use relative path if running locally or in CI\n\treturn isDev || isLocalHost\n\t\t? '/assets/'\n\t\t: `${window.guardian.config.frontendAssetsFullURL}assets/`;\n};\n","import { isUndefined } from '@guardian/libs';\nimport { createContext, useContext } from 'react';\nimport type { Config } from '../types/configContext';\n\n/**\n * Context for global, static, immutable values (application configuration)\n * This should not contain anything which will change between re-renders.\n *\n * It is deliberately set with a default context of `undefined` to better\n * surface errors relating to incorrect usage.\n *\n * It is deliberately not exported\n * @see https://kentcdodds.com/blog/how-to-use-react-context-effectively\n */\nconst ConfigContext = createContext<Config | undefined>(undefined);\n\n/**\n * ConfigProvider component should be included at a high level\n * so that lower down components can access the context value\n */\nexport const ConfigProvider = ({\n\tvalue,\n\tchildren,\n}: {\n\tvalue: Config;\n\tchildren: React.ReactNode;\n}) => <ConfigContext.Provider value={value}>{children}</ConfigContext.Provider>;\n\n/**\n * useContext hook for safely fetching application configuration.\n * Ensures that it is used within the relevant Context.Provider\n */\nexport const useConfig = (): Config => {\n\tconst context = useContext(ConfigContext);\n\n\tif (isUndefined(context)) {\n\t\tthrow Error('useConfig must be used within the ConfigContext provider');\n\t}\n\n\treturn context;\n};\n","import { css } from '@emotion/react';\nimport { cmp, onConsent } from '@guardian/libs';\nimport type { ConsentFramework } from '@guardian/libs';\nimport { palette } from '@guardian/source/foundations';\nimport { ButtonLink } from '@guardian/source/react-components';\nimport { useEffect, useState } from 'react';\n\nconst footerLink = css`\n\tcolor: inherit;\n\ttext-decoration: none;\n\tpadding-bottom: 12px;\n\tdisplay: block;\n\tline-height: 19px;\n\n\t:hover {\n\t\ttext-decoration: underline;\n\t\tcolor: ${palette.brandAlt[400]};\n\t}\n`;\n\ntype Props = {\n\textraClasses?: string;\n};\n\n/**\n * A Link/Button that opens the privacy settings modal.\n *\n * ## Why does this need to be an Island?\n *\n * We need to respond to clicks by calling the consent management platform’s\n * privacy settings modal.\n *\n * To prevent this island from creating a distinct network request,\n * we tell webpack to eagerly load it, so it ends up in the entry chunk.\n * @see `eagerlyImportPrivacySettingsLinkIsland`\n */\nexport const PrivacySettingsLink = ({ extraClasses }: Props) => {\n\tconst [framework, setFramework] = useState<ConsentFramework>();\n\n\tuseEffect(() => {\n\t\tvoid onConsent().then((consentState) => {\n\t\t\tsetFramework(consentState.framework ?? undefined);\n\t\t});\n\t}, []);\n\n\tif (!framework) {\n\t\treturn (\n\t\t\t<span css={footerLink} style={{ color: 'transparent' }}>\n\t\t\t\t&nbsp;\n\t\t\t</span>\n\t\t);\n\t}\n\n\treturn (\n\t\t<ButtonLink\n\t\t\tclassName={extraClasses}\n\t\t\tcssOverrides={footerLink}\n\t\t\tdata-link-name=\"privacy-settings\"\n\t\t\tonClick={(event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcmp.showPrivacyManager();\n\t\t\t}}\n\t\t>\n\t\t\t{framework === 'usnat'\n\t\t\t\t? 'California resident – Do Not Sell'\n\t\t\t\t: 'Privacy settings'}\n\t\t</ButtonLink>\n\t);\n};\n","import { getCookie } from '../cookies/getCookie.js';\nimport { setSessionCookie } from '../cookies/setSessionCookie.js';\nimport { isString } from '../isString/isString.js';\nimport { storage } from '../storage/storage.js';\n\nconst KEY = \"GU_geo_country\";\nconst KEY_OVERRIDE = \"gu.geo.override\";\nconst URL = \"https://api.nextgen.guardianapps.co.uk/geolocation\";\nconst COUNTRY_REGEX = /^[A-Z]{2}$/;\nconst isValidCountryCode = (country) => isString(country) && COUNTRY_REGEX.test(country);\nlet locale;\nconst getLocale = async () => {\n  if (locale) {\n    return locale;\n  }\n  const geoOverride = storage.local.get(KEY_OVERRIDE);\n  if (isValidCountryCode(geoOverride)) {\n    return locale = geoOverride;\n  }\n  const stored = getCookie({ name: \"GU_geo_country\" });\n  if (stored && isValidCountryCode(stored)) {\n    return locale = stored;\n  }\n  try {\n    const { country } = await fetch(URL).then(\n      (response) => response.json()\n    );\n    if (isValidCountryCode(country)) {\n      setSessionCookie({ name: KEY, value: country });\n      return locale = country;\n    }\n  } catch (e) {\n  }\n  return null;\n};\n\nexport { getLocale };\n","import { getLocale } from '@guardian/libs';\nimport type { CountryCode } from '@guardian/libs';\n\n/**\n * Generally we see SecurityErrors when a users browser has restrictive privacy settings that prevent access to local storage.\n * We should avoid reporting these errors to Sentry as they're not very useful to us and create a lot of noise.\n */\nconst isSecurityError = (error: unknown) =>\n\terror instanceof Error && error.name === 'SecurityError';\n\n/*\n\tThis method returns the location of the user from guardian/libs getLocale\n\tIt will return fastly's 'GU_geo_country' if it exists,\n\tor an overridden geolocation from 'gu.geo.override' localStorage\n\tor if none of those exists, it will call the geo endpoint to fetch it and set it in `GU_geo_country`\n */\nexport const getLocaleCode = async (): Promise<CountryCode | null> => {\n\treturn getLocale().catch((error) => {\n\t\tif (isSecurityError(error)) return null;\n\n\t\tconsole.log(`Error getting location from libs/getLocale`);\n\t\twindow.guardian.modules.sentry.reportError(error, 'get-country-code');\n\t\treturn null;\n\t});\n};\n","import { ERR_INVALID_COOKIE } from './ERR_INVALID_COOKIE.js';\nimport { getCookieValues } from './getCookieValues.js';\nimport { getDomainAttribute } from './getDomainAttribute.js';\nimport { isValidCookie } from './isValidCookie.js';\nimport { memoizedCookies } from './memoizedCookies.js';\n\nconst setSessionCookie = ({\n  name,\n  value\n}) => {\n  if (!isValidCookie(name, value)) {\n    throw new Error(`${ERR_INVALID_COOKIE} ${name}=${value}`);\n  }\n  document.cookie = `${name}=${value}; path=/;${getDomainAttribute()}`;\n  if (memoizedCookies.has(name)) {\n    const [value2] = getCookieValues(name);\n    if (value2) {\n      memoizedCookies.set(name, value2);\n    }\n  }\n};\n\nexport { setSessionCookie };\n","import type { IdentityAuthState } from './@types/OAuth';\nimport type { CustomClaims } from './@types/Token';\nimport type { Emitter, EventCallback } from './emitter';\nimport type { TokenManager } from './tokenManager';\n\n/**\n * @class AuthStateManager\n * @description Manages the authentication state of the user\n */\nexport class AuthStateManager<\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n> {\n\t#authState: IdentityAuthState<AC, IC>;\n\t#emitter: Emitter;\n\t#tokenManager: TokenManager<AC, IC>;\n\n\tconstructor(emitter: Emitter, tokenManager: TokenManager<AC, IC>) {\n\t\tthis.#emitter = emitter;\n\t\tthis.#tokenManager = tokenManager;\n\n\t\t// set default auth state, will be updated if there are existing tokens in storage\n\t\tthis.#authState = {\n\t\t\taccessToken: undefined,\n\t\t\tidToken: undefined,\n\t\t\tisAuthenticated: false,\n\t\t};\n\n\t\t// on init, check if there are existing tokens in storage, and if so, update the auth state\n\t\tthis.#updateAuthState();\n\n\t\t// subscribe to token manager events on addition\n\t\tthis.#emitter.on('added', () => {\n\t\t\tthis.#updateAuthState();\n\t\t});\n\n\t\t// subscribe to token manager events on removal\n\t\tthis.#emitter.on('removed', () => {\n\t\t\tthis.#updateAuthState();\n\t\t});\n\n\t\t// subscribe to token manager events on storage\n\t\tthis.#emitter.on('storage', () => {\n\t\t\tthis.#updateAuthState();\n\t\t});\n\t}\n\n\t/**\n\t * @name updateAuthState\n\t * @description Updates the auth state based on the tokens in storage\n\t * @returns void\n\t */\n\t#updateAuthState() {\n\t\t// check if there are existing tokens in storage\n\t\tconst tokens = this.#tokenManager.getTokensSync();\n\n\t\t// if there are tokens, set the auth state\n\t\tif (tokens) {\n\t\t\tthis.#authState = {\n\t\t\t\taccessToken: tokens.accessToken,\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\tisAuthenticated: true,\n\t\t\t};\n\t\t} else {\n\t\t\t// if there are no tokens, set the auth state to false\n\t\t\tthis.#authState = {\n\t\t\t\taccessToken: undefined,\n\t\t\t\tidToken: undefined,\n\t\t\t\tisAuthenticated: false,\n\t\t\t};\n\t\t}\n\n\t\t// emit the auth state change\n\t\tthis.#emitter.emit('authStateChange', this.#authState);\n\t}\n\n\t/**\n\t * @name getAuthState\n\t * @description Returns the current auth state\n\t * @returns IdentityAuthState\n\t */\n\tpublic getAuthState(): IdentityAuthState<AC, IC> {\n\t\treturn this.#authState;\n\t}\n\n\t/**\n\t * @name subscribe\n\t * @description Subscribes to auth state changes\n\t * @param handler\t- The EventCallback to use to subscribe\n\t */\n\tpublic subscribe(handler: EventCallback): void {\n\t\tthis.#emitter.on('authStateChange', handler);\n\t}\n\n\t/**\n\t * @name unsubscribe\n\t * @description Unsubscribes from auth state changes\n\t * @param handler\t- The EventCallback to used to subscribe\n\t */\n\tpublic unsubscribe(handler: EventCallback): void {\n\t\tthis.#emitter.off('authStateChange', handler);\n\t}\n}\n","import { getCookie } from '@guardian/libs';\nimport type {\n\tIdentityAuthState,\n\tRequiredIdentityAuthOptions,\n} from './@types/OAuth';\nimport type { AuthStateManager } from './authState';\nimport type { Emitter } from './emitter';\n\n/**\n * @class AutoRenewService\n * @description Managing the auto renewal of tokens, if enabled\n */\nexport class AutoRenewService {\n\t#options: RequiredIdentityAuthOptions;\n\t#emitter: Emitter;\n\t#authStateManager: AuthStateManager;\n\tstarted = false;\n\n\t#renewAtTimeoutId: number | undefined;\n\n\tconstructor(\n\t\toptions: RequiredIdentityAuthOptions,\n\t\temitter: Emitter,\n\t\tauthStateManager: AuthStateManager,\n\t) {\n\t\tthis.#options = options;\n\t\tthis.#emitter = emitter;\n\t\tthis.#authStateManager = authStateManager;\n\n\t\t// if there is a storage event, clear the timeout, and start a new one\n\t\tthis.#emitter.on('storage', () => {\n\t\t\tthis.#clearRenewAtTimeout();\n\t\t\tthis.#handleAuthStateChange();\n\t\t});\n\t}\n\n\t/**\n\t * @name clearRenewAtTimeout\n\t * @description Clears the timeout for renewing the access token, if it exists\n\t */\n\t#clearRenewAtTimeout() {\n\t\tif (this.#renewAtTimeoutId !== undefined) {\n\t\t\twindow.clearTimeout(this.#renewAtTimeoutId);\n\t\t\tthis.#renewAtTimeoutId = undefined;\n\t\t}\n\t}\n\n\t/**\n\t * @name setRenewAtTimeout\n\t * @description Sets the timeout for renewing the access token based on the expiry time and the grace period\n\t * @param expiresAt The time at which the access token expires\n\t * @returns The timeout id\n\t */\n\t#setRenewAtTimeout(expiresAt: number) {\n\t\t// get the time now\n\t\tconst now = Date.now();\n\n\t\t// calculate the time at which the access token should be renewed\n\t\tconst renewAt = (expiresAt - this.#options.renewGracePeriod) * 1000;\n\n\t\t// calculate the timeout duration\n\t\tconst timeout = renewAt - now;\n\n\t\t// set the timeout\n\t\tthis.#renewAtTimeoutId = window.setTimeout(() => {\n\t\t\t// if the document is hidden, then we need to wait for the visibility change event before renewing the token\n\t\t\tif (window.document.visibilityState === 'hidden') {\n\t\t\t\t// if the document is hidden, then wait for the visibility change event\n\t\t\t\twindow.document.addEventListener(\n\t\t\t\t\t'visibilitychange',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (window.document.visibilityState === 'visible') {\n\t\t\t\t\t\t\t// now that the document is visible, we first check if any other tabs have renewed the token already\n\t\t\t\t\t\t\tconst authState = this.#authStateManager.getAuthState();\n\n\t\t\t\t\t\t\t// if the user is authenticated, but there is less than the grace period left on the token, then we should renew it\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tauthState.isAuthenticated &&\n\t\t\t\t\t\t\t\tauthState.accessToken.expiresAt -\n\t\t\t\t\t\t\t\t\tthis.#options.renewGracePeriod <\n\t\t\t\t\t\t\t\t\tMath.floor(Date.now() / 1000)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// if the token has not been renewed, emit the renew event\n\t\t\t\t\t\t\t\tthis.#emitter.emit('renew');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// if the authState is not authenticated, and there is a GU_U cookie, then the token has not been renewed and we can renew it\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!authState.isAuthenticated &&\n\t\t\t\t\t\t\t\t!!getCookie({ name: 'GU_U', shouldMemoize: true })\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// if the token has not been renewed, emit the renew event\n\t\t\t\t\t\t\t\tthis.#emitter.emit('renew');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tonce: true, // only listen for the event once\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// if the document is not hidden, then we can renew the token\n\t\t\t\t// emit the renew event, which will trigger the renew method in the token manager\n\t\t\t\tthis.#emitter.emit('renew');\n\t\t\t}\n\n\t\t\t// clear the timeout id once the timeout has been triggered\n\t\t\tthis.#renewAtTimeoutId = undefined;\n\t\t}, timeout);\n\t}\n\n\t/**\n\t * @name handleAuthStateChange\n\t * @description Listens for changes to the auth state and sets the timeout for renewing the access token if required\n\t * @param state - The IdentityAuthState\n\t */\n\t#handleAuthStateChange(state?: IdentityAuthState) {\n\t\t// clear the timeout if it exists\n\t\tthis.#clearRenewAtTimeout();\n\n\t\t// if the state was not passed in, get the state from the auth state manager\n\t\tconst authState: IdentityAuthState =\n\t\t\tstate ?? this.#authStateManager.getAuthState();\n\n\t\t// if the user is authenticated, set the timeout for renewing the access token\n\t\tif (authState.isAuthenticated) {\n\t\t\tthis.#setRenewAtTimeout(authState.accessToken.expiresAt);\n\t\t}\n\t}\n\n\t/**\n\t * @name start\n\t * @description Starts the auto renewal service if autoRenew is enabled\n\t */\n\tstart() {\n\t\tif (this.#options.autoRenew && !this.started) {\n\t\t\t// set the started flag to true\n\t\t\tthis.started = true;\n\n\t\t\t// listen for auth state changes\n\t\t\tthis.#emitter.on('authStateChange', (state: IdentityAuthState) =>\n\t\t\t\tthis.#handleAuthStateChange(state),\n\t\t\t);\n\n\t\t\t// handle the auth state change on start\n\t\t\tthis.#handleAuthStateChange();\n\t\t}\n\t}\n}\n","/** @deprecated – favour `isOneOf` from `@guardian/libs` */\nexport const guard =\n\t<T extends readonly unknown[]>(array: T) =>\n\t(value: unknown): value is (typeof array)[number] =>\n\t\tarray.includes(value);\n\n/** @deprecated favour `OneOf` from `@guardian/libs` */\nexport type Guard<T extends (value: unknown) => value is unknown> = T extends (\n\tvalue: unknown,\n) => value is infer G\n\t? G\n\t: never;\n","import { guard } from './guard';\nimport type { Guard } from './guard';\nimport type { AccessToken, CustomClaims, IDToken } from './Token';\n\n/**\n * Defines the `profile` endpoint URL (Identity/Okta endpoint)\n */\n// type of valid domains\ntype GuardianDomain = 'theguardian' | 'code.dev-theguardian' | 'thegulocal';\n// list of valid profile urls\nconst profileUrls = [\n\t'https://profile.theguardian.com',\n\t'https://profile.code.dev-theguardian.com',\n\t'https://profile.thegulocal.com',\n] as const satisfies ReadonlyArray<`https://profile.${GuardianDomain}.com`>;\n\n// type guard for profile urls\nexport const isProfileUrl = guard(profileUrls);\n\n// type for profile urls\nexport type ProfileUrl = Guard<typeof isProfileUrl>;\n\n/**\n * Defines the options that are required to configure the IdentityAuth\n * Ask the Identity team for the values to use for your app.\n *\n * https://developer.okta.com/docs/reference/api/oidc/\n *\n * @param clientId - The client ID of your app\n * @param issuer - The issuer of the tokens\n * @param scopes - The scopes that your app requires\n * @param redirectUri - The redirect URI of your app\n * @param autoRenew - Whether to automatically renew the tokens, defaults to `true`\n * @param renewGracePeriod - The time in seconds before the access token expires to renew the token, defaults to 60 seconds\n * @param idCookieSessionRefresh - If switched on (set to `true`, ), will refresh the okta session and identity cookie (GU_U), if required (once every 30 days), should be based on the id-cookie-refresh (idCookieRefresh) switch if being supplied by theguardian.com, defaults to `false`\n * @param oauthTimeout - The time in milliseconds to wait for the OAuth2 authorization code flow to complete, defaults to 30 seconds (30000 milliseconds)\n * @param maxClockSkew - The maximum time drift in seconds between the client and server, defaults to 300 seconds (5 minutes), based on the default maximum tolerance of the Kerberos protocol\n * @param strictClockSkewCheck - If switched on (set to `true`), will throw an error if the clock skew is greater than the `maxClockSkew`, defaults to `false`\n */\nexport interface IdentityAuthOptions {\n\tclientId: string;\n\tissuer: `${ProfileUrl}/oauth2/${string}`;\n\tscopes: ['openid', 'profile', ...string[]];\n\tredirectUri: string;\n\tautoRenew?: boolean;\n\trenewGracePeriod?: number;\n\tidCookieSessionRefresh?: boolean;\n\toauthTimeout?: number;\n\tmaxClockSkew?: number;\n\tstrictClockSkewCheck?: boolean;\n}\n\n/**\n * Defines the options that are required to configure the IdentityAuth\n */\nexport type RequiredIdentityAuthOptions = Required<IdentityAuthOptions>;\n\n/**\n * Defines the state of the IdentityAuth instance when not authenticated.\n */\nexport type IdentityAuthStateNotAuthenticated = {\n\taccessToken: undefined;\n\tidToken: undefined;\n\tisAuthenticated: false;\n};\n\n/**\n * Defines the state of the IdentityAuth instance when authenticated.\n */\nexport type IdentityAuthStateAuthenticated<\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n> = {\n\taccessToken: AccessToken<AC>;\n\tidToken: IDToken<IC>;\n\tisAuthenticated: true;\n};\n\n/**\n * Defines the state of the IdentityAuth instance.\n *\n * `isAuthenticated` - `true` when access and id token are present, `false` otherwise\n * `accessToken` - the access token, `undefined` if not authenticated\n * `idToken` - the id token, `undefined` if not authenticated\n */\nexport type IdentityAuthState<\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n> = IdentityAuthStateNotAuthenticated | IdentityAuthStateAuthenticated<AC, IC>;\n\n/**\n * Parameter required for the OAuth2 authorization code flow, /authorize endpoint\n *\n * https://developer.okta.com/docs/reference/api/oidc/#authorize\n *\n * In our case specifically set up for:\n * \t- Authorization Code Flow with PKCE\n * \t- Okta Post Message (iframe) response mode\n */\nexport interface AuthorizeParams extends Record<string, string> {\n\tclient_id: string;\n\tcode_challenge: string;\n\tcode_challenge_method: 'S256';\n\tnonce: string;\n\tprompt: 'none';\n\tredirect_uri: string;\n\tresponse_type: 'code';\n\tresponse_mode: 'okta_post_message';\n\tscope: string;\n\tstate: string;\n}\n\n/**\n * Parameter required for the OAuth2 authorization code flow, /token endpoint\n *\n * https://developer.okta.com/docs/reference/api/oidc/#token\n *\n * In our case specifically set up for:\n * \t- Authorization Code Flow with PKCE\n */\nexport interface TokenParams extends Record<string, string> {\n\tclient_id: string;\n\tcode: string;\n\tcode_verifier: string;\n\tgrant_type: 'authorization_code';\n\tredirect_uri: string;\n}\n\n/**\n * Defines the URLs available for the OAuth2 authorization code flow\n *\n * https://developer.okta.com/docs/reference/api/oidc/#endpoints\n */\nexport interface OAuthUrls {\n\tauthorizeUrl: `${IdentityAuthOptions['issuer']}/v1/authorize`;\n\ttokenUrl: `${IdentityAuthOptions['issuer']}/v1/token`;\n\tkeysUrl: `${IdentityAuthOptions['issuer']}/v1/keys`;\n}\n\n/**\n * Defines the response from the OAuth2 /authorize endpoint\n *\n * https://developer.okta.com/docs/reference/api/oidc/#postmessage-data-object\n * https://developer.okta.com/docs/reference/api/oidc/#response-properties\n */\nexport interface OAuthAuthorizeResponse {\n\tcode: string;\n\tstate: string;\n}\n\n/**\n * Defines the response from the OAuth2 /authorize endpoint when an error occurs\n *\n * https://developer.okta.com/docs/reference/api/oidc/#postmessage-data-object\n * https://developer.okta.com/docs/reference/api/oidc/#response-properties\n */\nexport interface OAuthAuthorizeResponseError {\n\tstate: string;\n\terror: string;\n\terror_description: string;\n}\n\n/**\n * Defines the response from the OAuth2 /token endpoint\n *\n * https://developer.okta.com/docs/reference/api/oidc/#response-properties-4\n */\nexport interface OAuthTokenResponse {\n\taccess_token: string;\n\tid_token: string;\n\texpires_in: number;\n\tscope: string;\n\ttoken_type: string;\n}\n\n/**\n * Defines the response from the OAuth2 /token endpoint when an error occurs\n *\n * https://developer.okta.com/docs/reference/api/oidc/#response-properties-4\n */\nexport interface OAuthTokenResponseError {\n\terror: string;\n\terror_description: string;\n}\n","/**\n * @name OAuthError\n * @description Error thrown when an OAuth error occurs\n *\n * @param error - The error object\n * @param error.error - The error string, usually the `error` query param, but can be set to a custom error string\n * @param error.error_description - The error description, usually the `error_description` query param, but can be set to a custom error description string\n * @param error.message - The error message\n * @param error.status - The error status code\n */\nexport class OAuthError extends Error {\n\terror: string;\n\terror_description: string;\n\n\tconstructor(error: {\n\t\terror: string;\n\t\terror_description: string;\n\t\tmessage?: string;\n\t\tstatus?: number;\n\t}) {\n\t\tsuper(error.message);\n\t\tthis.error = error.error;\n\t\tthis.error_description = error.error_description;\n\t\tthis.name = 'OAuthError';\n\t}\n}\n","import { getCookie, storage } from '@guardian/libs';\nimport type { IdentityAuthOptions, ProfileUrl } from './@types/OAuth';\nimport { isProfileUrl } from './@types/OAuth';\nimport { OAuthError } from './error';\n\n// 30 days in milliseconds, used to determine if the lastRefresh value is older than 30 days.\nconst days30InMillis: number = 1000 * 60 * 60 * 24 * 30;\n\n// redirect the user to the /signin/refresh endpoint which will refresh the okta session and GU_U cookie\n// and then redirect the user back to the returnUrl, which should be the current page the user is on\nconst redirectToRefreshEndpoint = (\n\tprofileUrl: ProfileUrl,\n\treturnUrl: string,\n): void => {\n\tconst endpoint = `${profileUrl}/signin/refresh?returnUrl=${returnUrl}`;\n\twindow.location.replace(endpoint);\n};\n\n// check if the lastRefresh value is valid and is older than 30 days\nconst shouldRefreshCookie = (\n\tlastRefresh: unknown,\n\tcurrentTime: number,\n): boolean => {\n\t// `!!Number()` returns `false` for `false`, `null`, `undefined`, `0`, and non-numeric strings.\n\t// We do this because `lastRefresh` can be any type or value and we only want to proceed with\n\t// the rest of the check if it's a number.\n\tconst lastRefreshIsValid = !!Number(lastRefresh);\n\tif (!lastRefreshIsValid) {\n\t\t// We should refresh if we don't have a valid lastRefresh value.\n\t\treturn true;\n\t}\n\n\t// We should refresh if the lastRefresh value is older than 30 days.\n\treturn currentTime - Number(lastRefresh) > days30InMillis;\n};\n\n/**\n * @name cookieRefreshIfRequired\n * @description Refreshes the okta session and GU_U cookie if required, by redirecting the user to the /signin/refresh endpoint, if the GU_U cookie exists, and the lastRefresh value is invalid or older than 30 days\n * @param enabled - Determines if this feature is enabled\n * @param profileUrl - The profile URL of the Identity/Okta\n */\nexport const cookieRefreshIfRequired = (\n\tenabled: boolean,\n\tissuer: IdentityAuthOptions['issuer'],\n): void => {\n\tconst profileUrl = issuer.split('/oauth2')[0];\n\n\tif (!isProfileUrl(profileUrl)) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_issuer',\n\t\t\terror_description: `The issuer, ${issuer}, does not match the expected format.`,\n\t\t});\n\t}\n\n\tconst lastRefreshKey = 'identity.lastRefresh';\n\tif (\n\t\tenabled &&\n\t\tstorage.local.isAvailable() &&\n\t\tgetCookie({ name: 'GU_U', shouldMemoize: true })\n\t) {\n\t\tconst currentTime: number = new Date().getTime();\n\t\t// The storage API could return any type handled by JSON.parse, so\n\t\t// we will assume the type is 'unknown' and attempt to parse the value into\n\t\t// a number in the shouldRefreshCookie function.\n\t\t// storage.local.get will return null in two cases: if the key is missing,\n\t\t// or if the value has expired.\n\t\tconst lastRefresh: unknown = storage.local.get(lastRefreshKey);\n\t\tif (shouldRefreshCookie(lastRefresh, currentTime)) {\n\t\t\t// Set the value in localStorage to expire in 30 days.\n\t\t\tconst newExpiry = currentTime + days30InMillis;\n\t\t\tstorage.local.set(lastRefreshKey, currentTime, newExpiry);\n\t\t\t// we only refresh the okta session and GU_U cookie, users with only an IDAPI session will\n\t\t\t// eventually be logged out by the IDAPI cookie expiry\n\t\t\tredirectToRefreshEndpoint(\n\t\t\t\tprofileUrl,\n\t\t\t\tencodeURIComponent(document.location.href),\n\t\t\t);\n\t\t}\n\t}\n};\n","// eslint-disable-next-line @typescript-eslint/ban-types -- Function can be any function callback type\nexport type EventCallback = Function;\n\ntype Event = {\n\tfn: EventCallback;\n\tctx?: unknown;\n};\n\nexport type EventName =\n\t| 'added'\n\t| 'authStateChange'\n\t| 'removed'\n\t| 'renew'\n\t| 'storage';\n\n/**\n * @class Emitter\n * @description A simple event emitter, based on TinyEmitter (https://github.com/scottcorgan/tiny-emitter)\n *\n * Made this class to avoid importing the entire tiny-emitter package, and only use the parts we need.\n */\nexport class Emitter {\n\t// List of all events\n\t#events: Record<string, Event[]>;\n\n\tconstructor() {\n\t\tthis.#events = {};\n\t}\n\n\t/**\n\t * @name on\n\t * @description Used to subscribe to an event by name\n\t *\n\t * @param name - The name of the event to subscribe to\n\t * @param callback - The callback to run when the event is emitted\n\t * @param ctx - The context to run the callback in\n\t * @returns this - The emitter for chaining purposes\n\t */\n\tpublic on(name: EventName, callback: EventCallback, ctx?: unknown): this {\n\t\t// get the events object\n\t\tconst events = this.#events;\n\n\t\t// see if an event array already exists for this event name, if not create one\n\t\tconst eventArr = events[name] ?? (events[name] = []);\n\n\t\t// push the callback and context to the array\n\t\t// so that when the event is emitted, the callback can be run\n\t\teventArr.push({\n\t\t\tfn: callback,\n\t\t\tctx,\n\t\t});\n\n\t\t// return the emitter for chaining purposes\n\t\treturn this;\n\t}\n\n\t/**\n\t * @name off\n\t * @description Used to unsubscribe from an event by name\n\t *\n\t * @param name - The name of the event to unsubscribe from\n\t * @param callback - The callback to unsubscribe\n\t * @returns this - The emitter for chaining purposes\n\t */\n\tpublic off(name: EventName, callback?: EventCallback): this {\n\t\t// get the events object\n\t\tconst events = this.#events;\n\t\t// get the event array for the event name\n\t\tconst eventArr = events[name];\n\t\t// create an array to hold the current live events\n\t\tconst liveEvents: Event[] = [];\n\n\t\t// if there is an event array, filter out the callback\n\t\tif (eventArr && callback) {\n\t\t\tliveEvents.push(...eventArr.filter((event) => event.fn !== callback));\n\t\t}\n\n\t\t// if there are live events, set them to the event name, otherwise delete the event name\n\t\tliveEvents.length ? (events[name] = liveEvents) : delete events[name];\n\n\t\t// return the emitter for chaining purposes\n\t\treturn this;\n\t}\n\n\t/**\n\t * @name emit\n\t * @description Used to emit an event by name\n\t *\n\t * @param name - The name of the event to emit\n\t * @param data - The data to pass to the callback\n\t * @returns this - The emitter for chaining purposes\n\t */\n\tpublic emit(name: EventName, ...data: unknown[]): this {\n\t\t// get the event array for the event name, if it exists\n\t\tconst eventArr = (this.#events[name] ?? []).slice();\n\n\t\t// loop through the event array and run the callback for each event\n\t\teventArr.forEach((event) => {\n\t\t\tevent.fn.apply(event.ctx, data);\n\t\t});\n\n\t\t// return the emitter for chaining purposes\n\t\treturn this;\n\t}\n}\n","// Provides functions for generating random strings, hashes, and encoding/decoding strings\n\n// Converts a decimal number to a hexadecimal number\nexport const dec2hex = (dec: number) => {\n\tconst hex = dec.toString(16);\n\treturn '0'.substring(0, 2 - hex.length) + hex;\n};\n\n// Returns a random hexadecimal string of a given length\nexport const getRandomString = (length: number) => {\n\tconst arr = new Uint8Array(Math.ceil(length / 2));\n\twindow.crypto.getRandomValues(arr);\n\tconst str = Array.from(arr, dec2hex).join('');\n\treturn str.slice(0, length);\n};\n\n// generates a SHA256 hash of a string\nexport const generateSha256Hash = async (str: string) => {\n\tconst buffer = new TextEncoder().encode(str);\n\tconst hashBuffer = await window.crypto.subtle.digest('SHA-256', buffer);\n\tconst hashArray = Array.from(new Uint8Array(hashBuffer));\n\tconst hash = String.fromCharCode.apply(\n\t\tnull,\n\t\tnew Uint8Array(hashArray) as unknown as number[],\n\t);\n\n\treturn hash;\n};\n\n// Returns a code verifier string of length 128, which is the maximum length allowed\n// used for Authorization Code Flow for the PKCE challenge\nexport const generateCodeVerifier = () => getRandomString(128);\n\n// Generates a code challenge string from a code verifier string\n// used for Authorization Code Flow for the PKCE challenge\n// The code challenge is a base64url encoded SHA256 hash of the code verifier\nexport const generateCodeChallenge = async (codeVerifier: string) => {\n\t// generate SHA256 hash from code verifier\n\tconst hash = await generateSha256Hash(codeVerifier);\n\n\t// convert hash to base64url string\n\tconst base64url = base64UrlEncode(hash);\n\n\treturn base64url;\n};\n\n// Converts a base64url string to a UTF-8 string\nexport const base64UrlToString = (base64Url: string): string => {\n\t// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\n\tlet base64 = base64UrlToBase64(base64Url);\n\t// add padding if needed\n\tswitch (base64.length % 4) {\n\t\tcase 0:\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tbase64 += '==';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tbase64 += '=';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Not a valid Base64Url');\n\t}\n\t// decode base64 string to a UTF-8 string\n\tconst utf8str = window.atob(base64);\n\n\ttry {\n\t\t// decode any URI-encoded UTF-8 characters\n\t\treturn decodeURIComponent(window.escape(utf8str));\n\t} catch (e) {\n\t\t// if there was an error, just return the UTF-8 string\n\t\treturn utf8str;\n\t}\n};\n\n// Converts a UTF-8 string to a Uint8Array buffer\nexport const stringToBuffer = (str: string) => {\n\tconst buffer = new Uint8Array(str.length);\n\tfor (let i = 0; i < str.length; i++) {\n\t\tbuffer[i] = str.charCodeAt(i);\n\t}\n\treturn buffer;\n};\n\n// Converts a base64url string to a \"standard\" base64 string\nexport const base64UrlToBase64 = (base64Url: string) =>\n\tbase64Url.replace(/-/g, '+').replace(/_/g, '/');\n\n// Converts a \"normal\" string to a base64url string\nexport const base64UrlEncode = (str: string) =>\n\twindow.btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n","/* eslint-disable @typescript-eslint/no-unnecessary-condition -- we're doing type guards on two different types */\n\nimport { isNonNullable } from '@guardian/libs';\nimport type {\n\tAuthorizeParams,\n\tOAuthAuthorizeResponse,\n\tOAuthAuthorizeResponseError,\n\tOAuthTokenResponse,\n\tOAuthTokenResponseError,\n\tOAuthUrls,\n\tRequiredIdentityAuthOptions,\n\tTokenParams,\n} from './@types/OAuth';\nimport type {\n\tAccessToken,\n\tAccessTokenClaims,\n\tCustomClaims,\n\tIDToken,\n\tIDTokenClaims,\n\tJWK,\n\tJWKS,\n\tJWTHeader,\n\tJWTObject,\n\tJWTPayload,\n\tTokenResponse,\n\tTokens,\n} from './@types/Token';\nimport {\n\tbase64UrlEncode,\n\tbase64UrlToString,\n\tgenerateCodeChallenge,\n\tgenerateCodeVerifier,\n\tgenerateSha256Hash,\n\tgetRandomString,\n\tstringToBuffer,\n} from './crypto';\nimport { OAuthError } from './error';\n\n/**\n * @name isAccessTokenClaims\n * @description Type guard for AccessTokenClaims\n *\n * @param claims - the claims to check\n * @returns\t{boolean} - true if claims is an AccessTokenClaims object\n */\nconst isAccessTokenClaims = (claims: unknown): claims is AccessTokenClaims => {\n\tconst maybeClaims = claims as AccessTokenClaims;\n\treturn (\n\t\tisNonNullable(maybeClaims) &&\n\t\tmaybeClaims.aud !== undefined &&\n\t\tmaybeClaims.auth_time !== undefined &&\n\t\tmaybeClaims.cid !== undefined &&\n\t\tmaybeClaims.email_validated !== undefined &&\n\t\tmaybeClaims.exp !== undefined &&\n\t\tmaybeClaims.iat !== undefined &&\n\t\tmaybeClaims.identity_username !== undefined &&\n\t\tmaybeClaims.iss !== undefined &&\n\t\tmaybeClaims.jti !== undefined &&\n\t\tmaybeClaims.legacy_identity_id !== undefined &&\n\t\tmaybeClaims.scp !== undefined &&\n\t\tmaybeClaims.sub !== undefined &&\n\t\tmaybeClaims.uid !== undefined &&\n\t\tmaybeClaims.ver !== undefined\n\t);\n};\n\n/**\n * @name isAccessToken\n * @description Type guard for AccessToken\n *\n * @param token - the token to check\n * @returns\t{boolean} - true if token is an AccessToken object\n */\nexport const isAccessToken = (token: unknown): token is AccessToken => {\n\tconst maybeToken = token as AccessToken;\n\treturn (\n\t\tisNonNullable(maybeToken) &&\n\t\tmaybeToken.accessToken !== undefined &&\n\t\tmaybeToken.expiresAt !== undefined &&\n\t\tmaybeToken.scopes !== undefined &&\n\t\tmaybeToken.tokenType !== undefined &&\n\t\tisAccessTokenClaims(maybeToken.claims)\n\t);\n};\n\n/**\n * @name isIDTokenClaims\n * @description Type guard for IDTokenClaims\n *\n * @param claims - the claims to check\n * @returns\t{boolean} - true if claims is an IDTokenClaims object\n */\nconst isIDTokenClaims = (claims: unknown): claims is IDTokenClaims => {\n\tconst maybeClaims = claims as IDTokenClaims;\n\treturn (\n\t\tisNonNullable(maybeClaims) &&\n\t\tmaybeClaims.amr !== undefined &&\n\t\tmaybeClaims.at_hash !== undefined &&\n\t\tmaybeClaims.aud !== undefined &&\n\t\tmaybeClaims.auth_time !== undefined &&\n\t\tmaybeClaims.exp !== undefined &&\n\t\tmaybeClaims.iat !== undefined &&\n\t\tmaybeClaims.identity_username !== undefined &&\n\t\tmaybeClaims.idp !== undefined &&\n\t\tmaybeClaims.iss !== undefined &&\n\t\tmaybeClaims.jti !== undefined &&\n\t\tmaybeClaims.legacy_identity_id !== undefined &&\n\t\tmaybeClaims.name !== undefined &&\n\t\tmaybeClaims.nonce !== undefined &&\n\t\tmaybeClaims.preferred_username !== undefined &&\n\t\tmaybeClaims.sub !== undefined &&\n\t\tmaybeClaims.user_groups !== undefined &&\n\t\tmaybeClaims.ver !== undefined\n\t);\n};\n\n/**\n * @name isIDToken\n * @description Type guard for IDToken\n *\n * @param token - the token to check\n * @returns\t{boolean} - true if token is an IDToken object\n */\nexport const isIDToken = (token: unknown): token is IDToken => {\n\tconst maybeToken = token as IDToken;\n\treturn (\n\t\tisNonNullable(maybeToken) &&\n\t\tmaybeToken.expiresAt !== undefined &&\n\t\tmaybeToken.idToken !== undefined &&\n\t\tmaybeToken.scopes !== undefined &&\n\t\tisIDTokenClaims(maybeToken.claims)\n\t);\n};\n\n/**\n * @name isOAuthAuthorizeResponseError\n * @description Type guard for OAuthAuthorizeResponseError\n *\n * Determines if the response is an OAuthAuthorizeResponseError,\n * i.e if it has the error, error_description and state properties\n *\n * @param response OAuthAuthorizeResponse | OAuthAuthorizeResponseError\n * @returns boolean - true if the response is an OAuthAuthorizeResponseError\n */\nconst isOAuthAuthorizeResponseError = (\n\tresponse: OAuthAuthorizeResponse | OAuthAuthorizeResponseError,\n): response is OAuthAuthorizeResponseError => {\n\tconst maybeResponse = response as OAuthAuthorizeResponseError;\n\treturn (\n\t\tisNonNullable(maybeResponse) &&\n\t\tmaybeResponse.error !== undefined &&\n\t\tmaybeResponse.error_description !== undefined &&\n\t\tmaybeResponse.state !== undefined\n\t);\n};\n\n/**\n * @name isOAuthTokenResponseError\n * @description Type guard for OAuthTokenResponseError\n *\n * Determines if the response is an OAuthTokenResponseError,\n * i.e if it has the error and error_description properties\n *\n * @param response OAuthTokenResponse | OAuthTokenResponseError\n * @returns boolean - true if the response is an OAuthTokenResponseError\n */\nconst isOAuthTokenResponseError = (\n\tresponse: OAuthTokenResponse | OAuthTokenResponseError,\n): response is OAuthTokenResponseError => {\n\tconst maybeResponse = response as OAuthTokenResponseError;\n\treturn (\n\t\tisNonNullable(maybeResponse) &&\n\t\tmaybeResponse.error !== undefined &&\n\t\tmaybeResponse.error_description !== undefined\n\t);\n};\n\n/**\n * @name calculateClockSkew\n * @description Calculates the clock skew between the current time and the iat claim in seconds\n *\n * @param now `number` - current time in seconds to compare against the iat claim\n * @param token `string` - raw JWT token\n * @returns `number` - the clock skew in seconds\n */\nconst calculateClockSkew = (now: number, token: string): number => {\n\t// decode the token and extract the iat claim\n\tconst { iat } = decodeToken(token).payload;\n\n\t// check that the iat claim is present\n\tif (!iat) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'iat claim is missing from token',\n\t\t});\n\t}\n\n\t// return the difference between the current time and the iat claim\n\treturn now - iat;\n};\n\n/**\n * @name decodeToken\n * @description Decodes a JWT token into its parts, i.e header, payload and signature\n *\n * @param token `string` - JWT token\n * @returns JWTObject - object containing the decoded token parts\n */\nconst decodeToken = <T extends CustomClaims = CustomClaims>(\n\ttoken: string,\n): JWTObject<T> => {\n\t// attempt to split the token into its parts\n\tconst [headerStr, payloadStr, signature] = token.split('.');\n\n\ttry {\n\t\t// check that all parts are present\n\t\tif (\n\t\t\theaderStr === undefined ||\n\t\t\tpayloadStr === undefined ||\n\t\t\tsignature === undefined\n\t\t) {\n\t\t\tthrow 'Missing token parts';\n\t\t}\n\n\t\tconst header = JSON.parse(base64UrlToString(headerStr)) as JWTHeader;\n\t\tconst payload = JSON.parse(base64UrlToString(payloadStr)) as JWTPayload<T>;\n\n\t\t// validate the header, all okta oauth tokens have an alg and kid claim\n\t\tif (!header.alg || !header.kid) {\n\t\t\tthrow 'Missing algorithm in header';\n\t\t}\n\n\t\t// validate the payload, all okta oauth tokens have an jti claim\n\t\tif (!payload.jti) {\n\t\t\tthrow 'Possibly malformed payload';\n\t\t}\n\n\t\treturn {\n\t\t\theader,\n\t\t\tpayload,\n\t\t\tsignature,\n\t\t};\n\t} catch (error) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Malformed token',\n\t\t\tmessage: error as string,\n\t\t});\n\t}\n};\n\ninterface DecodeTokenParams {\n\taccessTokenRaw: string;\n\taccessTokenClockSkew: number;\n\tidTokenRaw: string;\n\tidTokenClockSkew: number;\n\tnonce: string;\n\toptions: RequiredIdentityAuthOptions;\n}\n\n/**\n * @name decodeTokens\n * @description Decodes the access and ID tokens, returning the decoded claims, without verifying the tokens\n *\n * @param accessToken - Raw access token string to decode\n * @param idToken - Raw ID token string to decode\n * @param nonce - Nonce used when generating the tokens\n *\n * @returns Tokens - decoded access and ID tokens\n */\nconst decodeTokens = <\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n>({\n\taccessTokenRaw,\n\taccessTokenClockSkew,\n\tidTokenRaw,\n\tidTokenClockSkew,\n\tnonce,\n\toptions,\n}: DecodeTokenParams): Tokens<AC, IC> => {\n\t// get the current time in seconds\n\tconst now = Math.floor(Date.now() / 1000);\n\n\t// decode the access tokens\n\tconst decodedAccessToken = decodeToken<AC>(accessTokenRaw);\n\n\t// get the access token claims, not type validated\n\tconst accessTokenPayload = decodedAccessToken.payload;\n\n\t// validate the type of access token claims\n\tif (!isAccessTokenClaims(accessTokenPayload)) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid access token claims',\n\t\t\tmessage: 'Invalid access token claims',\n\t\t});\n\t}\n\n\t// if strict clock skew checking is enabled and the the clock skew is greater than maxClockSkew (default 5 mins),\n\t// throw an error, as this is likely a replay attack\n\tif (\n\t\toptions.strictClockSkewCheck &&\n\t\tMath.abs(accessTokenClockSkew) > options.maxClockSkew\n\t) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid Access token',\n\t\t\tmessage: 'Clock skew too large',\n\t\t});\n\t}\n\n\t// construct the access token\n\tconst accessToken: AccessToken<AC> = {\n\t\taccessToken: accessTokenRaw,\n\t\tclaims: accessTokenPayload,\n\t\texpiresAt: accessTokenPayload.exp - accessTokenPayload.iat + now, // adjusting expiresAt to be in local (machine) time, to account for clock skew\n\t\tclockSkew: accessTokenClockSkew,\n\t\ttokenType: 'Bearer',\n\t\tscopes: accessTokenPayload.scp,\n\t};\n\n\t// validate the type of the access token\n\tif (!isAccessToken(accessToken)) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid access token',\n\t\t\tmessage: 'Invalid access token',\n\t\t});\n\t}\n\n\t// decode the ID token\n\tconst decodedIDToken = decodeToken<IC>(idTokenRaw);\n\n\t// get the id token claims, not type validated\n\tconst idTokenPayload = decodedIDToken.payload;\n\n\t// validate the type of the ID token claims\n\tif (!isIDTokenClaims(idTokenPayload)) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid ID token claims',\n\t\t\tmessage: 'Invalid ID token claims',\n\t\t});\n\t}\n\n\t// if strict clock skew checking is enabled and the the clock skew is greater than maxClockSkew (default 5 mins),\n\t// throw an error, as this is likely a replay attack\n\tif (\n\t\toptions.strictClockSkewCheck &&\n\t\tMath.abs(idTokenClockSkew) > options.maxClockSkew\n\t) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid ID token',\n\t\t\tmessage: 'Clock skew too large',\n\t\t});\n\t}\n\n\t// construct the ID token\n\tconst idToken: IDToken<IC> = {\n\t\tidToken: idTokenRaw,\n\t\tissuer: options.issuer,\n\t\tclientId: options.clientId,\n\t\tclaims: idTokenPayload,\n\t\texpiresAt: idTokenPayload.exp - idTokenPayload.iat + now, // adjusting expiresAt to be in local (machine) time, to account for clock skew\n\t\tclockSkew: idTokenClockSkew,\n\t\tscopes: options.scopes,\n\t\tnonce: nonce,\n\t};\n\n\t// validate the type of the ID token\n\tif (!isIDToken(idToken)) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid ID token',\n\t\t\tmessage: 'Invalid ID token',\n\t\t});\n\t}\n\n\treturn {\n\t\taccessToken,\n\t\tidToken,\n\t};\n};\n\n/**\n * @name verifyIdTokenClaims\n * @description Verifies the claims of an ID token are valid and expected\n *\n * @param decoded - decoded ID token\n * @param claims - ID token claims\n * @param options - RequiredIdentityAuthOptions\n *\n * @throws Error - if the claims are invalid\n * @returns void\n */\nexport const verifyIdTokenClaims = (\n\tdecoded: IDToken,\n\tclaims: JWTPayload,\n\toptions: RequiredIdentityAuthOptions,\n): void => {\n\t// get the local time in seconds\n\tconst localTime = Math.floor(Date.now() / 1000);\n\n\t// calculate the normalised time, which takes into account clock skew\n\tconst normalisedTime = localTime - decoded.clockSkew;\n\n\t// check the nonce is valid\n\tif (claims.nonce !== decoded.nonce) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid nonce in ID token',\n\t\t\tmessage: 'Invalid nonce in ID token',\n\t\t});\n\t}\n\n\t// check the issuer is the one configured in the options\n\tif (claims.iss !== options.issuer) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid issuer in ID token',\n\t\t\tmessage: 'Invalid issuer in ID token',\n\t\t});\n\t}\n\n\t// check the audience is the one configured in the options (clientId)\n\tif (claims.aud !== options.clientId) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid audience in ID token',\n\t\t\tmessage: 'Invalid audience in ID token',\n\t\t});\n\t}\n\n\t// check that the iat (issued at) claim is present\n\tif (!claims.iat) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Missing iat claim in ID token',\n\t\t\tmessage: 'Token does not contain required claims',\n\t\t});\n\t}\n\n\t// check the token wasn't issued in the future\n\tif (claims.iat > normalisedTime) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Token was issued in the future',\n\t\t\tmessage: 'Token was issued in the future',\n\t\t});\n\t}\n};\n\n/**\n * @name verifyAccessTokenWithAtHash\n * @description Verifies the access token with the id token at_hash claim\n *\n * @param at_hash - at_hash claim from the id token\n * @param access_token - access token to verify\n * @returns Promise<void> - resolves if the access token is valid, rejects if not\n */\nexport const verifyAccessTokenWithAtHash = async (\n\tat_hash: string,\n\taccess_token: string,\n): Promise<void> => {\n\t// verify the access token with the id token at_hash claim\n\t// generate the access token hash\n\tconst accessTokenHash = await generateSha256Hash(access_token);\n\n\t// take the first 128 bits of the hash (the first half)\n\tconst accessTokenHash128 = accessTokenHash.substring(0, 16);\n\n\t// convert the hash to a base64url string\n\tconst accessTokenHashBase64 = base64UrlEncode(accessTokenHash128);\n\n\t// compare the hash with the at_hash claim\n\t// if they don't match, the token is invalid\n\tif (accessTokenHashBase64 !== at_hash) {\n\t\t// throw an error\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid token',\n\t\t\tmessage: 'The access token hash does not match the at_hash claim',\n\t\t});\n\t}\n\t// if they do match, the token is valid, return void\n\treturn;\n};\n\n/**\n * @name verifySignature\n * @description Verifies the signature of a JWT token\n *\n * Get's the public key from the JWKS endpoint, imports it and verifies the signature\n * of a given JWT token\n *\n * @param issuer\n * @param jwt\n * @param token\n */\nexport const verifySignature = async (\n\tjwksUri: string,\n\tjwt: JWTObject,\n\ttoken: string,\n): Promise<void> => {\n\t// fetch the JWKS, okta returns standard cache-control headers, so caching is handled by the browser\n\tconst jwksResponse = await fetch(jwksUri);\n\n\t// throw an error if the response isn't ok\n\tif (!jwksResponse.ok) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'failed_request',\n\t\t\terror_description: 'Failed to fetch JWKS',\n\t\t\tmessage: 'Failed to fetch JWKS',\n\t\t});\n\t}\n\n\t// parse the JWKS response\n\tconst jwks = (await jwksResponse.json()) as JWKS;\n\n\t// validate the JWKS, first check that there are keys\n\tif (!jwks.keys || jwks.keys.length === 0) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_jwks',\n\t\t\terror_description: 'No keys found in JWKS',\n\t\t\tmessage: 'No keys found in JWKS',\n\t\t});\n\t}\n\n\t// next loop through the keys and check that they have the required properties\n\tfor (const key of jwks.keys) {\n\t\tif (!key.kty || !key.n || !key.e || !key.alg || !key.use || !key.kid) {\n\t\t\tthrow new OAuthError({\n\t\t\t\terror: 'invalid_jwks',\n\t\t\t\terror_description: 'Invalid key in JWKS',\n\t\t\t\tmessage: 'Invalid key in JWKS',\n\t\t\t});\n\t\t}\n\t}\n\n\t// find the key that matches the kid in the JWT header\n\tconst key = jwks.keys.find((k: JWK) => k.kid === jwt.header.kid);\n\n\t// throw an error if no key was found\n\tif (key === undefined) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_jwks',\n\t\t\terror_description: 'No key found for token in JWKS',\n\t\t\tmessage: 'No key found for token in JWKS',\n\t\t});\n\t}\n\n\t// create the algorithm to use for the verification\n\tconst algorithm: HmacImportParams = {\n\t\tname: 'RSASSA-PKCS1-v1_5',\n\t\thash: { name: 'SHA-256' },\n\t};\n\n\t// import the public key using the jwk format\n\tconst publicKey = await window.crypto.subtle.importKey(\n\t\t'jwk',\n\t\t{\n\t\t\tkty: key.kty,\n\t\t\tn: key.n,\n\t\t\te: key.e,\n\t\t\talg: key.alg,\n\t\t\tuse: key.use,\n\t\t},\n\t\talgorithm,\n\t\ttrue,\n\t\t['verify'],\n\t);\n\n\t// split the token into it's parts\n\tconst [header, payload, sig] = token.split('.');\n\n\t// throw an error if the token is malformed\n\tif (header === undefined || payload === undefined || sig === undefined) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Malformed token',\n\t\t\tmessage: 'Malformed token',\n\t\t});\n\t}\n\n\t// create the data to verify, i.e the header and payload\n\tconst data = `${header}.${payload}`;\n\n\t// verify the signature\n\tconst isValid = await window.crypto.subtle.verify(\n\t\talgorithm,\n\t\tpublicKey,\n\t\tstringToBuffer(base64UrlToString(sig)),\n\t\tstringToBuffer(data),\n\t);\n\n\t// throw an error if the signature is invalid\n\tif (!isValid) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Invalid signature',\n\t\t\tmessage: 'Invalid signature',\n\t\t});\n\t}\n};\n\n/**\n * @name verifyAccessTokenTimestamps\n * @description Verifies the timestamps of an access token, used to determine if both the access token and ID token are valid\n *\n * We validate the access token token timestamps rather than the ID token timestamps, because the ID token in Okta is only valid for\n * 1 hour with no way to change this, whereas the access token can be valid anywhere from 5 minutes to 24 hours, so we use the access token\n * timestamps to determine if the tokens are valid.\n *\n * @param decoded - the decoded access token object\n * @param claims - the jwt payload from the access token\n * @returns void - resolves if the access token timestamps are valid, rejects if not\n */\nexport const verifyAccessTokenTimestamps = (\n\tdecoded: AccessToken,\n\tclaims: JWTPayload,\n) => {\n\t// get the local time in seconds\n\tconst localTime = Math.floor(Date.now() / 1000);\n\n\t// calculate the normalised time, which takes into account clock skew\n\tconst normalisedTime = localTime - decoded.clockSkew;\n\n\t// check that the iat (issued at) and exp (expiry) claims are present\n\tif (!claims.iat || !claims.exp) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Missing iat or exp claim in access token',\n\t\t\tmessage: 'Token does not contain required claims',\n\t\t});\n\t}\n\n\t// check that the iat isn't after the exp\n\tif (claims.iat > claims.exp) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'iat claim is after exp claim in access token',\n\t\t\tmessage: 'Token has expired before it was issued',\n\t\t});\n\t}\n\n\t// check the token hasn't expired\n\tif (normalisedTime > claims.exp) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Token has expired',\n\t\t\tmessage: 'Token has expired',\n\t\t});\n\t}\n\n\t// check the token wasn't issued in the future\n\tif (claims.iat > normalisedTime) {\n\t\tthrow new OAuthError({\n\t\t\terror: 'invalid_token',\n\t\t\terror_description: 'Token was issued in the future',\n\t\t\tmessage: 'Token was issued in the future',\n\t\t});\n\t}\n};\n\n/**\n * @name addPostMessageListener\n * @description Adds a postMessage listener to the window to listen for the response from the authorization server when performing the Authorization Code Flow with PKCE in an iframe\n *\n * @param opts - RequiredIdentityAuthOptions\n * @param state - state to match the response\n * @returns Promise<OAuthAuthorizeResponse | OAuthAuthorizeResponseError> - resolves with the response from the authorization server\n */\nexport const addPostMessageListener = (\n\topts: RequiredIdentityAuthOptions,\n\tstate: string,\n) => {\n\t// setup the response handler variable\n\tlet responseHandler: (\n\t\te: MessageEvent<OAuthAuthorizeResponse | OAuthAuthorizeResponseError>,\n\t) => void;\n\n\t// setup the timeout id variable to clear the timeout\n\tlet timeoutId: number;\n\n\t// create a promise that resolves when the message is received or rejects when the timeout is reached\n\tconst msgReceivedOrTimeout: Promise<\n\t\tOAuthAuthorizeResponse | OAuthAuthorizeResponseError\n\t> = new Promise((resolve, reject) => {\n\t\t// create the response handler\n\t\tresponseHandler = (e) => {\n\t\t\t// check the message is for us, i.e the state matches\n\t\t\tif (e.data.state !== state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// check the message is from the correct origin, i.e the issuer\n\t\t\tif (e.origin !== opts.issuer.split('/oauth2/')[0]) {\n\t\t\t\treturn reject(\n\t\t\t\t\tnew OAuthError({\n\t\t\t\t\t\terror: 'invalid_origin',\n\t\t\t\t\t\terror_description: 'Invalid origin',\n\t\t\t\t\t\tmessage: 'The request does not originate from the issuer',\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// resolve the promise with the response\n\t\t\treturn resolve(e.data);\n\t\t};\n\n\t\t// add the response handler to the window\n\t\twindow.addEventListener('message', responseHandler);\n\n\t\t// set the timeout\n\t\ttimeoutId = window.setTimeout(() => {\n\t\t\t// reject the promise with a timeout error if the timeout is reached\n\t\t\treturn reject(\n\t\t\t\tnew OAuthError({\n\t\t\t\t\terror: 'timeout',\n\t\t\t\t\terror_description: 'Timeout',\n\t\t\t\t\tmessage: 'The oauth request timed out',\n\t\t\t\t}),\n\t\t\t);\n\t\t}, opts.oauthTimeout);\n\t});\n\n\t// return the promise, clearing the timeout and removing the event listener when the promise resolves\n\treturn msgReceivedOrTimeout.finally(() => {\n\t\twindow.clearTimeout(timeoutId);\n\t\twindow.removeEventListener('message', responseHandler);\n\t});\n};\n\n/**\n * @name loadFrame\n * @description Loads a hidden iframe with the given url\n *\n * @param url - url to load in the iframe\n * @returns\tHTMLIFrameElement - the iframe element\n */\nexport const loadFrame = (url: string) => {\n\tconst frame = document.createElement('iframe');\n\tframe.style.display = 'none';\n\tframe.src = url;\n\n\treturn document.body.appendChild(frame);\n};\n\n/**\n * @name performAuthCodeFlowIframe\n * @description Performs the authorization code flow with PKCE using an iframe, and returns the AuthorizationResponse\n *\n * @param authorizeParams - AuthorizeParams\n * @param options - RequiredIdentityAuthOptions\n * @param oauthUrls - OAuthUrls\n * @returns OAuthAuthorizeResponse | OAuthAuthorizeResponseError - resolves with the AuthorizationResponse\n */\nexport const performAuthCodeFlowIframe = async (\n\tauthorizeParams: AuthorizeParams,\n\toptions: RequiredIdentityAuthOptions,\n\toauthUrls: OAuthUrls,\n): Promise<OAuthAuthorizeResponse | OAuthAuthorizeResponseError> => {\n\t// convert the authorize params to a query string\n\tconst searchParams = new URLSearchParams(authorizeParams);\n\n\t// create the postMessage listener for the iframe\n\tconst postMessageListener = addPostMessageListener(\n\t\toptions,\n\t\tauthorizeParams.state,\n\t);\n\t// load the iframe with the authorize url\n\tconst iframe = loadFrame(\n\t\t`${oauthUrls.authorizeUrl}?${searchParams.toString()}`,\n\t);\n\n\t// wait for the postMessage listener to resolve\n\tconst authorizeResponse = await postMessageListener.finally(() => {\n\t\tif (document.body.contains(iframe)) {\n\t\t\tdocument.body.removeChild(iframe);\n\t\t}\n\t});\n\n\treturn authorizeResponse;\n};\n\n// memoized verify token map\nconst memoizedVerifyTokens = new Map<string, unknown>();\n\n/**\n * @name verifyTokens\n * @description Verifies the ID token, checking the signature and claims, and verifies the access token using the at_hash claim\n *\n * @param idToken - IDToken\n * @param accessToken - AccessToken\n * @param options - RequiredIdentityAuthOptions\n * @returns Promise<void> - resolves when the token is verified\n */\nexport const verifyTokens = async (\n\tidToken: IDToken,\n\taccessToken: AccessToken,\n\toptions: RequiredIdentityAuthOptions,\n\toauthUrls: OAuthUrls,\n) => {\n\t// check if the token has already been verified\n\tif (memoizedVerifyTokens.has(idToken.claims.jti)) {\n\t\t// get the memoized value\n\t\tconst memoized = memoizedVerifyTokens.get(idToken.claims.jti);\n\n\t\t// if the memoized value is true, return, already verified\n\t\tif (memoized === true) {\n\t\t\treturn;\n\t\t}\n\n\t\t// otherwise the memoized value is an error, throw the error\n\t\tthrow memoized;\n\t}\n\n\ttry {\n\t\t// decode the token\n\t\tconst idTokenJWT = decodeToken(idToken.idToken);\n\n\t\t// verify the claims\n\t\tverifyIdTokenClaims(idToken, idTokenJWT.payload, options);\n\n\t\t// verify the signature\n\t\tawait verifySignature(oauthUrls.keysUrl, idTokenJWT, idToken.idToken);\n\n\t\t// verify the access token using the at_hash claim\n\t\tawait verifyAccessTokenWithAtHash(\n\t\t\tidToken.claims.at_hash,\n\t\t\taccessToken.accessToken,\n\t\t);\n\n\t\tconst accessTokenJWT = decodeToken(accessToken.accessToken);\n\n\t\t// verify access token timestamps\n\t\tverifyAccessTokenTimestamps(accessToken, accessTokenJWT.payload);\n\n\t\t// if successful, memoize the token\n\t\tmemoizedVerifyTokens.set(idToken.claims.jti, true);\n\t} catch (error) {\n\t\t// if there is an error, memoize the error\n\t\tmemoizedVerifyTokens.set(idToken.claims.jti, error);\n\n\t\t// throw the error\n\t\tthrow error;\n\t}\n};\n\n/**\n * @name exchangeCodeForTokens\n * @description Exchanges the authorization code for tokens using the OAuth token endpoint\n *\n * @param code - authorization code\n * @param codeVerifier - code verifier used to generate the code challenge\n * @param options - RequiredIdentityAuthOptions\n * @param oauthUrls - OAuthUrls\n * @returns Promise<OAuthTokenResponse> - resolves with the response from the authorization server\n */\nexport const exchangeCodeForTokens = async (\n\tcode: string,\n\tcodeVerifier: string,\n\toptions: RequiredIdentityAuthOptions,\n\toauthUrls: OAuthUrls,\n): Promise<OAuthTokenResponse | OAuthTokenResponseError> => {\n\t// create the token params\n\t// https://developer.okta.com/docs/reference/api/oidc/#token\n\tconst tokenParams: TokenParams = {\n\t\tclient_id: options.clientId,\n\t\tcode,\n\t\tcode_verifier: codeVerifier,\n\t\tgrant_type: 'authorization_code',\n\t\tredirect_uri: options.redirectUri,\n\t};\n\n\t// make the request to the token endpoint\n\tconst response = await fetch(oauthUrls.tokenUrl, {\n\t\tmethod: 'POST',\n\t\tbody: new URLSearchParams(tokenParams),\n\t\theaders: {\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t});\n\n\treturn response.json() as Promise<\n\t\tOAuthTokenResponse | OAuthTokenResponseError\n\t>;\n};\n\n/**\n * @name handleOAuthResponse\n * @description Handles the response from the token endpoint, verifying the ID token and returning the access and ID tokens\n *\n * @param oauthTokenResponse - response from the token endpoint\n * @param authorizeParams - params used to generate the authorization request (/authorize)\n * @returns Promise<TokenResponse> - resolves with the access and ID tokens\n */\nexport const handleOAuthResponse = async <\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n>(\n\toauthTokenResponse: OAuthTokenResponse,\n\tauthorizeParams: AuthorizeParams,\n\toptions: RequiredIdentityAuthOptions,\n\toauthUrls: OAuthUrls,\n): Promise<TokenResponse<AC, IC>> => {\n\t// destructure the response\n\tconst { access_token, id_token } = oauthTokenResponse;\n\n\t// calculate the clock skew for both tokens\n\t// get the current time in seconds\n\tconst now = Math.floor(Date.now() / 1000);\n\tconst accessTokenClockSkew = calculateClockSkew(now, access_token);\n\tconst idTokenClockSkew = calculateClockSkew(now, id_token);\n\n\t// decode the tokens\n\tconst { accessToken, idToken } = decodeTokens<AC, IC>({\n\t\taccessTokenRaw: access_token,\n\t\taccessTokenClockSkew,\n\t\tidTokenRaw: id_token,\n\t\tidTokenClockSkew,\n\t\tnonce: authorizeParams.nonce,\n\t\toptions,\n\t});\n\n\t// verify the tokens\n\tawait verifyTokens(idToken, accessToken, options, oauthUrls);\n\n\t// return the tokens\n\treturn {\n\t\tstate: authorizeParams.state,\n\t\ttokens: {\n\t\t\taccessToken,\n\t\t\tidToken,\n\t\t},\n\t};\n};\n\n/**\n * @class Token\n * @description Class for performing the Authorization Code Flow with PKCE, exchanging the authorization code for tokens and verifying the ID token\n */\nexport class Token<\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n> {\n\t#options: RequiredIdentityAuthOptions;\n\t#oauthUrls: OAuthUrls;\n\n\t// holder if there is currently a get token flow in progress\n\t#getTokensInProgress: Promise<TokenResponse<AC, IC>> | undefined;\n\n\tconstructor(options: RequiredIdentityAuthOptions, oauthUrls: OAuthUrls) {\n\t\tthis.#options = options;\n\t\tthis.#oauthUrls = oauthUrls;\n\t\tthis.#getTokensInProgress = undefined;\n\t}\n\n\t#exchangeCodeForTokens = (\n\t\tcode: string,\n\t\tcodeVerifier: string,\n\t): Promise<OAuthTokenResponse | OAuthTokenResponseError> =>\n\t\texchangeCodeForTokens(code, codeVerifier, this.#options, this.#oauthUrls);\n\n\t#handleOAuthResponse = (\n\t\toauthTokenResponse: OAuthTokenResponse,\n\t\tauthorizeParams: AuthorizeParams,\n\t): Promise<TokenResponse<AC, IC>> =>\n\t\thandleOAuthResponse<AC, IC>(\n\t\t\toauthTokenResponse,\n\t\t\tauthorizeParams,\n\t\t\tthis.#options,\n\t\t\tthis.#oauthUrls,\n\t\t);\n\n\t#performAuthCodeFlowIframe = (\n\t\tauthorizeParams: AuthorizeParams,\n\t): Promise<OAuthAuthorizeResponse | OAuthAuthorizeResponseError> =>\n\t\tperformAuthCodeFlowIframe(authorizeParams, this.#options, this.#oauthUrls);\n\n\t/**\n\t * @name getWithoutPrompt\n\t * @description Performs the Authorization Code Flow with PKCE, exchanging the authorization code for tokens and verifying the ID token, without prompting the user and using a hidden iframe\n\t * @returns Promise<TokenResponse> - resolves with the access and ID tokens\n\t */\n\tasync #getWithoutPrompt(): Promise<TokenResponse<AC, IC>> {\n\t\t// generate the code verifier and code challenge for PKCE\n\t\t// see https://www.oauth.com/oauth2-servers/pkce/authorization-request/\n\t\t// the `code_verifier` is a cryptographically random string using the characters A-Z, a-z, 0-9\n\t\t// the `code_challenge` is the `code_verifier` hashed with SHA-256 and then base64url encoded\n\t\tconst codeVerifier = generateCodeVerifier();\n\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\n\t\t// create the authorize params\n\t\t// https://developer.okta.com/docs/reference/api/oidc/#authorize\n\t\tconst authorizeParams: AuthorizeParams = {\n\t\t\tclient_id: this.#options.clientId,\n\t\t\tcode_challenge: codeChallenge,\n\t\t\tcode_challenge_method: 'S256',\n\t\t\tprompt: 'none',\n\t\t\tnonce: getRandomString(16),\n\t\t\tredirect_uri: this.#options.redirectUri,\n\t\t\tresponse_type: 'code',\n\t\t\tresponse_mode: 'okta_post_message',\n\t\t\tscope: this.#options.scopes.join(' '),\n\t\t\tstate: getRandomString(42),\n\t\t};\n\n\t\t// perform the authorization code flow with PKCE using an iframe\n\t\tconst authorizeResponse =\n\t\t\tawait this.#performAuthCodeFlowIframe(authorizeParams);\n\n\t\t// check for an error response\n\t\tif (isOAuthAuthorizeResponseError(authorizeResponse)) {\n\t\t\tthrow new OAuthError({\n\t\t\t\terror: authorizeResponse.error,\n\t\t\t\terror_description: authorizeResponse.error_description,\n\t\t\t\tmessage: `OAuth Authorize Error | ${authorizeResponse.error} | ${authorizeResponse.error_description}`,\n\t\t\t});\n\t\t}\n\n\t\t// successful response\n\t\tconst { code, state } = authorizeResponse;\n\n\t\t// check the state parameter matches\n\t\tif (state !== authorizeParams.state) {\n\t\t\tthrow new OAuthError({\n\t\t\t\terror: 'invalid_state',\n\t\t\t\terror_description: 'Invalid state parameter',\n\t\t\t\tmessage: 'Invalid state parameter',\n\t\t\t});\n\t\t}\n\n\t\t// exchange the authorization code for tokens\n\t\tconst tokenResponse = await this.#exchangeCodeForTokens(code, codeVerifier);\n\n\t\t// check for an error response\n\t\tif (isOAuthTokenResponseError(tokenResponse)) {\n\t\t\tthrow new OAuthError({\n\t\t\t\terror: tokenResponse.error,\n\t\t\t\terror_description: tokenResponse.error_description,\n\t\t\t\tmessage: `OAuth Token Error | ${tokenResponse.error} | ${tokenResponse.error_description}`,\n\t\t\t});\n\t\t}\n\n\t\t// parse the response\n\t\tconst parsed = await this.#handleOAuthResponse(\n\t\t\ttokenResponse,\n\t\t\tauthorizeParams,\n\t\t);\n\n\t\t// return the tokens\n\t\treturn parsed;\n\t}\n\n\t/**\n\t * @name getWithoutPrompt\n\t * @description Performs the Authorization Code Flow with PKCE, exchanging the authorization code for tokens and verifying the ID token, without prompting the user and using a hidden iframe\n\t * @returns Promise<TokenResponse> - resolves with the access and ID tokens\n\t */\n\tpublic async getWithoutPrompt(): Promise<TokenResponse<AC, IC>> {\n\t\t// check if there is already an auth code flow in progress\n\t\tif (this.#getTokensInProgress) {\n\t\t\t// return the existing promise\n\t\t\treturn this.#getTokensInProgress;\n\t\t}\n\n\t\t// create a new promise that clears itself when it resolves\n\t\tthis.#getTokensInProgress = this.#getWithoutPrompt().finally(() => {\n\t\t\tthis.#getTokensInProgress = undefined;\n\t\t});\n\n\t\t// return the promise\n\t\treturn this.#getTokensInProgress;\n\t}\n\n\t/**\n\t * @name verifyTokens\n\t * @description Verifies the ID token, checking the signature and claims, and verifies the access token using the at_hash claim\n\t *\n\t * @param idToken - ID token to verify\n\t * @param accessToken - Access token to verify\n\t * @returns void\n\t */\n\tpublic async verifyTokens(idToken: IDToken, accessToken: AccessToken) {\n\t\treturn verifyTokens(idToken, accessToken, this.#options, this.#oauthUrls);\n\t}\n\n\t/**\n\t * @name decodeTokens\n\t * @description Decodes the access and ID tokens, returning the decoded claims, without verifying the tokens\n\t *\n\t * @param accessToken - Raw access token string to decode\n\t * @param idToken - Raw ID token string to decode\n\t * @param nonce - Nonce used when generating the tokens\n\t *\n\t * @returns Tokens - decoded access and ID tokens\n\t */\n\tpublic decodeTokens({\n\t\taccessTokenRaw,\n\t\taccessTokenClockSkew,\n\t\tidTokenRaw,\n\t\tidTokenClockSkew,\n\t\tnonce,\n\t}: Omit<DecodeTokenParams, 'options'>) {\n\t\treturn decodeTokens<AC, IC>({\n\t\t\taccessTokenRaw,\n\t\t\taccessTokenClockSkew,\n\t\t\tidTokenRaw,\n\t\t\tidTokenClockSkew,\n\t\t\tnonce,\n\t\t\toptions: this.#options,\n\t\t});\n\t}\n}\n","import { storage } from '@guardian/libs';\nimport type {\n\tAccessToken,\n\tAccessTokenStorage,\n\tCustomClaims,\n\tIDToken,\n\tIDTokenStorage,\n\tTokens,\n\tTokenType,\n} from './@types/Token';\nimport type { Emitter } from './emitter';\nimport type { Token } from './token';\nimport { isAccessToken, isIDToken } from './token';\n\n/**\n * @class TokenManager\n * @description Manages the storage and retrieval of tokens\n */\nexport class TokenManager<\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n> {\n\t#token: Token<AC, IC>;\n\t#emitter: Emitter;\n\t#storage = storage.local;\n\t#accessTokenKey = 'gu.access_token';\n\t#idTokenKey = 'gu.id_token';\n\n\tconstructor(emitter: Emitter, tokenClass: Token<AC, IC>) {\n\t\tthis.#emitter = emitter;\n\t\tthis.#token = tokenClass;\n\n\t\t// subscribe to storage events, and emit an event when the storage is updated\n\t\twindow.addEventListener('storage', (event) => {\n\t\t\tif (\n\t\t\t\tevent.key === this.#accessTokenKey ||\n\t\t\t\tevent.key === this.#idTokenKey\n\t\t\t) {\n\t\t\t\tthis.#emitStorage();\n\t\t\t}\n\t\t});\n\n\t\tthis.#emitter.on('renew', async () => {\n\t\t\tawait this.renew();\n\t\t});\n\t}\n\n\t/**\n\t * @name emitAdded\n\t * @description Emits an event when a token is added\n\t */\n\t#emitAdded(key: TokenType, token?: AccessToken | IDToken) {\n\t\tthis.#emitter.emit('added', key, token);\n\t}\n\n\t/**\n\t * @name emitRemoved\n\t * @description Emits an event when a token is removed\n\t */\n\t#emitRemoved(key: TokenType, token?: AccessToken | IDToken) {\n\t\tthis.#emitter.emit('removed', key, token);\n\t}\n\n\t/**\n\t * @name emitStorage\n\t * @description Emits an event when the local storage is updated\n\t */\n\t#emitStorage() {\n\t\tthis.#emitter.emit('storage');\n\t}\n\n\t/**\n\t * @name setTokens\n\t * @description Sets the tokens in storage and emits an event\n\t * @param tokens - The tokens to set\n\t * @returns void\n\t */\n\tpublic setTokens(tokens: Tokens<AC, IC>): void {\n\t\t// setup the valid token types\n\t\tconst tokenTypes: TokenType[] = ['accessToken', 'idToken'];\n\n\t\t// check if there are existing tokens in storage\n\t\tconst existingTokens = this.getTokensSync();\n\n\t\t// setup the storage objects\n\t\tconst accessTokenStorage: AccessTokenStorage = {\n\t\t\taccessToken: tokens.accessToken.accessToken,\n\t\t\tclockSkew: tokens.accessToken.clockSkew,\n\t\t};\n\n\t\tconst idTokenStorage: IDTokenStorage = {\n\t\t\tidToken: tokens.idToken.idToken,\n\t\t\tnonce: tokens.idToken.nonce,\n\t\t\tclockSkew: tokens.idToken.clockSkew,\n\t\t};\n\n\t\t// set the new tokens in storage\n\t\tthis.#storage.set(\n\t\t\tthis.#accessTokenKey,\n\t\t\taccessTokenStorage,\n\t\t\tnew Date(tokens.accessToken.expiresAt * 1000),\n\t\t);\n\t\tthis.#storage.set(\n\t\t\tthis.#idTokenKey,\n\t\t\tidTokenStorage,\n\t\t\t// use access token expiry as id token expiry as id token is always 1 hour\n\t\t\t// while the access token can be between 5 mins and 24 hours\n\t\t\t// the id token is refreshed at the same time as the access token, and is tied to\n\t\t\t// a given access token using the at_hash claim, so it is safe to use the access token expiry\n\t\t\tnew Date(tokens.accessToken.expiresAt * 1000),\n\t\t);\n\n\t\t// emit events for each token type\n\t\ttokenTypes.forEach((tokenType) => {\n\t\t\tconst newToken = tokens[tokenType];\n\t\t\tconst existingToken = existingTokens?.[tokenType];\n\n\t\t\tif (existingToken) {\n\t\t\t\tthis.#emitRemoved(tokenType, existingToken);\n\t\t\t\tthis.#emitAdded(tokenType, newToken);\n\t\t\t} else {\n\t\t\t\tthis.#emitAdded(tokenType, newToken);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @name getTokensSync\n\t * @description Gets the tokens from storage synchronously, does not refresh tokens or verify them\n\t *\n\t * @returns Tokens | undefined - The tokens if they exist\n\t */\n\tpublic getTokensSync(): Tokens<AC, IC> | undefined {\n\t\tconst accessTokenFromStorage = this.#storage.get(\n\t\t\tthis.#accessTokenKey,\n\t\t) as AccessTokenStorage | null;\n\n\t\tconst idTokenFromStorage = this.#storage.get(\n\t\t\tthis.#idTokenKey,\n\t\t) as IDTokenStorage | null;\n\n\t\tif (\n\t\t\t!accessTokenFromStorage?.accessToken ||\n\t\t\t!idTokenFromStorage?.idToken ||\n\t\t\t!idTokenFromStorage.nonce\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst { accessToken, idToken } = this.#token.decodeTokens({\n\t\t\taccessTokenRaw: accessTokenFromStorage.accessToken,\n\t\t\taccessTokenClockSkew: accessTokenFromStorage.clockSkew,\n\t\t\tidTokenRaw: idTokenFromStorage.idToken,\n\t\t\tidTokenClockSkew: idTokenFromStorage.clockSkew,\n\t\t\tnonce: idTokenFromStorage.nonce,\n\t\t});\n\n\t\tif (!isAccessToken(accessToken) || !isIDToken(idToken)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\taccessToken,\n\t\t\tidToken,\n\t\t};\n\t}\n\n\t/**\n\t * @name getTokens\n\t * @description Gets the tokens from storage asynchronously, can refresh tokens if required and verify them\n\t *\n\t * @param verifyTokens - If true, will verify the tokens before returning (default: true)\n\t * @param refreshIfRequired - If true, will refresh the tokens if they are expired (default: false)\n\t * @returns Promise<Tokens | undefined> - The tokens if they exist\n\t */\n\tpublic async getTokens({\n\t\trefreshIfRequired = false,\n\t\tverifyTokens = true,\n\t} = {}): Promise<Tokens<AC, IC> | undefined> {\n\t\ttry {\n\t\t\tconst tokens = this.getTokensSync();\n\n\t\t\tif (tokens) {\n\t\t\t\tif (verifyTokens) {\n\t\t\t\t\tawait this.#token.verifyTokens(tokens.idToken, tokens.accessToken);\n\t\t\t\t\treturn tokens;\n\t\t\t\t}\n\t\t\t\treturn tokens;\n\t\t\t}\n\n\t\t\tif (refreshIfRequired) {\n\t\t\t\tconst tokenResponse = await this.#token.getWithoutPrompt();\n\t\t\t\tthis.setTokens(tokenResponse.tokens);\n\t\t\t\treturn tokenResponse.tokens;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t} catch (error) {\n\t\t\tthis.clear();\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t/**\n\t * @name clear\n\t * @description Clears the tokens from storage and emits an event\n\t * @returns void\n\t */\n\tpublic clear(): void {\n\t\tthis.#storage.remove(this.#accessTokenKey);\n\t\tthis.#storage.remove(this.#idTokenKey);\n\t\tthis.#emitRemoved('accessToken');\n\t\tthis.#emitRemoved('idToken');\n\t}\n\n\t/**\n\t * @name renew\n\t * @description Attempts to renew the tokens, regardless of whether they are expired or not\n\t * @returns Promise<Tokens | undefined> - The tokens if they exist\n\t */\n\tpublic async renew(): Promise<Tokens<AC, IC> | undefined> {\n\t\tconst tokenResponse = await this.#token.getWithoutPrompt();\n\t\tthis.setTokens(tokenResponse.tokens);\n\t\treturn tokenResponse.tokens;\n\t}\n}\n","import { getCookie, removeCookie } from '@guardian/libs';\nimport type {\n\tIdentityAuthOptions,\n\tIdentityAuthState,\n\tOAuthUrls,\n\tRequiredIdentityAuthOptions,\n} from './@types/OAuth';\nimport type { CustomClaims } from './@types/Token';\nimport { AuthStateManager } from './authState';\nimport { AutoRenewService } from './autoRenew';\nimport { cookieRefreshIfRequired } from './cookieRefresh';\nimport { Emitter } from './emitter';\nimport { OAuthError } from './error';\nimport { Token } from './token';\nimport { TokenManager } from './tokenManager';\n\n/**\n * @class IdentityAuth\n * @description IdentityAuth is the main class for interacting with the Guardian's OAuth2.0 implementation within a browser\n *\n * This provides minimal functionality for the Guardian's OAuth2.0 implementation.\n *\n * It provides the following functionality when instantiated:\n * - A `tokenManager` for managing oauth tokens\n * - A `token` for requesting new oauth tokens\n * - An `authStateManager` for managing the current authentication state\n *\n * @param {IdentityAuthOptions} options - The options for IdentityAuth\n */\nexport class IdentityAuth<\n\tAC extends CustomClaims = CustomClaims,\n\tIC extends CustomClaims = CustomClaims,\n> {\n\t#options: RequiredIdentityAuthOptions;\n\t#oauthUrls: OAuthUrls;\n\t#emitter: Emitter;\n\t#autoRenewService: AutoRenewService;\n\n\t// holder if there is currently an is signed in check in progress\n\t#isSignedInWithAuthStateInProgress:\n\t\t| Promise<IdentityAuthState<AC, IC>>\n\t\t| undefined;\n\n\tpublic tokenManager: TokenManager<AC, IC>;\n\tpublic token: Token<AC, IC>;\n\tpublic authStateManager: AuthStateManager<AC, IC>;\n\n\tconstructor(options: IdentityAuthOptions) {\n\t\tthis.#options = {\n\t\t\tautoRenew: true,\n\t\t\trenewGracePeriod: 60,\n\t\t\tmaxClockSkew: 300,\n\t\t\tidCookieSessionRefresh: false,\n\t\t\toauthTimeout: 30000,\n\t\t\tstrictClockSkewCheck: false,\n\t\t\t...options,\n\t\t};\n\t\tthis.#oauthUrls = {\n\t\t\tauthorizeUrl: `${this.#options.issuer}/v1/authorize`,\n\t\t\ttokenUrl: `${this.#options.issuer}/v1/token`,\n\t\t\tkeysUrl: `${this.#options.issuer}/v1/keys`,\n\t\t};\n\n\t\t// before doing anything else, we check if the user's session should be refreshed based on the idCookieSessionRefresh option\n\t\tcookieRefreshIfRequired(\n\t\t\tthis.#options.idCookieSessionRefresh,\n\t\t\tthis.#options.issuer,\n\t\t);\n\n\t\tthis.#emitter = new Emitter();\n\t\tthis.token = new Token<AC, IC>(this.#options, this.#oauthUrls);\n\t\tthis.tokenManager = new TokenManager<AC, IC>(this.#emitter, this.token);\n\t\tthis.authStateManager = new AuthStateManager<AC, IC>(\n\t\t\tthis.#emitter,\n\t\t\tthis.tokenManager,\n\t\t);\n\t\tthis.#autoRenewService = new AutoRenewService(\n\t\t\tthis.#options,\n\t\t\tthis.#emitter,\n\t\t\tthis.authStateManager,\n\t\t);\n\n\t\tthis.#isSignedInWithAuthStateInProgress = undefined;\n\n\t\tthis.#autoRenewService.start();\n\t}\n\n\t/**\n\t * @name #isSignedInWithAuthState\n\t * @description Private implementation of `isSignedInWithAuthState`, see `isSignedInWithAuthState` for more details\n\t * @returns `AuthState` - Returns the current authentication state\n\t */\n\tasync #isSignedInWithAuthState(): Promise<IdentityAuthState<AC, IC>> {\n\t\ttry {\n\t\t\t// first check if the user has valid access and id tokens\n\t\t\tconst authState = this.authStateManager.getAuthState();\n\t\t\t// if they do we need to check if a user has recently signed out\n\t\t\tif (authState.isAuthenticated) {\n\t\t\t\t// validate the id token and access token to make sure auth state is still valid\n\t\t\t\tawait this.token.verifyTokens(authState.idToken, authState.accessToken);\n\n\t\t\t\t// if a user has a GU_SO cookie, they might have recently signed out\n\t\t\t\tconst guSoCookie = parseInt(\n\t\t\t\t\tgetCookie({ name: 'GU_SO', shouldMemoize: true }) ?? '',\n\t\t\t\t);\n\n\t\t\t\t// calculate the clock skew between the user's device and the server\n\t\t\t\tconst normalisedCurrentTime =\n\t\t\t\t\tMath.floor(Date.now() / 1000) - authState.idToken.clockSkew;\n\n\t\t\t\t// if the GU_SO cookie value (the timestamp when a user last signed out) is greater than the id token's iat (issued at) value,\n\t\t\t\t// then the user has recently signed out, so we should clear their tokens\n\t\t\t\tif (\n\t\t\t\t\t// make sure that the GU_SO cookie is in the past\n\t\t\t\t\tguSoCookie <= normalisedCurrentTime &&\n\t\t\t\t\t// compare the GU_SO cookie to the id token's iat value\n\t\t\t\t\tguSoCookie > authState.idToken.claims.iat\n\t\t\t\t) {\n\t\t\t\t\t// clear the tokens\n\t\t\t\t\t// we don't return a blank auth state here,\n\t\t\t\t\t// as the user * might * still be signed in, so we go to the next check\n\t\t\t\t\tthis.tokenManager.clear();\n\t\t\t\t} else {\n\t\t\t\t\t// otherwise the user is signed in, so return the auth state\n\t\t\t\t\t// if the id token is valid, return the auth state\n\t\t\t\t\treturn authState;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if the user doesn't have tokens, but they have a GU_U cookie, they are \"maybe\" signed in\n\t\t\t// we can try to get tokens without prompting/redirecting the user for credentials\n\t\t\t// it will error if the user is not signed in\n\t\t\t// if testing on localhost, you will need to set the GU_U cookie manually\n\t\t\tif (getCookie({ name: 'GU_U', shouldMemoize: true })) {\n\t\t\t\tconst tokens = await this.tokenManager.getTokens({\n\t\t\t\t\trefreshIfRequired: true,\n\t\t\t\t});\n\t\t\t\tif (tokens) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccessToken: tokens.accessToken,\n\t\t\t\t\t\tidToken: tokens.idToken,\n\t\t\t\t\t\tisAuthenticated: true,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// if we weren't able to get the tokens, despite having a GU_U cookie, the user is not signed in\n\t\t\t\t\t// we should clear the GU_U cookie, as it is likely invalid\n\t\t\t\t\tremoveCookie({ name: 'GU_U' });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if the user doesn't have tokens or a GU_U cookie, they are not signed in\n\t\t\treturn {\n\t\t\t\taccessToken: undefined,\n\t\t\t\tidToken: undefined,\n\t\t\t\tisAuthenticated: false,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\t// check if the error is an OAuthError and the error is login_required, in which case the user is not signed in\n\t\t\tif (error instanceof OAuthError && error.error === 'login_required') {\n\t\t\t\t// remove the GU_U cookie, as it is likely invalid\n\t\t\t\tremoveCookie({ name: 'GU_U' });\n\n\t\t\t\t// and return isAuthenticated: false\n\t\t\t\treturn {\n\t\t\t\t\taccessToken: undefined,\n\t\t\t\t\tidToken: undefined,\n\t\t\t\t\tisAuthenticated: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// otherwise there is an unknown error, so clear any tokens and throw the error\n\t\t\tthis.tokenManager.clear();\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t/**\n\t * @name isSignedInWithAuthState\n\t * @description Checks if the user is signed in, and updates the auth state as necessary, returns the current auth state\n\t *\n\t * This performs side effects.\n\t *\n\t * This follows the flowchart from https://github.com/guardian/gateway/blob/main/docs/okta/web-apps-integration-guide.md#how-to-know-if-a-reader-is-signed-in to determine if the user is signed in\n\t *\n\t * 1. If the user tokens already exist, then verify them to make sure they are still valid\n\t * 2. If they do, check if the user has a `GU_SO` cookie and compare it to the `iat` value of the id token\n\t *   a. If the `GU_SO` cookie value is greater than the `iat` value, the user has recently signed out, so we should clear their tokens (side effect)\n\t *   b. Otherwise, the user is signed in, so return the auth state\n\t * 3. If the user doesn't have tokens, but they have a `GU_U` cookie, they are \"maybe\" signed in\n\t *  a. We can try to get tokens without prompting/redirecting the user for credentials (side effect)\n\t * \tb. If no tokens are returned, we clear the `GU_U` cookie, as it is likely invalid (side effect)\n\t *  c. If there is an error getting the tokens:\n\t *    i. If the error is an `OAuthError` and the error is `login_required`, the user is not signed in, so we clear the `GU_U` cookie, as it is likely invalid (side effect)\n\t *    ii. Otherwise, there is an unknown error, so clear any tokens and throw the error\n\t * 4. If the user doesn't have tokens or a GU_U cookie, they are not signed in\n\t *\n\t * For optimisation, this method will only run one signed in check at a time,\n\t * and will return the existing promise if a check is already in progress\n\t *\n\t * @returns `AuthState` - Returns the current authentication state\n\t */\n\tpublic async isSignedInWithAuthState(): Promise<IdentityAuthState<AC, IC>> {\n\t\t// check if there is already a signed in check in progress\n\t\tif (this.#isSignedInWithAuthStateInProgress) {\n\t\t\t// if there is, return the existing promise\n\t\t\treturn this.#isSignedInWithAuthStateInProgress;\n\t\t}\n\n\t\t// if there isn't, start a new signed in check\n\t\t// by creating a new promise that clears itself when it finishes\n\t\tthis.#isSignedInWithAuthStateInProgress =\n\t\t\tthis.#isSignedInWithAuthState().finally(() => {\n\t\t\t\tthis.#isSignedInWithAuthStateInProgress = undefined;\n\t\t\t});\n\n\t\t// return the new promise\n\t\treturn this.#isSignedInWithAuthStateInProgress;\n\t}\n\n\t/**\n\t * @name isSignedIn\n\t * @description Checks if the user is signed in, and updates the auth state as necessary, returns boolean\n\t *\n\t * This performs side effects.\n\t *\n\t * This follows the flowchart from https://github.com/guardian/gateway/blob/main/docs/okta/web-apps-integration-guide.md#how-to-know-if-a-reader-is-signed-in to determine if the user is signed in\n\t *\n\t * 1. If the user tokens already exist, then verify them to make sure they are still valid\n\t * 2. If they do, check if the user has a `GU_SO` cookie and compare it to the `iat` value of the id token\n\t *   a. If the `GU_SO` cookie value is greater than the `iat` value, the user has recently signed out, so we should clear their tokens (side effect)\n\t *   b. Otherwise, the user is signed in, so return the auth state\n\t * 3. If the user doesn't have tokens, but they have a `GU_U` cookie, they are \"maybe\" signed in\n\t *  a. We can try to get tokens without prompting/redirecting the user for credentials (side effect)\n\t * \tb. If no tokens are returned, we clear the `GU_U` cookie, as it is likely invalid (side effect)\n\t *  c. If there is an error getting the tokens:\n\t *    i. If the error is an `OAuthError` and the error is `login_required`, the user is not signed in, so we clear the `GU_U` cookie, as it is likely invalid (side effect)\n\t *    ii. Otherwise, there is an unknown error, so clear any tokens and throw the error\n\t * 4. If the user doesn't have tokens or a GU_U cookie, they are not signed in\n\t *\n\t * @returns `boolean` - `true` if the user is signed in, `false` if not\n\t */\n\tpublic async isSignedIn(): Promise<boolean> {\n\t\treturn (await this.isSignedInWithAuthState()).isAuthenticated;\n\t}\n}\n","import { IdentityAuth } from '@guardian/identity-auth';\nimport type { CustomClaims } from '@guardian/identity-auth';\nimport { isOneOf } from '@guardian/libs';\n\nconst stages = ['PROD', 'CODE', 'DEV'] as const;\ntype Stage = (typeof stages)[number];\nconst isStage = isOneOf(stages);\n\nexport type FrontendIdTokenClaims = CustomClaims & {\n\temail: string;\n\tbraze_uuid: string;\n\tgoogle_tag_id: string;\n};\n\nexport type FrontendIdentityAuth = IdentityAuth<never, FrontendIdTokenClaims>;\n\nconst getStage = (isDev: boolean, stage: string) =>\n\tisDev || !isStage(stage) ? 'DEV' : stage;\n\n/**\n * Decide Issuer URL based on Stage.\n *\n * NOTE: These values are specifically are solely for use on www.theguardian.com\n *\n * @param stage\n * @returns issuer URL\n */\nconst getIssuer = (stage: Stage) =>\n\tstage === 'PROD'\n\t\t? 'https://profile.theguardian.com/oauth2/aus3xgj525jYQRowl417'\n\t\t: 'https://profile.code.dev-theguardian.com/oauth2/aus3v9gla95Toj0EE0x7';\n\n/**\n * Decide Client ID based on Stage.\n *\n * NOTE: These values are specifically are solely for use on www.theguardian.com\n *\n * @param stage\n * @returns Client ID\n */\nconst getClientId = (stage: Stage) =>\n\tstage === 'PROD' ? '0oa79m1fmgzrtaHc1417' : '0oa53x6k5wGYXOGzm0x7';\n\nconst getRedirectUri = (stage: Stage) => {\n\tswitch (stage) {\n\t\tcase 'PROD':\n\t\t\treturn 'https://www.theguardian.com/';\n\t\tcase 'CODE':\n\t\t\treturn 'https://m.code.dev-theguardian.com/';\n\t\tcase 'DEV':\n\t\tdefault:\n\t\t\treturn 'http://localhost:3030/';\n\t}\n};\n\nexport const getIdentityAuth = () => {\n\tif (!window.guardian) {\n\t\tthrow new Error('window.guardian has not yet been initialized');\n\t}\n\n\tconst {\n\t\tisDev = false,\n\t\tstage = 'PROD',\n\t\tswitches,\n\t} = window.guardian.config ?? {};\n\tconst stageOrDev = getStage(isDev, stage);\n\n\twindow.guardian.identityAuth ||= new IdentityAuth<\n\t\tnever,\n\t\tFrontendIdTokenClaims\n\t>({\n\t\tissuer: getIssuer(stageOrDev),\n\t\tclientId: getClientId(stageOrDev),\n\t\tredirectUri: getRedirectUri(stageOrDev),\n\t\tidCookieSessionRefresh: switches?.idCookieRefresh ?? false,\n\t\tscopes: [\n\t\t\t'openid', // required for open id connect, returns an id token\n\t\t\t'profile', // populates the id token with basic profile information\n\t\t\t'email', // populates the id token with the user's email address\n\t\t\t'guardian.discussion-api.private-profile.read.self', // allows the access token to be used to make requests to the discussion api to read the user's profile\n\t\t\t'guardian.discussion-api.update.secure', // allows the access token to be used to make requests to the discussion api to post comments, upvote etc\n\t\t\t'guardian.identity-api.newsletters.read.self', // allows the access token to be used to make requests to the identity api to read the user's newsletter subscriptions\n\t\t\t'guardian.identity-api.newsletters.update.self', // allows the access token to be used to make requests to the identity api to update the user's newsletter subscriptions\n\t\t\t'guardian.identity-api.user.username.create.self.secure', // allows the access token to set the user's username\n\t\t\t'guardian.members-data-api.read.self', // allows the access token to be used to make requests to the members data api to read the user's membership status\n\t\t\t'id_token.profile.theguardian', // populates the id token with application specific profile information\n\t\t],\n\t});\n\n\treturn window.guardian.identityAuth;\n};\n","import type {\n\tAccessToken,\n\tCustomClaims,\n\tIdentityAuthState,\n\tIDToken,\n} from '@guardian/identity-auth';\nimport { getIdentityAuth } from '@guardian/identity-auth-frontend';\nimport { getCookie } from '@guardian/libs';\n\nexport type CustomIdTokenClaims = CustomClaims & {\n\temail: string;\n\tbraze_uuid: string;\n};\n\nexport async function isSignedInWithOktaAuthState(): Promise<\n\tIdentityAuthState<never, CustomIdTokenClaims>\n> {\n\treturn getIdentityAuth()\n\t\t.isSignedInWithAuthState()\n\t\t.catch((e) => {\n\t\t\t// eslint-disable-next-line no-console -- we want to log the error to console, not Sentry\n\t\t\tconsole.error(e);\n\n\t\t\treturn {\n\t\t\t\tisAuthenticated: false,\n\t\t\t\taccessToken: undefined,\n\t\t\t\tidToken: undefined,\n\t\t\t};\n\t\t});\n}\n\ntype OktaAuthState = IdentityAuthState<never, CustomIdTokenClaims>;\n\ntype SignedOutWithCookies = { kind: 'SignedOutWithCookies' };\nexport type SignedInWithCookies = { kind: 'SignedInWithCookies' };\ntype SignedOutWithOkta = { kind: 'SignedOutWithOkta' };\nexport type SignedInWithOkta = {\n\tkind: 'SignedInWithOkta';\n\taccessToken: AccessToken<never>;\n\tidToken: IDToken<CustomIdTokenClaims>;\n};\n\nexport type AuthStatus =\n\t| { kind: 'Pending' }\n\t| SignedOutWithCookies\n\t| SignedInWithCookies\n\t| SignedOutWithOkta\n\t| SignedInWithOkta;\n\n// relates to getUserFromCookie() below but not used in user-features - however may be useful for other purposes\ntype IdentityUserFromCache = {\n\tdates: { accountCreatedDate: string };\n\tpublicFields: {\n\t\tdisplayName: string;\n\t};\n\tstatusFields: {\n\t\tuserEmailValidated: boolean;\n\t};\n\tid: number;\n\trawResponse: string;\n} | null;\n\nlet userFromCookieCache: IdentityUserFromCache = null;\nconst cookieName = 'GU_U';\nconst getUserCookie = (): string | null =>\n\tgetCookie({ name: cookieName, shouldMemoize: true });\n\nconst decodeBase64 = (str: string): string =>\n\tdecodeURIComponent(\n\t\tescape(\n\t\t\twindow.atob(\n\t\t\t\tstr.replace(/-/g, '+').replace(/_/g, '/').replace(/,/g, '='),\n\t\t\t),\n\t\t),\n\t);\n\nconst getUserFromCookie = (): IdentityUserFromCache => {\n\tif (userFromCookieCache === null) {\n\t\tconst cookieData = getUserCookie();\n\n\t\tif (cookieData) {\n\t\t\ttry {\n\t\t\t\tconst userData = JSON.parse(\n\t\t\t\t\tdecodeBase64(cookieData.split('.')[0] ?? ''),\n\t\t\t\t) as string[];\n\n\t\t\t\tconst id = parseInt(userData[0] ?? '', 10);\n\t\t\t\tconst displayName = decodeURIComponent(userData[2] ?? '');\n\t\t\t\tconst accountCreatedDate = userData[6];\n\t\t\t\tconst userEmailValidated = Boolean(userData[7]);\n\n\t\t\t\tif (id && accountCreatedDate) {\n\t\t\t\t\tuserFromCookieCache = {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tpublicFields: {\n\t\t\t\t\t\t\tdisplayName,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdates: { accountCreatedDate },\n\t\t\t\t\t\tstatusFields: {\n\t\t\t\t\t\t\tuserEmailValidated,\n\t\t\t\t\t\t},\n\t\t\t\t\t\trawResponse: cookieData,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console -- we want to log the error to console, not Sentry\n\t\t\t\tconsole.error('Cookie value is malformed', e);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn userFromCookieCache;\n};\n\nexport const isUserLoggedIn = (): boolean => getUserFromCookie() !== null;\n\nexport const getOptionsHeadersWithOkta = (\n\tauthStatus: SignedInWithCookies | SignedInWithOkta,\n): RequestInit => {\n\tif (authStatus.kind === 'SignedInWithCookies') {\n\t\treturn {\n\t\t\tcredentials: 'include',\n\t\t};\n\t}\n\n\treturn {\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${authStatus.accessToken.accessToken}`,\n\t\t\t'X-GU-IS-OAUTH': 'true',\n\t\t},\n\t};\n};\n\nexport async function getAuthState(): Promise<OktaAuthState> {\n\tconst authState = await isSignedInWithOktaAuthState();\n\treturn authState;\n}\n\nexport async function eitherInOktaTestOrElse<A, B>(\n\tinOktaTestFunction: (authState: OktaAuthState) => A,\n\tnotInOktaTestFunction: () => B,\n): Promise<A | B> {\n\tconst useOkta = !!window.guardian.config.switches.okta;\n\n\tif (useOkta) {\n\t\tconst authState = await getAuthState();\n\t\treturn inOktaTestFunction(authState);\n\t} else {\n\t\treturn notInOktaTestFunction();\n\t}\n}\n\nexport function getSignedInStatusWithOkta(\n\tauthState: OktaAuthState,\n): SignedOutWithOkta | SignedInWithOkta {\n\tif (authState.isAuthenticated) {\n\t\treturn {\n\t\t\tkind: 'SignedInWithOkta',\n\t\t\taccessToken: authState.accessToken,\n\t\t\tidToken: authState.idToken,\n\t\t};\n\t}\n\n\treturn { kind: 'SignedOutWithOkta' };\n}\n\nexport const isUserLoggedInOktaRefactor = (): Promise<boolean> =>\n\tgetAuthStatus().then((authStatus) =>\n\t\tauthStatus.kind === 'SignedInWithCookies' ||\n\t\tauthStatus.kind === 'SignedInWithOkta'\n\t\t\t? true\n\t\t\t: false,\n\t);\n\nexport function getSignedInStatusWithCookies():\n\t| SignedOutWithCookies\n\t| SignedInWithCookies {\n\tconst GU_UCookie = getUserCookie();\n\treturn GU_UCookie === null || GU_UCookie === ''\n\t\t? { kind: 'SignedOutWithCookies' }\n\t\t: { kind: 'SignedInWithCookies' };\n}\n\nexport const getAuthStatus = async (): Promise<AuthStatus> => {\n\tconst useOkta = !!window.guardian.config.switches.okta;\n\n\tif (useOkta) {\n\t\tconst authState = await getAuthState();\n\t\treturn getSignedInStatusWithOkta(authState);\n\t} else {\n\t\treturn getSignedInStatusWithCookies();\n\t}\n};\n","export const isServer = typeof window === 'undefined';\n","import { isOneOf, startPerformanceMeasure } from '@guardian/libs';\n\nconst START = Date.now();\n\n/**\n * Keeps a count of how many tasks are currently running, so we can manage concurrency.\n */\nlet RUNNING_TASK_COUNT = 0;\n\n/**\n * The maximum amount of concurrent tasks.\n * @default Infinity\n */\nlet CONCURRENCY_COUNT = Infinity;\n\n/**\n * Possible task priorities.\n *\n * These are the Guardian's priorities, not the user's or browser's.\n *\n * The order of this array is important. Tasks are batched according to these\n * priorities, and the scheduler will prefer the priority with the lowest index.\n **/\nconst PRIORITIES = ['critical', 'feature', 'enhancement'] as const;\nexport type Priority = (typeof PRIORITIES)[number];\nexport type SchedulePriority = { [K in Priority]: K };\n\nexport const isValidSchedulerPriority = isOneOf(PRIORITIES);\n\n/**\n * A thing that a consumer want to do. Should be a function that returns a promise.\n */\ntype Task<T> = (...args: unknown[]) => Promise<T>;\n\n/**\n * A function that determines whether or not a task can be run.\n */\ntype CanRun = ({ runningTime }: { runningTime: number }) => boolean;\n\n/**\n * Internal representation of a task. This is what the scheduler actually uses.\n */\ntype QueueableTask<T = unknown> = {\n\tname: string;\n\ttask: Task<T>;\n\t/** Resolves the promise that `schedule()` (below) returns. */\n\tresolver: (value: T) => void;\n\tcanRun: CanRun;\n};\n\n/**\n * Stores scheduled tasks in a queue, grouped by priority.\n */\nconst queue: Record<\n\tPriority,\n\t{\n\t\t/**\n\t\t * The number of milliseconds after which tasks of a this priority\n\t\t * will no longer be run.\n\t\t *\n\t\t * @default Infinity\n\t\t */\n\t\tlastStartTime: number;\n\t\ttasks: QueueableTask[];\n\t}\n> = {\n\tcritical: { lastStartTime: Infinity, tasks: [] },\n\tfeature: { lastStartTime: Infinity, tasks: [] },\n\tenhancement: { lastStartTime: Infinity, tasks: [] },\n};\n\n/**\n * Checks whether there's spare task-running capacity.\n */\nfunction atConcurrencyLimit() {\n\treturn RUNNING_TASK_COUNT === CONCURRENCY_COUNT;\n}\n\n/**\n * Gets the next task to run, according to priority and the order they were\n * scheduled.\n */\nfunction getNextTask() {\n\tif (atConcurrencyLimit()) return undefined;\n\n\tconst runningTime = Date.now() - START;\n\n\tfor (const priority of PRIORITIES) {\n\t\tconst { lastStartTime, tasks } = queue[priority];\n\t\tconst nextTask = tasks.shift();\n\t\tif (runningTime <= lastStartTime && nextTask?.canRun({ runningTime })) {\n\t\t\treturn nextTask;\n\t\t}\n\t}\n\n\t// found no suitable tasks, so return undefined\n\treturn undefined;\n}\n\n/**\n * Handles running tasks.\n *\n * Gets the next eligible task from the queue, executes it, then calls the\n * task's resolver with the result.\n *\n * If there are no tasks to run, or the maximum number of tasks are already\n * running, then it does nothing.\n */\nfunction run() {\n\tconst nextTask = getNextTask();\n\tif (!nextTask) return;\n\n\tRUNNING_TASK_COUNT++;\n\n\tconst { name, task, resolver } = nextTask;\n\tconst { endPerformanceMeasure } = startPerformanceMeasure(\n\t\t'dotcom',\n\t\t'scheduler',\n\t\tname,\n\t);\n\ttask()\n\t\t.then(resolver)\n\t\t.catch(console.error)\n\t\t.finally(() => {\n\t\t\tendPerformanceMeasure();\n\t\t\tRUNNING_TASK_COUNT--;\n\t\t\trun();\n\t\t});\n}\n\nexport type ScheduleOptions = {\n\tpriority: Priority;\n\tcanRun?: CanRun;\n};\n\n/**\n * Schedules a task for execution.\n * @param name Human name for the task, used for logging etc.\n * @param task The thing you want to do. This should be a function that\n * returns a promise. Make sure its an _honest_ promise! If you just return\n * `Promise.resolve()` to keep the compiler happy, then the scheduler will\n * think the task instantly completed and start the next one too soon.\n * @param options Options for scheduling a task.\n * @param {Priority} options.priority Priority of the task. Tasks with\n * higher priority will be run first. Defaults to `'standard'`.\n * @returns A promise that resolves when the task completes.\n */\nexport async function schedule<T>(\n\tname: string,\n\ttask: Task<T>,\n\t{ priority, canRun = () => true }: ScheduleOptions,\n): Promise<T> {\n\tconst queueableTask: Partial<QueueableTask<T>> = { name, task, canRun };\n\n\tconst scheduledTask = new Promise<T>(\n\t\t(resolve) => (queueableTask.resolver = resolve),\n\t);\n\n\t// we know this is safe because we know function in the new Promise above\n\t// is synchronous (even if TS doesn't)\n\tqueue[priority].tasks.push(queueableTask as QueueableTask);\n\trun();\n\treturn scheduledTask;\n}\n\nexport function setSchedulerConcurrency(\n\tconcurrency: typeof CONCURRENCY_COUNT,\n): void {\n\tCONCURRENCY_COUNT = concurrency;\n}\n\n/**\n * Set the number of milliseconds since the scheduler was initialised\n * after which tasks of a given priority will no longer be started.\n *\n * Defaults to `Infinity` for all priorities.\n */\nexport function setSchedulerPriorityLastStartTime(\n\tpriority: Priority,\n\tlastStartTime: number,\n): void {\n\tqueue[priority].lastStartTime = lastStartTime;\n\trun();\n}\n","/**\n * Controls whether we should build the variant bundle.\n *\n * Set this to `true` if you want to serve a server-side experiment against\n * the a variant bundle A/B test.\n *\n * Ensure Sentry sampling in sentry/sentryLoader.ts is adjusted for the sample\n * size of the test\n *\n * @type {boolean} prevent TS from narrowing this to its current value\n */\nconst BUILD_VARIANT = false;\n\n/**\n * Server-side test names for running variant test.\n *\n * The name is transformed from kebab-case to camelCase,\n * so we have the relevant prefix captured here.\n *\n * @see https://github.com/guardian/frontend/blob/main/common/app/experiments/Experiments.scala\n *\n * @type {(variant: 'Variant' | 'Control') => import(\"../src/types/config\").ServerSideTestNames}\n */\nconst dcrJavascriptBundle = (variant) => `dcrJavascriptBundle${variant}`;\n\nmodule.exports = {\n\tBUILD_VARIANT,\n\tdcrJavascriptBundle,\n};\n","/**\nDetect whether or not the user has an ad blocking extension enabled.\nA few ad blockers are not detectable with this approach e.g. Safari / Adblock\nCode inspired by just-detect-adblock's:\nhttps://github.com/wmcmurray/just-detect-adblock/blob/master/src/helpers.js\n*/\n/*istanbul ignore file -- adElementBlocked can't be tested without patching each of the properties of\nHTMLElement.prototype that it accesses, defeating the purpose of the test! */\nlet adBlockInUse = undefined;\nfunction adElementBlocked(ad) {\n    if (ad.offsetParent === null ||\n        ad.offsetHeight === 0 ||\n        ad.offsetLeft === 0 ||\n        ad.offsetTop === 0 ||\n        ad.offsetWidth === 0 ||\n        ad.clientHeight === 0 ||\n        ad.clientWidth === 0) {\n        return true;\n    }\n    const adStyles = window.getComputedStyle(ad);\n    if (adStyles.getPropertyValue('display') === 'none')\n        return true;\n    if (adStyles.getPropertyValue('visibility') === 'hidden')\n        return true;\n    const mozBindingProp = adStyles.getPropertyValue('-moz-binding');\n    if (mozBindingProp.includes('about:'))\n        return true;\n    return false;\n}\n/**\n * Determines whether or not the user has an ad blocking extension enabled.\n * Note: positive results can be considered reliable while negative ones may not be.\n * @returns Promise\n */\nexport function isAdBlockInUse() {\n    if (adBlockInUse !== undefined) {\n        return Promise.resolve(adBlockInUse);\n    }\n    if (typeof window.getComputedStyle !== 'function') {\n        // Old browsers not supporting getComputedStyle most likely won't have adBlockers\n        adBlockInUse = false;\n        return Promise.resolve(adBlockInUse);\n    }\n    return new Promise((resolve) => {\n        window.requestAnimationFrame(() => {\n            // create a fake ad element and append it to the document\n            const ad = document.createElement('div');\n            ad.setAttribute('class', 'ad_unit pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner');\n            ad.setAttribute('style', 'width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;');\n            document.body.appendChild(ad);\n            // avoid a forced layout\n            window.requestAnimationFrame(() => {\n                // if the ad element has been hidden, an ad blocker is enabled.\n                resolve(adElementBlocked(ad));\n            });\n        });\n    });\n}\n","import { log } from '@guardian/libs';\nconst supportsPerformanceAPI = () => typeof window !== 'undefined' &&\n    typeof window.performance !== 'undefined' &&\n    typeof window.performance.mark === 'function';\n// Events will be logged using the performance API for all slots, but only these slots will be tracked as commercial metrics and sent to the data lake\nconst trackedSlots = [\n    'top-above-nav',\n    'inline1',\n    'inline2',\n    'fronts-banner-1',\n    'fronts-banner-2',\n];\n// marks that we want to save as commercial metrics\nconst slotMarks = [\n    'slotReady',\n    'adRenderStart',\n    'prebidStart',\n    'adOnPage',\n    'viewable',\n];\n// measures that we want to save as commercial metrics\nconst slotMeasures = [\n    'adRender',\n    'defineSlot',\n    'prepareSlot',\n    'prebid',\n    'fetchAd',\n];\nconst pageMarks = ['commercialStart', 'commercialModulesLoaded'];\n// measures that we want to save as commercial metrics\nconst pageMeasures = ['commercialBoot', 'googletagInit'];\n// all marks, including the measure start and end marks\nconst allSlotMarks = [\n    ...slotMarks,\n    ...slotMeasures.map((measure) => `${measure}Start`),\n    ...slotMeasures.map((measure) => `${measure}End`),\n];\nconst externalMarks = [\n    'cmp-init',\n    'cmp-ui-displayed',\n    'cmp-got-consent',\n];\nconst shouldSave = (name) => {\n    let [origin, type] = name.split('_');\n    if (!type) {\n        type = origin;\n        origin = 'page';\n    }\n    const shouldSaveMark = (trackedSlots.includes(origin) &&\n        slotMarks.includes(type)) ||\n        (origin === 'page' && pageMarks.includes(type));\n    const shouldSaveMeasure = (trackedSlots.includes(origin) &&\n        slotMeasures.includes(type)) ||\n        (origin === 'page' && pageMeasures.includes(type));\n    return shouldSaveMark || shouldSaveMeasure;\n};\nclass EventTimer {\n    _marks;\n    _measures;\n    properties;\n    /**\n     * Initialise the EventTimer class on page.\n     * Returns the singleton instance of the EventTimer class and binds\n     * to window.guardian.commercialTimer. If it's been previously\n     * initialised and bound it returns the original instance\n     * Note: We save to window.guardian.commercialTimer because\n     * different bundles (DCR / DCP) can use commercial core, and we want\n     * all timer events saved to a single instance per-page\n     * @returns {EventTimer} Instance of EventTimer\n     */\n    static init() {\n        return (window.guardian.commercialTimer ||= new EventTimer());\n    }\n    /**\n     * Just a helper method to access the singleton instance of EventTimer.\n     * Typical use case is EventTimer.get().trigger\n     */\n    static get() {\n        return this.init();\n    }\n    /**\n     * These are marks that are not triggered by commercial but we are interested in\n     * tracking their performance. For example, CMP-related events.\n     **/\n    get _externalMarks() {\n        if (!supportsPerformanceAPI()) {\n            return new Map();\n        }\n        return externalMarks.reduce((map, mark) => {\n            const entries = window.performance.getEntriesByName(mark);\n            if (entries.length && entries[0]) {\n                map.set(mark, entries[0]);\n            }\n            return map;\n        }, new Map());\n    }\n    /**\n     * Returns all performance marks that should be saved as commercial metrics.\n     */\n    get marks() {\n        return [...this._marks, ...this._externalMarks].map(([name, timer]) => ({\n            name,\n            ts: timer.startTime,\n        }));\n    }\n    /**\n     * Returns all performance measures that should be saved as commercial metrics.\n     */\n    get measures() {\n        return [...this._measures].map(([name, measure]) => ({\n            name,\n            duration: measure.duration,\n        }));\n    }\n    constructor() {\n        this._marks = new Map();\n        this._measures = new Map();\n        this.properties = {};\n        if (window.navigator.connection) {\n            this.properties.type = window.navigator.connection.type;\n            this.properties.downlink = window.navigator.connection.downlink;\n            this.properties.effectiveType =\n                window.navigator.connection.effectiveType;\n        }\n    }\n    /**\n     * Adds a non timer measurement\n     *\n     * @param {string} name - the property's name\n     * @param value - the property's value\n     */\n    setProperty(name, value) {\n        this.properties[name] = value;\n    }\n    /**\n     * Creates a new performance mark, and if the mark ends with 'End' it will\n     * create a performance measure between the start and end marks.\n     *\n     * Marks can  be triggered multiple times, but we only save the first\n     * instance of a mark, as things like ad refreshes can trigger the same mark.\n     *\n     * More info on the performance API:\n     * https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark\n     * https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure\n     *\n     * @todo more strict typing for eventName and origin\n     * @param eventName The short name applied to the mark\n     * @param origin - Either 'page' (default) or the name of the slot\n     */\n    mark(eventName, origin = 'page') {\n        let name = eventName;\n        if (allSlotMarks.includes(eventName) && origin !== 'page') {\n            name = `${origin}_${name}`;\n        }\n        if (!!this._marks.get(name) || !supportsPerformanceAPI()) {\n            return;\n        }\n        const mark = window.performance.mark(name);\n        if (\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- browser support is patchy\n        typeof mark?.startTime === 'number' &&\n            // we only want to save the marks that are related to certain slots or the page\n            shouldSave(name)) {\n            this._marks.set(name, mark);\n        }\n        if (name.endsWith('End')) {\n            this.measure(name);\n        }\n    }\n    /**\n     * Creates a performance measure given the name of the end marks.\n     * The start mark is inferred from the end mark.\n     *\n     * @param endMark - The name of the mark that ends the measure\n     **/\n    measure(endMark) {\n        const startMark = endMark.replace('End', 'Start');\n        const measureName = endMark.replace('End', '');\n        const startMarkExists = window.performance.getEntriesByName(startMark).length > 0;\n        if (startMarkExists) {\n            try {\n                const measure = window.performance.measure(measureName, startMark, endMark);\n                // we only want to save the measures that are related to certain slots or the page\n                if (measure && shouldSave(measureName)) {\n                    this._measures.set(measureName, measure);\n                }\n            }\n            catch (e) {\n                log('commercial', `error measuring ${measureName}`, e);\n            }\n        }\n    }\n}\nconst _ = {\n    slotMarks,\n    slotMeasures,\n    trackedSlots,\n};\nexport { EventTimer, _, supportsPerformanceAPI };\n","import { breakpoints, isBreakpoint } from './lib/breakpoint';\n/**\n * Store ad sizes in a way that is compatible with google-tag but also accessible via\n * more semantic `width`/`height` properties and keep things readonly.\n *\n * example:\n * const size = new AdSize([300, 250]);\n *\n * size.width === 300; // true\n * size[0] === 300; // true\n *\n * size.height === 250; // true\n * size[1] === 250; // true\n *\n * size[0] = 200; // throws error\n * size.width = 200; // throws error\n *\n */\nclass AdSize extends Array {\n    [0];\n    [1];\n    constructor([width, height]) {\n        super();\n        this[0] = width;\n        this[1] = height;\n    }\n    toString() {\n        return this.width === 0 && this.height === 0\n            ? 'fluid'\n            : `${this.width},${this.height}`;\n    }\n    toArray() {\n        return [this[0], this[1]];\n    }\n    // The advert size is not reflective of the actual size of the advert.\n    // For example, fluid ads and Guardian merch ads are larger than the dimensions\n    isProxy() {\n        const isOutOfPage = this.width === 1 && this.height === 1;\n        const isEmpty = this.width === 2 && this.height === 2;\n        const isFluid = this.toString() === 'fluid';\n        const isMerch = this.width === 88;\n        const isSponsorLogo = this.width === 3 && this.height === 3;\n        return isOutOfPage || isEmpty || isFluid || isMerch || isSponsorLogo;\n    }\n    get width() {\n        return this[0];\n    }\n    get height() {\n        return this[1];\n    }\n}\nconst createAdSize = (width, height) => {\n    return new AdSize([width, height]);\n};\nconst namedStandardAdSizes = {\n    billboard: createAdSize(970, 250),\n    halfPage: createAdSize(300, 600),\n    leaderboard: createAdSize(728, 90),\n    mobilesticky: createAdSize(320, 50),\n    mpu: createAdSize(300, 250),\n    portrait: createAdSize(300, 1050),\n    skyscraper: createAdSize(160, 600),\n    cascade: createAdSize(940, 230),\n    portraitInterstitial: createAdSize(320, 480),\n};\nconst standardAdSizes = {\n    '970x250': namedStandardAdSizes.billboard,\n    '300x600': namedStandardAdSizes.halfPage,\n    '728x90': namedStandardAdSizes.leaderboard,\n    '300x250': namedStandardAdSizes.mpu,\n    '300x1050': namedStandardAdSizes.portrait,\n    '160x600': namedStandardAdSizes.skyscraper,\n};\nconst outstreamSizes = {\n    outstreamDesktop: createAdSize(620, 350),\n    outstreamGoogleDesktop: createAdSize(550, 310),\n    outstreamMobile: createAdSize(300, 197),\n};\n/**\n * Ad sizes commonly associated with third parties\n */\nconst proprietaryAdSizes = {\n    fluid: createAdSize(0, 0),\n    googleCard: createAdSize(300, 274),\n    outOfPage: createAdSize(1, 1),\n    pubmaticInterscroller: createAdSize(371, 660), // pubmatic only mobile size\n};\n/**\n * Ad sizes associated with in-house formats\n */\nconst guardianProprietaryAdSizes = {\n    empty: createAdSize(2, 2),\n    fabric: createAdSize(88, 71),\n    merchandising: createAdSize(88, 88),\n    merchandisingHigh: createAdSize(88, 87),\n    merchandisingHighAdFeature: createAdSize(88, 89),\n    /**\n     * This is a proxy size (not the true size of the rendered creative)\n     * that can be used to ensure that no other high priority line items\n     * fill a certain slot.\n     */\n    sponsorLogo: createAdSize(3, 3),\n};\nconst adSizes = {\n    ...namedStandardAdSizes,\n    ...standardAdSizes,\n    ...outstreamSizes,\n    ...proprietaryAdSizes,\n    ...guardianProprietaryAdSizes,\n};\n/**\n * mark: 432b3a46-90c1-4573-90d3-2400b51af8d0\n * Some of these may or may not need to be synced for with the sizes in ./create-ad-slot.ts\n * these were originally from DCR, create-ad-slot.ts ones were in frontend.\n *\n * Note:\n * If a breakpoint is not defined in a size mapping for a slot, that breakpoint will use the sizes\n * of the next breakpoint down that has a size mapping. For example, if only \"mobile\" and \"phablet\" sizes\n * are defined for a slot, all breakpoints larger than \"phablet\" will use the mapping for \"phablet\".\n *\n * In another example, if a slot has only \"tablet\" as a size mapping defined,\n * then \"desktop\" will use the size mapping for \"tablet\". \"mobile\" and \"phablet\"\n * will have no size mapping. This type of example may be used in cases where\n * we only want the slot to appear on the \"tablet\" size or greater.\n **/\nconst slotSizeMappings = {\n    inline: {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.outstreamMobile,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.fluid,\n        ],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.fluid,\n        ],\n    },\n    right: {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.halfPage,\n            adSizes.fluid,\n        ],\n    },\n    comments: {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.outstreamMobile,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.fluid,\n        ],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.fluid,\n        ],\n    },\n    'comments-expanded': {\n        mobile: [adSizes.mpu, adSizes.empty],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.fluid,\n            adSizes.skyscraper,\n            adSizes.halfPage,\n        ],\n    },\n    'top-above-nav': {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.fabric,\n            adSizes.outstreamMobile,\n            adSizes.mpu,\n            adSizes.fluid,\n        ],\n        tablet: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.fabric,\n            adSizes.fluid,\n            adSizes.leaderboard,\n        ],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.leaderboard,\n            createAdSize(940, 230),\n            createAdSize(900, 250),\n            adSizes.billboard,\n            adSizes.fabric,\n            adSizes.fluid,\n        ],\n    },\n    'fronts-banner': {\n        tablet: [adSizes.empty, adSizes.leaderboard],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.billboard,\n            adSizes.merchandisingHigh,\n            adSizes.fluid,\n        ],\n    },\n    mostpop: {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.fluid,\n        ],\n        phablet: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.outstreamMobile,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.halfPage,\n            adSizes.fluid,\n        ],\n        tablet: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.halfPage,\n            adSizes.fluid,\n        ],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.googleCard,\n            adSizes.halfPage,\n            adSizes.fluid,\n        ],\n    },\n    'liveblog-top': {\n        mobile: [adSizes.outOfPage, adSizes.empty, adSizes.mpu, adSizes.fluid],\n        tablet: [],\n        desktop: [],\n    },\n    'merchandising-high': {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.merchandisingHigh,\n            adSizes.fluid,\n            adSizes.mpu,\n        ],\n        tablet: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.merchandisingHigh,\n            adSizes.fluid,\n        ],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.merchandisingHigh,\n            adSizes.fluid,\n            adSizes.billboard,\n        ],\n    },\n    merchandising: {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.merchandising,\n            adSizes.fluid,\n            adSizes.mpu,\n        ],\n        tablet: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.merchandising,\n            adSizes.fluid,\n        ],\n        desktop: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.merchandising,\n            adSizes.fluid,\n            adSizes.billboard,\n        ],\n    },\n    survey: {\n        desktop: [adSizes.outOfPage],\n    },\n    carrot: {\n        mobile: [adSizes.fluid],\n    },\n    'mobile-sticky': {\n        mobile: [adSizes.mobilesticky, adSizes.empty, createAdSize(300, 50)],\n    },\n    'crossword-banner-mobile': {\n        mobile: [adSizes.mobilesticky],\n    },\n    'crossword-banner': {\n        phablet: [adSizes.outOfPage, adSizes.empty, adSizes.leaderboard],\n    },\n    'football-right': {\n        desktop: [\n            adSizes.empty,\n            adSizes.mpu,\n            adSizes.skyscraper,\n            adSizes.halfPage,\n        ],\n    },\n    'article-end': {\n        mobile: [], // Mappings are dynamically added for this slot using additionalSizes\n    },\n    exclusion: {\n        mobile: [adSizes.empty],\n    },\n    /**\n     * @deprecated Use `slotSizeMappings['sponsor-logo']` instead\n     */\n    external: {\n        mobile: [adSizes.outOfPage, adSizes.empty, adSizes.fluid, adSizes.mpu],\n    },\n    'sponsor-logo': {\n        mobile: [\n            adSizes.outOfPage,\n            adSizes.empty,\n            adSizes.fluid,\n            adSizes.sponsorLogo,\n        ],\n    },\n    interactive: {\n        // Mappings are dynamically added for this slot using data attributes\n        mobile: [adSizes.outOfPage, adSizes.empty],\n        tablet: [adSizes.outOfPage, adSizes.empty],\n        desktop: [adSizes.outOfPage, adSizes.empty],\n    },\n};\nconst getAdSize = (size) => adSizes[size];\n/**\n * Finds the ad sizes that will be used for a breakpoint given a size mapping\n *\n * If ad sizes are defined in the size mapping for the specified breakpoint, we use that.\n * If no sizes are defined for the breakpoint, use the next smallest breakpoint with defined ad sizes.\n * If no smaller breakpoints have defined ad sizes, return an empty array\n *\n * Example:\n * For the following slotSizeMappings:\n *     inline: {\n *         phablet: [adSizes.mpu],\n *         desktop: [adSizes.billboard]\n *     }\n * the applied sizes for each breakpoint for the \"inline\" slot will be:\n *     mobile: []\n *     phablet: [adSizes.mpu]\n *     tablet: [adSizes.mpu]\n *     desktop: [adSizes.billboard]\n *\n * See ad-sizes.test.ts for more examples\n */\nconst findAppliedSizesForBreakpoint = (sizeMappings, breakpoint) => {\n    if (!isBreakpoint(breakpoint)) {\n        return [];\n    }\n    let breakpointIndex = breakpoints.findIndex((b) => b === breakpoint);\n    while (breakpointIndex >= 0) {\n        const breakpointToTry = breakpoints[breakpointIndex];\n        const sizeMapping = sizeMappings[breakpointToTry];\n        if (sizeMapping?.length) {\n            return sizeMapping;\n        }\n        breakpointIndex--;\n    }\n    // There are no size mappings defined for any size smaller than the breakpoint\n    return [];\n};\n// Export for testing\nexport const _ = { createAdSize };\nexport { AdSize, adSizes, standardAdSizes, outstreamSizes, getAdSize, slotSizeMappings, createAdSize, findAppliedSizesForBreakpoint, };\n","/**\n * Unit: pixels\n */\nexport const AD_LABEL_HEIGHT = 24;\n","import { getMeasures, isNonNullable, log, onConsent } from '@guardian/libs';\nimport { EventTimer } from './event-timer';\nvar Endpoints;\n(function (Endpoints) {\n    Endpoints[\"CODE\"] = \"//performance-events.code.dev-guardianapis.com/commercial-metrics\";\n    Endpoints[\"PROD\"] = \"//performance-events.guardianapis.com/commercial-metrics\";\n})(Endpoints || (Endpoints = {}));\nlet commercialMetricsPayload = {\n    page_view_id: undefined,\n    browser_id: undefined,\n    platform: 'NEXT_GEN',\n    metrics: [],\n    properties: [],\n};\nlet devProperties = [];\nlet adBlockerProperties = [];\nlet endpoint;\nconst setEndpoint = (isDev) => (endpoint = isDev ? Endpoints.CODE : Endpoints.PROD);\nconst setDevProperties = (isDev) => (devProperties = isDev\n    ? [{ name: 'isDev', value: window.location.hostname }]\n    : []);\nconst setAdBlockerProperties = (adBlockerInUse) => {\n    adBlockerProperties =\n        adBlockerInUse !== undefined\n            ? [\n                {\n                    name: 'adBlockerInUse',\n                    value: adBlockerInUse.toString(),\n                },\n            ]\n            : [];\n};\nconst transformToObjectEntries = (eventTimerProperties) => {\n    // Transforms object {key: value} pairs into an array of [key, value] arrays\n    return Object.entries(eventTimerProperties);\n};\nconst mapEventTimerPropertiesToString = (properties) => {\n    return properties.map(([name, value]) => ({\n        name: String(name),\n        value: String(value),\n    }));\n};\nconst roundTimeStamp = (events, measures) => {\n    const roundedEvents = events.map(({ name, ts }) => ({\n        name,\n        value: Math.ceil(ts),\n    }));\n    const roundedMeasures = measures.map(({ name, duration }) => ({\n        name,\n        value: Math.ceil(duration),\n    }));\n    return [...roundedEvents, ...roundedMeasures];\n};\nfunction sendMetrics() {\n    log('commercial', 'About to send commercial metrics', commercialMetricsPayload);\n    void fetch(endpoint, {\n        method: 'POST',\n        body: JSON.stringify(commercialMetricsPayload),\n        keepalive: true,\n        cache: 'no-store',\n        mode: 'no-cors',\n    });\n}\n/**\n * Gather how many times the user has experienced the “offline” event\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/offline_event\n *\n * This value should be fetched as late as possible in the page lifecycle,\n * to get an accurate value.\n *\n * Relevant for an @guardian/open-journalism investigation.\n */\nconst getOfflineCount = () => typeof window.guardian.offlineCount === 'number'\n    ? [\n        {\n            name: 'offlineCount',\n            value: window.guardian.offlineCount,\n        },\n    ]\n    : [];\n/**\n * Measures added with @guardian/libs’s `startPerformanceMeasure`\n *\n * Allows for more granular monitoring of web page performance.\n */\nconst getPerformanceMeasures = (...teams) => getMeasures(teams).map(({ detail: { subscription, name, action }, duration }) => ({\n    name: [subscription, name, action].filter(isNonNullable).join('_'),\n    value: duration,\n}));\nfunction gatherMetricsOnPageUnload() {\n    // Assemble commercial properties and metrics\n    const eventTimer = EventTimer.get();\n    const transformedEntries = transformToObjectEntries(eventTimer.properties);\n    const filteredEventTimerProperties = transformedEntries.filter((item) => typeof item[1] !== 'undefined');\n    const mappedEventTimerProperties = mapEventTimerPropertiesToString(filteredEventTimerProperties);\n    const properties = mappedEventTimerProperties\n        .concat(devProperties)\n        .concat(adBlockerProperties);\n    commercialMetricsPayload.properties = properties;\n    const metrics = roundTimeStamp(eventTimer.marks, eventTimer.measures)\n        .concat(getOfflineCount())\n        .concat(getPerformanceMeasures('dotcom'));\n    commercialMetricsPayload.metrics = metrics;\n    sendMetrics();\n}\nconst listener = (e) => {\n    if (window.guardian.config.shouldSendCommercialMetrics === true) {\n        switch (e.type) {\n            case 'visibilitychange':\n                if (document.visibilityState === 'hidden') {\n                    gatherMetricsOnPageUnload();\n                }\n                return;\n            case 'pagehide':\n                gatherMetricsOnPageUnload();\n                return;\n        }\n    }\n};\nconst addVisibilityListeners = () => {\n    // Report all available metrics when the page is unloaded or in background.\n    window.addEventListener('visibilitychange', listener, { once: true });\n    // Safari does not reliably fire the `visibilitychange` on page unload.\n    window.addEventListener('pagehide', listener, { once: true });\n};\nconst checkConsent = async () => {\n    const consentState = await onConsent();\n    if (consentState.tcfv2) {\n        // TCFv2 mode - check for consent\n        const consents = consentState.tcfv2.consents;\n        const REQUIRED_CONSENTS = [7, 8];\n        return REQUIRED_CONSENTS.every((consent) => consents[consent]);\n    }\n    // non-TCFv2 mode - don't check for consent\n    return true;\n};\n/**\n * A method to asynchronously send metrics after initialization.\n */\nasync function bypassCommercialMetricsSampling() {\n    if (!window.guardian.config.commercialMetricsInitialised) {\n        console.warn('initCommercialMetrics not yet initialised');\n        return;\n    }\n    const consented = await checkConsent();\n    if (consented) {\n        window.guardian.config.shouldSendCommercialMetrics = true;\n    }\n    else {\n        log('commercial', \"Metrics won't be sent because consent wasn't given\");\n    }\n}\n/**\n * A method to initialise metrics.\n * Note: this is initialised in the frontend/DCR bundles, not the commercial bundle.\n * @param init.pageViewId - identifies the page view. Usually available on `guardian.config.ophan.pageViewId`. Defaults to `null`\n * @param init.browserId - identifies the browser. Usually available via `getCookie({ name: 'bwid' })`. Defaults to `null`\n * @param init.isDev - used to determine whether to use CODE or PROD endpoints.\n * @param init.adBlockerInUse - indicates whether or not an adblocker is being used.\n * @param init.sampling - rate at which to sample commercial metrics - the default is to send for 1% of pageviews\n */\nasync function initCommercialMetrics({ pageViewId, browserId, isDev, adBlockerInUse, sampling = 1 / 100, }) {\n    commercialMetricsPayload.page_view_id = pageViewId;\n    commercialMetricsPayload.browser_id = browserId;\n    setEndpoint(isDev);\n    setDevProperties(isDev);\n    setAdBlockerProperties(adBlockerInUse);\n    addVisibilityListeners();\n    if (window.guardian.config.commercialMetricsInitialised) {\n        return false;\n    }\n    window.guardian.config.commercialMetricsInitialised = true;\n    const userIsInSamplingGroup = Math.random() <= sampling;\n    if (isDev || userIsInSamplingGroup) {\n        const consented = await checkConsent();\n        if (consented) {\n            window.guardian.config.shouldSendCommercialMetrics = true;\n            return true;\n        }\n        log('commercial', \"Metrics won't be sent because consent wasn't given\");\n    }\n    return false;\n}\nexport const _ = {\n    Endpoints,\n    setEndpoint,\n    mapEventTimerPropertiesToString,\n    roundTimeStamp,\n    transformToObjectEntries,\n    reset: () => {\n        window.guardian.config.commercialMetricsInitialised = false;\n        window.guardian.config.shouldSendCommercialMetrics = false;\n        commercialMetricsPayload = {\n            page_view_id: undefined,\n            browser_id: undefined,\n            platform: 'NEXT_GEN',\n            metrics: [],\n            properties: [],\n        };\n        removeEventListener('visibilitychange', listener);\n        removeEventListener('pagehide', listener);\n    },\n};\nexport { bypassCommercialMetricsSampling, initCommercialMetrics, checkConsent };\n","import { deserialise } from './serialise.js';\n\nconst getMeasures = (subscriptions) => (\n  // https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByType#browser_compatibility\n  \"getEntriesByType\" in window.performance ? window.performance.getEntriesByType(\"measure\").flatMap(({ entryType, name, duration, startTime }) => {\n    const detail = deserialise(name);\n    return entryType === \"measure\" && detail && subscriptions.includes(detail.subscription) ? {\n      name,\n      detail,\n      duration,\n      entryType,\n      startTime,\n      toJson: () => JSON.stringify(void 0)\n    } : [];\n  }) : []\n);\n\nexport { getMeasures };\n","import { getCookie, isString, storage } from '@guardian/libs';\nconst KEY = 'GU_geo_country';\nconst KEY_OVERRIDE = 'gu.geo.override';\nconst COUNTRY_REGEX = /^[A-Z]{2}$/;\n// best guess that we have a valid code, without actually shipping the entire list\nconst isValidCountryCode = (country) => isString(country) && COUNTRY_REGEX.test(country);\n// we'll cache any successful lookups so we only have to do this once\nlet locale;\nconst editionToGeolocationMap = {\n    UK: 'GB',\n    US: 'US',\n    AU: 'AU',\n};\nconst editionToGeolocation = (editionKey) => editionToGeolocationMap[editionKey];\n// just used for tests\nexport const __resetCachedValue = () => (locale = undefined);\n/**\n * Fetches the user's current location as an ISO 3166-1 alpha-2 string e.g. 'GB', 'AU' etc\n * Note: This has been copied from guardian-libs and made syncronous by ommiting the call to\n * the geolocation API\n */\nexport const getLocale = () => {\n    if (locale)\n        return locale;\n    // return overridden geo from localStorage, used for changing geo only for development purposes\n    const geoOverride = storage.local.get(KEY_OVERRIDE);\n    if (isValidCountryCode(geoOverride)) {\n        return (locale = geoOverride);\n    }\n    // return locale from cookie if it exists\n    const stored = getCookie({ name: KEY });\n    if (stored && isValidCountryCode(stored)) {\n        return (locale = stored);\n    }\n    // return locale from edition\n    const editionCountryCode = editionToGeolocation(window.guardian.config.page.edition);\n    return (locale = editionCountryCode);\n};\n","import { isString } from '@guardian/libs';\n/* -- Types -- */\nconst videoLengths = [\n    '25', // TODO: confirm this is a real value\n    '30',\n    '60',\n    '90',\n    '120',\n    '150',\n    '180',\n    '210',\n    '240',\n    '270',\n    '300',\n];\n/* -- Methods -- */\nconst getVideoLength = (videoLength) => {\n    const index = Math.min(Math.ceil(videoLength / 30), 10);\n    return videoLengths[index] ?? null;\n};\nconst getUrlKeywords = (url) => {\n    const lastSegment = url\n        .split('/')\n        .filter(Boolean) // This handles a trailing slash\n        .slice(-1)[0];\n    return isString(lastSegment) ? lastSegment.split('-').filter(Boolean) : [];\n};\nconst concatUnique = (a, b) => [\n    ...new Set([...a, ...b]),\n];\n// \"0\" means content < 2 hours old\n// \"1\" means content between 2 hours and 24 hours old.\n// \"2\" means content between 24 hours and 3 days old\n// \"3\" means content between 3 and 7 days old\n// \"4\" means content between 7 days and 1 month old\n// \"5\" means content between 1 and 10 months old\n// \"6\" means content between 10 and 14 months old\n// \"7\" means content more than 14 months old\nconst calculateRecentlyPublishedBucket = (webPublicationDate) => {\n    const now = Date.now();\n    const hoursSincePublication = (now - webPublicationDate) / 1000 / 60 / 60;\n    const daysSincePublication = hoursSincePublication / 24;\n    const monthsSincePublication = daysSincePublication / 30; // near enough for our purposes\n    if (hoursSincePublication < 2)\n        return '0';\n    if (hoursSincePublication < 24)\n        return '1';\n    if (daysSincePublication < 3)\n        return '2';\n    if (daysSincePublication < 7)\n        return '3';\n    if (daysSincePublication < 30)\n        return '4';\n    if (monthsSincePublication < 10)\n        return '5';\n    if (monthsSincePublication < 14)\n        return '6';\n    return '7';\n};\nconst getContentTargeting = ({ eligibleForDCR, path, renderingPlatform, section, sensitive, videoLength, webPublicationDate, keywords, }) => {\n    const urlkw = getUrlKeywords(path);\n    return {\n        dcre: eligibleForDCR ? 't' : 'f',\n        rc: calculateRecentlyPublishedBucket(webPublicationDate),\n        rp: renderingPlatform,\n        s: section,\n        sens: sensitive ? 't' : 'f',\n        urlkw,\n        vl: videoLength ? getVideoLength(videoLength) : null,\n        allkw: concatUnique(urlkw, keywords),\n    };\n};\nexport { getContentTargeting };\n","import { storage } from '@guardian/libs';\nconst PERMUTIVE_KEY = `_papns`;\nconst PERMUTIVE_PFP_KEY = `_pdfps`;\nconst getSegments = (key) => {\n    try {\n        const rawSegments = storage.local.getRaw(key);\n        const segments = rawSegments\n            ? JSON.parse(rawSegments)\n            : null;\n        if (!Array.isArray(segments))\n            return [];\n        return segments\n            .slice(0, 250)\n            .map((s) => Number.parseInt(s, 10))\n            .filter((n) => typeof n === 'number' && !Number.isNaN(n))\n            .map(String);\n    }\n    catch (err) {\n        return [];\n    }\n};\nconst getPermutiveSegments = () => getSegments(PERMUTIVE_KEY);\nconst getPermutivePFPSegments = () => getSegments(PERMUTIVE_PFP_KEY);\nconst clearPermutiveSegments = () => {\n    storage.local.remove(PERMUTIVE_KEY);\n    storage.local.remove(PERMUTIVE_PFP_KEY);\n};\nexport const _ = {\n    PERMUTIVE_KEY,\n    PERMUTIVE_PFP_KEY,\n    getSegments,\n};\nexport { getPermutiveSegments, getPermutivePFPSegments, clearPermutiveSegments, };\n","import { storage } from '@guardian/libs';\nimport { clearPermutiveSegments, getPermutivePFPSegments, getPermutiveSegments, } from '../permutive';\n/* -- Types -- */\nconst frequency = [\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6-9',\n    '10-15',\n    '16-19',\n    '20-29',\n    '30plus',\n];\nconst AMTGRP_STORAGE_KEY = 'gu.adManagerGroup';\nconst adManagerGroups = [\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n    '10',\n    '11',\n    '12',\n];\n/* -- Methods -- */\nconst getRawWithConsent = (key, state) => {\n    if (state.tcfv2) {\n        if (state.tcfv2.consents['1'])\n            return storage.local.getRaw(key);\n    }\n    if (state.usnat) {\n        if (!state.usnat.doNotSell)\n            return storage.local.getRaw(key);\n    }\n    if (state.aus) {\n        if (state.aus.personalisedAdvertising)\n            return storage.local.getRaw(key);\n    }\n    return null;\n};\nconst getFrequencyValue = (state) => {\n    const rawValue = getRawWithConsent('gu.alreadyVisited', state);\n    if (!rawValue)\n        return '0';\n    const visitCount = parseInt(rawValue, 10);\n    if (visitCount <= 5) {\n        return frequency[visitCount] ?? '0';\n    }\n    else if (visitCount >= 6 && visitCount <= 9) {\n        return '6-9';\n    }\n    else if (visitCount >= 10 && visitCount <= 15) {\n        return '10-15';\n    }\n    else if (visitCount >= 16 && visitCount <= 19) {\n        return '16-19';\n    }\n    else if (visitCount >= 20 && visitCount <= 29) {\n        return '20-29';\n    }\n    else if (visitCount >= 30) {\n        return '30plus';\n    }\n    return '0';\n};\nconst getCMPTargeting = (state) => {\n    if (state.tcfv2) {\n        return {\n            cmp_interaction: state.tcfv2.eventStatus,\n            pa: state.canTarget ? 't' : 'f',\n            consent_tcfv2: state.canTarget ? 't' : 'f',\n            rdp: 'na',\n        };\n    }\n    if (state.usnat) {\n        return {\n            consent_tcfv2: 'na',\n            rdp: !state.canTarget ? 't' : 'f',\n            pa: state.canTarget ? 't' : 'f',\n        };\n    }\n    if (state.aus) {\n        return {\n            consent_tcfv2: 'na',\n            rdp: 'na',\n            pa: state.canTarget ? 't' : 'f',\n        };\n    }\n    return {\n        cmp_interaction: 'na',\n        consent_tcfv2: 'na',\n        rdp: 'na',\n        pa: 'f',\n    };\n};\nconst isAdManagerGroup = (s) => adManagerGroups.some((g) => g === s);\nconst createAdManagerGroup = () => {\n    const index = Math.floor(Math.random() * adManagerGroups.length);\n    const group = adManagerGroups[index] ?? '12';\n    storage.local.setRaw(AMTGRP_STORAGE_KEY, group);\n    return group;\n};\nconst getAdManagerGroup = (state) => {\n    if (!state.framework) {\n        storage.local.remove(AMTGRP_STORAGE_KEY);\n        return null;\n    }\n    if (state.tcfv2 && !state.canTarget) {\n        storage.local.remove(AMTGRP_STORAGE_KEY);\n        return null;\n    }\n    const existingGroup = storage.local.getRaw(AMTGRP_STORAGE_KEY);\n    return isAdManagerGroup(existingGroup)\n        ? existingGroup\n        : createAdManagerGroup();\n};\nconst getPermutiveWithState = (state, youtube) => {\n    if (state.canTarget) {\n        return youtube ? getPermutivePFPSegments() : getPermutiveSegments();\n    }\n    clearPermutiveSegments();\n    return [];\n};\nconst getPersonalisedTargeting = ({ state, youtube, }) => ({\n    amtgrp: getAdManagerGroup(state),\n    fr: getFrequencyValue(state),\n    permutive: getPermutiveWithState(state, youtube),\n    ...getCMPTargeting(state),\n});\nexport { getPersonalisedTargeting };\n","import { isString } from '@guardian/libs';\n/* -- Types -- */\nconst referrers = [\n    {\n        id: 'facebook',\n        match: 'facebook.com',\n    },\n    {\n        id: 'google',\n        match: 'www.google',\n    },\n    {\n        id: 'twitter',\n        match: '/t.co/',\n    },\n    {\n        id: 'reddit',\n        match: 'reddit.com',\n    },\n];\n/* -- Methods -- */\nconst getReferrer = (referrer) => {\n    if (referrer === '')\n        return null;\n    const matchedRef = referrers.find((referrerType) => referrer.includes(referrerType.match)) ?? null;\n    return matchedRef ? matchedRef.id : null;\n};\nconst experimentsTargeting = ({ clientSideParticipations, serverSideParticipations, }) => {\n    const testToParams = (testName, variant) => {\n        if (variant === 'notintest')\n            return null;\n        // GAM key-value pairs accept value strings up to 40 characters long\n        return `${testName}-${variant}`.substring(0, 40);\n    };\n    const clientSideExperiment = Object.entries(clientSideParticipations)\n        .map((test) => {\n        const [name, variant] = test;\n        return testToParams(name, variant.variant);\n    })\n        .filter(isString);\n    const serverSideExperiments = Object.entries(serverSideParticipations)\n        .map((test) => testToParams(...test))\n        .filter(isString);\n    if (clientSideExperiment.length + serverSideExperiments.length === 0) {\n        return null;\n    }\n    return [...clientSideExperiment, ...serverSideExperiments];\n};\nconst getSessionTargeting = ({ adTest, countryCode, isSignedIn, pageViewId, participations, referrer, }) => ({\n    ab: experimentsTargeting(participations),\n    at: adTest,\n    cc: countryCode,\n    pv: pageViewId,\n    ref: getReferrer(referrer),\n    si: isSignedIn ? 't' : 'f',\n});\nexport { getSessionTargeting, experimentsTargeting };\n","import { isString } from '@guardian/libs';\nconst isTargetingString = (string) => isString(string) && string !== '';\nconst isTargetingArray = (array) => Array.isArray(array) && array.filter(isTargetingString).length > 0;\nconst isValidTargeting = (value) => {\n    if (isTargetingString(value))\n        return true;\n    if (isTargetingArray(value))\n        return true;\n    return false;\n};\n/**\n * Picks only keys with targeting values from an object.\n * A targeting values is defined as either:\n * - a non-empty string\n * - an array of non-empty strings\n *\n * If you object is read-only, you can safely access properties on the result.\n * For example:\n *\n * ```ts\n * dirty = {\n *   valid: 'real',\n *   invalid: undefined,\n * } as const;\n *\n * clean = pickDefinedValues(dirty);\n *\n * // @ts-expect-error -- you can’t access this property\n * clean.invalid\n * ```\n */\nexport const pickTargetingValues = (obj) => {\n    const initialValue = {};\n    return Object.entries(obj).reduce((valid, [key, value]) => {\n        if (isValidTargeting(value)) {\n            // @ts-expect-error -- isValidTargeting checks this\n            valid[key] = Array.isArray(value)\n                ? value.filter(isTargetingString)\n                : value;\n        }\n        return valid;\n    }, initialValue);\n};\n","import { pickTargetingValues } from './pick-targeting-values';\n/* -- Types -- */\nconst brands = {\n    Foundation: 'f',\n    Paid: 'p',\n    Sponsored: 's',\n};\nconst contentTypes = [\n    'article',\n    'audio',\n    'crossword',\n    'gallery',\n    'interactive',\n    'liveblog',\n    'network-front',\n    'section',\n    'tag',\n    'video',\n];\nconst editions = {\n    UnitedKingdom: 'uk',\n    UnitedStates: 'us',\n    Australia: 'au',\n    International: 'int',\n};\nconst platforms = {\n    R2: 'r2',\n    NextGen: 'ng',\n    MobileApp: 'app',\n    AcceleratedMobilePages: 'amp',\n};\nconst surges = {\n    0: '0',\n    50: '5',\n    100: '4',\n    200: '3',\n    300: '2',\n    400: '1',\n};\n/* -- Methods -- */\nconst getSurgingParam = (surging) => {\n    if (surging < 50 || isNaN(surging))\n        return ['0'];\n    const thresholds = [400, 300, 200, 100, 50];\n    return thresholds.filter((n) => n <= surging).map((s) => surges[s]);\n};\n/* -- Targeting -- */\n/**\n * What goes in comes out\n */\nconst getSharedTargeting = (shared) => pickTargetingValues(shared);\nexport const _ = {\n    getSurgingParam,\n};\nexport { getSharedTargeting };\n","import { cmp, getCookie, isString } from '@guardian/libs';\nimport { supportsPerformanceAPI } from '../event-timer';\nimport { getLocale } from '../lib/get-locale';\nimport { getContentTargeting } from './content';\nimport { getPersonalisedTargeting } from './personalised';\nimport { getSessionTargeting } from './session';\nimport { getSharedTargeting } from './shared';\nimport { getViewportTargeting } from './viewport';\nconst filterValues = (pageTargets) => {\n    const filtered = {};\n    for (const key in pageTargets) {\n        const value = pageTargets[key];\n        if (isString(value)) {\n            filtered[key] = value;\n        }\n        else if (Array.isArray(value) &&\n            value.length > 0 &&\n            value.every(isString)) {\n            filtered[key] = value;\n        }\n    }\n    return filtered;\n};\nconst lastPerformanceEntryIsNavigationType = () => {\n    if (!supportsPerformanceAPI()) {\n        return false;\n    }\n    const navigationEvents = performance.getEntriesByType('navigation');\n    const lastNavigationEvent = navigationEvents[navigationEvents.length - 1];\n    // https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEntry/entryType#navigation\n    return lastNavigationEvent?.entryType === 'navigation';\n};\nconst referrerMatchesHost = (referrer) => {\n    if (!referrer) {\n        return false;\n    }\n    const referrerUrl = new URL(referrer);\n    return referrerUrl.hostname === window.location.hostname;\n};\n// A consentless friendly way of determining if this is the users first visit to the page\nconst isFirstVisit = (referrer) => {\n    if (supportsPerformanceAPI() && !lastPerformanceEntryIsNavigationType()) {\n        return false;\n    }\n    return !referrerMatchesHost(referrer);\n};\nconst buildPageTargeting = ({ adFree, clientSideParticipations, consentState, isSignedIn = false, youtube = false, }) => {\n    const { page, isDotcomRendering } = window.guardian.config;\n    const adFreeTargeting = adFree ? { af: 't' } : {};\n    const sharedAdTargeting = page.sharedAdTargeting\n        ? getSharedTargeting(page.sharedAdTargeting)\n        : {};\n    const contentTargeting = getContentTargeting({\n        webPublicationDate: page.webPublicationDate,\n        eligibleForDCR: page.dcrCouldRender,\n        path: `/${page.pageId}`,\n        renderingPlatform: isDotcomRendering\n            ? 'dotcom-rendering'\n            : 'dotcom-platform',\n        section: page.section,\n        sensitive: page.isSensitive,\n        videoLength: page.videoDuration,\n        keywords: sharedAdTargeting.k ?? [],\n    });\n    const referrer = document.referrer || '';\n    const sessionTargeting = getSessionTargeting({\n        adTest: getCookie({ name: 'adtest', shouldMemoize: true }),\n        countryCode: getLocale(),\n        isSignedIn,\n        pageViewId: window.guardian.config.ophan.pageViewId,\n        participations: {\n            clientSideParticipations,\n            serverSideParticipations: window.guardian.config.tests ?? {},\n        },\n        referrer,\n    });\n    const getViewport = () => {\n        return {\n            width: window.innerWidth || document.body.clientWidth || 0,\n            height: window.innerHeight || document.body.clientHeight || 0,\n        };\n    };\n    const viewportTargeting = getViewportTargeting({\n        viewPortWidth: getViewport().width,\n        cmpBannerWillShow: !cmp.hasInitialised() || cmp.willShowPrivacyMessageSync(),\n    });\n    const personalisedTargeting = getPersonalisedTargeting({\n        state: consentState,\n        youtube,\n    });\n    const consentlessTargeting = {};\n    if (!consentState.canTarget) {\n        consentlessTargeting.firstvisit = isFirstVisit(referrer) ? 't' : 'f';\n    }\n    const pageTargets = {\n        ...personalisedTargeting,\n        ...sharedAdTargeting,\n        ...adFreeTargeting,\n        ...contentTargeting,\n        ...sessionTargeting,\n        ...viewportTargeting,\n        ...consentlessTargeting,\n    };\n    // filter !(string | string[]) and empty values\n    const pageTargeting = filterValues(pageTargets);\n    return pageTargeting;\n};\nexport { buildPageTargeting, filterValues };\n","/* -- Methods -- */\nconst findBreakpoint = (width) => {\n    if (width >= 980)\n        return 'desktop';\n    if (width >= 660)\n        return 'tablet';\n    return 'mobile';\n};\nconst getViewportTargeting = ({ viewPortWidth, cmpBannerWillShow, }) => {\n    // Don’t show inskin if if a privacy message will be shown or on preview\n    const isPreview = window.guardian.config.page.isPreview;\n    const inskin = cmpBannerWillShow || isPreview ? 'f' : 't';\n    return {\n        bp: findBreakpoint(viewPortWidth),\n        skinsize: viewPortWidth >= 1560 ? 'l' : 's',\n        inskin,\n    };\n};\nexport { getViewportTargeting };\n","import { log } from '@guardian/libs';\nimport { buildPageTargeting, filterValues } from './build-page-targeting';\n/**\n * @param  {Record<string, MaybeArray<string|number|boolean>>\n * Follows https://support.google.com/admanager/answer/1080597\n */\nconst encodeCustomParams = (params) => {\n    const encodedParams = Object.entries(params)\n        .map(([key, value]) => {\n        const queryValue = Array.isArray(value)\n            ? value.join(',')\n            : String(value);\n        return `${key}=${encodeURIComponent(queryValue)}`;\n    })\n        .join('&');\n    return encodedParams;\n};\nconst mergeCustomParamsWithTargeting = (customParams, consentState, clientSideParticipations, isSignedIn) => {\n    let pageTargeting = {};\n    try {\n        pageTargeting = buildPageTargeting({\n            adFree: false,\n            clientSideParticipations,\n            consentState: consentState,\n            isSignedIn: isSignedIn,\n        });\n    }\n    catch (e) {\n        /**\n         * Defensive error handling in case YoutubeAtom is used in an\n         * environment where guardian.config, cookies, localstorage etc\n         * are not available\n         */\n        log('commercial', 'Error building YouTube IMA custom params', e);\n        return customParams;\n    }\n    const mergedCustomParams = {\n        ...customParams,\n        ...pageTargeting,\n    };\n    return mergedCustomParams;\n};\nconst buildImaAdTagUrl = ({ adUnit, clientSideParticipations, consentState, customParams, isSignedIn, }) => {\n    const mergedCustomParams = mergeCustomParamsWithTargeting(customParams, consentState, clientSideParticipations, isSignedIn);\n    const queryParams = {\n        iu: adUnit,\n        tfcd: '0',\n        npa: '0',\n        sz: '480x360|480x361|400x300',\n        gdfp_req: '1',\n        output: 'vast',\n        unviewed_position_start: '1',\n        env: 'vp',\n        impl: 's',\n        vad_type: 'linear',\n        vpos: 'preroll',\n        description_url: encodeURIComponent(`${window.guardian.config.page.host}/${window.guardian.config.page.pageId}`),\n        /**\n         * cust_params string is encoded\n         * cust_params values are also encoded so they will get double encoded\n         * this ensures any values with separator chars (=&,) do not conflict with the main string\n         */\n        cust_params: encodeURIComponent(encodeCustomParams(filterValues(mergedCustomParams))),\n    };\n    const queryParamsArray = [];\n    for (const [k, v] of Object.entries(queryParams)) {\n        queryParamsArray.push(`${k}=${v}`);\n    }\n    return ('https://securepubads.g.doubleclick.net/gampad/ads?' +\n        queryParamsArray.join('&'));\n};\nexport { buildImaAdTagUrl };\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","var version = \"19.2.1\";\n\nexport { version };\n","import { log } from '../logger/logger.js';\n\nlet currentFramework;\nconst setCurrentFramework = (framework) => {\n  log(\"cmp\", `Framework set to ${framework}`);\n  currentFramework = framework;\n};\nconst getCurrentFramework = () => currentFramework;\n\nexport { getCurrentFramework, setCurrentFramework };\n","import { log } from '../../logger/logger.js';\n\nconst mark = (label) => {\n  window.performance?.mark?.(label);\n  if (process.env.NODE_ENV !== \"test\") {\n    log(\"cmp\", \"[event]\", label);\n  }\n};\n\nexport { mark };\n","const isServerSide = typeof window === \"undefined\";\nconst serverSideWarn = () => {\n  console.warn(\n    \"This is a server-side version of the @guardian/consent-management-platform\",\n    \"No consent signals will be received.\"\n  );\n};\nconst serverSideWarnAndReturn = (arg) => {\n  return () => {\n    serverSideWarn();\n    return arg;\n  };\n};\nconst cmp = {\n  __disable: serverSideWarn,\n  __enable: serverSideWarnAndReturn(false),\n  __isDisabled: serverSideWarnAndReturn(false),\n  hasInitialised: serverSideWarnAndReturn(false),\n  init: serverSideWarn,\n  showPrivacyManager: serverSideWarn,\n  version: \"n/a\",\n  willShowPrivacyMessage: serverSideWarnAndReturn(Promise.resolve(false)),\n  willShowPrivacyMessageSync: serverSideWarnAndReturn(false)\n};\nconst onConsent = () => {\n  serverSideWarn();\n  return Promise.resolve({\n    canTarget: false,\n    framework: null\n  });\n};\nconst onConsentChange = () => {\n  return serverSideWarn();\n};\nconst getConsentFor = (vendor, consent) => {\n  console.log(\n    `Server-side call for getConsentFor(${vendor}, ${JSON.stringify(consent)})`,\n    \"getConsentFor will always return false server-side\"\n  );\n  serverSideWarn();\n  return false;\n};\n\nexport { cmp, getConsentFor, isServerSide, onConsent, onConsentChange, serverSideWarn, serverSideWarnAndReturn };\n","import { isServerSide } from '../server.js';\n\nlet isGuardian;\nconst isGuardianDomain = () => {\n  if (typeof isGuardian === \"undefined\") {\n    if (isServerSide) {\n      isGuardian = true;\n    } else {\n      isGuardian = window.location.host.endsWith(\".theguardian.com\");\n    }\n  }\n  return isGuardian;\n};\n\nexport { isGuardianDomain };\n","import { isGuardianDomain } from './domain.js';\n\nconst ACCOUNT_ID = 1257;\nconst PRIVACY_MANAGER_USNAT = 1068329;\nconst PROPERTY_ID = 7417;\nconst PROPERTY_ID_AUSTRALIA = 13348;\nconst PRIVACY_MANAGER_TCFV2 = 106842;\nconst PRIVACY_MANAGER_AUSTRALIA = 1178486;\nconst ENDPOINT = isGuardianDomain() ? \"https://sourcepoint.theguardian.com\" : \"https://cdn.privacy-mgmt.com\";\n\nexport { ACCOUNT_ID, ENDPOINT, PRIVACY_MANAGER_AUSTRALIA, PRIVACY_MANAGER_TCFV2, PRIVACY_MANAGER_USNAT, PROPERTY_ID, PROPERTY_ID_AUSTRALIA };\n","import { getUSPData } from './api.js';\n\nconst getConsentState = async () => {\n  const uspData = await getUSPData();\n  const optedOut = uspData.uspString.charAt(2) === \"Y\";\n  return {\n    personalisedAdvertising: !optedOut\n  };\n};\n\nexport { getConsentState };\n","const api = (command) => new Promise((resolve, reject) => {\n  if (window.__uspapi) {\n    window.__uspapi(\n      command,\n      1,\n      (result, success) => success ? resolve(result) : (\n        /* istanbul ignore next */\n        reject(new Error(`Unable to get ${command} data`))\n      )\n    );\n  } else {\n    reject(new Error(\"No __uspapi found on window\"));\n  }\n});\nconst getUSPData = () => api(\"getUSPData\");\n\nexport { getUSPData };\n","const api = (command) => new Promise((resolve, reject) => {\n  if (window.__tcfapi) {\n    window.__tcfapi(\n      command,\n      2,\n      (result, success) => success ? resolve(result) : (\n        /* istanbul ignore next */\n        reject(new Error(`Unable to get ${command} data`))\n      )\n    );\n  } else {\n    reject(new Error(\"No __tcfapi found on window\"));\n  }\n});\nconst getTCData = () => api(\"addEventListener\");\nconst getCustomVendorConsents = () => api(\"getCustomVendorConsents\");\n\nexport { getCustomVendorConsents, getTCData };\n","import { getCurrentFramework } from '../getCurrentFramework.js';\nimport { getTCData, getCustomVendorConsents } from './api.js';\n\nconst defaultConsents = {\n  \"1\": false,\n  \"2\": false,\n  \"3\": false,\n  \"4\": false,\n  \"5\": false,\n  \"6\": false,\n  \"7\": false,\n  \"8\": false,\n  \"9\": false,\n  \"10\": false,\n  \"11\": false\n};\nconst getConsentState = async () => {\n  const [tcData, customVendors] = await Promise.all([\n    getTCData(),\n    getCustomVendorConsents()\n  ]);\n  if (typeof tcData === \"undefined\") {\n    const currentFramework = getCurrentFramework() ?? \"undefined\";\n    throw new Error(\n      `No TC Data found with current framework: ${currentFramework}`\n    );\n  }\n  const consents = {\n    ...defaultConsents,\n    ...tcData.purpose.consents\n  };\n  const { eventStatus, gdprApplies, tcString, addtlConsent } = tcData;\n  const { grants } = customVendors;\n  const vendorConsents = Object.keys(grants).sort().reduce((acc, cur) => ({ ...acc, [cur]: grants[cur]?.vendorGrant }), {});\n  return {\n    consents,\n    eventStatus,\n    vendorConsents,\n    addtlConsent,\n    gdprApplies,\n    tcString\n  };\n};\n\nexport { getConsentState };\n","import { getGPPData } from './api.js';\n\nconst getConsentState = async () => {\n  let doNotSell = false;\n  const gppData = await getGPPData();\n  const supportedAPI = Object.values(gppData.parsedSections)[0];\n  if (supportedAPI) {\n    doNotSell = supportedAPI.SaleOptOut !== 2 || supportedAPI.Gpc;\n  }\n  return {\n    doNotSell,\n    signalStatus: gppData.signalStatus\n  };\n};\n\nexport { getConsentState };\n","const api = (command) => new Promise((resolve, reject) => {\n  if (window.__gpp) {\n    window.__gpp(\n      command,\n      (result, success) => success ? resolve(result) : (\n        /* istanbul ignore next */\n        reject(new Error(`Unable to get ${command} data`))\n      )\n    );\n  } else {\n    reject(new Error(\"No __gpp found on window\"));\n  }\n});\nconst getGPPData = () => api(\"ping\");\n\nexport { getGPPData };\n","import { getConsentState as getConsentState$3 } from './aus/getConsentState.js';\nimport { getCurrentFramework } from './getCurrentFramework.js';\nimport { getGpcSignal } from './lib/signals.js';\nimport { getConsentState as getConsentState$1 } from './tcfv2/getConsentState.js';\nimport { getConsentState as getConsentState$2 } from './usnat/getConsentState.js';\n\nconst callBackQueue = [];\nconst finalCallbackQueue = [];\nconst awaitingUserInteractionInTCFv2 = (state) => state.tcfv2?.eventStatus === \"cmpuishown\";\nconst awaitingUserInteractionInUSNAT = (state) => state.usnat?.signalStatus === \"not ready\";\nconst invokeCallback = (callback, state) => {\n  if (awaitingUserInteractionInTCFv2(state) || awaitingUserInteractionInUSNAT(state)) {\n    return;\n  }\n  const stateString = JSON.stringify(state);\n  if (stateString !== callback.lastState) {\n    callback.fn(state);\n    callback.lastState = stateString;\n  }\n};\nconst enhanceConsentState = (consentState) => {\n  const gpcSignal = getGpcSignal();\n  if (consentState.tcfv2) {\n    const consents = consentState.tcfv2.consents;\n    return {\n      ...consentState,\n      canTarget: Object.keys(consents).length > 0 && Object.values(consents).every(Boolean),\n      framework: \"tcfv2\",\n      gpcSignal\n    };\n  } else if (consentState.usnat) {\n    return {\n      ...consentState,\n      canTarget: !consentState.usnat.doNotSell,\n      framework: \"usnat\",\n      gpcSignal\n    };\n  } else if (consentState.aus) {\n    return {\n      ...consentState,\n      canTarget: consentState.aus.personalisedAdvertising,\n      framework: \"aus\",\n      gpcSignal\n    };\n  }\n  return {\n    ...consentState,\n    canTarget: false,\n    framework: null,\n    gpcSignal\n  };\n};\nconst getConsentState = async () => {\n  switch (getCurrentFramework()) {\n    case \"aus\":\n      return enhanceConsentState({ aus: await getConsentState$3() });\n    case \"usnat\": {\n      return enhanceConsentState({\n        usnat: await getConsentState$2()\n      });\n    }\n    case \"tcfv2\":\n      return enhanceConsentState({ tcfv2: await getConsentState$1() });\n    default:\n      throw new Error(\"no IAB consent framework found on the page\");\n  }\n};\nconst invokeCallbacks = () => {\n  const callbacksToInvoke = callBackQueue.concat(finalCallbackQueue);\n  if (callbacksToInvoke.length === 0) {\n    return;\n  }\n  void getConsentState().then((state) => {\n    if (awaitingUserInteractionInTCFv2(state) || awaitingUserInteractionInUSNAT(state)) {\n      return;\n    }\n    callbacksToInvoke.forEach((callback) => invokeCallback(callback, state));\n  });\n};\nconst onConsentChange = (callBack, final = false) => {\n  const newCallback = { fn: callBack };\n  if (final) {\n    finalCallbackQueue.push(newCallback);\n  } else {\n    callBackQueue.push(newCallback);\n  }\n  void getConsentState().then((consentState) => {\n    invokeCallback(newCallback, consentState);\n  }).catch(() => {\n  });\n};\n\nexport { invokeCallbacks, onConsentChange };\n","import { isServerSide } from '../server.js';\n\nconst getGpcSignal = () => {\n  return isServerSide ? void 0 : navigator.globalPrivacyControl;\n};\n\nexport { getGpcSignal };\n","const stub_tcfv2 = () => {\n  !function(t) {\n    var e = {};\n    function n(r) {\n      if (e[r]) return e[r].exports;\n      var o = e[r] = { i: r, l: false, exports: {} };\n      return t[r].call(o.exports, o, o.exports, n), o.l = true, o.exports;\n    }\n    n.m = t, n.c = e, n.d = function(t2, e2, r) {\n      n.o(t2, e2) || Object.defineProperty(t2, e2, { enumerable: true, get: r });\n    }, n.r = function(t2) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t2, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t2, \"__esModule\", { value: true });\n    }, n.t = function(t2, e2) {\n      if (1 & e2 && (t2 = n(t2)), 8 & e2) return t2;\n      if (4 & e2 && \"object\" == typeof t2 && t2 && t2.__esModule) return t2;\n      var r = /* @__PURE__ */ Object.create(null);\n      if (n.r(r), Object.defineProperty(r, \"default\", {\n        enumerable: true,\n        value: t2\n      }), 2 & e2 && \"string\" != typeof t2)\n        for (var o in t2)\n          n.d(\n            r,\n            o,\n            function(e3) {\n              return t2[e3];\n            }.bind(null, o)\n          );\n      return r;\n    }, n.n = function(t2) {\n      var e2 = t2 && t2.__esModule ? function() {\n        return t2.default;\n      } : function() {\n        return t2;\n      };\n      return n.d(e2, \"a\", e2), e2;\n    }, n.o = function(t2, e2) {\n      return Object.prototype.hasOwnProperty.call(t2, e2);\n    }, n.p = \"\", n(n.s = 3);\n  }([\n    function(t, e, n) {\n      var r = n(2);\n      t.exports = !r(function() {\n        return 7 != Object.defineProperty({}, \"a\", {\n          get: function() {\n            return 7;\n          }\n        }).a;\n      });\n    },\n    function(t, e) {\n      t.exports = function(t2) {\n        return \"object\" == typeof t2 ? null !== t2 : \"function\" == typeof t2;\n      };\n    },\n    function(t, e) {\n      t.exports = function(t2) {\n        try {\n          return !!t2();\n        } catch (t3) {\n          return true;\n        }\n      };\n    },\n    function(t, e, n) {\n      n(4), function() {\n        if (\"function\" != typeof window.__tcfapi) {\n          var t2, e2 = [], n2 = window, r = n2.document;\n          !n2.__tcfapi && function t3() {\n            var e3 = !!n2.frames.__tcfapiLocator;\n            if (!e3)\n              if (r.body) {\n                var o = r.createElement(\"iframe\");\n                o.style.cssText = \"display:none\", o.name = \"__tcfapiLocator\", r.body.appendChild(o);\n              } else setTimeout(t3, 5);\n            return !e3;\n          }() && (n2.__tcfapi = function() {\n            for (var n3 = arguments.length, r2 = new Array(n3), o = 0; o < n3; o++)\n              r2[o] = arguments[o];\n            if (!r2.length) return e2;\n            if (\"setGdprApplies\" === r2[0])\n              r2.length > 3 && 2 === parseInt(r2[1], 10) && \"boolean\" == typeof r2[3] && (t2 = r2[3], \"function\" == typeof r2[2] && r2[2](\"set\", true));\n            else if (\"ping\" === r2[0]) {\n              var i = {\n                gdprApplies: t2,\n                cmpLoaded: false,\n                apiVersion: \"2.0\"\n              };\n              \"function\" == typeof r2[2] && r2[2](i, true);\n            } else e2.push(r2);\n          }, n2.addEventListener(\n            \"message\",\n            function(t3) {\n              var e3 = \"string\" == typeof t3.data, r2 = {};\n              try {\n                r2 = e3 ? JSON.parse(t3.data) : t3.data;\n              } catch (t4) {\n              }\n              var o = r2.__tcfapiCall;\n              o && n2.__tcfapi(\n                o.command,\n                o.version,\n                function(n3, r3) {\n                  var i = {\n                    __tcfapiReturn: {\n                      returnValue: n3,\n                      success: r3,\n                      callId: o.callId\n                    }\n                  };\n                  e3 && (i = JSON.stringify(i)), t3.source.postMessage(i, \"*\");\n                },\n                o.parameter\n              );\n            },\n            false\n          ));\n        }\n      }();\n    },\n    function(t, e, n) {\n      var r = n(0), o = n(5).f, i = Function.prototype, c = i.toString, u = /^s*function ([^ (]*)/;\n      r && !(\"name\" in i) && o(i, \"name\", {\n        configurable: true,\n        get: function() {\n          try {\n            return c.call(this).match(u)[1];\n          } catch (t2) {\n            return \"\";\n          }\n        }\n      });\n    },\n    function(t, e, n) {\n      var r = n(0), o = n(6), i = n(10), c = n(11), u = Object.defineProperty;\n      e.f = r ? u : function(t2, e2, n2) {\n        if (i(t2), e2 = c(e2, true), i(n2), o)\n          try {\n            return u(t2, e2, n2);\n          } catch (t3) {\n          }\n        if (\"get\" in n2 || \"set\" in n2)\n          throw TypeError(\"Accessors not supported\");\n        return \"value\" in n2 && (t2[e2] = n2.value), t2;\n      };\n    },\n    function(t, e, n) {\n      var r = n(0), o = n(2), i = n(7);\n      t.exports = !r && !o(function() {\n        return 7 != Object.defineProperty(i(\"div\"), \"a\", {\n          get: function() {\n            return 7;\n          }\n        }).a;\n      });\n    },\n    function(t, e, n) {\n      var r = n(8), o = n(1), i = r.document, c = o(i) && o(i.createElement);\n      t.exports = function(t2) {\n        return c ? i.createElement(t2) : {};\n      };\n    },\n    function(t, e, n) {\n      (function(e2) {\n        var n2 = function(t2) {\n          return t2 && t2.Math == Math && t2;\n        };\n        t.exports = n2(\"object\" == typeof globalThis && globalThis) || n2(\"object\" == typeof window && window) || n2(\"object\" == typeof self && self) || n2(\"object\" == typeof e2 && e2) || Function(\"return this\")();\n      }).call(this, n(9));\n    },\n    function(t, e) {\n      var n;\n      n = /* @__PURE__ */ function() {\n        return this;\n      }();\n      try {\n        n = n || new Function(\"return this\")();\n      } catch (t2) {\n        \"object\" == typeof window && (n = window);\n      }\n      t.exports = n;\n    },\n    function(t, e, n) {\n      var r = n(1);\n      t.exports = function(t2) {\n        if (!r(t2)) throw TypeError(String(t2) + \" is not an object\");\n        return t2;\n      };\n    },\n    function(t, e, n) {\n      var r = n(1);\n      t.exports = function(t2, e2) {\n        if (!r(t2)) return t2;\n        var n2, o;\n        if (e2 && \"function\" == typeof (n2 = t2.toString) && !r(o = n2.call(t2)))\n          return o;\n        if (\"function\" == typeof (n2 = t2.valueOf) && !r(o = n2.call(t2)))\n          return o;\n        if (!e2 && \"function\" == typeof (n2 = t2.toString) && !r(o = n2.call(t2)))\n          return o;\n        throw TypeError(\"Can't convert object to primitive value\");\n      };\n    }\n  ]);\n};\n\nexport { stub_tcfv2 };\n","const stub_uspapi_ccpa = () => {\n  (function() {\n    var e = false;\n    var c = window;\n    var t = document;\n    function r() {\n      if (!c.frames[\"__uspapiLocator\"]) {\n        if (t.body) {\n          var a = t.body;\n          var e2 = t.createElement(\"iframe\");\n          e2.style.cssText = \"display:none\";\n          e2.name = \"__uspapiLocator\";\n          a.appendChild(e2);\n        } else {\n          setTimeout(r, 5);\n        }\n      }\n    }\n    r();\n    function p() {\n      var a = arguments;\n      __uspapi.a = __uspapi.a || [];\n      if (!a.length) {\n        return __uspapi.a;\n      } else if (a[0] === \"ping\") {\n        a[2]({ gdprAppliesGlobally: e, cmpLoaded: false }, true);\n      } else {\n        __uspapi.a.push([].slice.apply(a));\n      }\n    }\n    function l(t2) {\n      var r2 = typeof t2.data === \"string\";\n      try {\n        var a = r2 ? JSON.parse(t2.data) : t2.data;\n        if (a.__cmpCall) {\n          var n = a.__cmpCall;\n          c.__uspapi(n.command, n.parameter, function(a2, e2) {\n            var c2 = {\n              __cmpReturn: {\n                returnValue: a2,\n                success: e2,\n                callId: n.callId\n              }\n            };\n            t2.source.postMessage(r2 ? JSON.stringify(c2) : c2, \"*\");\n          });\n        }\n      } catch (a2) {\n      }\n    }\n    if (typeof __uspapi !== \"function\") {\n      c.__uspapi = p;\n      __uspapi.msgHandler = l;\n      c.addEventListener(\"message\", l, false);\n    }\n  })();\n};\n\nexport { stub_uspapi_ccpa };\n","import { log } from '../logger/logger.js';\nimport { setCurrentFramework } from './getCurrentFramework.js';\nimport { isGuardianDomain } from './lib/domain.js';\nimport { mark } from './lib/mark.js';\nimport { ENDPOINT, ACCOUNT_ID, PROPERTY_ID_AUSTRALIA, PROPERTY_ID } from './lib/sourcepointConfig.js';\nimport { invokeCallbacks } from './onConsentChange.js';\nimport { stub } from './stub.js';\n\nlet resolveWillShowPrivacyMessage;\nconst willShowPrivacyMessage = new Promise((resolve) => {\n  resolveWillShowPrivacyMessage = resolve;\n});\nconst getPropertyHref = (framework) => {\n  if (framework == \"aus\") {\n    return \"https://au.theguardian.com\";\n  }\n  return isGuardianDomain() ? null : \"https://test.theguardian.com\";\n};\nconst getPropertyId = (framework) => {\n  if (framework == \"aus\") {\n    return PROPERTY_ID_AUSTRALIA;\n  }\n  return PROPERTY_ID;\n};\nconst init = (framework, pubData = {}) => {\n  stub(framework);\n  if (window._sp_) {\n    throw new Error(\"Sourcepoint global (window._sp_) is already defined!\");\n  }\n  setCurrentFramework(framework);\n  invokeCallbacks();\n  let frameworkMessageType;\n  switch (framework) {\n    case \"usnat\":\n      frameworkMessageType = \"usnat\";\n      break;\n    case \"aus\":\n      frameworkMessageType = \"ccpa\";\n      break;\n    case \"tcfv2\":\n    default:\n      frameworkMessageType = \"gdpr\";\n      break;\n  }\n  const isInPropertyIdABTest = window.guardian?.config?.tests?.useSourcepointPropertyIdVariant === \"variant\";\n  log(\"cmp\", `framework: ${framework}`);\n  log(\"cmp\", `frameworkMessageType: ${frameworkMessageType}`);\n  window._sp_queue = [];\n  window._sp_ = {\n    config: {\n      baseEndpoint: ENDPOINT,\n      accountId: ACCOUNT_ID,\n      propertyHref: getPropertyHref(framework),\n      targetingParams: {\n        framework\n      },\n      pubData: { ...pubData, cmpInitTimeUtc: (/* @__PURE__ */ new Date()).getTime() },\n      // ccpa or gdpr object added below\n      events: {\n        onConsentReady: (message_type, consentUUID, euconsent) => {\n          log(\"cmp\", `onConsentReady ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          log(\"cmp\", `consentUUID ${consentUUID}`);\n          log(\"cmp\", `euconsent ${euconsent}`);\n          mark(\"cmp-got-consent\");\n          setTimeout(invokeCallbacks, 0);\n        },\n        onMessageReady: (message_type) => {\n          log(\"cmp\", `onMessageReady ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          mark(\"cmp-ui-displayed\");\n        },\n        onMessageReceiveData: (message_type, data) => {\n          log(\"cmp\", `onMessageReceiveData ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          log(\"cmp\", \"onMessageReceiveData \", data);\n          void resolveWillShowPrivacyMessage(data.messageId !== 0);\n        },\n        onMessageChoiceSelect: (message_type, choice_id, choiceTypeID) => {\n          log(\"cmp\", `onMessageChoiceSelect message_type: ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          log(\"cmp\", `onMessageChoiceSelect choice_id: ${choice_id}`);\n          log(\"cmp\", `onMessageChoiceSelect choice_type_id: ${choiceTypeID}`);\n          if (\n            // https://documentation.sourcepoint.com/web-implementation/web-implementation/multi-campaign-web-implementation/event-callbacks#choice-type-id-descriptions\n            choiceTypeID === 11 || choiceTypeID === 13 || choiceTypeID === 15\n          ) {\n            setTimeout(invokeCallbacks, 0);\n          }\n        },\n        onPrivacyManagerAction: function(message_type, pmData) {\n          log(\"cmp\", `onPrivacyManagerAction message_type: ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          log(\"cmp\", `onPrivacyManagerAction ${pmData}`);\n        },\n        onMessageChoiceError: function(message_type, err) {\n          log(\"cmp\", `onMessageChoiceError ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          log(\"cmp\", `onMessageChoiceError ${err}`);\n        },\n        onPMCancel: function(message_type) {\n          log(\"cmp\", `onPMCancel ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n        },\n        onSPPMObjectReady: function() {\n          log(\"cmp\", \"onSPPMObjectReady\");\n        },\n        onError: function(message_type, errorCode, errorObject, userReset) {\n          log(\"cmp\", `errorCode: ${message_type}`);\n          if (message_type != frameworkMessageType) {\n            return;\n          }\n          log(\"cmp\", `errorCode: ${errorCode}`);\n          log(\"cmp\", errorObject);\n          log(\"cmp\", `userReset: ${userReset}`);\n        }\n      }\n    }\n  };\n  if (isInPropertyIdABTest) {\n    window._sp_.config.propertyId = getPropertyId(framework);\n  }\n  switch (framework) {\n    case \"tcfv2\":\n      window._sp_.config.gdpr = {\n        targetingParams: {\n          framework\n        }\n      };\n      break;\n    case \"usnat\":\n      window._sp_.config.usnat = {\n        targetingParams: {\n          framework\n        },\n        includeUspApi: true,\n        transitionCCPAAuth: true\n      };\n      break;\n    case \"aus\":\n      window._sp_.config.ccpa = {\n        targetingParams: {\n          framework\n        }\n      };\n      break;\n  }\n  const spLib = document.createElement(\"script\");\n  spLib.id = \"sourcepoint-lib\";\n  spLib.src = `${ENDPOINT}/unified/wrapperMessagingWithoutDetection.js`;\n  document.body.appendChild(spLib);\n};\n\nexport { init, willShowPrivacyMessage };\n","import { stub_gpp_usnat } from './stub_gpp_usnat.js';\nimport { stub_tcfv2 } from './stub_tcfv2.js';\nimport { stub_uspapi_ccpa } from './stub_uspapi_ccpa.js';\n\nconst stub = (framework) => {\n  switch (framework) {\n    case \"tcfv2\":\n      stub_tcfv2();\n      break;\n    case \"usnat\":\n      stub_gpp_usnat();\n      stub_uspapi_ccpa();\n      break;\n    case \"aus\":\n      stub_uspapi_ccpa();\n      break;\n  }\n};\n\nexport { stub };\n","const stub_gpp_usnat = () => {\n  window.__gpp_addFrame = function(e) {\n    if (!window.frames[e])\n      if (document.body) {\n        var t = document.createElement(\"iframe\");\n        t.style.cssText = \"display:none\", t.name = e, document.body.appendChild(t);\n      } else window.setTimeout(window.__gpp_addFrame, 10, e);\n  }, window.__gpp_stub = function() {\n    var e = arguments;\n    if (__gpp.queue = __gpp.queue || [], __gpp.events = __gpp.events || [], !e.length || 1 == e.length && \"queue\" == e[0])\n      return __gpp.queue;\n    if (1 == e.length && \"events\" == e[0]) return __gpp.events;\n    var t = e[0], p = e.length > 1 ? e[1] : null, s = e.length > 2 ? e[2] : null;\n    if (\"ping\" === t)\n      p(\n        {\n          gppVersion: \"1.1\",\n          cmpStatus: \"stub\",\n          cmpDisplayStatus: \"hidden\",\n          signalStatus: \"not ready\",\n          supportedAPIs: [\n            \"2:tcfeuv2\",\n            \"5:tcfcav1\",\n            \"6:uspv1\",\n            \"7:usnatv1\",\n            \"8:uscav1\",\n            \"9:usvav1\",\n            \"10:uscov1\",\n            \"11:usutv1\",\n            \"12:usctv1\"\n          ],\n          cmpId: 0,\n          sectionList: [],\n          applicableSections: [],\n          gppString: \"\",\n          parsedSections: {}\n        },\n        true\n      );\n    else if (\"addEventListener\" === t) {\n      \"lastId\" in __gpp || (__gpp.lastId = 0), __gpp.lastId++;\n      var n = __gpp.lastId;\n      __gpp.events.push({ id: n, callback: p, parameter: s }), p(\n        {\n          eventName: \"listenerRegistered\",\n          listenerId: n,\n          data: true,\n          pingData: {\n            gppVersion: \"1.1\",\n            cmpStatus: \"stub\",\n            cmpDisplayStatus: \"hidden\",\n            signalStatus: \"not ready\",\n            supportedAPIs: [\n              \"2:tcfeuv2\",\n              \"5:tcfcav1\",\n              \"6:uspv1\",\n              \"7:usnatv1\",\n              \"8:uscav1\",\n              \"9:usvav1\",\n              \"10:uscov1\",\n              \"11:usutv1\",\n              \"12:usctv1\"\n            ],\n            cmpId: 0,\n            sectionList: [],\n            applicableSections: [],\n            gppString: \"\",\n            parsedSections: {}\n          }\n        },\n        true\n      );\n    } else if (\"removeEventListener\" === t) {\n      for (var a = false, i = 0; i < __gpp.events.length; i++)\n        if (__gpp.events[i].id == s) {\n          __gpp.events.splice(i, 1), a = true;\n          break;\n        }\n      p(\n        {\n          eventName: \"listenerRemoved\",\n          listenerId: s,\n          data: a,\n          pingData: {\n            gppVersion: \"1.1\",\n            cmpStatus: \"stub\",\n            cmpDisplayStatus: \"hidden\",\n            signalStatus: \"not ready\",\n            supportedAPIs: [\n              \"2:tcfeuv2\",\n              \"5:tcfcav1\",\n              \"6:uspv1\",\n              \"7:usnatv1\",\n              \"8:uscav1\",\n              \"9:usvav1\",\n              \"10:uscov1\",\n              \"11:usutv1\",\n              \"12:usctv1\"\n            ],\n            cmpId: 0,\n            sectionList: [],\n            applicableSections: [],\n            gppString: \"\",\n            parsedSections: {}\n          }\n        },\n        true\n      );\n    } else\n      \"hasSection\" === t ? p(false, true) : \"getSection\" === t || \"getField\" === t ? p(null, true) : __gpp.queue.push([].slice.apply(e));\n  }, window.__gpp_msghandler = function(e) {\n    var t = \"string\" == typeof e.data;\n    try {\n      var p = t ? JSON.parse(e.data) : e.data;\n    } catch (e2) {\n      p = null;\n    }\n    if (\"object\" == typeof p && null !== p && \"__gppCall\" in p) {\n      var s = p.__gppCall;\n      window.__gpp(\n        s.command,\n        function(p2, n) {\n          var a = {\n            __gppReturn: {\n              returnValue: p2,\n              success: n,\n              callId: s.callId\n            }\n          };\n          e.source.postMessage(t ? JSON.stringify(a) : a, \"*\");\n        },\n        \"parameter\" in s ? s.parameter : null,\n        \"version\" in s ? s.version : \"1.1\"\n      );\n    }\n  }, \"__gpp\" in window && \"function\" == typeof window.__gpp || (window.__gpp = window.__gpp_stub, window.addEventListener(\"message\", window.__gpp_msghandler, false), window.__gpp_addFrame(\"__gppLocator\"));\n};\n\nexport { stub_gpp_usnat };\n","import { getCurrentFramework } from './getCurrentFramework.js';\nimport { mark } from './lib/mark.js';\nimport { PRIVACY_MANAGER_AUSTRALIA, PRIVACY_MANAGER_USNAT, PRIVACY_MANAGER_TCFV2 } from './lib/sourcepointConfig.js';\nimport { init as init$1, willShowPrivacyMessage as willShowPrivacyMessage$1 } from './sourcepoint.js';\n\nconst init = (framework, pubData) => {\n  mark(\"cmp-init\");\n  init$1(framework, pubData);\n};\nconst willShowPrivacyMessage = () => willShowPrivacyMessage$1;\nfunction showPrivacyManager() {\n  switch (getCurrentFramework()) {\n    case \"tcfv2\":\n      window._sp_?.gdpr?.loadPrivacyManagerModal?.(PRIVACY_MANAGER_TCFV2);\n      break;\n    case \"usnat\":\n      window._sp_?.usnat?.loadPrivacyManagerModal?.(PRIVACY_MANAGER_USNAT);\n      break;\n    case \"aus\":\n      window._sp_?.ccpa?.loadPrivacyManagerModal?.(PRIVACY_MANAGER_AUSTRALIA);\n      break;\n  }\n}\nconst CMP = {\n  init,\n  willShowPrivacyMessage,\n  showPrivacyManager\n};\n\nexport { CMP };\n","const COOKIE_NAME = \"gu-cmp-disabled\";\nconst disable = () => {\n  document.cookie = `${COOKIE_NAME}=true`;\n};\nconst enable = () => {\n  document.cookie = `${COOKIE_NAME}=false`;\n};\nconst isDisabled = () => new RegExp(`${COOKIE_NAME}=true(\\\\W+|$)`).test(document.cookie);\n\nexport { disable, enable, isDisabled };\n","const TCFV2VendorIDs = {\n  // keep the list in README.md up to date with these values\n  a9: [\"5f369a02b8e05c308701f829\"],\n  acast: [\"5f203dcb1f0dea790562e20f\"],\n  braze: [\"5ed8c49c4b8ce4571c7ad801\"],\n  comscore: [\"5efefe25b8e05c06542b2a77\"],\n  criteo: [\"5e98e7f1b8e05c111d01b462\"],\n  \"google-mobile-ads\": [\"5f1aada6b8e05c306c0597d7\"],\n  \"google-tag-manager\": [\"5e952f6107d9d20c88e7c975\"],\n  googletag: [\"5f1aada6b8e05c306c0597d7\"],\n  ias: [\"5e7ced57b8e05c485246ccf3\"],\n  inizio: [\"5e37fc3e56a5e6615502f9c9\"],\n  ipsos: [\"5fa51b29a228638b4a1980e4\"],\n  magnite: [\"5e7ced57b8e05c485246cce5\"],\n  nielsen: [\"5ef5c3a5b8e05c69980eaa5b\"],\n  ophan: [\"5f203dbeeaaaa8768fd3226a\"],\n  permutive: [\"5f369a02b8e05c2f2d546a40\"],\n  prebidCustom: [\"5f22bfd82a6b6c1afd1181a9\"],\n  qm: [\"5f295fa4b8e05c76a44c3149\"],\n  remarketing: [\"5ed0eb688a76503f1016578f\"],\n  sentry: [\"5f0f39014effda6e8bbd2006\"],\n  teads: [\"5eab3d5ab8e05c2bbe33f399\"],\n  twitter: [\"5e71760b69966540e4554f01\"],\n  \"youtube-player\": [\"5e7ac3fae30e7d1bc1ebf5e8\"]\n};\nconst MiscVendorID = {\n  prebid: [\"5f92a62aa22863685f4daa4c\"]\n};\nconst AusVendorIDs = {\n  redplanet: [\"not-tcfv2-vendor\"]\n};\nconst VendorIDs = {\n  ...TCFV2VendorIDs,\n  ...AusVendorIDs,\n  ...MiscVendorID\n};\n\nexport { AusVendorIDs, MiscVendorID, TCFV2VendorIDs, VendorIDs };\n","import { VendorIDs } from './vendors.js';\n\nconst getConsentFor = (vendor, consent) => {\n  const sourcepointIds = VendorIDs[vendor];\n  if (typeof sourcepointIds === \"undefined\" || sourcepointIds.length === 0) {\n    throw new Error(\n      `Vendor '${vendor}' not found, or with no Sourcepoint ID. If it should be added, raise an issue at https://github.com/guardian/consent-management-platform/issues`\n    );\n  }\n  if (consent.usnat) {\n    return !consent.usnat.doNotSell;\n  }\n  if (consent.aus) {\n    return consent.aus.personalisedAdvertising;\n  }\n  const foundSourcepointId = sourcepointIds.find(\n    (id) => typeof consent.tcfv2?.vendorConsents[id] !== \"undefined\"\n  );\n  if (typeof foundSourcepointId === \"undefined\") {\n    console.warn(\n      `No consent returned from Sourcepoint for vendor: '${vendor}'`\n    );\n    return false;\n  }\n  const tcfv2Consent = consent.tcfv2?.vendorConsents[foundSourcepointId];\n  if (typeof tcfv2Consent === \"undefined\") {\n    console.warn(\n      `No consent returned from Sourcepoint for vendor: '${vendor}'`\n    );\n    return false;\n  }\n  return tcfv2Consent;\n};\n\nexport { getConsentFor };\n","const vendorStorageIds = {\n  a9: {\n    localStorage: [\"apstagUserAgentClientHints\", \"apstagCxMEnabled\"]\n  },\n  inizio: {\n    localStorage: [\"__bm_s\", \"__bm_m\"]\n  },\n  criteo: {\n    cookies: [\"cto_bundle\"],\n    localStorage: [\n      \"criteo_fast_bid_expires\",\n      \"cto_bundle\",\n      \"criteo_fast_bid\",\n      \"criteo_pt_cdb_mngr_metrics\",\n      \"__ansync3rdp_criteo\"\n    ]\n  },\n  comscore: {\n    cookies: [\"comScore\", \"_scor_uid\"]\n  },\n  ipsos: {\n    cookies: [\"DM_SitId1073\", \"DM_SitId1073SecId5802\", \"DotMetrics.AmpCookie\"],\n    localStorage: [\n      \"DotmetricsSiteData\",\n      \"DotMetricsTimeOnPage\",\n      \"DotMetricsUserId\",\n      \"DotMetricsDeviceGuidId\"\n    ]\n  },\n  permutive: {\n    cookies: [\"permutive-id\"],\n    localStorage: [\n      \"permutive-data-queries\",\n      \"_pubcid\",\n      \"permutive-pvc\",\n      \"permutive-data-enrichers\",\n      \"permutive-session\",\n      \"permutive-data-misc\",\n      \"permutive-unprocessed-pba\",\n      \"permutive-app\",\n      \"permutive-data-models\",\n      \"permutive-id\",\n      \"permutive-consent\",\n      \"permutive-events-cache\",\n      \"permutive-data-queries\",\n      \"permutive-events-for-page\",\n      \"__permutiveConfigQueryParams\"\n    ],\n    sessionStorage: [\"__permutiveConfigQueryParams\"]\n  },\n  prebid: {\n    localStorage: [\"_psegs\", \"_pubcid_exp\"]\n  },\n  googletag: { cookies: [\"__gpi\", \"__gads\"] }\n};\nconst deprecatedVendorStorageIds = {\n  \"google-analytics\": {\n    cookies: [\"_gid\", \"_ga\"]\n  }\n};\n\nexport { deprecatedVendorStorageIds, vendorStorageIds };\n","import { removeCookie } from '../cookies/removeCookie.js';\nimport { storage } from '../storage/storage.js';\nimport { getConsentFor } from './getConsentFor.js';\nimport { onConsentChange } from './onConsentChange.js';\nimport { vendorStorageIds, deprecatedVendorStorageIds } from './vendorStorageIds.js';\n\nconst removeData = ({\n  cookies = [],\n  localStorage = [],\n  sessionStorage = []\n}) => {\n  for (const name of cookies) {\n    removeCookie({ name });\n  }\n  for (const name of localStorage) {\n    storage.local.remove(name);\n  }\n  for (const name of sessionStorage) {\n    storage.session.remove(name);\n  }\n};\nconst removeUnconsentedData = (consent) => {\n  Object.keys(vendorStorageIds).forEach((vendor) => {\n    const consentForVendor = getConsentFor(vendor, consent);\n    const vendorData = vendorStorageIds[vendor];\n    if (!consentForVendor) {\n      removeData(vendorData);\n    }\n  });\n  Object.entries(deprecatedVendorStorageIds).forEach(\n    ([, vendorData]) => removeData(vendorData)\n  );\n};\nconst initVendorDataManager = () => {\n  onConsentChange((consent) => {\n    if (\"requestIdleCallback\" in window) {\n      requestIdleCallback(\n        () => {\n          removeUnconsentedData(consent);\n        },\n        {\n          timeout: 2e3\n        }\n      );\n    } else {\n      removeUnconsentedData(consent);\n    }\n  });\n};\n\nexport { initVendorDataManager };\n","import { version } from '../package.json.js';\nimport { log } from '../logger/logger.js';\nimport { CMP } from './cmp.js';\nimport { isDisabled, enable, disable } from './disable.js';\nimport { getConsentFor as getConsentFor$2 } from './getConsentFor.js';\nimport { getFramework } from './getFramework.js';\nimport { onConsent as onConsent$2 } from './onConsent.js';\nimport { onConsentChange as onConsentChange$2 } from './onConsentChange.js';\nimport { isServerSide, cmp as cmp$1, onConsent as onConsent$1, onConsentChange as onConsentChange$1, getConsentFor as getConsentFor$1 } from './server.js';\nimport { initVendorDataManager } from './vendorDataManager.js';\n\nvar _a, _b, _c, _d;\nif (!isServerSide) {\n  if (typeof window.guCmpHotFix === \"undefined\") {\n    window.guCmpHotFix = {};\n  }\n}\nlet _willShowPrivacyMessage;\nlet initComplete = false;\nlet resolveInitialised;\nconst initialised = new Promise((resolve) => {\n  resolveInitialised = resolve;\n});\nconst init = ({ pubData, country }) => {\n  if (isDisabled() || isServerSide) {\n    return;\n  }\n  if (window.guCmpHotFix.initialised) {\n    if (window.guCmpHotFix.cmp?.version !== version) {\n      console.warn(\"Two different versions of the CMP are running:\", [\n        version,\n        window.guCmpHotFix.cmp?.version\n      ]);\n    }\n    return;\n  }\n  window.guCmpHotFix.initialised = true;\n  if (typeof country === \"undefined\") {\n    throw new Error(\n      \"CMP initialised without `country` property. A 2-letter, ISO ISO_3166-1 country code is required.\"\n    );\n  }\n  const framework = getFramework(country);\n  CMP.init(framework, pubData ?? {});\n  void CMP.willShowPrivacyMessage().then((willShowValue) => {\n    _willShowPrivacyMessage = willShowValue;\n    initComplete = true;\n    log(\"cmp\", \"initComplete\");\n  });\n  resolveInitialised();\n  initVendorDataManager();\n};\nconst willShowPrivacyMessage = () => initialised.then(() => CMP.willShowPrivacyMessage());\nconst willShowPrivacyMessageSync = () => {\n  if (_willShowPrivacyMessage !== void 0) {\n    return _willShowPrivacyMessage;\n  }\n  throw new Error(\n    \"CMP has not been initialised. Use the async willShowPrivacyMessage() instead.\"\n  );\n};\nconst hasInitialised = () => initComplete;\nconst showPrivacyManager = () => {\n  void initialised.then(CMP.showPrivacyManager);\n};\nconst cmp = isServerSide ? cmp$1 : (_a = window.guCmpHotFix).cmp || (_a.cmp = {\n  init,\n  willShowPrivacyMessage,\n  willShowPrivacyMessageSync,\n  hasInitialised,\n  showPrivacyManager,\n  version,\n  // special helper methods for disabling CMP\n  __isDisabled: isDisabled,\n  __enable: enable,\n  __disable: disable\n});\nconst onConsent = isServerSide ? onConsent$1 : (_b = window.guCmpHotFix).onConsent || (_b.onConsent = onConsent$2);\nconst onConsentChange = isServerSide ? onConsentChange$1 : (_c = window.guCmpHotFix).onConsentChange || (_c.onConsentChange = onConsentChange$2);\nconst getConsentFor = isServerSide ? getConsentFor$1 : (_d = window.guCmpHotFix).getConsentFor || (_d.getConsentFor = getConsentFor$2);\n\nexport { cmp, getConsentFor, onConsent, onConsentChange };\n","const getFramework = (countryCode) => {\n  let framework;\n  switch (countryCode) {\n    case \"US\":\n      framework = \"usnat\";\n      break;\n    case \"AU\":\n      framework = \"aus\";\n      break;\n    case \"GB\":\n    default:\n      framework = \"tcfv2\";\n      break;\n  }\n  return framework;\n};\n\nexport { getFramework };\n","import { onConsentChange } from './onConsentChange.js';\n\nconst onConsent = () => new Promise((resolve, reject) => {\n  onConsentChange((consentState) => {\n    if (consentState.tcfv2 ?? consentState.usnat ?? consentState.aus) {\n      resolve(consentState);\n    }\n    reject(\"Unknown framework\");\n  });\n});\n\nexport { onConsent };\n","const ERR_INVALID_COOKIE = `Cookie must not contain invalid characters (space, tab and the following characters: '()<>@,;\"/[]?={}')`;\n\nexport { ERR_INVALID_COOKIE };\n","import { getCookieValues } from './getCookieValues.js';\nimport { memoizedCookies } from './memoizedCookies.js';\n\nconst getCookie = ({\n  name,\n  shouldMemoize = false\n}) => {\n  const memoizedCookie = memoizedCookies.get(name);\n  if (memoizedCookie) {\n    return memoizedCookie;\n  }\n  const [value] = getCookieValues(name);\n  if (value) {\n    if (shouldMemoize) {\n      memoizedCookies.set(name, value);\n    }\n    return value;\n  }\n  return null;\n};\n\nexport { getCookie };\n","const getCookieValues = (name) => {\n  const nameEq = `${name}=`;\n  const cookies = document.cookie.split(\";\");\n  return cookies.reduce((acc, cookie) => {\n    const cookieTrimmed = cookie.trim();\n    if (cookieTrimmed.startsWith(nameEq)) {\n      acc.push(cookieTrimmed.substring(nameEq.length, cookieTrimmed.length));\n    }\n    return acc;\n  }, []);\n};\n\nexport { getCookieValues };\n","import { getShortDomain } from './getShortDomain.js';\n\nconst getDomainAttribute = ({ isCrossSubdomain = false } = {}) => {\n  const shortDomain = getShortDomain({ isCrossSubdomain });\n  return shortDomain === \"localhost\" ? \"\" : ` domain=${shortDomain};`;\n};\n\nexport { getDomainAttribute };\n","const getShortDomain = ({ isCrossSubdomain = false } = {}) => {\n  const domain = document.domain || \"\";\n  if (domain === \"localhost\" || window.guardian?.config?.page?.isPreview) {\n    return domain;\n  }\n  if (isCrossSubdomain) {\n    return [\"\", ...domain.split(\".\").slice(-2)].join(\".\");\n  }\n  return domain.replace(/^(www|m\\.code|dev|m)\\./, \".\");\n};\n\nexport { getShortDomain };\n","const COOKIE_REGEX = /[()<>@,;\"\\\\/[\\]?={} \\t]/g;\nconst isValidCookieValue = (name) => !COOKIE_REGEX.test(name);\nconst isValidCookie = (name, value) => isValidCookieValue(name) && isValidCookieValue(value);\n\nexport { isValidCookie };\n","const memoizedCookies = /* @__PURE__ */ new Map();\n\nexport { memoizedCookies };\n","import { getShortDomain } from './getShortDomain.js';\n\nconst removeCookie = ({\n  name,\n  currentDomainOnly = false\n}) => {\n  const expires = \"expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n  const path = \"path=/;\";\n  document.cookie = `${name}=;${path}${expires}`;\n  if (!currentDomainOnly) {\n    document.cookie = `${name}=;${path}${expires} domain=${getShortDomain()};`;\n  }\n};\n\nexport { removeCookie };\n","import { ERR_INVALID_COOKIE } from './ERR_INVALID_COOKIE.js';\nimport { getCookieValues } from './getCookieValues.js';\nimport { getDomainAttribute } from './getDomainAttribute.js';\nimport { isValidCookie } from './isValidCookie.js';\nimport { memoizedCookies } from './memoizedCookies.js';\n\nconst setCookie = ({\n  name,\n  value,\n  daysToLive,\n  isCrossSubdomain = false\n}) => {\n  const expires = /* @__PURE__ */ new Date();\n  if (!isValidCookie(name, value)) {\n    throw new Error(`${ERR_INVALID_COOKIE} ${name}=${value}`);\n  }\n  if (daysToLive) {\n    expires.setUTCDate(expires.getUTCDate() + daysToLive);\n  } else {\n    expires.setUTCMonth(expires.getUTCMonth() + 5);\n    expires.setUTCDate(1);\n  }\n  document.cookie = `${name}=${value}; path=/; expires=${expires.toUTCString()};${getDomainAttribute(\n    {\n      isCrossSubdomain\n    }\n  )}`;\n  if (memoizedCookies.has(name)) {\n    const [value2] = getCookieValues(name);\n    if (value2) {\n      memoizedCookies.set(name, value2);\n    }\n  }\n};\n\nexport { setCookie };\n","const isNonNullable = (_) => _ !== void 0 && _ !== null;\n\nexport { isNonNullable };\n","const isObject = (value) => {\n  if (Object.prototype.toString.call(value) !== \"[object Object]\") {\n    return false;\n  }\n  const prototype = Object.getPrototypeOf(value);\n  return prototype === null || prototype === Object.prototype;\n};\n\nexport { isObject };\n","const isOneOf = (literals) => (value) => literals.includes(value);\n\nexport { isOneOf };\n","const isString = (_) => {\n  return Object.prototype.toString.call(_) === \"[object String]\";\n};\n\nexport { isString };\n","const isUndefined = (_) => _ === void 0;\n\nexport { isUndefined };\n","const STORAGE_KEY = \"gu.logger\";\n\nexport { STORAGE_KEY };\n","import { isString } from '../isString/isString.js';\nimport { isUndefined } from '../isUndefined/isUndefined.js';\nimport { storage } from '../storage/storage.js';\nimport { STORAGE_KEY } from './storage-key.js';\nimport { subscriptionStyles, isSubscription, commonStyle } from './subscriptions.js';\n\nvar _a;\nlet SUBSCRIPTIONS_CACHE;\nconst getSubscriptions = () => {\n  if (isUndefined(SUBSCRIPTIONS_CACHE)) {\n    const storedSubscriptions = storage.local.get(STORAGE_KEY);\n    if (isString(storedSubscriptions)) {\n      SUBSCRIPTIONS_CACHE = new Set(\n        storedSubscriptions.split(\",\").filter(isSubscription)\n      );\n    } else {\n      SUBSCRIPTIONS_CACHE = /* @__PURE__ */ new Set();\n    }\n  }\n  return SUBSCRIPTIONS_CACHE;\n};\nconst subscribeTo = (subscription) => {\n  const subscriptions = getSubscriptions();\n  subscriptions.add(subscription);\n  storage.local.set(STORAGE_KEY, Array.from(subscriptions).join(\",\"));\n  log(subscription, \"\\u{1F514} Subscribed, hello!\");\n};\nconst unsubscribeFrom = (subscription) => {\n  const subscriptions = getSubscriptions();\n  subscriptions.delete(subscription);\n  storage.local.set(STORAGE_KEY, Array.from(subscriptions).join(\",\"));\n  log(subscription, \"\\u{1F515} Unsubscribed, good-bye!\");\n};\nconst isSubscribedTo = (subscription) => getSubscriptions().has(subscription);\nconst logStyles = { ...subscriptionStyles, ...commonStyle };\nconst messageStyle = (subscriptionStyle) => {\n  const { background, font } = logStyles[subscriptionStyle];\n  return `background: ${background}; color: ${font}; padding: 2px 6px; border-radius:20px`;\n};\nconst log = (subscription, ...args) => {\n  if (isSubscribedTo(subscription)) {\n    const styles = [messageStyle(\"common\"), \"\", messageStyle(subscription), \"\"];\n    console.log(`%c@guardian%c %c${subscription}%c`, ...styles, ...args);\n  }\n};\nif (typeof window !== \"undefined\") {\n  window.guardian || (window.guardian = {});\n  (_a = window.guardian).logger || (_a.logger = {\n    subscribeTo,\n    unsubscribeFrom,\n    teams: () => {\n      console.warn(\n        \"guardian.logger.teams() is deprecated - use subscriptions()\"\n      );\n      return Object.keys(subscriptionStyles);\n    },\n    subscriptions: () => Object.keys(subscriptionStyles)\n  });\n}\n\nexport { isSubscribedTo, log, messageStyle };\n","const commonStyle = {\n  common: {\n    background: \"#C1D8FC\",\n    font: \"#052962\"\n  }\n};\nconst subscriptionStyles = {\n  commercial: {\n    background: \"#77EEAA\",\n    font: \"#004400\"\n  },\n  cmp: {\n    background: \"#FF6BB5\",\n    font: \"#2F0404\"\n  },\n  dotcom: {\n    background: \"#000000\",\n    font: \"#ff7300\"\n  },\n  design: {\n    background: \"#185E36\",\n    font: \"#FFF4F2\"\n  },\n  tx: {\n    background: \"#2F4F4F\",\n    font: \"#FFFFFF\"\n  },\n  supporterRevenue: {\n    background: \"#0F70B7\",\n    font: \"#ffffff\"\n  },\n  identity: {\n    background: \"#6F5F8F\",\n    font: \"#ffffff\"\n  },\n  openJournalism: {\n    background: \"#C74600\",\n    font: \"#FEF9F5\"\n  },\n  perf: {\n    background: \"#FFD700\",\n    font: \"#000000\"\n  }\n};\nconst isSubscription = (subscription) => Object.keys(subscriptionStyles).includes(subscription);\n\nexport { commonStyle, isSubscription, subscriptionStyles };\n","import { isNonNullable } from '../isNonNullable/isNonNullable.js';\nimport { isString } from '../isString/isString.js';\nimport { isSubscription } from '../logger/subscriptions.js';\n\nconst SEPARATOR = \":\";\nconst serialise = ({ subscription, name, action }) => [subscription, name, action].filter(isNonNullable).join(SEPARATOR);\nconst deserialise = (id) => {\n  const [subscription, name, action] = id.split(SEPARATOR);\n  return isString(subscription) && isSubscription(subscription) && isString(name) ? { subscription, name, action } : void 0;\n};\n\nexport { deserialise, serialise };\n","import { log } from '../logger/logger.js';\nimport { logPerf } from './log.js';\nimport { serialise } from './serialise.js';\n\nconst fallbackDuration = -1;\nconst getId = () => Math.trunc(Math.random() * 1679615).toString(36).padStart(4, \"0\");\nconst startPerformanceMeasure = (subscription, name, action) => {\n  try {\n    const measureName = serialise({ subscription, name, action });\n    const markName = `${measureName}-${getId()}`;\n    const start = performance.now();\n    performance.mark(markName);\n    const endPerformanceMeasure = () => {\n      try {\n        const { duration } = window.performance.measure(\n          measureName,\n          markName\n        ) ?? {\n          duration: performance.now() - start\n        };\n        const formattedDuration = Math.ceil(duration);\n        logPerf(measureName, formattedDuration);\n        return formattedDuration;\n      } catch (error) {\n        log(subscription, error);\n        return fallbackDuration;\n      }\n    };\n    return { endPerformanceMeasure };\n  } catch (error) {\n    log(subscription, error);\n    return { endPerformanceMeasure: () => fallbackDuration };\n  }\n};\n\nexport { startPerformanceMeasure };\n","import { isSubscribedTo, messageStyle } from '../logger/logger.js';\n\nconst logPerf = (measurement, duration) => {\n  if (!isSubscribedTo(\"perf\")) {\n    return;\n  }\n  const styles = [\n    messageStyle(\"common\"),\n    \"\",\n    messageStyle(\"perf\"),\n    \"\",\n    `font-weight: bold;`\n  ];\n  console.log(`%c@guardian%c %c${measurement}%c %c${duration}ms`, ...styles);\n};\n\nexport { logPerf };\n","import { isObject } from '../isObject/isObject.js';\nimport { isString } from '../isString/isString.js';\n\nvar __defProp = Object.defineProperty;\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), member.set(obj, value), value);\nvar _storage, _local, _session, _a;\nclass StorageFactory {\n  // https://mdn.io/Private_class_fields\n  constructor(storageHandler) {\n    __privateAdd(this, _storage);\n    /**\n     * Check whether storage is available.\n     */\n    __publicField(this, \"isAvailable\", () => Boolean(__privateGet(this, _storage)));\n    /**\n     * Retrieve an item from storage.\n     *\n     * @param key - the name of the item\n     */\n    __publicField(this, \"get\", (key) => {\n      try {\n        const data = JSON.parse(__privateGet(this, _storage)?.getItem(key) ?? \"\");\n        if (!isObject(data)) {\n          return null;\n        }\n        const { value, expires } = data;\n        if ((isString(expires) || typeof expires === \"number\") && /* @__PURE__ */ new Date() > new Date(expires)) {\n          this.remove(key);\n          return null;\n        }\n        return value;\n      } catch (e) {\n        return null;\n      }\n    });\n    /**\n     * Save a value to storage.\n     *\n     * @param key - the name of the item\n     * @param value - the data to save\n     * @param expires - optional date on which this data will expire\n     */\n    __publicField(this, \"set\", (key, value, expires) => __privateGet(this, _storage)?.setItem(\n      key,\n      JSON.stringify({\n        value,\n        expires: expires ? new Date(expires) : void 0\n      })\n    ));\n    /**\n     * Remove an item from storage.\n     *\n     * @param key - the name of the item\n     */\n    __publicField(this, \"remove\", (key) => __privateGet(this, _storage)?.removeItem(key));\n    /**\n     * Removes all items from storage.\n     */\n    __publicField(this, \"clear\", () => __privateGet(this, _storage)?.clear());\n    /**\n     * Retrieve an item from storage in its raw state.\n     *\n     * @param key - the name of the item\n     */\n    __publicField(this, \"getRaw\", (key) => __privateGet(this, _storage)?.getItem(key) ?? null);\n    /**\n     * Save a raw value to storage.\n     *\n     * @param key - the name of the item\n     * @param value - the data to save\n     */\n    __publicField(this, \"setRaw\", (key, value) => __privateGet(this, _storage)?.setItem(key, value));\n    /**\n     * Get key by index.\n     * @returns the name of the key at that index (`string`), or `null` (if\n     *      index is out of range of if storage is unavailable) - if the index\n     *      is out of range, or if storage is not available.\n     *\n     * Wrapper for the `key` method on the native `Storage` object, with\n     * additional check for availability of storage. Note that the _order_ of\n     * keys in storage is dependent on user-agent implementation, and so you\n     * should not assume that keys will be stored in any particular order (e.g.\n     * order of insertion).\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Storage/key\n     */\n    __publicField(this, \"key\", (index) => __privateGet(this, _storage)?.key(index) ?? null);\n    /**\n     * Get the number of items in storage.\n     * @returns the number of items in storage, or `null` if storage is\n     * \tnot available.\n     */\n    __publicField(this, \"length\", () => __privateGet(this, _storage)?.length ?? null);\n    try {\n      const storage2 = window[storageHandler];\n      const uid = (/* @__PURE__ */ new Date()).toString();\n      storage2.setItem(uid, uid);\n      const available = storage2.getItem(uid) == uid;\n      storage2.removeItem(uid);\n      if (available) {\n        __privateSet(this, _storage, storage2);\n      }\n    } catch (e) {\n    }\n  }\n}\n_storage = new WeakMap();\nconst storage = new (_a = class {\n  constructor() {\n    __privateAdd(this, _local);\n    __privateAdd(this, _session);\n  }\n  // creating the instance requires testing the native implementation\n  // which is blocking. therefore, only create new instances of the factory\n  // when it's accessed i.e. we know we're going to use it\n  get local() {\n    return __privateGet(this, _local) || __privateSet(this, _local, new StorageFactory(\"localStorage\"));\n  }\n  get session() {\n    return __privateGet(this, _session) || __privateSet(this, _session, new StorageFactory(\"sessionStorage\"));\n  }\n}, _local = new WeakMap(), _session = new WeakMap(), _a)();\n\nexport { storage };\n","const ophanRemoteHost = window?.ophanRemoteHost || 'https://ophan.theguardian.com';\n/**\n * Generates a unique page view ID.\n * @returns {string}\n */\nconst generatePageViewId = () => {\n    return `${new Date().getTime().toString(36)}${'xxxxxxxxxxxx'.replace(/x/g, () => Math.floor(Math.random() * 36).toString(36))}`;\n};\n// Guardian Frontend Project pre-generates the pageViewId\nlet viewId;\nif (typeof guardian !== 'undefined') {\n    viewId = guardian.config?.ophan?.pageViewId ?? generatePageViewId();\n}\nelse {\n    viewId = generatePageViewId();\n}\nconst bumpViewId = () => {\n    viewId = generatePageViewId();\n};\n/**\n * Sends the initial event associated with this page view.\n * @param {Record<string, any>} obj - The data to be sent.\n */\nconst sendInitial = (obj) => {\n    send(`${ophanRemoteHost}/img/1?${buildQueryString(obj)}`);\n};\n/**\n * Encodes a value for URL transmission.\n * @param {string | number} value - The value to encode.\n * @returns {string} The encoded value.\n */\nconst smartEncode = (value) => {\n    if (typeof value === 'string' || typeof value === 'number') {\n        return encodeURIComponent(value);\n    }\n    else {\n        return encodeURIComponent(JSON.stringify(value));\n    }\n};\n/**\n * Used for sending additional events after the initial PageView event.\n * @param {EventPayload} obj - The data object to be sent.\n * @param {Function} [f] - An optional callback function.\n */\nconst sendMore = (obj, f) => {\n    if (!JSON)\n        return;\n    const values = [];\n    for (const prop in obj) {\n        // @ts-ignore\n        if (obj.hasOwnProperty(prop) && isDefined(obj[prop])) {\n            // @ts-ignore\n            values.push(`${encodeURIComponent(prop)}=${smartEncode(obj[prop])}`);\n        }\n    }\n    if (values.length === 0) {\n        return;\n    }\n    const url = `${ophanRemoteHost}/img/2?viewId=${viewId}&${values.join('&')}`;\n    send(url, f);\n};\n/**\n * Checks if a value is defined and not null.\n * @param {*} v - The value to check.\n * @returns {boolean} True if the value is defined, false otherwise.\n */\nconst isDefined = (v) => {\n    if (Array.isArray(v)) {\n        return !!v.length;\n    }\n    else {\n        return v != null;\n    }\n};\n/**\n * Builds a query string from an object.\n * @param {Record<string, any>} obj - The object to convert to a query string.\n * @returns {string} The resulting query string.\n */\nconst buildQueryString = (obj) => {\n    obj.viewId = viewId;\n    const values = [];\n    for (const prop in obj) {\n        if (obj.hasOwnProperty(prop) && obj[prop] != null) {\n            values.push(`${encodeURIComponent(prop)}=${encodeURIComponent(obj[prop])}`);\n        }\n    }\n    return values.join('&');\n};\n/**\n * Sends data to a specified URL.\n * @param {string} url - The URL to send data to.\n * @param {() => void} [f] - An optional callback function.\n */\nconst send = (url, f) => {\n    if (typeof fetch === 'function') {\n        fetch(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            keepalive: true,\n            credentials: 'include',\n        }).then(() => f?.());\n    }\n    else {\n        const image = new Image();\n        const checker = setInterval(() => {\n            if (image.complete) {\n                if (typeof f === 'function') {\n                    f();\n                }\n                clearInterval(checker);\n            }\n        }, 10);\n        image.src = url;\n    }\n};\nexport default {\n    sendInitial,\n    sendMore,\n    viewId,\n    bumpViewId,\n};\n/**\n * Exports for testing purposes.\n */\nexport const _testExports = {\n    generatePageViewId,\n    smartEncode,\n    isDefined,\n    buildQueryString,\n};\n","export default {\n    state: () => document.visibilityState ||\n        document.webkitVisibilityState ||\n        document.mozVisibilityState ||\n        document.msVisibilityState,\n    changeEvent: getChangeEvent(),\n};\nfunction getChangeEvent() {\n    if (document.visibilityState) {\n        return 'visibilitychange';\n    }\n    else if (document.webkitVisibilityState) {\n        return 'webkitvisibilitychange';\n    }\n    else if (document.mozVisibilityState) {\n        return 'mozvisibilitychange';\n    }\n    else if (document.msVisibilityState) {\n        return 'msvisibilitychange';\n    }\n    return undefined;\n}\n","// Generated by CoffeeScript 2.7.0\n// TLDR; This is stripped down from the IAB ad block detection library.\n// https://github.com/InteractiveAdvertisingBureau/AdBlockDetection\n// The aforementioned library is not well maintained\n// and had work in progress network adblocking detection\nvar init = function () {\n    var ofs = 'offset', cl = 'client';\n    var noop = function () { };\n    var testedOnce = false;\n    var testExecuting = false;\n    var isOldIEevents = window.addEventListener === undefined;\n    /**\n     * Options set with default options initialized\n     *\n     */\n    var _options = {\n        loopDelay: 50,\n        maxLoop: 5,\n        debug: false,\n        found: noop,\n        notfound: noop,\n        complete: noop,\n    };\n    var listeners = []; // event response listeners\n    var baitNode = null;\n    var quickBait = {\n        cssClass: 'ad-slot pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links',\n    };\n    var baitTriggers = {\n        nullProps: [ofs + 'Parent'],\n        zeroProps: [],\n    };\n    baitTriggers.zeroProps = [\n        ofs + 'Height',\n        ofs + 'Left',\n        ofs + 'Top',\n        ofs + 'Width',\n        ofs + 'Height',\n        cl + 'Height',\n        cl + 'Width',\n    ];\n    // result object\n    var exeResult = {\n        quick: null,\n        remote: null,\n    };\n    var findResult = null; // result of test for ad blocker\n    var timerIds = {\n        test: 0,\n        download: 0,\n    };\n    function isFunc(fn) {\n        return typeof fn == 'function';\n    }\n    /**\n     * Make a DOM element\n     */\n    function makeEl(tag, attributes) {\n        var k, v, el, attr = attributes;\n        var d = document;\n        el = d.createElement(tag);\n        if (attr) {\n            for (k in attr) {\n                if (attr.hasOwnProperty(k)) {\n                    el.setAttribute(k, attr[k]);\n                }\n            }\n        }\n        return el;\n    }\n    function attachEventListener(dom, eventName, handler) {\n        if (isOldIEevents) {\n            dom.attachEvent('on' + eventName, handler);\n        }\n        else {\n            dom.addEventListener(eventName, handler, false);\n        }\n    }\n    function log(message, isError) {\n        if (!_options.debug && !isError) {\n            return;\n        }\n        if (window.console && window.console.log) {\n            if (isError) {\n                console.error('[ABD] ' + message);\n            }\n            else {\n                console.log('[ABD] ' + message);\n            }\n        }\n    }\n    function beginTest(bait) {\n        log('start beginTest');\n        if (findResult == true) {\n            return;\n        }\n        testExecuting = true;\n        castBait(bait);\n        exeResult.quick = 'testing';\n        timerIds.test = setTimeout(function () {\n            reelIn(bait, 1);\n        }, 5);\n    }\n    /**\n     * Create the bait node to see how the browser page reacts\n     */\n    function castBait(bait) {\n        var i, d = document, b = d.body;\n        var t;\n        var baitStyle = 'width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;';\n        if (bait == null || typeof bait == 'string') {\n            log('invalid bait being cast');\n            return;\n        }\n        if (bait.style != null) {\n            baitStyle += bait.style;\n        }\n        baitNode = makeEl('div', {\n            class: bait.cssClass,\n            style: baitStyle,\n        });\n        log('adding bait node to DOM');\n        b.appendChild(baitNode);\n        // touch these properties\n        for (i = 0; i < baitTriggers.nullProps.length; i++) {\n            t = baitNode[baitTriggers.nullProps[i]];\n        }\n        for (i = 0; i < baitTriggers.zeroProps.length; i++) {\n            t = baitNode[baitTriggers.zeroProps[i]];\n        }\n    }\n    /**\n     * Run tests to see if browser has taken the bait and blocked the bait element\n     */\n    function reelIn(bait, attemptNum) {\n        var i, k, v;\n        var body = document.body;\n        var found = false;\n        if (baitNode == null) {\n            log('recast bait');\n            castBait(bait || quickBait);\n        }\n        if (typeof bait == 'string') {\n            log('invalid bait used', true);\n            if (clearBaitNode()) {\n                setTimeout(function () {\n                    testExecuting = false;\n                }, 5);\n            }\n            return;\n        }\n        if (timerIds.test > 0) {\n            clearTimeout(timerIds.test);\n            timerIds.test = 0;\n        }\n        // test for issues\n        if (body.getAttribute('abp') !== null) {\n            log('found adblock body attribute');\n            found = true;\n        }\n        for (i = 0; i < baitTriggers.nullProps.length; i++) {\n            if (baitNode[baitTriggers.nullProps[i]] == null) {\n                if (attemptNum > 4)\n                    found = true;\n                log('found adblock null attr: ' + baitTriggers.nullProps[i]);\n                break;\n            }\n            if (found == true) {\n                break;\n            }\n        }\n        for (i = 0; i < baitTriggers.zeroProps.length; i++) {\n            if (found == true) {\n                break;\n            }\n            if (baitNode[baitTriggers.zeroProps[i]] == 0) {\n                if (attemptNum > 4)\n                    found = true;\n                log('found adblock zero attr: ' + baitTriggers.zeroProps[i]);\n            }\n        }\n        if (window.getComputedStyle !== undefined) {\n            var baitTemp = window.getComputedStyle(baitNode, null);\n            if (baitTemp.getPropertyValue('display') == 'none' ||\n                baitTemp.getPropertyValue('visibility') == 'hidden') {\n                if (attemptNum > 4)\n                    found = true;\n                log('found adblock computedStyle indicator');\n            }\n        }\n        testedOnce = true;\n        if (found || attemptNum++ >= _options.maxLoop) {\n            findResult = found;\n            log('exiting test loop - value: ' + findResult);\n            notifyListeners();\n            if (clearBaitNode()) {\n                setTimeout(function () {\n                    testExecuting = false;\n                }, 5);\n            }\n        }\n        else {\n            timerIds.test = setTimeout(function () {\n                reelIn(bait, attemptNum);\n            }, _options.loopDelay);\n        }\n    }\n    function clearBaitNode() {\n        if (baitNode === null) {\n            return true;\n        }\n        try {\n            if (isFunc(baitNode.remove)) {\n                baitNode.remove();\n            }\n            document.body.removeChild(baitNode);\n        }\n        catch (ex) { }\n        baitNode = null;\n        return true;\n    }\n    /**\n     * Halt the test and any pending timeouts\n     */\n    function stopFishing() {\n        if (timerIds.test > 0) {\n            clearTimeout(timerIds.test);\n        }\n        if (timerIds.download > 0) {\n            clearTimeout(timerIds.download);\n        }\n        clearBaitNode();\n    }\n    /**\n     * Fire all registered listeners\n     */\n    function notifyListeners() {\n        var i, funcs;\n        if (findResult === null) {\n            return;\n        }\n        for (i = 0; i < listeners.length; i++) {\n            funcs = listeners[i];\n            try {\n                if (funcs != null) {\n                    if (isFunc(funcs['complete'])) {\n                        funcs['complete'](findResult);\n                    }\n                    if (findResult && isFunc(funcs['found'])) {\n                        funcs['found']();\n                    }\n                    else if (findResult === false && isFunc(funcs['notfound'])) {\n                        funcs['notfound']();\n                    }\n                }\n            }\n            catch (ex) {\n                log('Failure in notify listeners ' + ex.Message, true);\n            }\n        }\n    }\n    /**\n     * Attaches event listener or fires if events have already passed.\n     */\n    function attachOrFire() {\n        var fireNow = false;\n        var fn;\n        if (document.readyState) {\n            if (document.readyState == 'complete') {\n                fireNow = true;\n            }\n        }\n        fn = function () {\n            beginTest(quickBait, false);\n        };\n        if (fireNow) {\n            fn();\n        }\n        else {\n            attachEventListener(window, 'load', fn);\n        }\n    }\n    /**\n     * Public interface of adblock detector\n     */\n    return function (options) {\n        var k, v, funcs;\n        if (!options) {\n            return;\n        }\n        funcs = {\n            complete: noop,\n            found: noop,\n            notfound: noop,\n        };\n        for (k in options) {\n            if (options.hasOwnProperty(k)) {\n                if (k == 'complete' || k == 'found' || k == 'notFound') {\n                    funcs[k.toLowerCase()] = options[k];\n                }\n                else {\n                    _options[k] = options[k];\n                }\n            }\n        }\n        listeners.push(funcs);\n        attachOrFire();\n    };\n};\nexport default {\n    init: init(),\n};\n","import abd from './vendor/adBlockDetectionLib.js';\nexport default {\n    run() {\n        return new Promise((resolve, reject) => {\n            if (abd.init) {\n                try {\n                    abd.init({\n                        complete: resolve,\n                    });\n                }\n                catch (error) {\n                    reject(error);\n                }\n            }\n            else {\n                reject(new Error('Failed to initialise adblock detection'));\n            }\n        });\n    },\n};\n","let init, sendInitialEvent, storeDataToSendOnNextEvent, hasProp = {}.hasOwnProperty;\nimport transmit from './transmit.js';\nimport visibility from './visibility.js';\nimport adblockDetection from './adblock-detection.js';\nconst VERSION = 17;\nlet doc = window.document;\nconst canStoreEventsInLocalStorage = window.localStorage != null && typeof JSON !== 'undefined' && JSON !== null;\nlet platform = null;\nconst MaximumComponentNameLength = 50;\ninit = function (servingPlatform, httpStatus) {\n    platform = servingPlatform;\n    if (visibility.state() !== 'prerender') {\n        return sendInitialEvent(httpStatus);\n    }\n    else {\n        if (visibility.changeEvent) {\n            return doc.addEventListener(visibility.changeEvent, function () {\n                if (visibility.state() === 'visible') {\n                    return sendInitialEvent(httpStatus);\n                }\n            }, false);\n        }\n    }\n};\n/**\n * Retrieves the value of a specified query parameter from the current page's URL.\n * Using an old-fashioned way of finding a query param rather than using searchParams\n * as we don't control which environments the CDN distribution is being used in and so don't know if it's supported.\n * @param {string} paramName - The name of the query parameter to retrieve.\n * @returns {string | undefined} The value of the query parameter, or undefined if not found.\n */\nconst getQueryParameterValue = (paramName) => {\n    const queryString = window.location.search.substring(1);\n    const queryParams = queryString.split('&');\n    for (const param of queryParams) {\n        const [key, value] = param.split('=');\n        if (key === paramName) {\n            return decodeURIComponent(value);\n        }\n    }\n};\n/**\n * Retrieves the referrer URL from the given referrer or a fallback query parameter.\n * If an authentication flow takes place on page load, the referrer is lost.\n * So, if no referrer, fall back to query param holding the value of the referrer before the auth flow began.\n * See https://github.com/guardian/support-frontend/blob/main/support-frontend/app/controllers/AuthCodeFlowController.scala#L105\n * for an example use. * @param {string} referrer - The document referrer.\n * @param {string} referrer - The document referrer.\n * @returns {string} The referrer URL or the fallback query parameter value.\n */\nconst getReferrer = (referrer) => {\n    return referrer || getQueryParameterValue('pre-auth-ref') || '';\n};\n/**\n * Retrieves the type of navigation that occurred to arrive at the current page, using the Performance API.\n * Returns null if the navigation type is not available.\n * @returns {string | null} The navigation type (e.g., 'navigate', 'reload', 'back_forward'), or null if not available.\n */\nconst getNavigationType = () => {\n    if (window.performance?.getEntriesByType) {\n        const entries = window.performance.getEntriesByType('navigation');\n        if (entries.length > 0) {\n            return entries[0].type;\n        }\n    }\n    return null;\n};\nsendInitialEvent = function (httpStatus, url = location.href, referrer = window.document.referrer) {\n    const navigationType = getNavigationType();\n    // send initial event\n    const event = {\n        v: VERSION,\n        platform: platform,\n        url: url,\n        ref: getReferrer(referrer),\n        visibilityState: visibility.state(),\n        isModernBrowser: typeof guardian !== 'undefined' && guardian !== null\n            ? guardian.isModernBrowser\n            : void 0,\n        httpStatus: httpStatus,\n        tz: new Date().getTimezoneOffset(),\n    };\n    if (navigationType != null) {\n        // Add navigation type as metadata to the event if it's not null\n        event.navigationType = navigationType;\n    }\n    appendContentType(event);\n    appendDataFromLocalStorageToEvent(event);\n    transmit.sendInitial(event);\n    return adblockDetection.run().then(function (adBlockerEnabled) {\n        // `adUnitWasHidden` is the query param used\n        // by the previous adblock detection, hence reusing it here.\n        return transmit.sendMore({\n            adUnitWasHidden: adBlockerEnabled,\n        });\n    });\n};\nconst onLoadCaptures = [];\n/**\n * Registers a data capture function to be called when the document is fully loaded.\n * The result of this function is then sent to the tracker backend service.\n * If the document is already loaded, this is done immediately.\n *\n * @param {() => Record<string, unknown>} dataCapture - A function that returns an object containing performance metrics such as page load time, network latency, etc.\n * Refer to the `perf.js` file where this function is used for more info.\n */\nconst onLoadCapture = (dataCapture) => {\n    if (document.readyState === 'complete') {\n        const msg = { ...dataCapture() };\n        transmit.sendMore(msg);\n    }\n    else {\n        onLoadCaptures.push(dataCapture);\n    }\n};\n/**\n * Processes all registered data capture functions, merges their outputs and sends it to the tracker backend service.\n * If on a 'next-gen' platform, additional component data is appended to the event via the `appendComponentDataToEvent` function.\n */\nconst processCaptures = () => {\n    const msg = {};\n    for (const capture of onLoadCaptures) {\n        const captureData = capture();\n        for (const key in captureData) {\n            if (captureData.hasOwnProperty(key)) {\n                msg[key] = captureData[key];\n            }\n        }\n    }\n    if (platform === 'next-gen') {\n        appendComponentDataToEvent(msg);\n    }\n    transmit.sendMore(msg);\n};\nwindow.addEventListener?.('load', processCaptures, false);\n/**\n * Appends data from local storage to a given event object.\n * Specifically targets data stored under the 'ophan_follow' key in localStorage.\n * After appending the data to the event, it removes the data from localStorage.\n * @param {Record<string, unknown>} event - The event object to which the local storage data will be appended.\n */\nconst appendDataFromLocalStorageToEvent = (event) => {\n    if (canStoreEventsInLocalStorage) {\n        const localStorageItems = JSON.parse(window.localStorage.getItem('ophan_follow'));\n        if (localStorageItems != null) {\n            for (const key in localStorageItems) {\n                if (localStorageItems.hasOwnProperty(key)) {\n                    event[key] = localStorageItems[key];\n                }\n            }\n        }\n        window.localStorage.removeItem('ophan_follow');\n    }\n};\n/**\n * Trims component names to a maximum length to ensure they are URL safe.\n * If a component name exceeds the maximum length, it is truncated and appended with an ellipsis.\n * @param {string[]} componentNames - An array of component names.\n * @returns {string[]} An array of trimmed component names.\n */\nconst trimComponentNamesToUrlSafeLength = (componentNames) => {\n    return componentNames.map((componentName) => componentName.length > MaximumComponentNameLength\n        ? componentName.substring(0, MaximumComponentNameLength).concat('…')\n        : componentName);\n};\n/**\n * Appends data about rendered components to an event object.\n * Extracts component names from elements with a 'data-component' attribute, trims them for URL safety, ensures uniqueness, and adds them to the event.\n * @param {Object} event - The event object to which component data will be appended.\n */\nconst appendComponentDataToEvent = (event) => {\n    const componentElements = document.querySelectorAll('[data-component]');\n    const componentNames = Array.prototype.slice.call(componentElements).map((el) => el.getAttribute('data-component'));\n    if (componentNames.length > 0) {\n        const trimmedComponentNames = trimComponentNamesToUrlSafeLength(componentNames);\n        // uniquify\n        const uniqueComponents = new Set(trimmedComponentNames);\n        event.renderedComponents = [...uniqueComponents];\n    }\n};\nstoreDataToSendOnNextEvent = function (newData) {\n    let existingData, key, value;\n    if (canStoreEventsInLocalStorage) {\n        existingData =\n            JSON.parse(window.localStorage.getItem('ophan_follow')) || {};\n        for (key in newData) {\n            if (!hasProp.call(newData, key))\n                continue;\n            value = newData[key];\n            existingData[key] = value;\n        }\n        return window.localStorage.setItem('ophan_follow', JSON.stringify(existingData));\n    }\n};\n/**\n * Determines the 'content type' based on the platform and guardian object.\n * @param {Record<string, unknown>} event - The event object that will be updated with contentType.\n * @param {string} platform - The current platform ('next-gen', 'embed' or other).\n * @param {Record<string, unknown>} guardian - The guardian object.\n */\nconst appendContentType = (event, platform, guardian) => {\n    const contentType = platform === 'next-gen' || platform === 'embed'\n        ? guardian?.config?.page?.contentType\n        : guardian?.page?.contentTypes;\n    if (contentType) {\n        event.contentType = contentType.toLowerCase();\n    }\n};\nexport default {\n    init: init,\n    storeDataToSendOnNextEvent: storeDataToSendOnNextEvent,\n    onLoadCapture: onLoadCapture,\n    servingPlatform: function () {\n        return platform;\n    },\n    viewId: transmit.viewId,\n    sendInitialEvent: sendInitialEvent,\n};\n/**\n * Exports for testing purposes.\n */\nexport const _testExports = {\n    appendComponentDataToEvent,\n    trimComponentNamesToUrlSafeLength,\n    getQueryParameterValue,\n    onLoadCaptures,\n    onLoadCapture,\n    processCaptures,\n    appendContentType,\n};\n","/**\n * @type {Component[]}\n */\nexport const components = [];\n/**\n * theguardian.com uses a custom scroll event for performance reasons.\n * We pass in the event emitter so that we can listen to this custom scroll event.\n * If not on theguardian.com, we default to the native scroll event\n * @type {Object|null}\n */\nlet eventEmitter = null;\n// Tracks attention time of elements on the page with data-component attributes.\n// This should always be less than or equal to the page attention time.\n// If the page does not have attention, no component has attention.\n// If the page does have attention, a given component *may* also have\n// attention, if it is within the viewport and not hidden.\nclass Component {\n    /**\n     * Component constructor.\n     * @param {string} name - The name of the component.\n     * @param {HTMLElement} element - The DOM element of the component.\n     * @param {number} visibilityThreshold1 -\n     *    visibilityThreshold represents the fraction of each component that must\n     *    be in the viewport before it is considered visible.\n     *    e.g. 0.5 means that half the height or width must be in the viewport\n     *    1 means that the entire element must be in the viewport\n     * @param {number} reportingInterval1 - ??\n     */\n    constructor(name, element, visibilityThreshold1, reportingInterval1) {\n        this.name = name;\n        this.element = element;\n        this.visibilityThreshold = visibilityThreshold1;\n        this.reportingInterval = reportingInterval1;\n        this.visible = false;\n        // total attention time so far for this element\n        this.totalAttentionMs = 0;\n        // the time elapsed since the time origin (https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#the_time_origin)\n        // when the most recent period of attention (that is, attention\n        // which we haven't yet added to totalAttentionMs) began.\n        // null if we don't have attention.\n        this.unrecordedAttentionStarted = null;\n        // the attention time when getAttentionTime() was last called\n        this.reportedTotalAttentionMs = 0;\n        this.usingEmitter = false;\n        this.visCheck = this.checkVisibility.bind(this);\n        if (eventEmitter != null) {\n            this.usingEmitter = true;\n            eventEmitter.on('window:throttledScroll', this.visCheck);\n        }\n        else {\n            window.addEventListener('scroll', this.visCheck);\n        }\n        window.addEventListener('resize', this.visCheck);\n    }\n    isVisible(threshold = 1) {\n        if (!this.element.offsetParent) {\n            // exclude hidden elements\n            // will also exclude position: fixed elements but we don't care about these\n            // (because their attention time would always be the same as the whole page)\n            // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n            return false;\n        }\n        const box = this.element.getBoundingClientRect();\n        const width = box.width;\n        const height = box.height;\n        const windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        const windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        return (box.left >= -(width * (1 - threshold)) &&\n            box.top >= -(height * (1 - threshold)) &&\n            box.right <= windowWidth + width * (1 - threshold) &&\n            box.bottom <= windowHeight + height * (1 - threshold));\n    }\n    visibilityHasChanged() {\n        const wasVisible = this.visible;\n        this.visible = this.isVisible(this.visibilityThreshold);\n        return wasVisible !== this.visible;\n    }\n    rebindToEventEmitter() {\n        if (!this.usingEmitter && eventEmitter != null) {\n            window.removeEventListener('scroll', this.visCheck);\n            this.usingEmitter = true;\n            return eventEmitter.on('window:throttledScroll', this.visCheck);\n        }\n    }\n    checkVisibility() {\n        this.rebindToEventEmitter();\n        if (this.visibilityHasChanged()) {\n            return this.visible ? this.makeActive() : this.makeInactive();\n        }\n    }\n    makeActive() {\n        // mark when the latest period of attention began,\n        // if we're not already in an attention period\n        return this.unrecordedAttentionStarted != null\n            ? this.unrecordedAttentionStarted\n            : (this.unrecordedAttentionStarted = performance.now());\n    }\n    makeInactive() {\n        this.incrementTotalAttentionTimeByUnrecordedAmount();\n        return (this.unrecordedAttentionStarted = null);\n    }\n    hadAttentionSinceLastGet() {\n        this.incrementTotalAttentionTimeByUnrecordedAmount();\n        return this.totalAttentionMs !== this.reportedTotalAttentionMs;\n    }\n    getAttentionTime() {\n        this.incrementTotalAttentionTimeByUnrecordedAmount();\n        this.reportedTotalAttentionMs = this.totalAttentionMs;\n        return this.totalAttentionMs;\n    }\n    incrementTotalAttentionTimeByUnrecordedAmount() {\n        if (this.unrecordedAttentionStarted != null) {\n            const now = performance.now();\n            // the Math.min here is to deal with occasions where we don't get an event indicating that the user\n            // has become inactive - this can happen e.g. due to users suspending their phone. Never send\n            // crazy big values!\n            const unrecordedMs = Math.min(now - this.unrecordedAttentionStarted, this.reportingInterval);\n            this.totalAttentionMs += unrecordedMs;\n            return (this.unrecordedAttentionStarted = now);\n        }\n    }\n}\n/**\n * Begins monitoring the components on the page for attention time.\n * @returns {Array} Array of results from makeActive() for each visible component.\n */\nconst startMonitoring = () => {\n    return components\n        .filter((component) => component.isVisible())\n        .map((component) => component.makeActive());\n};\n/**\n * Stops monitoring the components on the page for attention time.\n * @returns {Array} Array of results from makeInactive() for each component.\n */\nconst stopMonitoring = () => {\n    return components.map((component) => component.makeInactive());\n};\n/**\n * Retrieves the attention times for all components.\n * @returns {Object}\n */\nconst getAttentionTimes = () => {\n    const obj = {};\n    for (const component of components) {\n        if (component.hadAttentionSinceLastGet()) {\n            // if there are duplicate component names, only the last one survives\n            obj[component.name] = Math.round(component.getAttentionTime());\n        }\n    }\n    return obj;\n};\nexport default {\n    /**\n     * @param {Object} emitter - The event emitter to set.\n     * @returns {Object}\n     */\n    setEventEmitter: function (emitter) {\n        return (eventEmitter = emitter);\n    },\n    startMonitoring,\n    stopMonitoring,\n    getAttentionTimes,\n    /** @type {(...args: ConstructorParameters<typeof Component>) => void} */\n    registerComponent: function (name, el, visibilityThreshold, reportingInterval) {\n        return components.push(new Component(name, el, visibilityThreshold, reportingInterval));\n    },\n};\n","// Generated by CoffeeScript 2.7.0\nimport transmit from './transmit.js';\nimport components from './components.js';\n// The upworthy definition of attention minutes, from\n// http://upworthy.github.io/2014/06/implementing-attention-minutes-part-1/ :\n// \"We consider the page to have the user’s attention if\n//  1. some activity is happening on the page. For our purposes this means:\n//     1. the page currently has focus\n//     2. and the user has interacted with the page within a certain timeout\n//  2. or a video is playing on the page\n//  Attention Minutes, then, are the total number of minutes that a user has spent on\n//  a page where the above conditions have held true.\"\n// our definition of \"within a certain timeout\" above:\nconst ATTENTIONDECAY = 5000;\n// our definition of \"the user has interacted with the page\"\nconst EVENTS = [\n    'focus',\n    'click',\n    'scroll',\n    'mousemove',\n    'touchstart',\n    'touchend',\n    'touchcancel',\n    'touchleave',\n    'touchmove',\n    'keyup',\n    'keydown',\n];\nconst REPORTINGINTERVAL = 10000;\n// total attention time so far on this page\nlet totalAttentionMs = 0;\n// the time elapsed since the time origin (https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#the_time_origin)\n// when the most recent period of attention (that is, attention\n// which we haven't yet added to totalAttentionMs) began.\n// null if we don't have attention.\nlet unrecordedAttentionStarted = null;\n// the attention time we last reported to ophan\nlet reportedTotalAttentionMs = null; // setting null here forces a first report of attention time, even if it's only 0ms\n// the decay timer if we've set one\nlet decayTimerId = null;\n// is video currently playing?\nlet videoPlaying = false;\nconst cancelDecayTimer = () => {\n    if (decayTimerId != null) {\n        window.clearTimeout(decayTimerId);\n    }\n    decayTimerId = null;\n};\nconst makeActive = () => {\n    if (unrecordedAttentionStarted == null) {\n        unrecordedAttentionStarted = performance.now();\n    }\n    components.startMonitoring();\n    cancelDecayTimer();\n    decayTimerId = window.setTimeout(() => {\n        if (!videoPlaying) {\n            makeInactive();\n        }\n    }, ATTENTIONDECAY);\n};\nconst incrementTotalAttentionTimeByUnrecordedAmount = () => {\n    if (unrecordedAttentionStarted != null) {\n        const now = performance.now();\n        const unrecordedMs = Math.min(now - unrecordedAttentionStarted, REPORTINGINTERVAL);\n        totalAttentionMs += unrecordedMs;\n        unrecordedAttentionStarted = now;\n    }\n};\nconst makeInactive = () => {\n    cancelDecayTimer();\n    components.stopMonitoring();\n    incrementTotalAttentionTimeByUnrecordedAmount();\n    unrecordedAttentionStarted = null;\n};\nconst reporter = () => {\n    incrementTotalAttentionTimeByUnrecordedAmount();\n    if (totalAttentionMs !== reportedTotalAttentionMs) {\n        const report = {\n            attentionMs: Math.round(totalAttentionMs),\n        };\n        const componentAttentionTimes = components.getAttentionTimes();\n        if (Object.keys(componentAttentionTimes).length) {\n            report.componentAttentionMs = componentAttentionTimes;\n        }\n        transmit.sendMore(report);\n        reportedTotalAttentionMs = totalAttentionMs;\n    }\n};\nconst initComponent = (name, el, visibilityThreshold = 0.5) => {\n    components.registerComponent(name, el, visibilityThreshold, REPORTINGINTERVAL);\n};\nconst initAttention = (visibility) => {\n    EVENTS.forEach((event) => {\n        window.addEventListener(event, makeActive);\n    });\n    document.addEventListener(visibility.changeEvent, () => {\n        if (visibility.state() === 'visible') {\n            makeActive();\n        }\n        else {\n            makeInactive();\n        }\n    }, false);\n    document.addEventListener('videoPlaying', () => {\n        videoPlaying = true;\n        makeActive();\n    });\n    document.addEventListener('videoEnded', () => {\n        videoPlaying = false;\n        makeInactive();\n    });\n    document.addEventListener('videoPause', () => {\n        videoPlaying = false;\n        makeInactive();\n    });\n    window.setTimeout(reporter, 100);\n    window.setInterval(reporter, REPORTINGINTERVAL);\n};\nconst setEventEmitter = (emitter) => {\n    components.setEventEmitter(emitter);\n};\nexport default {\n    init: initAttention,\n    initComponent: initComponent,\n    setEventEmitter: setEventEmitter,\n};\n","import transmit from './transmit.js';\n/*\n    TO-DO:\n    This function could probably be simplified with an async function.\n    It basically returns a `boolean`, but uses a callback to do so... I can only guess it’s because of [`requestFileSystem`’s signature](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestFileSystem).\n */\nconst privateBrowsingMode = (callback) => {\n    const reportNormalMode = () => callback(false);\n    const reportPrivateMode = () => callback(true);\n    const tryLocalStorage = () => {\n        try {\n            if (localStorage.length) {\n                reportNormalMode();\n            }\n            else {\n                localStorage.x = 1;\n                localStorage.removeItem('x');\n                reportNormalMode();\n            }\n        }\n        catch (error) {\n            reportPrivateMode();\n        }\n    };\n    const tryIndexedDB = () => {\n        try {\n            const db = indexedDB.open('test');\n            db.onsuccess = reportNormalMode;\n            db.onerror = reportPrivateMode;\n        }\n        catch (error) {\n            reportPrivateMode();\n        }\n    };\n    // Blink\n    if (window.webkitRequestFileSystem) {\n        window.webkitRequestFileSystem(window.TEMPORARY, 1, reportNormalMode, reportPrivateMode);\n        // Firefox\n    }\n    else if ('MozAppearance' in document.documentElement.style) {\n        tryIndexedDB();\n        // Safari\n    }\n    else if (/constructor/i.test(window.HTMLElement)) {\n        tryLocalStorage();\n    }\n    else if (!window.indexedDB &&\n        (window.PointerEvent || window.MSPointerEvent)) {\n        reportPrivateMode();\n    }\n    else {\n        // Rest\n        reportNormalMode();\n    }\n};\nexport default {\n    init() {\n        privateBrowsingMode((value) => {\n            const report = {\n                inPrivateBrowsingMode: value,\n            };\n            transmit.sendMore(report);\n        });\n    },\n    privateBrowsingMode,\n};\n","let heatmapFired = false;\nconst init = () => {\n    const addHeatmap = () => {\n        let heatmapParam;\n        if (typeof localStorage !== 'undefined' &&\n            localStorage !== null &&\n            !heatmapFired) {\n            heatmapFired = true;\n            heatmapParam = window.location.search.replace(/^(?:.*[&\\?]heatmap(?:\\=([^&]*))?)?.*$/, '$1');\n            if (heatmapParam === 'experimental') {\n                return (document.body.appendChild(document.createElement('script')).src = '//dashboard.ophan.co.uk/assets/js/react/heatphan/index.js');\n            }\n            if (heatmapParam === 'true' || heatmapParam === 'false') {\n                localStorage['ophan_heatmap'] = heatmapParam;\n            }\n            if (localStorage['ophan_heatmap'] === 'true' || heatmapParam === 'show') {\n                return (document.body.appendChild(document.createElement('script')).src = '//dashboard.ophan.co.uk/assets/js/heatmap-bookmarklet.js');\n            }\n        }\n    };\n    if (document.readyState === 'complete') {\n        return addHeatmap();\n    }\n    else {\n        return typeof window.addEventListener === 'function'\n            ? window.addEventListener('load', function () {\n                return addHeatmap();\n            }, false)\n            : void 0;\n    }\n};\nexport default {\n    init,\n};\n","import ophan from './core.js';\nimport transmit from './transmit.js';\n/**\n * Finds the closest ancestor anchor (`<a>`) element of the given element.\n *\n * @param {Element} el - The element to start searching from.\n * @returns {Element|null} The closest ancestor anchor element or null if none found.\n */\nexport const validAncestorAnchorElement = (el) => {\n    if (!el || el.nodeName?.toLowerCase() === 'body')\n        return null;\n    return el.nodeName.toLowerCase() === 'a'\n        ? el\n        : validAncestorAnchorElement(el.parentNode);\n};\n/**\n * Retrieves the value of the `data-component` attribute from the closest ancestor.\n *\n * @param {Element} el - The element to start searching from.\n * @returns {string|null} The `data-component` attribute value or null if not found.\n */\nexport const getContainingComponent = (el) => {\n    if (!el || el.nodeName?.toLowerCase() === 'body')\n        return null;\n    return (el.getAttribute('data-component') || getContainingComponent(el.parentNode));\n};\n/**\n * Collects all `data-link-name` attribute values from the ancestor elements.\n *\n * @param {Element} el - The element to start searching from.\n * @param {string[]} dataLinkNames - Initial array of data link names (optional).\n * @returns {string[]} Array of `data-link-name` values.\n */\nconst getDataLinkNames = (el, dataLinkNames = []) => {\n    if (!el || el === document.body || el === document)\n        return dataLinkNames;\n    const dataLinkName = el.getAttribute('data-link-name');\n    if (dataLinkName)\n        dataLinkNames.push(dataLinkName);\n    return getDataLinkNames(el.parentNode, dataLinkNames);\n};\nif (typeof document.addEventListener === 'function') {\n    document.addEventListener('click', function (e) {\n        let target = e.target;\n        let info;\n        // For anchors, use validAncestorAnchorElement\n        const anchorTarget = validAncestorAnchorElement(target);\n        const nonTrackableElements = [\n            'div',\n            'span',\n            'p',\n            'section',\n            'article',\n            'main',\n            'header',\n            'footer',\n            'nav',\n        ];\n        if (nonTrackableElements.includes(target.tagName.toLowerCase()) &&\n            !anchorTarget) {\n            return;\n        }\n        // If it's an anchor, use anchorTarget, otherwise use the original target\n        const trackingTarget = anchorTarget || target;\n        info = {\n            from: [location.protocol, '//', location.host, location.pathname].join(''),\n            to: trackingTarget.href || undefined,\n            referringComponent: getContainingComponent(trackingTarget),\n            referringDataLinkNames: getDataLinkNames(trackingTarget),\n            refPlatform: ophan.servingPlatform(),\n            refViewId: ophan.viewId,\n        };\n        if (info.referringDataLinkNames && info.referringDataLinkNames.length > 0) {\n            transmit.sendMore({\n                clickComponent: info.referringComponent,\n                clickLinkNames: info.referringDataLinkNames,\n            });\n        }\n        if (anchorTarget) {\n            // If it's an anchor, we may be about to navigate away from this page, so store to send on next request\n            return ophan.storeDataToSendOnNextEvent(info);\n        }\n    }, false);\n}\nexport default {\n    getDataLinkNames: getDataLinkNames,\n};\n","// Generated by CoffeeScript 2.7.0\nimport core from './core.js';\nconst perf = window.performance ||\n    window.msPerformance ||\n    window.webkitPerformance ||\n    window.mozPerformance;\nconst sendTimingData = () => {\n    const t = perf?.timing;\n    if (t) {\n        return {\n            performance: {\n                // Time required for domain lookup.\n                dns: t.domainLookupEnd - t.domainLookupStart,\n                // Time to establish a connection to server.\n                connection: t.connectEnd - t.connectStart,\n                // From connection established to first byte of data.\n                firstByte: t.responseStart - t.connectEnd,\n                // First byte to last byte, or closed, including if from cache.\n                lastByte: t.responseEnd - t.responseStart,\n                // From last byte of doc to start of domContentLoaded\n                domContentLoadedEvent: t.domContentLoadedEventStart - t.responseEnd,\n                // domcontentLoaded to start of load event.\n                loadEvent: t.loadEventStart - t.domContentLoadedEventStart,\n                // click, back/forward, etc...\n                navType: perf.navigation.type,\n                // No. of redirects on current domain.\n                redirectCount: perf.navigation.redirectCount,\n            },\n        };\n    }\n    else {\n        return {};\n    }\n};\ncore.onLoadCapture(sendTimingData);\nexport default perf;\n","import clickCapture from './click-path-capture.js';\nconst validIframeDomains = [\n    '.theguardian.com',\n    '.dev-theguardian.com',\n    '.thegulocal.com', // NB - leading dot is essential here to avoid matching on non-Guardian-owned domains\n];\n/**\n * Handles messages received from iframes, recording events as necessary.\n * @param {MessageEvent} messageEvent - The message event received from an iframe.\n */\nconst handleIframeMessage = (messageEvent) => {\n    const originDomain = retrieveOriginDomain(messageEvent.origin);\n    if (originDomain &&\n        validIframeDomains.some((domain) => originDomain.endsWith(domain))) {\n        if (messageEvent.data.type === 'ophan-iframe-click-event') {\n            const eventObject = messageEvent.data.value;\n            const iFrame = document.getElementById(messageEvent.data.iframeId);\n            recordIframeClickEvent(iFrame, eventObject);\n        }\n        else if (messageEvent.data.type === 'ophan-iframe-component-event') {\n            const eventObject = messageEvent.data.value;\n            recordIframeComponentEvent(eventObject);\n        }\n    }\n};\n/**\n * Retrieves the domain from an event's origin URL.\n * @param {string} eventOrigin - The origin URL of the event.\n * @returns {(string|null)} The domain of the origin URL or null if it cannot be parsed.\n */\nconst retrieveOriginDomain = (eventOrigin) => {\n    try {\n        const originURL = new URL(eventOrigin);\n        return originURL.host;\n    }\n    catch (error) {\n        if (error instanceof TypeError) {\n            // We failed to parse origin as an URL, we should ignore the event\n            return null;\n        }\n        else {\n            throw error;\n        }\n    }\n};\n/**\n * Records a click event occurring within an iframe.\n * @param {HTMLElement} iFrame - The iframe element where the click event occurred.\n * @param {Object} clickEvent - The click event object to record.\n */\nconst recordIframeClickEvent = (iFrame, clickEvent) => {\n    if (iFrame) {\n        clickEvent.clickLinkNames =\n            clickCapture.getDataLinkNames(iFrame, clickEvent.clickLinkNames) ||\n                clickEvent.clickLinkNames;\n    }\n    window.guardian.ophan.record(clickEvent);\n};\n/**\n * Validates if an event object is a valid component event.\n * @param {Object} eventObject - The event object to validate.\n * @returns {boolean} True if the event object is valid, false otherwise.\n */\nconst componentEventIsValid = (eventObject) => {\n    return (eventObject &&\n        typeof eventObject === 'object' &&\n        eventObject.componentEvent &&\n        typeof eventObject.componentEvent === 'object');\n};\n/**\n * Records a component event from an iframe.\n * @param {Object} eventObject - The component event object to record.\n */\nconst recordIframeComponentEvent = (eventObject) => {\n    if (!componentEventIsValid(eventObject)) {\n        return;\n    }\n    window.guardian.ophan.record(eventObject);\n};\nwindow.addEventListener('message', handleIframeMessage, false);\n","import core from './core.js';\nimport transmit from './transmit.js';\nimport attention from './attention.js';\nimport visibility from './visibility.js';\nimport privatebrowsing from './privatebrowsing.js';\nimport heatmap from './heatmap.js';\nimport './click-path-capture.js';\nimport './perf.js';\nimport './iframe-tracking.js';\nexport * from './types/abtest.js';\nexport * from './types/acquisition.js';\nexport * from './types/subscription.js';\nexport * from './types/interaction.js';\nexport * from './types/inpageclick.js';\nexport * from './types/printproduct.js';\nexport * from './types/product.js';\nexport * from './types/platform.js';\nexport * from './types/media.js';\nexport * from './types/consent.js';\nexport * from './types/component-type.js';\nexport * from './types/component-event.js';\nexport * from './types/event.js';\nlet ng;\nif (window.guardian && window.guardian.ophan) {\n    ng = window.guardian.ophan;\n}\nelse {\n    core.init('next-gen');\n    privatebrowsing.init();\n    heatmap.init();\n    if (window.addEventListener) {\n        attention.init(visibility);\n    }\n    if (!window.guardian) {\n        window.guardian = {};\n    }\n    window.guardian.ophan = {\n        setEventEmitter: attention.setEventEmitter,\n        trackComponentAttention: attention.initComponent,\n        record: transmit.sendMore,\n        viewId: transmit.viewId,\n        pageViewId: transmit.viewId,\n    };\n    ng = window.guardian.ophan;\n}\nexport default ng;\n","const palette = {\n  brand: {\n    \"100\": \"#001536\",\n    \"300\": \"#041F4A\",\n    \"400\": \"#052962\",\n    \"500\": \"#0077B6\",\n    \"600\": \"#506991\",\n    \"800\": \"#C1D8FC\"\n  },\n  brandAlt: {\n    \"200\": \"#F3C100\",\n    \"300\": \"#FFD900\",\n    \"400\": \"#FFE500\"\n  },\n  culture: {\n    \"50\": \"#2B2625\",\n    \"100\": \"#3E3323\",\n    \"200\": \"#574835\",\n    \"300\": \"#6B5840\",\n    /** @deprecated Use palette.culture.400 */\n    \"350\": \"#866D50\",\n    \"400\": \"#866D50\",\n    \"450\": \"#A1845C\",\n    \"500\": \"#EACCA0\",\n    \"600\": \"#E7D4B9\",\n    \"700\": \"#EFE8DD\",\n    \"800\": \"#FBF6EF\"\n  },\n  error: {\n    \"400\": \"#C70000\",\n    \"500\": \"#FF9081\"\n  },\n  focus: {\n    \"400\": \"#0077B6\"\n  },\n  labs: {\n    \"200\": \"#0C7A73\",\n    \"300\": \"#65A897\",\n    \"400\": \"#69D1CA\"\n  },\n  lifestyle: {\n    \"100\": \"#510043\",\n    \"200\": \"#650054\",\n    \"300\": \"#7D0068\",\n    \"400\": \"#BB3B80\",\n    \"450\": \"#F37ABC\",\n    \"500\": \"#FFABDB\",\n    \"600\": \"#FEC8D3\",\n    \"800\": \"#FEEEF7\"\n  },\n  neutral: {\n    \"0\": \"#000000\",\n    \"7\": \"#121212\",\n    \"10\": \"#1A1A1A\",\n    \"20\": \"#333333\",\n    \"38\": \"#545454\",\n    \"46\": \"#707070\",\n    \"60\": \"#999999\",\n    \"73\": \"#BABABA\",\n    \"86\": \"#DCDCDC\",\n    \"93\": \"#EDEDED\",\n    \"97\": \"#F6F6F6\",\n    \"100\": \"#FFFFFF\"\n  },\n  news: {\n    \"100\": \"#660505\",\n    \"200\": \"#8B0000\",\n    \"300\": \"#AB0613\",\n    \"400\": \"#C70000\",\n    \"500\": \"#FF5943\",\n    \"550\": \"#FF9081\",\n    \"600\": \"#FFBAC8\",\n    \"800\": \"#FFF4F2\"\n  },\n  opinion: {\n    \"100\": \"#672005\",\n    \"200\": \"#8D2700\",\n    /** @deprecated Use palette.opinion.400 */\n    \"300\": \"#C74600\",\n    \"400\": \"#C74600\",\n    \"450\": \"#E05E00\",\n    \"500\": \"#FF7F0F\",\n    \"550\": \"#FF9941\",\n    \"600\": \"#F9B376\",\n    \"800\": \"#FEF9F5\"\n  },\n  specialReport: {\n    \"100\": \"#222527\",\n    \"200\": \"#303538\",\n    \"300\": \"#3F464A\",\n    \"400\": \"#595C5F\",\n    \"450\": \"#9DA0A2\",\n    \"500\": \"#ABC2C9\",\n    \"700\": \"#E4E5E8\",\n    \"800\": \"#EFF1F2\"\n  },\n  specialReportAlt: {\n    \"100\": \"#2B2B2A\",\n    \"200\": \"#B9300A\",\n    \"300\": \"#FF663D\",\n    \"700\": \"#EBE6E1\",\n    \"800\": \"#F5F0EB\"\n  },\n  sport: {\n    \"100\": \"#003C60\",\n    \"200\": \"#004E7C\",\n    \"300\": \"#005689\",\n    \"400\": \"#0077B6\",\n    \"500\": \"#00B2FF\",\n    \"600\": \"#90DCFF\",\n    \"800\": \"#F1F8FC\"\n  },\n  success: {\n    \"300\": \"#185E36\",\n    \"400\": \"#22874D\",\n    \"500\": \"#58D08B\"\n  }\n};\n\nexport { palette };\n","const height = {\n  /** Medium height call to action buttons and links */\n  ctaMedium: 44,\n  /** Small height call to action buttons and links */\n  ctaSmall: 36,\n  /** Extra small height call to action buttons and links */\n  ctaXsmall: 24,\n  iconMedium: 30,\n  iconSmall: 26,\n  /** Checkables such as checkboxes or radio buttons */\n  iconXsmall: 20,\n  /** Text input fields, radio and checkbox labels */\n  inputMedium: 44,\n  /** Checkables such as checkboxes or radio buttons */\n  inputXsmall: 24\n};\nconst iconSize = {\n  /** Meets WCAG 2.1 AAA compliance for touch targets. */\n  medium: 30,\n  small: 26,\n  xsmall: 20\n};\nconst size = {\n  /** Meets WCAG 2.1 AAA compliance for touch targets. */\n  medium: 44,\n  small: 36,\n  xsmall: 24\n};\nconst width = {\n  /** Medium height call to action buttons and links */\n  ctaMedium: 44,\n  /** Small height call to action buttons and links */\n  ctaSmall: 36,\n  /** Extra small height call to action buttons and links */\n  ctaXsmall: 24,\n  iconMedium: 30,\n  iconSmall: 26,\n  /** Checkables such as checkboxes or radio buttons */\n  iconXsmall: 20,\n  /** Checkables such as checkboxes or radio buttons */\n  inputXsmall: 24\n};\nconst remHeight = {\n  /** Medium height call to action buttons and links */\n  ctaMedium: \"2.75rem\",\n  /** Small height call to action buttons and links */\n  ctaSmall: \"2.25rem\",\n  /** Extra small height call to action buttons and links */\n  ctaXsmall: \"1.5rem\",\n  iconMedium: \"1.875rem\",\n  iconSmall: \"1.625rem\",\n  /** Checkables such as checkboxes or radio buttons */\n  iconXsmall: \"1.25rem\",\n  /** Text input fields, radio and checkbox labels */\n  inputMedium: \"2.75rem\",\n  /** Checkables such as checkboxes or radio buttons */\n  inputXsmall: \"1.5rem\"\n};\nconst remWidth = {\n  /** Medium height call to action buttons and links */\n  ctaMedium: \"2.75rem\",\n  /** Small height call to action buttons and links */\n  ctaSmall: \"2.25rem\",\n  /** Extra small height call to action buttons and links */\n  ctaXsmall: \"1.5rem\",\n  iconMedium: \"1.875rem\",\n  iconSmall: \"1.625rem\",\n  /** Checkables such as checkboxes or radio buttons */\n  iconXsmall: \"1.25rem\",\n  /** Checkables such as checkboxes or radio buttons */\n  inputXsmall: \"1.5rem\"\n};\n\nexport { height, iconSize, remHeight, remWidth, size, width };\n","const space = {\n  0: 2,\n  1: 4,\n  2: 8,\n  3: 12,\n  4: 16,\n  5: 20,\n  6: 24,\n  8: 32,\n  9: 36,\n  10: 40,\n  12: 48,\n  14: 56,\n  16: 64,\n  18: 72,\n  24: 96\n};\nconst remSpace = {\n  0: \"0.125rem\",\n  1: \"0.25rem\",\n  2: \"0.5rem\",\n  3: \"0.75rem\",\n  4: \"1rem\",\n  5: \"1.25rem\",\n  6: \"1.5rem\",\n  8: \"2rem\",\n  9: \"2.25rem\",\n  10: \"2.5rem\",\n  12: \"3rem\",\n  14: \"3.5rem\",\n  16: \"4rem\",\n  18: \"4.5rem\",\n  24: \"6rem\"\n};\n\nexport { remSpace, space };\n","const article15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.4;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst article15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.4,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst article17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.4;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst article17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.4,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst articleBold15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.4;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst articleBold15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.4,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst articleBold17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.4;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst articleBold17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.4,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst articleBoldItalic15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.4;\n\tfont-weight: 700;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst articleBoldItalic15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.4,\n  fontWeight: 700,\n  fontStyle: \"italic\"\n};\nconst articleBoldItalic17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.4;\n\tfont-weight: 700;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst articleBoldItalic17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.4,\n  fontWeight: 700,\n  fontStyle: \"italic\"\n};\nconst articleItalic15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.4;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst articleItalic15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.4,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst articleItalic17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.4;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst articleItalic17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.4,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst headlineBold14 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineBold14Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold15 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineBold15Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold17 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineBold17Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold20 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineBold20Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold24 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineBold24Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold28 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineBold28Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold34 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst headlineBold34Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold42 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.625rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 5px;\n`;\nconst headlineBold42Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.625rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold50 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 3.125rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineBold50Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"3.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineBold64 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 4rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineBold64Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"4rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst headlineLight14 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineLight14Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight15 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineLight15Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight17 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineLight17Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight20 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineLight20Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight24 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineLight24Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight28 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineLight28Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight34 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst headlineLight34Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight42 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.625rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 5px;\n`;\nconst headlineLight42Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.625rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight50 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 3.125rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineLight50Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"3.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLight64 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 4rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineLight64Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"4rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"normal\"\n};\nconst headlineLightItalic14 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineLightItalic14Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic15 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineLightItalic15Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic17 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineLightItalic17Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic20 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineLightItalic20Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic24 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineLightItalic24Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic28 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineLightItalic28Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic34 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst headlineLightItalic34Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic42 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.625rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 5px;\n`;\nconst headlineLightItalic42Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.625rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic50 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 3.125rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineLightItalic50Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"3.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineLightItalic64 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 4rem;\n\tline-height: 1.15;\n\tfont-weight: 300;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineLightItalic64Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"4rem\",\n  lineHeight: 1.15,\n  fontWeight: 300,\n  fontStyle: \"italic\"\n};\nconst headlineMedium14 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineMedium14Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium15 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineMedium15Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium17 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineMedium17Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium20 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineMedium20Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium24 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineMedium24Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium28 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineMedium28Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium34 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst headlineMedium34Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium42 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.625rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 5px;\n`;\nconst headlineMedium42Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.625rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium50 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 3.125rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineMedium50Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"3.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMedium64 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 4rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineMedium64Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"4rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"normal\"\n};\nconst headlineMediumItalic14 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineMediumItalic14Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic15 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineMediumItalic15Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic17 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst headlineMediumItalic17Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic20 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineMediumItalic20Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic24 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineMediumItalic24Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic28 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst headlineMediumItalic28Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic34 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst headlineMediumItalic34Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic42 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 2.625rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 5px;\n`;\nconst headlineMediumItalic42Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"2.625rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic50 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 3.125rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineMediumItalic50Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"3.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst headlineMediumItalic64 = `\n\tfont-family: \"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif;\n\tfont-size: 4rem;\n\tline-height: 1.15;\n\tfont-weight: 500;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst headlineMediumItalic64Object = {\n  fontFamily: '\"GH Guardian Headline\", \"Guardian Egyptian Web\", Georgia, serif',\n  fontSize: \"4rem\",\n  lineHeight: 1.15,\n  fontWeight: 500,\n  fontStyle: \"italic\"\n};\nconst textEgyptian14 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptian14Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textEgyptian15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptian15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textEgyptian17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptian17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textEgyptianBold14 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianBold14Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textEgyptianBold15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianBold15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textEgyptianBold17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianBold17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textEgyptianBoldItalic14 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianBoldItalic14Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"italic\"\n};\nconst textEgyptianBoldItalic15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianBoldItalic15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"italic\"\n};\nconst textEgyptianBoldItalic17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianBoldItalic17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"italic\"\n};\nconst textEgyptianItalic14 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianItalic14Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textEgyptianItalic15 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianItalic15Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textEgyptianItalic17 = `\n\tfont-family: GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textEgyptianItalic17Object = {\n  fontFamily: 'GuardianTextEgyptian, \"Guardian Text Egyptian Web\", Georgia, serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSans12 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.75rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSans12Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.75rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans14 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSans14Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans15 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSans15Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans17 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSans17Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans20 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSans20Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans24 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSans24Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans28 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSans28Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSans34 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst textSans34Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"normal\"\n};\nconst textSansBold12 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.75rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansBold12Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.75rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold14 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansBold14Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold15 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansBold15Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold17 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansBold17Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold20 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSansBold20Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold24 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSansBold24Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold28 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSansBold28Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansBold34 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.3;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst textSansBold34Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.3,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst textSansItalic12 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.75rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansItalic12Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.75rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic14 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.875rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansItalic14Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.875rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic15 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 0.9375rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansItalic15Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"0.9375rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic17 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.0625rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 2px;\n`;\nconst textSansItalic17Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.0625rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic20 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.25rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSansItalic20Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.25rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic24 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.5rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSansItalic24Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.5rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic28 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 1.75rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 3px;\n`;\nconst textSansItalic28Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"1.75rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst textSansItalic34 = `\n\tfont-family: GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n\tfont-size: 2.125rem;\n\tline-height: 1.3;\n\tfont-weight: 400;\n\tfont-style: italic;\n\t--source-text-decoration-thickness: 4px;\n`;\nconst textSansItalic34Object = {\n  fontFamily: 'GuardianTextSans, \"Guardian Text Sans Web\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\n  fontSize: \"2.125rem\",\n  lineHeight: 1.3,\n  fontWeight: 400,\n  fontStyle: \"italic\"\n};\nconst titlepiece42 = `\n\tfont-family: \"GT Guardian Titlepiece\", Georgia, serif;\n\tfont-size: 2.625rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 5px;\n`;\nconst titlepiece42Object = {\n  fontFamily: '\"GT Guardian Titlepiece\", Georgia, serif',\n  fontSize: \"2.625rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst titlepiece50 = `\n\tfont-family: \"GT Guardian Titlepiece\", Georgia, serif;\n\tfont-size: 3.125rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst titlepiece50Object = {\n  fontFamily: '\"GT Guardian Titlepiece\", Georgia, serif',\n  fontSize: \"3.125rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\nconst titlepiece70 = `\n\tfont-family: \"GT Guardian Titlepiece\", Georgia, serif;\n\tfont-size: 4.375rem;\n\tline-height: 1.15;\n\tfont-weight: 700;\n\tfont-style: normal;\n\t--source-text-decoration-thickness: 6px;\n`;\nconst titlepiece70Object = {\n  fontFamily: '\"GT Guardian Titlepiece\", Georgia, serif',\n  fontSize: \"4.375rem\",\n  lineHeight: 1.15,\n  fontWeight: 700,\n  fontStyle: \"normal\"\n};\n\nexport { article15, article15Object, article17, article17Object, articleBold15, articleBold15Object, articleBold17, articleBold17Object, articleBoldItalic15, articleBoldItalic15Object, articleBoldItalic17, articleBoldItalic17Object, articleItalic15, articleItalic15Object, articleItalic17, articleItalic17Object, headlineBold14, headlineBold14Object, headlineBold15, headlineBold15Object, headlineBold17, headlineBold17Object, headlineBold20, headlineBold20Object, headlineBold24, headlineBold24Object, headlineBold28, headlineBold28Object, headlineBold34, headlineBold34Object, headlineBold42, headlineBold42Object, headlineBold50, headlineBold50Object, headlineBold64, headlineBold64Object, headlineLight14, headlineLight14Object, headlineLight15, headlineLight15Object, headlineLight17, headlineLight17Object, headlineLight20, headlineLight20Object, headlineLight24, headlineLight24Object, headlineLight28, headlineLight28Object, headlineLight34, headlineLight34Object, headlineLight42, headlineLight42Object, headlineLight50, headlineLight50Object, headlineLight64, headlineLight64Object, headlineLightItalic14, headlineLightItalic14Object, headlineLightItalic15, headlineLightItalic15Object, headlineLightItalic17, headlineLightItalic17Object, headlineLightItalic20, headlineLightItalic20Object, headlineLightItalic24, headlineLightItalic24Object, headlineLightItalic28, headlineLightItalic28Object, headlineLightItalic34, headlineLightItalic34Object, headlineLightItalic42, headlineLightItalic42Object, headlineLightItalic50, headlineLightItalic50Object, headlineLightItalic64, headlineLightItalic64Object, headlineMedium14, headlineMedium14Object, headlineMedium15, headlineMedium15Object, headlineMedium17, headlineMedium17Object, headlineMedium20, headlineMedium20Object, headlineMedium24, headlineMedium24Object, headlineMedium28, headlineMedium28Object, headlineMedium34, headlineMedium34Object, headlineMedium42, headlineMedium42Object, headlineMedium50, headlineMedium50Object, headlineMedium64, headlineMedium64Object, headlineMediumItalic14, headlineMediumItalic14Object, headlineMediumItalic15, headlineMediumItalic15Object, headlineMediumItalic17, headlineMediumItalic17Object, headlineMediumItalic20, headlineMediumItalic20Object, headlineMediumItalic24, headlineMediumItalic24Object, headlineMediumItalic28, headlineMediumItalic28Object, headlineMediumItalic34, headlineMediumItalic34Object, headlineMediumItalic42, headlineMediumItalic42Object, headlineMediumItalic50, headlineMediumItalic50Object, headlineMediumItalic64, headlineMediumItalic64Object, textEgyptian14, textEgyptian14Object, textEgyptian15, textEgyptian15Object, textEgyptian17, textEgyptian17Object, textEgyptianBold14, textEgyptianBold14Object, textEgyptianBold15, textEgyptianBold15Object, textEgyptianBold17, textEgyptianBold17Object, textEgyptianBoldItalic14, textEgyptianBoldItalic14Object, textEgyptianBoldItalic15, textEgyptianBoldItalic15Object, textEgyptianBoldItalic17, textEgyptianBoldItalic17Object, textEgyptianItalic14, textEgyptianItalic14Object, textEgyptianItalic15, textEgyptianItalic15Object, textEgyptianItalic17, textEgyptianItalic17Object, textSans12, textSans12Object, textSans14, textSans14Object, textSans15, textSans15Object, textSans17, textSans17Object, textSans20, textSans20Object, textSans24, textSans24Object, textSans28, textSans28Object, textSans34, textSans34Object, textSansBold12, textSansBold12Object, textSansBold14, textSansBold14Object, textSansBold15, textSansBold15Object, textSansBold17, textSansBold17Object, textSansBold20, textSansBold20Object, textSansBold24, textSansBold24Object, textSansBold28, textSansBold28Object, textSansBold34, textSansBold34Object, textSansItalic12, textSansItalic12Object, textSansItalic14, textSansItalic14Object, textSansItalic15, textSansItalic15Object, textSansItalic17, textSansItalic17Object, textSansItalic20, textSansItalic20Object, textSansItalic24, textSansItalic24Object, textSansItalic28, textSansItalic28Object, textSansItalic34, textSansItalic34Object, titlepiece42, titlepiece42Object, titlepiece50, titlepiece50Object, titlepiece70, titlepiece70Object };\n","import { palette } from '../__generated__/palette.js';\n\nconst focusHalo = `\n outline: 0;\n html:not(.src-focus-disabled) & {\n\t box-shadow: 0 0 0 3px ${palette.focus[400]};\n }\n`;\nconst focusHaloSpaced = `\n outline: 0;\n html:not(.src-focus-disabled) & {\n\toutline: 5px solid ${palette.focus[400]};\n\toutline-offset: 3px;\n }\n`;\n\nexport { focusHalo, focusHaloSpaced };\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { linkContents } from './shared.js';\nimport { linkStyles } from './styles.js';\n\nconst ButtonLink = ({\n  priority = \"primary\",\n  icon: iconSvg,\n  iconSide = \"left\",\n  cssOverrides,\n  children,\n  theme,\n  ...props\n}) => {\n  return /* @__PURE__ */ jsx(\n    \"button\",\n    {\n      css: linkStyles({\n        isButton: true,\n        priority,\n        iconSvg,\n        iconSide,\n        cssOverrides,\n        theme\n      }),\n      ...props,\n      children: linkContents({ children, iconSvg, iconSide })\n    }\n  );\n};\n\nexport { ButtonLink };\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { cloneElement, Fragment } from 'react';\n\nconst linkContents = ({\n  children,\n  iconSvg,\n  iconSide\n}) => {\n  const spacer = /* @__PURE__ */ jsx(Fragment, { children: \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\" }, \"spacer\");\n  const linkContents2 = [children];\n  if (iconSvg) {\n    if (iconSide === \"left\") {\n      linkContents2.unshift(\n        spacer,\n        cloneElement(iconSvg, {\n          key: \"svg\"\n        })\n      );\n    } else {\n      linkContents2.push(\n        spacer,\n        cloneElement(iconSvg, {\n          key: \"svg\"\n        })\n      );\n    }\n  }\n  return linkContents2;\n};\n\nexport { linkContents };\n","import { palette } from '../../foundations/__generated__/palette.js';\n\nconst linkThemeDefault = {\n  link: {\n    textPrimary: palette.brand[500],\n    textPrimaryHover: palette.brand[500],\n    textSecondary: palette.neutral[7],\n    textSecondaryHover: palette.neutral[7]\n  }\n};\nconst linkThemeBrand = {\n  link: {\n    textPrimary: palette.neutral[100],\n    textPrimaryHover: palette.neutral[100]\n  }\n};\nconst linkThemeBrandAlt = {\n  link: {\n    textPrimary: palette.neutral[7],\n    textPrimaryHover: palette.neutral[7]\n  }\n};\nconst themeLink = {\n  textPrimary: palette.brand[500],\n  textPrimaryHover: palette.brand[500],\n  textSecondary: palette.neutral[7],\n  textSecondaryHover: palette.neutral[7]\n};\nconst themeLinkBrand = {\n  textPrimary: palette.neutral[100],\n  textPrimaryHover: palette.neutral[100]\n};\nconst themeLinkBrandAlt = {\n  textPrimary: palette.neutral[7],\n  textPrimaryHover: palette.neutral[7]\n};\n\nexport { linkThemeBrand, linkThemeBrandAlt, linkThemeDefault, themeLink, themeLinkBrand, themeLinkBrandAlt };\n","import { css } from '@emotion/react';\nimport { mergeThemes } from '../utils/themes.js';\nimport { themeLink } from './theme.js';\nimport { focusHalo } from '../../foundations/accessibility/focus-halo.js';\nimport { width } from '../../foundations/__generated__/size.js';\nimport { space } from '../../foundations/__generated__/space.js';\nimport { textSans17 } from '../../foundations/__generated__/typography.js';\n\nconst link = css`\n\tposition: relative;\n\t${textSans17};\n\tcursor: pointer;\n\ttext-decoration: underline;\n\ttext-underline-position: under;\n\ttext-underline-offset: 5%;\n\n\tdisplay: inline;\n\talign-items: center;\n\n\t&:focus {\n\t\t${focusHalo};\n\t}\n\n\t&:hover {\n\t\t/* If the hover text decoration thickness is not set, we default to the initial value. */\n\t\ttext-decoration-thickness: var(--source-text-decoration-thickness, auto);\n\t}\n`;\nconst buttonLink = css`\n\t/* override user agent styles */\n\tborder: none;\n\tbackground: transparent;\n\tpadding: 0;\n`;\nconst primary = (link2) => css`\n\tcolor: ${link2.textPrimary};\n\n\t&:hover {\n\t\tcolor: ${link2.textPrimaryHover};\n\t}\n`;\nconst secondary = (link2) => css`\n\tcolor: ${link2.textSecondary};\n\n\t&:hover {\n\t\tcolor: ${link2.textSecondaryHover};\n\t}\n`;\nconst icon = css`\n\tsvg {\n\t\tfill: currentColor;\n\t\t/*\n\t\tTODO: hardcoded bottom margin to vertically align\n\t\ticons with text. This needs to be revisited when\n\t\tthe rules of icon spacing have been formalised\n\t\t */\n\t\tmargin-bottom: -3px;\n\t\twidth: ${width.iconXsmall}px;\n\t\theight: auto;\n\t}\n`;\nconst iconRight = css`\n\tsvg {\n\t\tmargin-left: -${space[5]}px;\n\t}\n`;\nconst iconLeft = css`\n\tsvg {\n\t\tmargin-left: -${space[6]}px;\n\t\tmargin-right: ${space[1]}px;\n\t}\n`;\nconst priorities = {\n  primary,\n  secondary\n};\nconst iconSides = {\n  right: iconRight,\n  left: iconLeft\n};\nconst linkStyles = ({\n  isButton,\n  priority,\n  iconSvg,\n  iconSide = \"left\",\n  cssOverrides,\n  theme\n}) => {\n  const mergedTheme = (providerTheme) => mergeThemes(themeLink, theme, providerTheme);\n  return (providerTheme) => [\n    link,\n    isButton ? buttonLink : \"\",\n    priorities[priority](mergedTheme(providerTheme.link)),\n    iconSvg ? icon : \"\",\n    iconSvg ? iconSides[iconSide] : \"\",\n    cssOverrides\n  ];\n};\n\nexport { buttonLink, icon, iconLeft, iconRight, link, linkStyles, primary, secondary };\n","const mergeThemes = (defaultTheme, themeOverrides, providerTheme, transform) => ({\n  ...defaultTheme,\n  ...transform ? transform(providerTheme) : providerTheme,\n  ...themeOverrides\n});\n\nexport { mergeThemes };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + ({\"288\":\"RichLinkComponent-importable\",\"490\":\"VideoFacebookBlockComponent-importable\",\"543\":\"MostViewedRightWithAd-importable\",\"689\":\"AlreadyVisited-importable\",\"729\":\"PersonalityQuizAtom-importable\",\"829\":\"AudioAtomWrapper-importable\",\"970\":\"ShareButton-importable\",\"1005\":\"AdPortals-importable\",\"1104\":\"SlotBodyEnd-importable\",\"1169\":\"TimelineAtom-importable\",\"1204\":\"Branding-importable\",\"1491\":\"VineBlockComponent-importable\",\"1505\":\"CalloutBlockComponent-importable\",\"1564\":\"ScrollableFeature-importable\",\"1631\":\"GetMatchNav-importable\",\"1720\":\"CarouselForNewsletters-importable\",\"1836\":\"ProfileAtomWrapper-importable\",\"2014\":\"ShowHideContainers-importable\",\"2051\":\"guardian-braze-components-banner\",\"2066\":\"SecureSignup-importable\",\"2075\":\"AuEoy2024Wrapper-importable\",\"2115\":\"FetchOnwardsData-importable\",\"2118\":\"Dropdown-importable\",\"2242\":\"PulsingDot-importable\",\"2372\":\"ChartAtom-importable\",\"2407\":\"GuideAtomWrapper-importable\",\"2552\":\"AdBlockAsk-importable\",\"2695\":\"CommentCount-importable\",\"2704\":\"LightboxLayout-importable\",\"2713\":\"ProfileAtom-importable\",\"2919\":\"OnwardsUpper-importable\",\"2992\":\"LiveBlogEpic-importable\",\"3015\":\"ScrollableHighlights-importable\",\"3222\":\"DocumentBlockComponent-importable\",\"3326\":\"sentry\",\"3408\":\"YoutubeBlockComponent-importable\",\"3454\":\"Liveness-importable\",\"3481\":\"InstagramBlockComponent-importable\",\"3585\":\"FollowWrapper-importable\",\"3642\":\"ExpandableMarketingCardWrapper-importable\",\"3988\":\"AppsFooter-importable\",\"4001\":\"ScrollableMedium-importable\",\"4057\":\"Carousel-importable\",\"4111\":\"AppsLightboxImage-importable\",\"4289\":\"ScrollableSmall-importable\",\"4331\":\"SetAdTargeting-importable\",\"4454\":\"TableOfContents-importable\",\"4490\":\"TopBarSupport-importable\",\"4541\":\"LatestLinks-importable\",\"4650\":\"EditionSwitcherBanner-importable\",\"4672\":\"AustralianTerritorySwitcher-importable\",\"4702\":\"LightboxHash-importable\",\"4747\":\"SlideshowCarousel-importable\",\"4767\":\"EnhancePinnedPost-importable\",\"4889\":\"InteractiveBlockComponent-importable\",\"4942\":\"AppsEpic-importable\",\"4994\":\"readerRevenueDevUtils\",\"5241\":\"shimport\",\"5307\":\"Titlepiece-importable\",\"5427\":\"TopBar-importable\",\"5532\":\"MapEmbedBlockComponent-importable\",\"5645\":\"UsEoy2024Wrapper-importable\",\"5661\":\"CardCommentCount-importable\",\"5801\":\"FrontSubNav-importable\",\"5904\":\"Metrics-importable\",\"5926\":\"FooterLabel-importable\",\"5927\":\"ReaderRevenueDev-importable\",\"6005\":\"FilterKeyEventsToggle-importable\",\"6025\":\"GetMatchStats-importable\",\"6171\":\"LiveblogNotifications-importable\",\"6205\":\"AudioPlayerWrapper-importable\",\"6274\":\"StickyLiveblogAskWrapper-importable\",\"6382\":\"SignInGateMainCheckoutComplete\",\"6508\":\"WeatherWrapper-importable\",\"6799\":\"FocusStyles-importable\",\"6827\":\"SpotifyBlockComponent-importable\",\"6929\":\"KnowledgeQuizAtom-importable\",\"6981\":\"Accessibility-importable\",\"7018\":\"DiscussionMeta-importable\",\"7171\":\"SignInGateSelector-importable\",\"7322\":\"UnsafeEmbedBlockComponent-importable\",\"7362\":\"SendTargetingParams-importable\",\"7659\":\"braze-web-sdk-core\",\"7728\":\"EmbedBlockComponent-importable\",\"7763\":\"InteractiveAtomMessenger-importable\",\"7844\":\"TweetBlockComponent-importable\",\"7865\":\"KeyEventsCarousel-importable\",\"8007\":\"guardian-braze-components-end-of-article\",\"8019\":\"InteractiveContentsBlockComponent-importable\",\"8047\":\"DiscussionWeb-importable\",\"8207\":\"QandaAtom-importable\",\"8295\":\"MostViewedFooterData-importable\",\"8301\":\"BrazeMessaging-importable\",\"8351\":\"ShowMore-importable\",\"8858\":\"FooterReaderRevenueLinks-importable\",\"8968\":\"AppsLightboxImageStore-importable\",\"8970\":\"RelativeTime-importable\",\"8979\":\"DiscussionApps-importable\",\"9116\":\"SubNav-importable\",\"9267\":\"ManyNewsletterSignUp-importable\",\"9339\":\"SetABTests-importable\",\"9382\":\"CalloutEmbedBlockComponent-importable\",\"9442\":\"GetCricketScoreboard-importable\",\"9761\":\"StickyBottomBanner-importable\",\"9762\":\"GetMatchTabs-importable\",\"9787\":\"SignInGateMain\",\"9959\":\"MostViewedFooter-importable\"}[chunkId] || chunkId) + \".client.web.\" + {\"39\":\"9e0bb6bb15356a02f22a\",\"83\":\"7feb987bd11cf3b2eccd\",\"267\":\"0afd18f25d69fcf98ca0\",\"280\":\"6cdb695babf078751c0b\",\"281\":\"f0ddc1c7228a468569ec\",\"288\":\"be6772416d09b3cb09e2\",\"342\":\"add9c4b47458aad8d643\",\"348\":\"aaa1731499f1a304a3f1\",\"490\":\"e69133305257235caaad\",\"543\":\"e51c8a23a62f0de70ab5\",\"678\":\"ebd85cdd1e03e1ee5a0a\",\"689\":\"281404fbd262df642518\",\"719\":\"4d2829c7a8def76d8935\",\"729\":\"abf211835196659c8be3\",\"829\":\"c2de5ab1352e752cb955\",\"895\":\"5c9953eead48694f3df4\",\"970\":\"c17511e7665d0f761459\",\"1000\":\"9b952d841c6e0977e969\",\"1005\":\"0438852377cf6d9635f6\",\"1026\":\"743f95849120515750b3\",\"1076\":\"c680413a5373faee41e0\",\"1090\":\"6a280e029934b17f53e3\",\"1104\":\"3b3043cfdb538705eb8a\",\"1169\":\"cc3f0f0cb95e485ce427\",\"1204\":\"7e5aa042a984abc7abc9\",\"1262\":\"f39d91e1d9c0b2b066a7\",\"1301\":\"4cdaf0cf16dab252a79e\",\"1391\":\"15552ec6f8abcc69a74e\",\"1401\":\"9669d78da3888cf6fad5\",\"1424\":\"beae8bf846e860a4fda0\",\"1476\":\"42093e780a8790ca9f67\",\"1477\":\"c297dfa676a212d6c655\",\"1491\":\"a98a058ba9480de1276f\",\"1505\":\"081b57e103e6d99b03b9\",\"1564\":\"b9ad4f00592904fd2d3d\",\"1631\":\"0ca92917649ea24bbfc9\",\"1667\":\"ab7b92939804eeb78542\",\"1714\":\"4c2ca3d0608cf13ab28d\",\"1720\":\"5bf1cc767aadbe2c0766\",\"1836\":\"607eb71db11eea11d41a\",\"1891\":\"0ff22b5f75fed16db07c\",\"1908\":\"35ee11e639c876b80714\",\"1940\":\"29d7b2257e4087bd4938\",\"2014\":\"3f311da74a5f67628636\",\"2051\":\"8a2f0d8950e87c64f1e6\",\"2066\":\"fc0e8ec73a94b75a6d77\",\"2075\":\"edc3d0559c08a831410c\",\"2115\":\"195f9e437b7bbff6a034\",\"2118\":\"6ec8117b1ed28a64abfd\",\"2242\":\"2c723da4fbe25059311f\",\"2310\":\"a7c4b54cf9b1132c45cb\",\"2372\":\"40bd10b77e0135eedebd\",\"2407\":\"6eb231000c4640731d0d\",\"2482\":\"4a330e456f5699c32716\",\"2552\":\"a9f267c895e9ffb34f1a\",\"2695\":\"e2495ae1a67cd612c996\",\"2704\":\"ba57693b3f87ce31a5f6\",\"2713\":\"dfa36c16b6d6d9ed077d\",\"2919\":\"10382ea34e9049a5701e\",\"2992\":\"37f0dee5440eb425273f\",\"3015\":\"7c65b9d2a40276827968\",\"3109\":\"1da414f48455c8644dae\",\"3213\":\"3f5f834ec1e3a8951070\",\"3222\":\"52d1f76d2aa4e62269dd\",\"3270\":\"0d43fe6c62c00be6f372\",\"3304\":\"ba9f5c10c3d992d1f381\",\"3326\":\"251c373becbe73dcf7e6\",\"3366\":\"3c4af4d8ca9f83ca680a\",\"3408\":\"a6dfa22a6c530d7ab6f4\",\"3454\":\"7a394dd791703fcf5818\",\"3473\":\"96269f348982eb6bcd36\",\"3481\":\"5cd7a07078272b7ffd28\",\"3585\":\"6e7b89bc0d45efcf0e09\",\"3642\":\"07e8cca115287065b792\",\"3769\":\"fb68709e0b1e2589ca79\",\"3789\":\"027e343121185c516b69\",\"3937\":\"ac8af575a724c1a691dc\",\"3988\":\"31b7d9a7d6449c96e161\",\"4001\":\"4cc328cf0dfea793465d\",\"4057\":\"cc8d1e93e62e010eba7b\",\"4111\":\"9dc5569d5b7d0f2c0036\",\"4237\":\"0402dd76abcd322fc007\",\"4282\":\"71f97f5857a93a92f113\",\"4289\":\"e700fa10bfc7a4f15de1\",\"4331\":\"5255f7f2ec35a31b4580\",\"4454\":\"2876b613cb8800bd1f01\",\"4490\":\"1b6f212bc80d512131f4\",\"4501\":\"85f9869ef068c0e37316\",\"4541\":\"6f2227d13f9ec2093d67\",\"4628\":\"51861048faac71491a0c\",\"4640\":\"b4dee71101e63e92471f\",\"4650\":\"9df760ae5e08a9e1f723\",\"4672\":\"4fb02cd096175655bcdd\",\"4684\":\"e59015a57d7746a1f5aa\",\"4702\":\"97899e92c7c67c4a2e51\",\"4714\":\"cf23583b35da85d81b70\",\"4747\":\"66af5f94e7e17b89aca0\",\"4767\":\"b0db9be1479cfb93b2ac\",\"4889\":\"bcb127023dd6d13e27d3\",\"4941\":\"c2cfed8c3881604134ee\",\"4942\":\"33f20cee440e69359f2c\",\"4994\":\"cb3c4e4cbef2d2c27ce5\",\"5095\":\"6b663c27f44234ac97b7\",\"5241\":\"41acd40e8767993678da\",\"5307\":\"6bc8531d9f2f34f800d6\",\"5427\":\"1ea7ed99982d829be93d\",\"5532\":\"ec1b23a5899fd0b24e14\",\"5550\":\"ef05c5bf575f6b54a3c1\",\"5645\":\"e37876932725d5788a33\",\"5658\":\"e4f6c574de8b938c2617\",\"5661\":\"99760b04c5db5617bdab\",\"5721\":\"979c2118ac94a8028cc0\",\"5757\":\"c43a0310e8cdb7a7511b\",\"5801\":\"2ac8cd013c888914bd26\",\"5880\":\"3c4f19bdc889604be3d9\",\"5904\":\"0a68ca54144a9727b15e\",\"5922\":\"6773e5d7985b1a440ab8\",\"5926\":\"378091d2fa8cd9bf46e8\",\"5927\":\"1a89a217fd99fb9b145c\",\"6005\":\"548c8e5d1ae667a3b050\",\"6021\":\"c0a884513a13f37ebef4\",\"6025\":\"22dbbeb58a85f236f877\",\"6044\":\"1abb7d4cb70db3919b40\",\"6061\":\"21595055ab2be7b41e1b\",\"6071\":\"6be7b20ff9de9efa86af\",\"6080\":\"7283f7a14bf6edaaf745\",\"6135\":\"49092a8e1d0a50e49bf6\",\"6149\":\"3c0841906d89307f92ce\",\"6150\":\"d56566edb3e8e43f387c\",\"6171\":\"e48a20cdec7111e453ca\",\"6205\":\"62dbf5abd319eb6d0cb6\",\"6274\":\"90862a2525c4fe5e01ba\",\"6382\":\"5808297d4cd1fac62441\",\"6398\":\"c269d5cdde58e8b42117\",\"6505\":\"0278946bc034c44e20b4\",\"6508\":\"435145e9321252c9d2b8\",\"6574\":\"a679aeb72dca4348dd57\",\"6598\":\"d2c09e1fdd9a7800f320\",\"6627\":\"3dceb5b87af3079b17d6\",\"6638\":\"5ffd8680b69c4c9cd2a6\",\"6799\":\"dd52695e46b2b221b7ed\",\"6827\":\"0ce4574409d099502dd6\",\"6876\":\"277308e813f5283b3982\",\"6880\":\"f8999b42290d4a073bbd\",\"6903\":\"7af5b961bcc35ad522db\",\"6929\":\"644ad426fc83ccf77ca4\",\"6931\":\"107d28185fe6b66fdda9\",\"6940\":\"6c037150fdd22528e494\",\"6981\":\"535d853c61d83732c1d4\",\"7018\":\"80d524aab3023a24cdda\",\"7026\":\"ee32b57c59e95e72df39\",\"7116\":\"cbc40355e84960ee14fc\",\"7171\":\"6bbe6afad11531ccb551\",\"7322\":\"1a63b0a088b9b1a1fc16\",\"7350\":\"df234059e2ccb5162bf5\",\"7351\":\"5c826c03235fbe89476c\",\"7362\":\"384a8d00761b9a0cb981\",\"7460\":\"f9f14fe9b40eae2b44b3\",\"7513\":\"1ff62c346290ef53ea0e\",\"7540\":\"1be0eb4af9a260dde163\",\"7546\":\"343a9511b1684f45731c\",\"7659\":\"41fca15596bed983e027\",\"7691\":\"6d0587a591dc7d33d009\",\"7728\":\"6e161483bd1d7fa906c8\",\"7763\":\"43959fb20642df0cd927\",\"7844\":\"77e4446906c6aaf87dc8\",\"7861\":\"8efd1a37bfa5227e63f2\",\"7865\":\"446665ca1bcda098b999\",\"8007\":\"19fa9d77e4c469dbaae1\",\"8019\":\"ff4f7f7afbc679562b9b\",\"8030\":\"b0500e643b238b8f64c8\",\"8047\":\"c874098876c0359962b2\",\"8067\":\"85eceeea6ce032ccde65\",\"8207\":\"60fa4a932c626fdb828f\",\"8295\":\"8c6bb3e521cdf24642a2\",\"8301\":\"87e3ecb6eeaa78977a01\",\"8351\":\"315eb3c70ad0be53b57f\",\"8504\":\"5fae91c7c8a4ea54a755\",\"8536\":\"db419116f3239f9e94a4\",\"8568\":\"778e7225e901729cb4ad\",\"8626\":\"c8ffaf10227ebd52f746\",\"8697\":\"4523b63a91414082e296\",\"8833\":\"fdebffa3bd960fa8744a\",\"8858\":\"9f8fc1275409be34339a\",\"8920\":\"0ad29aba580a0633f054\",\"8968\":\"333175dd0c438ca7c6d5\",\"8970\":\"a5eb2e693299677af96c\",\"8979\":\"8c4cadf69f5cea35aac6\",\"9116\":\"ac6ec38d97f51151555e\",\"9184\":\"4978e67ee0131678c64a\",\"9242\":\"01b1c4c39302e3c7e84e\",\"9267\":\"8de0dd7f8558f99a6fdf\",\"9288\":\"744e7aa004bdf15f1cf4\",\"9339\":\"a87073dc404273b6f06c\",\"9382\":\"ac86e1b6c2432dc5180d\",\"9442\":\"17bac1176a3060fdf96a\",\"9493\":\"170e90c815da9ada3f84\",\"9557\":\"6d3dfebea7eb7be888f0\",\"9558\":\"1d8bd41cf21a7558e98f\",\"9646\":\"00abfcfcedfc677f6cb8\",\"9665\":\"44986e8c5b2e95cd29b6\",\"9721\":\"8a6162930b19285663a2\",\"9735\":\"b8e6eccef8b6d6724192\",\"9761\":\"3e3cbeed3ad1d794db25\",\"9762\":\"2e1c48114a8d1139ec25\",\"9766\":\"86cf6611c990d79d4c84\",\"9771\":\"ccf8be3db97d56664903\",\"9787\":\"eb68346eab9fe5d525ef\",\"9835\":\"70a06f3e14c7e03536c7\",\"9899\":\"2712e325125972a3d921\",\"9959\":\"a68e4c3905f233cd73dd\",\"9995\":\"c1b5b07908c3704c0635\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t3057: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_guardian_dotcom_rendering\"] = self[\"webpackChunk_guardian_dotcom_rendering\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7000], () => (__webpack_require__(46626)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","displayName","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","type","KNOWN_STATICS","name","length","prototype","caller","callee","arguments","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","component","isMemo","ForwardRef","render","Memo","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","concat","targetStatics","sourceStatics","i","key","descriptor","shouldAdapt","async","isServer","window","location","hash","guardian","config","switches","adaptiveSite","host","isPerformingPoorly","adaptSite","renderingTarget","log","setSchedulerPriorityLastStartTime","style","document","createElement","innerHTML","head","appendChild","hideAdaptedIslands","recordExperiences","recordAdaptedSite","submitConsentToOphan","consentState","onConsent","getOphan","record","getCookie","tcfv2","consentJurisdiction","consentUUID","consent","tcString","usnat","doNotSell","aus","personalisedAdvertising","consentDetails","initialiseCmp","getLocaleCode","browserId","shouldMemoize","pageViewId","ophan","country","undefined","cmp","init","pubData","platform","bootCmp","consentManagement","freeze","initialize","modulePath","importFunctionName","t","self","Function","r","URL","n","revokeObjectURL","src","remove","a","c","moduleMap","l","Blob","m","assign","createObjectURL","onerror","onload","dynamicImport","guardianPolyfilledImport","url","reject","mustardCut","dynamicImportPolyfill","initialiseDynamicImport","shimport","initialise","load","initialiseDynamicImportLegacy","doHydration","data","element","emotionCache","isUndefined","dataset","islandStatus","endPerformanceMeasure","endImportPerformanceMeasure","startPerformanceMeasure","importDuration","endIslandPerformanceMeasure","hydrateRoot","ConfigProvider","value","CacheProvider","islandDuration","performance","catch","error","message","includes","console","getEmotionCache","createCache","getConfig","serialised","querySelector","JSON","parse","String","getName","marker","getAttribute","getProps","props","hasLightboxHash","startsWith","initHydration","priority","isString","isValidSchedulerPriority","getPriority","scheduleHydration","schedule","callback","requestIdleCallback","timeout","setTimeout","rootMargin","io","IntersectionObserver","entry","isIntersecting","disconnect","observe","whenVisible","addEventListener","target","HTMLElement","targetElement","dispatchEvent","MouseEvent","once","onInteraction","islands","elements","querySelectorAll","isPolyfilled","polyfilled","queue","push","startup","task","options","recordInitialPageEvents","sentryLoader","recordPoorPerformance","refresh","atomIframe","embedIframe","newsletterEmbedIframe","discussion","cachedOphan","setEventEmitter","trackComponentAttention","modules","sentry","reportError","viewId","default","event","el","visibilityThreshold","submitComponentEvent","componentEvent","recordPerformance","performanceAPI","timing","dns","domainLookupEnd","domainLookupStart","connection","connectEnd","connectStart","firstByte","responseStart","lastByte","responseEnd","domContentLoadedEvent","domContentLoadedEventStart","loadEvent","loadEventStart","navType","navigation","redirectCount","experiencesSet","Set","experiences","experience","add","sort","join","edition","editionId","getEditionForOphan","page","removeEventListener","logPerformanceInfo","memoizedPerformingPoorly","threshold","nav","getEntriesByType","PerformanceNavigationTiming","domContentLoadedEventEnd","startTime","isTimeToFirstByteAboveThreshold","Infinity","now","PerformanceObserver","entries","observer","getEntries","buffered","isFirstContentfulPaintAboveThreshold","isSentryEnabled","enableSentryReporting","isDev","isInBrowserVariantTest","random","tests","BUILD_VARIANT","dcrJavascriptBundle","Math","loadSentry","initialised","errorQueue","feature","tags","isAdBlockInUse","queuedError","shift","loadSentryCreator","line","column","onunhandledrejection","reason","loadSentryOnError","timeInDaysFromNow","daysFromNow","tmpDate","Date","setDate","getDate","getTime","toString","cookieIsExpiredOrMissing","cookieName","cookie","expiryTime","parseInt","AD_FREE_USER_COOKIE","getAdFreeCookie","adFreeDataIsPresent","cookieVal","Number","isNaN","setAdFreeCookie","daysToLive","expires","setMonth","getMonth","setCookie","fetchJson","resource","path","RegExp","exec","isPathAbsoluteURL","ajaxUrl","mode","resp","fetch","ok","status","json","ex","statusText","isBoolean","_","USER_FEATURES_EXPIRY_COOKIE","ACTION_REQUIRED_FOR_COOKIE","DIGITAL_SUBSCRIBER_COOKIE","HIDE_SUPPORT_MESSAGING_COOKIE","forcedAdFreeMode","persistResponse","JsonResponse","contentAccess","digitalPack","showSupportMessaging","removeCookie","alertAvailableFor","isDigitalSubscriber","isUserLoggedInOktaRefactor","getAuthStatus","authStatus","kind","signedInAuthStatus","userAttributesApiUrl","getOptionsHeadersWithOkta","response","isObject","paidMember","recurringContributor","validateResponse","userHasDataAfterSignout","__webpack_public_path__","hostname","frontendAssetsFullURL","ConfigContext","createContext","children","Provider","useConfig","context","useContext","footerLink","css","palette","brandAlt","PrivacySettingsLink","extraClasses","framework","setFramework","useState","useEffect","ButtonLink","className","cssOverrides","data-link-name","onClick","preventDefault","showPrivacyManager","span","color","COUNTRY_REGEX","isValidCountryCode","test","locale","geoOverride","storage","local","get","stored","isValidCookie","ERR_INVALID_COOKIE","getDomainAttribute","memoizedCookies","has","value2","getCookieValues","set","setSessionCookie","getLocale","isSecurityError","AuthStateManager","getAuthState","this","subscribe","handler","on","unsubscribe","off","constructor","emitter","tokenManager","accessToken","idToken","isAuthenticated","tokens","getTokensSync","emit","AutoRenewService","start","autoRenew","started","state","authStateManager","clearTimeout","expiresAt","renewGracePeriod","visibilityState","authState","floor","isProfileUrl","array","OAuthError","super","error_description","days30InMillis","Emitter","ctx","events","fn","eventArr","liveEvents","filter","forEach","apply","dec2hex","dec","hex","substring","getRandomString","arr","Uint8Array","ceil","crypto","getRandomValues","Array","from","generateSha256Hash","str","buffer","TextEncoder","encode","hashBuffer","subtle","digest","hashArray","fromCharCode","base64UrlToString","base64Url","base64","base64UrlToBase64","utf8str","atob","decodeURIComponent","escape","stringToBuffer","charCodeAt","replace","base64UrlEncode","btoa","isAccessTokenClaims","claims","maybeClaims","isNonNullable","aud","auth_time","cid","email_validated","exp","iat","identity_username","iss","jti","legacy_identity_id","scp","sub","uid","ver","isAccessToken","token","maybeToken","scopes","tokenType","isIDTokenClaims","amr","at_hash","idp","nonce","preferred_username","user_groups","isIDToken","calculateClockSkew","decodeToken","payload","headerStr","payloadStr","signature","split","header","alg","kid","decodeTokens","accessTokenRaw","accessTokenClockSkew","idTokenRaw","idTokenClockSkew","accessTokenPayload","strictClockSkewCheck","abs","maxClockSkew","clockSkew","idTokenPayload","issuer","clientId","memoizedVerifyTokens","Map","verifyTokens","oauthUrls","memoized","idTokenJWT","decoded","normalisedTime","verifyIdTokenClaims","jwksUri","jwt","jwksResponse","jwks","kty","use","find","k","algorithm","publicKey","importKey","sig","verify","verifySignature","keysUrl","access_token","accessTokenHash128","verifyAccessTokenWithAtHash","verifyAccessTokenTimestamps","Token","getWithoutPrompt","finally","codeVerifier","tokenParams","client_id","code_verifier","grant_type","redirect_uri","redirectUri","tokenUrl","method","body","URLSearchParams","headers","exchangeCodeForTokens","oauthTokenResponse","authorizeParams","id_token","handleOAuthResponse","searchParams","postMessageListener","opts","responseHandler","timeoutId","origin","oauthTimeout","addPostMessageListener","iframe","frame","display","loadFrame","authorizeUrl","contains","removeChild","performAuthCodeFlowIframe","codeChallenge","generateCodeChallenge","code_challenge","code_challenge_method","prompt","response_type","response_mode","scope","authorizeResponse","maybeResponse","isOAuthAuthorizeResponseError","tokenResponse","isOAuthTokenResponseError","TokenManager","setTokens","existingTokens","accessTokenStorage","idTokenStorage","newToken","existingToken","accessTokenFromStorage","idTokenFromStorage","getTokens","refreshIfRequired","clear","renew","tokenClass","IdentityAuth","isSignedInWithAuthState","isSignedIn","idCookieSessionRefresh","enabled","profileUrl","lastRefreshKey","isAvailable","currentTime","lastRefresh","shouldRefreshCookie","newExpiry","returnUrl","endpoint","redirectToRefreshEndpoint","encodeURIComponent","href","cookieRefreshIfRequired","guSoCookie","isStage","getIssuer","stage","getClientId","getRedirectUri","getIdentityAuth","stageOrDev","getStage","identityAuth","idCookieRefresh","getUserCookie","credentials","Authorization","isSignedInWithOktaAuthState","eitherInOktaTestOrElse","inOktaTestFunction","notInOktaTestFunction","okta","getSignedInStatusWithOkta","getSignedInStatusWithCookies","GU_UCookie","START","RUNNING_TASK_COUNT","CONCURRENCY_COUNT","PRIORITIES","isOneOf","critical","lastStartTime","tasks","enhancement","run","nextTask","runningTime","canRun","getNextTask","resolver","queueableTask","scheduledTask","variant","adBlockInUse","getComputedStyle","requestAnimationFrame","ad","setAttribute","offsetParent","offsetHeight","offsetLeft","offsetTop","offsetWidth","clientHeight","clientWidth","adStyles","getPropertyValue","adElementBlocked","supportsPerformanceAPI","mark","trackedSlots","slotMarks","slotMeasures","pageMarks","pageMeasures","allSlotMarks","measure","externalMarks","shouldSave","shouldSaveMark","shouldSaveMeasure","EventTimer","commercialTimer","_externalMarks","reduce","getEntriesByName","marks","_marks","timer","ts","measures","_measures","duration","setProperty","properties","eventName","endsWith","endMark","startMark","measureName","navigator","downlink","effectiveType","AdSize","width","height","toArray","isProxy","isOutOfPage","isEmpty","isFluid","isMerch","isSponsorLogo","createAdSize","namedStandardAdSizes","billboard","halfPage","leaderboard","mobilesticky","mpu","portrait","skyscraper","cascade","portraitInterstitial","adSizes","outstreamDesktop","outstreamGoogleDesktop","outstreamMobile","fluid","googleCard","outOfPage","pubmaticInterscroller","empty","fabric","merchandising","merchandisingHigh","merchandisingHighAdFeature","sponsorLogo","AD_LABEL_HEIGHT","Endpoints","commercialMetricsPayload","page_view_id","browser_id","metrics","devProperties","adBlockerProperties","setEndpoint","CODE","PROD","setDevProperties","setAdBlockerProperties","adBlockerInUse","gatherMetricsOnPageUnload","eventTimer","mapEventTimerPropertiesToString","eventTimerProperties","item","offlineCount","teams","subscriptions","flatMap","entryType","detail","deserialise","subscription","toJson","stringify","action","getPerformanceMeasures","keepalive","cache","listener","shouldSendCommercialMetrics","addVisibilityListeners","checkConsent","consents","every","bypassCommercialMetricsSampling","commercialMetricsInitialised","warn","initCommercialMetrics","sampling","userIsInSamplingGroup","editionToGeolocationMap","UK","US","AU","editionCountryCode","editionKey","videoLengths","getVideoLength","videoLength","index","min","calculateRecentlyPublishedBucket","webPublicationDate","hoursSincePublication","daysSincePublication","monthsSincePublication","PERMUTIVE_KEY","PERMUTIVE_PFP_KEY","frequency","AMTGRP_STORAGE_KEY","adManagerGroups","getFrequencyValue","rawValue","getRaw","getRawWithConsent","visitCount","getAdManagerGroup","canTarget","existingGroup","s","some","g","group","setRaw","createAdManagerGroup","getPermutiveWithState","youtube","rawSegments","segments","isArray","err","getSegments","referrers","match","getReferrer","referrer","matchedRef","referrerType","experimentsTargeting","clientSideParticipations","serverSideParticipations","testToParams","testName","clientSideExperiment","serverSideExperiments","isTargetingString","string","getSharedTargeting","shared","pickTargetingValues","obj","valid","isValidTargeting","filterValues","pageTargets","filtered","buildPageTargeting","adFree","isDotcomRendering","adFreeTargeting","af","sharedAdTargeting","contentTargeting","eligibleForDCR","renderingPlatform","section","sensitive","keywords","urlkw","lastSegment","Boolean","getUrlKeywords","dcre","rc","rp","sens","vl","allkw","b","getContentTargeting","dcrCouldRender","pageId","isSensitive","videoDuration","sessionTargeting","adTest","countryCode","participations","ab","at","cc","pv","ref","si","getSessionTargeting","viewportTargeting","viewPortWidth","cmpBannerWillShow","isPreview","bp","skinsize","inskin","getViewportTargeting","innerWidth","innerHeight","getViewport","hasInitialised","willShowPrivacyMessageSync","personalisedTargeting","amtgrp","fr","permutive","cmp_interaction","eventStatus","pa","consent_tcfv2","rdp","getCMPTargeting","getPersonalisedTargeting","consentlessTargeting","firstvisit","navigationEvents","lastNavigationEvent","lastPerformanceEntryIsNavigationType","referrerMatchesHost","isFirstVisit","buildImaAdTagUrl","adUnit","customParams","mergedCustomParams","pageTargeting","mergeCustomParamsWithTargeting","queryParams","iu","tfcd","npa","sz","gdfp_req","output","unviewed_position_start","env","impl","vad_type","vpos","description_url","cust_params","params","queryValue","queryParamsArray","v","_extends","bind","hasOwnProperty","call","version","currentFramework","getCurrentFramework","label","isServerSide","serverSideWarn","serverSideWarnAndReturn","arg","__disable","__enable","__isDisabled","willShowPrivacyMessage","isGuardian","isGuardianDomain","ENDPOINT","getConsentState","command","__uspapi","result","success","uspString","charAt","api","__tcfapi","defaultConsents","tcData","customVendors","purpose","gdprApplies","addtlConsent","grants","vendorConsents","acc","cur","vendorGrant","gppData","__gpp","supportedAPI","values","parsedSections","SaleOptOut","Gpc","signalStatus","callBackQueue","finalCallbackQueue","awaitingUserInteractionInTCFv2","awaitingUserInteractionInUSNAT","invokeCallback","stateString","lastState","enhanceConsentState","gpcSignal","globalPrivacyControl","getConsentState$3","getConsentState$2","getConsentState$1","invokeCallbacks","callbacksToInvoke","onConsentChange","callBack","newCallback","final","stub_tcfv2","d","t2","e2","enumerable","Symbol","toStringTag","__esModule","create","e3","p","t3","n2","frames","__tcfapiLocator","cssText","n3","r2","cmpLoaded","apiVersion","t4","__tcfapiCall","r3","__tcfapiReturn","returnValue","callId","source","postMessage","parameter","f","u","configurable","TypeError","globalThis","valueOf","stub_uspapi_ccpa","__cmpCall","a2","c2","__cmpReturn","gdprAppliesGlobally","msgHandler","resolveWillShowPrivacyMessage","getPropertyHref","__gpp_addFrame","__gpp_stub","gppVersion","cmpStatus","cmpDisplayStatus","supportedAPIs","cmpId","sectionList","applicableSections","gppString","lastId","listenerId","pingData","splice","__gpp_msghandler","__gppCall","p2","__gppReturn","stub","_sp_","frameworkMessageType","setCurrentFramework","isInPropertyIdABTest","useSourcepointPropertyIdVariant","_sp_queue","baseEndpoint","accountId","propertyHref","targetingParams","cmpInitTimeUtc","onConsentReady","message_type","euconsent","onMessageReady","onMessageReceiveData","messageId","onMessageChoiceSelect","choice_id","choiceTypeID","onPrivacyManagerAction","pmData","onMessageChoiceError","onPMCancel","onSPPMObjectReady","onError","errorCode","errorObject","userReset","propertyId","getPropertyId","gdpr","includeUspApi","transitionCCPAAuth","ccpa","spLib","CMP","willShowPrivacyMessage$1","loadPrivacyManagerModal","COOKIE_NAME","isDisabled","VendorIDs","a9","acast","braze","comscore","criteo","googletag","ias","inizio","ipsos","magnite","nielsen","prebidCustom","qm","remarketing","teads","twitter","redplanet","prebid","getConsentFor","vendor","sourcepointIds","foundSourcepointId","tcfv2Consent","vendorStorageIds","localStorage","cookies","sessionStorage","deprecatedVendorStorageIds","removeData","session","removeUnconsentedData","vendorData","_a","_b","_c","_d","_willShowPrivacyMessage","guCmpHotFix","resolveInitialised","initComplete","cmp$1","init$1","getFramework","willShowValue","onConsentChange$2","getConsentFor$2","memoizedCookie","nameEq","cookieTrimmed","trim","isCrossSubdomain","shortDomain","getShortDomain","domain","COOKIE_REGEX","isValidCookieValue","currentDomainOnly","setUTCDate","getUTCDate","setUTCMonth","getUTCMonth","toUTCString","literals","STORAGE_KEY","SUBSCRIPTIONS_CACHE","getSubscriptions","storedSubscriptions","isSubscription","isSubscribedTo","logStyles","subscriptionStyles","commonStyle","messageStyle","subscriptionStyle","background","font","args","styles","logger","subscribeTo","unsubscribeFrom","delete","common","commercial","dotcom","design","tx","supporterRevenue","identity","openJournalism","perf","serialise","markName","getId","trunc","padStart","formattedDuration","measurement","logPerf","_storage","_local","_session","__defProp","__typeError","msg","__publicField","writable","__defNormalProp","__accessCheck","member","__privateGet","getter","__privateAdd","WeakSet","__privateSet","setter","StorageFactory","storageHandler","getItem","setItem","removeItem","storage2","available","WeakMap","ophanRemoteHost","generatePageViewId","send","image","Image","checker","setInterval","complete","clearInterval","sendInitial","buildQueryString","prop","sendMore","smartEncode","bumpViewId","webkitVisibilityState","mozVisibilityState","msVisibilityState","changeEvent","ofs","cl","noop","isOldIEevents","_options","loopDelay","maxLoop","debug","found","notfound","listeners","baitNode","quickBait","cssClass","baitTriggers","nullProps","zeroProps","exeResult","quick","remote","findResult","timerIds","download","isFunc","isError","beginTest","bait","castBait","reelIn","baitStyle","tag","attributes","attr","makeEl","class","attemptNum","clearBaitNode","baitTemp","funcs","Message","notifyListeners","dom","fireNow","toLowerCase","readyState","attachEvent","abd","sendInitialEvent","storeDataToSendOnNextEvent","hasProp","doc","canStoreEventsInLocalStorage","servingPlatform","httpStatus","visibility","paramName","search","param","getQueryParameterValue","navigationType","getNavigationType","isModernBrowser","tz","getTimezoneOffset","appendContentType","appendDataFromLocalStorageToEvent","transmit","adblockDetection","adBlockerEnabled","adUnitWasHidden","onLoadCaptures","capture","captureData","appendComponentDataToEvent","localStorageItems","componentElements","componentNames","trimmedComponentNames","componentName","trimComponentNamesToUrlSafeLength","uniqueComponents","renderedComponents","newData","existingData","contentType","contentTypes","onLoadCapture","dataCapture","components","eventEmitter","Component","isVisible","box","getBoundingClientRect","windowHeight","documentElement","windowWidth","left","top","right","bottom","visibilityHasChanged","wasVisible","visible","rebindToEventEmitter","usingEmitter","visCheck","checkVisibility","makeActive","makeInactive","unrecordedAttentionStarted","incrementTotalAttentionTimeByUnrecordedAmount","hadAttentionSinceLastGet","totalAttentionMs","reportedTotalAttentionMs","getAttentionTime","unrecordedMs","reportingInterval","visibilityThreshold1","reportingInterval1","EVENTS","REPORTINGINTERVAL","decayTimerId","videoPlaying","cancelDecayTimer","reporter","report","attentionMs","round","componentAttentionTimes","componentAttentionMs","initComponent","privateBrowsingMode","reportNormalMode","reportPrivateMode","webkitRequestFileSystem","TEMPORARY","db","indexedDB","open","onsuccess","tryIndexedDB","x","tryLocalStorage","PointerEvent","MSPointerEvent","inPrivateBrowsingMode","heatmapFired","validAncestorAnchorElement","nodeName","parentNode","getContainingComponent","getDataLinkNames","dataLinkNames","dataLinkName","info","anchorTarget","tagName","trackingTarget","protocol","pathname","to","referringComponent","referringDataLinkNames","refPlatform","refViewId","clickComponent","clickLinkNames","msPerformance","webkitPerformance","mozPerformance","core","validIframeDomains","ng","messageEvent","originDomain","eventOrigin","retrieveOriginDomain","eventObject","iFrame","clickEvent","clickCapture","recordIframeClickEvent","getElementById","iframeId","componentEventIsValid","recordIframeComponentEvent","privatebrowsing","addHeatmap","heatmapParam","heatmap","attention","brand","culture","focus","labs","lifestyle","neutral","news","opinion","specialReport","specialReportAlt","sport","ctaMedium","ctaSmall","ctaXsmall","iconMedium","iconSmall","iconXsmall","inputMedium","inputXsmall","iconSize","medium","small","xsmall","size","remHeight","remWidth","space","remSpace","article15","article17","articleBold17","articleBoldItalic15","articleBoldItalic17","articleItalic17","headlineBold14","headlineBold15","headlineBold17","headlineBold20","headlineBold24","headlineBold28","headlineBold28Object","fontFamily","fontSize","lineHeight","fontWeight","fontStyle","headlineBold34","headlineBold42","headlineBold50","headlineLight14","headlineLight15","headlineLight17","headlineLight20","headlineLight24","headlineLight28","headlineLight34","headlineLight42","headlineLight50","headlineLight64","headlineMedium14","headlineMedium15","headlineMedium17","headlineMedium20","headlineMedium24","headlineMedium28","headlineMedium34","headlineMedium42","headlineMedium50","headlineMedium64","textEgyptian14","textEgyptian15","textEgyptian17","textEgyptianBold15","textEgyptianBold17","textEgyptianItalic17","textSans12","textSans14","textSans15","textSans17","textSans20","textSans24","textSans34","textSansBold12","textSansBold14","textSansBold15","textSansBold17","textSansBold17Object","textSansBold20","textSansBold24","textSansBold28","textSansBold34","textSansItalic15","focusHalo","focusHaloSpaced","icon","iconSvg","iconSide","theme","jsx","linkStyles","isButton","linkContents","spacer","Fragment","linkContents2","unshift","cloneElement","themeLink","textPrimary","textPrimaryHover","textSecondary","textSecondaryHover","link","buttonLink","iconRight","iconLeft","priorities","primary","link2","secondary","iconSides","mergedTheme","providerTheme","mergeThemes","defaultTheme","themeOverrides","transform","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","O","chunkIds","notFulfilled","fulfilled","j","ns","def","current","indexOf","definition","chunkId","promises","hmd","done","script","needAttach","scripts","getElementsByTagName","charset","nc","onScriptComplete","prev","doneFns","nmd","paths","installedChunks","installedChunkData","promise","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}