{"version":3,"file":"ExpandableMarketingCardWrapper-importable.client.web.legacy.558767d39053a3b0d96a.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/ExpandableMarketingCard.tsx","webpack://@guardian/dotcom-rendering/./src/components/ExpandableMarketingCardSwipeable.tsx","webpack://@guardian/dotcom-rendering/./src/components/ExpandableMarketingCardWrapper.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/Hide.tsx","webpack://@guardian/dotcom-rendering/./src/lib/dailyArticleCount.ts","webpack://@guardian/dotcom-rendering/./src/lib/getZIndex.ts","webpack://@guardian/dotcom-rendering/./src/lib/useAB.ts","webpack://@guardian/dotcom-rendering/./src/palette.ts"],"sourcesContent":["import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { from, headlineBold17, headlineBold20, neutral, space, textSans14, textSans15, textSansBold12, textSansBold14, } from '@guardian/source/foundations';\nimport { LinkButton, SvgChevronDownSingle, SvgCross, } from '@guardian/source/react-components';\nimport { palette } from '../palette';\nimport { useConfig } from './ConfigContext';\nconst smallIllustrationStyles = css `\n\tdisplay: none;\n\t${from.phablet} {\n\t\tdisplay: inline;\n\t}\n\t${from.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\nconst largeIllustrationStyles = css `\n\tdisplay: inline;\n\t${from.phablet} {\n\t\tdisplay: none;\n\t}\n\t${from.leftCol} {\n\t\tdisplay: inline;\n\t}\n`;\nconst BannersIllustration = ({ type, styles }) => {\n    const { assetOrigin } = useConfig();\n    const smallSrc = `${assetOrigin}static/frontend/logos/red-blue-small-banner-${type}.svg`;\n    const largeSrc = `${assetOrigin}static/frontend/logos/red-blue-large-banner-${type}.svg`;\n    return (_jsxs(_Fragment, { children: [_jsx(\"img\", { src: smallSrc, alt: \"\", css: [styles, smallIllustrationStyles] }), _jsx(\"img\", { src: largeSrc, alt: \"\", css: [styles, largeIllustrationStyles] })] }));\n};\nconst fillBarStyles = css `\n\tbackground-color: ${palette('--expandable-marketing-card-fill-background')};\n\twidth: 100%;\n\tmargin-top: -1px;\n\tmargin-bottom: -1px;\n\n\theight: 6px;\n\t${from.desktop} {\n\t\theight: 4px;\n\t}\n`;\nconst contentStyles = css `\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\talign-items: start;\n\tgap: ${space[4]}px;\n\theight: auto;\n\twidth: auto;\n\tpadding: ${space[2]}px;\n\tborder-radius: 0 0 ${space[2]}px ${space[2]}px;\n\tbackground-color: ${palette('--expandable-marketing-card-background')};\n\tcolor: ${neutral[100]};\n`;\nconst summaryStyles = css `\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: ${space[3]}px;\n\tz-index: 1;\n\twidth: 100%;\n`;\nconst contractedSummaryStyles = css `\n\t${summaryStyles}\n\tcursor: pointer;\n`;\nconst headingStyles = css `\n\tdisplay: flex;\n\tgap: ${space[2]}px;\n\tjustify-content: space-between;\n\n\t${headlineBold17};\n\t${from.wide} {\n\t\t${headlineBold20};\n\t}\n`;\nconst kickerStyles = css `\n\t${textSans15};\n\t${from.leftCol} {\n\t\t${textSans14};\n\t}\n\t${from.wide} {\n\t\t${textSans15};\n\t}\n`;\nconst arrowStyles = css `\n\tflex-shrink: 0;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tborder: none;\n\tvertical-align: middle;\n\tjustify-content: center;\n\tpadding: 0;\n\twidth: ${space[6]}px;\n\theight: ${space[6]}px;\n\tbackground-color: ${palette('--expandable-marketing-card-svg-background')};\n\tborder-radius: 50%;\n\tcursor: pointer;\n\n\tsvg {\n\t\tflex: 0 0 auto;\n\t\tdisplay: block;\n\t\tfill: ${palette('--expandable-marketing-card-svg-fill')};\n\t\tposition: relative;\n\t\twidth: ${space[5]}px;\n\t\theight: auto;\n\t}\n`;\nconst detailsStyles = css `\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: ${space[4]}px;\n\tmargin-bottom: ${space[2]}px;\n`;\nconst sectionStyles = css `\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: ${space[3]}px;\n\tborder-top: 1px solid ${neutral[100]};\n\tpadding-top: ${space[2]}px;\n`;\nconst subheadingStyles = css `\n\t${headlineBold17};\n`;\nconst paragraphStyles = css `\n\t${textSans15}\n\tmargin-right: ${space[4]}px;\n\tz-index: 1;\n`;\nconst ctaCalloutStyles = css `\n\t${textSansBold14};\n\tz-index: 1;\n`;\nconst imageTopStyles = css `\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n`;\nconst imageBottomStyles = css `\n\tposition: absolute;\n\tright: 0;\n\tbottom: 0;\n`;\nconst buttonStyles = css `\n\tz-index: 1;\n\tbackground-color: ${palette('--expandable-marketing-card-button-background')};\n\twidth: fit-content;\n\n\t${textSansBold12};\n\t${from.wide} {\n\t\t${textSansBold14};\n\t}\n`;\nexport const ExpandableMarketingCard = ({ guardianBaseURL, heading, kicker, isExpanded, setIsClosed, }) => {\n    return (_jsxs(_Fragment, { children: [_jsx(\"div\", { css: fillBarStyles }), _jsx(\"div\", { css: contentStyles, children: !isExpanded ? (_jsxs(_Fragment, { children: [_jsx(BannersIllustration, { type: \"faded\", styles: imageTopStyles }), _jsxs(\"section\", { css: contractedSummaryStyles, children: [_jsxs(\"div\", { css: headingStyles, children: [_jsx(\"h2\", { children: heading }), _jsx(\"div\", { css: arrowStyles, children: _jsx(SvgChevronDownSingle, {}) })] }), _jsx(\"div\", { css: kickerStyles, children: kicker })] })] })) : (_jsxs(_Fragment, { children: [_jsx(BannersIllustration, { type: \"top\", styles: imageTopStyles }), _jsx(BannersIllustration, { type: \"bottom\", styles: imageBottomStyles }), _jsxs(\"section\", { css: summaryStyles, children: [_jsxs(\"div\", { css: headingStyles, children: [_jsx(\"h2\", { children: heading }), _jsx(\"button\", { \"data-link-name\": \"us-expandable-marketing-card close-button\", onClick: () => {\n                                                setIsClosed(true);\n                                            }, type: \"button\", css: arrowStyles, children: _jsx(SvgCross, {}) })] }), _jsx(\"div\", { css: kickerStyles, children: kicker })] }), _jsxs(\"div\", { css: detailsStyles, children: [_jsxs(\"section\", { css: sectionStyles, children: [_jsx(\"h3\", { css: subheadingStyles, children: \"We\\u2019re independent\" }), _jsx(\"p\", { css: paragraphStyles, children: \"With no billionaire owner or shareholders, our journalism is funded by readers\" })] }), _jsxs(\"section\", { css: sectionStyles, children: [_jsx(\"h3\", { css: subheadingStyles, children: \"We\\u2019re open\" }), _jsx(\"p\", { css: paragraphStyles, children: \"With misinformation threatening democracy, we keep our fact-based news paywall-free\" })] }), _jsxs(\"section\", { css: sectionStyles, children: [_jsx(\"h3\", { css: subheadingStyles, children: \"We\\u2019re global\" }), _jsx(\"p\", { css: paragraphStyles, children: \"With 200 years of history and staff across America and the world, we offer an outsider perspective on US news\" })] }), _jsx(\"section\", { css: sectionStyles, children: _jsx(\"p\", { css: ctaCalloutStyles, children: \"Sign up for Guardian Headlines US edition\" }) }), _jsx(LinkButton, { \"data-link-name\": \"us-expandable-marketing-card cta-click\", priority: \"tertiary\", size: \"xsmall\", href: `${guardianBaseURL}/info/2015/dec/08/daily-email-us`, cssOverrides: buttonStyles, children: \"Newsletter sign up\" })] })] })) })] }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { useEffect, useState } from 'react';\nimport { getOphan, submitComponentEvent } from '../client/ophan/ophan';\nimport { getZIndex } from '../lib/getZIndex';\nimport { ExpandableMarketingCard } from './ExpandableMarketingCard';\n// The minimum length of the left swipe on the x-axis to close the banner\nconst LEFT_SWIPE_THRESHOLD_PX = 20;\nconst isLeftSwipe = (thisXCoord, prevXCoord) => {\n    if (prevXCoord === null) {\n        return false;\n    }\n    return thisXCoord + LEFT_SWIPE_THRESHOLD_PX < prevXCoord;\n};\nconst isViewportBelowTopOfBody = (topOfBody) => topOfBody.getBoundingClientRect().top < 0;\nconst hideBannerStyles = css `\n\tleft: -1200px;\n\ttransition: all 2.5s linear;\n`;\nconst stickyContainerStyles = css `\n\tposition: sticky;\n\ttop: 0;\n\tz-index: ${getZIndex('expandableMarketingCardOverlay')};\n\n\t/* The component slides in from the left-hand side */\n\tanimation: slidein 2.4s linear;\n\n\t@keyframes slidein {\n\t\tfrom {\n\t\t\ttranslate: -1200px 0;\n\t\t}\n\n\t\tto {\n\t\t\ttranslate: 0 0;\n\t\t}\n\t}\n`;\nconst absoluteContainerStyles = css `\n\tposition: absolute;\n\twidth: 100%;\n`;\nconst isClick = (pointerDownCoords, pointerUpCoords) => {\n    const [lastDownXCoord, lastDownYCoord] = pointerDownCoords;\n    const [lastUpXCoord, lastUpYCoord] = pointerUpCoords;\n    if (lastUpXCoord === null || lastUpYCoord === null)\n        return false;\n    /**\n     * Allow a 5px margin of error to identify a click. We want to\n     * err on the side of expanding the banner if it is touched.\n     */\n    return (Math.abs(lastUpXCoord - lastDownXCoord) < 5 &&\n        Math.abs(lastUpYCoord - lastDownYCoord) < 5);\n};\n/**\n * Provides a swipeable wrapper around the ExpandableMarketingCard component.\n * This component can be dismissed by swiping it to the left.\n */\nexport const ExpandableMarketingCardSwipeable = ({ guardianBaseURL, heading, kicker, isExpanded, setIsExpanded, setIsClosed, abTestVariant, }) => {\n    const [lastDownXCoord, setLastDownXCoord] = useState(null);\n    const [lastDownYCoord, setLastDownYCoord] = useState(null);\n    const [isDown, setIsDown] = useState(false);\n    const [hasSwipedLeft, setHasSwipedLeft] = useState(false);\n    const [topOfBody, setTopOfBody] = useState(null);\n    /**\n     * On screen sizes below leftCol (<1140px), only display the card\n     * when the user scrolls past the top of the article.\n     */\n    const [shouldDisplayCard, setShouldDisplayCard] = useState(false);\n    // The distance to the left from the pointer down and current pointer, whilst the pointer is still down.\n    const [dragLeftDistance, setDragLeftDistance] = useState(0);\n    useEffect(() => {\n        setTopOfBody(document.querySelector('[data-gu-name=\"body\"]'));\n    }, []);\n    useEffect(() => {\n        if (!topOfBody)\n            return;\n        /**\n         * It's possible that the viewport does not start at the top of the page.\n         */\n        if (isViewportBelowTopOfBody(topOfBody)) {\n            setShouldDisplayCard(true);\n            return;\n        }\n        /**\n         * Show the card when the top of the body moves out of the viewport.\n         */\n        const observer = new window.IntersectionObserver(([entry]) => {\n            if (!entry)\n                return;\n            if (entry.isIntersecting) {\n                setShouldDisplayCard(true);\n            }\n        }, { rootMargin: '0px 0px -100%' });\n        observer.observe(topOfBody);\n        return () => {\n            observer.disconnect();\n        };\n    }, [topOfBody]);\n    useEffect(() => {\n        const reportView = () => {\n            void getOphan('Web').then((ophan) => {\n                ophan.record({\n                    interaction: {\n                        component: 'us-expandable-marketing-card',\n                        value: 'us-expandable-marketing-card visible',\n                    },\n                });\n            });\n        };\n        if (shouldDisplayCard) {\n            reportView();\n        }\n    }, [shouldDisplayCard]);\n    useEffect(() => {\n        if (isExpanded) {\n            void submitComponentEvent({\n                component: {\n                    componentType: 'CONTAINER',\n                    id: 'us-expandable-marketing-card',\n                },\n                action: 'EXPAND',\n                abTest: {\n                    name: 'UsaExpandableMarketingCard',\n                    variant: abTestVariant,\n                },\n            }, 'Web');\n        }\n    }, [abTestVariant, isExpanded]);\n    useEffect(() => {\n        if (hasSwipedLeft) {\n            void submitComponentEvent({\n                component: {\n                    componentType: 'CONTAINER',\n                    id: 'us-expandable-marketing-card',\n                },\n                action: 'CLOSE',\n                abTest: {\n                    name: 'UsaExpandableMarketingCard',\n                    variant: abTestVariant,\n                },\n            }, 'Web');\n        }\n    }, [abTestVariant, hasSwipedLeft]);\n    if (!shouldDisplayCard) {\n        return null;\n    }\n    if (!isExpanded) {\n        return (_jsx(\"div\", { \"data-component\": \"us-expandable-marketing-card\", css: [stickyContainerStyles], children: _jsx(\"div\", { css: [\n                    absoluteContainerStyles,\n                    isDown &&\n                        css `\n\t\t\t\t\t\t\t\tleft: ${dragLeftDistance}px;\n\t\t\t\t\t\t\t`,\n                    hasSwipedLeft && hideBannerStyles,\n                ], role: \"button\", tabIndex: 0, onKeyDown: (event) => {\n                    if (event.key === 'Enter') {\n                        setIsExpanded(true);\n                    }\n                    if (event.key === 'Escape') {\n                        setIsClosed(true);\n                    }\n                }, onPointerDown: (event) => {\n                    event.preventDefault();\n                    setIsDown(true);\n                    setLastDownXCoord(event.clientX);\n                    setLastDownYCoord(event.clientY);\n                }, onPointerUp: (event) => {\n                    event.preventDefault();\n                    setIsDown(false);\n                    if (isClick([event.clientX, event.clientY], [lastDownXCoord, lastDownYCoord])) {\n                        setIsExpanded(true);\n                    }\n                    else if (isLeftSwipe(event.clientX, lastDownXCoord)) {\n                        setHasSwipedLeft(true);\n                    }\n                }, onPointerMove: (event) => {\n                    event.preventDefault();\n                    if (isDown) {\n                        setDragLeftDistance(Math.min(0, event.clientX - (lastDownXCoord ?? 0)));\n                    }\n                }, onTouchStart: (event) => {\n                    event.preventDefault();\n                }, children: _jsx(ExpandableMarketingCard, { guardianBaseURL,\n                    heading,\n                    kicker,\n                    isExpanded,\n                    setIsExpanded,\n                    setIsClosed }) }) }));\n    }\n    return (_jsx(\"div\", { \"data-component\": \"us-expandable-marketing-card\", css: [stickyContainerStyles], children: _jsx(\"div\", { css: [absoluteContainerStyles], role: \"button\", tabIndex: 0, onKeyDown: (event) => {\n                if (event.key === 'Escape') {\n                    setIsClosed(true);\n                }\n            }, children: _jsx(ExpandableMarketingCard, { guardianBaseURL: guardianBaseURL, heading: heading, kicker: kicker, isExpanded: isExpanded, setIsClosed: setIsClosed }) }) }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { getCookie } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { getDailyArticleCount } from '../lib/dailyArticleCount';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport { useAB } from '../lib/useAB';\nimport { ExpandableMarketingCard } from './ExpandableMarketingCard';\nimport { ExpandableMarketingCardSwipeable } from './ExpandableMarketingCardSwipeable';\nimport { Hide } from './Hide';\nconst variantFree = {\n    heading: 'Yes, this story is free',\n    kicker: 'Why the Guardian has no paywall',\n};\nconst variantBubble = {\n    heading: 'Pop your US news bubble',\n    kicker: 'How the Guardian is different',\n};\nconst variantBillionaire = {\n    heading: 'No billionaire approved this',\n    kicker: 'How the Guardian is different',\n};\nconst getVariant = (abTestAPI) => {\n    if (!abTestAPI) {\n        return null;\n    }\n    const isInVariantFree = abTestAPI.isUserInVariant('UsaExpandableMarketingCard', 'variant-free');\n    const isInVariantBubble = abTestAPI.isUserInVariant('UsaExpandableMarketingCard', 'variant-bubble');\n    const isInVariantBillionaire = abTestAPI.isUserInVariant('UsaExpandableMarketingCard', 'variant-billionaire');\n    if (isInVariantFree) {\n        return 'variant-free';\n    }\n    if (isInVariantBubble) {\n        return 'variant-bubble';\n    }\n    if (isInVariantBillionaire) {\n        return 'variant-billionaire';\n    }\n    return null;\n};\nconst getVariantCopy = (variant) => {\n    if (variant === 'variant-free') {\n        return variantFree;\n    }\n    if (variant === 'variant-bubble') {\n        return variantBubble;\n    }\n    return variantBillionaire;\n};\nconst isFirstOrSecondArticle = () => {\n    const [dailyCount = {}] = getDailyArticleCount() ?? [];\n    return Object.keys(dailyCount).length === 0 || dailyCount.count <= 1;\n};\nconst isNewUSUser = async () => {\n    const isUserInUS = (await getLocaleCode()) === 'US';\n    if (!isUserInUS) {\n        return false;\n    }\n    // Exclude users who have selected a non-US edition.\n    const editionCookie = getCookie({ name: 'GU_EDITION' });\n    const hasUserSelectedNonUSEdition = !!editionCookie && editionCookie !== 'US';\n    // This check must happen AFTER we've ensured that the user is in the US.\n    const isNewUser = isFirstOrSecondArticle();\n    return !hasUserSelectedNonUSEdition && isNewUser;\n};\nexport const ExpandableMarketingCardWrapper = ({ guardianBaseURL }) => {\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [isClosed, setIsClosed] = useState(false);\n    const [isApplicableUser, setIsApplicableUser] = useState(false);\n    const abTestAPI = useAB()?.api;\n    const abTestVariant = getVariant(abTestAPI);\n    useEffect(() => {\n        void isNewUSUser().then((show) => {\n            if (show) {\n                setIsApplicableUser(true);\n            }\n        });\n    }, []);\n    if (!abTestVariant || !isApplicableUser || isClosed) {\n        return null;\n    }\n    const { heading, kicker } = getVariantCopy(abTestVariant);\n    return (_jsxs(_Fragment, { children: [_jsx(Hide, { when: \"below\", breakpoint: \"leftCol\", children: _jsx(\"div\", { \"data-component\": \"us-expandable-marketing-card\", role: !isExpanded ? 'button' : 'none', tabIndex: 0, onKeyDown: (event) => {\n                        if (event.key === 'Enter' && !isExpanded) {\n                            setIsExpanded(true);\n                        }\n                        if (event.key === 'Escape') {\n                            setIsClosed(true);\n                        }\n                    }, onClick: () => {\n                        !isExpanded && setIsExpanded(true);\n                    }, children: _jsx(ExpandableMarketingCard, { guardianBaseURL: guardianBaseURL, heading: heading, kicker: kicker, isExpanded: isExpanded, setIsClosed: setIsClosed }) }) }), _jsx(Hide, { when: \"above\", breakpoint: \"leftCol\", children: _jsx(ExpandableMarketingCardSwipeable, { guardianBaseURL: guardianBaseURL, heading: heading, kicker: kicker, isExpanded: isExpanded, setIsExpanded: setIsExpanded, setIsClosed: setIsClosed, abTestVariant: abTestVariant }) })] }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { from, until } from '@guardian/source/foundations';\nexport const Hide = ({ children, when, breakpoint, el, }) => {\n    let whenToHide;\n    if (when === 'below') {\n        whenToHide = css `\n\t\t\t${until[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n    }\n    else {\n        whenToHide = css `\n\t\t\t${from[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n    }\n    return el === 'li' ? (_jsx(\"li\", { css: whenToHide, children: children })) : (_jsx(\"span\", { css: whenToHide, children: children }));\n};\n","import { isObject, storage } from '@guardian/libs';\nexport const DailyArticleCountKey = 'gu.history.dailyArticleCount';\nconst isValidHistory = (history) => Array.isArray(history) &&\n    history.every((daily) => isObject(daily) &&\n        'day' in daily &&\n        'count' in daily &&\n        typeof daily.day === 'number' &&\n        typeof daily.count === 'number');\n// Returns undefined if no daily article count in local storage\nexport const getDailyArticleCount = () => {\n    try {\n        const dailyCount = storage.local.get(DailyArticleCountKey);\n        if (!isValidHistory(dailyCount)) {\n            throw new Error('Invalid gu.history.dailyArticleCount value');\n        }\n        return dailyCount;\n    }\n    catch (e) {\n        // error parsing the string, so remove the key\n        storage.local.remove(DailyArticleCountKey);\n        return undefined;\n    }\n};\nexport const getToday = () => Math.floor(Date.now() / 86_400_000);\nexport const incrementDailyArticleCount = () => {\n    // get the daily article count from local storage\n    const dailyArticleCount = getDailyArticleCount() ?? [];\n    // calculate days since unix epoch for today date\n    const today = getToday();\n    // check if latest day is today and increment if so\n    if (dailyArticleCount[0]?.day === today) {\n        dailyArticleCount[0].count += 1;\n    }\n    else {\n        // else set new day\n        dailyArticleCount.unshift({ day: today, count: 1 });\n        // remove any days older than 60\n        const cutOff = today - 60;\n        const firstOldDayIndex = dailyArticleCount.findIndex((dailyCount) => dailyCount.day && dailyCount.day < cutOff);\n        if (firstOldDayIndex > 0) {\n            dailyArticleCount.splice(firstOldDayIndex);\n        }\n    }\n    // set the latest article count\n    storage.local.set(DailyArticleCountKey, dailyArticleCount);\n};\n","/**\n * How do I get a z-index for my new item?\n *\n * Decide a meaningful name for your item and then insert it\n * in the indices array below. The higher up your item visually,\n * then the higher it will be in the z-index stack,\n * 'higher' means _earlier_ in the array.\n *\n * Eg. stickyAdWrapper will be given a higher z-index than bodyArea\n *\n * Once inserted in the array, use getZIndex() to return the css\n *\n * Eg.\n *\n * import { getZIndex } from './getZIndex';\n *\n * const myCss = css`\n *    color: blue;\n *    z-index: ${getZIndex('TheGuardian')};\n * `;\n *\n * As new items are added, all z-indexes are adjusted\n */\nconst indices = [\n    // Modals will go here at the top\n    'lightbox',\n    'youTubeFullscreen',\n    // Sticky video and button need to be above everything\n    'sticky-video-button',\n    'sticky-video',\n    'banner',\n    'dropdown',\n    'burger',\n    'mastheadVeggieBurgerExpandedMobile',\n    'expanded-veggie-menu-wrapper',\n    'expanded-veggie-menu',\n    //header wrapper needs to be in line with veggie menus to ensure it stands above various banners\n    'fullPageInteractiveHeaderWrapper',\n    // Mobile sticky appears below banners\n    'mobileSticky',\n    // Headers with sticky ads\n    'stickyAdWrapperLabsHeader',\n    'stickyAdWrapper',\n    'stickyAdWrapperNav',\n    // My Account dropdown in masthead - needs to be below stickyAdWrapper\n    'mastheadMyAccountDropdown',\n    // Edition selector in masthead - needs to be below stickyAdWrapper\n    'mastheadEditionDropdown',\n    // Edition selector in nav - needs to be below stickyAdWrapper\n    'editionDropdown',\n    // The content displayed by the Details component\n    'summaryDetails',\n    // Liveblog toast\n    'toast',\n    // Onwards Carousel (Related content etc)\n    'onwardsCarousel',\n    // Search link should be above The Guardian svg\n    'myAccountDropdown',\n    'searchHeaderLink',\n    'TheGuardian',\n    // The edition switcher banner needs to be below the Edition selector\n    // and the myAccount dropdown in the nav\n    'editionSwitcherBanner',\n    // Overlay for expandable marketing card (currently US only)\n    'expandableMarketingCardOverlay',\n    // Sticky table of contents element\n    'tableOfContents',\n    // Article headline (should be above main media)\n    'articleHeadline',\n    'immersiveBlackBox',\n    // Body\n    'bodyArea',\n    'rightColumnArea',\n    // Main media\n    'mainMedia',\n    // Nested links in cards should sit above the main card link\n    // See: https://www.sarasoueidan.com/blog/nested-links/\n    'card-nested-link',\n    'card-link',\n];\nexport const getZIndex = (name) => {\n    const index = indices.indexOf(name);\n    if (index === -1)\n        return -1; // indexOf returns -1 if there is no match\n    return indices.length - index; // reverse the indices: last item gets 1\n};\n","import { mutate } from 'swr';\nimport useSWRImmutable from 'swr/immutable';\nconst apiPromise = new Promise(() => { });\nconst key = 'ab-tests';\n/**\n * A hook which returns the AB Test Api when available,\n * or undefined otherwise.\n *\n * Leverages an immutable SWR to satisfy all requests to the\n * AB Core. As soon as the tests are available, all instances of\n * the useAB hook will render.\n */\nexport const useAB = () => {\n    const { data } = useSWRImmutable(key, () => apiPromise);\n    return data;\n};\nexport const setABTests = ({ api, participations }) => {\n    void mutate(key, { api, participations }, false);\n};\n","/**\n * Looks up a palette colour by name. Retrieves a CSS value for the specified\n * colour, for use in CSS declarations. See the examples for how this is\n * commonly used with our Emotion-based styles.\n *\n * @param a The name of a palette colour; for example `--headline-colour`.\n * @returns A CSS `var` function call; for example `var(--headline-colour)`.\n * @example\n * const styles = css`\n *   color: ${palette('--headline-colour')};\n *   background-color: ${palette('--headline-background-colour')};\n * `;\n */\nconst palette = (colour) => `var(${colour})`;\n// ----- Exports ----- //\nexport { palette };\n"],"names":["smallIllustrationStyles","css","from","phablet","leftCol","largeIllustrationStyles","BannersIllustration","_ref","type","styles","assetOrigin","useConfig","smallSrc","concat","largeSrc","_jsxs","_Fragment","children","_jsx","src","alt","fillBarStyles","palette","desktop","contentStyles","space","neutral","summaryStyles","contractedSummaryStyles","headingStyles","headlineBold17","wide","headlineBold20","kickerStyles","textSans15","textSans14","arrowStyles","detailsStyles","sectionStyles","subheadingStyles","paragraphStyles","ctaCalloutStyles","textSansBold14","imageTopStyles","name","imageBottomStyles","buttonStyles","textSansBold12","ExpandableMarketingCard","_ref2","guardianBaseURL","heading","kicker","isExpanded","setIsClosed","onClick","SvgCross","LinkButton","priority","size","href","cssOverrides","SvgChevronDownSingle","hideBannerStyles","stickyContainerStyles","getZIndex","absoluteContainerStyles","ExpandableMarketingCardSwipeable","setIsExpanded","abTestVariant","_useState","useState","_useState2","_slicedToArray","lastDownXCoord","setLastDownXCoord","_useState3","_useState4","lastDownYCoord","setLastDownYCoord","_useState5","_useState6","isDown","setIsDown","_useState7","_useState8","hasSwipedLeft","setHasSwipedLeft","_useState9","_useState10","topOfBody","setTopOfBody","_useState11","_useState12","shouldDisplayCard","setShouldDisplayCard","_useState13","_useState14","dragLeftDistance","setDragLeftDistance","useEffect","document","querySelector","getBoundingClientRect","top","isViewportBelowTopOfBody","observer","window","IntersectionObserver","entry","isIntersecting","rootMargin","observe","disconnect","getOphan","then","ophan","record","interaction","component","value","submitComponentEvent","componentType","id","action","abTest","variant","role","tabIndex","onKeyDown","event","key","onPointerDown","preventDefault","clientX","clientY","onPointerUp","thisXCoord","prevXCoord","pointerDownCoords","pointerUpCoords","_pointerDownCoords","_pointerUpCoords","lastUpXCoord","lastUpYCoord","Math","abs","isClick","onPointerMove","min","onTouchStart","variantFree","variantBubble","variantBillionaire","isNewUSUser","_ref3","_asyncToGenerator","_regeneratorRuntime","_callee","editionCookie","hasUserSelectedNonUSEdition","isNewUser","_context","prev","next","getLocaleCode","t0","sent","abrupt","getCookie","_getDailyArticleCount","_ref2$","dailyCount","getDailyArticleCount","Object","keys","length","count","stop","apply","arguments","ExpandableMarketingCardWrapper","_ref4","_useAB","isClosed","isApplicableUser","setIsApplicableUser","abTestAPI","isInVariantFree","isUserInVariant","isInVariantBubble","isInVariantBillionaire","getVariant","useAB","api","show","_getVariantCopy","Hide","when","breakpoint","whenToHide","el","until","DailyArticleCountKey","storage","local","get","history","Array","isArray","every","daily","isObject","day","Error","e","remove","getToday","floor","Date","now","incrementDailyArticleCount","_dailyArticleCount$","dailyArticleCount","today","unshift","cutOff","firstOldDayIndex","findIndex","splice","set","indices","index","indexOf","apiPromise","Promise","useSWRImmutable","data","setABTests","participations","mutate","colour"],"sourceRoot":""}