(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[1769],{71499:(e,t,n)=>{"use strict";n.d(t,{H:()=>R});var r,o=n(50484),i=n(24017),a=n(71653),c=n(81477),s=n(59648),u=n(95644),d=n(1954),l=n(67400);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(null,arguments)}const p=function(e){return l.createElement("svg",f({width:18,height:13,viewBox:"0 0 18 13"},e),r||(r=l.createElement("path",{d:"M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"})))};var v;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(null,arguments)}const g=function(e){return l.createElement("svg",h({width:36,height:23,viewBox:"0 0 36 23"},e),v||(v=l.createElement("path",{d:"M3.2 0l-3.2 3.3v16.4l3.3 3.3h18.7v-23h-18.8m30.4 1l-8.6 8v5l8.6 8h2.4v-21h-2.4"})))};var m=(0,i.css)(a.WuG,";line-height:135%;padding-top:6px;overflow-wrap:break-word;color:",(0,d.M)("--caption-text"),";"),y={name:"xagbzs",styles:"margin-bottom:6px"},b={name:"9tjjuq",styles:"padding-bottom:0.375rem"},w={name:"1gcz0h6",styles:"padding-bottom:2.5rem"},x=function(e){return(0,i.css)("position:absolute;left:0;right:0;bottom:0;background:rgba(18, 18, 18, 0.8);span{color:",(0,d.M)("--caption-overlay-text"),";font-size:0.75rem;line-height:1rem;}svg{fill:currentcolor;}color:",(0,d.M)("--caption-overlay-text"),";font-size:0.75rem;line-height:1rem;padding-top:0.375rem;padding-right:2.5rem;padding-left:0.75rem;",function(e){return e.display===u.Ns.Showcase&&e.design===u.vw.Review?w:b}(e),";flex-grow:1;min-height:2.25rem;")},k=(0,i.css)(c.HT.leftCol,"{width:140px;position:absolute;}",c.HT.wide,"{width:220px;}"),P=(0,i.css)(c.HT.leftCol,"{width:120px;position:absolute;}",c.HT.wide,"{width:184px;}"),A={name:"fp0jpu",styles:"padding-left:10px;padding-right:10px"},E=(0,i.css)(c.TG.desktop,"{",A,";}"),I=(0,i.css)("width:inherit;margin-left:",s.x[9],"px;",c.TG.wide,"{margin-left:20px;margin-right:20px;}",c.TG.mobileLandscape,"{margin-left:10px;margin-right:10px;}"),S=(0,i.css)(c.TG.leftCol,"{display:none;}"),T=(0,i.css)("fill:",(0,d.M)("--caption-text"),";margin-right:",s.x[1],"px;display:inline-block;position:relative;width:1em;vertical-align:baseline;::before{content:' ';display:block;padding-top:",72.22222222222221,"%;}svg{top:0px;right:0px;bottom:0px;left:0px;width:100%;position:absolute;height:100%;}"),j=(0,i.css)("width:1.1em;::before{padding-top:",63.888888888888886,"%;}"),M=(0,i.css)("a{color:",(0,d.M)("--caption-link"),";text-decoration:none;}a:hover{text-decoration:underline;}strong{font-weight:bold;}"),O=function(e){var t=e.format;return(0,o.jsx)("span",{css:[T,t.display===u.Ns.Immersive&&S],children:(0,o.jsx)(p,{})})},C=function(e){var t=e.format;return(0,o.jsx)("span",{css:[T,t.display===u.Ns.Immersive&&S,j],children:(0,o.jsx)(g,{})})},R=function(e){var t=e.captionText,n=e.format,r=e.padCaption,c=void 0!==r&&r,l=e.credit,f=e.displayCredit,p=void 0===f||f,v=e.shouldLimitWidth,h=void 0!==v&&v,g=e.isOverlaid,b=e.isLeftCol,w=e.mediaType,S=void 0===w?"Gallery":w,T=e.isMainMedia,j=void 0!==T&&T;if(!(null!=t&&t.trim()||l&&p))return null;var R=n.design===u.vw.LiveBlog||n.design===u.vw.DeadBlog,B=(0,o.jsxs)("figcaption",{css:[m,h&&k,g?x(n):y,j&&(R||"Video"===S)&&E,c&&A],"data-spacefinder-role":"inline",children:["Video"===S?(0,o.jsx)(C,{format:n}):(0,o.jsx)(O,{format:n}),!!t&&(0,o.jsx)("span",{css:M,dangerouslySetInnerHTML:{__html:t||""}},"caption"),!!l&&p&&" ".concat(l)]});return n.design===u.vw.PhotoEssay?n.theme===u.A$.Labs&&b?B:(0,o.jsxs)("figcaption",{css:[(0,i.css)(a.Ikj,";line-height:1.15;color:",j?(0,d.M)("--caption-photo-essay-main-media-text"):(0,d.M)("--caption-text"),";width:100%;margin-top:",s.x[3],"px;li:not(:first-child){margin-top:",s.x[3],"px;}li{padding-top:",s.x[2],"px;border-top:1px solid ",j?(0,d.M)("--caption-photo-essay-main-media-text"):(0,d.M)("--caption-text"),";}"),y,c&&A,h&&P,h&&I],"data-spacefinder-role":"inline",children:[!!t&&(0,o.jsx)("span",{css:M,dangerouslySetInnerHTML:{__html:t||""}},"caption"),!!l&&p&&" ".concat(l)]}):B}},53397:(e,t,n)=>{"use strict";n.d(t,{u:()=>f});var r=n(50484),o=n(24017),i=n(81477),a=n(50641),c=n(71029),s={small:{button:40,icon:32},large:{button:80,icon:72}},u={fill:a.M.neutral[100]},d=function(e){switch(e){case"jumbo":case"large":case"carousel":case"medium":case"feature":case"feature-large":return"large";case"small":return"small"}},l=function(e){return"left"===e||"right"===e?"small":"large"},f=function(e){var t,n,a=e.imageSize,f=e.imagePositionOnMobile;return(0,r.jsx)("div",{className:"play-icon",css:[(t=d(a),n=l(f),(0,o.css)("display:flex;align-items:center;justify-content:center;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background-color:rgba(18, 18, 18, 0.6);border-radius:50%;width:",s[n].button,"px;height:",s[n].button,"px;",i.HT.tablet,"{width:",s[t].button,"px;height:",s[t].button,"px;}svg{transform:translateX(1px);width:",s[n].icon,"px;height:",s[n].icon,"px;",i.HT.tablet,"{width:",s[t].icon,"px;height:",s[t].icon,"px;}}"))],children:(0,r.jsx)(c.v,{theme:u})})}},59626:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(50484),o=n(24017),i=function(e){var t=e.height,n=e.width,i=e.aspectRatio,a=e.children,c="".concat("5:4"===i?80:t/n*100,"%");return(0,r.jsx)("div",{css:(0,o.css)("position:relative;padding-bottom:",c,";&>iframe,&>video{width:100%;height:100%;position:absolute;top:0;left:0;}"),children:a})}},92610:(e,t,n)=>{"use strict";n.d(t,{L:()=>d,j:()=>l});var r=n(42376),o=n(50484),i=n(24017),a=n(59648),c=n(71653),s=n(25549),u=(0,i.css)("position:absolute;top:",a.x[2],"px;right:",a.x[2],"px;background-color:rgba(0, 0, 0, 0.7);width:fit-content;padding:",a.x[1],"px ",a.x[3],"px;border-radius:",a.x[3],"px;color:white;",c.rDY,";");function d(e){if("undefined"===(0,r.A)(e)||0===e)return"";var t=Number(e),n=Math.floor(t/3600),o=Math.floor(t%3600/60),i=Math.floor(t%3600%60),a=[];return n>0&&a.push(n),0===n&&o>0&&0===i?a.push("".concat(o,":00")):n>0&&o<10?a.push("0".concat(o)):a.push(o),i>0&&(i<10?a.push("0".concat(i)):a.push(i)),a.join(":")}var l=function(e){var t=e.mediaDuration,n=e.imagePositionOnDesktop,r=e.imagePositionOnMobile;return"left"===n?null:"left"===r?(0,o.jsx)(s.L,{until:"tablet",children:(0,o.jsx)("div",{css:u,children:(0,o.jsx)("p",{children:d(t)})})}):(0,o.jsx)("div",{css:u,children:(0,o.jsx)("p",{children:d(t)})})}},32676:(e,t,n)=>{"use strict";n.r(t),n.d(t,{YoutubeBlockComponent:()=>De});var r,o,i=n(18247),a=n(22820),c=n(31880),s=n(57820),u=n.n(s),d=n(50484),l=n(67400),f=n(66049),p=n(70204),v=n(71499),h=n(7693),g=n(36343),m=n(16346),y=n(65656),b=n(85918),w=n(55044),x=function(e){return function(t){(0,b.V5)("Web").then((function(n){var r={video:{id:"gu-video-youtube-".concat(e),eventType:"video:content:".concat(t)}};(0,m.Rm)("dotcom",{from:"YoutubeAtom event emitter web",id:e,event:r}),n.record(r)}))}},k=function(e){return function(t){var n=function(e){switch(e){case"cued":return g.MediaEvent.ready;case"play":return g.MediaEvent.play;case"25":return g.MediaEvent.percent25;case"50":return g.MediaEvent.percent50;case"75":return g.MediaEvent.percent75;case"end":return g.MediaEvent.end;default:return}}(t);if(!(0,y.b)(n)){var r={videoId:e,event:n};(0,m.Rm)("dotcom",{from:"YoutubeAtom event emitter apps",id:e,event:r}),(0,w.FA)().sendVideoEvent(r)}}},P=n(59626),A=n(24017),E=n(59648),I=n(71653),S=n(50641),T=n(81477),j=n(1954),M=n(53397),O=n(40669),C=n(32823),R=n(92610),B=n(84782),L=n(31731),Y=n(86248),V={name:"1989ovb",styles:"vertical-align:middle"},D=function(e){var t=e.image,n=e.alt,r=e.height,o=e.width,i=e.aspectRatio,a=(0,Y.Ip)((0,L.m)(t),[{breakpoint:B.f.mobile,width:465},{breakpoint:B.f.mobileLandscape,width:645},{breakpoint:B.f.phablet,width:620},{breakpoint:B.f.tablet,width:700},{breakpoint:B.f.desktop,width:620}],i),c=(0,Y.sP)(a);return(0,d.jsxs)("picture",{itemProp:"contentUrl",children:[(0,d.jsx)(Y.jp,{sources:a}),(0,d.jsx)("img",{alt:n,src:c.lowResUrl,height:r,width:o,css:V})]})},F={name:"15sodct",styles:"background-size:cover;background-position:49% 49%;background-repeat:no-repeat;text-align:center;height:100%;width:100%;position:absolute;max-height:100vh;cursor:pointer;border:0;padding:0;img{width:100%;height:100%;}.play-icon{transition:transform 300ms;}:focus .play-icon,:hover .play-icon{transform:translate(-50%, -50%) scale(1.15);}"},N=(0,A.css)("position:absolute;top:",E.x[2],"px;right:",E.x[2],"px;",I.rDY,";background-color:rgba(0, 0, 0, 0.7);color:",S.M.neutral[100],";border-radius:",E.x[3],"px;padding:0 6px;display:inline-flex;"),z={name:"1m8z51j",styles:":nth-of-type(n + 2){border-left:1px solid rgba(255, 255, 255, 0.5);}"},U=(0,A.css)("line-height:",E.x[4],"px;padding:",E.x[1],"px 6px;"),_=(0,A.css)("::before{content:'';width:9px;height:9px;border-radius:50%;background-color:",S.M.news[500],";display:inline-block;position:relative;margin-right:0.1875rem;}"),q=(0,A.css)("position:absolute;background:linear-gradient(\n\t\t180deg,\n\t\trgba(0, 0, 0, 0) 0%,\n\t\trgba(0, 0, 0, 0.7) 25%\n\t);width:100%;bottom:0;color:",S.M.neutral[100],";display:flex;flex-direction:column;align-items:flex-start;text-align:start;padding:",E.x[2],"px;padding-top:",E.x[9],"px;"),H=(0,A.css)(I.cYp,";",T.HT.tablet,"{",I.A5,";}"),W={name:"eivff4",styles:"display:none"},G=function(e){var t,n=e.uniqueId,r=e.overrideImage,o=e.posterImage,i=e.height,a=e.width,c=e.alt,s=e.duration,u=e.title,l=e.onClick,f=e.videoCategory,p=e.kicker,v=e.format,h=e.showTextOverlay,g=e.imageSize,m=e.imagePositionOnMobile,b=e.aspectRatio,w="youtube-overlay-".concat(n),x=!(0,y.b)(s)&&s>0,k=!!f||x,P="live"===f,A=null!=r?r:o,E="right"===m||"left"===m;return(0,d.jsx)(O.I,{format:v,children:(0,d.jsxs)("button",{"data-testid":w,onClick:l,css:F,"aria-label":u?"Play video: ".concat(u):"Play video",type:"button",children:[!!A&&(0,d.jsx)(D,{image:A,alt:c,height:i,width:a,aspectRatio:b}),k&&(0,d.jsxs)("div",{css:E?W:N,children:[!!f&&(0,d.jsx)("div",{css:z,children:(0,d.jsx)("div",{css:[U,P&&_],children:(t=f,t.charAt(0).toUpperCase()+t.slice(1))})}),!!x&&(0,d.jsx)("div",{css:z,children:(0,d.jsx)("div",{css:U,children:(0,R.L)(s)})})]}),(0,d.jsx)(M.u,{imageSize:g,imagePositionOnMobile:m}),h&&(0,d.jsxs)("div",{css:q,children:[!!p&&(0,d.jsx)(C.Y,{text:p,color:(0,j.M)("--youtube-overlay-kicker"),fontWeight:"bold"}),(0,d.jsx)("div",{css:H,children:u})]})]})})},K={name:"4jnj5z",styles:"width:100%;height:100%;position:absolute;top:0;left:0;display:flex;flex-grow:1;background-color:black"},$=function(e){var t=e.uniqueId,n="youtube-placeholder-".concat(t);return(0,d.jsx)("div",{"data-name":n,"data-testid":n,css:[K]})},Q=n(62335),X=n(74184),J=n(24755),Z=n(17950),ee=n(73745),te=n(58201),ne=n(7944),re=function(e){return(0,ne.k)(e).catch((function(t){(0,m.Rm)("dotcom","loadYouTubeAPI: failed to load script ".concat(e),t)}))},oe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((null===(e=window.YT)||void 0===e?void 0:e.Player)instanceof Function)return(0,m.Rm)("dotcom","loadYouTubeAPI: returning existing window.YT"),Promise.resolve(window.YT);var n=o||(o=new Promise((function(e){window.onYouTubeIframeAPIReady=function(){(0,m.Rm)("dotcom","loadYouTubeAPI: resolving YouTube API promise"),e(window.YT)}})));return function(){return r||(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?((0,m.Rm)("dotcom","loadYouTubeAPI: loading YouTube & IMA script"),r=Promise.all([re("https://www.youtube.com/iframe_api?ima=1"),re("https://imasdk.googleapis.com/js/sdkloader/ima3.js")])):((0,m.Rm)("dotcom","loadYouTubeAPI: loading YouTube script"),r=Promise.all([re("https://www.youtube.com/iframe_api")])),r)}(t).then((function(){return n}))};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,Q.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(){},se=function(){return(0,te.A)((function e(t){var n=t.id,r=t.youtubeOptions,o=t.onReadyListener,i=t.enableIma,a=t.imaAdsRequestCallback,c=void 0===a?ce:a,s=t.imaAdManagerListeners,u=void 0===s?ce:s;(0,ee.A)(this,e),(0,Q.A)(this,"playerPromise",void 0),(0,Q.A)(this,"player",void 0),this.playerPromise=this.setPlayer(n,r,o,i,c,u)}),[{key:"setPlayer",value:(e=(0,i.A)(u().mark((function e(t,n,r,o,i,a){var c,s,d=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(o);case 2:return c=e.sent,s=new Promise((function(e,s){try{var u,l;o?c.createPlayerForPublishers(t,i,{youtubeOptions:n},(function(t,n){d.player=t,a(n),r(),e({player:t,imaManager:n})})):(d.player=new c.Player(t,ae(ae({},n),{},{events:{onReady:r,onStateChange:null===(u=n.events)||void 0===u?void 0:u.onStateChange,onFullscreenToggled:null===(l=n.events)||void 0===l?void 0:l.onFullscreenToggled}})),e({player:d.player}))}catch(e){d.logError(e),s(e)}})),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)}))),function(t,n,r,o,i,a){return e.apply(this,arguments)})},{key:"logError",value:function(e){(0,m.Rm)("dotcom","YouTubePlayer failed to load: ".concat(e.message)),window.guardian.modules.sentry.reportError(e,"youtube-player")}},{key:"getPlayerState",value:function(){var e=this;return this.playerPromise.then((function(e){return e.player.getPlayerState()})).catch((function(t){return e.logError(t)}))}},{key:"playVideo",value:function(){var e=this;return this.playerPromise.then((function(e){e.player.playVideo()})).catch((function(t){return e.logError(t)}))}},{key:"pauseVideo",value:function(){var e=this;return this.playerPromise.then((function(e){e.player.pauseVideo()})).catch((function(t){return e.logError(t)}))}},{key:"stopVideo",value:function(){var e=this;return this.playerPromise.then((function(e){e.player.stopVideo()})).catch((function(t){return e.logError(t)}))}},{key:"removeEventListener",value:function(e,t){var n;null===(n=this.player)||void 0===n||n.removeEventListener(e,t)}}]);var e}();function ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return de(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,Q.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe="video:play",ve={name:"1b4920d",styles:"position:absolute;top:0;left:0;width:100%;height:100%"},he=function(e){return(0,A.css)("html{overflow:hidden;}iframe#",e,"{position:fixed;top:0;width:100vw;height:100vh;width:100svw;height:100svh;z-index:",(0,J.f)("youTubeFullscreen"),";}")},ge=function(){var e=(0,i.A)(u().mark((function e(t,n){var r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Apps"!==n){e.next=6;break}return e.next=3,(0,w.FA)().setFullscreen(!1);case 3:return r=e.sent,o=fe(fe({},t),{},{external_fullscreen:r?1:0}),e.abrupt("return",o);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(e){document.dispatchEvent(new CustomEvent(pe,{detail:{uniqueId:e}}))},ye=function(e,t,n,r){var o=e&&!e.disableAds,i=o&&e.adUnit?e.adUnit:"",a=o?e.customParams:{};return function(e,o){e.adTagUrl=(0,X.e)({adUnit:i,customParams:a,consentState:t,clientSideParticipations:n,isSignedIn:r}),o.useStyledNonLinearAds=!0,window.google&&(o.uiElements=[window.google.ima.UiElements.AD_ATTRIBUTION,window.google.ima.UiElements.COUNTDOWN])}},be=function(e){return function(t){window.google&&t.getAdsLoader().addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.AdsManagerLoaded,(function(){window.google&&t.getAdsManager().addEventListener(window.google.ima.AdEvent.Type.Started,(function(){me(e)}))}),!1)}},we=function(){var e=(0,i.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.Pq)();case 3:return t=e.sent,e.abrupt("return","SignedInWithCookies"===t.kind||"SignedInWithOkta"===t.kind);case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Error&&window.guardian.modules.sentry.reportError(e.t0,"youtube-atom-player-is-signed-in");case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),xe=function(e){var t=e.uniqueId,n=e.videoId,r=e.height,o=e.width,i=e.title,c=e.origin,s=e.eventEmitters,u=e.autoPlay,f=e.onReady,p=e.pauseVideo,v=e.deactivateVideo,h=e.enableAds,g=e.adTargeting,y=e.consentState,b=e.abTestParticipations,x=e.renderingTarget,k=(0,l.useRef)(),P=(0,l.useRef)({hasSentPlayEvent:!1,hasSent25Event:!1,hasSent50Event:!1,hasSent75Event:!1,hasSentEndEvent:!1}),E=(0,l.useState)(!1),I=(0,a.A)(E,2),S=I[0],T=I[1],j=(0,l.useState)(!1),M=(0,a.A)(j,2),O=M[0],C=M[1],R=(0,l.useState)(!1),B=(0,a.A)(R,2),L=B[0],Y=B[1],V=(0,l.useCallback)((function(){return T(!0)}),[]),D=(0,l.useRef)([]),F=(0,l.useRef)({}),N=(0,l.useRef)(),z="youtube-player-".concat(t);return(0,l.useEffect)((function(){if(!k.current){(0,m.Rm)("dotcom",{from:"YoutubeAtomPlayer initialise",videoId:n});var e=function(e,t,n){return function(){(0,m.Rm)("dotcom",{from:"YoutubeAtomPlayer onReady",videoId:e,msg:"Ready"}),t(),n()}}(n,f,V),r=function(e,t,n,r){return function(o){var i="YoutubeAtomPlayer onStateChange";(0,m.Rm)("dotcom",{from:i,videoId:e,event:o});var a=o.target;if(o.data===YT.PlayerState.PLAYING){if(me(t),n.hasSentPlayEvent){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"resume",event:o});var c,s=ue(r);try{for(s.s();!(c=s.n()).done;)(0,c.value)("resume")}catch(e){s.e(e)}finally{s.f()}}else{(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"start play",event:o});var u,d=ue(r);try{for(d.s();!(u=d.n()).done;)(0,u.value)("play")}catch(e){d.e(e)}finally{d.f()}n.hasSentPlayEvent=!0,setTimeout((function(){l()}),3e3)}var l=function(){var t=a.getCurrentTime(),c=a.getDuration();if(c&&t){var s=t/c*100;if(!n.hasSent25Event&&25<s){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"played 25%",event:o});var u,d=ue(r);try{for(d.s();!(u=d.n()).done;)(0,u.value)("25")}catch(e){d.e(e)}finally{d.f()}n.hasSent25Event=!0}if(!n.hasSent50Event&&50<s){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"played 50%",event:o});var f,p=ue(r);try{for(p.s();!(f=p.n()).done;)(0,f.value)("50")}catch(e){p.e(e)}finally{p.f()}n.hasSent50Event=!0}if(!n.hasSent75Event&&75<s){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"played 75%",event:o});var v,h=ue(r);try{for(h.s();!(v=h.n()).done;)(0,v.value)("75")}catch(e){h.e(e)}finally{h.f()}n.hasSent75Event=!0}return a.getPlayerState()!==YT.PlayerState.ENDED&&setTimeout((function(){return l()}),3e3),null}}}if(o.data===YT.PlayerState.PAUSED){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"pause",event:o});var f,p=ue(r);try{for(p.s();!(f=p.n()).done;)(0,f.value)("pause")}catch(e){p.e(e)}finally{p.f()}}if(o.data===YT.PlayerState.CUED){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"cued",event:o});var v,h=ue(r);try{for(h.s();!(v=h.n()).done;)(0,v.value)("cued")}catch(e){h.e(e)}finally{h.f()}n.hasSentPlayEvent=!1}if(o.data===YT.PlayerState.ENDED&&!n.hasSentEndEvent){(0,m.Rm)("dotcom",{from:i,videoId:e,msg:"ended",event:o});var g,y=ue(r);try{for(y.s();!(g=y.n()).done;)(0,g.value)("end")}catch(e){y.e(e)}finally{y.f()}n.hasSentEndEvent=!0,n.hasSentPlayEvent=!1}}}(n,t,P.current,s),o={id:z,youtubeOptions:{height:"100%",width:"100%",videoId:n,playerVars:{controls:1,fs:1,modestbranding:1,origin:c,playsinline:1,rel:0},embedConfig:{relatedChannels:[],adsConfig:{disableAds:!0},enableIma:h,disableRelatedVideos:h},events:{onStateChange:r,onFullscreenToggled:function(){"Apps"===x&&((0,m.Rm)("dotcom",{from:"YoutubeAtomPlayer fullscreen",videoId:n}),C((function(e){return!e})))}}},onReadyListener:e,enableIma:h},i=ge(o,x);Promise.allSettled([i,we()]).then((function(e){var n=(0,a.A)(e,2),r=n[0],i=n[1],c="fulfilled"===r.status?r.value:o,s="fulfilled"===i.status&&i.value;k.current=new se(h?fe(fe({},c),{},{imaAdsRequestCallback:ye(g,y,b,s),imaAdManagerListeners:be(t)}):c)}));var u=function(e){if(e.detail&&e.detail.uniqueId!==t){var n,r,o=null===(n=k.current)||void 0===n?void 0:n.getPlayerState();null==o||o.then((function(e){var t;e===YT.PlayerState.PLAYING&&(null===(t=k.current)||void 0===t||t.pauseVideo())})),null===(r=N.current)||void 0===r||r.pause(),v()}};document.addEventListener(pe,u),F.current[pe]=u,D.current.push({name:"onReady",listener:e},{name:"onStateChange",listener:r})}}),[b,g,u,y,h,s,v,r,z,f,c,V,x,t,n,o]),(0,l.useEffect)((function(){var e;S&&u&&((0,m.Rm)("dotcom",{from:"YoutubeAtomPlayer autoplay",videoId:n,msg:"Playing video"}),null===(e=k.current)||void 0===e||e.playVideo())}),[S,u,n]),(0,l.useEffect)((function(){var e;p&&(null===(e=k.current)||void 0===e||e.pauseVideo())}),[p]),(0,l.useEffect)((function(){"Apps"===x&&(0,w.FA)().setFullscreen(O).then((function(e){e&&Y(O)}))}),[O,x]),(0,l.useLayoutEffect)((function(){var e=D.current,t=F.current;return function(){var n,r=ue(e);try{for(r.s();!(n=r.n()).done;){var o,i=n.value;null===(o=k.current)||void 0===o||o.removeEventListener(i.name,i.listener)}}catch(e){r.e(e)}finally{r.f()}for(var c=0,s=Object.entries(t);c<s.length;c++){var u=(0,a.A)(s[c],2),d=u[0],l=u[1];document.removeEventListener(d,l)}}}),[]),(0,d.jsxs)(d.Fragment,{children:[L&&(0,d.jsx)(A.Global,{styles:he(z)}),(0,d.jsx)("div",{id:z,"data-testid":z,"data-atom-type":"youtube",title:i,css:h&&ve})]})},ke=n(6569),Pe=n(97584),Ae=n.n(Pe),Ee=n(88528),Ie=(0,A.css)("position:absolute;left:-36px;top:0;z-index:22;background-color:",S.M.neutral[7],";height:32px;width:32px;border-radius:50%;border:0;padding:0;cursor:pointer;display:none;justify-content:center;align-items:center;transition:transform 0.2s;&:hover{transform:scale(1.15);}svg{fill:",S.M.neutral[100],";}"),Se=function(e){return(0,A.css)("height:192px;position:relative;display:flex;justify-content:flex-end;padding-right:",e?"".concat(E.x[5],"px"):0,";",T.HT.phablet,"{height:349px;}")},Te=Ae()({tablet:!0}),je=function(e){var t=e.uniqueId,n=e.videoId,r=e.eventEmitters,o=e.shouldStick,i=e.setPauseVideo,c=e.isActive,s=e.isMainMedia,u=e.children,f=e.isClosed,p=e.setIsClosed,v=e.shouldPauseOutOfView,g=(0,l.useState)(!1),y=(0,a.A)(g,2),w=y[0],x=y[1],k=(0,l.useState)(!1),P=(0,a.A)(k,2),E=P[0],I=P[1],S=(0,l.useState)(Te),j=(0,a.A)(S,2),M=j[0],O=j[1],C=(0,h.U)().renderingTarget,R=(0,Ee.E)({threshold:.5,repeat:!0,debounce:!0}),B=(0,a.A)(R,2),L=B[0],Y=B[1],V=function(){x(!1),I(!1),i(!0),p(!0),(0,m.Rm)("dotcom",{from:"YoutubeAtom handleCloseClick",videoId:n,msg:"Close"}),(0,b.u_)({component:{componentType:"STICKY_VIDEO",id:n},action:"CLOSE"},C)},D=function(e){"Escape"===e.key&&V()};(0,l.useEffect)((function(){return window.addEventListener("keydown",D),function(){return window.removeEventListener("keydown",D)}})),(0,l.useEffect)((function(){o&&x(c&&!L&&!f)}),[L,c,o,f]),(0,l.useEffect)((function(){!o&&v&&i(c&&!L&&!f)}),[L,o,c,v,f,i]),(0,l.useEffect)((function(){w&&!E&&(I(!0),(0,m.Rm)("dotcom",{from:"YoutubeAtom stick useEffect",videoId:n,msg:"Stick"}),(0,b.u_)({component:{componentType:"STICKY_VIDEO",id:n},action:"STICK"},C))}),[w,E,n,r,C]),(0,l.useEffect)((function(){O(Te&&w)}),[w]);var F,N,z=!M&&Te;return(0,d.jsx)("div",{ref:Y,css:w&&Se(s),"data-testid":"youtube-sticky-".concat(t),"data-is-sticky":w,children:(0,d.jsxs)("div",{css:w&&(N=z,(0,A.css)("@keyframes fade-in-up{from{transform:translateY(100%);opacity:0;}to{transform:translateY(0%);opacity:1;}}position:fixed;bottom:20px;width:215px;z-index:21;animation:fade-in-up 1s ease both;",T.HT.tablet,"{width:300px;}figcaption{display:none;}button{display:",N?"flex":"none",";}&:hover button{display:flex;}")),children:[u,w&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{css:(F=M,(0,A.css)("position:absolute;top:-4px;bottom:0;left:-",37,"px;width:",37,"px;&:hover button{display:flex;}width:",F?"calc(100% + ".concat(37,"px)"):"".concat(37,"px"),";")),onClick:function(){return O(!1)},onKeyDown:function(){return O(!1)},role:"button",tabIndex:0}),(0,d.jsx)("button",{css:Ie,onClick:V,"data-testid":"youtube-sticky-close-".concat(t),type:"button",children:(0,d.jsx)(ke.F,{size:"medium"})})]})]})})},Me=function(e){var t,n=e.atomId,r=e.videoId,o=e.uniqueId,i=e.overrideImage,s=e.posterImage,u=e.adTargeting,f=e.consentState,p=e.height,v=void 0===p?259:p,h=e.width,g=void 0===h?460:h,m=e.alt,y=e.title,b=e.duration,w=e.origin,x=e.eventEmitters,k=e.shouldStick,A=e.isMainMedia,E=e.abTestParticipations,I=e.videoCategory,S=e.kicker,T=e.format,j=e.shouldPauseOutOfView,M=void 0!==j&&j,O=e.showTextOverlay,C=void 0!==O&&O,R=e.imageSize,B=e.imagePositionOnMobile,L=e.renderingTarget,Y=e.aspectRatio,V=(0,l.useState)(!1),D=(0,a.A)(V,2),F=D[0],N=D[1],z=(0,l.useState)(!1),U=(0,a.A)(z,2),_=U[0],q=U[1],H=(0,l.useState)(!1),W=(0,a.A)(H,2),K=W[0],Q=W[1],X=(0,l.useState)(!1),J=(0,a.A)(X,2),Z=J[0],ee=J[1],te=(0,l.useState)(!1),ne=(0,a.A)(te,2),re=ne[0],oe=ne[1],ie=!!u&&!u.disableAds&&!!f&&f.canTarget,ae=[function(e){switch(e){case"play":case"resume":oe(!1),ee(!1),Q(!0);break;case"end":case"cued":Q(!1)}}].concat((0,c.A)(x)),ce=!!(null!=i?i:s),se=ce&&!F,ue=(!ce||F)&&!_;t=!ce||!!F;var de=(0,l.useCallback)((function(){return q(!0)}),[]);return(0,d.jsx)("div",{"data-component":"youtube-atom","data-atom-id":n,"data-video-id":r,"data-video-unique-id":o,children:(0,d.jsx)(je,{uniqueId:o,videoId:r,shouldStick:k,isActive:K,eventEmitters:x,setPauseVideo:oe,isMainMedia:A,isClosed:Z,setIsClosed:ee,shouldPauseOutOfView:M,children:(0,d.jsxs)(P.h,{height:v,width:g,aspectRatio:Y,children:[t&&f&&u&&(0,d.jsx)(xe,{videoId:r,uniqueId:o,height:v,width:g,title:y,origin:w,eventEmitters:ae,autoPlay:ce,onReady:de,pauseVideo:re,deactivateVideo:function(){Q(!1)},enableAds:ie,adTargeting:u,consentState:f,abTestParticipations:E,renderingTarget:L}),se&&(0,d.jsx)(G,{uniqueId:o,overrideImage:i,posterImage:s,height:v,width:g,alt:m,duration:b,title:y,onClick:function(){return N(!0)},videoCategory:I,kicker:S,format:T,showTextOverlay:C,imageSize:R,imagePositionOnMobile:B,aspectRatio:Y}),ue&&(0,d.jsx)($,{uniqueId:o})]})})})},Oe=n(74123),Ce=function(e){return e?(0,A.css)("height:0px;position:relative;background-image:url(",e,");background-size:cover;background-position:49% 49%;background-repeat:no-repeat;padding-bottom:56%;color:",S.M.neutral[100],";background-color:",S.M.neutral[20],";"):void 0},Re=(0,A.css)("display:flex;flex-direction:row;align-items:center;padding-top:",E.x[4],"px;padding-bottom:",E.x[4],"px;padding-left:",E.x[1],"px;padding-right:",E.x[12],"px;color:",S.M.neutral[100],";background-color:",S.M.neutral[20],";"),Be=(0,A.css)("padding-right:",E.x[1],"px;svg{width:",E.x[12],"px;height:",E.x[12],"px;fill:",S.M.neutral[100],";}"),Le={name:"1ya94k8",styles:"margin-top:16px;margin-bottom:16px"},Ye=function(e){var t=e.format,n=e.hideCaption,r=e.isMainMedia,o=e.mediaTitle,i=e.overrideImage;return(0,d.jsxs)("figure",{css:Le,children:[(0,d.jsx)("div",{css:Ce(i),children:(0,d.jsxs)("div",{css:Re,children:[(0,d.jsx)("div",{css:Be,children:(0,d.jsx)(Oe.T,{})}),(0,d.jsx)("p",{css:(0,A.css)(I.BTt," line-height:1.15;"),children:"This video has been removed. This could be because it launched early, our rights have expired, there was a legal issue, or for another reason."})]})}),!n&&(0,d.jsx)(v.H,{captionText:null!=o?o:"",format:t,displayCredit:!1,mediaType:"Video",isMainMedia:r})]})},Ve={disableAds:!0},De=function(e){var t,r,o,s,g=e.id,m=e.assetId,y=e.index,b=e.mediaTitle,w=e.altText,P=e.format,A=e.hideCaption,E=e.overrideImage,I=e.posterImage,S=void 0===I?[]:I,T=e.expired,j=e.isMainMedia,M=e.height,O=void 0===M?259:M,C=e.width,R=void 0===C?460:C,B=e.duration,L=e.origin,Y=e.stickyVideos,V=e.kickerText,D=e.pauseOffscreenVideo,F=void 0!==D&&D,N=e.showTextOverlay,z=e.imageSize,U=void 0===z?"large":z,_=e.imagePositionOnMobile,q=void 0===_?"none":_,H=e.enableAds,W=e.aspectRatio,G=(0,l.useState)(void 0),K=(0,a.A)(G,2),$=K[0],Q=K[1],X=(0,p.k)(B),J=(0,h.U)().renderingTarget,Z=(0,f.H)(),ee=null!==(t=null==Z?void 0:Z.participations)&&void 0!==t?t:{},te="".concat(m,"-").concat(y);return(0,l.useEffect)((function(){if("Web"===J){var e=function(){var e=(0,i.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2987).then(n.bind(n,2987));case 2:(0,e.sent.onConsentChange)((function(e){Q(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch((function(e){window.guardian.modules.sentry.reportError(e instanceof Error?e:new Error("Error: unknown"),"youtube-consent")}))}"Apps"===J&&Q({canTarget:!1,framework:"tcfv2"})}),[J]),T?(0,d.jsx)(Ye,{format:P,hideCaption:A,isMainMedia:j,mediaTitle:b,overrideImage:E}):(0,d.jsxs)("div",{"data-chromatic":"ignore",children:[(0,d.jsx)(Me,{atomId:g,videoId:m,uniqueId:te,overrideImage:E,posterImage:null===(s=S,r=(0,c.A)(s).sort((function(e,t){return e.width-t.width})).pop())||void 0===r?void 0:r.url,alt:null!==(o=null!=w?w:b)&&void 0!==o?o:"",adTargeting:H&&"Web"===J?X:Ve,consentState:$,height:O,width:R,title:b,duration:B,eventEmitters:"Web"===J?[x(g)]:[k(g)],format:P,origin:L,shouldStick:"Web"===J&&Y,isMainMedia:j,abTestParticipations:ee,kicker:V,shouldPauseOutOfView:F,showTextOverlay:N,imageSize:U,imagePositionOnMobile:q,renderingTarget:J,aspectRatio:W}),!A&&(0,d.jsx)(v.H,{captionText:null!=b?b:"",format:P,displayCredit:!1,mediaType:"Video",isMainMedia:j})]})}},55044:(e,t,n)=>{"use strict";n.d(t,{OA:()=>z,IC:()=>Z,GR:()=>F,QF:()=>re,Dq:()=>V,yY:()=>$,_5:()=>ie,ud:()=>te,U:()=>_,yV:()=>H,LE:()=>G,FA:()=>X});var r=n(83551),o=n(555),i=n(16873),a=n(40771),c=n(72910),s=n(46365),u=n(43019),d=(n(53274),n(81449)),l=(n(79907),n(72031)),f=n(69139),p=n(30316),v=n(435),h=n(65656),g=n(73745),m=n(58201),y=n(69584),b=n(56318),w=n(8433),x=n(62335),k=n(13213),P=n(14611);function A(e,t,n,r){var o=(0,P.A)((0,b.A)(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function E(e,t,n){return t=(0,b.A)(t),(0,y.A)(e,I()?Reflect.construct(t,n||[],(0,b.A)(e).constructor):t.apply(e,n))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}var S=function(e){function t(e,n){var r;return(0,g.A)(this,t),r=E(this,t,[e]),(0,x.A)(r,"serviceName",void 0),r.serviceName=n,r}return(0,w.A)(t,e),(0,m.A)(t,[{key:"writeMessageBegin",value:function(e,n,r){n===k.MessageType.CALL||n===k.MessageType.ONEWAY?A(t,"writeMessageBegin",this,3)([this.serviceName+t.separator+e,n,r]):A(t,"writeMessageBegin",this,3)([e,n,r])}}])}(function(e){function t(e){var n;return(0,g.A)(this,t),n=E(this,t,[e.getTransport()]),(0,x.A)(n,"concreteProtocol",void 0),n.concreteProtocol=e,n}return(0,w.A)(t,e),(0,m.A)(t,[{key:"getTransport",value:function(){return this.concreteProtocol.getTransport()}},{key:"flush",value:function(){return this.concreteProtocol.flush()}},{key:"writeMessageBegin",value:function(e,t,n){return this.concreteProtocol.writeMessageBegin(e,t,n)}},{key:"writeMessageEnd",value:function(){return this.concreteProtocol.writeMessageEnd()}},{key:"writeStructBegin",value:function(e){return this.concreteProtocol.writeStructBegin(e)}},{key:"writeStructEnd",value:function(){return this.concreteProtocol.writeStructEnd()}},{key:"writeFieldBegin",value:function(e,t,n){return this.concreteProtocol.writeFieldBegin(e,t,n)}},{key:"writeFieldEnd",value:function(){return this.concreteProtocol.writeFieldEnd()}},{key:"writeFieldStop",value:function(){return this.concreteProtocol.writeFieldStop()}},{key:"writeMapBegin",value:function(e,t,n){return this.concreteProtocol.writeMapBegin(e,t,n)}},{key:"writeMapEnd",value:function(){return this.concreteProtocol.writeMapEnd()}},{key:"writeListBegin",value:function(e,t){return this.concreteProtocol.writeListBegin(e,t)}},{key:"writeListEnd",value:function(){return this.concreteProtocol.writeListEnd()}},{key:"writeSetBegin",value:function(e,t){return this.concreteProtocol.writeSetBegin(e,t)}},{key:"writeSetEnd",value:function(){return this.concreteProtocol.writeSetEnd()}},{key:"writeBool",value:function(e){return this.concreteProtocol.writeBool(e)}},{key:"writeByte",value:function(e){return this.concreteProtocol.writeByte(e)}},{key:"writeI16",value:function(e){return this.concreteProtocol.writeI16(e)}},{key:"writeI32",value:function(e){return this.concreteProtocol.writeI32(e)}},{key:"writeI64",value:function(e){return this.concreteProtocol.writeI64(e)}},{key:"writeDouble",value:function(e){return this.concreteProtocol.writeDouble(e)}},{key:"writeString",value:function(e){return this.concreteProtocol.writeString(e)}},{key:"writeBinary",value:function(e){return this.concreteProtocol.writeBinary(e)}},{key:"readMessageBegin",value:function(){return this.concreteProtocol.readMessageBegin()}},{key:"readMessageEnd",value:function(){return this.concreteProtocol.readMessageEnd()}},{key:"readStructBegin",value:function(){return this.concreteProtocol.readStructBegin()}},{key:"readStructEnd",value:function(){return this.concreteProtocol.readStructEnd()}},{key:"readFieldBegin",value:function(){return this.concreteProtocol.readFieldBegin()}},{key:"readFieldEnd",value:function(){return this.concreteProtocol.readFieldEnd()}},{key:"readMapBegin",value:function(){return this.concreteProtocol.readMapBegin()}},{key:"readMapEnd",value:function(){return this.concreteProtocol.readMapEnd()}},{key:"readListBegin",value:function(){return this.concreteProtocol.readListBegin()}},{key:"readListEnd",value:function(){return this.concreteProtocol.readListEnd()}},{key:"readSetBegin",value:function(){return this.concreteProtocol.readSetBegin()}},{key:"readSetEnd",value:function(){return this.concreteProtocol.readSetEnd()}},{key:"readBool",value:function(){return this.concreteProtocol.readBool()}},{key:"readByte",value:function(){return this.concreteProtocol.readByte()}},{key:"readI16",value:function(){return this.concreteProtocol.readI16()}},{key:"readI32",value:function(){return this.concreteProtocol.readI32()}},{key:"readI64",value:function(){return this.concreteProtocol.readI64()}},{key:"readDouble",value:function(){return this.concreteProtocol.readDouble()}},{key:"readBinary",value:function(){return this.concreteProtocol.readBinary()}},{key:"readString",value:function(){return this.concreteProtocol.readString()}},{key:"skip",value:function(e){return this.concreteProtocol.skip(e)}}])}(k.TProtocol));function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n){return t=(0,b.A)(t),(0,y.A)(e,M()?Reflect.construct(t,n||[],(0,b.A)(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function O(e){window.android?window.android.postMessage(e.data,e.connectionId):window.webkit?window.webkit.messageHandlers.iOSWebViewMessage.postMessage(e):console.warn("No native APIs available")}(0,x.A)(S,"separator",":");var C=1,R=function(){return"connection-".concat(C++)},B=function(e){function t(e,n){var r,o;return(0,g.A)(this,t),r=j(this,t,[e,n]),(0,x.A)(r,"connectionId",R()),(0,x.A)(r,"promises",[]),(0,x.A)(r,"outBuffer",[]),"undefined"!=typeof window&&(window.nativeConnections=null!==(o=window.nativeConnections)&&void 0!==o?o:{},window.nativeConnections[r.connectionId]=r),r}return(0,w.A)(t,e),(0,m.A)(t,[{key:"reset",value:function(e){if(e===this.connectionId&&window.nativeConnections){console.warn("Reseting connection "+e),delete window.nativeConnections[this.connectionId];var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.promises);try{for(n.s();!(t=n.n()).done;)t.value.reject(new k.TApplicationException(k.TApplicationExceptionType.UNKNOWN,"Timeout error"))}catch(e){n.e(e)}finally{n.f()}this.promises=[],this.connectionId=R(),window.nativeConnections[this.connectionId]=this}}},{key:"receive",value:function(e){var t=this.promises.shift();if(t){clearTimeout(t.timeoutId);var n=Buffer.from(e.data,"base64");t.resolve(n)}this.sendNextMessage()}},{key:"sendNextMessage",value:function(){var e=this.outBuffer.shift();e&&(console.log("Sending next message"),O(e))}},{key:"send",value:function(e){var t=this.connectionId,n=this;return new Promise((function(r,o){n.promises.push({resolve:r,reject:o,timeoutId:setTimeout((function(){n.reset(t)}),3e4)});var i={data:e.toString("base64"),connectionId:t};1===n.promises.length?(console.log("Sending message immediately"),O(i)):(console.log("Queing message because others in flight"),n.outBuffer.push(i))}))}}])}(k.ThriftConnection);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffered",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"compact",r=function(t){function r(t){var o;return(0,g.A)(this,r),j(this,r,[new((0,k.getProtocol)(n))(t),null!==(o=e.serviceName)&&void 0!==o?o:""])}return(0,w.A)(r,t),(0,m.A)(r)}(S),o=new B((0,k.getTransport)(t),r);return new e(o)}var Y=void 0,V=function(){return(0,h.b)(Y)&&(Y=L(c.Client,"buffered","compact")),Y},D=void 0,F=function(){return(0,h.b)(D)&&(D=L(i.Client,"buffered","compact")),D},N=void 0,z=function(){return N||(N=L(r.Client,"buffered","compact")),N},U=void 0,_=function(){return U||(U=L(l.Client,"buffered","compact")),U},q=void 0,H=function(){return q||(q=L(f.Client,"buffered","compact")),q},W=void 0,G=function(){return W||(W=L(p.Client,"buffered","compact")),W},K=void 0,$=function(){return K||(K=L(s.Client,"buffered","compact")),K},Q=void 0,X=function(){return Q||(Q=L(v.Client,"buffered","compact")),Q},J=void 0,Z=function(){return J||(J=L(o.Client,"buffered","compact")),J},ee=void 0,te=function(){return ee||(ee=L(d.Client,"buffered","compact")),ee},ne=void 0,re=function(){return ne||(ne=L(a.Client,"buffered","compact")),ne},oe=void 0,ie=function(){return oe||(oe=L(u.Client,"buffered","compact")),oe}},31731:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});var r=function(e){var t=new URL(e),n=["/img/media/","/img/static/","/img/uploads/"].find((function(e){return t.pathname.startsWith(e)}));if("i.guim.co.uk"===t.hostname&&n){var r=t.pathname.replace(n,"");switch(n){case"/img/media/":return"https://media.guim.co.uk/".concat(r);case"/img/static/":return"https://static.guim.co.uk/".concat(r);case"/img/uploads/":return"https://uploads.guim.co.uk/".concat(r)}}return e}},66049:(e,t,n)=>{"use strict";n.d(t,{H:()=>c,z:()=>s});var r=n(29273),o=n(53994),i=new Promise((function(){})),a="ab-tests",c=function(){return(0,o.A)(a,(function(){return i})).data},s=function(e){var t=e.api,n=e.participations;(0,r.Tk)(a,{api:t,participations:n},!1)}},70204:(e,t,n)=>{"use strict";n.d(t,{T:()=>u,k:()=>s});var r=n(16346),o=n(29273),i=n(53994),a="ad-targeting",c=new Promise((function(){})),s=function(e){var t=(0,i.A)(a,(function(){return c})).data;return t&&!t.disableAds&&"number"==typeof e&&(t.customParams.vl=e,(0,r.Rm)("commercial","ðŸŽ¯ Ad Targeting â€“ video length (vl) overriden to ".concat(e))),t},u=function(e){(0,o.Tk)(a,e,!1)}},88528:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var r=n(22820),o=n(44165),i=n.n(o),a=n(67400),c=function(e){var t,n=(0,a.useState)(!1),o=(0,r.A)(n,2),c=o[0],s=o[1],u=(0,a.useState)(null!==(t=e.node)&&void 0!==t?t:null),d=(0,r.A)(u,2),l=d[0],f=d[1],p=(0,a.useRef)(null),v=(0,a.useCallback)((function(t){var n=(0,r.A)(t,1)[0];n&&(n.isIntersecting?s(!0):e.repeat&&s(!1))}),[e.repeat]),h=e.debounce?i()(v,200):v;return(0,a.useEffect)((function(){e.node&&f(e.node)}),[e.node]),(0,a.useEffect)((function(){if(l&&"IntersectionObserver"in window)return p.current=new window.IntersectionObserver(h,e),p.current.observe(l),function(){var e;return null===(e=p.current)||void 0===e?void 0:e.disconnect()}}),[l,e,h]),(0,a.useEffect)((function(){var t;!e.repeat&&c&&(null===(t=p.current)||void 0===t||t.disconnect())}),[c,e.repeat]),[c,f]}},50150:()=>{}}]);
//# sourceMappingURL=1769.client.web.legacy.79371c9f1e42cb2bb10f.js.map