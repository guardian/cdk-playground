"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[2695],{79003:(e,t,n)=>{n.d(t,{A:()=>a});var o,i=n(67400);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(null,arguments)}const a=function(e){return i.createElement("svg",l({width:16,height:16,viewBox:"0 0 16 16"},e),o||(o=i.createElement("path",{d:"M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z"})))}},80403:(e,t,n)=>{n.r(t),n.d(t,{CommentCount:()=>g});var o=n(50484),i=n(24017),l=n(65656),a=n(71653),r=n(81477),d=n(75279),f=n(230),c=n(1954),s=n(79003),u=(0,i.css)("display:flex;align-self:flex-end;flex-direction:column;",a.NA0,";font-weight:bold;color:",(0,c.M)("--comment-count-fill"),";padding-top:5px;",r.TG.desktop,"{color:",(0,c.M)("--comment-count-mobile-fill"),";}"),m={name:"jd3ve2",styles:"height:15px;margin:0;text-align:right;margin-bottom:-2px;svg{height:18px;width:18px;}"},b=(0,i.css)("fill:",(0,c.M)("--comment-count-fill"),";",r.TG.desktop,"{fill:",(0,c.M)("--comment-count-mobile-fill"),";}"),p=(0,i.css)("display:block;",r.Tq.leftCol.and.wide,"{display:none;}"),h=(0,i.css)("display:none;",r.Tq.leftCol.and.wide,"{display:block;}"),v={name:"1xytc30",styles:"color:inherit;text-decoration:none;:hover{text-decoration:underline;}:visited{color:inherit;}"},g=function(e){var t=e.discussionApiUrl,n=e.shortUrlId,i=(0,f.e_)(t,n);if((0,l.b)(i))return null;var a=(0,d.B)(i),r=a.short,c=a.long;return(0,o.jsx)("data",{css:u,"data-testid":"comment-counts",value:"".concat(c," comments on this article"),children:(0,o.jsxs)("a",{href:"#comments",css:v,"aria-label":"".concat(r," Comments"),children:[(0,o.jsx)("div",{css:m,children:(0,o.jsx)(s.A,{css:b})}),(0,o.jsx)("div",{"data-testid":"long-comment-count",css:p,"aria-hidden":"true",children:c}),(0,o.jsx)("div",{"data-testid":"short-comment-count",css:h,"aria-hidden":"true",children:r})]})})}},75279:(e,t,n)=>{n.d(t,{B:()=>i});var o=n(65656),i=function(e){if((0,o.b)(e))return{short:"…",long:"…"};if(0===e)return{short:"0",long:"0"};var t=Math.floor(e),n=Intl.NumberFormat("en-GB").format(t);return{short:t>1e4?"".concat(Math.round(t/1e3),"k"):t.toString(),long:n}}},73556:(e,t,n)=>{n.d(t,{g:()=>a});var o=n(65656),i=n(29273);function l(e){if(!e.ok)throw Error(e.statusText||"useApi | An api call returned HTTP status ".concat(e.status));return e}var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=(0,i.Ay)(e,function(e){return function(t){return fetch(t,e).then(l).then((function(e){return e.json()}))}}(n),t),r=a.data,d=a.error;return{data:r,error:d,loading:!!e&&(0,o.b)(d)&&(0,o.b)(r)}}},230:(e,t,n)=>{n.d(t,{e_:()=>u,uz:()=>m,z6:()=>s});var o=n(22820),i=n(31880),l=n(76720),a=n(90760),r=n(67400),d=n(73556);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var c,s="data-discussion-id",u=function(e,t){var n=(0,r.useState)(),f=(0,o.A)(n,2),u=f[0],m=f[1];(0,r.useEffect)((function(){var n;null!==(n=c)&&void 0!==n||(c=new Set((0,i.A)(document.querySelectorAll("[".concat(s,"]"))).map((function(e){return e.getAttribute(s)})).filter(l.R))),c.add(t);var o="".concat(e,"/getCommentCounts?").concat(new URLSearchParams({"short-urls":(0,i.A)(c).sort().join(",")}).toString());m(o)}),[e,t]);var b=(0,d.g)(u).data,p=(0,a.G)(b)?b[t]:void 0;return"number"==typeof p?p:void 0},m=function(e){if(c){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw l}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;c.add(o)}}catch(e){n.e(e)}finally{n.f()}}}},1954:(e,t,n)=>{n.d(t,{M:()=>o});var o=function(e){return"var(".concat(e,")")}},84782:(e,t,n)=>{n.d(t,{f:()=>o});var o={desktop:980,leftCol:1140,mobile:320,mobileLandscape:480,mobileMedium:375,phablet:660,tablet:740,wide:1300}},81477:(e,t,n)=>{n.d(t,{HT:()=>r,TG:()=>d,Tq:()=>f});var o=n(84782),i=function(e){return"@media (min-width: ".concat("".concat(e,"px"),")")},l=function(e){return"@media (max-width: ".concat("".concat(e-.1,"px"),")")},a=function(e,t){return"@media (min-width: ".concat("".concat(e,"px"),") and (max-width: ","".concat(t-.1,"px"),")")},r={mobile:i(o.f.mobile),mobileMedium:i(o.f.mobileMedium),mobileLandscape:i(o.f.mobileLandscape),phablet:i(o.f.phablet),tablet:i(o.f.tablet),desktop:i(o.f.desktop),leftCol:i(o.f.leftCol),wide:i(o.f.wide)},d={mobile:l(o.f.mobile),mobileMedium:l(o.f.mobileMedium),mobileLandscape:l(o.f.mobileLandscape),phablet:l(o.f.phablet),tablet:l(o.f.tablet),desktop:l(o.f.desktop),leftCol:l(o.f.leftCol),wide:l(o.f.wide)},f={mobile:{and:{mobileMedium:a(o.f.mobile,o.f.mobileMedium),mobileLandscape:a(o.f.mobile,o.f.mobileLandscape),phablet:a(o.f.mobile,o.f.phablet),tablet:a(o.f.mobile,o.f.tablet),desktop:a(o.f.mobile,o.f.desktop),leftCol:a(o.f.mobile,o.f.leftCol),wide:a(o.f.mobileMedium,o.f.wide)}},mobileMedium:{and:{mobileLandscape:a(o.f.mobileMedium,o.f.mobileLandscape),phablet:a(o.f.mobileMedium,o.f.phablet),tablet:a(o.f.mobileMedium,o.f.tablet),desktop:a(o.f.mobileMedium,o.f.desktop),leftCol:a(o.f.mobileMedium,o.f.leftCol),wide:a(o.f.mobileMedium,o.f.wide)}},mobileLandscape:{and:{phablet:a(o.f.mobileLandscape,o.f.phablet),tablet:a(o.f.mobileLandscape,o.f.tablet),desktop:a(o.f.mobileLandscape,o.f.desktop),leftCol:a(o.f.mobileLandscape,o.f.leftCol),wide:a(o.f.mobileLandscape,o.f.wide)}},phablet:{and:{tablet:a(o.f.phablet,o.f.tablet),desktop:a(o.f.phablet,o.f.desktop),leftCol:a(o.f.phablet,o.f.leftCol),wide:a(o.f.phablet,o.f.wide)}},tablet:{and:{desktop:a(o.f.tablet,o.f.desktop),leftCol:a(o.f.tablet,o.f.leftCol),wide:a(o.f.tablet,o.f.wide)}},desktop:{and:{leftCol:a(o.f.desktop,o.f.leftCol),wide:a(o.f.desktop,o.f.wide)}},leftCol:{and:{wide:a(o.f.leftCol,o.f.wide)}}}}}]);
//# sourceMappingURL=CommentCount-importable.client.web.legacy.94534540f7907eb42197.js.map