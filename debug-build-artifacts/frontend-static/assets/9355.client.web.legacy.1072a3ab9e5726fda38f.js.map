{"version":3,"file":"9355.client.web.legacy.1072a3ab9e5726fda38f.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/articleCountOptOut.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/shared/ArticleCountOptOutOverlay.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/shared/ArticleCountOptOutPopup.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/replaceArticleCount.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/tracking.ts"],"sourcesContent":["/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/shared/helpers/articleCountOptOut.ts\n */\nimport { getCookie, removeCookie, setCookie, storage } from '@guardian/libs';\nconst ARTICLE_COUNT_OPT_OUT_COOKIE = {\n    name: 'gu_article_count_opt_out',\n    daysToLive: 90,\n};\nconst DAILY_ARTICLE_COUNT_STORAGE_KEY = 'gu.history.dailyArticleCount';\nconst WEEKLY_ARTICLE_COUNT_STORAGE_KEY = 'gu.history.weeklyArticleCount';\nconst ARTICLES_THIS_WEEK_STORAGE_KEY = 'gu.history.articleCountsThisWeek';\nexport const addArticleCountOptOutCookie = () => setCookie({\n    name: ARTICLE_COUNT_OPT_OUT_COOKIE.name,\n    value: new Date().getTime().toString(),\n    daysToLive: ARTICLE_COUNT_OPT_OUT_COOKIE.daysToLive,\n});\nexport const removeArticleCountOptOutCookie = () => removeCookie({ name: ARTICLE_COUNT_OPT_OUT_COOKIE.name });\nexport const removeArticleCountFromLocalStorage = () => {\n    storage.local.remove(DAILY_ARTICLE_COUNT_STORAGE_KEY);\n    storage.local.remove(WEEKLY_ARTICLE_COUNT_STORAGE_KEY);\n    storage.local.remove(ARTICLES_THIS_WEEK_STORAGE_KEY);\n};\nexport const hasArticleCountOptOutCookie = () => !!getCookie({ name: ARTICLE_COUNT_OPT_OUT_COOKIE.name });\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css, ThemeProvider } from '@emotion/react';\nimport { background, brandAltBackground, brandAltLine, brandAltText, from, palette, space, textSans14, textSans17, } from '@guardian/source/foundations';\nimport { Button, buttonThemeBrand, buttonThemeBrandAlt, buttonThemeDefault, SvgCross, } from '@guardian/source/react-components';\nconst { brand, neutral } = palette;\nconst COLOURS = {\n    epic: 'white',\n    banner: brandAltText.primary,\n    ['investigations-moment-banner']: neutral[0],\n    ['us-eoy-moment-banner']: neutral[0],\n    ['global-new-year-moment-banner']: neutral[0],\n    ['election-au-moment-banner']: neutral[0],\n};\nconst BACKGROUND_COLOURS = {\n    epic: brand[400],\n    banner: brandAltBackground.primary,\n    ['investigations-moment-banner']: neutral[100],\n    ['us-eoy-moment-banner']: '#FFEEDB',\n    ['global-new-year-moment-banner']: '#F79E1B',\n    ['election-au-moment-banner']: '#e4e4e3',\n};\nconst BORDER_COLOURS = {\n    epic: 'transparent',\n    banner: brandAltLine.primary,\n    ['investigations-moment-banner']: neutral[0],\n    ['us-eoy-moment-banner']: neutral[0],\n    ['global-new-year-moment-banner']: neutral[0],\n    ['election-au-moment-banner']: neutral[0],\n};\nconst BUTTON_THEMES = {\n    epic: buttonThemeBrand,\n    banner: buttonThemeBrandAlt,\n    ['investigations-moment-banner']: buttonThemeDefault,\n    ['us-eoy-moment-banner']: buttonThemeDefault,\n    ['global-new-year-moment-banner']: buttonThemeDefault,\n    ['election-au-moment-banner']: buttonThemeDefault,\n};\nconst overlayContainer = (type) => css `\n\tcolor: ${COLOURS[type]};\n\tbackground: ${BACKGROUND_COLOURS[type]};\n\tborder: 1px solid ${BORDER_COLOURS[type]};\n\t${textSans17}\n\tpadding: ${space[2]}px;\n\tbox-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n`;\nconst overlayHeader = css `\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n`;\nconst overlayHeaderText = css `\n\tfont-size: 17px;\n\tfont-weight: bold;\n`;\nconst overlayBody = css `\n\tmargin-top: ${space[1]}px;\n\tfont-size: 15px;\n`;\nconst overlayCtaContainer = css `\n\tmargin-top: ${space[3]}px;\n\tdisplay: flex;\n\tflex-direction: row;\n\n\t> * + * {\n\t\tmargin-left: ${space[2]}px;\n\t}\n\n\t${from.tablet} {\n\t\t> * + * {\n\t\t\tmargin-left: ${space[3]}px;\n\t\t}\n\t}\n`;\nconst NOTE_LINK_COLOURS = {\n    epic: neutral[100],\n    banner: brandAltText.primary,\n    ['investigations-moment-banner']: neutral[0],\n    ['us-eoy-moment-banner']: neutral[0],\n    ['global-new-year-moment-banner']: neutral[0],\n    ['election-au-moment-banner']: neutral[0],\n};\nconst BUTTON_OVERRIDES = {\n    epic: css ``,\n    banner: css ``,\n    ['investigations-moment-banner']: css `\n\t\tbackground-color: ${palette.neutral[100]};\n\t\tcolor: ${palette.neutral[0]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.neutral[86]};\n\t\t}\n\t`,\n    ['us-eoy-moment-banner']: css `\n\t\tcolor: ${palette.neutral[7]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.culture[350]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.culture[350]};\n\t\t}\n\t`,\n    ['global-new-year-moment-banner']: css `\n\t\tcolor: ${palette.neutral[7]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.brand[500]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.brand[500]};\n\t\t}\n\t`,\n    ['election-au-moment-banner']: css `\n\t\tcolor: ${palette.neutral[7]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.brand[500]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.brand[500]};\n\t\t}\n\t`,\n};\nconst PRIMARY_BUTTON_OVERRIDES = {\n    epic: css ``,\n    banner: css ``,\n    ['investigations-moment-banner']: css `\n\t\tbackground-color: ${palette.neutral[0]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.neutral[46]};\n\t\t\tborder-color: ${palette.neutral[46]};\n\t\t}\n\t`,\n    ['us-eoy-moment-banner']: css `\n\t\tbackground-color: ${palette.neutral[7]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.culture[350]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.culture[350]};\n\t\t}\n\t`,\n    ['global-new-year-moment-banner']: css `\n\t\tbackground-color: ${palette.neutral[0]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.brand[500]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.brand[500]};\n\t\t}\n\t`,\n    ['election-au-moment-banner']: css `\n\t\tbackground-color: ${palette.neutral[0]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${background.ctaPrimaryHover};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${background.ctaPrimaryHover};\n\t\t}\n\t`,\n};\nconst overlayNote = (type) => css `\n\tmargin-top: ${space[2]}px;\n\t${textSans14}\n\tfont-style: italic;\n\n\ta {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tcolor: ${NOTE_LINK_COLOURS[type]} !important;\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\ttext-decoration: underline !important;\n\t}\n`;\nexport const ArticleCountOptOutOverlay = ({ type, hasOptedOut, onClose, onOptOut, }) => {\n    return (_jsxs(\"div\", { css: overlayContainer(type), children: [_jsxs(\"div\", { css: overlayHeader, children: [_jsx(\"div\", { css: overlayHeaderText, children: hasOptedOut ? \"You've opted out\" : \"What's this?\" }), _jsx(ThemeProvider, { theme: BUTTON_THEMES[type], children: _jsx(Button, { onClick: onClose, cssOverrides: BUTTON_OVERRIDES[type], icon: _jsx(SvgCross, {}), hideLabel: true, size: \"xsmall\", priority: \"tertiary\", children: \"Close\" }) })] }), _jsx(\"div\", { css: overlayBody, children: hasOptedOut\n                    ? \"Starting from your next page view, we won't count the articles you read or show you this message for three months.\"\n                    : 'We would like to remind you how many Guardian articles youâ€™ve enjoyed on this device. Can we continue showing you this?' }), !hasOptedOut && (_jsxs(\"div\", { css: overlayCtaContainer, children: [_jsx(ThemeProvider, { theme: BUTTON_THEMES[type], children: _jsx(Button, { onClick: onClose, cssOverrides: PRIMARY_BUTTON_OVERRIDES[type], priority: \"primary\", size: \"xsmall\", children: \"Yes, that's OK\" }) }), _jsx(ThemeProvider, { theme: BUTTON_THEMES[type], children: _jsx(Button, { onClick: onOptOut, cssOverrides: BUTTON_OVERRIDES[type], priority: \"tertiary\", size: \"xsmall\", children: \"No, opt me out\" }) })] })), _jsx(\"div\", { css: overlayNote(type), children: hasOptedOut ? (_jsxs(\"span\", { children: [\"If you have any questions, please\", ' ', _jsx(\"a\", { href: \"https://www.theguardian.com/help/contact-us\", children: \"contact us.\" })] })) : (\"Please note that opting out is a permanent action and can't be reversed\") })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { from, space } from '@guardian/source/foundations';\nimport { useEffect, useState } from 'react';\nimport { useIsInView } from '../../../lib/useIsInView';\nimport { addArticleCountOptOutCookie, removeArticleCountFromLocalStorage, } from '../lib/articleCountOptOut';\nimport { ArticleCountOptOutOverlay } from './ArticleCountOptOutOverlay';\nconst OPHAN_COMPONENT_ID_OPT_OUT_VIEW = 'article-count-opt-out-view';\nconst OPHAN_COMPONENT_ID_OPT_OUT_OPEN = 'article-count-opt-out-open';\nconst OPHAN_COMPONENT_ID_OPT_OUT_CLOSE = 'article-count-opt-out-close';\nconst OPHAN_COMPONENT_ID_OPT_OUT_CONFIRM = 'article-count-opt-out-confirm';\nexport const ophanComponentEventOptOutView = (componentType) => ({\n    component: {\n        componentType: 'ACQUISITIONS_OTHER',\n        id: OPHAN_COMPONENT_ID_OPT_OUT_VIEW,\n    },\n    action: 'VIEW',\n    value: `article-count-opt-out-popup-${componentType}`,\n});\nexport const ophanComponentEventOptOutOpen = (componentType) => ({\n    component: {\n        componentType: 'ACQUISITIONS_OTHER',\n        id: OPHAN_COMPONENT_ID_OPT_OUT_OPEN,\n    },\n    action: 'CLICK',\n    value: `article-count-opt-out-popup-${componentType}`,\n});\nexport const ophanComponentEventOptOutClose = (componentType) => ({\n    component: {\n        componentType: 'ACQUISITIONS_OTHER',\n        id: OPHAN_COMPONENT_ID_OPT_OUT_CLOSE,\n    },\n    action: 'CLICK',\n    value: `article-count-opt-out-popup-${componentType}`,\n});\nexport const ophanComponentEventOptOutConfirm = (componentType) => ({\n    component: {\n        componentType: 'ACQUISITIONS_OTHER',\n        id: OPHAN_COMPONENT_ID_OPT_OUT_CONFIRM,\n    },\n    action: 'CLICK',\n    value: `article-count-opt-out-popup-${componentType}`,\n});\nconst isBanner = (type) => type === 'banner' ||\n    type === 'investigations-moment-banner' ||\n    type === 'us-eoy-moment-banner' ||\n    type === 'global-new-year-moment-banner' ||\n    type === 'election-au-moment-banner';\nconst optOutContainer = (type) => css `\n\tdisplay: inline-block;\n\n\t${from.tablet} {\n\t\t${!isBanner(type) ? 'position: relative;' : ''}\n\t}\n`;\nconst articleCountButton = css `\n\tbackground: none;\n\tborder: none;\n\tpadding: 0;\n\tcursor: pointer;\n\tborder-bottom: 1px solid;\n\t/* stylelint-disable-next-line property-disallowed-list */\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tfont-weight: inherit;\n\tfont-style: inherit;\n\tcolor: inherit;\n\t&:focus {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\toutline: none !important;\n\t}\n`;\nconst overlayContainer = (type) => css `\n\tposition: absolute;\n\tz-index: 100;\n\t${isBanner(type)\n    ? css `\n\t\t\t\ttop: 0px;\n\t\t\t\tleft: 0px;\n\t\t  `\n    : css `\n\t\t\t\tleft: ${space[4]}px;\n\t\t\t\tright: ${space[4]}px;\n\t\t\t\t${isBanner(type) ? 'bottom: 21px;' : ''}\n\t\t  `}\n\tdisplay: block;\n\n\t${from.tablet} {\n\t\t${isBanner(type)\n    ? css `\n\t\t\t\t\ttop: 10px;\n\t\t\t\t\tleft: 10px;\n\t\t\t\t\twidth: 450px;\n\t\t\t  `\n    : css `\n\t\t\t\t\twidth: 400px;\n\t\t\t\t\tleft: 0;\n\t\t\t  `}\n\t}\n`;\nexport const ArticleCountOptOutPopup = ({ numArticles, nextWord, type, tracking }) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [hasOptedOut, setHasOptedOut] = useState(false);\n    const [hasBeenSeen, setNode] = useIsInView({\n        debounce: true,\n        rootMargin: '-18px',\n        threshold: 0,\n    });\n    useEffect(() => {\n        if (hasBeenSeen && tracking) {\n            tracking.submitComponentEvent(ophanComponentEventOptOutView(tracking.componentType));\n        }\n    }, [hasBeenSeen, tracking]);\n    const onOptOut = () => {\n        addArticleCountOptOutCookie();\n        removeArticleCountFromLocalStorage();\n        setHasOptedOut(true);\n        if (tracking) {\n            tracking.submitComponentEvent(ophanComponentEventOptOutConfirm(tracking.componentType));\n        }\n    };\n    const onOpen = () => {\n        setIsOpen(true);\n        if (tracking) {\n            tracking.submitComponentEvent(ophanComponentEventOptOutOpen(tracking.componentType));\n        }\n    };\n    const onClose = () => {\n        setIsOpen(false);\n        if (tracking) {\n            tracking.submitComponentEvent(ophanComponentEventOptOutClose(tracking.componentType));\n        }\n    };\n    const onToggle = () => (isOpen ? onClose() : onOpen());\n    return (_jsxs(\"div\", { ref: setNode, css: optOutContainer(type), children: [_jsx(\"button\", { css: articleCountButton, onClick: onToggle, children: `${numArticles}${nextWord ? nextWord : ''}` }), isOpen && (_jsx(\"div\", { css: overlayContainer(type), children: _jsx(ArticleCountOptOutOverlay, { type: type, hasOptedOut: hasOptedOut, onOptOut: onOptOut, onClose: onClose }) }))] }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { ArticleCountOptOutPopup } from '../shared/ArticleCountOptOutPopup';\nexport const replaceArticleCountWithLink = (text, numArticles, articleCountOptOutType, tracking) => {\n    const nextWords = [];\n    const subbedText = text.replace(/%%ARTICLE_COUNT%%( \\w+)?/g, (_, nextWord) => {\n        nextWords.push(nextWord);\n        return '%%ARTICLE_COUNT_AND_NEXT_WORD%%';\n    });\n    const parts = subbedText.split(/%%ARTICLE_COUNT_AND_NEXT_WORD%%/);\n    const elements = [];\n    let key = 0;\n    for (let i = 0; i < parts.length - 1; i += 1) {\n        elements.push(_jsx(\"span\", { dangerouslySetInnerHTML: { __html: parts[i] } }, key++));\n        elements.push(_jsx(ArticleCountOptOutPopup, { numArticles: numArticles, nextWord: nextWords[i], type: articleCountOptOutType, tracking: tracking }, key++));\n    }\n    elements.push(_jsx(\"span\", { dangerouslySetInnerHTML: {\n            __html: parts[parts.length - 1],\n        } }, key++));\n    return elements;\n};\nexport const replaceArticleCount = (text, numArticles, articleCountOptOutType, tracking, optOutLink = true) => {\n    if (optOutLink) {\n        return replaceArticleCountWithLink(text, numArticles, articleCountOptOutType, tracking);\n    }\n    return (_jsx(\"span\", { dangerouslySetInnerHTML: {\n            __html: text.replace(/%%ARTICLE_COUNT%%/, `${numArticles}`),\n        } }));\n};\n","import { isUndefined } from '@guardian/libs';\nimport { addRegionIdToSupportUrl } from '@guardian/support-dotcom-components';\nconst generateAbTestArray = (abTestName, abTestVariant, targetingAbTest, amountsAbTestName, amountsAbTestVariant) => {\n    const abTests = [\n        {\n            name: abTestName,\n            variant: abTestVariant,\n        },\n    ];\n    if (targetingAbTest) {\n        abTests.push({\n            name: targetingAbTest.testName,\n            variant: targetingAbTest.variantName,\n        });\n    }\n    if (amountsAbTestName && amountsAbTestVariant) {\n        abTests.push({\n            name: amountsAbTestName,\n            variant: amountsAbTestVariant,\n            testType: 'AMOUNTS_TEST',\n        });\n    }\n    return abTests;\n};\nconst encodeAcquisitionsData = (params, abTests) => {\n    return encodeURIComponent(JSON.stringify({\n        source: params.platformId,\n        componentId: params.campaignCode,\n        componentType: params.componentType,\n        campaignCode: params.campaignCode,\n        abTests,\n        referrerPageviewId: params.ophanPageId,\n        referrerUrl: params.referrerUrl,\n        isRemote: true, // Temp param to indicate served by remote service\n        labels: params.labels,\n    }));\n};\nconst generateQueryString = (params, acquisitionData, numArticles) => {\n    const trackingLinkParams = {\n        REFPVID: params.ophanPageId || 'not_found',\n        INTCMP: params.campaignCode || '',\n        acquisitionData,\n        numArticles: numArticles || 0,\n    };\n    const queryString = Object.entries(trackingLinkParams)\n        .filter(([, value]) => !isUndefined(value))\n        .map(([key, value]) => `${key}=${value}`);\n    return queryString.join('&');\n};\nexport const addTrackingParams = (baseUrl, params, numArticles, amountsAbTestName, amountsAbTestVariant) => {\n    const abTests = generateAbTestArray(params.abTestName, params.abTestVariant, params.targetingAbTest, amountsAbTestName, amountsAbTestVariant);\n    const acquisitionData = encodeAcquisitionsData(params, abTests);\n    const queryString = generateQueryString(params, acquisitionData, numArticles ?? 0);\n    const alreadyHasQueryString = baseUrl.includes('?');\n    return `${baseUrl}${alreadyHasQueryString ? '&' : '?'}${queryString}`;\n};\nconst addAbandonedBasketContributionParams = (baseUrl, { region, amount, billingPeriod }) => {\n    return `${baseUrl}/${region}/contribute/checkout?selected-amount=${amount}&selected-contribution-type=${billingPeriod}`;\n};\nexport const addAbandonedBasketParamsToUrl = (baseUrl, abandonedBasket) => {\n    switch (abandonedBasket.product) {\n        case 'Contribution':\n        case 'SupporterPlus':\n            return addAbandonedBasketContributionParams(baseUrl, abandonedBasket);\n        default:\n            return baseUrl;\n    }\n};\nexport const addAbandonedBasketAndTrackingParamsToUrl = (baseUrl, abandonedBasket, tracking) => {\n    return addTrackingParams(addAbandonedBasketParamsToUrl(baseUrl, abandonedBasket), tracking);\n};\nexport const isSupportUrl = (baseUrl) => /\\bsupport\\./.test(baseUrl);\nexport const addRegionIdAndTrackingParamsToSupportUrl = (baseUrl, tracking, numArticles, countryCode, amountsAbTestName, amountsAbTestVariant) => {\n    if (!isSupportUrl(baseUrl)) {\n        return baseUrl;\n    }\n    const urlWithRegion = addRegionIdToSupportUrl(baseUrl, countryCode);\n    return addTrackingParams(urlWithRegion, tracking, numArticles, amountsAbTestName, amountsAbTestVariant);\n};\nconst hrefRegex = /href=\"(.*?)\"/g;\nexport const addTrackingParamsToBodyLinks = (text, tracking, numArticles, countryCode) => {\n    const trackingWithLabel = addLabelToTracking(tracking, 'body-link');\n    const replaceHref = (wholeMatch, url) => `href=\"${addRegionIdAndTrackingParamsToSupportUrl(url, trackingWithLabel, numArticles, countryCode)}\"`;\n    return text.replace(hrefRegex, replaceHref);\n};\nexport const addProfileTrackingParams = (baseUrl, params) => {\n    const constructQuery = (query) => Object.keys(query)\n        .map((param) => {\n        const value = query[param];\n        const queryValue = Array.isArray(value)\n            ? value.map((v) => encodeURIComponent(v)).join(',')\n            : encodeURIComponent(value);\n        return `${param}=${queryValue}`;\n    })\n        .join('&');\n    const componentEventParamsData = {\n        componentType: params.componentType,\n        componentId: params.campaignCode,\n        abTestName: params.abTestName,\n        abTestVariant: params.abTestVariant,\n        viewId: params.ophanPageId,\n    };\n    const trackingLinkParams = {\n        // Note: profile subdomain take uri encoded query params NOT json\n        componentEventParams: encodeURIComponent(constructQuery(componentEventParamsData)),\n        returnUrl: params.referrerUrl,\n    };\n    const queryString = Object.entries(trackingLinkParams)\n        .filter(([, value]) => !isUndefined(value))\n        .map(([key, value]) => `${key}=${value}`);\n    const alreadyHasQueryString = baseUrl.includes('?');\n    return `${baseUrl}${alreadyHasQueryString ? '&' : '?'}${queryString.join('&')}`;\n};\nexport const addChoiceCardsParams = (url, frequency, amount) => {\n    const newParams = `selected-contribution-type=${frequency}${amount !== undefined ? `&selected-amount=${amount}` : ''}`;\n    const alreadyHasQueryString = url.includes('?');\n    return `${url}${alreadyHasQueryString ? '&' : '?'}${newParams}`;\n};\nexport const addChoiceCardsOneTimeParams = (url) => {\n    const newParams = `oneTime`;\n    const alreadyHasQueryString = url.includes('?');\n    return `${url}${alreadyHasQueryString ? '&' : '?'}${newParams}`;\n};\nexport const addChoiceCardsProductParams = (url, product, ratePlan, contribution) => {\n    const newParams = `product=${product}&ratePlan=${ratePlan}${contribution !== undefined ? `&contribution=${contribution}` : ''}`;\n    const alreadyHasQueryString = url.includes('?');\n    return `${url}${alreadyHasQueryString ? '&' : '?'}${newParams}`;\n};\nexport const isProfileUrl = (baseUrl) => /\\bprofile\\./.test(baseUrl);\nexport const addTrackingParamsToProfileUrl = (baseUrl, tracking) => {\n    return isProfileUrl(baseUrl)\n        ? addProfileTrackingParams(baseUrl, tracking)\n        : baseUrl;\n};\n// SHARED TRACKING\nconst campaignPrefix = 'gdnwb_copts_memco';\nexport const buildCampaignCode = (test, variant) => `${campaignPrefix}_${test.campaignId ?? test.name}_${variant.name}`;\nexport const buildBannerCampaignCode = (test, variant) => `${test.name}_${variant.name}`;\nexport const buildAmpEpicCampaignCode = (testName, variantName) => `AMP__${testName}__${variantName}`;\nconst createEventFromTracking = (action) => {\n    return (tracking, componentId) => {\n        const { abTestName, abTestVariant, componentType, products = [], labels = [], campaignCode, } = tracking;\n        const abTest = abTestName && abTestVariant\n            ? {\n                name: abTestName,\n                variant: abTestVariant,\n            }\n            : null;\n        const targetingAbTest = tracking.targetingAbTest\n            ? {\n                name: tracking.targetingAbTest.testName,\n                variant: tracking.targetingAbTest.variantName,\n            }\n            : null;\n        return {\n            component: {\n                componentType,\n                products,\n                campaignCode,\n                id: componentId,\n                labels,\n            },\n            ...(abTest ? { abTest } : {}),\n            ...(targetingAbTest ? { targetingAbTest } : {}),\n            action,\n        };\n    };\n};\nexport const addLabelToTracking = (tracking, label) => {\n    if (tracking.labels) {\n        return {\n            ...tracking,\n            labels: [...tracking.labels, label],\n        };\n    }\n    else {\n        return {\n            ...tracking,\n            labels: [label],\n        };\n    }\n};\nexport const createClickEventFromTracking = createEventFromTracking('CLICK');\nexport const createViewEventFromTracking = createEventFromTracking('VIEW');\nexport const createInsertEventFromTracking = createEventFromTracking('INSERT');\n"],"names":["ARTICLE_COUNT_OPT_OUT_COOKIE","addArticleCountOptOutCookie","setCookie","name","value","Date","getTime","toString","daysToLive","removeArticleCountOptOutCookie","removeCookie","removeArticleCountFromLocalStorage","storage","local","remove","hasArticleCountOptOutCookie","getCookie","brand","palette","neutral","COLOURS","_defineProperty","epic","banner","brandAltText","primary","BACKGROUND_COLOURS","brandAltBackground","BORDER_COLOURS","brandAltLine","BUTTON_THEMES","buttonThemeBrand","buttonThemeBrandAlt","buttonThemeDefault","overlayContainer","type","css","textSans17","space","overlayHeader","styles","overlayHeaderText","overlayBody","overlayCtaContainer","from","tablet","NOTE_LINK_COLOURS","BUTTON_OVERRIDES","culture","PRIMARY_BUTTON_OVERRIDES","background","ctaPrimaryHover","overlayNote","textSans14","ArticleCountOptOutOverlay","_ref","hasOptedOut","onClose","onOptOut","_jsxs","children","_jsx","ThemeProvider","theme","Button","onClick","cssOverrides","icon","SvgCross","hideLabel","size","priority","href","isBanner","optOutContainer","articleCountButton","_ref2","_ref3","ArticleCountOptOutPopup","_ref4","numArticles","nextWord","tracking","_useState","useState","_useState2","_slicedToArray","isOpen","setIsOpen","_useState3","_useState4","setHasOptedOut","_useIsInView","useIsInView","debounce","rootMargin","threshold","_useIsInView2","hasBeenSeen","setNode","useEffect","componentType","submitComponentEvent","component","id","action","concat","ref","replaceArticleCount","text","articleCountOptOutType","arguments","length","undefined","dangerouslySetInnerHTML","__html","replace","nextWords","parts","_","push","split","elements","key","i","replaceArticleCountWithLink","addTrackingParams","baseUrl","params","amountsAbTestName","amountsAbTestVariant","abTests","abTestName","abTestVariant","targetingAbTest","variant","testName","variantName","testType","generateAbTestArray","acquisitionData","encodeURIComponent","JSON","stringify","source","platformId","componentId","campaignCode","referrerPageviewId","ophanPageId","referrerUrl","isRemote","labels","encodeAcquisitionsData","queryString","trackingLinkParams","REFPVID","INTCMP","Object","entries","filter","isUndefined","map","join","generateQueryString","alreadyHasQueryString","includes","addAbandonedBasketAndTrackingParamsToUrl","abandonedBasket","product","_ref5","region","amount","billingPeriod","addAbandonedBasketContributionParams","addAbandonedBasketParamsToUrl","isSupportUrl","test","addRegionIdAndTrackingParamsToSupportUrl","countryCode","urlWithRegion","addRegionIdToSupportUrl","hrefRegex","addTrackingParamsToBodyLinks","trackingWithLabel","addLabelToTracking","wholeMatch","url","addChoiceCardsParams","frequency","newParams","addChoiceCardsOneTimeParams","addChoiceCardsProductParams","ratePlan","contribution","isProfileUrl","addTrackingParamsToProfileUrl","query","componentEventParamsData","viewId","componentEventParams","keys","param","queryValue","Array","isArray","v","returnUrl","_ref6","_ref8","_ref9","addProfileTrackingParams","createEventFromTracking","_tracking$products","products","_tracking$labels","abTest","_objectSpread","label","_toConsumableArray","createClickEventFromTracking","createViewEventFromTracking","createInsertEventFromTracking"],"sourceRoot":""}