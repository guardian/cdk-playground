(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[1005],{44165:(e,t,n)=>{var o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,a="object"==typeof self&&self&&self.Object===Object&&self,d=l||a||Function("return this")(),u=Object.prototype.toString,f=Math.max,p=Math.min,m=function(){return d.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=i.test(e);return n||c.test(e)?s(e.slice(2),n?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var o,r,i,c,s,l,a=0,d=!1,u=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var n=o,i=r;return o=r=void 0,a=t,c=e.apply(i,n)}function v(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-a>=i}function P(){var e=m();if(v(e))return y(e);s=setTimeout(P,function(e){var n=t-(e-l);return u?p(n,i-(e-a)):n}(e))}function y(e){return s=void 0,g&&o?w(e):(o=r=void 0,c)}function x(){var e=m(),n=v(e);if(o=arguments,r=this,l=e,n){if(void 0===s)return function(e){return a=e,s=setTimeout(P,t),d?w(e):c}(l);if(u)return s=setTimeout(P,t),w(l)}return void 0===s&&(s=setTimeout(P,t)),c}return t=b(t)||0,h(n)&&(d=!!n.leading,i=(u="maxWait"in n)?f(b(n.maxWait)||0,t):i,g="trailing"in n?!!n.trailing:g),x.cancel=function(){void 0!==s&&clearTimeout(s),a=0,o=l=r=s=void 0},x.flush=function(){return void 0===s?c:y(m())},x}},38172:(e,t,n)=>{"use strict";n.d(t,{id:()=>c,l3:()=>s,yB:()=>a});var o=n(50484),r=n(24017);function i(){const e=(t=["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-around;\n\theight: 100%;\n"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return i=function(){return e},e}const c="right-ad-portal-placeholder",s="ad-portal-placeholder",l=(0,r.css)(i()),a=()=>(0,o.jsx)("div",{className:c,css:l})},29087:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AdPortals:()=>T});var o=n(50484),r=n(96706),i=n(9474),c=n(92280),s=n(44165),l=n.n(s),a=n(67400),d=n(42631),u=n(54465),f=n(38172),p=n(24017),m=n(96378),h=n(99923),b=n(7351),g=n(53694);function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(){const e=w(["\n\tclear: both;\n\tmargin: "," 0;\n\tbackground: ",";\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\n\t"," {\n\t\tmargin: 1em 0px;\n\t}\n"]);return v=function(){return e},e}function P(){const e=w(["\n\t","\n\tpadding: ",";\n\tfloat: left;\n\tdisplay: flex;\n\tjustify-content: center;\n\n\t/* We need to account for padding on both sides */\n\twidth: calc(100% - 2 * ",");\n\n\tp {\n\t\tmargin: 0;\n\t\tfloat: left;\n\t\tfont-size: 16px;\n\t\tfont-weight: 400;\n\t\tcolor: ",";\n\t}\n"]);return P=function(){return e},e}function y(){const e=w(["\n\tclear: both;\n\tpadding-bottom: ","px;\n\twidth: 100%;\n"]);return y=function(){return e},e}function x(){const e=w(["\n\t","\n\t"," {\n\t\twidth: 320px;\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t}\n\n\theight: 344px;\n\twidth: 300px;\n\tpadding-bottom: 0;\n"]);return x=function(){return e},e}const M=(0,p.css)(v(),m.L[4],(0,g.M)("--ad-background"),h.TG.phablet),B=(0,p.css)(P(),b.WuG,m.L[3],m.L[3],(0,g.M)("--ad-labels-text")),E=(0,p.css)(y(),258),C=(0,p.css)(x(),E,h.TG.phablet),S=(0,a.forwardRef)(((e,t)=>{let{isFirstAdSlot:n}=e;return(0,o.jsxs)("aside",{css:M,children:[(0,o.jsx)("div",{css:B,children:(0,o.jsx)("p",{children:"Advertisement"})}),(0,o.jsx)("div",{css:n?C:E,ref:t})]})})),L=e=>{const t=e.getBoundingClientRect(),n=null!==document.scrollingElement?document.scrollingElement.scrollLeft:document.body.scrollLeft,o=null!==document.scrollingElement?document.scrollingElement.scrollTop:document.body.scrollTop;return{x:t.left+n,y:t.top+o,width:t.width,height:t.height}},j=e=>e.map(((e,t)=>new r.AdSlot({rect:L(e),isSquare:0===t}))),k=l()((e=>(0,d.GR)().updateAdverts(e).catch((()=>console.error("Error updating adverts")))),100,{leading:!0}),T=e=>{let{rightAlignFrom:t="desktop"}=e;const[n,r]=(0,a.useState)([]),[s,l]=(0,a.useState)(),p=(0,a.useRef)([]);p.current=[];const m=(0,a.useRef)([]),h=(0,a.useRef)(0),b=(0,u.N)("(min-width: ".concat(c.f[t],"px)"));(0,a.useEffect)((()=>{(0,d.LE)().isPremium().then((e=>{e||(r(Array.from(document.getElementsByClassName(f.l3))),l(document.getElementsByClassName(f.id)[0]))})).catch((()=>console.error("Error setting up ads")))}),[]),(0,a.useEffect)((()=>{let e;return 0!==n.length&&n.length===p.current.length&&(m.current=j(p.current),h.current=document.body.clientHeight,(0,d.GR)().insertAdverts(m.current).catch((()=>console.error("Error inserting ads"))),e=new ResizeObserver((e=>{if(!(0,i.b)(e[0])&&e[0].target.clientHeight!==h.current){h.current=e[0].target.clientHeight;const n=j(p.current);t=m.current,n.some(((e,n)=>{var o;const r=null===(o=t[n])||void 0===o?void 0:o.rect;return!((0,i.b)(r)||(c=e.rect,s=r,c.height===s.height&&c.width===s.width&&c.x===s.x&&c.y===s.y));var c,s}))&&(k(n),m.current=n)}var t})),e.observe(document.body),b&&s&&e.observe(s)),()=>null==e?void 0:e.disconnect()}),[n,s,b]);const g=(e,t)=>(0,o.jsx)(S,{isFirstAdSlot:0===t,ref:e=>{null!==e&&(p.current=[...p.current,e])}},e);return b&&s?(0,a.createPortal)((0,o.jsx)(o.Fragment,{children:n.map(((e,t)=>g(e.id,t)))}),s):(0,o.jsx)(o.Fragment,{children:n.map(((e,t)=>(0,a.createPortal)(g(e.id,t),e)))})}},42631:(e,t,n)=>{"use strict";n.d(t,{OA:()=>T,IC:()=>H,GR:()=>j,QF:()=>U,Dq:()=>S,yY:()=>W,_5:()=>Y,ud:()=>q,U:()=>N,yV:()=>F,LE:()=>R,FA:()=>z});var o=n(13011),r=n(96831),i=n(86293),c=n(99895),s=n(65490),l=n(89993),a=n(85159),d=(n(47038),n(59517)),u=(n(29103),n(60579)),f=n(54703),p=n(69504),m=n(75271),h=n(9474),b=n(13213);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w extends b.TProtocol{getTransport(){return this.concreteProtocol.getTransport()}flush(){return this.concreteProtocol.flush()}writeMessageBegin(e,t,n){return this.concreteProtocol.writeMessageBegin(e,t,n)}writeMessageEnd(){return this.concreteProtocol.writeMessageEnd()}writeStructBegin(e){return this.concreteProtocol.writeStructBegin(e)}writeStructEnd(){return this.concreteProtocol.writeStructEnd()}writeFieldBegin(e,t,n){return this.concreteProtocol.writeFieldBegin(e,t,n)}writeFieldEnd(){return this.concreteProtocol.writeFieldEnd()}writeFieldStop(){return this.concreteProtocol.writeFieldStop()}writeMapBegin(e,t,n){return this.concreteProtocol.writeMapBegin(e,t,n)}writeMapEnd(){return this.concreteProtocol.writeMapEnd()}writeListBegin(e,t){return this.concreteProtocol.writeListBegin(e,t)}writeListEnd(){return this.concreteProtocol.writeListEnd()}writeSetBegin(e,t){return this.concreteProtocol.writeSetBegin(e,t)}writeSetEnd(){return this.concreteProtocol.writeSetEnd()}writeBool(e){return this.concreteProtocol.writeBool(e)}writeByte(e){return this.concreteProtocol.writeByte(e)}writeI16(e){return this.concreteProtocol.writeI16(e)}writeI32(e){return this.concreteProtocol.writeI32(e)}writeI64(e){return this.concreteProtocol.writeI64(e)}writeDouble(e){return this.concreteProtocol.writeDouble(e)}writeString(e){return this.concreteProtocol.writeString(e)}writeBinary(e){return this.concreteProtocol.writeBinary(e)}readMessageBegin(){return this.concreteProtocol.readMessageBegin()}readMessageEnd(){return this.concreteProtocol.readMessageEnd()}readStructBegin(){return this.concreteProtocol.readStructBegin()}readStructEnd(){return this.concreteProtocol.readStructEnd()}readFieldBegin(){return this.concreteProtocol.readFieldBegin()}readFieldEnd(){return this.concreteProtocol.readFieldEnd()}readMapBegin(){return this.concreteProtocol.readMapBegin()}readMapEnd(){return this.concreteProtocol.readMapEnd()}readListBegin(){return this.concreteProtocol.readListBegin()}readListEnd(){return this.concreteProtocol.readListEnd()}readSetBegin(){return this.concreteProtocol.readSetBegin()}readSetEnd(){return this.concreteProtocol.readSetEnd()}readBool(){return this.concreteProtocol.readBool()}readByte(){return this.concreteProtocol.readByte()}readI16(){return this.concreteProtocol.readI16()}readI32(){return this.concreteProtocol.readI32()}readI64(){return this.concreteProtocol.readI64()}readDouble(){return this.concreteProtocol.readDouble()}readBinary(){return this.concreteProtocol.readBinary()}readString(){return this.concreteProtocol.readString()}skip(e){return this.concreteProtocol.skip(e)}constructor(e){super(e.getTransport()),g(this,"concreteProtocol",void 0),this.concreteProtocol=e}}class v extends w{writeMessageBegin(e,t,n){t===b.MessageType.CALL||t===b.MessageType.ONEWAY?super.writeMessageBegin(this.serviceName+v.separator+e,t,n):super.writeMessageBegin(e,t,n)}constructor(e,t){super(e),g(this,"serviceName",void 0),this.serviceName=t}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){window.android?window.android.postMessage(e.data,e.connectionId):window.webkit?window.webkit.messageHandlers.iOSWebViewMessage.postMessage(e):console.warn("No native APIs available")}g(v,"separator",":");let x=1;const M=()=>"connection-".concat(x++);class B extends b.ThriftConnection{reset(e){if(e===this.connectionId&&window.nativeConnections){console.warn("Reseting connection "+e),delete window.nativeConnections[this.connectionId];for(const e of this.promises)e.reject(new b.TApplicationException(b.TApplicationExceptionType.UNKNOWN,"Timeout error"));this.promises=[],this.connectionId=M(),window.nativeConnections[this.connectionId]=this}}receive(e){const t=this.promises.shift();if(t){clearTimeout(t.timeoutId);const n=Buffer.from(e.data,"base64");t.resolve(n)}this.sendNextMessage()}sendNextMessage(){const e=this.outBuffer.shift();e&&(console.log("Sending next message"),y(e))}send(e){const t=this.connectionId,n=this;return new Promise((function(o,r){n.promises.push({resolve:o,reject:r,timeoutId:setTimeout((function(){n.reset(t)}),3e4)});const i={data:e.toString("base64"),connectionId:t};1===n.promises.length?(console.log("Sending message immediately"),y(i)):(console.log("Queing message because others in flight"),n.outBuffer.push(i))}))}constructor(e,t){var n;super(e,t),P(this,"connectionId",M()),P(this,"promises",[]),P(this,"outBuffer",[]),"undefined"!=typeof window&&(window.nativeConnections=null!==(n=window.nativeConnections)&&void 0!==n?n:{},window.nativeConnections[this.connectionId]=this)}}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffered",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"compact";const o=new B((0,b.getTransport)(t),class extends v{constructor(t){var o;super(new((0,b.getProtocol)(n))(t),null!==(o=e.serviceName)&&void 0!==o?o:"")}});return new e(o)}let C;const S=()=>((0,h.b)(C)&&(C=E(s.Client,"buffered","compact")),C);let L;const j=()=>((0,h.b)(L)&&(L=E(i.Client,"buffered","compact")),L);let k;const T=()=>(k||(k=E(o.Client,"buffered","compact")),k);let I;const N=()=>(I||(I=E(u.Client,"buffered","compact")),I);let O;const F=()=>(O||(O=E(f.Client,"buffered","compact")),O);let A;const R=()=>(A||(A=E(p.Client,"buffered","compact")),A);let G;const W=()=>(G||(G=E(l.Client,"buffered","compact")),G);let _;const z=()=>(_||(_=E(m.Client,"buffered","compact")),_);let D;const H=()=>(D||(D=E(r.Client,"buffered","compact")),D);let $;const q=()=>($||($=E(d.Client,"buffered","compact")),$);let Q;const U=()=>(Q||(Q=E(c.Client,"buffered","compact")),Q);let V;const Y=()=>(V||(V=E(a.Client,"buffered","compact")),V)},54465:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,N:()=>c});var o=n(67400);const r=new Map,i=e=>e.replace("@media","").trim(),c=e=>{const[t,n]=(0,o.useState)(r.get(e));return(0,o.useEffect)((()=>{t||(r.set(e,window.matchMedia(e)),n(r.get(e)))}),[t,e]),(0,o.useSyncExternalStore)((e=>(null==t||t.addEventListener("change",e),()=>{null==t||t.removeEventListener("change",e)})),(()=>!!(null==t?void 0:t.matches)),(()=>!1))}},53694:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});const o=e=>"var(".concat(e,")")},50150:()=>{},92280:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});const o={desktop:980,leftCol:1140,mobile:320,mobileLandscape:480,mobileMedium:375,phablet:660,tablet:740,wide:1300}},99923:(e,t,n)=>{"use strict";n.d(t,{HT:()=>s,TG:()=>l,Tq:()=>a});var o=n(92280);const r=e=>"@media (min-width: ".concat("".concat(e,"px"),")"),i=e=>"@media (max-width: ".concat("".concat(e-.1,"px"),")"),c=(e,t)=>"@media (min-width: ".concat("".concat(e,"px"),") and (max-width: ").concat("".concat(t-.1,"px"),")"),s={mobile:r(o.f.mobile),mobileMedium:r(o.f.mobileMedium),mobileLandscape:r(o.f.mobileLandscape),phablet:r(o.f.phablet),tablet:r(o.f.tablet),desktop:r(o.f.desktop),leftCol:r(o.f.leftCol),wide:r(o.f.wide)},l={mobile:i(o.f.mobile),mobileMedium:i(o.f.mobileMedium),mobileLandscape:i(o.f.mobileLandscape),phablet:i(o.f.phablet),tablet:i(o.f.tablet),desktop:i(o.f.desktop),leftCol:i(o.f.leftCol),wide:i(o.f.wide)},a={mobile:{and:{mobileMedium:c(o.f.mobile,o.f.mobileMedium),mobileLandscape:c(o.f.mobile,o.f.mobileLandscape),phablet:c(o.f.mobile,o.f.phablet),tablet:c(o.f.mobile,o.f.tablet),desktop:c(o.f.mobile,o.f.desktop),leftCol:c(o.f.mobile,o.f.leftCol),wide:c(o.f.mobileMedium,o.f.wide)}},mobileMedium:{and:{mobileLandscape:c(o.f.mobileMedium,o.f.mobileLandscape),phablet:c(o.f.mobileMedium,o.f.phablet),tablet:c(o.f.mobileMedium,o.f.tablet),desktop:c(o.f.mobileMedium,o.f.desktop),leftCol:c(o.f.mobileMedium,o.f.leftCol),wide:c(o.f.mobileMedium,o.f.wide)}},mobileLandscape:{and:{phablet:c(o.f.mobileLandscape,o.f.phablet),tablet:c(o.f.mobileLandscape,o.f.tablet),desktop:c(o.f.mobileLandscape,o.f.desktop),leftCol:c(o.f.mobileLandscape,o.f.leftCol),wide:c(o.f.mobileLandscape,o.f.wide)}},phablet:{and:{tablet:c(o.f.phablet,o.f.tablet),desktop:c(o.f.phablet,o.f.desktop),leftCol:c(o.f.phablet,o.f.leftCol),wide:c(o.f.phablet,o.f.wide)}},tablet:{and:{desktop:c(o.f.tablet,o.f.desktop),leftCol:c(o.f.tablet,o.f.leftCol),wide:c(o.f.tablet,o.f.wide)}},desktop:{and:{leftCol:c(o.f.desktop,o.f.leftCol),wide:c(o.f.desktop,o.f.wide)}},leftCol:{and:{wide:c(o.f.leftCol,o.f.wide)}}}}}]);
//# sourceMappingURL=AdPortals-importable.client.web.0438852377cf6d9635f6.js.map