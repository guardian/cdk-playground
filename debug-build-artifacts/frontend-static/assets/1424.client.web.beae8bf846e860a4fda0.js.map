{"version":3,"file":"1424.client.web.beae8bf846e860a4fda0.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/Avatar.tsx","webpack://@guardian/dotcom-rendering/./src/components/Slideshow.tsx","webpack://@guardian/dotcom-rendering/./src/components/Snap.tsx","webpack://@guardian/dotcom-rendering/./src/components/SnapCssSandbox.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/AvatarContainer.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/CardBranding.tsx","webpack://@guardian/dotcom-rendering/./src/lib/decideLogo.ts","webpack://@guardian/dotcom-rendering/./src/components/Card/components/CardLayout.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/CardWrapper.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/ContentWrapper.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/HeadlineWrapper.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/ImageWrapper.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/Card.tsx","webpack://@guardian/dotcom-rendering/./src/lib/revealStyles.ts","webpack://@guardian/dotcom-rendering/./src/components/LatestLinks.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/MediaMeta.tsx","webpack://@guardian/dotcom-rendering/./src/components/SlideshowCarouselScrollingDots.tsx","webpack://@guardian/dotcom-rendering/./src/components/SlideshowCarousel.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/labs.ts","webpack://@guardian/dotcom-rendering/./src/lib/tuple.ts"],"sourcesContent":["import { css } from '@emotion/react';\nimport { Fragment } from 'react';\nimport { getSourceImageUrl } from '../lib/getSourceImageUrl_temp_fix';\nimport { palette } from '../palette';\nimport { generateSources, getFallbackSource } from './Picture';\n\nconst picture = css`\n\theight: 100%;\n\twidth: 100%;\n\toverflow: hidden;\n\tmin-width: 60px;\n`;\n\nconst round = css`\n\tborder-radius: 100%;\n\tbackground-color: ${palette('--avatar-background')};\n`;\n\nconst img = css`\n\tobject-fit: cover;\n\theight: 100%;\n\twidth: 100%;\n`;\n\n/**\n * Used on `picture` and `img` to prevent having a line-height,\n * as these elements are which are `inline` by default.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#styling_with_css\n */\nconst block = css`\n\tdisplay: block;\n`;\n\n/**\n * Defines the possible shapes for the Avatar component.\n * - 'cutout': The avatar has a flat bottom and no background fill.\n * - 'round': The avatar is a round cutout with a filled background.\n */\ntype AvatarShape = 'cutout' | 'round';\n\n/**\n * Props for the Avatar component.\n *\n * @property {string} src - The source URL of the avatar image.\n * @property {string} alt - The alternative text for the avatar image.\n * @property {AvatarShape} [shape='round'] - Determines the avatar design shape.  The default is 'round'.\n */\ntype Props = {\n\tsrc: string;\n\talt: string;\n\tshape?: AvatarShape;\n};\n\nexport const Avatar = ({ src, alt, shape = 'round' }: Props) => {\n\tconst sources = generateSources(getSourceImageUrl(src), [\n\t\t{ breakpoint: 320, width: 75 },\n\t\t{ breakpoint: 740, width: 140 },\n\t]);\n\n\t/**\n\t * The assumption here is readers on devices that do not support srcset\n\t * are likely to be on poor network connections so we're going\n\t * to fallback to the smallest image at low resolution.\n\t *\n\t * Sources are ordered in `descendingByBreakpoint` order,\n\t * so the last one is the smallest.\n\t */\n\tconst fallbackSource = getFallbackSource(sources);\n\n\treturn (\n\t\t<picture\n\t\t\t// data-size={imageSize}\n\t\t\tcss={[block, picture, shape === 'round' && round]}\n\t\t>\n\t\t\t{sources.map((source) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment key={source.breakpoint}>\n\t\t\t\t\t\t{/* High resolution (HDPI) sources*/}\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={source.hiResUrl}\n\t\t\t\t\t\t\tmedia={`(min-width: ${source.breakpoint}px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: ${source.breakpoint}px) and (min-resolution: 120dpi)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/* Low resolution (MDPI) source*/}\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={source.lowResUrl}\n\t\t\t\t\t\t\tmedia={`(min-width: ${source.breakpoint}px)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t<img alt={alt} src={fallbackSource.lowResUrl} css={[block, img]} />\n\t\t</picture>\n\t);\n};\n","import type { Keyframes } from '@emotion/react';\nimport { css, keyframes } from '@emotion/react';\nimport {\n\tfrom,\n\tpalette,\n\tspace,\n\ttextSansBold12,\n\tuntil,\n} from '@guardian/source/foundations';\nimport { takeFirst } from '../lib/tuple';\nimport type { DCRSlideshowImage } from '../types/front';\nimport type { ImageSizeType } from './Card/components/ImageWrapper';\nimport { CardPicture } from './CardPicture';\n\n/**\n * To set the `animation-name` property in Emotion’s `css` method.\n *\n * @see https://emotion.sh/docs/keyframes\n *\n * @param {object} options\n * @param {number} options.fade duration of the fade, in seconds\n * @param {number} options.display duration of the display, in seconds\n * @returns {Keyframes}\n */\nconst decideAnimationName = ({\n\tlength,\n\tindex,\n\tfade,\n\tdisplay,\n}: {\n\tlength: number;\n\tindex: number;\n\tfade: number;\n\tdisplay: number;\n}): Keyframes => {\n\tconst last = index === length - 1;\n\tconst duration = length * (fade + display);\n\n\tconst stages = [\n\t\t{ time: 0, opacity: 0 },\n\t\t{ time: fade, opacity: 1 },\n\t\t{ time: fade + display + fade * (last ? 0 : 1), opacity: 1 },\n\t\t{ time: fade + display + fade * (last ? 1 : 1.01), opacity: 0 },\n\t] as const satisfies ReadonlyArray<{\n\t\ttime: number;\n\t\topacity: 0 | 1;\n\t}>;\n\n\treturn keyframes(\n\t\tstages.map(\n\t\t\t({ time, opacity }) =>\n\t\t\t\t`${(time / duration) * 100}% { opacity: ${opacity}; }`,\n\t\t),\n\t);\n};\n\nconst hideOnMobile = css`\n\t${until.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst animationStyles = (animation: Keyframes) => css`\n\tposition: absolute;\n\twidth: 100%;\n\ttop: 0;\n\tleft: 0;\n\n\tanimation-name: ${animation};\n\tanimation-direction: normal;\n\tanimation-iteration-count: infinite;\n\tanimation-timing-function: linear;\n\topacity: 0;\n\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion */\n\t@media (prefers-reduced-motion: reduce) {\n\t\tdisplay: none;\n\t}\n`;\n\nconst captionStyles = css`\n\t${textSansBold12}\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: linear-gradient(\n\t\tto bottom,\n\t\trgba(0, 0, 0, 0) 0%,\n\t\trgba(0, 0, 0, 0.8) 100%\n\t);\n\tcolor: ${palette.neutral[100]};\n\tpadding: 60px ${space[2]}px ${space[2]}px;\n`;\n\nconst additionalDynamoCaptionStyles = css`\n\t${from.tablet} {\n\t\ttop: 0;\n\t\tbottom: initial;\n\t\tpadding-top: ${space[2]}px;\n\t\tbackground: linear-gradient(\n\t\t\tto top,\n\t\t\trgba(0, 0, 0, 0) 0%,\n\t\t\trgba(0, 0, 0, 0.8) 100%\n\t\t);\n\t}\n`;\n\n/**\n * Slideshow\n * =========\n *\n * Infinitely display a series of slides using CSS animations only,\n * using a technique similar to a musical “round” or “perpetual canon”.\n *\n * - overlays images over each other so they are stacked\n * - positions and styles the given caption values\n * - adds an animation effect to images such that they are only opaque for a short period\n * - uses a staggered delay to the animation which creates the slideshow effect\n *\n *  ```\n *   image 1 : ████████████████████████████ (not animated, always visible)\n *\n *   image 2 : ▁▁▁▁▁▃▅███████▁▁▁▁▁▁▁▁▁▁▁▁▁▁ (fades in, off after 3 is fully opaque)\n *\n *   image 3 : ▁▁▁▁▁▁▁▁▁▁▁▁▃▅███████▁▁▁▁▁▁▁ (fades in, off after 4 is fully opaque)\n *\n *   image 4 : ▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▃▅█████▅▃ (fades in and out)\n *       time →     →     →     →     →\n *  ```\n *\n * What's a perpetual canon?\n * -------------------------\n * It's basically when a bunch of people sing Row, Row, Row Your Boat but the next person doesn't\n * start until you reach the end of Gently down the stream.\n *\n * @see https://en.wikipedia.org/wiki/Round_(music)\n */\nexport const Slideshow = ({\n\timages,\n\timageSize,\n\tisDynamo = false,\n\tfade = 1,\n\tdisplay = 5,\n}: {\n\timages: readonly DCRSlideshowImage[];\n\timageSize: ImageSizeType;\n\tfade?: number;\n\tdisplay?: number;\n\tisDynamo?: boolean;\n}) => (\n\t<>\n\t\t{takeFirst(images, 10).map((slideshowImage, index, { length }) => {\n\t\t\tconst isNotFirst = index > 0;\n\t\t\tconst loading = isNotFirst ? 'lazy' : 'eager';\n\n\t\t\tconst delay = (fade + display) * index - fade;\n\t\t\tconst animation = decideAnimationName({\n\t\t\t\tlength,\n\t\t\t\tindex,\n\t\t\t\tfade,\n\t\t\t\tdisplay,\n\t\t\t});\n\n\t\t\tconst styles = isNotFirst\n\t\t\t\t? [\n\t\t\t\t\t\tanimationStyles(animation),\n\t\t\t\t\t\t// When small and on mobile, hide all images except the first one\n\t\t\t\t\t\timageSize === 'small' && hideOnMobile,\n\t\t\t\t  ]\n\t\t\t\t: undefined;\n\t\t\treturn (\n\t\t\t\t<figure\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tanimationDelay: `${delay}s`,\n\t\t\t\t\t\tanimationDuration: `${length * (fade + display)}s`,\n\t\t\t\t\t}}\n\t\t\t\t\tkey={slideshowImage.imageSrc}\n\t\t\t\t\tcss={styles}\n\t\t\t\t>\n\t\t\t\t\t<CardPicture\n\t\t\t\t\t\tmainImage={slideshowImage.imageSrc}\n\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\talt={slideshowImage.imageCaption}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t/>\n\t\t\t\t\t{!!slideshowImage.imageCaption && (\n\t\t\t\t\t\t<figcaption\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tcaptionStyles,\n\t\t\t\t\t\t\t\tisDynamo && additionalDynamoCaptionStyles,\n\t\t\t\t\t\t\t\t// Don't show captions on mobile for small images\n\t\t\t\t\t\t\t\timageSize === 'small' && hideOnMobile,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{slideshowImage.imageCaption}\n\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t)}\n\t\t\t\t</figure>\n\t\t\t);\n\t\t})}\n\t</>\n);\n","import { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport type { DCRSnapType } from '../types/front';\n\n// Some thrashers don't have \"width: 100%\" applied to their first element which causes them to not correctly take up their space\nconst snapStyles = css`\n\toverflow: hidden;\n\tposition: relative;\n\tdisplay: flex;\n\n\t> * {\n\t\twidth: 100%;\n\t}\n`;\n\ntype Props = {\n\tsnapData?: DCRSnapType;\n\tdataLinkName?: string;\n};\n\nexport const Snap = ({ snapData, dataLinkName }: Props) => {\n\tif (isUndefined(snapData?.embedHtml)) {\n\t\treturn <></>;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tcss={[snapStyles]}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: snapData.embedHtml }}\n\t\t\t\tdata-link-name={dataLinkName}\n\t\t\t/>\n\t\t\t{snapData.embedJs ? (\n\t\t\t\t<div>\n\t\t\t\t\t<script\n\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: snapData.embedJs }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) : undefined}\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport type { DCRSnapType } from '../types/front';\n\ntype Props = {\n\tsnapData?: DCRSnapType;\n\tchildren?: React.ReactNode;\n};\n\nexport const SnapCssSandbox = ({ snapData, children }: Props) => {\n\tif (isUndefined(snapData?.embedHtml)) {\n\t\treturn <></>;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tcss={[\n\t\t\t\t\tcss`\n\t\t\t\t\t\t/* LIs that contain cards are set to flex,\n\t\t\t\t\t\t   setting this allows the contents to take up\n\t\t\t\t\t\t   all the available space in the LI */\n\t\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\t\t${snapData.embedCss};\n\t\t\t\t\t`,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { from, space, until } from '@guardian/source/foundations';\nimport type { ImagePositionType, ImageSizeType } from './ImageWrapper';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\timageSize: ImageSizeType;\n\timagePositionOnDesktop: ImagePositionType;\n};\n\nconst sideMarginStyles = css`\n\tmargin-right: ${space[1]}px;\n`;\n\nconst topMarginStyles = css`\n\tmargin-top: ${space[1]}px;\n`;\n\nconst largerTopMargin = css`\n\t${from.tablet} {\n\t\tmargin-top: 50px;\n\t}\n`;\n\nconst sizingStyles = (\n\timageSize: ImageSizeType,\n\timagePositionOnDesktop: ImagePositionType,\n) => {\n\tconst isVertical =\n\t\timagePositionOnDesktop === 'top' || imagePositionOnDesktop === 'bottom';\n\n\tswitch (imageSize) {\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\t${until.tablet} {\n\t\t\t\t\theight: 73px;\n\t\t\t\t\twidth: 73px;\n\t\t\t\t}\n\n\t\t\t\theight: ${isVertical ? '132px' : '73px'};\n\t\t\t\twidth: ${isVertical ? '132px' : '73px'};\n\t\t\t`;\n\t\tcase 'jumbo':\n\t\t\treturn css`\n\t\t\t\theight: ${isVertical ? '132px' : '180px'};\n\t\t\t\twidth: ${isVertical ? '132px' : '180px'};\n\t\t\t`;\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\t/* Below 980 */\n\t\t\t\t${until.desktop} {\n\t\t\t\t\theight: 108px;\n\t\t\t\t\twidth: 108px;\n\t\t\t\t}\n\t\t\t\t/* Below 740 */\n\t\t\t\t${until.tablet} {\n\t\t\t\t\theight: 73px;\n\t\t\t\t\twidth: 73px;\n\t\t\t\t}\n\t\t\t\t/* Otherwise */\n\t\t\t\theight: 132px;\n\t\t\t\twidth: 132px;\n\t\t\t`;\n\t}\n};\n\nexport const AvatarContainer = ({\n\tchildren,\n\timageSize,\n\timagePositionOnDesktop,\n}: Props) => {\n\tconst isVertical =\n\t\timagePositionOnDesktop === 'top' || imagePositionOnDesktop === 'bottom';\n\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tsideMarginStyles,\n\t\t\t\ttopMarginStyles,\n\t\t\t\tisVertical && largerTopMargin,\n\t\t\t\tsizingStyles(imageSize, imagePositionOnDesktop),\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tspace,\n\ttextSans12,\n\tvisuallyHidden,\n} from '@guardian/source/foundations';\nimport { useConfig } from '../../../components/ConfigContext';\nimport type { ArticleFormat } from '../../../lib/articleFormat';\nimport { decideCardLogo } from '../../../lib/decideLogo';\nimport { getZIndex } from '../../../lib/getZIndex';\nimport { getOphanComponents } from '../../../lib/labs';\nimport { palette as themePalette } from '../../../palette';\nimport type { Branding } from '../../../types/branding';\nimport type { DCRContainerPalette } from '../../../types/front';\nimport type { OnwardsSource } from '../../../types/onwards';\n\ntype Props = {\n\tbranding: Branding;\n\tformat: ArticleFormat;\n\tonwardsSource: OnwardsSource | undefined;\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nconst logoImageStyle = css`\n\tmax-height: 60px;\n\tmargin-left: ${space[3]}px;\n\tvertical-align: middle;\n\theight: auto;\n\twidth: auto;\n`;\n\nconst brandingWrapperStyle = css`\n\tpadding-right: ${space[2]}px;\n\tpadding-bottom: ${space[2]}px;\n\ttext-align: right;\n\tflex: auto;\n\t/* See: https://css-tricks.com/nested-links/ */\n\tz-index: ${getZIndex('card-nested-link')};\n\tposition: relative;\n`;\n\nconst labelStyle = css`\n\t${textSans12}\n\tcolor: ${themePalette('--card-footer-text')};\n`;\n\nexport const CardBranding = ({\n\tbranding,\n\tformat,\n\tonwardsSource,\n\tcontainerPalette,\n}: Props) => {\n\tconst logo = decideCardLogo(branding, format, containerPalette);\n\n\tconst { darkModeAvailable } = useConfig();\n\n\t/**\n\t * Only apply click tracking to branding on related content\n\t */\n\tconst dataAttributes =\n\t\tonwardsSource === 'related-content'\n\t\t\t? getOphanComponents({\n\t\t\t\t\tbranding,\n\t\t\t\t\tlocationPrefix: 'article-related-content',\n\t\t\t  })\n\t\t\t: undefined;\n\n\treturn (\n\t\t<div css={brandingWrapperStyle}>\n\t\t\t<div css={labelStyle}>{logo.label}</div>\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{branding.sponsorName\n\t\t\t\t\t? `This content was paid for by ${branding.sponsorName} and produced by the Guardian Labs team.`\n\t\t\t\t\t: 'This content has been paid for by an advertiser and produced by the Guardian Labs team.'}\n\t\t\t</span>\n\t\t\t<a\n\t\t\t\thref={logo.link}\n\t\t\t\tdata-sponsor={branding.sponsorName.toLowerCase()}\n\t\t\t\trel=\"nofollow\"\n\t\t\t\taria-label={`Visit the ${branding.sponsorName} website`}\n\t\t\t\tdata-testid=\"card-branding-logo\"\n\t\t\t\tdata-component={dataAttributes?.ophanComponentName}\n\t\t\t\tdata-link-name={dataAttributes?.ophanComponentLink}\n\t\t\t>\n\t\t\t\t<picture>\n\t\t\t\t\t{darkModeAvailable && branding.logoForDarkBackground && (\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\tbranding.logoForDarkBackground.dimensions.width\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\theight={\n\t\t\t\t\t\t\t\tbranding.logoForDarkBackground.dimensions.height\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsrcSet={encodeURI(\n\t\t\t\t\t\t\t\tbranding.logoForDarkBackground.src,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tmedia={'(prefers-color-scheme: dark)'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<img\n\t\t\t\t\t\tcss={logoImageStyle}\n\t\t\t\t\t\tsrc={logo.src}\n\t\t\t\t\t\talt={branding.sponsorName}\n\t\t\t\t\t\twidth={logo.dimensions.width}\n\t\t\t\t\t\theight={logo.dimensions.height}\n\t\t\t\t\t/>\n\t\t\t\t</picture>\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n","import type { Branding } from '../types/branding';\nimport type { DCRContainerPalette } from '../types/front';\nimport type { ArticleFormat } from './articleFormat';\nimport { cardHasDarkBackground } from './cardHelpers';\n\nexport const decideCardLogo = (\n\tbranding: Branding,\n\tformat: ArticleFormat,\n\tcontainerPalette?: DCRContainerPalette,\n): Branding['logo'] => {\n\treturn cardHasDarkBackground(format, containerPalette) &&\n\t\tbranding.logoForDarkBackground\n\t\t? branding.logoForDarkBackground\n\t\t: branding.logo;\n};\n","import { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport { from, space, until } from '@guardian/source/foundations';\nimport type { DCRContainerType } from '../../../types/front';\nimport type { CardImageType } from '../../../types/layout';\nimport type { ImagePositionType } from './ImageWrapper';\n\nconst padding = 20;\n\nexport type GapSize = 'none' | 'tiny' | 'small' | 'medium' | 'large';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tcardBackgroundColour: string;\n\timageType: CardImageType | undefined;\n\timagePositionOnDesktop: ImagePositionType;\n\timagePositionOnMobile: ImagePositionType;\n\tminWidthInPixels?: number;\n\tcontainerType?: DCRContainerType;\n\tgapSize?: GapSize;\n};\n\nconst containerStyles = css`\n\tdisplay: flex;\n\tflex-basis: 100%;\n`;\n\n// Until mobile landscape, show 1 card on small screens\n// Above mobile landscape, show 1 full card and min 20vw of second card\nconst videoWidth = css`\n\tmin-width: 300px;\n\tmax-width: 600px;\n\twidth: calc(80vw - ${padding}px);\n\toverflow: hidden;\n\n\t${until.mobileLandscape} {\n\t\twidth: calc(100vw - ${padding}px);\n\t}\n`;\n\nconst minWidth = (minWidthInPixels?: number) => {\n\tif (!isUndefined(minWidthInPixels) && minWidthInPixels > 0) {\n\t\treturn css`\n\t\t\tmin-width: ${minWidthInPixels}px;\n\t\t`;\n\t}\n\treturn css`\n\t\twidth: 100%;\n\t`;\n};\n\n/**\n * Cards with an avatar are a special case as these are rendered horizontally\n * on mobile and vertically on desktop by default, with the avatar on the right\n * or bottom of the card respectively.\n *\n * A boosted card in a `dynamic/slow` container is an exception to this as it is\n * rendered horizontally on desktop by overriding `imagePositionOnDesktop`\n *\n * `scrollable/medium` is another exception as the medium cards require a\n * vertical layout at all breakpoints so we explicitly check that the image\n * position for desktop and mobile are both set to `bottom` to avoid affecting\n * existing layouts where the default position values are relied upon.\n */\nconst decideDirection = (\n\timagePositionOnMobile: ImagePositionType,\n\timagePositionOnDesktop: ImagePositionType,\n\thasAvatar?: boolean,\n) => {\n\tconst imagePosition = {\n\t\ttop: 'column',\n\t\tbottom: 'column-reverse',\n\t\tleft: 'row',\n\t\tright: 'row-reverse',\n\t\tnone: 'column',\n\t};\n\n\tif (hasAvatar) {\n\t\tif (\n\t\t\timagePositionOnMobile === 'bottom' &&\n\t\t\timagePositionOnDesktop === 'bottom'\n\t\t) {\n\t\t\treturn {\n\t\t\t\tmobile: imagePosition['bottom'],\n\t\t\t\tdesktop: imagePosition['bottom'],\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\timagePositionOnDesktop === 'left' ||\n\t\t\timagePositionOnDesktop === 'right'\n\t\t) {\n\t\t\treturn {\n\t\t\t\tmobile: imagePosition['right'],\n\t\t\t\tdesktop: imagePosition['right'],\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmobile: imagePosition['right'],\n\t\t\tdesktop: imagePosition['bottom'],\n\t\t};\n\t}\n\n\treturn {\n\t\tmobile: imagePosition[imagePositionOnMobile],\n\t\tdesktop: imagePosition[imagePositionOnDesktop],\n\t};\n};\n\nconst decidePosition = (\n\timagePositionOnMobile: ImagePositionType,\n\timagePositionOnDesktop: ImagePositionType,\n\thasAvatar?: boolean,\n) => {\n\tconst { mobile, desktop } = decideDirection(\n\t\timagePositionOnMobile,\n\t\timagePositionOnDesktop,\n\t\thasAvatar,\n\t);\n\n\treturn css`\n\t\tflex-direction: ${mobile};\n\t\t${from.tablet} {\n\t\t\tflex-direction: ${desktop};\n\t\t}\n\t`;\n};\n\n/** Detemines the gap size between components in card layout */\nconst decideGap = (gapSize: GapSize) => {\n\tswitch (gapSize) {\n\t\tcase 'none':\n\t\t\treturn `0`;\n\t\tcase 'tiny':\n\t\t\treturn `${space[1]}px`;\n\t\tcase 'small':\n\t\t\treturn `${space[2]}px`;\n\t\tcase 'medium':\n\t\t\treturn '10px';\n\t\tcase 'large':\n\t\t\treturn `${space[5]}px`;\n\t}\n};\n\nexport const CardLayout = ({\n\tchildren,\n\tcardBackgroundColour,\n\timagePositionOnDesktop,\n\timagePositionOnMobile,\n\tminWidthInPixels,\n\timageType,\n\tcontainerType,\n\tgapSize = 'small',\n}: Props) => (\n\t<div\n\t\tcss={[\n\t\t\tcontainerStyles,\n\t\t\tcontainerType === 'fixed/video'\n\t\t\t\t? videoWidth\n\t\t\t\t: minWidth(minWidthInPixels),\n\t\t\tdecidePosition(\n\t\t\t\timagePositionOnMobile,\n\t\t\t\timagePositionOnDesktop,\n\t\t\t\timageType === 'avatar',\n\t\t\t),\n\t\t]}\n\t\tstyle={{\n\t\t\tbackgroundColor: cardBackgroundColour,\n\t\t\tgap: decideGap(gapSize),\n\t\t}}\n\t>\n\t\t{children}\n\t</div>\n);\n","import { css } from '@emotion/react';\nimport { space, until } from '@guardian/source/foundations';\nimport type { ArticleFormat } from '../../../lib/articleFormat';\nimport { palette } from '../../../palette';\nimport type { DCRContainerPalette } from '../../../types/front';\nimport { ContainerOverrides } from '../../ContainerOverrides';\nimport { FormatBoundary } from '../../FormatBoundary';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n\tshowTopBarDesktop?: boolean;\n\tshowTopBarMobile?: boolean;\n\tisOnwardContent?: boolean;\n};\n\nconst baseCardStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\twidth: 100%;\n\t/* We absolutely position the faux link\n\t\tso this is required here */\n\tposition: relative;\n\n\t/* Target Safari 10.1 */\n\t/* https://www.browserstack.com/guide/create-browser-specific-css */\n\t@media not all and (min-resolution: 0.001dpcm) {\n\t\t@supports (-webkit-appearance: none) and\n\t\t\t(not (stroke-color: transparent)) {\n\t\t\tdisplay: grid;\n\t\t\tgrid-auto-rows: min-content;\n\t\t\talign-content: start;\n\t\t}\n\t}\n\n\t/* a tag specific styles */\n\tcolor: inherit;\n\ttext-decoration: none;\n`;\n\nconst hoverStyles = css`\n\t:hover .image-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tleft: 0;\n\t\tbackground-color: ${palette('--card-background-hover')};\n\t}\n\n\t/* Only underline the headline element we want to target (not kickers/sublink headlines) */\n\t:hover .card-headline .show-underline {\n\t\ttext-decoration: underline;\n\t}\n`;\n\n/** When we hover on sublinks, we want to prevent the general hover styles applying */\nconst sublinkHoverStyles = css`\n\t:has(ul.sublinks:hover) {\n\t\t.card-headline .show-underline {\n\t\t\ttext-decoration: none;\n\t\t}\n\t}\n`;\n\nconst desktopTopBarStyles = css`\n\t:before {\n\t\tborder-top: 1px solid ${palette('--card-border-top')};\n\t\tcontent: '';\n\t\tz-index: 2;\n\t\twidth: 100%;\n\t\tpadding-bottom: ${space[2]}px;\n\t\tbackground-color: unset;\n\t}\n`;\n\nconst mobileTopBarStyles = css`\n\t${until.tablet} {\n\t\t${desktopTopBarStyles}\n\t}\n`;\n\nconst onwardContentStyles = css`\n\tborder-radius: ${space[2]}px;\n\toverflow: hidden;\n\n\t:hover .image-overlay {\n\t\tborder-radius: ${space[2]}px;\n\t}\n`;\n\nexport const CardWrapper = ({\n\tchildren,\n\tformat,\n\tcontainerPalette,\n\tshowTopBarDesktop = true,\n\tshowTopBarMobile = false,\n\tisOnwardContent = false,\n}: Props) => {\n\treturn (\n\t\t<FormatBoundary format={format}>\n\t\t\t<ContainerOverrides containerPalette={containerPalette}>\n\t\t\t\t<div\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tbaseCardStyles,\n\t\t\t\t\t\thoverStyles,\n\t\t\t\t\t\tsublinkHoverStyles,\n\t\t\t\t\t\tshowTopBarDesktop && desktopTopBarStyles,\n\t\t\t\t\t\tshowTopBarMobile && mobileTopBarStyles,\n\t\t\t\t\t\tisOnwardContent && onwardContentStyles,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</ContainerOverrides>\n\t\t</FormatBoundary>\n\t);\n};\n","import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport { between, from, space } from '@guardian/source/foundations';\nimport type { CardImageType } from '../../../types/layout';\nimport type { ImagePositionType, ImageSizeType } from './ImageWrapper';\n\nconst sizingStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\tjustify-content: space-between;\n`;\n\n/**\n * This function works in partnership with its sibling in `ImageWrapper`. If you\n * change any values here be sure to update that file as well.\n *\n */\nconst flexBasisStyles = ({\n\timageSize,\n\timageType,\n}: {\n\timageSize: ImageSizeType;\n\timageType?: CardImageType;\n}): SerializedStyles => {\n\tif (imageType === 'avatar') {\n\t\treturn css`\n\t\t\tflex-basis: 100%;\n\t\t`;\n\t}\n\tswitch (imageSize) {\n\t\tdefault:\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 75%;\n\t\t\t\t${between.tablet.and.desktop} {\n\t\t\t\t\tflex-basis: 60%;\n\t\t\t\t}\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tflex-basis: 70%;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tflex-basis: 50%;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tflex-basis: 34%;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'jumbo':\n\t\t\treturn css`\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tflex-basis: 25%;\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\nconst paddingStyles = (\n\timagePosition: ImagePositionType,\n\tisFlexibleContainer: boolean,\n) => {\n\t/**\n\t * If we're in a flexible container there is a 20px gap between the image\n\t * and content. We don't apply padding to the content on the same edge as\n\t * the image so the content is aligned with the grid.\n\t */\n\tif (isFlexibleContainer && imagePosition === 'left') {\n\t\treturn css`\n\t\t\tpadding: ${space[1]}px ${space[1]}px ${space[1]}px 0;\n\t\t`;\n\t}\n\n\tif (isFlexibleContainer && imagePosition === 'right') {\n\t\treturn css`\n\t\t\tpadding: ${space[1]}px 0 ${space[1]}px ${space[1]}px;\n\t\t`;\n\t}\n\n\treturn css`\n\t\tpadding: ${space[1]}px;\n\t`;\n};\n\ntype Props = {\n\tchildren: React.ReactNode;\n\timageType?: CardImageType;\n\timageSize: ImageSizeType;\n\timagePositionOnDesktop: ImagePositionType;\n\thasBackgroundColour?: boolean;\n\tisOnwardContent?: boolean;\n\tisFlexibleContainer?: boolean;\n};\n\nexport const ContentWrapper = ({\n\tchildren,\n\timageType,\n\timageSize,\n\timagePositionOnDesktop,\n\thasBackgroundColour,\n\tisOnwardContent,\n\tisFlexibleContainer = false,\n}: Props) => {\n\tconst isHorizontalOnDesktop =\n\t\timagePositionOnDesktop === 'left' || imagePositionOnDesktop === 'right';\n\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tsizingStyles,\n\t\t\t\tisHorizontalOnDesktop &&\n\t\t\t\t\tflexBasisStyles({ imageSize, imageType }),\n\t\t\t\t(!!hasBackgroundColour || !!isOnwardContent) &&\n\t\t\t\t\tpaddingStyles(imagePositionOnDesktop, isFlexibleContainer),\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\n\ntype Props = {\n\tchildren: React.ReactNode;\n};\n\nexport const HeadlineWrapper = ({ children }: Props) => (\n\t<div\n\t\tcss={css`\n\t\t\tpadding-bottom: 8px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n","import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport { between, from, until } from '@guardian/source/foundations';\nimport type { CardImageType } from '../../../types/layout';\nimport { PlayIcon } from './PlayIcon';\n\nconst imageFixedSize = {\n\ttiny: 86,\n\tsmall: 122.5,\n\tmedium: 125,\n};\n\ntype ImageFixedSize = keyof typeof imageFixedSize;\n\nexport type ImageFixedSizeOptions = {\n\tmobile: ImageFixedSize;\n\ttablet?: ImageFixedSize;\n\tdesktop?: ImageFixedSize;\n};\n\nexport type ImagePositionType = 'left' | 'top' | 'right' | 'bottom' | 'none';\nexport type ImageSizeType =\n\t| 'small'\n\t| 'medium'\n\t| 'large'\n\t| 'jumbo'\n\t| 'carousel'\n\t| 'feature'\n\t| 'feature-large';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\timageSize: ImageSizeType;\n\timageFixedSizes?: ImageFixedSizeOptions;\n\timageType?: CardImageType;\n\timagePositionOnDesktop: ImagePositionType;\n\timagePositionOnMobile: ImagePositionType;\n\tshowPlayIcon: boolean;\n\t/**\n\t * Forces hiding the image overlay added to pictures & slideshows on hover.\n\t * This is to allow hiding the overlay on slideshow carousels where we don't\n\t * want it to be shown whilst retaining it for existing slideshows.\n\t */\n\thideImageOverlay?: boolean;\n};\n\n/**\n * This function works in partnership with its sibling in `ContentWrapper`. If you\n * change any values here be sure to update that file as well.\n *\n */\nconst flexBasisStyles = ({\n\timageSize,\n}: {\n\timageSize: ImageSizeType;\n}): SerializedStyles => {\n\tswitch (imageSize) {\n\t\tdefault:\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 25%;\n\t\t\t\t${between.tablet.and.desktop} {\n\t\t\t\t\tflex-basis: 40%;\n\t\t\t\t}\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tflex-basis: 30%;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 50%;\n\t\t\t`;\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 66%;\n\t\t\t`;\n\t\tcase 'jumbo':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 75%;\n\t\t\t`;\n\t}\n};\n/**\n * Below tablet, we fix the size of the image and add a margin around it.\n * The corresponding content flex grows to fill the space.\n *\n * Fixed images sizes can optionally be applied at tablet and desktop.\n */\nconst fixImageWidthStyles = (width: number) => css`\n\twidth: ${width}px;\n\tflex-shrink: 0;\n\tflex-basis: unset;\n\talign-self: flex-start;\n`;\n\nconst fixImageWidth = ({\n\tmobile,\n\ttablet,\n\tdesktop,\n}: ImageFixedSizeOptions) => css`\n\t${until.tablet} {\n\t\t${fixImageWidthStyles(imageFixedSize[mobile])}\n\t}\n\t${tablet &&\n\tcss`\n\t\t${between.tablet.and.desktop} {\n\t\t\t${fixImageWidthStyles(imageFixedSize[tablet])}\n\t\t}\n\t`}\n\t${desktop &&\n\tcss`\n\t\t${from.desktop} {\n\t\t\t${fixImageWidthStyles(imageFixedSize[desktop])}\n\t\t}\n\t`}\n`;\n\nexport const ImageWrapper = ({\n\tchildren,\n\timageSize,\n\timageFixedSizes = { mobile: 'medium' },\n\timageType,\n\timagePositionOnDesktop,\n\timagePositionOnMobile,\n\tshowPlayIcon,\n\thideImageOverlay,\n}: Props) => {\n\tconst isHorizontalOnDesktop =\n\t\timagePositionOnDesktop === 'left' || imagePositionOnDesktop === 'right';\n\tconst isHorizontalOnMobile =\n\t\timagePositionOnMobile === 'left' || imagePositionOnMobile === 'right';\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\timageType === 'slideshow' &&\n\t\t\t\t\tisHorizontalOnDesktop &&\n\t\t\t\t\tflexBasisStyles({\n\t\t\t\t\t\timageSize,\n\t\t\t\t\t}),\n\t\t\t\t(imageType === 'picture' || imageType === 'video') &&\n\t\t\t\t\tisHorizontalOnDesktop &&\n\t\t\t\t\tflexBasisStyles({\n\t\t\t\t\t\timageSize,\n\t\t\t\t\t}),\n\t\t\t\timageType === 'avatar' &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: flex-end;\n\t\t\t\t\t`,\n\t\t\t\t/* If no image position for mobile is provided then hide the image */\n\t\t\t\timagePositionOnMobile === 'none' &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\t${until.tablet} {\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t`,\n\t\t\t\tisHorizontalOnMobile && fixImageWidth(imageFixedSizes),\n\n\t\t\t\tisHorizontalOnDesktop &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\t${from.tablet} {\n\t\t\t\t\t\t\talign-self: flex-start;\n\t\t\t\t\t\t}\n\t\t\t\t\t`,\n\t\t\t\tcss`\n\t\t\t\t\t/* position relative is required here to bound the image overlay */\n\t\t\t\t\tposition: relative;\n\t\t\t\t\timg {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t]}\n\t\t>\n\t\t\t<>\n\t\t\t\t{children}\n\t\t\t\t{/* This image overlay is styled when the CardLink is hovered */}\n\t\t\t\t{(imageType === 'picture' || imageType === 'slideshow') &&\n\t\t\t\t\t!hideImageOverlay && <div className=\"image-overlay\" />}\n\t\t\t\t{imageType === 'picture' && showPlayIcon && (\n\t\t\t\t\t<PlayIcon\n\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\timagePositionOnMobile={imagePositionOnMobile}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</>\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport {\n\tfrom,\n\tpalette as sourcePalette,\n\tspace,\n} from '@guardian/source/foundations';\nimport { Hide, Link } from '@guardian/source/react-components';\nimport { ArticleDesign, type ArticleFormat } from '../../lib/articleFormat';\nimport { isMediaCard as isAMediaCard } from '../../lib/cardHelpers';\nimport { getZIndex } from '../../lib/getZIndex';\nimport { DISCUSSION_ID_DATA_ATTRIBUTE } from '../../lib/useCommentCount';\nimport { palette } from '../../palette';\nimport type { Branding } from '../../types/branding';\nimport type { StarRating as Rating } from '../../types/content';\nimport type {\n\tAspectRatio,\n\tDCRContainerPalette,\n\tDCRContainerType,\n\tDCRFrontImage,\n\tDCRSlideshowImage,\n\tDCRSnapType,\n\tDCRSupportingContent,\n} from '../../types/front';\nimport type { MainMedia } from '../../types/mainMedia';\nimport type { OnwardsSource } from '../../types/onwards';\nimport type { PodcastSeriesImage } from '../../types/tag';\nimport { Avatar } from '../Avatar';\nimport { CardCommentCount } from '../CardCommentCount.importable';\nimport { CardHeadline, type ResponsiveFontSize } from '../CardHeadline';\nimport type { Loading } from '../CardPicture';\nimport { CardPicture } from '../CardPicture';\nimport { Island } from '../Island';\nimport { LatestLinks } from '../LatestLinks.importable';\nimport { MediaDuration } from '../MediaDuration';\nimport { MediaMeta } from '../MediaMeta';\nimport { Slideshow } from '../Slideshow';\nimport { SlideshowCarousel } from '../SlideshowCarousel.importable';\nimport { Snap } from '../Snap';\nimport { SnapCssSandbox } from '../SnapCssSandbox';\nimport { StarRating } from '../StarRating/StarRating';\nimport type { Alignment } from '../SupportingContent';\nimport { SupportingContent } from '../SupportingContent';\nimport { YoutubeBlockComponent } from '../YoutubeBlockComponent.importable';\nimport { AvatarContainer } from './components/AvatarContainer';\nimport { CardAge } from './components/CardAge';\nimport { CardBranding } from './components/CardBranding';\nimport { CardFooter } from './components/CardFooter';\nimport { CardLayout, type GapSize } from './components/CardLayout';\nimport { CardLink } from './components/CardLink';\nimport { CardWrapper } from './components/CardWrapper';\nimport { ContentWrapper } from './components/ContentWrapper';\nimport { HeadlineWrapper } from './components/HeadlineWrapper';\nimport type {\n\tImageFixedSizeOptions,\n\tImagePositionType,\n\tImageSizeType,\n} from './components/ImageWrapper';\nimport { ImageWrapper } from './components/ImageWrapper';\nimport { TrailText, type TrailTextSize } from './components/TrailText';\n\nexport type Position = 'inner' | 'outer' | 'none';\n\nexport const BETA_CONTAINERS = [\n\t'scrollable/highlights',\n\t'flexible/special',\n\t'flexible/general',\n\t'scrollable/small',\n\t'scrollable/medium',\n\t'scrollable/feature',\n\t'static/feature/2',\n\t'static/medium/4',\n];\n\nexport type Props = {\n\tlinkTo: string;\n\tformat: ArticleFormat;\n\tabsoluteServerTimes: boolean;\n\theadlineText: string;\n\theadlineSizes?: ResponsiveFontSize;\n\tshowQuotedHeadline?: boolean;\n\tbyline?: string;\n\tshowByline?: boolean;\n\twebPublicationDate?: string;\n\timage?: DCRFrontImage;\n\timagePositionOnDesktop?: ImagePositionType;\n\timagePositionOnMobile?: ImagePositionType;\n\t/** Size is ignored when position = 'top' because in that case the image flows based on width */\n\timageSize?: ImageSizeType;\n\timageLoading: Loading;\n\tisCrossword?: boolean;\n\tisOnwardContent?: boolean;\n\ttrailText?: string;\n\tavatarUrl?: string;\n\tshowClock?: boolean;\n\tmainMedia?: MainMedia;\n\t/** Note YouTube recommends a minimum width of 480px @see https://developers.google.com/youtube/terms/required-minimum-functionality#embedded-youtube-player-size\n\t * At 300px or below, the player will begin to lose functionality e.g. volume controls being omitted.\n\t * Youtube requires a minimum width 200px.\n\t */\n\tcanPlayInline?: boolean;\n\tkickerText?: string;\n\tshowPulsingDot?: boolean;\n\tstarRating?: Rating;\n\tminWidthInPixels?: number;\n\t/** Used for Ophan tracking */\n\tdataLinkName?: string;\n\t/** Only used on Labs cards */\n\tbranding?: Branding;\n\t/** Supporting content refers to sublinks */\n\tsupportingContent?: DCRSupportingContent[];\n\tsupportingContentAlignment?: Alignment;\n\tsupportingContentPosition?: Position;\n\tsnapData?: DCRSnapType;\n\tcontainerPalette?: DCRContainerPalette;\n\tcontainerType?: DCRContainerType;\n\tshowAge?: boolean;\n\tdiscussionApiUrl: string;\n\tdiscussionId?: string;\n\t/** The first card in a dynamic package is ”Dynamo” and gets special styling */\n\tisDynamo?: boolean;\n\tisExternalLink: boolean;\n\tslideshowImages?: DCRSlideshowImage[];\n\t/** Determines if liveblog update links are displayed on a card */\n\tshowLivePlayable?: boolean;\n\tliveUpdatesAlignment?: Alignment;\n\tliveUpdatesPosition?: Position;\n\tonwardsSource?: OnwardsSource;\n\tpauseOffscreenVideo?: boolean;\n\tshowMainVideo?: boolean;\n\tisTagPage?: boolean;\n\t/** Allows the consumer to set an aspect ratio on the image of 5:3, 5:4, 4:5 or 1:1 */\n\taspectRatio?: AspectRatio;\n\tindex?: number;\n\t/** The Splash card in a flexible container gets a different visual treatment to other cards*/\n\tisFlexSplash?: boolean;\n\tshowTopBarDesktop?: boolean;\n\tshowTopBarMobile?: boolean;\n\ttrailTextSize?: TrailTextSize;\n\t/** If specified, overrides trail text colour */\n\ttrailTextColour?: string;\n\t/** The square podcast series image, if it exists for a card */\n\tpodcastImage?: PodcastSeriesImage;\n\tgalleryCount?: number;\n};\n\nconst starWrapper = (cardHasImage: boolean) => css`\n\tbackground-color: ${sourcePalette.brandAlt[400]};\n\tcolor: ${sourcePalette.neutral[0]};\n\tmargin-top: ${cardHasImage ? '2' : space[1]}px;\n\tdisplay: inline-block;\n\n\t${from.tablet} {\n\t\tmargin-top: ${space[1]}px;\n\t}\n`;\n\nconst StarRatingComponent = ({\n\trating,\n\tcardHasImage,\n}: {\n\trating: Rating;\n\tcardHasImage: boolean;\n}) => (\n\t<div css={starWrapper(cardHasImage)}>\n\t\t<StarRating rating={rating} size=\"small\" />\n\t</div>\n);\n\nconst HorizontalDivider = () => (\n\t<div\n\t\tcss={css`\n\t\t\t${from.tablet} {\n\t\t\t\tborder-top: 1px solid ${palette('--card-border-top')};\n\t\t\t\theight: 1px;\n\t\t\t\twidth: 50%;\n\t\t\t\t${from.tablet} {\n\t\t\t\t\twidth: 100px;\n\t\t\t\t}\n\t\t\t\t${from.desktop} {\n\t\t\t\t\twidth: 140px;\n\t\t\t\t}\n\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t}\n\t\t`}\n\t/>\n);\n\nconst getMedia = ({\n\timageUrl,\n\timageAltText,\n\tavatarUrl,\n\tisCrossword,\n\tslideshowImages,\n\tmainMedia,\n\tcanPlayInline,\n\tpodcastImage,\n\tisBetaContainer,\n}: {\n\timageUrl?: string;\n\timageAltText?: string;\n\tavatarUrl?: string;\n\tisCrossword?: boolean;\n\tslideshowImages?: DCRSlideshowImage[];\n\tmainMedia?: MainMedia;\n\tcanPlayInline?: boolean;\n\tpodcastImage?: PodcastSeriesImage;\n\tisBetaContainer: boolean;\n}) => {\n\tif (mainMedia && mainMedia.type === 'Video' && canPlayInline) {\n\t\treturn {\n\t\t\ttype: 'video',\n\t\t\tmainMedia,\n\t\t\t...(imageUrl && { imageUrl }),\n\t\t} as const;\n\t}\n\tif (slideshowImages) return { type: 'slideshow', slideshowImages } as const;\n\tif (avatarUrl) return { type: 'avatar', avatarUrl } as const;\n\tif (podcastImage && isBetaContainer) {\n\t\treturn {\n\t\t\ttype: 'podcast',\n\t\t\tpodcastImage,\n\t\t\ttrailImage: { src: imageUrl, altText: imageAltText },\n\t\t} as const;\n\t}\n\tif (imageUrl) {\n\t\tconst type = isCrossword ? 'crossword' : 'picture';\n\t\treturn { type, imageUrl, imageAltText } as const;\n\t}\n\treturn undefined;\n};\n\nconst decideSublinkPosition = (\n\tsupportingContent?: DCRSupportingContent[],\n\timagePositionOnDesktop?: ImagePositionType,\n\talignment?: Alignment,\n\tsupportingContentPosition?: Position,\n\tshowLivePlayable?: boolean,\n): 'inner' | 'outer' | 'none' => {\n\tif (!supportingContent || supportingContent.length === 0) {\n\t\treturn 'none';\n\t}\n\n\tif (supportingContentPosition) {\n\t\treturn supportingContentPosition;\n\t}\n\n\tif (\n\t\timagePositionOnDesktop === 'top' ||\n\t\timagePositionOnDesktop === 'bottom' ||\n\t\tshowLivePlayable\n\t) {\n\t\treturn 'outer';\n\t}\n\n\treturn alignment === 'vertical' ? 'inner' : 'outer';\n};\n\nconst getHeadlinePosition = ({\n\tisFlexSplash,\n\tcontainerType,\n\tshowLivePlayable,\n\tisMediaCard,\n}: {\n\tcontainerType?: DCRContainerType;\n\tisFlexSplash?: boolean;\n\tshowLivePlayable: boolean;\n\tisMediaCard: boolean;\n}) => {\n\tif (isMediaCard) return 'inner';\n\tif (containerType === 'flexible/special' && isFlexSplash) {\n\t\treturn 'outer';\n\t}\n\n\tif (\n\t\tcontainerType === 'flexible/general' &&\n\t\tisFlexSplash &&\n\t\tshowLivePlayable\n\t) {\n\t\treturn 'outer';\n\t}\n\n\treturn 'inner';\n};\n\nexport const isWithinTwelveHours = (webPublicationDate: string): boolean => {\n\tconst timeDiffMs = Math.abs(\n\t\tnew Date().getTime() - new Date(webPublicationDate).getTime(),\n\t);\n\tconst timeDiffHours = timeDiffMs / (1000 * 60 * 60);\n\treturn timeDiffHours <= 12;\n};\n\nexport const Card = ({\n\tlinkTo,\n\tformat,\n\theadlineText,\n\theadlineSizes,\n\tshowQuotedHeadline,\n\tbyline,\n\tshowByline,\n\twebPublicationDate,\n\timage,\n\timagePositionOnDesktop = 'top',\n\timagePositionOnMobile = 'left',\n\timageSize = 'small',\n\timageLoading,\n\ttrailText,\n\tavatarUrl,\n\tshowClock,\n\tmainMedia,\n\tcanPlayInline,\n\tkickerText,\n\tshowPulsingDot,\n\tstarRating,\n\tminWidthInPixels,\n\tdataLinkName,\n\tbranding,\n\tsupportingContent,\n\tsupportingContentAlignment = 'vertical',\n\tsupportingContentPosition,\n\tsnapData,\n\tcontainerPalette,\n\tcontainerType,\n\tshowAge = true,\n\tdiscussionApiUrl,\n\tdiscussionId,\n\tisDynamo,\n\tisCrossword,\n\tisOnwardContent = false,\n\tisExternalLink,\n\tslideshowImages,\n\tshowLivePlayable = false,\n\tliveUpdatesAlignment = 'vertical',\n\tliveUpdatesPosition = 'inner',\n\tonwardsSource,\n\tpauseOffscreenVideo = false,\n\tshowMainVideo = true,\n\tabsoluteServerTimes,\n\tisTagPage = false,\n\taspectRatio,\n\tindex = 0,\n\tisFlexSplash,\n\tshowTopBarDesktop = true,\n\tshowTopBarMobile = false,\n\ttrailTextSize,\n\ttrailTextColour,\n\tpodcastImage,\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars -- Added in preparation for UI changes to display gallery count\n\tgalleryCount,\n}: Props) => {\n\tconst hasSublinks = supportingContent && supportingContent.length > 0;\n\tconst sublinkPosition = decideSublinkPosition(\n\t\tsupportingContent,\n\t\timagePositionOnDesktop,\n\t\tsupportingContentAlignment,\n\t\tsupportingContentPosition,\n\t\tshowLivePlayable,\n\t);\n\tconst showQuotes = !!showQuotedHeadline;\n\n\tconst isOpinion =\n\t\tformat.design === ArticleDesign.Comment ||\n\t\tformat.design === ArticleDesign.Editorial ||\n\t\tformat.design === ArticleDesign.Letter;\n\n\tconst isBetaContainer = BETA_CONTAINERS.includes(containerType ?? '');\n\n\tconst decideAge = () => {\n\t\tif (!webPublicationDate) return undefined;\n\t\tconst withinTwelveHours = isWithinTwelveHours(webPublicationDate);\n\n\t\tconst shouldShowAge =\n\t\t\tisTagPage || !!onwardsSource || (showAge && withinTwelveHours);\n\n\t\tif (!shouldShowAge) return undefined;\n\n\t\treturn (\n\t\t\t<CardAge\n\t\t\t\twebPublication={{\n\t\t\t\t\tdate: webPublicationDate,\n\t\t\t\t\tisWithinTwelveHours: withinTwelveHours,\n\t\t\t\t}}\n\t\t\t\tshowClock={showClock}\n\t\t\t\tabsoluteServerTimes={absoluteServerTimes}\n\t\t\t\tisTagPage={isTagPage}\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst CommentCount = () =>\n\t\t!!discussionId && (\n\t\t\t<Link\n\t\t\t\t{...{\n\t\t\t\t\t[DISCUSSION_ID_DATA_ATTRIBUTE]: discussionId,\n\t\t\t\t}}\n\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\tdata-link-name=\"Comment count\"\n\t\t\t\thref={`${linkTo}#comments`}\n\t\t\t\tcssOverrides={css`\n\t\t\t\t\t/* See: https://css-tricks.com/nested-links/ */\n\t\t\t\t\tz-index: ${getZIndex('card-nested-link')};\n\t\t\t\t\t/* The following styles turn off those provided by Link */\n\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t/* stylelint-disable-next-line property-disallowed-list */\n\t\t\t\t\tfont-family: inherit;\n\t\t\t\t\tfont-size: inherit;\n\t\t\t\t\tline-height: inherit;\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\tmin-height: 10px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Island priority=\"feature\" defer={{ until: 'visible' }}>\n\t\t\t\t\t<CardCommentCount\n\t\t\t\t\t\tdiscussionApiUrl={discussionApiUrl}\n\t\t\t\t\t\tdiscussionId={discussionId}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</Link>\n\t\t);\n\n\tif (snapData?.embedHtml) {\n\t\treturn (\n\t\t\t<SnapCssSandbox snapData={snapData}>\n\t\t\t\t<Snap snapData={snapData} dataLinkName={dataLinkName} />\n\t\t\t</SnapCssSandbox>\n\t\t);\n\t}\n\n\t// If the card isn't playable, we need to show a play icon.\n\t// Otherwise, this is handled by the YoutubeAtom\n\tconst showPlayIcon =\n\t\tmainMedia?.type === 'Video' && !canPlayInline && showMainVideo;\n\n\tconst media = getMedia({\n\t\timageUrl: image?.src,\n\t\timageAltText: image?.altText,\n\t\tavatarUrl,\n\t\tisCrossword,\n\t\tslideshowImages,\n\t\tmainMedia,\n\t\tcanPlayInline,\n\t\tpodcastImage,\n\t\tisBetaContainer,\n\t});\n\n\t// For opinion type cards with avatars (which aren't onwards content)\n\t// we render the footer in a different location\n\tconst showCommentFooter =\n\t\tisOpinion && !isOnwardContent && media?.type === 'avatar';\n\n\t/**\n-\t * Media cards have contrasting background colours. We add additional\n\t * padding to these cards to keep the text readable.\n-\t */\n\tconst isMediaCard = isAMediaCard(format);\n\n\tconst backgroundColour = isMediaCard\n\t\t? palette('--card-media-background')\n\t\t: palette('--card-background');\n\n\t/* Whilst we migrate to the new container types, we need to check which container we are in. */\n\tconst isFlexibleContainer =\n\t\tcontainerType === 'flexible/special' ||\n\t\tcontainerType === 'flexible/general';\n\n\tconst isSmallCard = containerType === 'scrollable/small';\n\n\tconst imageFixedSizeOptions = (): ImageFixedSizeOptions => {\n\t\tif (isSmallCard) {\n\t\t\treturn {\n\t\t\t\tmobile: 'tiny',\n\t\t\t\ttablet: 'small',\n\t\t\t\tdesktop: 'small',\n\t\t\t};\n\t\t}\n\t\tif (isFlexibleContainer) return { mobile: 'small' };\n\t\treturn { mobile: 'medium' };\n\t};\n\n\tconst headlinePosition = getHeadlinePosition({\n\t\tcontainerType,\n\t\tisFlexSplash,\n\t\tshowLivePlayable,\n\t\tisMediaCard,\n\t});\n\n\tconst hideTrailTextUntil = () => {\n\t\tif (isFlexibleContainer) {\n\t\t\treturn undefined;\n\t\t} else if (\n\t\t\timageSize === 'large' &&\n\t\t\timagePositionOnDesktop === 'right' &&\n\t\t\tmedia?.type !== 'avatar'\n\t\t) {\n\t\t\treturn 'desktop';\n\t\t} else {\n\t\t\treturn 'tablet';\n\t\t}\n\t};\n\n\t/** Determines the gap of between card components based on card properties */\n\tconst getGapSize = (): GapSize => {\n\t\tif (isOnwardContent) return 'none';\n\t\tif (isMediaCard && !isFlexibleContainer) return 'tiny';\n\t\tif (!!isFlexSplash || (isFlexibleContainer && imageSize === 'jumbo')) {\n\t\t\treturn 'small';\n\t\t}\n\t\tif (isSmallCard) return 'medium';\n\n\t\tif (\n\t\t\tisFlexibleContainer &&\n\t\t\t(imagePositionOnDesktop === 'left' ||\n\t\t\t\timagePositionOnDesktop === 'right')\n\t\t) {\n\t\t\treturn 'large';\n\t\t}\n\t\treturn 'small';\n\t};\n\n\t/**\n\t * Determines how and when to render the `SupportingContent` component in the \"outer\" position:\n\t * - Returns `null` if `supportingContent` is unavailable or `sublinkPosition` is `none`.\n\t * - Renders `SupportingContent` for all breakpoints if `sublinkPosition` is `outer`.\n\t * - If `sublinkPosition` is `inner`, hides `SupportingContent` from tablet but displays it on smaller breakpoints.\n\t *\n\t */\n\tconst decideOuterSublinks = () => {\n\t\tif (!hasSublinks) return null;\n\t\tif (sublinkPosition === 'none') return null;\n\t\tif (sublinkPosition === 'outer') {\n\t\t\treturn (\n\t\t\t\t<SupportingContent\n\t\t\t\t\tsupportingContent={supportingContent}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\talignment={supportingContentAlignment}\n\t\t\t\t\tisDynamo={isDynamo}\n\t\t\t\t\tfillBackgroundOnMobile={isFlexSplash}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Hide from={isFlexSplash ? 'desktop' : 'tablet'}>\n\t\t\t\t<SupportingContent\n\t\t\t\t\tsupportingContent={supportingContent}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\talignment={supportingContentAlignment}\n\t\t\t\t\tisDynamo={isDynamo}\n\t\t\t\t\tfillBackgroundOnMobile={isFlexSplash}\n\t\t\t\t/>\n\t\t\t</Hide>\n\t\t);\n\t};\n\n\tconst decideInnerSublinks = () => {\n\t\tif (!hasSublinks) return null;\n\t\tif (sublinkPosition !== 'inner') return null;\n\t\treturn (\n\t\t\t<Hide until={isFlexSplash ? 'desktop' : 'tablet'}>\n\t\t\t\t<SupportingContent\n\t\t\t\t\tsupportingContent={supportingContent}\n\t\t\t\t\t/* inner links are always vertically stacked */\n\t\t\t\t\talignment=\"vertical\"\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tisDynamo={isDynamo}\n\t\t\t\t\tfillBackgroundOnMobile={isFlexSplash}\n\t\t\t\t/>\n\t\t\t</Hide>\n\t\t);\n\t};\n\n\treturn (\n\t\t<CardWrapper\n\t\t\tformat={format}\n\t\t\tshowTopBarDesktop={!isOnwardContent && showTopBarDesktop}\n\t\t\tshowTopBarMobile={showTopBarMobile}\n\t\t\tcontainerPalette={containerPalette}\n\t\t\tisOnwardContent={isOnwardContent}\n\t\t>\n\t\t\t<CardLink\n\t\t\t\tlinkTo={linkTo}\n\t\t\t\theadlineText={headlineText}\n\t\t\t\tdataLinkName={dataLinkName}\n\t\t\t\tisExternalLink={isExternalLink}\n\t\t\t/>\n\t\t\t{headlinePosition === 'outer' && (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tpadding-bottom: ${space[5]}px;\n\t\t\t\t\t`}\n\t\t\t\t\tstyle={{ backgroundColor: backgroundColour }}\n\t\t\t\t>\n\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tfontSizes={headlineSizes}\n\t\t\t\t\t\tshowQuotes={showQuotes}\n\t\t\t\t\t\tkickerText={\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog &&\n\t\t\t\t\t\t\t!kickerText\n\t\t\t\t\t\t\t\t? 'Live'\n\t\t\t\t\t\t\t\t: kickerText\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\t\t\t\t\tshowPulsingDot\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbyline={byline}\n\t\t\t\t\t\tshowByline={showByline}\n\t\t\t\t\t\tisExternalLink={isExternalLink}\n\t\t\t\t\t\tisBetaContainer={isBetaContainer}\n\t\t\t\t\t/>\n\t\t\t\t\t{!isUndefined(starRating) ? (\n\t\t\t\t\t\t<StarRatingComponent\n\t\t\t\t\t\t\trating={starRating}\n\t\t\t\t\t\t\tcardHasImage={!!image}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{!!mainMedia && mainMedia.type !== 'Video' && (\n\t\t\t\t\t\t<MediaMeta\n\t\t\t\t\t\t\tmediaType={mainMedia.type}\n\t\t\t\t\t\t\thasKicker={!!kickerText}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<CardLayout\n\t\t\t\tcardBackgroundColour={backgroundColour}\n\t\t\t\timagePositionOnDesktop={imagePositionOnDesktop}\n\t\t\t\timagePositionOnMobile={imagePositionOnMobile}\n\t\t\t\tminWidthInPixels={minWidthInPixels}\n\t\t\t\timageType={media?.type}\n\t\t\t\tcontainerType={containerType}\n\t\t\t\tgapSize={getGapSize()}\n\t\t\t>\n\t\t\t\t{media && (\n\t\t\t\t\t<ImageWrapper\n\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\timageFixedSizes={imageFixedSizeOptions()}\n\t\t\t\t\t\timageType={media.type}\n\t\t\t\t\t\timagePositionOnDesktop={imagePositionOnDesktop}\n\t\t\t\t\t\timagePositionOnMobile={imagePositionOnMobile}\n\t\t\t\t\t\tshowPlayIcon={showPlayIcon}\n\t\t\t\t\t\thideImageOverlay={\n\t\t\t\t\t\t\tmedia.type === 'slideshow' && isFlexibleContainer\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{media.type === 'slideshow' &&\n\t\t\t\t\t\t\t(isFlexibleContainer ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t\t\tz-index: ${getZIndex(\n\t\t\t\t\t\t\t\t\t\t\t'card-nested-link',\n\t\t\t\t\t\t\t\t\t\t)};\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\tpriority=\"feature\"\n\t\t\t\t\t\t\t\t\t\tdefer={{ until: 'visible' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SlideshowCarousel\n\t\t\t\t\t\t\t\t\t\t\timages={media.slideshowImages}\n\t\t\t\t\t\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Slideshow\n\t\t\t\t\t\t\t\t\timages={media.slideshowImages}\n\t\t\t\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\t\t\t\tisDynamo={isDynamo}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t{media.type === 'avatar' && (\n\t\t\t\t\t\t\t<AvatarContainer\n\t\t\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\t\t\timagePositionOnDesktop={imagePositionOnDesktop}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tsrc={media.avatarUrl}\n\t\t\t\t\t\t\t\t\talt={byline ?? ''}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</AvatarContainer>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{media.type === 'video' && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{showMainVideo ? (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tdata-chromatic=\"ignore\"\n\t\t\t\t\t\t\t\t\t\tdata-component=\"youtube-atom\"\n\t\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t\t\t\tz-index: ${getZIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t'card-nested-link',\n\t\t\t\t\t\t\t\t\t\t\t)};\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tpriority=\"critical\"\n\t\t\t\t\t\t\t\t\t\t\tdefer={{ until: 'visible' }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<YoutubeBlockComponent\n\t\t\t\t\t\t\t\t\t\t\t\tid={media.mainMedia.id}\n\t\t\t\t\t\t\t\t\t\t\t\tassetId={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmedia.mainMedia.videoId\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\t\t\tduration={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmedia.mainMedia.duration\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tposterImage={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmedia.mainMedia.images\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\toverrideImage={media.imageUrl}\n\t\t\t\t\t\t\t\t\t\t\t\twidth={media.mainMedia.width}\n\t\t\t\t\t\t\t\t\t\t\t\theight={media.mainMedia.height}\n\t\t\t\t\t\t\t\t\t\t\t\torigin={media.mainMedia.origin}\n\t\t\t\t\t\t\t\t\t\t\t\tmediaTitle={headlineText}\n\t\t\t\t\t\t\t\t\t\t\t\texpired={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmedia.mainMedia.expired\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\tisMainMedia={true}\n\t\t\t\t\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\t\t\t\t\tstickyVideos={false}\n\t\t\t\t\t\t\t\t\t\t\t\tkickerText={kickerText}\n\t\t\t\t\t\t\t\t\t\t\t\tpauseOffscreenVideo={\n\t\t\t\t\t\t\t\t\t\t\t\t\tpauseOffscreenVideo\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tshowTextOverlay={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontainerType ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'fixed/video'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\timagePositionOnMobile={\n\t\t\t\t\t\t\t\t\t\t\t\t\timagePositionOnMobile\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t//** TODO: IMPROVE THIS MAPPING */\n\t\t\t\t\t\t\t\t\t\t\t\t// image size defaults to small if not provided. However, if the headline size is large or greater, we want to assume the image is also large so that the play icon is correctly sized.\n\t\t\t\t\t\t\t\t\t\t\t\timageSize={\n\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'small',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'medium',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'large',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'xlarge',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'xxlarge',\n\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theadlineSizes?.desktop ??\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'large'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: imageSize\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tenableAds={false}\n\t\t\t\t\t\t\t\t\t\t\t\taspectRatio={aspectRatio}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<CardPicture\n\t\t\t\t\t\t\t\t\t\t\tmainImage={\n\t\t\t\t\t\t\t\t\t\t\t\tmedia.imageUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t? media.imageUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t: media.mainMedia.images.reduce(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(prev, current) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprev.width >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? prev\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: current,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ).url\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\t\t\t\t\t\talt={headlineText}\n\t\t\t\t\t\t\t\t\t\t\tloading={imageLoading}\n\t\t\t\t\t\t\t\t\t\t\troundedCorners={isOnwardContent}\n\t\t\t\t\t\t\t\t\t\t\taspectRatio={aspectRatio}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{media.type === 'picture' && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<CardPicture\n\t\t\t\t\t\t\t\t\tmainImage={media.imageUrl}\n\t\t\t\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\t\t\t\talt={media.imageAltText}\n\t\t\t\t\t\t\t\t\tloading={imageLoading}\n\t\t\t\t\t\t\t\t\troundedCorners={isOnwardContent}\n\t\t\t\t\t\t\t\t\taspectRatio={aspectRatio}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{showPlayIcon && mainMedia.duration > 0 && (\n\t\t\t\t\t\t\t\t\t<MediaDuration\n\t\t\t\t\t\t\t\t\t\tmediaDuration={mainMedia.duration}\n\t\t\t\t\t\t\t\t\t\timagePositionOnDesktop={\n\t\t\t\t\t\t\t\t\t\t\timagePositionOnDesktop\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\timagePositionOnMobile={\n\t\t\t\t\t\t\t\t\t\t\timagePositionOnMobile\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{media.type === 'crossword' && (\n\t\t\t\t\t\t\t<img src={media.imageUrl} alt=\"\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ImageWrapper>\n\t\t\t\t)}\n\n\t\t\t\t{containerType != 'fixed/video' && (\n\t\t\t\t\t<ContentWrapper\n\t\t\t\t\t\timageType={media?.type}\n\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\timagePositionOnDesktop={imagePositionOnDesktop}\n\t\t\t\t\t\thasBackgroundColour={isMediaCard}\n\t\t\t\t\t\tisOnwardContent={isOnwardContent}\n\t\t\t\t\t\tisFlexibleContainer={isFlexibleContainer}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* This div is needed to keep the headline and trail text justified at the start */}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\tjustify-content: flex-start;\n\t\t\t\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{headlinePosition === 'inner' && (\n\t\t\t\t\t\t\t\t<HeadlineWrapper>\n\t\t\t\t\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tfontSizes={headlineSizes}\n\t\t\t\t\t\t\t\t\t\tshowQuotes={showQuotes}\n\t\t\t\t\t\t\t\t\t\tkickerText={\n\t\t\t\t\t\t\t\t\t\t\tformat.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog &&\n\t\t\t\t\t\t\t\t\t\t\t!kickerText\n\t\t\t\t\t\t\t\t\t\t\t\t? 'Live'\n\t\t\t\t\t\t\t\t\t\t\t\t: kickerText\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\t\t\tformat.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog ||\n\t\t\t\t\t\t\t\t\t\t\tshowPulsingDot\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbyline={byline}\n\t\t\t\t\t\t\t\t\t\tshowByline={showByline}\n\t\t\t\t\t\t\t\t\t\tisExternalLink={isExternalLink}\n\t\t\t\t\t\t\t\t\t\tisBetaContainer={isBetaContainer}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{!isUndefined(starRating) ? (\n\t\t\t\t\t\t\t\t\t\t<StarRatingComponent\n\t\t\t\t\t\t\t\t\t\t\trating={starRating}\n\t\t\t\t\t\t\t\t\t\t\tcardHasImage={!!image}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t{!!mainMedia &&\n\t\t\t\t\t\t\t\t\t\tmainMedia.type !== 'Video' && (\n\t\t\t\t\t\t\t\t\t\t\t<MediaMeta\n\t\t\t\t\t\t\t\t\t\t\t\tmediaType={mainMedia.type}\n\t\t\t\t\t\t\t\t\t\t\t\thasKicker={!!kickerText}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</HeadlineWrapper>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!!trailText && (\n\t\t\t\t\t\t\t\t<TrailText\n\t\t\t\t\t\t\t\t\ttrailText={trailText}\n\t\t\t\t\t\t\t\t\ttrailTextColour={trailTextColour}\n\t\t\t\t\t\t\t\t\ttrailTextSize={trailTextSize}\n\t\t\t\t\t\t\t\t\tpadTop={headlinePosition === 'inner'}\n\t\t\t\t\t\t\t\t\thideUntil={hideTrailTextUntil()}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!showCommentFooter && (\n\t\t\t\t\t\t\t\t<CardFooter\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tage={decideAge()}\n\t\t\t\t\t\t\t\t\tcommentCount={<CommentCount />}\n\t\t\t\t\t\t\t\t\tcardBranding={\n\t\t\t\t\t\t\t\t\t\tbranding ? (\n\t\t\t\t\t\t\t\t\t\t\t<CardBranding\n\t\t\t\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\tonwardsSource={onwardsSource}\n\t\t\t\t\t\t\t\t\t\t\t\tcontainerPalette={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontainerPalette\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tshowLivePlayable={showLivePlayable}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{showLivePlayable &&\n\t\t\t\t\t\t\t\tliveUpdatesPosition === 'inner' && (\n\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\tpriority=\"feature\"\n\t\t\t\t\t\t\t\t\t\tdefer={{ until: 'visible' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<LatestLinks\n\t\t\t\t\t\t\t\t\t\t\tid={linkTo}\n\t\t\t\t\t\t\t\t\t\t\tisDynamo={isDynamo}\n\t\t\t\t\t\t\t\t\t\t\tdirection={\n\t\t\t\t\t\t\t\t\t\t\t\tisFlexibleContainer\n\t\t\t\t\t\t\t\t\t\t\t\t\t? liveUpdatesAlignment\n\t\t\t\t\t\t\t\t\t\t\t\t\t: supportingContentAlignment\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\t\tabsoluteServerTimes={\n\t\t\t\t\t\t\t\t\t\t\t\tabsoluteServerTimes\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdisplayHeader={isFlexibleContainer}\n\t\t\t\t\t\t\t\t\t\t\tdirectionOnMobile={\n\t\t\t\t\t\t\t\t\t\t\t\tisFlexibleContainer\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'horizontal'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></LatestLinks>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* This div is needed to push this content to the bottom of the card */}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={isOnwardContent ? { marginTop: 'auto' } : {}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{decideInnerSublinks()}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{sublinkPosition === 'outer' &&\n\t\t\t\t\t\t\tsupportingContentAlignment === 'horizontal' &&\n\t\t\t\t\t\t\timagePositionOnDesktop === 'right' && (\n\t\t\t\t\t\t\t\t<HorizontalDivider />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</ContentWrapper>\n\t\t\t\t)}\n\t\t\t</CardLayout>\n\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tpadding:\n\t\t\t\t\t\tisMediaCard || isOnwardContent ? `0 ${space[2]}px` : 0,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{showLivePlayable && liveUpdatesPosition === 'outer' && (\n\t\t\t\t\t<Island priority=\"feature\" defer={{ until: 'visible' }}>\n\t\t\t\t\t\t<LatestLinks\n\t\t\t\t\t\t\tid={linkTo}\n\t\t\t\t\t\t\tisDynamo={isDynamo}\n\t\t\t\t\t\t\tdirection={\n\t\t\t\t\t\t\t\tisFlexibleContainer\n\t\t\t\t\t\t\t\t\t? liveUpdatesAlignment\n\t\t\t\t\t\t\t\t\t: supportingContentAlignment\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tabsoluteServerTimes={absoluteServerTimes}\n\t\t\t\t\t\t\tdisplayHeader={isFlexibleContainer}\n\t\t\t\t\t\t\tdirectionOnMobile={'horizontal'}\n\t\t\t\t\t\t></LatestLinks>\n\t\t\t\t\t</Island>\n\t\t\t\t)}\n\t\t\t\t{decideOuterSublinks()}\n\n\t\t\t\t{showCommentFooter && (\n\t\t\t\t\t<CardFooter\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tage={decideAge()}\n\t\t\t\t\t\tcommentCount={<CommentCount />}\n\t\t\t\t\t\tcardBranding={\n\t\t\t\t\t\t\tbranding ? (\n\t\t\t\t\t\t\t\t<CardBranding\n\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tonwardsSource={onwardsSource}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowLivePlayable={showLivePlayable}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</CardWrapper>\n\t);\n};\n","import { css, keyframes } from '@emotion/react';\n\n/**\n * Sometimes we want to animate in new content using plain\n * javascript. We use these classes to do that.\n */\nexport const revealStyles = css`\n\t/* We're using classnames here because we add and remove these classes\n\t   using plain javascript */\n\t.reveal {\n\t\tanimation: ${keyframes`\n\t\t\t0% { opacity: 0; }\n\t\t\t100% { opacity: 1; }\n\t\t`} 1s ease-out;\n\t}\n\t.reveal-slowly {\n\t\tanimation: ${keyframes`\n\t\t\t0% { opacity: 0; }\n\t\t\t100% { opacity: 1; }\n\t\t`} 4s ease-out;\n\t}\n\t.pending {\n\t\tdisplay: none;\n\t}\n`;\n","import { css } from '@emotion/react';\nimport {\n\tspace,\n\ttextSans14,\n\ttextSansBold14,\n\ttextSansBold17,\n\tuntil,\n} from '@guardian/source/foundations';\nimport { DottedLines } from '@guardian/source-development-kitchen/react-components';\nimport { revealStyles } from '../lib/revealStyles';\nimport { useApi } from '../lib/useApi';\nimport { palette as themePalette } from '../palette';\nimport type { DCRContainerPalette } from '../types/front';\nimport { WithLink } from './CardHeadline';\nimport { ContainerOverrides } from './ContainerOverrides';\nimport { DateTime } from './DateTime';\nimport type { Alignment } from './SupportingContent';\n\ntype Props = {\n\tid: string;\n\tdirection: Alignment;\n\tabsoluteServerTimes: boolean;\n\tisDynamo?: boolean;\n\tcontainerPalette?: DCRContainerPalette;\n\tdisplayHeader?: boolean;\n\tdirectionOnMobile?: Alignment;\n};\n\nconst header = css`\n\tpadding: ${space[2]}px 0;\n\t${textSansBold17};\n\tcolor: ${themePalette('--card-headline')};\n`;\n\nconst horizontal = css`\n\tflex-direction: row;\n`;\nconst vertical = css`\n\tflex-direction: column;\n\tpadding: 0 ${space[1]}px;\n`;\n\nconst linkStyles = css`\n\t${textSans14}\n\toverflow: hidden;\n\tflex: 1; /* Distribute space evenly.  */\n`;\n\nconst dividerStyles = css`\n\tcolor: ${themePalette('--article-border')};\n\tborder-top: 1px solid currentColor;\n\tborder-left: 1px solid currentColor;\n`;\n\nconst bold = css`\n\t${textSansBold14};\n\n\t:before {\n\t\tcontent: '';\n\t\theight: 0.75em;\n\t\twidth: 0.75em;\n\t\tmargin-right: ${space[1]}px;\n\t\tdisplay: inline-block;\n\t\tbackground-color: ${themePalette('--card-kicker-text')};\n\t\tborder-radius: 100%;\n\t}\n`;\n\nconst directionOnMobileStyles = (direction: Alignment) => {\n\treturn direction === 'horizontal'\n\t\t? css`\n\t\t\t\t${until.tablet} {\n\t\t\t\t\t${horizontal}\n\t\t\t\t}\n\t\t  `\n\t\t: css`\n\t\t\t\t${until.tablet} {\n\t\t\t\t\t${vertical}\n\t\t\t\t}\n\t\t  `;\n};\n\nconst transparent = css`\n\tcolor: transparent;\n`;\n\nconst THREE_LINES_AS_CHARACTERS = 75;\n\n/**\n * We cannot rely on [`text-overflow: ellipsis`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow)\n * because that only applies to single lines of text without whitespace wrapping\n */\nconst extractAboutThreeLines = (text: string) =>\n\ttext.length <= THREE_LINES_AS_CHARACTERS\n\t\t? text\n\t\t: text\n\t\t\t\t.slice(0, THREE_LINES_AS_CHARACTERS) // take a few characters\n\t\t\t\t.split(' ') // split by words\n\t\t\t\t.slice(0, -1) // drop the last word as it’s likely a partial one\n\t\t\t\t.join(' ') + '…'; // join with spaces and add an ellipsis\n\n/**\n * Display the last three blocks from a Liveblog when the fronts\n * tool has enabled showing live updates.\n *\n * ## Why does this need to be an Island?\n *\n * We make an API call to retrieve the latest blocks,\n * constantly updating when new data comes in.\n *\n * ---\n *\n * [`LatestLinks` on Chromatic](https://www.chromatic.com/component?appId=63e251470cfbe61776b0ef19&csfId=components-latestlinks&buildNumber=2967)\n */\nexport const LatestLinks = ({\n\tid,\n\tdirection,\n\tisDynamo = false,\n\tcontainerPalette,\n\tabsoluteServerTimes,\n\tdisplayHeader = false,\n\tdirectionOnMobile,\n}: Props) => {\n\tconst { data } = useApi<{\n\t\tblocks: Array<{\n\t\t\tid: string;\n\t\t\ttitle: string;\n\t\t\tpublishedDateTime: number;\n\t\t\tlastUpdatedDateTime: number;\n\t\t\tbody: string;\n\t\t}>;\n\t}>(`https://api.nextgen.guardianapps.co.uk${id}.json?rendered=false`, {\n\t\trefreshInterval: 9_600,\n\t});\n\n\t/**\n\t * Reserve space for the latest links to avoid CLS while loading.\n\t *\n\t * The value of 5.2em is calculated from:\n\t * 1.3 (regular line height) * 4 (number of lines of text)\n\t */\n\tconst minHeight = isDynamo ? `calc(${space[1]}px + 5.2em)` : `5.2em`;\n\n\tconst ulStyle = css`\n\t\tdisplay: flex;\n\t\tgap: ${space[1]}px;\n\t\tbox-sizing: border-box;\n\t\tmin-height: ${minHeight};\n\t`;\n\n\treturn (\n\t\t<>\n\t\t\t{displayHeader && (\n\t\t\t\t<>\n\t\t\t\t\t<DottedLines\n\t\t\t\t\t\tcount={1}\n\t\t\t\t\t\tcolor={themePalette('--latest-links-dotted-line')}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div css={header}>Latest</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<ul\n\t\t\t\tcss={[\n\t\t\t\t\tulStyle,\n\t\t\t\t\trevealStyles,\n\t\t\t\t\t!!isDynamo || direction === 'horizontal'\n\t\t\t\t\t\t? horizontal\n\t\t\t\t\t\t: vertical,\n\t\t\t\t\tdirectionOnMobile &&\n\t\t\t\t\t\tdirectionOnMobileStyles(directionOnMobile),\n\t\t\t\t\tcss`\n\t\t\t\t\t\tcolor: ${themePalette('--card-trail-text')};\n\t\t\t\t\t`,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{data && data.blocks.length >= 3 ? (\n\t\t\t\t\tdata.blocks\n\t\t\t\t\t\t.filter((block) => block.body.trim() !== '')\n\t\t\t\t\t\t.slice(0, 3)\n\t\t\t\t\t\t.map((block, index) => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ContainerOverrides\n\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{index > 0 && (\n\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\tkey={block.id + ' : divider'}\n\t\t\t\t\t\t\t\t\t\t\tcss={dividerStyles}\n\t\t\t\t\t\t\t\t\t\t></li>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tkey={block.id}\n\t\t\t\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\t\t\t\tclassName={'reveal'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<WithLink\n\t\t\t\t\t\t\t\t\t\t\tlinkTo={`${id}?page=with:block-${block.id}#block-${block.id}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tcss={bold}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: themePalette(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'--card-trail-text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<DateTime\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnew Date(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblock.publishedDateTime,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay=\"relative\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tabsoluteServerTimes={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tabsoluteServerTimes\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowWeekday={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowDate={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowTime={false}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"show-underline\">\n\t\t\t\t\t\t\t\t\t\t\t\t{extractAboutThreeLines(\n\t\t\t\t\t\t\t\t\t\t\t\t\tblock.body,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</WithLink>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ContainerOverrides>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<li css={linkStyles} />\n\t\t\t\t\t\t<li css={[dividerStyles, transparent]} />\n\t\t\t\t\t\t<li css={linkStyles} />\n\t\t\t\t\t\t<li css={[dividerStyles, transparent]} />\n\t\t\t\t\t\t<li css={linkStyles} />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</ul>\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tSvgAudio,\n\tSvgCamera,\n\tSvgVideo,\n} from '@guardian/source/react-components';\nimport { palette as themePalette } from '../palette';\nimport type { MediaType } from '../types/layout';\n\ntype Props = {\n\tmediaType: MediaType;\n\thasKicker: boolean;\n};\n\nconst iconWrapperStyles = (hasKicker: boolean) => css`\n\twidth: 24px;\n\theight: 24px;\n\t/* We’re using the text colour for the icon badge */\n\tbackground-color: ${hasKicker\n\t\t? themePalette('--card-kicker-text')\n\t\t: themePalette('--card-footer-text')};\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n\n\t> svg {\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tmargin-left: auto;\n\t\tmargin-right: auto;\n\t\tmargin-top: 2px;\n\t\tdisplay: block;\n\t\tfill: ${themePalette('--card-media-icon')};\n\t}\n`;\n\nconst wrapperStyles = css`\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: 4px;\n`;\n\nexport const Icon = ({ mediaType }: { mediaType: MediaType }) => {\n\tswitch (mediaType) {\n\t\tcase 'Gallery':\n\t\t\treturn <SvgCamera />;\n\t\tcase 'Video':\n\t\t\treturn <SvgVideo />;\n\t\tcase 'Audio':\n\t\t\treturn <SvgAudio />;\n\t}\n};\n\nconst MediaIcon = ({\n\tmediaType,\n\thasKicker,\n}: {\n\tmediaType: MediaType;\n\thasKicker: boolean;\n}) => {\n\treturn (\n\t\t<span css={iconWrapperStyles(hasKicker)}>\n\t\t\t<Icon mediaType={mediaType} />\n\t\t</span>\n\t);\n};\n\nexport const MediaMeta = ({ mediaType, hasKicker }: Props) => {\n\treturn (\n\t\t<div css={wrapperStyles}>\n\t\t\t<MediaIcon mediaType={mediaType} hasKicker={hasKicker} />\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { palette } from '../palette';\n\nconst dotSize = 7;\nconst dotGap = 4;\nconst dotsVisible = 5;\nconst scrollThreshold = Math.floor(dotsVisible / 2);\n\nconst scrollingDotContainerStyles = css`\n\toverflow: hidden;\n\tmax-width: ${dotSize * dotsVisible + dotGap * (dotsVisible - 1) + 8}px;\n`;\n\nconst scrollingDotStyles = (total: number) => css`\n\tdisplay: grid;\n\tgap: ${dotGap}px;\n\tgrid-template-columns: repeat(${total}, ${dotSize}px);\n\tpadding: 4px;\n\ttransition: transform 0.25s ease;\n`;\n\nconst dotStyles = css`\n\twidth: ${dotSize}px;\n\theight: ${dotSize}px;\n\tborder-radius: 100%;\n\tbackground-color: ${palette('--slideshow-pagination-dot')};\n\ttransition: all 0.25s ease;\n`;\n\nconst activeDotStyles = css`\n\ttransform: scale(1.15);\n\tbackground-color: ${palette('--slideshow-pagination-dot-active')};\n`;\n\nconst trailingDotStyles = css`\n\ttransform: scale(0.85);\n`;\n\nconst offscreenDotStyles = css`\n\ttransform: scale(0);\n`;\n\nexport const SlideshowCarouselScrollingDots = ({\n\ttotal,\n\tcurrent,\n}: {\n\ttotal: number;\n\tcurrent: number;\n}) => {\n\tconst scrollDots = () => {\n\t\tconst offsetPerDot = -(dotSize + dotGap);\n\n\t\tif (total <= dotsVisible) return;\n\n\t\tif (current < scrollThreshold) {\n\t\t\treturn { transform: 'translateX(0)' };\n\t\t}\n\n\t\tif (current >= total - scrollThreshold) {\n\t\t\treturn {\n\t\t\t\ttransform: `translateX(${\n\t\t\t\t\t(total - dotsVisible) * offsetPerDot\n\t\t\t\t}px)`,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttransform: `translateX(${\n\t\t\t\t(current - scrollThreshold) * offsetPerDot\n\t\t\t}px)`,\n\t\t};\n\t};\n\n\tconst scaleDot = (index: number) => {\n\t\tif (total <= dotsVisible) return;\n\n\t\t/**\n\t\t * If we haven't reached the scroll threshold and the current dot is the\n\t\t * last visible dot apply trailing style to indicate additional pages\n\t\t * to the right\n\t\t */\n\t\tif (index === dotsVisible - 1 && current < scrollThreshold) {\n\t\t\treturn trailingDotStyles;\n\t\t}\n\n\t\t/**\n\t\t * If we're past the scroll threshold at the end and the current dot is\n\t\t * the first visible dot apply trailing style to indicate additional\n\t\t * pages to the left\n\t\t */\n\t\tif (\n\t\t\tindex === total - dotsVisible &&\n\t\t\tcurrent >= total - scrollThreshold - 1\n\t\t) {\n\t\t\treturn trailingDotStyles;\n\t\t}\n\n\t\t/**\n\t\t * If we've hit the scroll threshold and the current dot is the last\n\t\t * visible dot and there are more dots to the right apply the trailing\n\t\t * style to indicate additional pages to the right\n\t\t */\n\t\tif (\n\t\t\tindex === current + scrollThreshold &&\n\t\t\tcurrent >= scrollThreshold &&\n\t\t\tcurrent < total - scrollThreshold - 1\n\t\t) {\n\t\t\treturn trailingDotStyles;\n\t\t}\n\n\t\t/**\n\t\t * If we've hit the scroll threshold and the current dot is the first\n\t\t * visible dot and there are more dots to the left apply the trailing\n\t\t * style to indicate additional pages to the left\n\t\t */\n\t\tif (\n\t\t\tindex === current - scrollThreshold &&\n\t\t\tcurrent > scrollThreshold &&\n\t\t\tcurrent <= total - scrollThreshold - 1\n\t\t) {\n\t\t\treturn trailingDotStyles;\n\t\t}\n\n\t\t/**\n\t\t * If we've hit the scroll threshold and the current dot is just\n\t\t * offscreen to the right apply the offscreen style so the dot size\n\t\t * scales as it scrolls into or out of view\n\t\t */\n\t\tif (\n\t\t\tindex === current + scrollThreshold + 1 &&\n\t\t\tcurrent >= scrollThreshold &&\n\t\t\tcurrent < total - scrollThreshold - 1\n\t\t) {\n\t\t\treturn offscreenDotStyles;\n\t\t}\n\n\t\t/**\n\t\t * If we've hit the scroll threshold and the current dot is just\n\t\t * offscreen to the left apply the offscreen style so the dot size\n\t\t * scales as it scrolls into or out of view\n\t\t */\n\t\tif (\n\t\t\tindex === current - scrollThreshold - 1 &&\n\t\t\tcurrent > scrollThreshold &&\n\t\t\tcurrent <= total - scrollThreshold - 1\n\t\t) {\n\t\t\treturn offscreenDotStyles;\n\t\t}\n\n\t\treturn;\n\t};\n\n\treturn (\n\t\t<div css={scrollingDotContainerStyles}>\n\t\t\t<div css={scrollingDotStyles(total)} style={scrollDots()}>\n\t\t\t\t{Array.from({ length: total }, (_, index) => (\n\t\t\t\t\t<span\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tdotStyles,\n\t\t\t\t\t\t\tcurrent === index && activeDotStyles,\n\t\t\t\t\t\t\tscaleDot(index),\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\tspace,\n\ttextSansBold12,\n\twidth,\n} from '@guardian/source/foundations';\nimport type { ThemeButton } from '@guardian/source/react-components';\nimport {\n\tButton,\n\tSvgChevronLeftSingle,\n\tSvgChevronRightSingle,\n} from '@guardian/source/react-components';\nimport { useEffect, useRef, useState } from 'react';\nimport { takeFirst } from '../lib/tuple';\nimport { palette } from '../palette';\nimport type { DCRSlideshowImage } from '../types/front';\nimport type { ImageSizeType } from './Card/components/ImageWrapper';\nimport { CardPicture } from './CardPicture';\nimport { SlideshowCarouselScrollingDots } from './SlideshowCarouselScrollingDots';\n\nconst themeButton: Partial<ThemeButton> = {\n\tborderTertiary: palette('--carousel-chevron-border'),\n\ttextTertiary: palette('--carousel-chevron'),\n\tbackgroundTertiaryHover: palette('--carousel-chevron-hover'),\n};\n\nconst themeButtonDisabled: Partial<ThemeButton> = {\n\tborderTertiary: palette('--carousel-chevron-border-disabled'),\n\ttextTertiary: palette('--carousel-chevron-disabled'),\n\tbackgroundTertiaryHover: 'transparent',\n};\n\nconst carouselStyles = css`\n\tdisplay: flex;\n\toverflow-x: auto;\n\toverflow-y: hidden;\n\tscroll-snap-type: x mandatory;\n\tscroll-behavior: smooth;\n\toverscroll-behavior: contain auto;\n\t/**\n\t * Hide scrollbars\n\t * See: https://stackoverflow.com/a/38994837\n\t */\n\t::-webkit-scrollbar {\n\t\tdisplay: none; /* Safari and Chrome */\n\t}\n\tscrollbar-width: none; /* Firefox */\n`;\n\nconst carouselItemStyles = css`\n\tposition: relative;\n\tflex: 1 0 100%;\n\tscroll-snap-align: start;\n`;\n\nconst captionStyles = css`\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\t${textSansBold12}\n\tcolor: ${palette('--slideshow-caption')};\n\tbackground: linear-gradient(\n\t\tto bottom,\n\t\trgba(0, 0, 0, 0) 0%,\n\t\trgba(0, 0, 0, 0.8) 100%\n\t);\n\tpadding: ${space[10]}px ${space[2]}px ${space[2]}px;\n`;\n\nconst navigationStyles = css`\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: ${space[2]}px;\n`;\n\nconst buttonStyles = css`\n\tdisplay: none;\n\t${from.tablet} {\n\t\tdisplay: flex;\n\t\tgap: ${space[1]}px;\n\t}\n`;\n\n/**\n * Padding is added to the left of the scrolling navigation dots to match the\n * width of the navigation buttons on the right at tablet and above. This allows\n * them to be centred below the slideshow image.\n */\nconst scrollingDotStyles = css`\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex: 1 0 0;\n\t${from.tablet} {\n\t\tpadding-left: ${width.ctaSmall * 2 + space[2]}px;\n\t}\n`;\n\nexport const SlideshowCarousel = ({\n\timages,\n\timageSize,\n}: {\n\timages: readonly DCRSlideshowImage[];\n\timageSize: ImageSizeType;\n}) => {\n\tconst carouselRef = useRef<HTMLUListElement | null>(null);\n\tconst [previousButtonEnabled, setPreviousButtonEnabled] = useState(false);\n\tconst [nextButtonEnabled, setNextButtonEnabled] = useState(true);\n\tconst [currentPage, setCurrentPage] = useState(0);\n\n\tconst scrollTo = (direction: 'left' | 'right') => {\n\t\tif (!carouselRef.current) return;\n\n\t\tconst cardWidth =\n\t\t\tcarouselRef.current.querySelector('li')?.offsetWidth ?? 0;\n\t\tconst offset = direction === 'left' ? -cardWidth : cardWidth;\n\t\tcarouselRef.current.scrollBy({\n\t\t\tleft: offset,\n\t\t\tbehavior: 'smooth',\n\t\t});\n\t};\n\n\t/**\n\t * Updates state of navigation buttons based on carousel's scroll position.\n\t *\n\t * This function checks the current scroll position of the carousel and sets\n\t * the styles of the previous and next buttons accordingly. The button state\n\t * is toggled when the midpoint of the first or last card has been scrolled\n\t * in or out of view.\n\t */\n\tconst updatePaginationStateOnScroll = () => {\n\t\tconst carouselElement = carouselRef.current;\n\t\tif (!carouselElement) return;\n\n\t\tconst scrollLeft = carouselElement.scrollLeft;\n\t\tconst maxScrollLeft =\n\t\t\tcarouselElement.scrollWidth - carouselElement.clientWidth;\n\t\tconst cardWidth = carouselElement.querySelector('li')?.offsetWidth ?? 0;\n\n\t\tsetPreviousButtonEnabled(scrollLeft > cardWidth / 2);\n\t\tsetNextButtonEnabled(scrollLeft < maxScrollLeft - cardWidth / 2);\n\t\tsetCurrentPage(Math.round(scrollLeft / cardWidth));\n\t};\n\n\t/**\n\t * Throttle scroll events to optimise performance. As the scroll events are\n\t * used to trigger the pagination dot animation we're using\n\t * `requestAnimationFrame` rather than `setTimeout` to ensure this animates\n\t * smoothly in sync with the carousel being scrolled.\n\t */\n\tconst throttleEvent = (callback: () => void) => {\n\t\tlet requestId: number;\n\t\treturn function () {\n\t\t\tcancelAnimationFrame(requestId);\n\t\t\trequestId = requestAnimationFrame(callback);\n\t\t};\n\t};\n\n\tuseEffect(() => {\n\t\tconst carouselElement = carouselRef.current;\n\t\tif (!carouselElement) return;\n\n\t\tcarouselElement.addEventListener(\n\t\t\t'scroll',\n\t\t\tthrottleEvent(updatePaginationStateOnScroll),\n\t\t);\n\n\t\treturn () => {\n\t\t\tcarouselElement.removeEventListener(\n\t\t\t\t'scroll',\n\t\t\t\tthrottleEvent(updatePaginationStateOnScroll),\n\t\t\t);\n\t\t};\n\t}, []);\n\n\t/**\n\t * Restrict slideshow to a maximum of 10 images\n\t */\n\tconst slideshowImages = takeFirst(images, 10);\n\tconst slideshowImageCount = slideshowImages.length;\n\n\treturn (\n\t\t<div>\n\t\t\t<ul\n\t\t\t\tref={carouselRef}\n\t\t\t\tcss={carouselStyles}\n\t\t\t\tdata-heatphan-type=\"carousel\"\n\t\t\t>\n\t\t\t\t{slideshowImages.map((image, index) => {\n\t\t\t\t\tconst loading = index > 0 ? 'lazy' : 'eager';\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li css={carouselItemStyles} key={image.imageSrc}>\n\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t<CardPicture\n\t\t\t\t\t\t\t\t\tmainImage={image.imageSrc}\n\t\t\t\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\t\t\t\taspectRatio=\"5:4\"\n\t\t\t\t\t\t\t\t\talt={image.imageCaption}\n\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!!image.imageCaption && (\n\t\t\t\t\t\t\t\t\t<figcaption css={captionStyles}>\n\t\t\t\t\t\t\t\t\t\t{image.imageCaption}\n\t\t\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\n\t\t\t{slideshowImageCount > 1 && (\n\t\t\t\t<div css={navigationStyles}>\n\t\t\t\t\t<div css={scrollingDotStyles}>\n\t\t\t\t\t\t<SlideshowCarouselScrollingDots\n\t\t\t\t\t\t\ttotal={slideshowImageCount}\n\t\t\t\t\t\t\tcurrent={currentPage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div css={buttonStyles}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\thideLabel={true}\n\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\ticon={<SvgChevronLeftSingle />}\n\t\t\t\t\t\t\tonClick={() => scrollTo('left')}\n\t\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\t\ttheme={\n\t\t\t\t\t\t\t\tpreviousButtonEnabled\n\t\t\t\t\t\t\t\t\t? themeButton\n\t\t\t\t\t\t\t\t\t: themeButtonDisabled\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tdisabled={!previousButtonEnabled}\n\t\t\t\t\t\t\taria-label=\"View next image in slideshow\"\n\t\t\t\t\t\t\t// TODO: data-link-name=\"slideshow carousel left chevron\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\thideLabel={true}\n\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\ticon={<SvgChevronRightSingle />}\n\t\t\t\t\t\t\tonClick={() => scrollTo('right')}\n\t\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\t\ttheme={\n\t\t\t\t\t\t\t\tnextButtonEnabled\n\t\t\t\t\t\t\t\t\t? themeButton\n\t\t\t\t\t\t\t\t\t: themeButtonDisabled\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tdisabled={!nextButtonEnabled}\n\t\t\t\t\t\t\taria-label=\"View previous image in slideshow\"\n\t\t\t\t\t\t\t// TODO: data-link-name=\"slideshow carousel right chevron\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","import type { Branding } from '../types/branding';\nimport type { EditionId } from './edition';\n\nexport const getOphanComponents = ({\n\tbranding,\n\tlocationPrefix,\n}: {\n\tbranding: Branding;\n\t/**\n\t * Allows clicks to be attributed to different areas of content\n\t */\n\tlocationPrefix: 'article-meta' | 'article-related-content';\n}): { ophanComponentName: string; ophanComponentLink: string } => {\n\tconst formattedSponsorName = branding.sponsorName\n\t\t.toLowerCase()\n\t\t.replace(' ', '-');\n\tconst componentName = `${locationPrefix}-${formattedSponsorName}`;\n\treturn {\n\t\tophanComponentName: `labs-logo | ${componentName}`,\n\t\tophanComponentLink: `labs-logo-${componentName}`,\n\t};\n};\n\nexport const getLabsUrlSuffix = (editionId: EditionId): string => {\n\tswitch (editionId) {\n\t\tcase 'AU':\n\t\t\treturn '-australia';\n\t\tcase 'US':\n\t\t\treturn '-us';\n\t\tdefault:\n\t\t\treturn '';\n\t}\n};\n","/** A tuple of up to 12 items. Larger tuples will not be narrowed */\nexport type Tuple<T, N extends number> = N extends 12\n\t? [T, T, T, T, T, T, T, T, T, T, T, T]\n\t: N extends 11\n\t? [T, T, T, T, T, T, T, T, T, T, T]\n\t: N extends 10\n\t? [T, T, T, T, T, T, T, T, T, T]\n\t: N extends 9\n\t? [T, T, T, T, T, T, T, T, T]\n\t: N extends 8\n\t? [T, T, T, T, T, T, T, T]\n\t: N extends 7\n\t? [T, T, T, T, T, T, T]\n\t: N extends 6\n\t? [T, T, T, T, T, T]\n\t: N extends 5\n\t? [T, T, T, T, T]\n\t: N extends 4\n\t? [T, T, T, T]\n\t: N extends 3\n\t? [T, T, T]\n\t: N extends 2\n\t? [T, T]\n\t: N extends 1\n\t? [T]\n\t: N extends 0\n\t? []\n\t: T[];\n\n/**\n * Type-guard for whether an array is a tuple of exact length.\n *\n * Only tuples of 12 elements or less will be narrowed.\n */\nexport const isTuple = <T, N extends number>(\n\tarr: Array<T> | ReadonlyArray<T>,\n\tcount: N,\n): arr is Tuple<T, N> => arr.length === count;\n\n/** Type where a tuple can have any 'n' number of items or less  */\ntype SlicedTuple<\n\tT,\n\tN extends 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12,\n> = N extends 12\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12>\n\t: N extends 11\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11>\n\t: N extends 10\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10>\n\t: N extends 9\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9>\n\t: N extends 8\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8>\n\t: N extends 7\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7>\n\t: N extends 6\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5 | 6>\n\t: N extends 5\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4 | 5>\n\t: N extends 4\n\t? Tuple<T, 0 | 1 | 2 | 3 | 4>\n\t: N extends 3\n\t? Tuple<T, 0 | 1 | 2 | 3>\n\t: N extends 2\n\t? Tuple<T, 0 | 1 | 2>\n\t: N extends 1\n\t? Tuple<T, 0 | 1>\n\t: undefined;\n\n/**\n * Takes the first 'n' number of items in an array\n *\n * By returning `SlicedTuple` you receive a type-safe response\n * that can be checked exhaustively.\n */\nexport const takeFirst = <\n\tT,\n\tN extends 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12,\n>(\n\tarray: Array<T> | ReadonlyArray<T>,\n\tcount: N,\n): SlicedTuple<T, N> =>\n\t//@ts-expect-error – this output is tested by jest and it’s a very helpful method\n\tarray.slice(0, count);\n\n/**\n * Type representing an array with at least one element\n */\nexport type NonEmptyArray<T> = [T, ...T[]];\n\n/**\n * Type guard for determining whether an array has at least one element\n */\nexport const isNonEmptyArray = <T>(items: T[]): items is NonEmptyArray<T> =>\n\titems.length > 0;\n"],"names":["picture","css","round","palette","img","block","Avatar","src","alt","shape","sources","generateSources","getSourceImageUrl","breakpoint","width","fallbackSource","getFallbackSource","map","source","Fragment","srcSet","hiResUrl","media","lowResUrl","hideOnMobile","until","tablet","animationStyles","animation","captionStyles","textSansBold12","neutral","space","additionalDynamoCaptionStyles","from","Slideshow","images","imageSize","isDynamo","fade","display","takeFirst","slideshowImage","index","length","isNotFirst","loading","delay","last","duration","stages","time","opacity","keyframes","decideAnimationName","styles","undefined","figure","style","animationDelay","animationDuration","CardPicture","mainImage","imageSrc","imageCaption","figcaption","snapStyles","Snap","snapData","dataLinkName","isUndefined","embedHtml","div","dangerouslySetInnerHTML","__html","data-link-name","embedJs","script","SnapCssSandbox","children","embedCss","sideMarginStyles","topMarginStyles","largerTopMargin","sizingStyles","imagePositionOnDesktop","isVertical","desktop","AvatarContainer","logoImageStyle","brandingWrapperStyle","getZIndex","labelStyle","textSans12","themePalette","CardBranding","branding","format","onwardsSource","containerPalette","logo","cardHasDarkBackground","logoForDarkBackground","decideCardLogo","darkModeAvailable","useConfig","dataAttributes","getOphanComponents","locationPrefix","label","span","visuallyHidden","sponsorName","a","href","link","data-sponsor","toLowerCase","rel","aria-label","data-testid","data-component","ophanComponentName","ophanComponentLink","dimensions","height","encodeURI","containerStyles","videoWidth","mobileLandscape","minWidth","minWidthInPixels","decidePosition","imagePositionOnMobile","hasAvatar","mobile","imagePosition","top","bottom","left","right","none","decideDirection","decideGap","gapSize","CardLayout","cardBackgroundColour","imageType","containerType","backgroundColor","gap","baseCardStyles","hoverStyles","sublinkHoverStyles","desktopTopBarStyles","mobileTopBarStyles","onwardContentStyles","CardWrapper","showTopBarDesktop","showTopBarMobile","isOnwardContent","FormatBoundary","ContainerOverrides","flexBasisStyles","between","and","paddingStyles","isFlexibleContainer","ContentWrapper","hasBackgroundColour","isHorizontalOnDesktop","HeadlineWrapper","imageFixedSize","tiny","small","medium","fixImageWidthStyles","fixImageWidth","ImageWrapper","imageFixedSizes","showPlayIcon","hideImageOverlay","isHorizontalOnMobile","className","PlayIcon","BETA_CONTAINERS","starWrapper","cardHasImage","sourcePalette","brandAlt","StarRatingComponent","rating","StarRating","size","HorizontalDivider","Card","linkTo","headlineText","headlineSizes","showQuotedHeadline","byline","showByline","webPublicationDate","image","imageLoading","trailText","avatarUrl","showClock","mainMedia","canPlayInline","kickerText","showPulsingDot","starRating","supportingContent","supportingContentAlignment","supportingContentPosition","showAge","discussionApiUrl","discussionId","isCrossword","isExternalLink","slideshowImages","showLivePlayable","liveUpdatesAlignment","liveUpdatesPosition","pauseOffscreenVideo","showMainVideo","absoluteServerTimes","isTagPage","aspectRatio","isFlexSplash","trailTextSize","trailTextColour","podcastImage","galleryCount","hasSublinks","sublinkPosition","alignment","decideSublinkPosition","showQuotes","isOpinion","design","ArticleDesign","Comment","Editorial","Letter","isBetaContainer","includes","decideAge","withinTwelveHours","Math","abs","Date","getTime","isWithinTwelveHours","CardAge","webPublication","date","CommentCount","Link","DISCUSSION_ID_DATA_ATTRIBUTE","data-ignore","cssOverrides","Island","priority","defer","CardCommentCount","type","imageUrl","imageAltText","trailImage","altText","getMedia","showCommentFooter","isMediaCard","isAMediaCard","backgroundColour","isSmallCard","headlinePosition","getHeadlinePosition","CardLink","CardHeadline","fontSizes","LiveBlog","MediaMeta","mediaType","hasKicker","SlideshowCarousel","data-chromatic","YoutubeBlockComponent","id","assetId","videoId","posterImage","overrideImage","origin","mediaTitle","expired","isMainMedia","hideCaption","stickyVideos","showTextOverlay","enableAds","reduce","prev","current","url","roundedCorners","MediaDuration","mediaDuration","TrailText","padTop","hideUntil","CardFooter","age","commentCount","cardBranding","LatestLinks","direction","displayHeader","directionOnMobile","marginTop","Hide","SupportingContent","fillBackgroundOnMobile","padding","revealStyles","header","textSansBold17","horizontal","vertical","linkStyles","textSans14","dividerStyles","bold","textSansBold14","directionOnMobileStyles","transparent","data","useApi","refreshInterval","minHeight","ulStyle","DottedLines","count","color","ul","blocks","filter","body","trim","slice","li","WithLink","DateTime","publishedDateTime","showWeekday","showDate","showTime","text","split","join","iconWrapperStyles","wrapperStyles","Icon","SvgCamera","SvgVideo","SvgAudio","MediaIcon","scrollThreshold","floor","dotsVisible","scrollingDotContainerStyles","dotSize","scrollingDotStyles","total","dotStyles","activeDotStyles","trailingDotStyles","offscreenDotStyles","SlideshowCarouselScrollingDots","scaleDot","transform","scrollDots","Array","_","themeButton","borderTertiary","textTertiary","backgroundTertiaryHover","themeButtonDisabled","carouselStyles","carouselItemStyles","navigationStyles","buttonStyles","ctaSmall","carouselRef","useRef","previousButtonEnabled","setPreviousButtonEnabled","useState","nextButtonEnabled","setNextButtonEnabled","currentPage","setCurrentPage","scrollTo","cardWidth","querySelector","offsetWidth","offset","scrollBy","behavior","updatePaginationStateOnScroll","carouselElement","scrollLeft","maxScrollLeft","scrollWidth","clientWidth","throttleEvent","callback","requestId","cancelAnimationFrame","requestAnimationFrame","useEffect","addEventListener","removeEventListener","slideshowImageCount","ref","data-heatphan-type","Button","hideLabel","iconSide","icon","SvgChevronLeftSingle","onClick","theme","disabled","SvgChevronRightSingle","formattedSponsorName","replace","componentName","array"],"sourceRoot":""}