{"version":3,"file":"StickyLiveblogAskWrapper-importable.client.web.90862a2525c4fe5e01ba.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/StickyLiveblogAskWrapper.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/tracking.ts","webpack://@guardian/dotcom-rendering/./src/lib/contributions.ts","webpack://@guardian/dotcom-rendering/./src/lib/useAuthStatus.ts","webpack://@guardian/dotcom-rendering/./src/lib/useCountryCode.ts","webpack://@guardian/dotcom-rendering/./src/lib/usePageViewId.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/__generated__/icons/SvgArrowRightStraight.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/button/LinkButton.js"],"sourcesContent":["/**\n * @file\n * This is a hard coded support ask as a test to see if it works.\n * If it does, it may become a more standard feature.\n */\n\nimport { css, ThemeProvider } from '@emotion/react';\nimport { palette, space, textSans15 } from '@guardian/source/foundations';\nimport {\n\tLinkButton,\n\tSvgArrowRightStraight,\n} from '@guardian/source/react-components';\nimport type { Tracking } from '@guardian/support-dotcom-components/dist/shared/types/props/shared';\nimport { useEffect, useMemo, useState } from 'react';\nimport { submitComponentEvent } from '../client/ophan/ophan';\nimport { shouldHideSupportMessaging } from '../lib/contributions';\nimport { useIsSignedIn } from '../lib/useAuthStatus';\nimport { useCountryCode } from '../lib/useCountryCode';\nimport { usePageViewId } from '../lib/usePageViewId';\nimport { useConfig } from './ConfigContext';\nimport type { ReactComponent } from './marketing/lib/ReactComponent';\nimport {\n\taddRegionIdAndTrackingParamsToSupportUrl,\n\tcreateClickEventFromTracking,\n\tcreateInsertEventFromTracking,\n} from './marketing/lib/tracking';\n\nconst baseUrl = 'https://support.theguardian.com/contribute';\n\n// CSS Styling\n// -------------------------------------------\n\n// outer container\nconst stickyLeft = css`\n\tbackground: ${palette.neutral[100]};\n\tposition: sticky;\n\ttop: ${space[3]}px;\n\twidth: 220px;\n\tmargin-left: ${space[5]}px;\n\tmargin-top: ${space[6]}px;\n`;\nconst container = css`\n\tbackground: ${palette.neutral[100]};\n\twidth: 220px;\n\n\tbox-sizing: border-box;\n\n\t/* Auto layout */\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tpadding: 0px;\n\tgap: ${space[1]}px;\n`;\n\nconst imageHeader = css`\n\tbackground-color: ${palette.brand[400]};\n\ttext-align: center;\n\tpadding: 15px 0;\n\twidth: 220px;\n\theight: 132px;\n`;\n// contains the text and cta\nconst textBlock = css`\n\t/* Auto layout */\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tpadding: ${space[2]}px;\n\tgap: ${space[1]}px;\n`;\nconst bodySection = css`\n\tcolor: ${palette.neutral[0]};\n\t${textSans15};\n\tleft: ${space[8]}px;\n`;\nconst ctaSection = css`\n\tcolor: ${palette.neutral[0]};\n\tmargin-top: ${space[3]}px;\n\tmargin-bottom: ${space[4]}px;\n`;\nconst cta = css`\n\tleft: ${space[2]}px;\n\tmin-width: 100%;\n\twidth: 100%;\n\tmin-height: 30px;\n\theight: 30px;\n`;\nconst buttonStyles = {\n\ttextPrimary: palette.neutral[7],\n\tbackgroundPrimary: palette.brandAlt[400],\n\tbackgroundPrimaryHover: palette.brandAlt[300],\n};\nconst contributionsTheme = {\n\tbutton: buttonStyles,\n\tlink: buttonStyles,\n};\nconst notForSaleSvg = () => (\n\t<svg\n\t\twidth=\"150\"\n\t\theight=\"100\"\n\t\tfill=\"none\"\n\t\taria-labelledby=\"rr__notForSaleBrandIcon\"\n\t>\n\t\t<title id=\"rr__notForSaleBrandIcon\">Not for sale</title>\n\t\t<path\n\t\t\tfill=\"#fff\"\n\t\t\td=\"M5 17V4.5l.1-.5c.3 0 .3.2.4.3L7.2 7l5.2 8.8 5.2 8.7 4.8 8.2c.3.4.6.6 1.1.6h3.7c.9 0 .9 0 .9-.9V3.6c0-.3 0-.6.4-.7l1.4-1 1.6-1c.3-.1.3-.4.2-.7 0-.2-.3-.2-.4-.2h-8.1c-.2 0-.5 0-.5.3-.1.2 0 .5.2.6l.3.2 3.4 1.7c.4.2.6.5.6 1v18c0 .1 0 .3-.2.3-.1 0-.2 0-.2-.2l-.9-1.4-5.8-9.8-6-10.3c-.2-.3-.4-.4-.8-.4H.5C.3 0 0 0 0 .3c0 .2 0 .5.3.6l.4.2 2.7.9c.4.1.7.4.7 1v26.8c0 .2-.1.4-.4.5l-3.3 2c-.4.1-.4.4-.4.7.1.4.4.3.7.3h8.1c.3 0 .6 0 .6-.3.1-.3 0-.5-.3-.7l-3.5-1.9c-.5-.2-.6-.5-.6-1V17.2ZM55.6 12.6a11.2 11.2 0 0 0-8.2-6.3 15 15 0 0 0-8.2.6c-4 1.5-6.7 4.3-7.6 8.6-.8 3.7-.3 7.2 1.4 10.6 1.8 3.7 5 5.9 9 6.4 2.7.4 5.2 0 7.7-1 2.3-.9 4.1-2.3 5.5-4.4 1.4-2.2 2-4.6 2-7.2 0-2.6-.5-5-1.6-7.3Zm-7.5 17c-.5 1.7-2.1 2.6-3.8 1.9-.8-.3-1.2-1-1.6-1.7-.8-1.4-1.1-3-1.4-4.5-.9-4.2-1.4-8.5-1.4-12.8 0-1.3 0-2.5.5-3.7.8-2 3.3-2.5 4.8-.9.5.6.8 1.3 1 2a64.6 64.6 0 0 1 2.3 15.6c0 1.3 0 2.7-.4 4ZM98.8 97.1c0-.3-.3-.3-.5-.4l-1.3-.3c-.5 0-.7-.3-.7-.8V80.2c0-1.2-.1-2.3-.5-3.4-.4-1-1-1.9-1.9-2.6-1.4-1-3-1.5-4.7-1.8-4.3-.5-8.5 0-12.6 1.3-.4 0-.5.3-.5.6v6.9c0 .1-.2.4 0 .4.3 0 .6.1.8 0l.2-.4 5.2-7.2c.5-.7 1.1-1 2-.9h.3c1 .2 1.8.6 2.3 1.5.4.7.6 1.4.7 2.2.2 2 .2 4 .2 6 0 .3-.1.5-.4.5l-3.8.8c-2 .4-4 .7-5.9 1.8a6.3 6.3 0 0 0-2.9 3.3c-.5 1.5-.5 3-.3 4.4a5.9 5.9 0 0 0 3.6 4.6c2.8 1.2 7.2.8 9.5-2.1.3-.5.4-.4.6 0a4.3 4.3 0 0 0 2.9 2.2 11.4 11.4 0 0 0 7.3-.6c.2-.1.4-.3.4-.6Zm-11.7-2c-1.6.8-3.6.3-4.2-1.8-.5-2.1-.6-4.3.1-6.5.4-1.2 1.3-2 2.6-2.1l1.6-.2c.6 0 .6 0 .6.6v9c0 .5-.2.9-.7 1ZM47 35.2l-4 .4c-1.8.3-3.5.7-5.1 1.6A7.3 7.3 0 0 0 34 44c0 1.3.2 2.5.4 3.7.1.4 0 .6-.3.8l-2 1c-.3 0-.2.3-.2.6 0 .2.3.2.5.2l1.9-.3c.3 0 .5 0 .5.4l.2 1 1 8 1 6.7.8 5.1c0 .5-.2.7-.5.8l-1.6.7c-.4.1-.4.3-.3.6 0 .3.3.3.5.3h.5l12.7-2c.3 0 .5 0 .5-.3s-.1-.5-.5-.5l-2.3-.2c-.4 0-.7-.1-.7-.6l-.6-4-1.4-9.8-1-6.8c0-.3 0-.6.5-.7l2.8-.4c1.5-.2 1.3.1 1.1-1.4 0-.4-.2-.5-.6-.5l-3.4.6c-.6 0-.7 0-.8-.6l-.6-5c-.2-1-.2-2 0-3 0-.5.2-1 .6-1.3.8-.7 1.1-.8 1.7 0l4.6 5.4c.3.3.5.4.8.3.4-.2.2-.5.2-.7l-1-6.4c0-.3-.2-.4-.4-.4H47ZM137.3 80.2a9.2 9.2 0 0 0-2.3-4 8.8 8.8 0 0 0-4.7-2.4c-3.1-.6-6.2-.5-9.2.8-2.5 1.1-4.4 3-5.5 5.5-1.8 4.5-1.7 9 0 13.4 1 2.4 2.8 4.1 5.2 5.2 3.2 1.5 6.6 1.6 10 .9 2-.5 3.8-1.4 5.3-2.8l1-1.2V95c-.2-.2-.4 0-.6 0-.6.3-1.4.5-2 .6-1.6.2-3.2.3-4.7.1-3-.4-5-2-6.1-4.8-.5-1.5-.7-3-.8-4.4 0-.7 0-.7.6-.7h13.8c.5 0 .6 0 .6-.6a17 17 0 0 0-.6-5Zm-8 4.4h-3l-3 .2c-.3 0-.5 0-.5-.4 0-2.4.1-5 1-7.3.2-.7.5-1.4 1-2 1.3-1.3 3.3-1 4 .8.6 1.3.8 2.7 1 4l.1 4c0 .5-.1.7-.5.7ZM100.5 99.2l12.7-.8c.2 0 .4 0 .4-.4 0-.2 0-.4-.4-.5l-1.7-.3c-.4-.1-.6-.3-.7-.7l-.3-4.3-.7-11-.7-11.8-.5-6.6c0-.4-.1-.5-.5-.6l-1.5.3-8.6 1.8c-.2 0-.5 0-.5.4s.2.5.5.6l2 .6c.3.1.4.3.5.7l.2 4.4 1.4 20.8.3 5.3c0 .3 0 .5-.3.6l-1.7.6c-.3.1-.5.3-.5.6.1.4.4.3.6.3ZM70.2 77H70l-.2-3c0-.3-.1-.4-.5-.5a25.7 25.7 0 0 0-11-.1 8 8 0 0 0-3.7 2.2 7.8 7.8 0 0 0-1.9 5.7c0 1.8.6 3.4 1.9 4.8a14 14 0 0 0 4 3c1.5.7 3.2 1.3 4.7 2.2 1.8 1 2.6 2.2 2 4.8-.2.9-.8 1.5-1.6 2a5 5 0 0 1-3 .3c-.4 0-.7-.2-1-.5L57 94.6l-3.2-3.8c-.3-.2-.5-.3-.8-.2-.3.1-.2.4-.2.6l.2 6.3c0 .4.2.6.6.8 1.5.4 3 .7 4.6.9 2.8.2 5.5.3 8.2-.5 1.3-.5 2.5-1 3.5-2 2.2-2.5 2.5-5.3 1.7-8.3a7.2 7.2 0 0 0-3.1-4.2c-2-1.4-4.4-2.2-6.6-3.4-1.2-.6-2.3-1.3-2.6-2.7-.4-1.6.2-3.3 1.3-4 1.1-.6 2.3-.6 3.6-.3l.3.3 1.5 2 3.2 4.2c.2.2.4.3.7.3.4-.1.3-.4.3-.7v-2.8ZM59.7 27.7c0 .8.1 1.5.3 2.2.4 2.5 1.9 4 4.2 4.6a9.8 9.8 0 0 0 9.2-1.8c.2-.2.3-.5.2-.7 0-.3-.3-.2-.5-.2-1 0-2.1 0-3.1-.3-.6-.2-1.1-.5-1.5-1-.4-.8-.4-1.7-.3-2.5l1.3-16.2c0-.7.1-.7.8-.7l3.7.4c1.2 0 1.2 0 1.3-1.2 0-.4-.1-.5-.4-.5l-4.5-.4c-.6 0-.6-.1-.6-.7l.5-5c0-.6 0-.6-.6-.6l-7.4.5c-.4 0-.5.2-.5.5l-.4 4c0 .4-.1.5-.5.6l-2.8.4c-.3.1-.4.3-.4.6s.2.4.5.4l2.4.2c.6 0 .7 0 .6.8l-.7 8.3-.8 8.3ZM96.1 44.8h.2c0-1 0-2.2.2-3.2 0-.4-.2-.5-.5-.6a5 5 0 0 0-5.2 2.2c-1 1.3-1.5 2.8-2 4.3 0 .2-.1.5-.3.4-.2 0 0-.2 0-.4l.2-5.3c.1-1.5 0-1.5-1.4-1.4l-9.2.8c-.2 0-.4 0-.4.4 0 .2 0 .5.3.6l1.8.8c.4.2.6.4.5.9l-1 19.8c0 .4-.2.5-.6.6-.6 0-1.2.2-1.7.3-.3 0-.5.2-.5.5 0 .4.3.4.6.4l5.7.4 7.6.4c.5 0 .7-.3.5-.6 0-.2-.3-.3-.4-.3l-2.3-.6c-.4 0-.6-.3-.5-.7v-1.6l.8-13c0-1 0-1 .9-1.2 2-.4 4-.3 6-.1.7 0 .7 0 .7-.7v-3.1ZM144.6 99.9c2.6 0 4.7-2 4.6-4.8 0-2.6-2-4.5-4.7-4.5s-4.7 2-4.7 4.6c0 2.7 2 4.7 4.8 4.7Z\"\n\t\t/>\n\t\t<path\n\t\t\tfill=\"#fff\"\n\t\t\td=\"M5 17v12.5c0 .4.1.7.6 1 1.2.5 2.3 1.2 3.5 1.8.3.2.4.4.3.7 0 .4-.3.3-.6.3H.7c-.3 0-.6 0-.7-.3 0-.3 0-.6.4-.8l3.3-1.9c.3-.1.4-.3.4-.5V2.9c0-.5-.3-.8-.7-1L.7 1.2.3.9C0 .8 0 .5 0 .3 0 0 .3 0 .5 0h12.8c.4 0 .6.1.8.4l6 10.3 5.8 9.8.9 1.4c0 .1 0 .3.2.2.2 0 .2-.2.2-.3v-18c0-.5-.2-.8-.6-1l-3.4-1.7-.3-.2c-.3-.1-.3-.4-.2-.6 0-.3.3-.3.5-.3h8c.2 0 .5 0 .5.2 0 .3 0 .6-.2.7l-1.6 1-1.4 1c-.3.1-.4.4-.4.7v28.8c0 .9 0 .9-1 .9h-3.6c-.5 0-.8-.2-1-.6l-5-8.2-5-8.7L7.1 7 5.5 4.2c0-.1-.1-.4-.4-.3-.2 0 0 .3 0 .5V17ZM55.6 12.6a11.2 11.2 0 0 0-8.2-6.3 15 15 0 0 0-8.2.6c-4 1.5-6.7 4.3-7.6 8.6-.8 3.7-.3 7.2 1.4 10.6 1.8 3.7 5 5.9 9 6.4 2.7.4 5.2 0 7.7-1 2.3-.9 4.1-2.3 5.5-4.4 1.4-2.2 2-4.6 2-7.2 0-2.6-.5-5-1.6-7.3Zm-7.5 17c-.5 1.7-2.1 2.6-3.8 1.9-.8-.3-1.2-1-1.6-1.7-.8-1.4-1.1-3-1.4-4.5-.9-4.2-1.4-8.5-1.4-12.8 0-1.3 0-2.5.5-3.7.8-2 3.3-2.5 4.8-.9.5.6.8 1.3 1 2a64.6 64.6 0 0 1 2.3 15.6c0 1.3 0 2.7-.4 4ZM75.3 50.5c-.5-3-2-5.6-4.5-7.4-2.6-2-5.6-2.7-8.7-2.8-1 0-2 0-3 .3-4 1-6.6 3.3-8.2 7a16.3 16.3 0 0 0-1.2 8.7c.3 2.8 1.5 5.2 3.6 7.2a14.7 14.7 0 0 0 12.3 3.2c4-.8 6.8-3.3 8.5-7 1.2-3 1.7-6 1.2-9.2ZM66.5 53c-.3 2.2-.7 4.4-1.3 6.6-.5 1.7-1 3.4-2 4.9-.3.6-.7 1-1.4 1.4-1.4.5-3-.2-3.6-1.6a10 10 0 0 1-.4-3.6 67.6 67.6 0 0 1 3.5-17l1-1.4c1.3-1.4 3.7-1 4.5.8.5 1 .4 2.2.4 3.3 0 2.2-.3 4.4-.7 6.6ZM98.8 97.1c0-.3-.3-.3-.5-.4l-1.3-.3c-.5 0-.7-.3-.7-.8V80.2c0-1.2-.1-2.3-.5-3.4-.4-1-1-1.9-1.9-2.6-1.4-1-3-1.5-4.7-1.8-4.3-.5-8.5 0-12.6 1.3-.4 0-.5.3-.5.6v6.9c0 .1-.2.4 0 .4.3 0 .6.1.8 0l.2-.4 5.2-7.2c.5-.7 1.1-1 2-.9h.3c1 .2 1.8.6 2.3 1.5.4.7.6 1.4.7 2.2.2 2 .2 4 .2 6 0 .3-.1.5-.4.5l-3.8.8c-2 .4-4 .7-5.9 1.8a6.3 6.3 0 0 0-2.9 3.3c-.5 1.5-.5 3-.3 4.4a5.9 5.9 0 0 0 3.6 4.6c2.8 1.2 7.2.8 9.5-2.1.3-.5.4-.4.6 0a4.3 4.3 0 0 0 2.9 2.2 11.4 11.4 0 0 0 7.3-.6c.2-.1.4-.3.4-.6Zm-11.7-2c-1.6.8-3.6.3-4.2-1.8-.5-2.1-.6-4.3.1-6.5.4-1.2 1.3-2 2.6-2.1l1.6-.2c.6 0 .6 0 .6.6v9c0 .5-.2.9-.7 1Z\"\n\t\t/>\n\t\t<path\n\t\t\tfill=\"#fff\"\n\t\t\td=\"M47 35.2h1.6c.2 0 .3.1.4.4l1 6.4c0 .2.2.5-.2.7-.3 0-.5 0-.8-.3L44.4 37c-.6-.8-1-.7-1.7 0-.4.3-.5.8-.6 1.3-.2 1-.2 2 0 3l.6 5c.1.5.2.6.8.6l3.4-.6c.4 0 .6 0 .6.5.2 1.5.4 1.2-1 1.4l-3 .4c-.4 0-.4.4-.3.7l1 6.8 1.3 9.8.6 4c0 .5.3.6.7.6l2.3.2c.4 0 .5.2.5.5 0 .4-.2.3-.5.4l-12.7 1.8h-.5c-.2 0-.5.1-.5-.2 0-.3 0-.5.3-.6l1.6-.7c.4-.1.5-.3.5-.8L37 66l-1-6.7-1-8-.2-1c0-.3-.2-.4-.5-.4l-2 .3c-.1 0-.3 0-.4-.2 0-.3-.1-.5.2-.7l2-1c.3-.1.4-.3.3-.7a21 21 0 0 1-.4-3.7c0-3 1.3-5.2 3.9-6.7 1.6-.9 3.3-1.3 5-1.6l4.1-.4ZM137.3 80.2a9.2 9.2 0 0 0-2.3-4 8.8 8.8 0 0 0-4.7-2.4c-3.1-.6-6.2-.5-9.2.8-2.5 1.1-4.4 3-5.5 5.5-1.8 4.5-1.7 9 0 13.4 1 2.4 2.8 4.1 5.2 5.2 3.2 1.5 6.6 1.6 10 .9 2-.5 3.8-1.4 5.3-2.8l1-1.2V95c-.2-.2-.4 0-.6 0-.6.3-1.4.5-2 .6-1.6.2-3.2.3-4.7.1-3-.4-5-2-6.1-4.8-.5-1.5-.7-3-.8-4.4 0-.7 0-.7.6-.7h13.8c.5 0 .6 0 .6-.6a17 17 0 0 0-.6-5Zm-8 4.4h-3l-3 .2c-.3 0-.5 0-.5-.4 0-2.4.1-5 1-7.3.2-.7.5-1.4 1-2 1.3-1.3 3.3-1 4 .8.6 1.3.8 2.7 1 4l.1 4c0 .5-.1.7-.5.7ZM100.5 99.2c-.2 0-.5.1-.6-.3 0-.3.2-.5.5-.6l1.7-.6c.3 0 .4-.3.3-.6 0-1.8-.2-3.6-.3-5.3L100.7 71l-.2-4.4c0-.4-.2-.6-.6-.7l-1.9-.6c-.3 0-.5-.2-.5-.6 0-.4.3-.4.5-.4l8.6-1.8 1.5-.3c.4 0 .5.2.5.6l.5 6.6.7 11.8.7 11 .3 4.3c0 .4.3.6.7.7l1.7.3c.3 0 .4.3.4.5 0 .3-.2.4-.4.4l-12.7.8ZM70.2 77v3c0 .2 0 .5-.3.6-.3 0-.5 0-.7-.3L66 76a224 224 0 0 1-1.8-2.3 4.5 4.5 0 0 0-3.6.3c-1.1.7-1.7 2.4-1.3 4 .3 1.4 1.4 2.1 2.6 2.7 2.2 1.2 4.5 2 6.6 3.4 1.5 1 2.7 2.4 3.1 4.2.8 3 .5 5.8-1.7 8.2-1 1-2.2 1.6-3.5 2a21 21 0 0 1-8.2.6c-1.6-.2-3-.5-4.6-1-.4 0-.5-.3-.6-.7l-.2-6.3c0-.2-.1-.5.2-.6.3 0 .5 0 .8.2l3.2 3.8c1 1.1 2 2.2 2.8 3.3.3.3.6.5 1 .5 1 .2 2 0 3-.4.8-.4 1.4-1 1.6-2 .6-2.5-.2-3.6-2-4.7-1.5-.9-3.2-1.5-4.7-2.3-1.5-.8-3-1.6-4-3a7.2 7.2 0 0 1-1.9-4.7c0-2.1.5-4 2-5.7a8 8 0 0 1 3.5-2.2c2.2-.7 4.4-.6 6.6-.5 1.5 0 3 .2 4.5.6.4 0 .5.2.5.6l.2 3ZM59.7 27.7l.8-8.3.7-8.3c0-.7 0-.8-.6-.8l-2.4-.2c-.3 0-.5 0-.5-.4 0-.3.1-.5.4-.6l2.8-.4c.4 0 .5-.2.5-.6l.4-4c0-.3.1-.5.5-.5l7.4-.5c.6 0 .6 0 .6.6l-.5 5c0 .6 0 .6.6.7l4.5.4c.3 0 .4.1.4.5 0 1.3 0 1.3-1.3 1.2l-3.7-.4c-.7 0-.7 0-.8.7L68.2 28c-.1.8-.1 1.7.3 2.4.4.6.9 1 1.5 1 1 .4 2 .4 3 .4.3 0 .5-.1.6.2 0 .2 0 .5-.2.7a9.8 9.8 0 0 1-9.2 1.9 5.5 5.5 0 0 1-4.2-4.7 13 13 0 0 1-.3-2.2ZM96.1 44.8V48c0 .7 0 .7-.7.6-2-.2-4-.3-6 .1-1 .2-.9.2-1 1.1L87.8 63v1.6c0 .4.1.6.5.7l2.3.6c.1 0 .3 0 .4.3.2.3 0 .6-.5.6l-7.6-.4-5.7-.4c-.3 0-.6 0-.6-.3 0-.4.2-.5.5-.6l1.7-.3c.4 0 .5-.2.5-.6l1.1-19.8c0-.5 0-.7-.5-.9l-1.8-.8c-.3-.1-.3-.4-.3-.6 0-.3.2-.4.4-.4l9.2-.8c1.5-.1 1.5-.1 1.4 1.4 0 1.8-.2 3.5-.3 5.3 0 .2-.1.4.1.4s.2-.2.3-.4c.5-1.5 1-3 2-4.3A5 5 0 0 1 96 41c.3 0 .5.2.5.6l-.2 3.2h-.2ZM144.6 99.9c-2.7 0-4.7-2-4.8-4.7 0-2.7 2-4.6 4.7-4.6s4.7 2 4.7 4.5c0 2.7-2 4.8-4.7 4.8Z\"\n\t\t/>\n\t</svg>\n);\n\n// internal component\ninterface StickyLiveblogAskProps {\n\turl: string;\n\tonCtaClick: () => void;\n}\n\nexport const StickyLiveblogAsk: ReactComponent<StickyLiveblogAskProps> = ({\n\turl,\n\tonCtaClick,\n}: StickyLiveblogAskProps) => (\n\t<div css={container}>\n\t\t<div css={imageHeader}>{notForSaleSvg()}</div>\n\t\t<div css={textBlock}>\n\t\t\t<div css={bodySection}>\n\t\t\t\tThe Guardian’s expert news coverage is funded by people like\n\t\t\t\tyou, not a billionaire owner. Will you help us keep our\n\t\t\t\tindependent journalism free and open to all today?\n\t\t\t</div>\n\t\t\t<div css={ctaSection}>\n\t\t\t\t<ThemeProvider theme={contributionsTheme}>\n\t\t\t\t\t<LinkButton\n\t\t\t\t\t\thref={url}\n\t\t\t\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\tonClick={onCtaClick}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\tpriority={'primary'}\n\t\t\t\t\t\tcssOverrides={cta}\n\t\t\t\t\t>\n\t\t\t\t\t\tSupport us\n\t\t\t\t\t</LinkButton>\n\t\t\t\t</ThemeProvider>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n);\n\n// StickyLiveblogAskWrapper to allow us to create story\ninterface StickyLiveblogAskWrapperProps {\n\treferrerUrl: string;\n\tshouldHideReaderRevenueOnArticle: boolean;\n}\n\nconst whatAmI = 'sticky-liveblog-ask';\n\nexport const StickyLiveblogAskWrapper: ReactComponent<\n\tStickyLiveblogAskWrapperProps\n> = ({ referrerUrl, shouldHideReaderRevenueOnArticle }) => {\n\tconst { renderingTarget } = useConfig();\n\tconst countryCode = useCountryCode(whatAmI);\n\tconst pageViewId = usePageViewId(renderingTarget);\n\n\t// should we show ourselves?\n\tconst [showSupportMessagingForUser, setShowSupportMessaging] =\n\t\tuseState<boolean>(false);\n\tconst isSignedIn = useIsSignedIn();\n\n\tuseEffect(() => {\n\t\tif (isSignedIn !== 'Pending') {\n\t\t\tsetShowSupportMessaging(\n\t\t\t\tshouldHideSupportMessaging(isSignedIn) === false,\n\t\t\t);\n\t\t}\n\t}, [isSignedIn]);\n\n\t// tracking\n\tconst tracking: Tracking = useMemo(() => {\n\t\treturn {\n\t\t\tophanPageId: pageViewId ?? '',\n\t\t\tplatformId: 'GUARDIAN_WEB',\n\t\t\tclientName: 'dcr',\n\t\t\treferrerUrl,\n\t\t\t// message tests\n\t\t\tabTestName: '', // stop tracking AB test.\n\t\t\tabTestVariant: '', // stop tracking AB test.\n\t\t\tcampaignCode: whatAmI,\n\t\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\t};\n\t}, [pageViewId, referrerUrl]);\n\n\tconst urlWithRegionAndTracking = addRegionIdAndTrackingParamsToSupportUrl(\n\t\tbaseUrl,\n\t\ttracking,\n\t\tundefined,\n\t\tcountryCode,\n\t);\n\n\tconst canShow =\n\t\tshowSupportMessagingForUser && !shouldHideReaderRevenueOnArticle;\n\n\t// send event regardless of variant or control\n\t// but only where they *could* see the component.\n\tuseEffect(() => {\n\t\tif (canShow) {\n\t\t\t// For ophan\n\t\t\tvoid submitComponentEvent(\n\t\t\t\tcreateInsertEventFromTracking(tracking, tracking.campaignCode),\n\t\t\t\trenderingTarget,\n\t\t\t);\n\t\t}\n\t}, [tracking, renderingTarget, canShow]);\n\n\tconst onCtaClick = () => {\n\t\tvoid submitComponentEvent(\n\t\t\tcreateClickEventFromTracking(tracking, tracking.campaignCode),\n\t\t\trenderingTarget,\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{canShow && (\n\t\t\t\t<div css={stickyLeft}>\n\t\t\t\t\t<StickyLiveblogAsk\n\t\t\t\t\t\turl={urlWithRegionAndTracking}\n\t\t\t\t\t\tonCtaClick={onCtaClick}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/shared/src/lib/tracking.ts\n */\nimport type { OphanAction, OphanComponentEvent } from '@guardian/libs';\nimport { isUndefined } from '@guardian/libs';\nimport { addRegionIdToSupportUrl } from '@guardian/support-dotcom-components';\nimport type {\n\tAbandonedBasket,\n\tBannerTest,\n\tBannerVariant,\n\tContributionFrequency,\n\tEpicTest,\n\tEpicVariant,\n\tTargetingAbTest,\n\tTracking,\n} from '@guardian/support-dotcom-components/dist/shared/types';\n\n// TRACKING VIA support.theguardian.com\ntype LinkParams = {\n\tREFPVID: string;\n\tINTCMP: string;\n\tacquisitionData: string;\n\tnumArticles: number;\n};\n\ntype AbTestObject = {\n\tname: string;\n\tvariant: string;\n\ttestType?: string;\n};\n\nconst generateAbTestArray = (\n\tabTestName: string,\n\tabTestVariant: string,\n\ttargetingAbTest?: TargetingAbTest,\n\tamountsAbTestName?: string,\n\tamountsAbTestVariant?: string,\n): AbTestObject[] => {\n\tconst abTests: AbTestObject[] = [\n\t\t{\n\t\t\tname: abTestName,\n\t\t\tvariant: abTestVariant,\n\t\t},\n\t];\n\tif (targetingAbTest) {\n\t\tabTests.push({\n\t\t\tname: targetingAbTest.testName,\n\t\t\tvariant: targetingAbTest.variantName,\n\t\t});\n\t}\n\tif (amountsAbTestName && amountsAbTestVariant) {\n\t\tabTests.push({\n\t\t\tname: amountsAbTestName,\n\t\t\tvariant: amountsAbTestVariant,\n\t\t\ttestType: 'AMOUNTS_TEST',\n\t\t});\n\t}\n\treturn abTests;\n};\n\nconst encodeAcquisitionsData = (\n\tparams: Tracking,\n\tabTests: AbTestObject[],\n): string => {\n\treturn encodeURIComponent(\n\t\tJSON.stringify({\n\t\t\tsource: params.platformId,\n\t\t\tcomponentId: params.campaignCode,\n\t\t\tcomponentType: params.componentType,\n\t\t\tcampaignCode: params.campaignCode,\n\t\t\tabTests,\n\t\t\treferrerPageviewId: params.ophanPageId,\n\t\t\treferrerUrl: params.referrerUrl,\n\t\t\tisRemote: true, // Temp param to indicate served by remote service\n\t\t\tlabels: params.labels,\n\t\t}),\n\t);\n};\n\nconst generateQueryString = (\n\tparams: Tracking,\n\tacquisitionData: string,\n\tnumArticles: number,\n): string => {\n\tconst trackingLinkParams: LinkParams = {\n\t\tREFPVID: params.ophanPageId || 'not_found',\n\t\tINTCMP: params.campaignCode || '',\n\t\tacquisitionData,\n\t\tnumArticles: numArticles || 0,\n\t};\n\n\tconst queryString = Object.entries(trackingLinkParams)\n\t\t.filter(([, value]) => !isUndefined(value))\n\t\t.map(([key, value]) => `${key}=${value}`);\n\n\treturn queryString.join('&');\n};\n\nexport const addTrackingParams = (\n\tbaseUrl: string,\n\tparams: Tracking,\n\tnumArticles?: number,\n\tamountsAbTestName?: string,\n\tamountsAbTestVariant?: string,\n): string => {\n\tconst abTests = generateAbTestArray(\n\t\tparams.abTestName,\n\t\tparams.abTestVariant,\n\t\tparams.targetingAbTest,\n\t\tamountsAbTestName,\n\t\tamountsAbTestVariant,\n\t);\n\tconst acquisitionData = encodeAcquisitionsData(params, abTests);\n\tconst queryString = generateQueryString(\n\t\tparams,\n\t\tacquisitionData,\n\t\tnumArticles ?? 0,\n\t);\n\tconst alreadyHasQueryString = baseUrl.includes('?');\n\treturn `${baseUrl}${alreadyHasQueryString ? '&' : '?'}${queryString}`;\n};\n\nconst addAbandonedBasketContributionParams = (\n\tbaseUrl: string,\n\t{ region, amount, billingPeriod }: AbandonedBasket,\n): string => {\n\treturn `${baseUrl}/${region}/contribute/checkout?selected-amount=${amount}&selected-contribution-type=${billingPeriod}`;\n};\n\nexport const addAbandonedBasketParamsToUrl = (\n\tbaseUrl: string,\n\tabandonedBasket: AbandonedBasket,\n): string => {\n\tswitch (abandonedBasket.product) {\n\t\tcase 'Contribution':\n\t\tcase 'SupporterPlus':\n\t\t\treturn addAbandonedBasketContributionParams(\n\t\t\t\tbaseUrl,\n\t\t\t\tabandonedBasket,\n\t\t\t);\n\t\tdefault:\n\t\t\treturn baseUrl;\n\t}\n};\n\nexport const addAbandonedBasketAndTrackingParamsToUrl = (\n\tbaseUrl: string,\n\tabandonedBasket: AbandonedBasket,\n\ttracking: Tracking,\n): string => {\n\treturn addTrackingParams(\n\t\taddAbandonedBasketParamsToUrl(baseUrl, abandonedBasket),\n\t\ttracking,\n\t);\n};\n\nexport const isSupportUrl = (baseUrl: string): boolean =>\n\t/\\bsupport\\./.test(baseUrl);\n\nexport const addRegionIdAndTrackingParamsToSupportUrl = (\n\tbaseUrl: string,\n\ttracking: Tracking,\n\tnumArticles?: number,\n\tcountryCode?: string,\n\tamountsAbTestName?: string,\n\tamountsAbTestVariant?: string,\n): string => {\n\tif (!isSupportUrl(baseUrl)) {\n\t\treturn baseUrl;\n\t}\n\tconst urlWithRegion = addRegionIdToSupportUrl(baseUrl, countryCode);\n\n\treturn addTrackingParams(\n\t\turlWithRegion,\n\t\ttracking,\n\t\tnumArticles,\n\t\tamountsAbTestName,\n\t\tamountsAbTestVariant,\n\t);\n};\n\nconst hrefRegex = /href=\"(.*?)\"/g;\nexport const addTrackingParamsToBodyLinks = (\n\ttext: string,\n\ttracking: Tracking,\n\tnumArticles?: number,\n\tcountryCode?: string,\n): string => {\n\tconst trackingWithLabel = addLabelToTracking(tracking, 'body-link');\n\n\tconst replaceHref = (wholeMatch: string, url: string) =>\n\t\t`href=\"${addRegionIdAndTrackingParamsToSupportUrl(\n\t\t\turl,\n\t\t\ttrackingWithLabel,\n\t\t\tnumArticles,\n\t\t\tcountryCode,\n\t\t)}\"`;\n\n\treturn text.replace(hrefRegex, replaceHref);\n};\n\n// TRACKING VIA profile.theguardian.com\ntype ProfileLinkParams = {\n\tcomponentEventParams: string;\n\treturnUrl: string;\n};\n\ntype TrackingParam = keyof Tracking;\n\nexport const addProfileTrackingParams = (\n\tbaseUrl: string,\n\tparams: Tracking,\n): string => {\n\tconst constructQuery = (query: Partial<Tracking>): string =>\n\t\tObject.keys(query)\n\t\t\t.map((param) => {\n\t\t\t\tconst value = query[param as TrackingParam];\n\t\t\t\tconst queryValue = Array.isArray(value)\n\t\t\t\t\t? value.map((v) => encodeURIComponent(v)).join(',')\n\t\t\t\t\t: encodeURIComponent(value as string | number | boolean);\n\t\t\t\treturn `${param}=${queryValue}`;\n\t\t\t})\n\t\t\t.join('&');\n\n\tconst componentEventParamsData = {\n\t\tcomponentType: params.componentType,\n\t\tcomponentId: params.campaignCode,\n\t\tabTestName: params.abTestName,\n\t\tabTestVariant: params.abTestVariant,\n\t\tviewId: params.ophanPageId,\n\t};\n\n\tconst trackingLinkParams: ProfileLinkParams = {\n\t\t// Note: profile subdomain take uri encoded query params NOT json\n\t\tcomponentEventParams: encodeURIComponent(\n\t\t\tconstructQuery(componentEventParamsData),\n\t\t),\n\t\treturnUrl: params.referrerUrl,\n\t};\n\n\tconst queryString = Object.entries(trackingLinkParams)\n\t\t.filter(([, value]) => !isUndefined(value))\n\t\t.map(([key, value]) => `${key}=${value}`);\n\tconst alreadyHasQueryString = baseUrl.includes('?');\n\n\treturn `${baseUrl}${alreadyHasQueryString ? '&' : '?'}${queryString.join(\n\t\t'&',\n\t)}`;\n};\n\nexport const addChoiceCardsParams = (\n\turl: string,\n\tfrequency: ContributionFrequency,\n\tamount?: number | 'other',\n): string => {\n\tconst newParams = `selected-contribution-type=${frequency}${\n\t\tamount !== undefined ? `&selected-amount=${amount}` : ''\n\t}`;\n\tconst alreadyHasQueryString = url.includes('?');\n\treturn `${url}${alreadyHasQueryString ? '&' : '?'}${newParams}`;\n};\n\nexport const addChoiceCardsOneTimeParams = (url: string): string => {\n\tconst newParams = `oneTime`;\n\tconst alreadyHasQueryString = url.includes('?');\n\treturn `${url}${alreadyHasQueryString ? '&' : '?'}${newParams}`;\n};\n\nexport const addChoiceCardsProductParams = (\n\turl: string,\n\tproduct: string,\n\tratePlan: string,\n\tcontribution?: number,\n): string => {\n\tconst newParams = `product=${product}&ratePlan=${ratePlan}${\n\t\tcontribution !== undefined ? `&contribution=${contribution}` : ''\n\t}`;\n\n\tconst alreadyHasQueryString = url.includes('?');\n\treturn `${url}${alreadyHasQueryString ? '&' : '?'}${newParams}`;\n};\n\nexport const isProfileUrl = (baseUrl: string): boolean =>\n\t/\\bprofile\\./.test(baseUrl);\nexport const addTrackingParamsToProfileUrl = (\n\tbaseUrl: string,\n\ttracking: Tracking,\n): string => {\n\treturn isProfileUrl(baseUrl)\n\t\t? addProfileTrackingParams(baseUrl, tracking)\n\t\t: baseUrl;\n};\n\n// SHARED TRACKING\nconst campaignPrefix = 'gdnwb_copts_memco';\n\nexport const buildCampaignCode = (\n\ttest: EpicTest,\n\tvariant: EpicVariant,\n): string =>\n\t`${campaignPrefix}_${test.campaignId ?? test.name}_${variant.name}`;\n\nexport const buildBannerCampaignCode = (\n\ttest: BannerTest,\n\tvariant: BannerVariant,\n): string => `${test.name}_${variant.name}`;\n\nexport const buildAmpEpicCampaignCode = (\n\ttestName: string,\n\tvariantName: string,\n): string => `AMP__${testName}__${variantName}`;\n\nconst createEventFromTracking = (action: OphanAction) => {\n\treturn (tracking: Tracking, componentId: string): OphanComponentEvent => {\n\t\tconst {\n\t\t\tabTestName,\n\t\t\tabTestVariant,\n\t\t\tcomponentType,\n\t\t\tproducts = [],\n\t\t\tlabels = [],\n\t\t\tcampaignCode,\n\t\t} = tracking;\n\t\tconst abTest =\n\t\t\tabTestName && abTestVariant\n\t\t\t\t? {\n\t\t\t\t\t\tname: abTestName,\n\t\t\t\t\t\tvariant: abTestVariant,\n\t\t\t\t  }\n\t\t\t\t: null;\n\n\t\tconst targetingAbTest = tracking.targetingAbTest\n\t\t\t? {\n\t\t\t\t\tname: tracking.targetingAbTest.testName,\n\t\t\t\t\tvariant: tracking.targetingAbTest.variantName,\n\t\t\t  }\n\t\t\t: null;\n\n\t\treturn {\n\t\t\tcomponent: {\n\t\t\t\tcomponentType,\n\t\t\t\tproducts,\n\t\t\t\tcampaignCode,\n\t\t\t\tid: componentId,\n\t\t\t\tlabels,\n\t\t\t},\n\t\t\t...(abTest ? { abTest } : {}),\n\t\t\t...(targetingAbTest ? { targetingAbTest } : {}),\n\t\t\taction,\n\t\t};\n\t};\n};\n\nexport const addLabelToTracking = (\n\ttracking: Tracking,\n\tlabel: string,\n): Tracking => {\n\tif (tracking.labels) {\n\t\treturn {\n\t\t\t...tracking,\n\t\t\tlabels: [...tracking.labels, label],\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\t...tracking,\n\t\t\tlabels: [label],\n\t\t};\n\t}\n};\n\nexport const createClickEventFromTracking = createEventFromTracking('CLICK');\n\nexport const createViewEventFromTracking = createEventFromTracking('VIEW');\n\nexport const createInsertEventFromTracking = createEventFromTracking('INSERT');\n","import {\n\tgetCookie,\n\tisUndefined,\n\tonConsentChange,\n\tstorage,\n} from '@guardian/libs';\nimport type { HeaderPayload } from '@guardian/support-dotcom-components/dist/dotcom/types';\nimport { useEffect, useState } from 'react';\nimport type { ArticleDeprecated } from '../types/article';\nimport type { DCRFrontType } from '../types/front';\nimport type { DCRNewslettersPageType } from '../types/newslettersPage';\nimport type { DCRTagPageType } from '../types/tagPage';\n\n// User Attributes API cookies (created on sign-in)\nexport const HIDE_SUPPORT_MESSAGING_COOKIE = 'gu_hide_support_messaging';\nexport const RECURRING_CONTRIBUTOR_COOKIE = 'gu_recurring_contributor';\nexport const OPT_OUT_OF_ARTICLE_COUNT_COOKIE = 'gu_article_count_opt_out';\n\n// Support Frontend cookie (created when a contribution is made)\nexport const SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE =\n\t'gu.contributions.contrib-timestamp';\n\n//  Local storage keys\nconst WEEKLY_ARTICLE_COUNT_KEY = 'gu.history.weeklyArticleCount';\nexport const NO_RR_BANNER_KEY = 'gu.noRRBanner';\n\n// See https://github.com/guardian/support-dotcom-components/blob/main/module-versions.md\nexport const MODULES_VERSION = 'v3';\n\n// Returns true if we should hide support messaging because the user is a supporter.\n// Checks the cookie that is set by the User Attributes API upon signing in.\n// Value computed server-side and looks at all of the user's active products,\n// including but not limited to recurring & one-off contributions,\n// paper & digital subscriptions, as well as user tiers (GU supporters/staff/partners/patrons).\n// https://github.com/guardian/members-data-api/blob/3a72dc00b9389968d91e5930686aaf34d8040c52/membership-attribute-service/app/models/Attributes.scala\nexport const hasSupporterCookie = (\n\tisSignedIn: boolean,\n): boolean | 'Pending' => {\n\tconst cookie = getCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE });\n\tswitch (cookie) {\n\t\tcase 'true':\n\t\t\treturn true;\n\t\tcase 'false':\n\t\t\treturn false;\n\t\tdefault:\n\t\t\t/**\n\t\t\t * If cookie is not present but user is signed in, we do not want to show any messaging.\n\t\t\t * This is because of a race condition on the first page view after signing in, where\n\t\t\t * we may be awaiting the response from the API to find out if they're a supporter.\n\t\t\t */\n\t\t\tif (isSignedIn) {\n\t\t\t\treturn 'Pending';\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t}\n};\n\n// looks at the SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE (set by support-frontend when making one-off contribution)\n// and returns a Unix epoch int of the date if it exists.\nexport const getLastOneOffContributionTimestamp = (): number | undefined => {\n\t// Support cookies - expects Unix epoch\n\tconst contributionDateFromSupport = getCookie({\n\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t});\n\n\tif (!contributionDateFromSupport) {\n\t\treturn undefined;\n\t}\n\n\t// Parse dates into common a number\n\tconst parsedDateFromSupport = contributionDateFromSupport\n\t\t? parseInt(contributionDateFromSupport, 10)\n\t\t: 0;\n\n\treturn parsedDateFromSupport || undefined; // This guards against 'parsedDateFromSupport' being NaN\n};\n\nconst dateDiffDays = (from: number, to: number): number => {\n\tconst oneDayMs = 1000 * 60 * 60 * 24;\n\tconst diffMs = to - from;\n\treturn Math.floor(diffMs / oneDayMs);\n};\n\nconst AskPauseDays = 90;\n\nexport const isRecentOneOffContributor = (): boolean => {\n\tconst lastContributionDate = getLastOneOffContributionTimestamp();\n\tif (!isUndefined(lastContributionDate)) {\n\t\tconst now = Date.now();\n\t\treturn dateDiffDays(lastContributionDate, now) <= AskPauseDays;\n\t}\n\n\treturn false;\n};\n\nexport const shouldHideSupportMessaging = (\n\tisSignedIn: boolean,\n): boolean | 'Pending' => {\n\tconst hasCookie = hasSupporterCookie(isSignedIn);\n\tif (hasCookie === 'Pending') {\n\t\treturn 'Pending';\n\t} else {\n\t\treturn hasCookie || isRecentOneOffContributor();\n\t}\n};\n\nexport const REQUIRED_CONSENTS_FOR_ARTICLE_COUNT = [1, 3, 7];\nconst REQUIRED_CONSENTS_FOR_BROWSER_ID = [1, 3, 5, 7];\n\nexport const hasArticleCountOptOutCookie = (): boolean =>\n\tgetCookie({ name: OPT_OUT_OF_ARTICLE_COUNT_COOKIE }) !== null;\n\nconst removeWeeklyArticleCountsFromLocalStorage = () =>\n\tstorage.local.remove(WEEKLY_ARTICLE_COUNT_KEY);\n\nexport const hasCmpConsentForWeeklyArticleCount = (): Promise<boolean> => {\n\treturn new Promise((resolve) => {\n\t\tif (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n\t\t\tresolve(true);\n\t\t}\n\t\tonConsentChange(({ usnat, tcfv2, aus }) => {\n\t\t\tif (usnat ?? aus) {\n\t\t\t\tresolve(true);\n\t\t\t} else if (tcfv2) {\n\t\t\t\tconst hasRequiredConsents =\n\t\t\t\t\tREQUIRED_CONSENTS_FOR_ARTICLE_COUNT.every(\n\t\t\t\t\t\t(consent) => tcfv2.consents[consent],\n\t\t\t\t\t);\n\n\t\t\t\tif (!hasRequiredConsents) {\n\t\t\t\t\tremoveWeeklyArticleCountsFromLocalStorage();\n\t\t\t\t}\n\t\t\t\tresolve(hasRequiredConsents);\n\t\t\t}\n\t\t});\n\t});\n};\n\nexport const hasOptedOutOfArticleCount = async (): Promise<boolean> => {\n\tconst hasCmpConsent = await hasCmpConsentForWeeklyArticleCount();\n\treturn !hasCmpConsent || hasArticleCountOptOutCookie();\n};\n\nexport const hasOptedOutOfWeeklyArticleCount = async (): Promise<boolean> => {\n\tconst hasCmpConsent = await hasCmpConsentForWeeklyArticleCount();\n\treturn !hasCmpConsent || hasArticleCountOptOutCookie();\n};\n\n// A hook to find out if a user has opted out of article counting\nexport const useHasOptedOutOfArticleCount = (): boolean | 'Pending' => {\n\tconst [hasOptedOut, setHasOptedOut] = useState<boolean | 'Pending'>(\n\t\t'Pending',\n\t);\n\n\tuseEffect(() => {\n\t\thasOptedOutOfArticleCount()\n\t\t\t.then(setHasOptedOut)\n\t\t\t.catch(() => setHasOptedOut(true));\n\t}, []);\n\n\treturn hasOptedOut;\n};\n\nexport const hasCmpConsentForBrowserId = (): Promise<boolean> =>\n\tnew Promise((resolve) => {\n\t\tif (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n\t\t\tresolve(true);\n\t\t}\n\t\tonConsentChange(({ usnat, tcfv2, aus }) => {\n\t\t\tif (usnat ?? aus) {\n\t\t\t\tresolve(true);\n\t\t\t} else if (tcfv2) {\n\t\t\t\tconst hasRequiredConsents =\n\t\t\t\t\tREQUIRED_CONSENTS_FOR_BROWSER_ID.every(\n\t\t\t\t\t\t(consent) => tcfv2.consents[consent],\n\t\t\t\t\t);\n\t\t\t\tresolve(hasRequiredConsents);\n\t\t\t}\n\t\t});\n\t});\n\nconst twentyMins = 20 * 60000;\nexport const withinLocalNoBannerCachePeriod = (): boolean =>\n\t!!storage.local.get(NO_RR_BANNER_KEY);\n\nexport const setLocalNoBannerCachePeriod = (now: number = Date.now()): void =>\n\tstorage.local.set(NO_RR_BANNER_KEY, true, now + twentyMins);\n\n// Returns true if banner was closed in the last hour\nconst ONE_HOUR_IN_MS = 1000 * 60 * 60;\nexport const recentlyClosedBanner = (\n\tlastClosedAt?: string,\n\tnow = Date.now(),\n): boolean => {\n\tif (lastClosedAt) {\n\t\treturn now - new Date(lastClosedAt).getTime() < ONE_HOUR_IN_MS;\n\t}\n\treturn false;\n};\n\nexport const getContributionsServiceUrl = (\n\tconfig:\n\t\t| ArticleDeprecated\n\t\t| DCRFrontType\n\t\t| DCRTagPageType\n\t\t| DCRNewslettersPageType,\n): string => process.env.SDC_URL ?? config.contributionsServiceUrl;\n\ntype PurchaseInfo = HeaderPayload['targeting']['purchaseInfo'];\nexport const getPurchaseInfo = (): PurchaseInfo => {\n\tconst purchaseInfoRaw = getCookie({\n\t\tname: 'GU_CO_COMPLETE',\n\t\tshouldMemoize: true,\n\t});\n\n\tif (!purchaseInfoRaw) {\n\t\treturn undefined;\n\t}\n\n\tlet purchaseInfo: PurchaseInfo;\n\n\ttry {\n\t\tpurchaseInfo = JSON.parse(decodeURIComponent(purchaseInfoRaw));\n\t} catch {} // eslint-disable-line no-empty -- silently handle error\n\n\treturn purchaseInfo;\n};\n","import { useEffect, useState } from 'react';\nimport type { AuthStatus } from './identity';\nimport {\n\teitherInOktaTestOrElse,\n\tgetSignedInStatusWithCookies,\n\tgetSignedInStatusWithOkta,\n} from './identity';\n\n/**\n * A hook to find out if a user is signed in.\n * Returns `'Pending'` until status is known.\n * Always returns `'Pending'` during server-side rendering.\n * */\nexport const useIsSignedIn = (): boolean | 'Pending' => {\n\tconst authStatus = useAuthStatus();\n\tswitch (authStatus.kind) {\n\t\tcase 'Pending':\n\t\t\treturn 'Pending';\n\t\tcase 'SignedInWithCookies':\n\t\tcase 'SignedInWithOkta':\n\t\t\treturn true;\n\t\tcase 'SignedOutWithCookies':\n\t\tcase 'SignedOutWithOkta':\n\t\t\treturn false;\n\t}\n};\n\nexport const useAuthStatus = (): AuthStatus => {\n\tconst [authStatus, setAuthStatus] = useState<AuthStatus>({\n\t\tkind: 'Pending',\n\t});\n\n\tuseEffect(() => {\n\t\teitherInOktaTestOrElse(\n\t\t\t(oktaAuthState) => {\n\t\t\t\tsetAuthStatus(getSignedInStatusWithOkta(oktaAuthState));\n\t\t\t},\n\t\t\t() => setAuthStatus(getSignedInStatusWithCookies()),\n\t\t).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}, []);\n\n\treturn authStatus;\n};\n","import { type CountryCode, isNonNullable } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { getLocaleCode } from './getCountryCode';\n\nexport const useCountryCode = (feature: string): CountryCode | undefined => {\n\tconst [countryCode, setCountryCode] = useState<CountryCode>();\n\n\tuseEffect(() => {\n\t\tgetLocaleCode()\n\t\t\t.then((cc) => {\n\t\t\t\tif (isNonNullable(cc)) setCountryCode(cc);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconst msg = `Error fetching country code: ${String(e)}`;\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\tfeature,\n\t\t\t\t);\n\t\t\t});\n\t}, [feature]);\n\n\treturn countryCode;\n};\n","import { useEffect, useState } from 'react';\nimport { getOphan } from '../client/ophan/ophan';\nimport type { RenderingTarget } from '../types/renderingTarget';\n\nexport const usePageViewId = (\n\trenderingTarget: RenderingTarget,\n): string | undefined => {\n\tconst [id, setId] = useState<string>();\n\n\tuseEffect(() => {\n\t\tgetOphan(renderingTarget)\n\t\t\t.then(({ pageViewId }) => {\n\t\t\t\tsetId(pageViewId);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tsetId('no-page-view-id-available');\n\t\t\t});\n\t}, [renderingTarget]);\n\n\treturn id;\n};\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden } from '../../../foundations/accessibility/visually-hidden.js';\nimport { iconSize } from '../../../foundations/__generated__/size.js';\n\nconst Svg = ({ size, theme }) => /* @__PURE__ */ jsx(\n  \"svg\",\n  {\n    width: size ? iconSize[size] : void 0,\n    height: void 0,\n    viewBox: \"-3 -3 30 30\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: false,\n    \"aria-hidden\": true,\n    children: /* @__PURE__ */ jsx(\n      \"path\",\n      {\n        fillRule: \"evenodd\",\n        clipRule: \"evenodd\",\n        d: \"M1 12.956h18.274l-7.167 8.575.932.932L23 12.478v-.956l-9.96-9.985-.932.932 7.166 8.575H1z\",\n        fill: theme?.fill\n      }\n    )\n  }\n);\nconst SvgArrowRightStraight = ({\n  size,\n  theme,\n  isAnnouncedByScreenReader = false\n}) => /* @__PURE__ */ jsxs(Fragment, { children: [\n  /* @__PURE__ */ jsx(Svg, { size, theme }),\n  isAnnouncedByScreenReader ? /* @__PURE__ */ jsx(\n    \"span\",\n    {\n      css: css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`,\n      children: \"Arrow right\"\n    }\n  ) : \"\"\n] });\n\nexport { SvgArrowRightStraight };\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { buttonContents } from './shared.js';\nimport { buttonStyles } from './styles.js';\n\nconst LinkButton = ({\n  priority,\n  size,\n  iconSide,\n  icon: iconSvg,\n  nudgeIcon,\n  hideLabel,\n  cssOverrides,\n  children,\n  theme,\n  ...props\n}) => /* @__PURE__ */ jsx(\n  \"a\",\n  {\n    css: buttonStyles({\n      size,\n      priority,\n      icon: iconSvg,\n      hideLabel,\n      iconSide,\n      nudgeIcon,\n      cssOverrides,\n      theme\n    }),\n    ...props,\n    children: buttonContents({\n      hideLabel,\n      iconSvg,\n      children\n    })\n  }\n);\n\nexport { LinkButton };\n"],"names":["stickyLeft","css","palette","neutral","space","container","imageHeader","brand","textBlock","bodySection","textSans15","ctaSection","cta","buttonStyles","textPrimary","backgroundPrimary","brandAlt","backgroundPrimaryHover","contributionsTheme","button","link","StickyLiveblogAsk","url","onCtaClick","div","svg","width","height","fill","aria-labelledby","title","id","path","d","ThemeProvider","theme","LinkButton","href","icon","SvgArrowRightStraight","iconSide","onClick","target","rel","priority","cssOverrides","whatAmI","StickyLiveblogAskWrapper","referrerUrl","shouldHideReaderRevenueOnArticle","renderingTarget","useConfig","countryCode","useCountryCode","pageViewId","usePageViewId","showSupportMessagingForUser","setShowSupportMessaging","useState","isSignedIn","useIsSignedIn","useEffect","shouldHideSupportMessaging","tracking","useMemo","ophanPageId","platformId","clientName","abTestName","abTestVariant","campaignCode","componentType","urlWithRegionAndTracking","addRegionIdAndTrackingParamsToSupportUrl","undefined","canShow","submitComponentEvent","createInsertEventFromTracking","createClickEventFromTracking","addTrackingParams","baseUrl","params","numArticles","amountsAbTestName","amountsAbTestVariant","abTests","targetingAbTest","name","variant","push","testName","variantName","testType","generateAbTestArray","acquisitionData","encodeURIComponent","JSON","stringify","source","componentId","referrerPageviewId","isRemote","labels","encodeAcquisitionsData","queryString","trackingLinkParams","REFPVID","INTCMP","Object","entries","filter","value","isUndefined","map","key","join","generateQueryString","alreadyHasQueryString","includes","addAbandonedBasketAndTrackingParamsToUrl","abandonedBasket","product","region","amount","billingPeriod","addAbandonedBasketContributionParams","addAbandonedBasketParamsToUrl","isSupportUrl","test","urlWithRegion","addRegionIdToSupportUrl","hrefRegex","addTrackingParamsToBodyLinks","text","trackingWithLabel","addLabelToTracking","replace","wholeMatch","addChoiceCardsParams","frequency","newParams","addChoiceCardsOneTimeParams","addChoiceCardsProductParams","ratePlan","contribution","isProfileUrl","addTrackingParamsToProfileUrl","componentEventParamsData","viewId","componentEventParams","query","keys","param","queryValue","Array","isArray","v","returnUrl","addProfileTrackingParams","createEventFromTracking","action","products","abTest","component","label","createViewEventFromTracking","HIDE_SUPPORT_MESSAGING_COOKIE","RECURRING_CONTRIBUTOR_COOKIE","SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE","NO_RR_BANNER_KEY","hasCookie","getCookie","hasSupporterCookie","lastContributionDate","contributionDateFromSupport","parseInt","getLastOneOffContributionTimestamp","from","to","diffMs","Date","now","Math","floor","dateDiffDays","isRecentOneOffContributor","REQUIRED_CONSENTS_FOR_ARTICLE_COUNT","REQUIRED_CONSENTS_FOR_BROWSER_ID","hasArticleCountOptOutCookie","hasCmpConsentForWeeklyArticleCount","Promise","resolve","shouldMemoize","onConsentChange","usnat","tcfv2","aus","hasRequiredConsents","every","consent","consents","storage","local","remove","hasOptedOutOfArticleCount","async","hasOptedOutOfWeeklyArticleCount","useHasOptedOutOfArticleCount","hasOptedOut","setHasOptedOut","then","catch","hasCmpConsentForBrowserId","withinLocalNoBannerCachePeriod","get","setLocalNoBannerCachePeriod","set","recentlyClosedBanner","lastClosedAt","getTime","getPurchaseInfo","purchaseInfoRaw","purchaseInfo","parse","decodeURIComponent","useAuthStatus","kind","authStatus","setAuthStatus","eitherInOktaTestOrElse","oktaAuthState","getSignedInStatusWithOkta","getSignedInStatusWithCookies","error","console","feature","setCountryCode","getLocaleCode","cc","isNonNullable","e","msg","String","window","guardian","modules","sentry","reportError","Error","setId","getOphan","Svg","size","jsx","iconSize","viewBox","xmlns","focusable","children","fillRule","clipRule","isAnnouncedByScreenReader","jsxs","Fragment","visuallyHidden","iconSvg","nudgeIcon","hideLabel","props","buttonContents"],"sourceRoot":""}