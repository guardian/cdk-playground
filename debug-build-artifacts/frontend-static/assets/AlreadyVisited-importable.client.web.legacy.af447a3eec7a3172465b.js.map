{"version":3,"file":"AlreadyVisited-importable.client.web.legacy.af447a3eec7a3172465b.js","mappings":"+OAKMA,EAAoB,oBACpBC,EAAyB,WAAO,IAADC,EAC3BC,EAAiBC,SAAgD,QAAxCF,EAACG,EAAAA,EAAQC,MAAMC,OAAOP,UAAkB,IAAAE,EAAAA,EAAI,GAAI,IAC/E,OAAQM,OAAOC,MAAMN,GAAmC,EAAjBA,CAC3C,EACaO,EAAuB,eAAAC,GAAAC,EAAAA,EAAAA,GAAAC,IAAAA,MAAG,SAAAC,IAAA,IAAAX,EAAA,OAAAU,IAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,GACPC,EAAAA,EAAAA,MAAY,KAAD,EAAAH,EAAAI,KAA/BC,WAEEjB,EAAiBF,IAA2B,EAClDI,EAAAA,EAAQC,MAAMe,OAAOrB,EAAmBG,EAAemB,aAGvDjB,EAAAA,EAAQC,MAAMiB,OAAOvB,GACxB,wBAAAe,EAAAS,OAAA,GAAAV,EAAA,KACJ,kBATmC,OAAAH,EAAAc,MAAA,KAAAC,UAAA,KCGvBC,EAAiB,WAK1B,OAJAC,EAAAA,EAAAA,YAAU,WACDlB,GACT,GAAG,IAEI,IACX,C","sources":["webpack://@guardian/dotcom-rendering/./src/lib/alreadyVisited.ts","webpack://@guardian/dotcom-rendering/./src/components/AlreadyVisited.importable.tsx"],"sourcesContent":["import { onConsent } from '@guardian/libs';\nimport { storage } from '@guardian/libs';\n/**\n * This local storage item is used to target ads if a user has the correct consents\n */\nconst AlreadyVisitedKey = 'gu.alreadyVisited';\nconst getAlreadyVisitedCount = () => {\n    const alreadyVisited = parseInt(storage.local.getRaw(AlreadyVisitedKey) ?? '', 10);\n    return !Number.isNaN(alreadyVisited) ? alreadyVisited : 0;\n};\nexport const incrementAlreadyVisited = async () => {\n    const { canTarget } = await onConsent();\n    if (canTarget) {\n        const alreadyVisited = getAlreadyVisitedCount() + 1;\n        storage.local.setRaw(AlreadyVisitedKey, alreadyVisited.toString());\n    }\n    else {\n        storage.local.remove(AlreadyVisitedKey);\n    }\n};\n","import { useEffect } from 'react';\nimport { incrementAlreadyVisited } from '../lib/alreadyVisited';\n/**\n * Increment the already visited count.\n *\n * ## Why does this need to be an Island?\n *\n * This modifies local storage values.\n *\n * ---\n *\n * Does not render **anything**.\n */\nexport const AlreadyVisited = () => {\n    useEffect(() => {\n        void incrementAlreadyVisited();\n    }, []);\n    // Nothing is rendered by this component\n    return null;\n};\n"],"names":["AlreadyVisitedKey","getAlreadyVisitedCount","_storage$local$getRaw","alreadyVisited","parseInt","storage","local","getRaw","Number","isNaN","incrementAlreadyVisited","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","_context","prev","next","onConsent","sent","canTarget","setRaw","toString","remove","stop","apply","arguments","AlreadyVisited","useEffect"],"sourceRoot":""}