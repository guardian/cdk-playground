(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[719],{11832:(t,e,o)=>{"use strict";o.d(e,{I:()=>x,K:()=>E});var r=o(50484),n=o(24017),i=o(96378),c=o(7351),s=o(43350),l=o(47738),a=o(31490),d=o(1255),u=o(53694);function g(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function w(){const t=g(["\n\t\t\tdisplay: flex;\n\t\t\tmargin: 0;\n\t\t\tmargin-right: ","px;\n\n\t\t\tborder-radius: 100%;\n\t\t\tborder: 1px solid ",";\n\n\t\t\tsvg {\n\t\t\t\tmargin: 1px;\n\t\t\t}\n\t\t"]);return w=function(){return t},t}function f(){const t=g(["\n\t","\n\tcolor: ",";\n\tbackground: none;\n\tborder: none;\n\tdisplay: block;\n\tmargin-left: 0;\n\tmin-height: ","px;\n\tpadding: 0;\n\ttext-align: left;\n\t","\n"]);return f=function(){return t},t}function h(){const t=g(["\n\tdisplay: flex;\n\talign-items: center;\n\tcolumn-gap: 0.2em;\n"]);return h=function(){return t},t}const p=t=>{let{isFollowing:e,iconIsFollowing:o,iconIsNotFollowing:c}=t;return(0,r.jsx)("div",{css:(0,n.css)(w(),i.x[1],(0,u.M)("--follow-icon-fill")),style:{backgroundColor:e?(0,u.M)("--follow-icon-fill"):void 0,fill:e?(0,u.M)("--follow-icon-background"):(0,u.M)("--follow-icon-fill")},children:e?o:c})},m=t=>(0,n.css)(f(),c.PSs,(0,u.M)("--follow-text"),i.x[6],t&&"margin-bottom: ".concat(i.x[2],"px;")),b=(0,n.css)(h()),P=t=>{let{isFollowing:e}=t;return(0,r.jsxs)("span",{children:["Notifications ",e?"on":"off"]})},B=t=>{let{isFollowing:e,displayName:o}=t;return(0,r.jsxs)("span",{children:[e?"Following":"Follow"," ",o]})},x=t=>{let{isFollowing:e,onClickHandler:o,withExtraBottomMargin:n=!1}=t;return(0,r.jsx)("button",{onClick:o,type:"button",css:[m(n)],children:(0,r.jsxs)("span",{css:b,children:[(0,r.jsx)(p,{isFollowing:e,iconIsFollowing:(0,r.jsx)(s.M,{size:"xsmall"}),iconIsNotFollowing:(0,r.jsx)(l.W,{size:"xsmall"})}),P({isFollowing:e})]})})},E=t=>{let{isFollowing:e,displayName:o="",onClickHandler:n,withExtraBottomMargin:i=!1}=t;return(0,r.jsx)("button",{onClick:n,type:"button",css:[m(i)],children:(0,r.jsxs)("span",{css:b,children:[(0,r.jsx)(p,{isFollowing:e,iconIsFollowing:(0,r.jsx)(a.Q,{size:"xsmall"}),iconIsNotFollowing:(0,r.jsx)(d.D,{size:"xsmall"})}),B({isFollowing:e,displayName:o})]})})}},84538:(t,e,o)=>{"use strict";o.r(e),o.d(e,{FollowWrapper:()=>h});var r=o(50484),n=o(24017),i=o(25788),c=o(60439),s=o(9474),l=o(96378),a=o(99923),d=o(67400),u=o(42631),g=o(48485),w=o(11832);function f(){const t=(e=["\n\t\t\t\tmin-height: ","px;\n\n\t\t\t\t"," {\n\t\t\t\t\tdisplay: inline-flex;\n\t\t\t\t\tflex-direction: column;\n\n\t\t\t\t\tbutton:first-of-type {\n\t\t\t\t\t\tmargin-right: ","px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t"],o||(o=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(o)}})));var e,o;return f=function(){return t},t}const h=t=>{let{id:e,displayName:o}=t;const[h,p]=(0,d.useState)(void 0),[m,b]=(0,d.useState)(void 0),[P,B]=(0,d.useState)(!1),x=(()=>{const[t,e]=(0,d.useState)(void 0);return(0,d.useEffect)((()=>{(0,u.Dq)().isMyGuardianEnabled().then(e).catch((t=>{e(!1),(0,c.Rm)("dotcom","isMyGuardianEnabled check failed:",t)}))}),[]),t})();return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2.0.0";const[e,o]=(0,d.useState)(void 0);return(0,d.useEffect)((()=>{(0,u.Dq)().nativeThriftPackageVersion().then((e=>{o((0,g.U)(e,t,">="))})).catch((t=>{o(!1),console.log("nativeThriftPackageVersion",{error:t})}))}),[t]),e}("2.5.0")&&x&&B(!0),(0,d.useEffect)((()=>{const t=new i.Topic({id:e,displayName:o,type:"tag-contributor"});(0,u.U)().isFollowing(t).then(p).catch((t=>{window.guardian.modules.sentry.reportError(t,"bridget-getNotificationsClient-isFollowing-error"),(0,c.Rm)("dotcom","Bridget getNotificationsClient.isFollowing Error:",t)})),(0,u.yV)().isFollowing(t).then(b).catch((t=>{window.guardian.modules.sentry.reportError(t,"bridget-getTagClient-isFollowing-error"),(0,c.Rm)("dotcom","Bridget getTagClient.isFollowing Error:",t)}))}),[e,o]),(0,r.jsxs)("div",{css:(0,n.css)(f(),l.x[6],a.HT.phablet,l.x[5]),children:[P&&(0,r.jsx)(w.K,{isFollowing:null!=m&&m,displayName:o,onClickHandler:(0,s.b)(m)?()=>{}:()=>{const t=new i.Topic({id:e,displayName:o,type:"tag-contributor"});m?(0,u.yV)().unfollow(t).then((t=>{t&&b(!1)})).catch((t=>{window.guardian.modules.sentry.reportError(t,"bridget-getTagClient-unfollow-error"),(0,c.Rm)("dotcom","Bridget getTagClient.unfollow Error:",t)})):(0,u.yV)().follow(t).then((t=>{t&&b(!0)})).catch((t=>{window.guardian.modules.sentry.reportError(t,"bridget-getTagClient-follow-error"),(0,c.Rm)("dotcom","Bridget getTagClient.follow Error:",t)}))},withExtraBottomMargin:!0}),(0,r.jsx)(w.I,{isFollowing:null!=h&&h,onClickHandler:(0,s.b)(h)?()=>{}:()=>{const t=new i.Topic({id:e,displayName:o,type:"tag-contributor"});h?(0,u.U)().unfollow(t).then((t=>{t&&p(!1)})).catch((t=>{window.guardian.modules.sentry.reportError(t,"briidget-getNotificationsClient-unfollow-error"),(0,c.Rm)("dotcom","Bridget getNotificationsClient.unfollow Error:",t)})):(0,u.U)().follow(t).then((t=>{t&&p(!0)})).catch((t=>{window.guardian.modules.sentry.reportError(t,"bridget-getNotificationsClient-follow-error"),(0,c.Rm)("dotcom","Bridget getNotificationsClient.follow Error:",t)}))}})]})}},42631:(t,e,o)=>{"use strict";o.d(e,{OA:()=>j,IC:()=>U,GR:()=>S,QF:()=>K,Dq:()=>M,yY:()=>A,_5:()=>Y,ud:()=>q,U:()=>k,yV:()=>L,LE:()=>z,FA:()=>_});var r=o(13011),n=o(96831),i=o(86293),c=o(99895),s=o(65490),l=o(89993),a=o(85159),d=(o(47038),o(59517)),u=(o(29103),o(60579)),g=o(54703),w=o(69504),f=o(75271),h=o(9474),p=o(13213);function m(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class b extends p.TProtocol{getTransport(){return this.concreteProtocol.getTransport()}flush(){return this.concreteProtocol.flush()}writeMessageBegin(t,e,o){return this.concreteProtocol.writeMessageBegin(t,e,o)}writeMessageEnd(){return this.concreteProtocol.writeMessageEnd()}writeStructBegin(t){return this.concreteProtocol.writeStructBegin(t)}writeStructEnd(){return this.concreteProtocol.writeStructEnd()}writeFieldBegin(t,e,o){return this.concreteProtocol.writeFieldBegin(t,e,o)}writeFieldEnd(){return this.concreteProtocol.writeFieldEnd()}writeFieldStop(){return this.concreteProtocol.writeFieldStop()}writeMapBegin(t,e,o){return this.concreteProtocol.writeMapBegin(t,e,o)}writeMapEnd(){return this.concreteProtocol.writeMapEnd()}writeListBegin(t,e){return this.concreteProtocol.writeListBegin(t,e)}writeListEnd(){return this.concreteProtocol.writeListEnd()}writeSetBegin(t,e){return this.concreteProtocol.writeSetBegin(t,e)}writeSetEnd(){return this.concreteProtocol.writeSetEnd()}writeBool(t){return this.concreteProtocol.writeBool(t)}writeByte(t){return this.concreteProtocol.writeByte(t)}writeI16(t){return this.concreteProtocol.writeI16(t)}writeI32(t){return this.concreteProtocol.writeI32(t)}writeI64(t){return this.concreteProtocol.writeI64(t)}writeDouble(t){return this.concreteProtocol.writeDouble(t)}writeString(t){return this.concreteProtocol.writeString(t)}writeBinary(t){return this.concreteProtocol.writeBinary(t)}readMessageBegin(){return this.concreteProtocol.readMessageBegin()}readMessageEnd(){return this.concreteProtocol.readMessageEnd()}readStructBegin(){return this.concreteProtocol.readStructBegin()}readStructEnd(){return this.concreteProtocol.readStructEnd()}readFieldBegin(){return this.concreteProtocol.readFieldBegin()}readFieldEnd(){return this.concreteProtocol.readFieldEnd()}readMapBegin(){return this.concreteProtocol.readMapBegin()}readMapEnd(){return this.concreteProtocol.readMapEnd()}readListBegin(){return this.concreteProtocol.readListBegin()}readListEnd(){return this.concreteProtocol.readListEnd()}readSetBegin(){return this.concreteProtocol.readSetBegin()}readSetEnd(){return this.concreteProtocol.readSetEnd()}readBool(){return this.concreteProtocol.readBool()}readByte(){return this.concreteProtocol.readByte()}readI16(){return this.concreteProtocol.readI16()}readI32(){return this.concreteProtocol.readI32()}readI64(){return this.concreteProtocol.readI64()}readDouble(){return this.concreteProtocol.readDouble()}readBinary(){return this.concreteProtocol.readBinary()}readString(){return this.concreteProtocol.readString()}skip(t){return this.concreteProtocol.skip(t)}constructor(t){super(t.getTransport()),m(this,"concreteProtocol",void 0),this.concreteProtocol=t}}class P extends b{writeMessageBegin(t,e,o){e===p.MessageType.CALL||e===p.MessageType.ONEWAY?super.writeMessageBegin(this.serviceName+P.separator+t,e,o):super.writeMessageBegin(t,e,o)}constructor(t,e){super(t),m(this,"serviceName",void 0),this.serviceName=e}}function B(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function x(t){window.android?window.android.postMessage(t.data,t.connectionId):window.webkit?window.webkit.messageHandlers.iOSWebViewMessage.postMessage(t):console.warn("No native APIs available")}m(P,"separator",":");let E=1;const y=()=>"connection-".concat(E++);class v extends p.ThriftConnection{reset(t){if(t===this.connectionId&&window.nativeConnections){console.warn("Reseting connection "+t),delete window.nativeConnections[this.connectionId];for(const t of this.promises)t.reject(new p.TApplicationException(p.TApplicationExceptionType.UNKNOWN,"Timeout error"));this.promises=[],this.connectionId=y(),window.nativeConnections[this.connectionId]=this}}receive(t){const e=this.promises.shift();if(e){clearTimeout(e.timeoutId);const o=Buffer.from(t.data,"base64");e.resolve(o)}this.sendNextMessage()}sendNextMessage(){const t=this.outBuffer.shift();t&&(console.log("Sending next message"),x(t))}send(t){const e=this.connectionId,o=this;return new Promise((function(r,n){o.promises.push({resolve:r,reject:n,timeoutId:setTimeout((function(){o.reset(e)}),3e4)});const i={data:t.toString("base64"),connectionId:e};1===o.promises.length?(console.log("Sending message immediately"),x(i)):(console.log("Queing message because others in flight"),o.outBuffer.push(i))}))}constructor(t,e){var o;super(t,e),B(this,"connectionId",y()),B(this,"promises",[]),B(this,"outBuffer",[]),"undefined"!=typeof window&&(window.nativeConnections=null!==(o=window.nativeConnections)&&void 0!==o?o:{},window.nativeConnections[this.connectionId]=this)}}function C(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffered",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"compact";const r=new v((0,p.getTransport)(e),class extends P{constructor(e){var r;super(new((0,p.getProtocol)(o))(e),null!==(r=t.serviceName)&&void 0!==r?r:"")}});return new t(r)}let F;const M=()=>((0,h.b)(F)&&(F=C(s.Client,"buffered","compact")),F);let I;const S=()=>((0,h.b)(I)&&(I=C(i.Client,"buffered","compact")),I);let N;const j=()=>(N||(N=C(r.Client,"buffered","compact")),N);let T;const k=()=>(T||(T=C(u.Client,"buffered","compact")),T);let O;const L=()=>(O||(O=C(g.Client,"buffered","compact")),O);let R;const z=()=>(R||(R=C(w.Client,"buffered","compact")),R);let D;const A=()=>(D||(D=C(l.Client,"buffered","compact")),D);let V;const _=()=>(V||(V=C(f.Client,"buffered","compact")),V);let H;const U=()=>(H||(H=C(n.Client,"buffered","compact")),H);let W;const q=()=>(W||(W=C(d.Client,"buffered","compact")),W);let G;const K=()=>(G||(G=C(c.Client,"buffered","compact")),G);let Q;const Y=()=>(Q||(Q=C(a.Client,"buffered","compact")),Q)},53694:(t,e,o)=>{"use strict";o.d(e,{M:()=>r});const r=t=>"var(".concat(t,")")},50150:()=>{}}]);
//# sourceMappingURL=719.client.web.4d2829c7a8def76d8935.js.map