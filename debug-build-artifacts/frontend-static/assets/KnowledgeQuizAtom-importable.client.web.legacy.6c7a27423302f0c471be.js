"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[6929],{30921:(e,t,r)=>{r.r(t),r.d(t,{KnowledgeQuizAtom:()=>w,Question:()=>z,Result:()=>U});var n=r(62335),i=r(22820),s=r(50484),o=r(24017),a=r(65656),l=r(71653),c=r(50641),d=r(59648),u=r(28673),f=r(58486),x=r(45699),h=r(67400),m=r(95644),p=r(27719),g=r(3010);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={name:"1gll317",styles:"margin-bottom:12px;border:0px;padding:0px;label{width:inherit;}"},w=function(e){var t=e.id,r=e.questions,n=e.resultGroups,o=e.sharingUrls,a=e.theme,l=(0,h.useState)({}),c=(0,i.A)(l,2),d=c[0],u=c[1],f=Object.keys(d).length===r.length;return(0,s.jsxs)("form",{"data-atom-id":t,"data-atom-type":"knowledgequiz",children:[f&&(0,s.jsx)("div",{"data-testid":"quiz-results-block-top",children:(0,s.jsx)(U,{quizSelection:d,resultGroups:n,sharingUrls:o})}),(0,s.jsx)("ol",{"data-ignore":"global-ol-styling",children:r.map((function(e,t){return(0,s.jsx)(z,{id:e.id,number:t+1,text:e.text,imageUrl:e.imageUrl,imageAlt:e.imageAlt,answers:e.answers,setQuizSelection:u,theme:a},e.id)}))}),f&&(0,s.jsx)("div",{"data-testid":"quiz-results-block-top",children:(0,s.jsx)(U,{quizSelection:d,resultGroups:n,sharingUrls:o})})]})},A={name:"13zhbxn",styles:"display:flex;flex-direction:row;margin-bottom:8px;button{margin-right:10px;}"},S={name:"1d3w5wq",styles:"width:100%"},O={name:"1k4fewv",styles:"padding-right:12px"},k={name:"cn3xcj",styles:"margin-bottom:12px"},z=function(e){var t=e.id,r=e.text,a=e.imageUrl,c=e.imageAlt,d=e.answers,f=e.number,x=e.setQuizSelection,p=e.theme,g=(0,h.useState)(),b=(0,i.A)(g,2),v=b[0],w=b[1],z=(0,h.useState)(!1),T=(0,i.A)(z,2),q=T[0],I=T[1];return(0,h.useEffect)((function(){if(v&&q){var e=d.find((function(e){return e.id===v}));e&&x((function(r){return j(j({},r),{},(0,n.A)({},t,e))}))}}),[v,x,q,d,t]),(0,s.jsx)("li",{css:(0,o.css)(p===m.A$.Labs?l.NA0:l.Ni,";"),children:(0,s.jsxs)("fieldset",{css:y,children:[(0,s.jsxs)("legend",{css:k,children:[(0,s.jsx)("span",{css:O,children:"".concat(f,".")}),r]}),!!a&&(0,s.jsx)("img",{css:S,src:a,alt:null!=c?c:""}),(0,s.jsx)(C,{id:t,answers:d,hasSubmitted:q,selectedAnswerId:v,setSelectedAnswerId:w,theme:p}),(0,s.jsx)("div",{css:A,children:(0,s.jsx)(u.$,{size:"small","data-testid":"submit-question-".concat(t),onClick:function(){I(!0)},onKeyDown:function(e){var t;(null!==(t=32===e.keyCode)&&void 0!==t?t:13===e.keyCode)&&I(!0)},children:"Reveal"})})]})})},C=function(e){var t=e.answers,r=e.id,n=e.hasSubmitted,i=e.selectedAnswerId,o=e.setSelectedAnswerId,a=e.theme;return n?(0,s.jsx)(h.Fragment,{children:t.map((function(e){var t;if(i===e.id){var r;if(e.isCorrect)return(0,s.jsx)(p.GL,{id:e.id,answerText:e.text,explainerText:null!==(r=e.revealText)&&void 0!==r?r:"",theme:a},e.id);if(!e.isCorrect)return(0,s.jsx)(p.eb,{id:e.id,answerText:e.text,theme:a},e.id)}return e.isCorrect?(0,s.jsx)(p.$g,{id:e.id,answerText:e.text,explainerText:null!==(t=e.revealText)&&void 0!==t?t:"",theme:a},e.id):(0,s.jsx)(p.Lh,{id:e.id,answerText:e.text,theme:a},e.id)}))}):(0,s.jsx)("div",{css:(0,p.bP)(a),children:(0,s.jsx)(f.z,{name:r,children:t.map((function(e){return(0,s.jsx)(x.s,{value:e.text,"data-testid":e.id,"data-answer-type":i===e.id?"selected-enabled-answer":"unselected-enabled-answer",name:r,label:e.text,onChange:function(){return o(e.id)},checked:i===e.id},e.id)}))})})},T=(0,o.css)("background-color:",c.M.neutral[93],";margin-top:",d.x[3],"px;margin-bottom:",d.x[3],"px;padding:",d.x[2],"px;"),q=(0,o.css)(l.NA0," display:flex;flex-direction:column;"),I=(0,o.css)(l.LDt," color:",c.M.brand[400],";"),P=(0,o.css)(l.keT," color:",c.M.neutral[20],";padding-bottom:",d.x[1],"px;"),U=function(e){var t,r=e.quizSelection,n=e.resultGroups,i=e.sharingUrls,o=Object.keys(r).length,l=Object.keys(r).filter((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.isCorrect})).length,c=n.length,d=[],u=0;if(n.sort((function(e,t){return e.minScore-t.minScore})),o===c){var f,x=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}(n);try{for(x.s();!(f=x.n()).done;){var h=f.value;l===h.minScore&&(t=h)}}catch(e){x.e(e)}finally{x.f()}}else{for(var m=0;m<n.length;m++){var p=n[m];p&&(d[m]=p.minScore)}d.sort((function(e,t){return e-t}));for(var v=0;v<d.length;v++){var j=d[v];(0,a.b)(j)||l>=j&&(u=v)}}return t=n[u],(0,s.jsxs)("div",{css:T,children:[(0,s.jsxs)("div",{css:q,children:[(0,s.jsx)("span",{children:"You got..."}),(0,s.jsx)("span",{css:I,children:"".concat(l,"/").concat(o)}),t&&(0,s.jsx)("span",{children:t.title})]}),(0,s.jsx)("hr",{}),(0,s.jsx)("div",{css:P,children:"Challenge your friends"}),(0,s.jsx)(g.N,{sharingUrls:i,displayIcons:["facebook","twitter","email","whatsApp","messenger","linkedIn","pinterest"]})]})}}}]);
//# sourceMappingURL=KnowledgeQuizAtom-importable.client.web.legacy.6c7a27423302f0c471be.js.map