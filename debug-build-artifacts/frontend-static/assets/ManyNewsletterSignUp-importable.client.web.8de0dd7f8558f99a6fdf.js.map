{"version":3,"file":"ManyNewsletterSignUp-importable.client.web.8de0dd7f8558f99a6fdf.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/Flex.tsx","webpack://@guardian/dotcom-rendering/./src/lib/newsletter-sign-up-requests.ts","webpack://@guardian/dotcom-rendering/./src/components/InlineSkipToWrapper.tsx","webpack://@guardian/dotcom-rendering/./src/components/ManyNewslettersForm.tsx","webpack://@guardian/dotcom-rendering/./src/components/ManyNewsletterSignUp.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/NewsletterPrivacyMessage.tsx","webpack://@guardian/dotcom-rendering/./src/lib/hiddenStyles.tsx","webpack://@guardian/dotcom-rendering/./src/components/ElementContainer.tsx","webpack://@guardian/dotcom-rendering/./src/components/Section.tsx","webpack://@guardian/dotcom-rendering/./src/lib/center.ts","webpack://@guardian/dotcom-rendering/./src/lib/edition.ts"],"sourcesContent":["import { css } from '@emotion/react';\nimport type { CSSProperties } from 'react';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tgap?: CSSProperties['gap'];\n};\n\nconst styles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\t/* Fixes IE 10/11 bug that collapses this container by default: */\n\t/* stylelint-disable-next-line property-no-vendor-prefix */\n\t-ms-flex-positive: 1;\n`;\n\nexport const Flex = ({ children, gap }: Props) => (\n\t<div css={styles} style={{ gap }}>\n\t\t{children}\n\t</div>\n);\n","import type { OphanAction } from '@guardian/libs';\nimport { submitComponentEvent } from '../client/ophan/ophan';\nimport type { RenderingTarget } from '../types/renderingTarget';\n\nconst buildNewsletterSignUpFormData = (\n\temailAddress: string,\n\tnewsletterIdOrList: string | string[],\n\trecaptchaToken: string,\n): FormData => {\n\tconst pageRef = window.location.origin + window.location.pathname;\n\tconst refViewId = window.guardian.ophan?.pageViewId ?? '';\n\n\tconst formData = new FormData();\n\tformData.append('email', emailAddress);\n\tformData.append('csrfToken', ''); // TO DO - PR on form handlers in frontend/identity to see how/if this is needed\n\n\tif (Array.isArray(newsletterIdOrList)) {\n\t\tfor (const [index, newsletterId] of newsletterIdOrList.entries()) {\n\t\t\tformData.append(`listNames[${index}]`, newsletterId);\n\t\t}\n\t} else {\n\t\tformData.append('listName', newsletterIdOrList);\n\t}\n\n\tformData.append('ref', pageRef);\n\tformData.append('refViewId', refViewId);\n\tformData.append('name', '');\n\tif (window.guardian.config.switches.emailSignupRecaptcha) {\n\t\tformData.append('g-recaptcha-response', recaptchaToken);\n\t}\n\n\treturn formData;\n};\n\nconst postFormData = async (\n\tendpoint: string,\n\tformData: FormData,\n): Promise<Response> => {\n\tconst requestBodyStrings: string[] = [];\n\n\tfor (const [key, value] of formData.entries()) {\n\t\trequestBodyStrings.push(\n\t\t\t`${encodeURIComponent(key)}=${encodeURIComponent(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-base-to-string -- people can still sign up (apparently)\n\t\t\t\tvalue.toString(),\n\t\t\t)}`,\n\t\t);\n\t}\n\n\treturn fetch(endpoint, {\n\t\tmethod: 'POST',\n\t\tbody: requestBodyStrings.join('&'),\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t});\n};\n\nexport const requestMultipleSignUps = async (\n\temailAddress: string,\n\tnewsletterIds: string[],\n\trecaptchaToken: string,\n): Promise<Response> => {\n\tconst data = buildNewsletterSignUpFormData(\n\t\temailAddress,\n\t\tnewsletterIds,\n\t\trecaptchaToken,\n\t);\n\n\treturn await postFormData(\n\t\twindow.guardian.config.page.ajaxUrl + '/email/many',\n\t\tdata,\n\t);\n};\n\nexport const requestSingleSignUp = async (\n\temailAddress: string,\n\tnewsletterId: string,\n\trecaptchaToken: string,\n): Promise<Response> => {\n\tconst data = buildNewsletterSignUpFormData(\n\t\temailAddress,\n\t\tnewsletterId,\n\t\trecaptchaToken,\n\t);\n\n\treturn await postFormData(\n\t\twindow.guardian.config.page.ajaxUrl + '/email',\n\t\tdata,\n\t);\n};\n\ntype TrackingEventDescription =\n\t| 'captcha-success'\n\t| 'captcha-failure'\n\t| 'captcha-error'\n\t| 'captcha-execute'\n\t| 'captcha-not-loaded-when-needed'\n\t| 'form-submit'\n\t| 'failure-response'\n\t| 'success-response';\n\nconst trackingEventDescriptionToOphanAction = (\n\tdescription: TrackingEventDescription,\n): OphanAction => {\n\tswitch (description) {\n\t\tcase 'captcha-success':\n\t\tcase 'captcha-failure':\n\t\t\treturn 'ANSWER';\n\t\tcase 'captcha-error':\n\t\t\treturn 'CLOSE';\n\t\tcase 'captcha-execute':\n\t\t\treturn 'EXPAND';\n\t\tcase 'captcha-not-loaded-when-needed':\n\t\t\treturn 'CLOSE';\n\t\tcase 'form-submit':\n\t\t\treturn 'CLICK';\n\t\tcase 'failure-response':\n\t\t\treturn 'RETURN';\n\t\tcase 'success-response':\n\t\t\treturn 'SUBSCRIBE';\n\t}\n};\n\nexport const reportTrackingEvent = (\n\tcomponentName: string,\n\teventDescription: TrackingEventDescription,\n\trenderingTarget: RenderingTarget,\n\textraDetails?: Partial<\n\t\tRecord<string, string | string[] | number | number[]>\n\t>,\n): void => {\n\tconst payload = {\n\t\t...extraDetails,\n\t\tmessage: eventDescription,\n\t\ttimestamp: Date.now(),\n\t};\n\tvoid submitComponentEvent(\n\t\t{\n\t\t\tcomponent: {\n\t\t\t\tcomponentType: 'NEWSLETTER_SUBSCRIPTION',\n\t\t\t\tid: componentName,\n\t\t\t},\n\t\t\taction: trackingEventDescriptionToOphanAction(eventDescription),\n\t\t\tvalue: JSON.stringify(payload),\n\t\t},\n\t\trenderingTarget,\n\t);\n};\n","import { css } from '@emotion/react';\nimport { palette, textSans17 } from '@guardian/source/foundations';\nimport type { ReactNode } from 'react';\n\ntype Props = {\n\tid: string;\n\tblockDescription: string;\n\tchildren: ReactNode;\n};\n\nconst skipLinkCss = css`\n\t${textSans17}\n\theight: 40px;\n\tleft: -200vw;\n\tline-height: 30px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\tbackground: ${palette.neutral[100]};\n\tdisplay: block;\n\ttext-align: center;\n\tmargin: 0;\n\ttext-decoration: none;\n\tcolor: ${palette.neutral[0]};\n\t&:focus,\n\t&:active {\n\t\tborder: 5px solid ${palette.focus[400]};\n\t\tposition: static;\n\t}\n\t&:visited,\n\t&:active {\n\t\tcolor: ${palette.neutral[0]};\n\t}\n`;\n\n// Using single template literals for the labels instead of\n// `after {blockDescription}` to prevent JSX rendering\n// an empty comment in the HTML between the static text\n// and the variable. That comment can make screen readers\n// announce the text oddly.\n// https://github.com/guardian/dotcom-rendering/pull/6950#pullrequestreview-1279406318\n\nexport const InlineSkipToWrapper = ({\n\tid,\n\tblockDescription,\n\tchildren,\n}: Props) => {\n\treturn (\n\t\t<>\n\t\t\t<a\n\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\thref={`#${id}`}\n\t\t\t\tcss={skipLinkCss}\n\t\t\t>\n\t\t\t\t{`skip past ${blockDescription}`}\n\t\t\t</a>\n\t\t\t{children}\n\n\t\t\t<p\n\t\t\t\tid={id}\n\t\t\t\ttabIndex={0}\n\t\t\t\tcss={skipLinkCss}\n\t\t\t\taria-label={`after ${blockDescription}`}\n\t\t\t\trole={'note'}\n\t\t\t>\n\t\t\t\t{`after ${blockDescription}`}\n\t\t\t</p>\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\theadlineBold24,\n\tpalette,\n\tspace,\n} from '@guardian/source/foundations';\nimport { Button, TextInput } from '@guardian/source/react-components';\nimport { type ChangeEventHandler, useState } from 'react';\nimport { InlineSkipToWrapper } from './InlineSkipToWrapper';\nimport { NewsletterPrivacyMessage } from './NewsletterPrivacyMessage';\n\ninterface FormProps {\n\tstatus: 'NotSent' | 'Loading' | 'Success' | 'Failed' | 'InvalidEmail';\n\temail: string;\n\thandleTextInput: ChangeEventHandler<HTMLInputElement>;\n\thandleSubmitButton: { (): Promise<void> | void };\n\tnewsletterCount: number;\n}\n\n// The design brief requires the layout of the form to align with the\n// CarouselForNewsletters placed above it on desktop.\nconst CARD_CONTAINER_WIDTH = 240;\nconst CARD_CONTAINER_PADDING = 10;\n\nconst formFrameStyle = css`\n\tborder: ${palette.brand[400]} 2px dashed;\n\tborder-radius: 12px;\n\tpadding: ${space[2]}px;\n\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\n\t${from.desktop} {\n\t\tflex-basis: ${4 * CARD_CONTAINER_WIDTH - CARD_CONTAINER_PADDING}px;\n\t\tflex-direction: row-reverse;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t}\n`;\n\nconst formFieldsStyle = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\tpadding-bottom: ${space[1]}px;\n\n\t${from.desktop} {\n\t\tflex-basis: ${2 * CARD_CONTAINER_WIDTH - CARD_CONTAINER_PADDING * 2}px;\n\t\tflex-direction: row;\n\t\tflex-shrink: 0;\n\t\talign-items: flex-end;\n\t}\n`;\n\nconst inputWrapperStyle = css`\n\tmargin-bottom: ${space[2]}px;\n\t${from.desktop} {\n\t\tmargin-bottom: 0;\n\t\tmargin-right: ${space[2]}px;\n\t\tflex-basis: 296px;\n\t}\n`;\n\nconst formAsideStyle = (hideOnMobile: boolean) => css`\n\toverflow: hidden;\n\ttransition: max-height 1.5s linear;\n\tmax-height: 300px;\n\n\t${hideOnMobile &&\n\tcss`\n\t\tmax-height: 0;\n\t`}\n\n\t${from.desktop} {\n\t\tflex: 1;\n\t\tpadding-left: ${CARD_CONTAINER_PADDING}px;\n\t\tmax-height: unset;\n\t\ttransition: none;\n\t}\n`;\n\nconst signUpButtonStyle = css`\n\tjustify-content: center;\n\tbackground-color: ${palette.neutral[0]};\n\tborder-color: ${palette.neutral[0]};\n\n\t${from.desktop} {\n\t\tflex-basis: 110px;\n\t}\n\n\t&:hover {\n\t\tbackground-color: ${palette.neutral[46]};\n\t\tborder-color: ${palette.neutral[46]};\n\t}\n`;\n\nconst successMessageStyle = css`\n\t${headlineBold24};\n\n\tpadding-bottom: ${space[12]}px;\n\tmax-width: 340px;\n\n\t${from.desktop} {\n\t\tpadding-bottom: 0;\n\t\tmax-width: unset;\n\t\tflex-basis: 340px;\n\t}\n`;\n\nexport const ManyNewslettersForm = ({\n\tstatus,\n\temail,\n\thandleTextInput,\n\thandleSubmitButton,\n\tnewsletterCount,\n}: FormProps) => {\n\tconst [formHasFocus, setFormHasFocus] = useState(false);\n\tconst hidePrivacyOnMobile = !formHasFocus && email.length === 0;\n\n\tconst ariaLabel =\n\t\tnewsletterCount === 1\n\t\t\t? 'Sign up for the newsletter you selected'\n\t\t\t: `Sign up for the ${newsletterCount} newsletters you selected`;\n\n\tconst errorMessage =\n\t\tstatus === 'Failed'\n\t\t\t? 'Sign up failed. Please try again'\n\t\t\t: status === 'InvalidEmail'\n\t\t\t? 'Please enter a valid email address'\n\t\t\t: undefined;\n\n\treturn (\n\t\t<form\n\t\t\taria-label=\"sign-up confirmation form\"\n\t\t\taria-live=\"polite\"\n\t\t\tcss={formFrameStyle}\n\t\t\tonSubmit={(submitEvent) => {\n\t\t\t\tsubmitEvent.preventDefault();\n\t\t\t}}\n\t\t\tonFocus={() => {\n\t\t\t\tsetFormHasFocus(true);\n\t\t\t}}\n\t\t\tonBlur={() => {\n\t\t\t\tsetFormHasFocus(false);\n\t\t\t}}\n\t\t>\n\t\t\t<aside css={formAsideStyle(hidePrivacyOnMobile)}>\n\t\t\t\t<InlineSkipToWrapper\n\t\t\t\t\tid={'man-newsletter-form-inline-skip-to-wrapper'}\n\t\t\t\t\tblockDescription=\"Privacy Notice\"\n\t\t\t\t>\n\t\t\t\t\t<NewsletterPrivacyMessage textColor=\"regular\" />\n\t\t\t\t</InlineSkipToWrapper>\n\t\t\t</aside>\n\n\t\t\t<div css={formFieldsStyle}>\n\t\t\t\t{status !== 'Success' ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span css={inputWrapperStyle}>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tlabel=\"Enter your email\"\n\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\tonChange={handleTextInput}\n\t\t\t\t\t\t\t\terror={errorMessage}\n\t\t\t\t\t\t\t\tdisabled={status === 'Loading'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\taria-label={ariaLabel}\n\t\t\t\t\t\t\tisLoading={status === 'Loading'}\n\t\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tvoid handleSubmitButton();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcssOverrides={signUpButtonStyle}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign up\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<p css={successMessageStyle}>\n\t\t\t\t\t\tPlease check your email to confirm your subscription\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\theadlineBold17,\n\theadlineMedium24,\n\tpalette,\n\tspace,\n} from '@guardian/source/foundations';\nimport { Button, SvgCross } from '@guardian/source/react-components';\nimport type { ChangeEventHandler, ReactEventHandler } from 'react';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n// Note - the package also exports a component as a named export \"ReCAPTCHA\",\n// that version will compile and render but is non-functional.\n// Use the default export instead.\nimport ReactGoogleRecaptcha from 'react-google-recaptcha';\nimport {\n\treportTrackingEvent,\n\trequestMultipleSignUps,\n} from '../lib/newsletter-sign-up-requests';\nimport { useConfig } from './ConfigContext';\nimport { Flex } from './Flex';\nimport { ManyNewslettersForm } from './ManyNewslettersForm';\nimport { BUTTON_ROLE, BUTTON_SELECTED_CLASS } from './NewsletterCard';\nimport { Section } from './Section';\n\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\ntype FormStatus = 'NotSent' | 'Loading' | 'Success' | 'Failed' | 'InvalidEmail';\n\n// To align the heading content with the carousel below\n// from desktop\nconst contentWrapperStyle = css`\n\t${from.leftCol} {\n\t\tpadding-left: 10px;\n\t}\n`;\n\nconst sectionWrapperStyle = (hide: boolean) => css`\n\tdisplay: ${hide ? 'none' : 'block'};\n\tposition: fixed;\n\t/* stylelint-disable-next-line value-no-vendor-prefix -- required safari before v13 https://developer.mozilla.org/en-US/docs/Web/CSS/position */\n\tposition: -webkit-sticky;\n\tposition: sticky;\n\tbottom: 0;\n\tleft: 0;\n\twidth: 100%;\n\tz-index: 100;\n`;\n\nconst desktopClearButtonWrapperStyle = css`\n\tdisplay: none;\n\tpadding-left: ${space[1]}px;\n\tmargin-right: -10px;\n\t${from.leftCol} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst mobileCaptionAndClearButtonWrapperStyle = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: flex-end;\n\tpadding-bottom: ${space[2]}px;\n\t${from.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\n\ninterface ClearButtonProps {\n\tremoveAll: { (): void };\n}\nconst ClearButton = ({ removeAll }: ClearButtonProps) => (\n\t<Button\n\t\tsize=\"small\"\n\t\tcolor={palette.neutral[0]}\n\t\tonClick={removeAll}\n\t\thideLabel={true}\n\t\tpriority=\"tertiary\"\n\t\ticon={<SvgCross />}\n\t>\n\t\tremove all newsletters from sign up list\n\t</Button>\n);\n\ninterface CaptionProps {\n\tcount: number;\n\tforDesktop?: boolean;\n}\nconst Caption = ({ count, forDesktop = false }: CaptionProps) => {\n\tconst typography = forDesktop ? headlineMedium24 : headlineBold17;\n\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding-top: ${space[2]}px;\n\t\t\t\t${typography}\n\t\t\t`}\n\t\t>\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{count}\n\t\t\t</span>{' '}\n\t\t\t{count === 1 ? 'newsletter' : 'newsletters'} selected\n\t\t</div>\n\t);\n};\n\nconst attributeToNumber = (\n\telement: Element,\n\tattributeName: string,\n): number | undefined => {\n\tconst value = element.getAttribute(attributeName);\n\tif (!value) return undefined;\n\tconst numericValue = Number(value);\n\tif (isNaN(numericValue)) return undefined;\n\treturn numericValue;\n};\n\ntype Props = {\n\tuseReCaptcha: boolean;\n\tcaptchaSiteKey?: string;\n};\n\nexport const ManyNewsletterSignUp = ({\n\tuseReCaptcha,\n\tcaptchaSiteKey,\n}: Props) => {\n\tconst [newslettersToSignUpFor, setNewslettersToSignUpFor] = useState<\n\t\t{\n\t\t\t/** unique identifier for the newsletter in kebab-case format */\n\t\t\tidentityName: string;\n\t\t\t/** unique id number for the newsletter */\n\t\t\tlistId: number;\n\t\t}[]\n\t>([]);\n\tconst [status, setStatus] = useState<FormStatus>('NotSent');\n\tconst [email, setEmail] = useState('');\n\tconst reCaptchaRef = useRef<ReactGoogleRecaptcha>(null);\n\n\tconst userCanInteract = status !== 'Success' && status !== 'Loading';\n\tconst { renderingTarget } = useConfig();\n\n\tconst toggleNewsletter = useCallback(\n\t\t(event: Event) => {\n\t\t\tif (status === 'Loading') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { target: button } = event;\n\t\t\tif (!(button instanceof HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { identityName } = button.dataset;\n\t\t\tconst listId = attributeToNumber(button, 'data-list-id');\n\t\t\tif (!identityName || typeof listId === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst index = newslettersToSignUpFor.findIndex(\n\t\t\t\t(newsletter) => newsletter.identityName === identityName,\n\t\t\t);\n\t\t\tif (index === -1) {\n\t\t\t\tsetNewslettersToSignUpFor([\n\t\t\t\t\t...newslettersToSignUpFor,\n\t\t\t\t\t{ identityName, listId },\n\t\t\t\t]);\n\t\t\t\tbutton.classList.add(BUTTON_SELECTED_CLASS);\n\t\t\t\tbutton.setAttribute(\n\t\t\t\t\t'aria-label',\n\t\t\t\t\tbutton.dataset.ariaLabelWhenChecked ?? 'remove from list',\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetNewslettersToSignUpFor([\n\t\t\t\t\t...newslettersToSignUpFor.slice(0, index),\n\t\t\t\t\t...newslettersToSignUpFor.slice(index + 1),\n\t\t\t\t]);\n\t\t\t\tbutton.classList.remove(BUTTON_SELECTED_CLASS);\n\n\t\t\t\tbutton.setAttribute(\n\t\t\t\t\t'aria-label',\n\t\t\t\t\tbutton.dataset.ariaLabelWhenUnchecked ?? 'add to list',\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetStatus('NotSent');\n\t\t},\n\t\t[newslettersToSignUpFor, status],\n\t);\n\n\tconst removeAll = useCallback(() => {\n\t\tif (status === 'Loading') {\n\t\t\treturn;\n\t\t}\n\t\tconst signUpButtons = [\n\t\t\t...document.querySelectorAll(`[data-role=${BUTTON_ROLE}]`),\n\t\t];\n\t\tfor (const button of signUpButtons) {\n\t\t\tbutton.classList.remove(BUTTON_SELECTED_CLASS);\n\t\t\tconst ariaLabelText =\n\t\t\t\tbutton instanceof HTMLElement\n\t\t\t\t\t? button.dataset.ariaLabelWhenUnchecked ?? 'add to list'\n\t\t\t\t\t: 'add to list';\n\n\t\t\tbutton.setAttribute('aria-label', ariaLabelText);\n\t\t}\n\n\t\tsetNewslettersToSignUpFor([]);\n\t\tsetStatus('NotSent');\n\t}, [status]);\n\n\tuseEffect(() => {\n\t\tconst signUpButtons = [\n\t\t\t...document.querySelectorAll(`[data-role=${BUTTON_ROLE}]`),\n\t\t];\n\t\tfor (const button of signUpButtons) {\n\t\t\tbutton.addEventListener('click', toggleNewsletter);\n\t\t}\n\t\treturn () => {\n\t\t\tfor (const button of signUpButtons) {\n\t\t\t\tbutton.removeEventListener('click', toggleNewsletter);\n\t\t\t}\n\t\t};\n\t}, [toggleNewsletter, newslettersToSignUpFor]);\n\n\tconst sendRequest = async (reCaptchaToken: string): Promise<void> => {\n\t\tconst identityNames = newslettersToSignUpFor.map(\n\t\t\t(newsletter) => newsletter.identityName,\n\t\t);\n\t\tconst listIds = newslettersToSignUpFor.map(\n\t\t\t(newsletter) => newsletter.listId,\n\t\t);\n\n\t\tvoid reportTrackingEvent(\n\t\t\t'ManyNewsletterSignUp',\n\t\t\t'form-submit',\n\t\t\trenderingTarget,\n\t\t\t{\n\t\t\t\tlistIds,\n\t\t\t},\n\t\t);\n\n\t\tconst response = await requestMultipleSignUps(\n\t\t\temail,\n\t\t\tidentityNames,\n\t\t\treCaptchaToken,\n\t\t).catch(() => {\n\t\t\treturn undefined;\n\t\t});\n\n\t\tif (!response?.ok) {\n\t\t\tconst responseText = response\n\t\t\t\t? await response.text()\n\t\t\t\t: '[fetch failure - no response]';\n\t\t\tvoid reportTrackingEvent(\n\t\t\t\t'ManyNewsletterSignUp',\n\t\t\t\t'failure-response',\n\t\t\t\trenderingTarget,\n\t\t\t\t{\n\t\t\t\t\tlistIds,\n\t\t\t\t\t// If the backend handles the failure and responds with an informative\n\t\t\t\t\t// error message (E.G. \"Service unavailable\", \"Invalid email\" etc) this\n\t\t\t\t\t// should be included in the event data.\n\t\t\t\t\t// If not, the response text will be the HTML for the default error page\n\t\t\t\t\t// which would not be helpful to include it in the tracking data.\n\t\t\t\t\tresponseText: responseText.substring(0, 100),\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn setStatus('Failed');\n\t\t}\n\n\t\tvoid reportTrackingEvent(\n\t\t\t'ManyNewsletterSignUp',\n\t\t\t'success-response',\n\t\t\trenderingTarget,\n\t\t\t{\n\t\t\t\tlistIds,\n\t\t\t},\n\t\t);\n\t\tsetStatus('Success');\n\t};\n\n\tconst handleSubmitButton = async () => {\n\t\tif (!userCanInteract) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!emailRegex.test(email)) {\n\t\t\tsetStatus('InvalidEmail');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!useReCaptcha) {\n\t\t\tsetStatus('Loading');\n\t\t\tvoid sendRequest('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!reCaptchaRef.current) {\n\t\t\tvoid reportTrackingEvent(\n\t\t\t\t'ManyNewsletterSignUp',\n\t\t\t\t'captcha-not-loaded-when-needed',\n\t\t\t\trenderingTarget,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tsetStatus('Loading');\n\t\t// successful execution triggers a call to sendRequest\n\t\t// with the onChange prop on the captcha Component\n\t\tvoid reportTrackingEvent(\n\t\t\t'ManyNewsletterSignUp',\n\t\t\t'captcha-execute',\n\t\t\trenderingTarget,\n\t\t);\n\t\tconst result = await reCaptchaRef.current.executeAsync();\n\n\t\tif (typeof result !== 'string') {\n\t\t\tvoid reportTrackingEvent(\n\t\t\t\t'ManyNewsletterSignUp',\n\t\t\t\t'captcha-failure',\n\t\t\t\trenderingTarget,\n\t\t\t);\n\t\t\tsetStatus('Failed');\n\t\t\treturn;\n\t\t}\n\n\t\tvoid reportTrackingEvent(\n\t\t\t'ManyNewsletterSignUp',\n\t\t\t'captcha-success',\n\t\t\trenderingTarget,\n\t\t);\n\t\treturn sendRequest(result);\n\t};\n\n\tconst handleCaptchaError: ReactEventHandler<HTMLDivElement> = (event) => {\n\t\tvoid reportTrackingEvent(\n\t\t\t'ManyNewsletterSignUp',\n\t\t\t'captcha-error',\n\t\t\trenderingTarget,\n\t\t\t{\n\t\t\t\teventType: event.type,\n\t\t\t\tstatus,\n\t\t\t},\n\t\t);\n\t\treCaptchaRef.current?.reset();\n\t};\n\n\tconst handleTextInput: ChangeEventHandler<HTMLInputElement> = (ev) => {\n\t\tif (!userCanInteract) {\n\t\t\treturn;\n\t\t}\n\t\tif (status === 'InvalidEmail' && emailRegex.test(email)) {\n\t\t\tsetStatus('NotSent');\n\t\t}\n\t\tsetEmail(ev.target.value);\n\t};\n\n\treturn (\n\t\t<div css={sectionWrapperStyle(newslettersToSignUpFor.length === 0)}>\n\t\t\t<Section\n\t\t\t\tbackgroundColour={palette.brand[800]}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\tstretchRight={true}\n\t\t\t\tleftColSize=\"wide\"\n\t\t\t\tpadContent={false}\n\t\t\t\tleftContent={\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcount={newslettersToSignUpFor.length}\n\t\t\t\t\t\tforDesktop={true}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div css={mobileCaptionAndClearButtonWrapperStyle}>\n\t\t\t\t\t<Caption count={newslettersToSignUpFor.length} />\n\t\t\t\t\t<ClearButton removeAll={removeAll} />\n\t\t\t\t</div>\n\n\t\t\t\t<div css={contentWrapperStyle}>\n\t\t\t\t\t<Flex>\n\t\t\t\t\t\t<ManyNewslettersForm\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\thandleSubmitButton,\n\t\t\t\t\t\t\t\thandleTextInput,\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tnewsletterCount={newslettersToSignUpFor.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div css={desktopClearButtonWrapperStyle}>\n\t\t\t\t\t\t\t<ClearButton removeAll={removeAll} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{useReCaptcha && !!captchaSiteKey && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t// The Google documentation specifies that if the 'recaptcha-badge' is hidden,\n\t\t\t\t\t\t\t\t// their T+C's must be displayed instead. While this component hides the\n\t\t\t\t\t\t\t\t// badge, the T+C's are inluded in the ManyNewslettersForm component.\n\t\t\t\t\t\t\t\t// https://developers.google.com/recaptcha/docs/faq#id-like-to-hide-the-recaptcha-badge.-what-is-allowed\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t.grecaptcha-badge {\n\t\t\t\t\t\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ReactGoogleRecaptcha\n\t\t\t\t\t\t\t\t\tsitekey={captchaSiteKey}\n\t\t\t\t\t\t\t\t\tref={reCaptchaRef}\n\t\t\t\t\t\t\t\t\tonError={handleCaptchaError}\n\t\t\t\t\t\t\t\t\tsize=\"invisible\"\n\t\t\t\t\t\t\t\t\t// Note - the component supports an onExpired callback\n\t\t\t\t\t\t\t\t\t// (for when the user completed a challenge, but did\n\t\t\t\t\t\t\t\t\t// not submit the form before the token expired.\n\t\t\t\t\t\t\t\t\t// We don't need that here as setting the token\n\t\t\t\t\t\t\t\t\t// triggers the submission (onChange callback)\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Flex>\n\t\t\t\t</div>\n\t\t\t</Section>\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tpalette as sourcePalette,\n\ttextSans12,\n} from '@guardian/source/foundations';\nimport { Link } from '@guardian/source/react-components';\nimport { palette as themePalette } from '../palette';\n\ninterface Props {\n\ttextColor?: 'supporting' | 'regular';\n}\n\nconst GUARDIAN_PRIVACY_POLICY =\n\t'https://www.theguardian.com/help/privacy-policy';\nconst GOOGLE_PRIVACY_POLICY = 'https://policies.google.com/privacy';\nconst GOOGLE_TERMS_OF_SERVICE = 'https://policies.google.com/terms';\n\ntype PolicyUrl =\n\t| typeof GUARDIAN_PRIVACY_POLICY\n\t| typeof GOOGLE_PRIVACY_POLICY\n\t| typeof GOOGLE_TERMS_OF_SERVICE;\n\ntype LegalLinkProps = { href: PolicyUrl; children: string };\n\n/** Link component fixed with data-ignore and rel attributes for consistency in this file only */\nconst LegalLink = ({ href, children }: LegalLinkProps) => (\n\t<Link data-ignore=\"global-link-styling\" href={href} rel=\"noreferrer\">\n\t\t{children}\n\t</Link>\n);\n\nconst termsStyle = css`\n\t${textSans12};\n\t/**\n\t * Typography preset styles should not be overridden.\n\t * This has been done because the styles do not directly map to the new presets.\n\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t */\n\tline-height: 1.15;\n\ta {\n\t\t${textSans12};\n\t\ttext-decoration: underline;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\nconst textStyles = (textColor: 'supporting' | 'regular') => {\n\tswitch (textColor) {\n\t\tcase 'supporting':\n\t\t\treturn css`\n\t\t\t\tcolor: ${themePalette('--privacy-text-supporting-subdued')};\n\t\t\t\ta,\n\t\t\t\tstrong {\n\t\t\t\t\tcolor: ${themePalette('--privacy-text-supporting')};\n\t\t\t\t\t:hover {\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'regular':\n\t\t\treturn css`\n\t\t\t\tcolor: ${sourcePalette.neutral[20]};\n\t\t\t\ta,\n\t\t\t\tstrong {\n\t\t\t\t\tcolor: ${themePalette('--privacy-text-regular')};\n\t\t\t\t\t:hover {\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\nexport const NewsletterPrivacyMessage = ({\n\ttextColor = 'supporting',\n}: Props) => (\n\t<span css={[termsStyle, textStyles(textColor)]}>\n\t\t<strong>Privacy Notice: </strong>\n\t\tNewsletters may contain info about charities, online ads, and content\n\t\tfunded by outside parties. For more information see our{' '}\n\t\t<LegalLink href={GUARDIAN_PRIVACY_POLICY}>Privacy Policy</LegalLink>. We\n\t\tuse Google reCaptcha to protect our website and the Google{' '}\n\t\t<LegalLink href={GOOGLE_PRIVACY_POLICY}>Privacy Policy</LegalLink> and{' '}\n\t\t<LegalLink href={GOOGLE_TERMS_OF_SERVICE}>Terms of Service</LegalLink>{' '}\n\t\tapply.\n\t</span>\n);\n","import { css } from '@emotion/react';\n\nexport const hiddenStyles = css`\n\t&.hidden {\n\t\tdisplay: none;\n\t}\n`;\n","import { css, jsx } from '@emotion/react';\nimport { from, space } from '@guardian/source/foundations';\nimport { pageSkinContainer } from '../layouts/lib/pageSkin';\nimport { center } from '../lib/center';\nimport { palette } from '../palette';\n\nconst sidePadding = css`\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\n\t${from.mobileLandscape} {\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n`;\n\nconst bottomPadding = css`\n\tpadding-bottom: ${space[9]}px;\n`;\n\nconst sideBorderStyles = css`\n\t${from.tablet} {\n\t\tborder-left: 1px solid;\n\t\tborder-right: 1px solid;\n\t\tborder-color: ${palette('--article-border')};\n\t}\n`;\n\nconst topBorderStyles = css`\n\tborder-top: 1px solid;\n\tborder-color: ${palette('--article-border')};\n`;\n\ntype Props = {\n\tsectionId?: string;\n\tshowSideBorders?: boolean;\n\tshowTopBorder?: boolean;\n\tpadSides?: boolean;\n\tpadBottom?: boolean;\n\tbackgroundColour?: string;\n\tinnerBackgroundColour?: string;\n\tborderColour?: string;\n\tchildren?: React.ReactNode;\n\tshouldCenter?: boolean;\n\telement?:\n\t\t| 'div'\n\t\t| 'article'\n\t\t| 'aside'\n\t\t| 'nav'\n\t\t| 'main'\n\t\t| 'header'\n\t\t| 'section'\n\t\t| 'footer'; // ElementContainer is generally a top-level wrapper\n\tclassName?: string;\n\tophanComponentName?: string;\n\tophanComponentLink?: string;\n\tcontainerName?: string;\n\thasPageSkin?: boolean;\n\thasPageSkinContentSelfConstrain?: boolean;\n};\n\n/**\n * Create a react element from the tagName passed in OR\n * default to <div>\n *\n * @deprecated please use Section fullWidth={true}  instead\n */\nexport const ElementContainer = ({\n\tsectionId,\n\tshowSideBorders = true,\n\tshowTopBorder = true,\n\tpadSides = true,\n\tpadBottom = false,\n\tborderColour,\n\tbackgroundColour,\n\tinnerBackgroundColour,\n\tshouldCenter = true,\n\tchildren,\n\telement = 'div',\n\tclassName,\n\tophanComponentName,\n\tophanComponentLink,\n\tcontainerName,\n\thasPageSkin = false,\n\thasPageSkinContentSelfConstrain = false,\n}: Props) =>\n\tjsx(element, {\n\t\tid: ophanComponentName,\n\t\t'data-link-name': ophanComponentLink,\n\t\t'data-component': ophanComponentName,\n\t\t'data-container-name': containerName,\n\t\tstyle: {\n\t\t\tbackgroundColor: backgroundColour,\n\t\t},\n\t\tcss: [\n\t\t\thasPageSkin &&\n\t\t\t\t!hasPageSkinContentSelfConstrain &&\n\t\t\t\tpageSkinContainer,\n\t\t],\n\t\tclassName,\n\t\tchildren: (\n\t\t\t<div\n\t\t\t\t/**\n\t\t\t\t * id is being used to set the containerId in @see {ShowMore.importable.tsx}\n\t\t\t\t * this id pre-existed showMore so is probably also being used for something else.\n\t\t\t\t */\n\t\t\t\tid={sectionId}\n\t\t\t\tstyle={{\n\t\t\t\t\tborderColor: borderColour,\n\t\t\t\t\tbackgroundColor: innerBackgroundColour,\n\t\t\t\t}}\n\t\t\t\tcss={[\n\t\t\t\t\tshouldCenter && center,\n\t\t\t\t\tshowSideBorders && sideBorderStyles,\n\t\t\t\t\tshowTopBorder && topBorderStyles,\n\t\t\t\t\tpadSides && sidePadding,\n\t\t\t\t\tpadBottom && bottomPadding,\n\t\t\t\t\thasPageSkin && pageSkinContainer,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t),\n\t});\n","import { css } from '@emotion/react';\nimport { from, space, until } from '@guardian/source/foundations';\nimport { ArticleDesign, type ArticleFormat } from '../lib/articleFormat';\nimport type { EditionId } from '../lib/edition';\nimport { hiddenStyles } from '../lib/hiddenStyles';\nimport { palette } from '../palette';\nimport type { TreatType } from '../types/front';\nimport type { LeftColSize } from '../types/layout';\nimport { ContainerTitle } from './ContainerTitle';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { Hide } from './Hide';\nimport { LeftColumn } from './LeftColumn';\nimport { ShowHideButton } from './ShowHideButton';\nimport { Treats } from './Treats';\n\n/**\n * ----- First time here? -----\n * If you're unsure how to use this component, check out `Section.stories.tsx` and\n * try running it in storybook to get an idea of how this component is used!\n */\ntype Props = {\n\t/** This text will be used as the h2 shown in the left column for the section */\n\ttitle?: string;\n\t/** Allows the colour of the title to be changed */\n\tfontColour?: string;\n\t/** This text shows below the title */\n\tdescription?: string;\n\t/** The title can be made into a link using this property */\n\turl?: string;\n\t/** The html `id` property of the element */\n\tsectionId?: string;\n\t/** Defaults to `true`. If we should render the left and right borders */\n\tshowSideBorders?: boolean;\n\tcentralBorder?: 'partial' | 'full';\n\t/** Defaults to `true`. If we should render the top border */\n\tshowTopBorder?: boolean;\n\t/** Defaults to `true`. If we should add padding around the outer left and right edges */\n\tpadSides?: boolean;\n\t/** Defaults to `false`. If we should add padding around the outer left and right edges */\n\tpadBottom?: boolean;\n\t/** Defaults to `true`. If we should add padding to the left and right of `children` */\n\tpadContent?: boolean;\n\t/** The html tag used by Section defaults to `section` but can be overridden here */\n\telement?:\n\t\t| 'div'\n\t\t| 'article'\n\t\t| 'aside'\n\t\t| 'nav'\n\t\t| 'main'\n\t\t| 'header'\n\t\t| 'section'\n\t\t| 'footer';\n\t/** Sets a max width and margin auto to center children */\n\tshouldCenter?: boolean;\n\t/** Defaults to `true`. Adds margins to the top and bottom */\n\tverticalMargins?: boolean;\n\t/** Applies a background colour to the entire width */\n\tbackgroundColour?: string;\n\t/** The colour of borders can be overriden */\n\tborderColour?: string;\n\t/** A React component can be passed to be inserted inside the left column */\n\tleftContent?: React.ReactNode;\n\tchildren?: React.ReactNode;\n\t/** Defaults to `false`. If true, `children` is rendered all the way right */\n\tstretchRight?: boolean;\n\t/** Some page types have a different left column width */\n\tleftColSize?: LeftColSize;\n\tformat?: ArticleFormat;\n\t/** The string used to set the `data-component` Ophan attribute */\n\tophanComponentName?: string;\n\t/** The string used to set the `data-link-name` Ophan attribute */\n\tophanComponentLink?: string;\n\t/**\n\t * ðŸ› ï¸ DEBUG ONLY ðŸ› ï¸\n\t * Used to highlight the name of a container when DCR debug mode is enabled\n\t *\n\t * @see https://github.com/guardian/dotcom-rendering/blob/main/dotcom-rendering/src/client/debug/README.md\n\t */\n\tcontainerName?: string;\n\t/** Defaults to `false`. If true a Hide button is show top right allowing this section\n\t * to be collapsed\n\t */\n\ttoggleable?: boolean;\n\t/** Applies a background colour only to the content inside the left and right borders */\n\tinnerBackgroundColour?: string;\n\t/** Defaults to `false`. If true and `editionId` is also passed, then a date string is\n\t * shown under the title. Typically only used on Headlines containers on fronts\n\t */\n\tshowDateHeader?: boolean;\n\t/** Used in parnership with `showDateHeader` to localise the date string */\n\teditionId?: EditionId;\n\t/** A list of related links that appear in the bottom of the left column on fronts */\n\ttreats?: TreatType[];\n\t/** Defaults to `false`. If true, a simplified version of the section is rendered\n\t * without a left column\n\t */\n\tfullWidth?: boolean;\n\t/** Indicates if the page has a page skin advert\n\t * When a page skin advert is active:\n\t * - containers are constrained to a max width of 'desktop'\n\t * - media queries above desktop are not applied\n\t * - if no background colour is specified use the default body background colour to prevent\n\t *   the page skin background showing through the containers\n\t */\n\thasPageSkin?: boolean;\n\t/** When there is a page skin in some special cases we still want the container to take full\n\t * width but the content to constrain itself e.g. Header */\n\thasPageSkinContentSelfConstrain?: boolean;\n\t/**\n\t * @deprecated Do not use\n\t *\n\t * Legacy className prop only used for supporting old interactives\n\t */\n\tclassName?: string;\n};\n\nconst containerStyles = css`\n\tdisplay: flex;\n\tflex-grow: 1;\n\tflex-direction: column;\n\twidth: 100%;\n`;\n\nconst headlineContainerStyles = css`\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\n\t${until.leftCol} {\n\t\tjustify-content: space-between;\n\t}\n`;\n\nconst headlineContainerStylesWithPageSkin = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n`;\n\nconst margins = css`\n\tmargin-top: ${space[2]}px;\n\t/*\n\t\tKeep spacing at the bottom of the container consistent at 36px, regardless of\n\t\tbreakpoint, based on chat with Harry Fisher\n\t*/\n\tmargin-bottom: ${space[9]}px;\n`;\n\nconst rightMargin = css`\n\t${from.wide} {\n\t\tmargin-right: 68px;\n\t}\n`;\n\nconst padding = (format?: ArticleFormat) => {\n\tswitch (format?.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn css`\n\t\t\t\tpadding: 0;\n\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tpadding: 0 10px;\n\t\t\t\t}\n\t\t\t`;\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\tpadding: 0 10px;\n\t\t\t`;\n\t}\n};\n\nconst Content = ({\n\tchildren,\n\tpadded,\n\tverticalMargins,\n\tstretchRight,\n\tformat,\n}: {\n\tchildren: React.ReactNode;\n\tpadded: boolean;\n\tverticalMargins: boolean;\n\tstretchRight: boolean;\n\tformat?: ArticleFormat;\n}) => (\n\t<div\n\t\tcss={[\n\t\t\tcontainerStyles,\n\t\t\tpadded && padding(format),\n\t\t\tverticalMargins && margins,\n\t\t\t!stretchRight && rightMargin,\n\t\t]}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst MaybeHideAboveLeftCol = ({\n\thasPageSkin = false,\n\tchildren,\n}: {\n\tchildren: React.ReactNode;\n\thasPageSkin?: boolean;\n}) =>\n\thasPageSkin ? (\n\t\tchildren\n\t) : (\n\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t{children}\n\t\t</Hide>\n\t);\n\n/**\n *\n * A Section component represents a horizontal slice of a page. It defaults to\n * a html section tag but this can be overridden using the `element` prop\n *\n *\n * It provides borders, spacing, colours, a title and also some front specific\n * features like showing a hide button. By default `children` is placed in the center\n * with a leftCol and spacing on the right - this represents a classic Guardian\n * page - but if `fullWidth={true}` is passed then both the leftCol and right spacing\n * are omitted\n */\nexport const Section = ({\n\ttitle,\n\tfontColour,\n\tdescription,\n\turl,\n\tsectionId,\n\tshowSideBorders = true,\n\tcentralBorder,\n\tshowTopBorder = true,\n\tpadSides = true,\n\tpadBottom = false,\n\tpadContent = true,\n\tverticalMargins = true,\n\tborderColour,\n\tbackgroundColour,\n\tchildren,\n\tleftContent,\n\tstretchRight = false,\n\tleftColSize,\n\tformat,\n\tophanComponentLink,\n\tophanComponentName,\n\ttoggleable = false,\n\tinnerBackgroundColour,\n\tshowDateHeader = false,\n\teditionId,\n\tcontainerName,\n\ttreats,\n\tfullWidth = false,\n\telement = 'section',\n\tshouldCenter,\n\thasPageSkin = false,\n\thasPageSkinContentSelfConstrain = false,\n\tclassName,\n}: Props) => {\n\tif (fullWidth) {\n\t\treturn (\n\t\t\t<ElementContainer\n\t\t\t\tsectionId={sectionId}\n\t\t\t\tshowSideBorders={showSideBorders}\n\t\t\t\tshowTopBorder={showTopBorder}\n\t\t\t\tpadSides={padSides}\n\t\t\t\tpadBottom={padBottom}\n\t\t\t\tborderColour={borderColour ?? palette('--article-border')}\n\t\t\t\tbackgroundColour={\n\t\t\t\t\tbackgroundColour ?? palette('--section-background')\n\t\t\t\t}\n\t\t\t\tophanComponentLink={ophanComponentLink}\n\t\t\t\tophanComponentName={ophanComponentName}\n\t\t\t\tcontainerName={containerName}\n\t\t\t\tinnerBackgroundColour={innerBackgroundColour}\n\t\t\t\tclassName={className}\n\t\t\t\telement={element}\n\t\t\t\tshouldCenter={shouldCenter}\n\t\t\t\thasPageSkin={hasPageSkin}\n\t\t\t\thasPageSkinContentSelfConstrain={\n\t\t\t\t\thasPageSkinContentSelfConstrain\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</ElementContainer>\n\t\t);\n\t}\n\n\treturn (\n\t\t<ElementContainer\n\t\t\tsectionId={sectionId}\n\t\t\tshowSideBorders={showSideBorders}\n\t\t\tshowTopBorder={showTopBorder}\n\t\t\tpadSides={padSides}\n\t\t\tborderColour={borderColour ?? palette('--article-border')}\n\t\t\tbackgroundColour={\n\t\t\t\tbackgroundColour ?? palette('--section-background')\n\t\t\t}\n\t\t\telement=\"section\"\n\t\t\tophanComponentLink={ophanComponentLink}\n\t\t\tophanComponentName={ophanComponentName}\n\t\t\tcontainerName={containerName}\n\t\t\tinnerBackgroundColour={innerBackgroundColour}\n\t\t\thasPageSkin={hasPageSkin}\n\t\t\thasPageSkinContentSelfConstrain={hasPageSkinContentSelfConstrain}\n\t\t>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn\n\t\t\t\t\tborderType={centralBorder}\n\t\t\t\t\tborderColour={borderColour ?? palette('--article-border')}\n\t\t\t\t\tsize={leftColSize}\n\t\t\t\t\tverticalMargins={verticalMargins}\n\t\t\t\t\thasPageSkin={hasPageSkin}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ContainerTitle\n\t\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\t\tfontColour={fontColour}\n\t\t\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\t\t\turl={url}\n\t\t\t\t\t\t\t\tshowDateHeader={showDateHeader}\n\t\t\t\t\t\t\t\teditionId={editionId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{leftContent}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{treats && (\n\t\t\t\t\t\t\t<Treats\n\t\t\t\t\t\t\t\ttreats={treats}\n\t\t\t\t\t\t\t\tborderColour={\n\t\t\t\t\t\t\t\t\tborderColour ?? palette('--article-border')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<Content\n\t\t\t\t\tpadded={padContent}\n\t\t\t\t\tverticalMargins={verticalMargins}\n\t\t\t\t\tstretchRight={stretchRight}\n\t\t\t\t\tformat={format}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={\n\t\t\t\t\t\t\thasPageSkin\n\t\t\t\t\t\t\t\t? headlineContainerStylesWithPageSkin\n\t\t\t\t\t\t\t\t: headlineContainerStyles\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MaybeHideAboveLeftCol hasPageSkin={hasPageSkin}>\n\t\t\t\t\t\t\t<ContainerTitle\n\t\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\t\t\turl={url}\n\t\t\t\t\t\t\t\tfontColour={fontColour}\n\t\t\t\t\t\t\t\tshowDateHeader={showDateHeader}\n\t\t\t\t\t\t\t\teditionId={editionId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MaybeHideAboveLeftCol>\n\t\t\t\t\t\t{toggleable && !!sectionId && (\n\t\t\t\t\t\t\t<ShowHideButton sectionId={sectionId} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{toggleable && sectionId ? (\n\t\t\t\t\t\t<div css={hiddenStyles} id={`container-${sectionId}`}>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tchildren\n\t\t\t\t\t)}\n\t\t\t\t</Content>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { from } from '@guardian/source/foundations';\n\nexport const center = css`\n\tposition: relative;\n\tmargin: auto;\n\n\t${from.tablet} {\n\t\tmax-width: 740px;\n\t}\n\n\t${from.desktop} {\n\t\tmax-width: 980px;\n\t}\n\n\t${from.leftCol} {\n\t\tmax-width: 1140px;\n\t}\n\n\t${from.wide} {\n\t\tmax-width: 1300px;\n\t}\n`;\n","import { isOneOf } from '@guardian/libs';\nimport { isTuple } from './tuple';\n\ntype EditionId = 'UK' | 'US' | 'AU' | 'INT' | 'EUR';\n\ntype Edition = (typeof editionList)[number];\n\nconst editionList = [\n\t{\n\t\turl: '/preference/edition/uk',\n\t\teditionId: 'UK',\n\t\tpageId: 'uk',\n\t\tlongTitle: 'UK edition',\n\t\ttitle: 'UK edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/London',\n\t\tlangLocale: 'en-GB',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'UK',\n\t},\n\t{\n\t\turl: '/preference/edition/us',\n\t\teditionId: 'US',\n\t\tpageId: 'us',\n\t\tlongTitle: 'US edition',\n\t\ttitle: 'US edition',\n\t\tdateLocale: 'en-us',\n\t\ttimeZone: 'America/New_York',\n\t\tlangLocale: 'en-US',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'US',\n\t},\n\t{\n\t\turl: '/preference/edition/au',\n\t\teditionId: 'AU',\n\t\tpageId: 'au',\n\t\tlongTitle: 'Australia edition',\n\t\ttitle: 'AU edition',\n\t\tdateLocale: 'en-au',\n\t\ttimeZone: 'Australia/Sydney',\n\t\tlangLocale: 'en-AU',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'Aus',\n\t},\n\t{\n\t\turl: '/preference/edition/eur',\n\t\teditionId: 'EUR',\n\t\tpageId: 'europe',\n\t\tlongTitle: 'Europe edition',\n\t\ttitle: 'Europe edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/Paris',\n\t\tlangLocale: 'en-EU',\n\t\thasEditionalisedPages: false,\n\t\tshortTitle: 'Eur',\n\t},\n\t{\n\t\turl: '/preference/edition/int',\n\t\teditionId: 'INT',\n\t\tpageId: 'international',\n\t\tlongTitle: 'International edition',\n\t\ttitle: 'International edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/London',\n\t\tlangLocale: 'en',\n\t\thasEditionalisedPages: false,\n\t\tshortTitle: 'Int',\n\t},\n] as const satisfies ReadonlyArray<{\n\turl: string;\n\teditionId: EditionId;\n\tpageId: string;\n\tlongTitle: string;\n\ttitle: string;\n\tdateLocale: string;\n\ttimeZone: string;\n\tlangLocale?: string;\n\thasEditionalisedPages: boolean;\n\tshortTitle: string;\n}>;\n\nconst [ukEdition] = editionList;\n\n/**\n * The list of editionalised pages was copied from Frontend:\n * https://github.com/guardian/frontend/blob/60c6b55944d52d87039a2a844665cf39dc7fe437/common/app/common/Edition.scala#L20-L35\n */\nconst editionalisedPages = [\n\t'business',\n\t'business-to-business',\n\t'commentisfree',\n\t'culture',\n\t'money',\n\t'sport',\n\t'technology',\n\t'media',\n\t'environment',\n\t'film',\n\t'lifeandstyle',\n\t'travel',\n\t'tv-and-radio',\n] as const;\n\nconst getEditionFromId = (editionId: EditionId): Edition => {\n\treturn (\n\t\teditionList.find((edition) => edition.editionId === editionId) ??\n\t\tukEdition\n\t);\n};\n\nconst getEditionFromPageId = (pageId: string): Edition | undefined =>\n\teditionList.find((edition) => edition.pageId === pageId);\n\nconst getRemainingEditions = (editionId: EditionId): Edition[] => {\n\treturn editionList.filter((edition) => edition.editionId !== editionId);\n};\n\n/**\n * Determine if a string is one of the permitted edition strings\n *\n * @param s The string to test\n */\nconst isEditionId = isOneOf(editionList.map(({ editionId }) => editionId));\n\nconst isNetworkFront = (pageId: string): boolean =>\n\teditionList.some((edition) => edition.pageId === pageId);\n\n/**\n * Given an editionalised pageId such as 'uk/travel' split into ['uk', 'travel']\n * Checks:\n * a) the first section is a network front\n * b) the second section is an editionalised page\n */\nconst splitEditionalisedPage = (\n\tpageId: string,\n): undefined | [string, string] => {\n\tconst pageIdSplit = pageId.split('/');\n\tif (!isTuple(pageIdSplit, 2)) {\n\t\treturn undefined;\n\t}\n\tconst [networkId, pageIdSuffix] = pageIdSplit;\n\tif (!isNetworkFront(networkId)) {\n\t\treturn undefined;\n\t}\n\tconst hasMatch = editionalisedPages.some(\n\t\t(editionalisedPage) => editionalisedPage === pageIdSuffix,\n\t);\n\treturn hasMatch ? [networkId, pageIdSuffix] : undefined;\n};\n\nconst isEditionalisedPage = (pageId: string): boolean =>\n\t!!splitEditionalisedPage(pageId);\n\nexport {\n\tEditionId,\n\tEdition,\n\teditionList,\n\teditionalisedPages,\n\tgetEditionFromId,\n\tgetEditionFromPageId,\n\tgetRemainingEditions,\n\tisEditionId,\n\tisEditionalisedPage,\n\tisNetworkFront,\n\tsplitEditionalisedPage,\n};\n"],"names":["styles","css","Flex","children","gap","div","style","trackingEventDescriptionToOphanAction","description","reportTrackingEvent","componentName","eventDescription","renderingTarget","extraDetails","payload","message","timestamp","Date","now","submitComponentEvent","component","componentType","id","action","value","JSON","stringify","skipLinkCss","textSans17","palette","neutral","focus","InlineSkipToWrapper","blockDescription","a","data-ignore","href","p","tabIndex","aria-label","role","formFrameStyle","brand","space","from","desktop","formFieldsStyle","inputWrapperStyle","signUpButtonStyle","successMessageStyle","headlineBold24","ManyNewslettersForm","status","email","handleTextInput","handleSubmitButton","newsletterCount","formHasFocus","setFormHasFocus","useState","hidePrivacyOnMobile","length","ariaLabel","errorMessage","undefined","form","aria-live","onSubmit","submitEvent","preventDefault","onFocus","onBlur","aside","hideOnMobile","NewsletterPrivacyMessage","textColor","span","TextInput","label","onChange","error","disabled","Button","isLoading","iconSide","onClick","cssOverrides","emailRegex","contentWrapperStyle","leftCol","desktopClearButtonWrapperStyle","mobileCaptionAndClearButtonWrapperStyle","ClearButton","removeAll","size","color","hideLabel","priority","icon","SvgCross","Caption","count","forDesktop","typography","headlineMedium24","headlineBold17","ManyNewsletterSignUp","useReCaptcha","captchaSiteKey","newslettersToSignUpFor","setNewslettersToSignUpFor","setStatus","setEmail","reCaptchaRef","useRef","userCanInteract","useConfig","toggleNewsletter","useCallback","event","target","button","HTMLElement","identityName","dataset","listId","element","attributeName","getAttribute","numericValue","Number","isNaN","attributeToNumber","index","findIndex","newsletter","classList","add","BUTTON_SELECTED_CLASS","setAttribute","ariaLabelWhenChecked","slice","remove","ariaLabelWhenUnchecked","signUpButtons","document","querySelectorAll","BUTTON_ROLE","ariaLabelText","useEffect","addEventListener","removeEventListener","sendRequest","async","reCaptchaToken","identityNames","map","listIds","response","emailAddress","newsletterIds","recaptchaToken","data","newsletterIdOrList","window","pageRef","location","origin","pathname","refViewId","guardian","ophan","pageViewId","formData","FormData","append","Array","isArray","newsletterId","entries","config","switches","emailSignupRecaptcha","buildNewsletterSignUpFormData","endpoint","requestBodyStrings","key","push","encodeURIComponent","toString","fetch","method","body","join","headers","Accept","postFormData","page","ajaxUrl","requestMultipleSignUps","catch","ok","responseText","text","substring","hide","Section","backgroundColour","showSideBorders","stretchRight","leftColSize","padContent","leftContent","test","current","result","executeAsync","ev","ReactGoogleRecaptcha","sitekey","ref","onError","eventType","type","reset","LegalLink","Link","rel","termsStyle","textSans12","textStyles","themePalette","sourcePalette","strong","hiddenStyles","sidePadding","mobileLandscape","bottomPadding","sideBorderStyles","tablet","topBorderStyles","ElementContainer","sectionId","showTopBorder","padSides","padBottom","borderColour","innerBackgroundColour","shouldCenter","className","ophanComponentName","ophanComponentLink","containerName","hasPageSkin","hasPageSkinContentSelfConstrain","jsx","backgroundColor","pageSkinContainer","borderColor","center","containerStyles","headlineContainerStyles","until","headlineContainerStylesWithPageSkin","margins","rightMargin","wide","padding","format","design","ArticleDesign","LiveBlog","DeadBlog","Content","padded","verticalMargins","MaybeHideAboveLeftCol","Hide","when","breakpoint","title","fontColour","url","centralBorder","toggleable","showDateHeader","editionId","treats","fullWidth","LeftColumn","borderType","ContainerTitle","Treats","ShowHideButton","editionList","pageId","longTitle","dateLocale","timeZone","langLocale","hasEditionalisedPages","shortTitle","ukEdition","getEditionFromId","find","edition","getEditionFromPageId","isNetworkFront","isOneOf","some"],"sourceRoot":""}