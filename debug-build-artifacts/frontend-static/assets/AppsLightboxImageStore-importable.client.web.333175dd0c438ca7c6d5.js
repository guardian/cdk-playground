(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[8968],{25816:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppsLightboxImageStore:()=>a,openLightboxForImageId:()=>s});var o=r(64614),n=r(42631),i=r(87612);let c=[];const s=e=>{const t=c.findIndex((t=>t.elementId===e));if(-1===t)return;const r=Math.max(window.innerHeight,window.innerWidth),s=window.devicePixelRatio>=2?"high":"low";(0,n.yY)().launchSlideshow(c.map((e=>new o.Image({width:e.width,height:e.height,url:(0,i.o7)({mainImage:e.masterUrl,imageWidth:r,resolution:s}),caption:e.caption,credit:e.credit}))),t,document.title).catch((()=>{}))},a=e=>{let{images:t}=e;return c=t,null}},42631:(e,t,r)=>{"use strict";r.d(t,{OA:()=>F,IC:()=>H,GR:()=>x,QF:()=>z,Dq:()=>y,yY:()=>D,_5:()=>K,ud:()=>V,U:()=>k,yV:()=>_,LE:()=>R,FA:()=>j});var o=r(13011),n=r(96831),i=r(86293),c=r(99895),s=r(65490),a=r(89993),d=r(85159),l=(r(47038),r(59517)),u=(r(29103),r(60579)),h=r(54703),w=r(69504),g=r(75271),p=r(9474),f=r(13213);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class P extends f.TProtocol{getTransport(){return this.concreteProtocol.getTransport()}flush(){return this.concreteProtocol.flush()}writeMessageBegin(e,t,r){return this.concreteProtocol.writeMessageBegin(e,t,r)}writeMessageEnd(){return this.concreteProtocol.writeMessageEnd()}writeStructBegin(e){return this.concreteProtocol.writeStructBegin(e)}writeStructEnd(){return this.concreteProtocol.writeStructEnd()}writeFieldBegin(e,t,r){return this.concreteProtocol.writeFieldBegin(e,t,r)}writeFieldEnd(){return this.concreteProtocol.writeFieldEnd()}writeFieldStop(){return this.concreteProtocol.writeFieldStop()}writeMapBegin(e,t,r){return this.concreteProtocol.writeMapBegin(e,t,r)}writeMapEnd(){return this.concreteProtocol.writeMapEnd()}writeListBegin(e,t){return this.concreteProtocol.writeListBegin(e,t)}writeListEnd(){return this.concreteProtocol.writeListEnd()}writeSetBegin(e,t){return this.concreteProtocol.writeSetBegin(e,t)}writeSetEnd(){return this.concreteProtocol.writeSetEnd()}writeBool(e){return this.concreteProtocol.writeBool(e)}writeByte(e){return this.concreteProtocol.writeByte(e)}writeI16(e){return this.concreteProtocol.writeI16(e)}writeI32(e){return this.concreteProtocol.writeI32(e)}writeI64(e){return this.concreteProtocol.writeI64(e)}writeDouble(e){return this.concreteProtocol.writeDouble(e)}writeString(e){return this.concreteProtocol.writeString(e)}writeBinary(e){return this.concreteProtocol.writeBinary(e)}readMessageBegin(){return this.concreteProtocol.readMessageBegin()}readMessageEnd(){return this.concreteProtocol.readMessageEnd()}readStructBegin(){return this.concreteProtocol.readStructBegin()}readStructEnd(){return this.concreteProtocol.readStructEnd()}readFieldBegin(){return this.concreteProtocol.readFieldBegin()}readFieldEnd(){return this.concreteProtocol.readFieldEnd()}readMapBegin(){return this.concreteProtocol.readMapBegin()}readMapEnd(){return this.concreteProtocol.readMapEnd()}readListBegin(){return this.concreteProtocol.readListBegin()}readListEnd(){return this.concreteProtocol.readListEnd()}readSetBegin(){return this.concreteProtocol.readSetBegin()}readSetEnd(){return this.concreteProtocol.readSetEnd()}readBool(){return this.concreteProtocol.readBool()}readByte(){return this.concreteProtocol.readByte()}readI16(){return this.concreteProtocol.readI16()}readI32(){return this.concreteProtocol.readI32()}readI64(){return this.concreteProtocol.readI64()}readDouble(){return this.concreteProtocol.readDouble()}readBinary(){return this.concreteProtocol.readBinary()}readString(){return this.concreteProtocol.readString()}skip(e){return this.concreteProtocol.skip(e)}constructor(e){super(e.getTransport()),m(this,"concreteProtocol",void 0),this.concreteProtocol=e}}class B extends P{writeMessageBegin(e,t,r){t===f.MessageType.CALL||t===f.MessageType.ONEWAY?super.writeMessageBegin(this.serviceName+B.separator+e,t,r):super.writeMessageBegin(e,t,r)}constructor(e,t){super(e),m(this,"serviceName",void 0),this.serviceName=t}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){window.android?window.android.postMessage(e.data,e.connectionId):window.webkit?window.webkit.messageHandlers.iOSWebViewMessage.postMessage(e):console.warn("No native APIs available")}m(B,"separator",":");let S=1;const v=()=>"connection-".concat(S++);class E extends f.ThriftConnection{reset(e){if(e===this.connectionId&&window.nativeConnections){console.warn("Reseting connection "+e),delete window.nativeConnections[this.connectionId];for(const e of this.promises)e.reject(new f.TApplicationException(f.TApplicationExceptionType.UNKNOWN,"Timeout error"));this.promises=[],this.connectionId=v(),window.nativeConnections[this.connectionId]=this}}receive(e){const t=this.promises.shift();if(t){clearTimeout(t.timeoutId);const r=Buffer.from(e.data,"base64");t.resolve(r)}this.sendNextMessage()}sendNextMessage(){const e=this.outBuffer.shift();e&&(console.log("Sending next message"),I(e))}send(e){const t=this.connectionId,r=this;return new Promise((function(o,n){r.promises.push({resolve:o,reject:n,timeoutId:setTimeout((function(){r.reset(t)}),3e4)});const i={data:e.toString("base64"),connectionId:t};1===r.promises.length?(console.log("Sending message immediately"),I(i)):(console.log("Queing message because others in flight"),r.outBuffer.push(i))}))}constructor(e,t){var r;super(e,t),b(this,"connectionId",v()),b(this,"promises",[]),b(this,"outBuffer",[]),"undefined"!=typeof window&&(window.nativeConnections=null!==(r=window.nativeConnections)&&void 0!==r?r:{},window.nativeConnections[this.connectionId]=this)}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffered",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"compact";const o=new E((0,f.getTransport)(t),class extends B{constructor(t){var o;super(new((0,f.getProtocol)(r))(t),null!==(o=e.serviceName)&&void 0!==o?o:"")}});return new e(o)}let C;const y=()=>((0,p.b)(C)&&(C=M(s.Client,"buffered","compact")),C);let L;const x=()=>((0,p.b)(L)&&(L=M(i.Client,"buffered","compact")),L);let T;const F=()=>(T||(T=M(o.Client,"buffered","compact")),T);let N;const k=()=>(N||(N=M(u.Client,"buffered","compact")),N);let A;const _=()=>(A||(A=M(h.Client,"buffered","compact")),A);let O;const R=()=>(O||(O=M(w.Client,"buffered","compact")),O);let W;const D=()=>(W||(W=M(a.Client,"buffered","compact")),W);let U;const j=()=>(U||(U=M(g.Client,"buffered","compact")),U);let Y;const H=()=>(Y||(Y=M(n.Client,"buffered","compact")),Y);let Q;const V=()=>(Q||(Q=M(l.Client,"buffered","compact")),Q);let q;const z=()=>(q||(q=M(c.Client,"buffered","compact")),q);let G;const K=()=>(G||(G=M(d.Client,"buffered","compact")),G)},87612:(e,t,r)=>{"use strict";r.d(t,{o7:()=>o});const o=e=>{let{mainImage:t,imageWidth:r,resolution:o,aspectRatio:n="none"}=e;const i=new URL(t);if("s3-eu-west-1.amazonaws.com"===i.hostname)return i.href;const c=new URLSearchParams({width:r.toString(),dpr:String("high"===o?2:1),s:"none",crop:n});return"https://i.guim.co.uk/img/".concat((e=>{var t;switch(null!==(t=e.hostname.split(".")[0])&&void 0!==t?t:""){case"static":case"static-secure":return"static";case"uploads":return"uploads";default:return"media"}})(i)).concat(i.pathname,"?").concat(c.toString())}},50150:()=>{}}]);
//# sourceMappingURL=AppsLightboxImageStore-importable.client.web.333175dd0c438ca7c6d5.js.map