"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[2704],{67730:(t,e,n)=>{n.r(e),n.d(e,{LightboxLayout:()=>kt});var i,r=n(50484),o=n(24017),a=n(50641),s=n(81477),l=n(59648),c=n(71653),d=n(72657),u=n(6569),h=n(25549),p=n(83254),g=n(64043),f=n(24755),x=n(22820),m=n(18247),b=n(31880),v=n(57820),y=n.n(v),w=n(65656),j=n(16346),k=n(296),A=n(44165),M=n.n(A),T=n(67400),L=n(27234),S=n(25995),E=n(56297),H=n(26306),G=n(1954),I=function(t){var e=t.captionText,n=t.credit,i=t.displayCredit;return(0,r.jsxs)("figcaption",{css:(0,o.css)(c.WuG,";line-height:135%;overflow-wrap:break-all;padding-top:",l.x[2],"px;padding-bottom:",l.x[2],"px;border-top:3px solid ",(0,G.M)("--lightbox-divider"),";"),children:[!!e&&(0,r.jsx)("span",{css:[(0,o.css)("color:",a.M.neutral[97],";a{color:inherit;}strong{font-weight:bold;}")],dangerouslySetInnerHTML:{__html:e||""}},"caption"),!!n&&i&&(0,r.jsx)("div",{css:(0,o.css)("color:",a.M.neutral[60],";"),children:n})]})},q=n(34660),N=(0,o.keyframes)(i||(i=(0,q.A)(["\n\t0% {\n\t\tbackground-color: ",";\n\t\tbox-shadow: 26px 0 ",", -26px 0 ",";\n\t}\n\t50% {\n\t\tbackground-color: ",";\n\t\tbox-shadow: 26px 0 ",", -26px 0 ",";\n\t}\n\t100% {\n\t\tbackground-color: ",";\n\t\tbox-shadow: 26px 0 ",", -26px 0 ",";\n\t}\n"])),a.M.neutral[46],a.M.neutral[46],a.M.neutral[100],a.M.neutral[100],a.M.neutral[46],a.M.neutral[46],a.M.neutral[46],a.M.neutral[100],a.M.neutral[46]),C=function(){return(0,r.jsx)("div",{css:(0,o.css)("width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:",a.M.neutral[10],";position:absolute;top:0;left:0;"),children:(0,r.jsx)("span",{css:(0,o.css)("width:12px;height:12px;border-radius:50%;background-color:",a.M.neutral[100],";box-shadow:26px 0 ",a.M.neutral[100],",-26px 0 ",a.M.neutral[100],";position:relative;animation:",N," 0.5s ease-out infinite alternate;@media (prefers-reduced-motion){animation:none;}")})})},R=n(86248),O={name:"9qijbc",styles:"width:100%;flex-shrink:0;scroll-snap-align:start"},P=function(t){var e=(0,o.css)("object-fit:contain;object-position:top;",s.TG.tablet,"{object-position:center;}margin-left:auto;margin-right:auto;",s.HT.tablet,"{margin-top:1vh;}");return"portrait"===t?(0,o.css)("img{",e," width:auto;max-width:100%;height:100vh;",s.HT.tablet,"{height:98vh;}}"):(0,o.css)("img{",e," width:100%;height:auto;max-height:100vh;",s.HT.tablet,"{max-height:98vh;}}")},W=(0,o.css)("picture{flex-grow:1;",s.TG.tablet,"{display:flex;align-items:center;}",s.HT.tablet,"{margin-right:",l.x[5],"px;}}"),z=(0,o.css)(s.TG.tablet,"{width:100%;margin-top:",l.x[3],"px;position:absolute;bottom:0;left:0;}",s.HT.tablet,"{min-width:300px;max-width:300px;}",s.TG.tablet,"{border-top:1px solid ",a.M.neutral[20],";}",s.HT.tablet,"{border-left:1px solid ",a.M.neutral[20],";}background-color:",a.M.neutral[7],";padding:",l.x[3],"px;",s.HT.tablet,"{padding-left:",l.x[5],"px;padding-right:",l.x[5],"px;}"),B=(0,o.css)("display:flex;position:relative;width:100%;height:100%;justify-content:space-between;flex-direction:column;",s.HT.tablet,"{flex-direction:row;}"),D={name:"z7sg5q",styles:"margin-left:1px;margin-right:1px"},_=function(t){var e=t.countOfImages,n=t.initialPosition,i=void 0===n?1:n;return(0,r.jsxs)("span",{css:(0,o.css)("display:block;",s.HT.tablet,"{text-align:center;padding-top:2.25rem;margin-bottom:",l.x[1],"px;}",c.WuG,";color:",a.M.neutral[86],";",s.TG.tablet,"{margin-bottom:",l.x[2],"px;}"),"aria-hidden":"true","data-testid":"lightbox-selected",children:[(0,r.jsx)("span",{className:"selected",children:i}),(0,r.jsx)("span",{css:D,children:"/"}),(0,r.jsx)("span",{css:(0,o.css)("color:",a.M.neutral[97],";"),children:e})]})},Q=function(t){var e=t.format,n=t.images,i=(0,T.useState)(new Set),u=(0,x.A)(i,2),p=u[0],g=u[1];return(0,T.useEffect)((function(){(0,j.Rm)("dotcom","💡 images loaded:",p)}),[p]),(0,r.jsx)(r.Fragment,{children:n.map((function(t,i){var u,f=t.width>t.height?"landscape":"portrait";return(0,r.jsx)("li",{"data-index":t.position,"data-element-id":t.elementId,css:[O,P(f),W],children:(0,r.jsxs)("figure",{css:B,children:[!p.has(t.position)&&(0,r.jsx)(C,{}),(0,r.jsx)(R.VI,{role:"immersive",alt:null!==(u=t.alt)&&void 0!==u?u:"",height:t.height,width:t.width,master:t.masterUrl,format:e,isLightbox:!0,orientation:f,onLoad:function(){return g((function(e){var n=e.size;return e.add(t.position),n!==e.size?new Set(e):e}))},loading:"lazy"}),(0,r.jsxs)("aside",{css:z,children:[!!t.title&&(0,r.jsx)("h2",{css:(0,o.css)("width:100%;",c.tQq," color:",a.M.neutral[100],";margin-bottom:",l.x[1],"px;",s.HT.tablet,"{margin-bottom:",l.x[2],"px;}"),children:t.title}),"number"==typeof t.starRating&&(0,r.jsx)("div",{css:(0,o.css)("display:inline-block;background-color:",a.M.brandAlt[400],";margin-bottom:",l.x[2],"px;",s.HT.tablet,"{margin-bottom:",l.x[3],"px;}figcaption{height:0;}"),children:(0,r.jsx)(H.G,{size:"medium",rating:t.starRating})}),(0,r.jsx)(h.L,{from:"tablet",children:(0,r.jsx)(_,{countOfImages:n.length,initialPosition:t.position})}),(0,r.jsx)(I,{captionText:t.caption,credit:t.credit,displayCredit:t.displayCredit}),!!t.blockId&&!(0,w.b)(t.firstPublished)&&(0,r.jsx)(E.N,{href:"?page=with:block-".concat(t.blockId,"#block-").concat(t.blockId),priority:"secondary",cssOverrides:(0,o.css)(c.WuG,";color:",a.M.neutral[60],";:hover{color:",a.M.neutral[86],";}"),children:(0,r.jsxs)("time",{dateTime:new Date(t.firstPublished).toISOString(),title:"View original post",children:[(0,r.jsxs)("span",{css:(0,o.css)(d.Q,";"),children:["Original post published"," "]}),(0,S.f)(t.firstPublished)]})})]})]})},"".concat(t.masterUrl,"-").concat(i))}))})};function F(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return K(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var U,V=function(t,e){var n,i=e.scrollLeft,r=null===(n=t.querySelector("li"))||void 0===n?void 0:n.clientWidth;if(!(0===i&&0===r||(0,w.b)(r)||Number.isNaN(r)||Number.isNaN(i)))return 0===i?1:Math.round(i/r)+1},$=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1200;return Promise.race([t,new Promise((function(t,n){var i=setTimeout((function(){n(),clearTimeout(i)}),e)}))])},J=function(){var t=(0,m.A)(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!L.A.isEnabled){t.next=2;break}return t.abrupt("return",$(L.A.request(e)));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=(0,m.A)(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!L.A.isEnabled||!L.A.isFullscreen){t.next=2;break}return t.abrupt("return",$(L.A.exit()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(t){t instanceof HTMLElement&&t.focus()},Z=function(t,e,n){var i,r=null===(i=e.querySelector("li"))||void 0===i?void 0:i.clientWidth;if(!(0,w.b)(r))switch(t){case 0:case 1:n.scrollLeft=0;break;default:n.scrollLeft=(t-1)*r}},tt=function(t,e){return t<=1?e:t-1},et=function(t,e){return t>=e?1:t+1},nt=function(t,e){var n=t[e-1];n&&(n.loading="eager")},it=function(t){t.classList.add("active");var e=setTimeout((function(){t.classList.remove("active"),clearTimeout(e)}),75)},rt=function(t,e,n,i){var r=e.length;it(n);var o=V(t,i);if(null!=o){var a=tt(o,r);Z(a,t,i)}},ot=function(t,e,n,i){var r=e.length;it(n);var o=V(t,i);if(null!=o){var a=et(o,r);Z(a,t,i)}},at=function(){var t=(0,m.A)(y().mark((function t(e,n,i,r){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,j.Rm)("dotcom","💡 Opening lightbox."),document.activeElement&&(U=document.activeElement),t.next=4,J(e).catch((function(){}));case 4:document.documentElement.classList.add("lightbox-open"),e.removeAttribute("hidden"),Z(i,e,n),window.addEventListener("keydown",r);case 8:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),st=function(t,e){document.documentElement.classList.remove("lightbox-open"),t.setAttribute("hidden","true"),window.removeEventListener("keydown",e)},lt=function(){var t=(0,m.A)(y().mark((function t(e,n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,j.Rm)("dotcom","💡 Closing lightbox."),t.next=3,X().catch((function(){}));case 3:st(e,n),history.back(),U&&Y(U);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ct=function(t,e,n){var i=null!=n?n:t.classList.contains("hide-info")?"show":"hide";e.classList.toggle("active","show"===i),t.classList.toggle("hide-info","hide"===i),k.I.local.set("gu.prefs.lightbox-info",i)},dt=(0,o.css)("display:grid;grid-auto-flow:column;grid-auto-columns:100%;height:100%;width:100%;scroll-snap-type:x mandatory;overflow-x:scroll;overflow-y:hidden;scroll-behavior:auto;overscroll-behavior:contain;",s.HT.tablet,"{margin-left:",l.x[5],"px;}::-webkit-scrollbar{display:none;}scrollbar-width:none;"),ut=function(t){var e,n,i,o,a,s=t.format,l=t.images,c=(e="gu-lightbox",n=(0,T.useState)(),o=(i=(0,x.A)(n,2))[0],a=i[1],(0,T.useEffect)((function(){var t;a(null!==(t=window.document.getElementById(e))&&void 0!==t?t:void 0)}),[e]),o),d=(0,T.useState)(!1),u=(0,x.A)(d,2),h=u[0],p=u[1];return(0,T.useEffect)((function(){c&&(h?(0,j.Rm)("dotcom","💡 Lightbox already initialised, skipping"):(function(t){(0,j.Rm)("dotcom","💡 Initialising lightbox");var e=t.querySelector("button.next"),n=t.querySelector("button.previous"),i=t.querySelector("button.info"),r=t.querySelector("button.close"),o=t.querySelector("ul"),a=t.querySelectorAll("li picture"),s=Array.from(t.querySelectorAll("li img")),l=t.querySelectorAll("li aside a");if(o&&r&&n&&e&&i){var c,d=function(r){if(!(r.ctrlKey||r.metaKey||r.altKey))switch(r.code){case"Tab":r.preventDefault();var a=function(t,e){function n(t){return Array.from(t.querySelectorAll("button:not([disabled]), a:not([disabled]), input:not([disabled]), select:not([disabled])"))}var i=V(t,e);if(null==i)return[];var r=t.querySelector('li[data-index="'.concat(i,'"]')),o=t.querySelector("nav"),a=r?n(r):[],s=o?n(o):[];return t.classList.contains("hide-info")?s:[].concat((0,b.A)(a),(0,b.A)(s))}(t,o),l=a.find((function(t){return t===document.activeElement})),c=a[0],u=a[a.length-1];if(l){var h,p,g=a.indexOf(l),f=0===g,x=g===a.length-1;r.shiftKey?f?null==u||u.focus():null===(h=a[g-1])||void 0===h||h.focus():x?null==c||c.focus():null===(p=a[g+1])||void 0===p||p.focus()}else null==c||c.focus();break;case"ArrowLeft":return rt(t,s,n,o);case"ArrowRight":return ot(t,s,e,o);case"KeyI":return ct(t,i);case"ArrowUp":return ct(t,i,"show");case"ArrowDown":return ct(t,i,"hide");case"KeyQ":case"Escape":return void lt(t,d)}},u=F(a);try{for(u.s();!(c=u.n()).done;)c.value.addEventListener("mousedown",(function(e){ct(t,i),e.preventDefault(),e.stopPropagation()}))}catch(t){u.e(t)}finally{u.f()}o.addEventListener("scroll",M()((function(){var e=V(t,o);if(!(0,w.b)(e)){var n=t.querySelector("nav .selected");n&&(function(t,e,n,i){t.innerHTML=e.toString(),window.history.replaceState({},"","#img-".concat(e)),i.classList.toggle("reveal",e===n)}(n,e,s.length,r),function(t,e){var n=t.length,i=tt(e,n),r=et(e,n);nt(t,i),nt(t,r)}(s,e))}}),150,{leading:!0})),r.addEventListener("click",(function(){lt(t,d)})),n.addEventListener("click",(function(){rt(t,s,n,o)})),e.addEventListener("click",(function(){ot(t,s,e,o)})),i.addEventListener("click",(function(){ct(t,i)}));var h,p=F(l);try{for(p.s();!(h=p.n()).done;)h.value.addEventListener("click",(function(t){t.stopPropagation()}))}catch(t){p.e(t)}finally{p.f()}L.A.isEnabled&&L.A.on("change",(function(){L.A.isFullscreen?(0,j.Rm)("dotcom","💡 entered fullscreen mode."):((0,j.Rm)("dotcom","💡 leaving fullscreen mode."),t.hasAttribute("hidden")||(st(t,d),history.back(),U&&Y(U)))})),window.addEventListener("popstate",(function(){var e=window.location.hash;if(e.startsWith("#img-")&&!t.hasAttribute("open")){var n=parseInt(e.substring(5),10);at(t,o,n,d)}else X(),st(t,d),U&&Y(U)})),"hide"===k.I.local.get("gu.prefs.lightbox-info")&&ct(t,i,"hide");var g=window.location.hash;if(g.startsWith("#img-")){var f=parseInt(g.substring(5),10);at(t,o,f,d)}t.setAttribute("data-island-status","rendered")}}(c),p(!0)))}),[h,c]),c?((0,j.Rm)("dotcom","💡 Generating HTML for lightbox images..."),(0,r.jsxs)("ul",{css:dt,"aria-label":"All images",children:[(0,r.jsx)(Q,{format:s,images:l}),";"]})):null},ht=(0,o.css)("width:100%;height:100%;background-color:",a.M.neutral[10],";&.hide-info{aside{display:none;}",s.TG.tablet,"{nav{visibility:hidden;}}}button.active{background-color:",a.M.neutral[46],";}button.reveal{visibility:visible;}"),pt=(0,o.css)("display:flex;height:100%;flex-direction:row;",s.TG.tablet,"{flex-direction:column;}"),gt=(0,o.css)("display:flex;flex-direction:column;",s.TG.tablet,"{flex-direction:row;position:absolute;z-index:1;width:100%;}",s.HT.tablet,"{padding-top:",l.x[1],"px;padding-left:",l.x[4],"px;padding-right:",l.x[4],"px;height:100vh;}color:white;",s.TG.tablet,"{border-bottom:1px solid ",a.M.neutral[20],";}",s.HT.tablet,"{border-left:1px solid ",a.M.neutral[20],";}background-color:",a.M.neutral[7],";"),ft=(0,o.css)("svg{fill:",a.M.neutral[100],";margin-top:3px;}margin-top:",l.x[2],"px;margin-bottom:",l.x[2],"px;",s.TG.tablet,"{margin-left:",l.x[2],"px;}border-radius:50%;height:44px;width:44px;border:none;cursor:pointer;transition:background-color 0.2s;background-color:",a.M.neutral[20],";:hover{background-color:",a.M.neutral[46],";}"),xt=(0,o.css)(s.TG.tablet,"{position:absolute;right:",l.x[2],"px;}svg{height:24px;width:24px;}"),mt=(0,o.css)("svg{height:24px;width:24px;}",s.HT.tablet,"{svg{height:32px;width:32px;}}"),bt={name:"h1kfx5",styles:"svg{height:24px;width:24px;}"},vt=function(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"24",viewBox:"0 0 9 24",children:(0,r.jsx)("path",{fill:a.M.neutral[100],d:"M.3 22L3.9 9.1H1.3l.4-1.4 5.6-.9.3.3-4.4 14.8H6L5.6 23c-.9.4-2.8.9-4.1.9-1.1 0-1.7-.5-1.2-1.9zM5.5 2C5.5.9 6.4.1 7.3.1c1 0 1.6.7 1.6 1.5 0 1.1-.9 1.9-1.8 1.9-1 .1-1.6-.6-1.6-1.5z"})})},yt={name:"z7sg5q",styles:"margin-left:1px;margin-right:1px"},wt=function(t){var e=t.countOfImages,n=t.initialPosition,i=void 0===n?1:n;return(0,r.jsxs)("span",{css:(0,o.css)("display:block;",s.HT.tablet,"{text-align:center;padding-top:2.25rem;margin-bottom:",l.x[1],"px;}",c.WuG,";color:",a.M.neutral[86],";",s.TG.tablet,"{margin-bottom:",l.x[2],"px;}"),"aria-hidden":"true","data-testid":"lightbox-selected",children:[(0,r.jsx)("span",{className:"selected",children:i}),(0,r.jsx)("span",{css:yt,children:"/"}),(0,r.jsx)("span",{css:(0,o.css)("color:",a.M.neutral[97],";"),children:e})]})},jt={name:"8mbnz1",styles:"order:3"},kt=function(t){var e=t.format,n=t.images;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Global,{styles:(0,o.css)("html.lightbox-open{#gu-lightbox{position:fixed;z-index:",(0,f.f)("lightbox"),";}body{background-color:",a.M.neutral[10],";}}")}),(0,r.jsx)("div",{css:ht,id:"gu-lightbox","aria-modal":"true",role:"dialog",hidden:!0,children:(0,r.jsxs)("div",{css:pt,children:[(0,r.jsx)(ut,{format:e,images:n}),(0,r.jsxs)("nav",{css:gt,children:[(0,r.jsxs)("button",{type:"button",css:[ft,xt],className:"close",title:"Close [ESC or Q]",children:[(0,r.jsx)(u.F,{isAnnouncedByScreenReader:!1}),(0,r.jsx)("span",{css:(0,o.css)(d.Q,";"),children:"Close dialogue"})]}),(0,r.jsx)(h.L,{until:"tablet",children:(0,r.jsx)(wt,{countOfImages:n.length})}),(0,r.jsxs)("button",{type:"button",css:[ft,mt,(0,o.css)("order:1;",s.TG.tablet,"{order:2;}")],className:"next",title:"Next image [→]",children:[(0,r.jsx)(p._,{isAnnouncedByScreenReader:!1}),(0,r.jsx)("span",{css:(0,o.css)(d.Q,";"),children:"Next image"})]}),(0,r.jsxs)("button",{type:"button",css:[ft,mt,(0,o.css)("order:2;",s.TG.tablet,"{order:1;}")],className:"previous",title:"Previous image [←]",children:[(0,r.jsx)(g.B,{isAnnouncedByScreenReader:!1}),(0,r.jsx)("span",{css:(0,o.css)(d.Q,";"),children:"Previous image"})]}),(0,r.jsxs)("button",{type:"button",css:[ft,bt,jt],className:"info",title:"Toggle caption [i]",children:[(0,r.jsx)(vt,{}),(0,r.jsx)("span",{css:(0,o.css)(d.Q,";"),children:"Toggle caption"})]})]})]})})]})}},24755:(t,e,n)=>{n.d(e,{f:()=>r});var i=["lightbox","youTubeFullscreen","sticky-video-button","sticky-video","banner","dropdown","burger","mastheadVeggieBurgerExpandedMobile","expanded-veggie-menu-wrapper","expanded-veggie-menu","fullPageInteractiveHeaderWrapper","mobileSticky","stickyAdWrapperLabsHeader","stickyAdWrapper","stickyAdWrapperNav","mastheadMyAccountDropdown","mastheadEditionDropdown","editionDropdown","summaryDetails","toast","onwardsCarousel","myAccountDropdown","searchHeaderLink","TheGuardian","editionSwitcherBanner","expandableMarketingCardOverlay","tableOfContents","articleHeadline","immersiveBlackBox","bodyArea","rightColumnArea","mainMedia","card-nested-link","card-link"],r=function(t){var e=i.indexOf(t);return-1===e?-1:i.length-e}},1954:(t,e,n)=>{n.d(e,{M:()=>i});var i=function(t){return"var(".concat(t,")")}}}]);
//# sourceMappingURL=LightboxLayout-importable.client.web.legacy.7df522983533f1921d1c.js.map