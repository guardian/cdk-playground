"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[1262],{53935:(t,n,e)=>{e.d(n,{H6:()=>p,K4:()=>s,wV:()=>l,zr:()=>u});var o=e(11735),r=e(96811),c=e(61082),a=e(18411);const i="gu_article_count_opt_out",s=()=>(0,o.T)({name:i,value:(new Date).getTime().toString(),daysToLive:90}),u=()=>(0,r.z)({name:i}),l=()=>{c.I.local.remove("gu.history.dailyArticleCount"),c.I.local.remove("gu.history.weeklyArticleCount"),c.I.local.remove("gu.history.articleCountsThisWeek")},p=()=>!!(0,a.R)({name:i})},79971:(t,n,e)=>{e.d(n,{k:()=>pt});var o=e(50484),r=e(24017),c=e(99923),a=e(96378),i=e(67400),s=e(58452),u=e(53935),l=e(99354),p=e(77907),d=e(46080),m=e(7351),b=e(14302),f=e(27123),y=e(56607);function g(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function h(){const t=g(["\n\tcolor: ",";\n\tbackground: ",";\n\tborder: 1px solid ",";\n\t","\n\tpadding: ","px;\n\tbox-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n"]);return h=function(){return t},t}function x(){const t=g(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n"]);return x=function(){return t},t}function v(){const t=g(["\n\tfont-size: 17px;\n\tfont-weight: bold;\n"]);return v=function(){return t},t}function T(){const t=g(["\n\tmargin-top: ","px;\n\tfont-size: 15px;\n"]);return T=function(){return t},t}function O(){const t=g(["\n\tmargin-top: ","px;\n\tdisplay: flex;\n\tflex-direction: row;\n\n\t> * + * {\n\t\tmargin-left: ","px;\n\t}\n\n\t"," {\n\t\t> * + * {\n\t\t\tmargin-left: ","px;\n\t\t}\n\t}\n"]);return O=function(){return t},t}function j(){const t=g([""]);return j=function(){return t},t}function w(){const t=g([""]);return w=function(){return t},t}function C(){const t=g(["\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t}\n\t"]);return C=function(){return t},t}function M(){const t=g(["\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t"]);return M=function(){return t},t}function I(){const t=g(["\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t"]);return I=function(){return t},t}function k(){const t=g(["\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t"]);return k=function(){return t},t}function _(){const t=g([""]);return _=function(){return t},t}function A(){const t=g([""]);return A=function(){return t},t}function P(){const t=g(["\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tborder-color: ",";\n\t\t}\n\t"]);return P=function(){return t},t}function E(){const t=g(["\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t"]);return E=function(){return t},t}function N(){const t=g(["\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t"]);return N=function(){return t},t}function S(){const t=g(["\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t"]);return S=function(){return t},t}function R(){const t=g(["\n\tmargin-top: ","px;\n\t","\n\tfont-style: italic;\n\n\ta {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tcolor: "," !important;\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\ttext-decoration: underline !important;\n\t}\n"]);return R=function(){return t},t}const{brand:U,neutral:z}=p.M,D={epic:"white",banner:d.yF.primary,"investigations-moment-banner":z[0],"us-eoy-moment-banner":z[0],"global-new-year-moment-banner":z[0],"election-au-moment-banner":z[0]},H={epic:U[400],banner:d.jP.primary,"investigations-moment-banner":z[100],"us-eoy-moment-banner":"#FFEEDB","global-new-year-moment-banner":"#F79E1B","election-au-moment-banner":"#e4e4e3"},L={epic:"transparent",banner:d.VD.primary,"investigations-moment-banner":z[0],"us-eoy-moment-banner":z[0],"global-new-year-moment-banner":z[0],"election-au-moment-banner":z[0]},W={epic:b.fc,banner:b.Wd,"investigations-moment-banner":b.fA,"us-eoy-moment-banner":b.fA,"global-new-year-moment-banner":b.fA,"election-au-moment-banner":b.fA},V=t=>(0,r.css)(h(),D[t],H[t],L[t],m.NA0,a.x[2]),F=(0,r.css)(x()),K=(0,r.css)(v()),Q=(0,r.css)(T(),a.x[1]),q=(0,r.css)(O(),a.x[3],a.x[2],c.HT.tablet,a.x[3]),B={epic:z[100],banner:d.yF.primary,"investigations-moment-banner":z[0],"us-eoy-moment-banner":z[0],"global-new-year-moment-banner":z[0],"election-au-moment-banner":z[0]},$={epic:(0,r.css)(j()),banner:(0,r.css)(w()),"investigations-moment-banner":(0,r.css)(C(),p.M.neutral[100],p.M.neutral[0],p.M.neutral[0],p.M.neutral[86]),"us-eoy-moment-banner":(0,r.css)(M(),p.M.neutral[7],p.M.neutral[7],p.M.culture[350],p.M.neutral[100],p.M.culture[350]),"global-new-year-moment-banner":(0,r.css)(I(),p.M.neutral[7],p.M.neutral[7],p.M.brand[500],p.M.neutral[100],p.M.brand[500]),"election-au-moment-banner":(0,r.css)(k(),p.M.neutral[7],p.M.neutral[7],p.M.brand[500],p.M.neutral[100],p.M.brand[500])},G={epic:(0,r.css)(_()),banner:(0,r.css)(A()),"investigations-moment-banner":(0,r.css)(P(),p.M.neutral[0],p.M.neutral[100],p.M.neutral[0],p.M.neutral[46],p.M.neutral[46]),"us-eoy-moment-banner":(0,r.css)(E(),p.M.neutral[7],p.M.neutral[100],p.M.neutral[7],p.M.culture[350],p.M.neutral[100],p.M.culture[350]),"global-new-year-moment-banner":(0,r.css)(N(),p.M.neutral[0],p.M.neutral[100],p.M.neutral[0],p.M.brand[500],p.M.neutral[100],p.M.brand[500]),"election-au-moment-banner":(0,r.css)(S(),p.M.neutral[0],p.M.neutral[100],p.M.neutral[0],d.Tp.ctaPrimaryHover,p.M.neutral[100],d.Tp.ctaPrimaryHover)},X=t=>(0,r.css)(R(),a.x[2],m.WuG,B[t]),Y=t=>{let{type:n,hasOptedOut:e,onClose:r,onOptOut:c}=t;return(0,o.jsxs)("div",{css:V(n),children:[(0,o.jsxs)("div",{css:F,children:[(0,o.jsx)("div",{css:K,children:e?"You've opted out":"What's this?"}),(0,o.jsx)(l.a,{theme:W[n],children:(0,o.jsx)(f.$,{onClick:r,cssOverrides:$[n],icon:(0,o.jsx)(y.F,{}),hideLabel:!0,size:"xsmall",priority:"tertiary",children:"Close"})})]}),(0,o.jsx)("div",{css:Q,children:e?"Starting from your next page view, we won't count the articles you read or show you this message for three months.":"We would like to remind you how many Guardian articles youâ€™ve enjoyed on this device. Can we continue showing you this?"}),!e&&(0,o.jsxs)("div",{css:q,children:[(0,o.jsx)(l.a,{theme:W[n],children:(0,o.jsx)(f.$,{onClick:r,cssOverrides:G[n],priority:"primary",size:"xsmall",children:"Yes, that's OK"})}),(0,o.jsx)(l.a,{theme:W[n],children:(0,o.jsx)(f.$,{onClick:c,cssOverrides:$[n],priority:"tertiary",size:"xsmall",children:"No, opt me out"})})]}),(0,o.jsx)("div",{css:X(n),children:e?(0,o.jsxs)("span",{children:["If you have any questions, please"," ",(0,o.jsx)("a",{href:"https://www.theguardian.com/help/contact-us",children:"contact us."})]}):"Please note that opting out is a permanent action and can't be reversed"})]})};function J(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function Z(){const t=J(["\n\tdisplay: inline-block;\n\n\t"," {\n\t\t","\n\t}\n"]);return Z=function(){return t},t}function tt(){const t=J(["\n\tbackground: none;\n\tborder: none;\n\tpadding: 0;\n\tcursor: pointer;\n\tborder-bottom: 1px solid;\n\t/* stylelint-disable-next-line property-disallowed-list */\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tfont-weight: inherit;\n\tfont-style: inherit;\n\tcolor: inherit;\n\t&:focus {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\toutline: none !important;\n\t}\n"]);return tt=function(){return t},t}function nt(){const t=J(["\n\t\t\t\ttop: 0px;\n\t\t\t\tleft: 0px;\n\t\t  "]);return nt=function(){return t},t}function et(){const t=J(["\n\t\t\t\tleft: ","px;\n\t\t\t\tright: ","px;\n\t\t\t\t","\n\t\t  "]);return et=function(){return t},t}function ot(){const t=J(["\n\t\t\t\t\ttop: 10px;\n\t\t\t\t\tleft: 10px;\n\t\t\t\t\twidth: 450px;\n\t\t\t  "]);return ot=function(){return t},t}function rt(){const t=J(["\n\t\t\t\t\twidth: 400px;\n\t\t\t\t\tleft: 0;\n\t\t\t  "]);return rt=function(){return t},t}function ct(){const t=J(["\n\tposition: absolute;\n\tz-index: 100;\n\t","\n\tdisplay: block;\n\n\t"," {\n\t\t","\n\t}\n"]);return ct=function(){return t},t}const at=t=>"banner"===t||"investigations-moment-banner"===t||"us-eoy-moment-banner"===t||"global-new-year-moment-banner"===t||"election-au-moment-banner"===t,it=t=>(0,r.css)(Z(),c.HT.tablet,at(t)?"":"position: relative;"),st=(0,r.css)(tt()),ut=t=>(0,r.css)(ct(),at(t)?(0,r.css)(nt()):(0,r.css)(et(),a.x[4],a.x[4],at(t)?"bottom: 21px;":""),c.HT.tablet,at(t)?(0,r.css)(ot()):(0,r.css)(rt())),lt=t=>{let{numArticles:n,nextWord:e,type:r,tracking:c}=t;const[a,l]=(0,i.useState)(!1),[p,d]=(0,i.useState)(!1),[m,b]=(0,s.E)({debounce:!0,rootMargin:"-18px",threshold:0});(0,i.useEffect)((()=>{var t;m&&c&&c.submitComponentEvent((t=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-view"},action:"VIEW",value:"article-count-opt-out-popup-".concat(t)}))}),[m,c]);const f=()=>{var t;l(!1),c&&c.submitComponentEvent((t=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-close"},action:"CLICK",value:"article-count-opt-out-popup-".concat(t)}))};return(0,o.jsxs)("div",{ref:b,css:it(r),children:[(0,o.jsx)("button",{css:st,onClick:()=>{return a?f():(l(!0),void(c&&c.submitComponentEvent((t=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-open"},action:"CLICK",value:"article-count-opt-out-popup-".concat(t)}))));var t},children:"".concat(n).concat(e||"")}),a&&(0,o.jsx)("div",{css:ut(r),children:(0,o.jsx)(Y,{type:r,hasOptedOut:p,onOptOut:()=>{var t;(0,u.K4)(),(0,u.wV)(),d(!0),c&&c.submitComponentEvent((t=c.componentType,{component:{componentType:"ACQUISITIONS_OTHER",id:"article-count-opt-out-confirm"},action:"CLICK",value:"article-count-opt-out-popup-".concat(t)}))},onClose:f})})]})},pt=function(t,n,e,r){return arguments.length>4&&void 0!==arguments[4]&&!arguments[4]?(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:t.replace(/%%ARTICLE_COUNT%%/,"".concat(n))}}):((t,n,e,r)=>{const c=[],a=t.replace(/%%ARTICLE_COUNT%%( \w+)?/g,((t,n)=>(c.push(n),"%%ARTICLE_COUNT_AND_NEXT_WORD%%"))).split(/%%ARTICLE_COUNT_AND_NEXT_WORD%%/),i=[];let s=0;for(let t=0;t<a.length-1;t+=1)i.push((0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:a[t]}},s++)),i.push((0,o.jsx)(lt,{numArticles:n,nextWord:c[t],type:e,tracking:r},s++));return i.push((0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:a[a.length-1]}},s++)),i})(t,n,e,r)}},81412:(t,n,e)=>{e.d(n,{Bl:()=>g,Mf:()=>T,Nl:()=>m,Q7:()=>b,QP:()=>p,R9:()=>y,Tv:()=>l,hy:()=>f,m1:()=>u,qU:()=>h,rx:()=>j,t0:()=>O});var o=e(9474),r=e(29995);function c(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function a(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),o.forEach((function(n){c(t,n,e[n])}))}return t}function i(t,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e.push.apply(e,o)}return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t}const s=(t,n,e,r,c)=>{const a=((t,n,e,o,r)=>{const c=[{name:t,variant:n}];return e&&c.push({name:e.testName,variant:e.variantName}),o&&r&&c.push({name:o,variant:r,testType:"AMOUNTS_TEST"}),c})(n.abTestName,n.abTestVariant,n.targetingAbTest,r,c),i=((t,n)=>encodeURIComponent(JSON.stringify({source:t.platformId,componentId:t.campaignCode,componentType:t.componentType,campaignCode:t.campaignCode,abTests:n,referrerPageviewId:t.ophanPageId,referrerUrl:t.referrerUrl,isRemote:!0,labels:t.labels})))(n,a),s=((t,n,e)=>{const r={REFPVID:t.ophanPageId||"not_found",INTCMP:t.campaignCode||"",acquisitionData:n,numArticles:e||0};return Object.entries(r).filter((t=>{let[,n]=t;return!(0,o.b)(n)})).map((t=>{let[n,e]=t;return"".concat(n,"=").concat(e)})).join("&")})(n,i,null!=e?e:0),u=t.includes("?");return"".concat(t).concat(u?"&":"?").concat(s)},u=(t,n,e)=>s(((t,n)=>{switch(n.product){case"Contribution":case"SupporterPlus":return((t,n)=>{let{region:e,amount:o,billingPeriod:r}=n;return"".concat(t,"/").concat(e,"/contribute/checkout?selected-amount=").concat(o,"&selected-contribution-type=").concat(r)})(t,n);default:return t}})(t,n),e),l=t=>/\bsupport\./.test(t),p=(t,n,e,o,c,a)=>{if(!l(t))return t;const i=(0,r.u4)(t,o);return s(i,n,e,c,a)},d=/href="(.*?)"/g,m=(t,n,e,o)=>{const r=v(n,"body-link");return t.replace(d,((t,n)=>'href="'.concat(p(n,r,e,o),'"')))},b=(t,n,e)=>{const o="selected-contribution-type=".concat(n).concat(void 0!==e?"&selected-amount=".concat(e):""),r=t.includes("?");return"".concat(t).concat(r?"&":"?").concat(o)},f=t=>{const n=t.includes("?");return"".concat(t).concat(n?"&":"?").concat("oneTime")},y=(t,n,e,o)=>{const r="product=".concat(n,"&ratePlan=").concat(e).concat(void 0!==o?"&contribution=".concat(o):""),c=t.includes("?");return"".concat(t).concat(c?"&":"?").concat(r)},g=t=>/\bprofile\./.test(t),h=(t,n)=>g(t)?((t,n)=>{const e={componentType:n.componentType,componentId:n.campaignCode,abTestName:n.abTestName,abTestVariant:n.abTestVariant,viewId:n.ophanPageId},r={componentEventParams:encodeURIComponent((c=e,Object.keys(c).map((t=>{const n=c[t],e=Array.isArray(n)?n.map((t=>encodeURIComponent(t))).join(","):encodeURIComponent(n);return"".concat(t,"=").concat(e)})).join("&"))),returnUrl:n.referrerUrl};var c;const a=Object.entries(r).filter((t=>{let[,n]=t;return!(0,o.b)(n)})).map((t=>{let[n,e]=t;return"".concat(n,"=").concat(e)})),i=t.includes("?");return"".concat(t).concat(i?"&":"?").concat(a.join("&"))})(t,n):t,x=t=>(n,e)=>{const{abTestName:o,abTestVariant:r,componentType:c,products:s=[],labels:u=[],campaignCode:l}=n,p=o&&r?{name:o,variant:r}:null,d=n.targetingAbTest?{name:n.targetingAbTest.testName,variant:n.targetingAbTest.variantName}:null;return i(a({component:{componentType:c,products:s,campaignCode:l,id:e,labels:u}},p?{abTest:p}:{},d?{targetingAbTest:d}:{}),{action:t})},v=(t,n)=>t.labels?i(a({},t),{labels:[...t.labels,n]}):i(a({},t),{labels:[n]}),T=x("CLICK"),O=x("VIEW"),j=x("INSERT")}}]);
//# sourceMappingURL=1262.client.web.f39d91e1d9c0b2b066a7.js.map