{"version":3,"file":"2599.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/transmit.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/visibility.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/vendor/adBlockDetectionLib.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/adblock-detection.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/core.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/components.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/attention.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/privatebrowsing.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/heatmap.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/click-path-capture.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/perf.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/iframe-tracking.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+ophan-tracker-js@2.2.5/node_modules/@guardian/ophan-tracker-js/NPM-dist/ng.js"],"sourcesContent":["const ophanRemoteHost = window?.ophanRemoteHost || 'https://ophan.theguardian.com';\n/**\n * Generates a unique page view ID.\n * @returns {string}\n */\nconst generatePageViewId = () => {\n    return `${new Date().getTime().toString(36)}${'xxxxxxxxxxxx'.replace(/x/g, () => Math.floor(Math.random() * 36).toString(36))}`;\n};\n// Guardian Frontend Project pre-generates the pageViewId\nlet viewId;\nif (typeof guardian !== 'undefined') {\n    viewId = guardian.config?.ophan?.pageViewId ?? generatePageViewId();\n}\nelse {\n    viewId = generatePageViewId();\n}\nconst bumpViewId = () => {\n    viewId = generatePageViewId();\n};\n/**\n * Sends the initial event associated with this page view.\n * @param {Record<string, any>} obj - The data to be sent.\n */\nconst sendInitial = (obj) => {\n    send(`${ophanRemoteHost}/img/1?${buildQueryString(obj)}`);\n};\n/**\n * Encodes a value for URL transmission.\n * @param {string | number} value - The value to encode.\n * @returns {string} The encoded value.\n */\nconst smartEncode = (value) => {\n    if (typeof value === 'string' || typeof value === 'number') {\n        return encodeURIComponent(value);\n    }\n    else {\n        return encodeURIComponent(JSON.stringify(value));\n    }\n};\n/**\n * Used for sending additional events after the initial PageView event.\n * @param {EventPayload} obj - The data object to be sent.\n * @param {Function} [f] - An optional callback function.\n */\nconst sendMore = (obj, f) => {\n    if (!JSON)\n        return;\n    const values = [];\n    for (const prop in obj) {\n        // @ts-ignore\n        if (obj.hasOwnProperty(prop) && isDefined(obj[prop])) {\n            // @ts-ignore\n            values.push(`${encodeURIComponent(prop)}=${smartEncode(obj[prop])}`);\n        }\n    }\n    if (values.length === 0) {\n        return;\n    }\n    const url = `${ophanRemoteHost}/img/2?viewId=${viewId}&${values.join('&')}`;\n    send(url, f);\n};\n/**\n * Checks if a value is defined and not null.\n * @param {*} v - The value to check.\n * @returns {boolean} True if the value is defined, false otherwise.\n */\nconst isDefined = (v) => {\n    if (Array.isArray(v)) {\n        return !!v.length;\n    }\n    else {\n        return v != null;\n    }\n};\n/**\n * Builds a query string from an object.\n * @param {Record<string, any>} obj - The object to convert to a query string.\n * @returns {string} The resulting query string.\n */\nconst buildQueryString = (obj) => {\n    obj.viewId = viewId;\n    const values = [];\n    for (const prop in obj) {\n        if (obj.hasOwnProperty(prop) && obj[prop] != null) {\n            values.push(`${encodeURIComponent(prop)}=${encodeURIComponent(obj[prop])}`);\n        }\n    }\n    return values.join('&');\n};\n/**\n * Sends data to a specified URL.\n * @param {string} url - The URL to send data to.\n * @param {() => void} [f] - An optional callback function.\n */\nconst send = (url, f) => {\n    if (typeof fetch === 'function') {\n        fetch(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            keepalive: true,\n            credentials: 'include',\n        }).then(() => f?.());\n    }\n    else {\n        const image = new Image();\n        const checker = setInterval(() => {\n            if (image.complete) {\n                if (typeof f === 'function') {\n                    f();\n                }\n                clearInterval(checker);\n            }\n        }, 10);\n        image.src = url;\n    }\n};\nexport default {\n    sendInitial,\n    sendMore,\n    viewId,\n    bumpViewId,\n};\n/**\n * Exports for testing purposes.\n */\nexport const _testExports = {\n    generatePageViewId,\n    smartEncode,\n    isDefined,\n    buildQueryString,\n};\n","export default {\n    state: () => document.visibilityState ||\n        document.webkitVisibilityState ||\n        document.mozVisibilityState ||\n        document.msVisibilityState,\n    changeEvent: getChangeEvent(),\n};\nfunction getChangeEvent() {\n    if (document.visibilityState) {\n        return 'visibilitychange';\n    }\n    else if (document.webkitVisibilityState) {\n        return 'webkitvisibilitychange';\n    }\n    else if (document.mozVisibilityState) {\n        return 'mozvisibilitychange';\n    }\n    else if (document.msVisibilityState) {\n        return 'msvisibilitychange';\n    }\n    return undefined;\n}\n","// Generated by CoffeeScript 2.7.0\n// TLDR; This is stripped down from the IAB ad block detection library.\n// https://github.com/InteractiveAdvertisingBureau/AdBlockDetection\n// The aforementioned library is not well maintained\n// and had work in progress network adblocking detection\nvar init = function () {\n    var ofs = 'offset', cl = 'client';\n    var noop = function () { };\n    var testedOnce = false;\n    var testExecuting = false;\n    var isOldIEevents = window.addEventListener === undefined;\n    /**\n     * Options set with default options initialized\n     *\n     */\n    var _options = {\n        loopDelay: 50,\n        maxLoop: 5,\n        debug: false,\n        found: noop,\n        notfound: noop,\n        complete: noop,\n    };\n    var listeners = []; // event response listeners\n    var baitNode = null;\n    var quickBait = {\n        cssClass: 'ad-slot pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links',\n    };\n    var baitTriggers = {\n        nullProps: [ofs + 'Parent'],\n        zeroProps: [],\n    };\n    baitTriggers.zeroProps = [\n        ofs + 'Height',\n        ofs + 'Left',\n        ofs + 'Top',\n        ofs + 'Width',\n        ofs + 'Height',\n        cl + 'Height',\n        cl + 'Width',\n    ];\n    // result object\n    var exeResult = {\n        quick: null,\n        remote: null,\n    };\n    var findResult = null; // result of test for ad blocker\n    var timerIds = {\n        test: 0,\n        download: 0,\n    };\n    function isFunc(fn) {\n        return typeof fn == 'function';\n    }\n    /**\n     * Make a DOM element\n     */\n    function makeEl(tag, attributes) {\n        var k, v, el, attr = attributes;\n        var d = document;\n        el = d.createElement(tag);\n        if (attr) {\n            for (k in attr) {\n                if (attr.hasOwnProperty(k)) {\n                    el.setAttribute(k, attr[k]);\n                }\n            }\n        }\n        return el;\n    }\n    function attachEventListener(dom, eventName, handler) {\n        if (isOldIEevents) {\n            dom.attachEvent('on' + eventName, handler);\n        }\n        else {\n            dom.addEventListener(eventName, handler, false);\n        }\n    }\n    function log(message, isError) {\n        if (!_options.debug && !isError) {\n            return;\n        }\n        if (window.console && window.console.log) {\n            if (isError) {\n                console.error('[ABD] ' + message);\n            }\n            else {\n                console.log('[ABD] ' + message);\n            }\n        }\n    }\n    function beginTest(bait) {\n        log('start beginTest');\n        if (findResult == true) {\n            return;\n        }\n        testExecuting = true;\n        castBait(bait);\n        exeResult.quick = 'testing';\n        timerIds.test = setTimeout(function () {\n            reelIn(bait, 1);\n        }, 5);\n    }\n    /**\n     * Create the bait node to see how the browser page reacts\n     */\n    function castBait(bait) {\n        var i, d = document, b = d.body;\n        var t;\n        var baitStyle = 'width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;';\n        if (bait == null || typeof bait == 'string') {\n            log('invalid bait being cast');\n            return;\n        }\n        if (bait.style != null) {\n            baitStyle += bait.style;\n        }\n        baitNode = makeEl('div', {\n            class: bait.cssClass,\n            style: baitStyle,\n        });\n        log('adding bait node to DOM');\n        b.appendChild(baitNode);\n        // touch these properties\n        for (i = 0; i < baitTriggers.nullProps.length; i++) {\n            t = baitNode[baitTriggers.nullProps[i]];\n        }\n        for (i = 0; i < baitTriggers.zeroProps.length; i++) {\n            t = baitNode[baitTriggers.zeroProps[i]];\n        }\n    }\n    /**\n     * Run tests to see if browser has taken the bait and blocked the bait element\n     */\n    function reelIn(bait, attemptNum) {\n        var i, k, v;\n        var body = document.body;\n        var found = false;\n        if (baitNode == null) {\n            log('recast bait');\n            castBait(bait || quickBait);\n        }\n        if (typeof bait == 'string') {\n            log('invalid bait used', true);\n            if (clearBaitNode()) {\n                setTimeout(function () {\n                    testExecuting = false;\n                }, 5);\n            }\n            return;\n        }\n        if (timerIds.test > 0) {\n            clearTimeout(timerIds.test);\n            timerIds.test = 0;\n        }\n        // test for issues\n        if (body.getAttribute('abp') !== null) {\n            log('found adblock body attribute');\n            found = true;\n        }\n        for (i = 0; i < baitTriggers.nullProps.length; i++) {\n            if (baitNode[baitTriggers.nullProps[i]] == null) {\n                if (attemptNum > 4)\n                    found = true;\n                log('found adblock null attr: ' + baitTriggers.nullProps[i]);\n                break;\n            }\n            if (found == true) {\n                break;\n            }\n        }\n        for (i = 0; i < baitTriggers.zeroProps.length; i++) {\n            if (found == true) {\n                break;\n            }\n            if (baitNode[baitTriggers.zeroProps[i]] == 0) {\n                if (attemptNum > 4)\n                    found = true;\n                log('found adblock zero attr: ' + baitTriggers.zeroProps[i]);\n            }\n        }\n        if (window.getComputedStyle !== undefined) {\n            var baitTemp = window.getComputedStyle(baitNode, null);\n            if (baitTemp.getPropertyValue('display') == 'none' ||\n                baitTemp.getPropertyValue('visibility') == 'hidden') {\n                if (attemptNum > 4)\n                    found = true;\n                log('found adblock computedStyle indicator');\n            }\n        }\n        testedOnce = true;\n        if (found || attemptNum++ >= _options.maxLoop) {\n            findResult = found;\n            log('exiting test loop - value: ' + findResult);\n            notifyListeners();\n            if (clearBaitNode()) {\n                setTimeout(function () {\n                    testExecuting = false;\n                }, 5);\n            }\n        }\n        else {\n            timerIds.test = setTimeout(function () {\n                reelIn(bait, attemptNum);\n            }, _options.loopDelay);\n        }\n    }\n    function clearBaitNode() {\n        if (baitNode === null) {\n            return true;\n        }\n        try {\n            if (isFunc(baitNode.remove)) {\n                baitNode.remove();\n            }\n            document.body.removeChild(baitNode);\n        }\n        catch (ex) { }\n        baitNode = null;\n        return true;\n    }\n    /**\n     * Halt the test and any pending timeouts\n     */\n    function stopFishing() {\n        if (timerIds.test > 0) {\n            clearTimeout(timerIds.test);\n        }\n        if (timerIds.download > 0) {\n            clearTimeout(timerIds.download);\n        }\n        clearBaitNode();\n    }\n    /**\n     * Fire all registered listeners\n     */\n    function notifyListeners() {\n        var i, funcs;\n        if (findResult === null) {\n            return;\n        }\n        for (i = 0; i < listeners.length; i++) {\n            funcs = listeners[i];\n            try {\n                if (funcs != null) {\n                    if (isFunc(funcs['complete'])) {\n                        funcs['complete'](findResult);\n                    }\n                    if (findResult && isFunc(funcs['found'])) {\n                        funcs['found']();\n                    }\n                    else if (findResult === false && isFunc(funcs['notfound'])) {\n                        funcs['notfound']();\n                    }\n                }\n            }\n            catch (ex) {\n                log('Failure in notify listeners ' + ex.Message, true);\n            }\n        }\n    }\n    /**\n     * Attaches event listener or fires if events have already passed.\n     */\n    function attachOrFire() {\n        var fireNow = false;\n        var fn;\n        if (document.readyState) {\n            if (document.readyState == 'complete') {\n                fireNow = true;\n            }\n        }\n        fn = function () {\n            beginTest(quickBait, false);\n        };\n        if (fireNow) {\n            fn();\n        }\n        else {\n            attachEventListener(window, 'load', fn);\n        }\n    }\n    /**\n     * Public interface of adblock detector\n     */\n    return function (options) {\n        var k, v, funcs;\n        if (!options) {\n            return;\n        }\n        funcs = {\n            complete: noop,\n            found: noop,\n            notfound: noop,\n        };\n        for (k in options) {\n            if (options.hasOwnProperty(k)) {\n                if (k == 'complete' || k == 'found' || k == 'notFound') {\n                    funcs[k.toLowerCase()] = options[k];\n                }\n                else {\n                    _options[k] = options[k];\n                }\n            }\n        }\n        listeners.push(funcs);\n        attachOrFire();\n    };\n};\nexport default {\n    init: init(),\n};\n","import abd from './vendor/adBlockDetectionLib.js';\nexport default {\n    run() {\n        return new Promise((resolve, reject) => {\n            if (abd.init) {\n                try {\n                    abd.init({\n                        complete: resolve,\n                    });\n                }\n                catch (error) {\n                    reject(error);\n                }\n            }\n            else {\n                reject(new Error('Failed to initialise adblock detection'));\n            }\n        });\n    },\n};\n","let init, sendInitialEvent, storeDataToSendOnNextEvent, hasProp = {}.hasOwnProperty;\nimport transmit from './transmit.js';\nimport visibility from './visibility.js';\nimport adblockDetection from './adblock-detection.js';\nconst VERSION = 17;\nlet doc = window.document;\nconst canStoreEventsInLocalStorage = window.localStorage != null && typeof JSON !== 'undefined' && JSON !== null;\nlet platform = null;\nconst MaximumComponentNameLength = 50;\ninit = function (servingPlatform, httpStatus) {\n    platform = servingPlatform;\n    if (visibility.state() !== 'prerender') {\n        return sendInitialEvent(httpStatus);\n    }\n    else {\n        if (visibility.changeEvent) {\n            return doc.addEventListener(visibility.changeEvent, function () {\n                if (visibility.state() === 'visible') {\n                    return sendInitialEvent(httpStatus);\n                }\n            }, false);\n        }\n    }\n};\n/**\n * Retrieves the value of a specified query parameter from the current page's URL.\n * Using an old-fashioned way of finding a query param rather than using searchParams\n * as we don't control which environments the CDN distribution is being used in and so don't know if it's supported.\n * @param {string} paramName - The name of the query parameter to retrieve.\n * @returns {string | undefined} The value of the query parameter, or undefined if not found.\n */\nconst getQueryParameterValue = (paramName) => {\n    const queryString = window.location.search.substring(1);\n    const queryParams = queryString.split('&');\n    for (const param of queryParams) {\n        const [key, value] = param.split('=');\n        if (key === paramName) {\n            return decodeURIComponent(value);\n        }\n    }\n};\n/**\n * Retrieves the referrer URL from the given referrer or a fallback query parameter.\n * If an authentication flow takes place on page load, the referrer is lost.\n * So, if no referrer, fall back to query param holding the value of the referrer before the auth flow began.\n * See https://github.com/guardian/support-frontend/blob/main/support-frontend/app/controllers/AuthCodeFlowController.scala#L105\n * for an example use. * @param {string} referrer - The document referrer.\n * @param {string} referrer - The document referrer.\n * @returns {string} The referrer URL or the fallback query parameter value.\n */\nconst getReferrer = (referrer) => {\n    return referrer || getQueryParameterValue('pre-auth-ref') || '';\n};\n/**\n * Retrieves the type of navigation that occurred to arrive at the current page, using the Performance API.\n * Returns null if the navigation type is not available.\n * @returns {string | null} The navigation type (e.g., 'navigate', 'reload', 'back_forward'), or null if not available.\n */\nconst getNavigationType = () => {\n    if (window.performance?.getEntriesByType) {\n        const entries = window.performance.getEntriesByType('navigation');\n        if (entries.length > 0) {\n            return entries[0].type;\n        }\n    }\n    return null;\n};\nsendInitialEvent = function (httpStatus, url = location.href, referrer = window.document.referrer) {\n    const navigationType = getNavigationType();\n    // send initial event\n    const event = {\n        v: VERSION,\n        platform: platform,\n        url: url,\n        ref: getReferrer(referrer),\n        visibilityState: visibility.state(),\n        isModernBrowser: typeof guardian !== 'undefined' && guardian !== null\n            ? guardian.isModernBrowser\n            : void 0,\n        httpStatus: httpStatus,\n        tz: new Date().getTimezoneOffset(),\n    };\n    if (navigationType != null) {\n        // Add navigation type as metadata to the event if it's not null\n        event.navigationType = navigationType;\n    }\n    appendContentType(event);\n    appendDataFromLocalStorageToEvent(event);\n    transmit.sendInitial(event);\n    return adblockDetection.run().then(function (adBlockerEnabled) {\n        // `adUnitWasHidden` is the query param used\n        // by the previous adblock detection, hence reusing it here.\n        return transmit.sendMore({\n            adUnitWasHidden: adBlockerEnabled,\n        });\n    });\n};\nconst onLoadCaptures = [];\n/**\n * Registers a data capture function to be called when the document is fully loaded.\n * The result of this function is then sent to the tracker backend service.\n * If the document is already loaded, this is done immediately.\n *\n * @param {() => Record<string, unknown>} dataCapture - A function that returns an object containing performance metrics such as page load time, network latency, etc.\n * Refer to the `perf.js` file where this function is used for more info.\n */\nconst onLoadCapture = (dataCapture) => {\n    if (document.readyState === 'complete') {\n        const msg = { ...dataCapture() };\n        transmit.sendMore(msg);\n    }\n    else {\n        onLoadCaptures.push(dataCapture);\n    }\n};\n/**\n * Processes all registered data capture functions, merges their outputs and sends it to the tracker backend service.\n * If on a 'next-gen' platform, additional component data is appended to the event via the `appendComponentDataToEvent` function.\n */\nconst processCaptures = () => {\n    const msg = {};\n    for (const capture of onLoadCaptures) {\n        const captureData = capture();\n        for (const key in captureData) {\n            if (captureData.hasOwnProperty(key)) {\n                msg[key] = captureData[key];\n            }\n        }\n    }\n    if (platform === 'next-gen') {\n        appendComponentDataToEvent(msg);\n    }\n    transmit.sendMore(msg);\n};\nwindow.addEventListener?.('load', processCaptures, false);\n/**\n * Appends data from local storage to a given event object.\n * Specifically targets data stored under the 'ophan_follow' key in localStorage.\n * After appending the data to the event, it removes the data from localStorage.\n * @param {Record<string, unknown>} event - The event object to which the local storage data will be appended.\n */\nconst appendDataFromLocalStorageToEvent = (event) => {\n    if (canStoreEventsInLocalStorage) {\n        const localStorageItems = JSON.parse(window.localStorage.getItem('ophan_follow'));\n        if (localStorageItems != null) {\n            for (const key in localStorageItems) {\n                if (localStorageItems.hasOwnProperty(key)) {\n                    event[key] = localStorageItems[key];\n                }\n            }\n        }\n        window.localStorage.removeItem('ophan_follow');\n    }\n};\n/**\n * Trims component names to a maximum length to ensure they are URL safe.\n * If a component name exceeds the maximum length, it is truncated and appended with an ellipsis.\n * @param {string[]} componentNames - An array of component names.\n * @returns {string[]} An array of trimmed component names.\n */\nconst trimComponentNamesToUrlSafeLength = (componentNames) => {\n    return componentNames.map((componentName) => componentName.length > MaximumComponentNameLength\n        ? componentName.substring(0, MaximumComponentNameLength).concat('…')\n        : componentName);\n};\n/**\n * Appends data about rendered components to an event object.\n * Extracts component names from elements with a 'data-component' attribute, trims them for URL safety, ensures uniqueness, and adds them to the event.\n * @param {Object} event - The event object to which component data will be appended.\n */\nconst appendComponentDataToEvent = (event) => {\n    const componentElements = document.querySelectorAll('[data-component]');\n    const componentNames = Array.prototype.slice.call(componentElements).map((el) => el.getAttribute('data-component'));\n    if (componentNames.length > 0) {\n        const trimmedComponentNames = trimComponentNamesToUrlSafeLength(componentNames);\n        // uniquify\n        const uniqueComponents = new Set(trimmedComponentNames);\n        event.renderedComponents = [...uniqueComponents];\n    }\n};\nstoreDataToSendOnNextEvent = function (newData) {\n    let existingData, key, value;\n    if (canStoreEventsInLocalStorage) {\n        existingData =\n            JSON.parse(window.localStorage.getItem('ophan_follow')) || {};\n        for (key in newData) {\n            if (!hasProp.call(newData, key))\n                continue;\n            value = newData[key];\n            existingData[key] = value;\n        }\n        return window.localStorage.setItem('ophan_follow', JSON.stringify(existingData));\n    }\n};\n/**\n * Determines the 'content type' based on the platform and guardian object.\n * @param {Record<string, unknown>} event - The event object that will be updated with contentType.\n * @param {string} platform - The current platform ('next-gen', 'embed' or other).\n * @param {Record<string, unknown>} guardian - The guardian object.\n */\nconst appendContentType = (event, platform, guardian) => {\n    const contentType = platform === 'next-gen' || platform === 'embed'\n        ? guardian?.config?.page?.contentType\n        : guardian?.page?.contentTypes;\n    if (contentType) {\n        event.contentType = contentType.toLowerCase();\n    }\n};\nexport default {\n    init: init,\n    storeDataToSendOnNextEvent: storeDataToSendOnNextEvent,\n    onLoadCapture: onLoadCapture,\n    servingPlatform: function () {\n        return platform;\n    },\n    viewId: transmit.viewId,\n    sendInitialEvent: sendInitialEvent,\n};\n/**\n * Exports for testing purposes.\n */\nexport const _testExports = {\n    appendComponentDataToEvent,\n    trimComponentNamesToUrlSafeLength,\n    getQueryParameterValue,\n    onLoadCaptures,\n    onLoadCapture,\n    processCaptures,\n    appendContentType,\n};\n","/**\n * @type {Component[]}\n */\nexport const components = [];\n/**\n * theguardian.com uses a custom scroll event for performance reasons.\n * We pass in the event emitter so that we can listen to this custom scroll event.\n * If not on theguardian.com, we default to the native scroll event\n * @type {Object|null}\n */\nlet eventEmitter = null;\n// Tracks attention time of elements on the page with data-component attributes.\n// This should always be less than or equal to the page attention time.\n// If the page does not have attention, no component has attention.\n// If the page does have attention, a given component *may* also have\n// attention, if it is within the viewport and not hidden.\nclass Component {\n    /**\n     * Component constructor.\n     * @param {string} name - The name of the component.\n     * @param {HTMLElement} element - The DOM element of the component.\n     * @param {number} visibilityThreshold1 -\n     *    visibilityThreshold represents the fraction of each component that must\n     *    be in the viewport before it is considered visible.\n     *    e.g. 0.5 means that half the height or width must be in the viewport\n     *    1 means that the entire element must be in the viewport\n     * @param {number} reportingInterval1 - ??\n     */\n    constructor(name, element, visibilityThreshold1, reportingInterval1) {\n        this.name = name;\n        this.element = element;\n        this.visibilityThreshold = visibilityThreshold1;\n        this.reportingInterval = reportingInterval1;\n        this.visible = false;\n        // total attention time so far for this element\n        this.totalAttentionMs = 0;\n        // the time elapsed since the time origin (https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#the_time_origin)\n        // when the most recent period of attention (that is, attention\n        // which we haven't yet added to totalAttentionMs) began.\n        // null if we don't have attention.\n        this.unrecordedAttentionStarted = null;\n        // the attention time when getAttentionTime() was last called\n        this.reportedTotalAttentionMs = 0;\n        this.usingEmitter = false;\n        this.visCheck = this.checkVisibility.bind(this);\n        if (eventEmitter != null) {\n            this.usingEmitter = true;\n            eventEmitter.on('window:throttledScroll', this.visCheck);\n        }\n        else {\n            window.addEventListener('scroll', this.visCheck);\n        }\n        window.addEventListener('resize', this.visCheck);\n    }\n    isVisible(threshold = 1) {\n        if (!this.element.offsetParent) {\n            // exclude hidden elements\n            // will also exclude position: fixed elements but we don't care about these\n            // (because their attention time would always be the same as the whole page)\n            // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n            return false;\n        }\n        const box = this.element.getBoundingClientRect();\n        const width = box.width;\n        const height = box.height;\n        const windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        const windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        return (box.left >= -(width * (1 - threshold)) &&\n            box.top >= -(height * (1 - threshold)) &&\n            box.right <= windowWidth + width * (1 - threshold) &&\n            box.bottom <= windowHeight + height * (1 - threshold));\n    }\n    visibilityHasChanged() {\n        const wasVisible = this.visible;\n        this.visible = this.isVisible(this.visibilityThreshold);\n        return wasVisible !== this.visible;\n    }\n    rebindToEventEmitter() {\n        if (!this.usingEmitter && eventEmitter != null) {\n            window.removeEventListener('scroll', this.visCheck);\n            this.usingEmitter = true;\n            return eventEmitter.on('window:throttledScroll', this.visCheck);\n        }\n    }\n    checkVisibility() {\n        this.rebindToEventEmitter();\n        if (this.visibilityHasChanged()) {\n            return this.visible ? this.makeActive() : this.makeInactive();\n        }\n    }\n    makeActive() {\n        // mark when the latest period of attention began,\n        // if we're not already in an attention period\n        return this.unrecordedAttentionStarted != null\n            ? this.unrecordedAttentionStarted\n            : (this.unrecordedAttentionStarted = performance.now());\n    }\n    makeInactive() {\n        this.incrementTotalAttentionTimeByUnrecordedAmount();\n        return (this.unrecordedAttentionStarted = null);\n    }\n    hadAttentionSinceLastGet() {\n        this.incrementTotalAttentionTimeByUnrecordedAmount();\n        return this.totalAttentionMs !== this.reportedTotalAttentionMs;\n    }\n    getAttentionTime() {\n        this.incrementTotalAttentionTimeByUnrecordedAmount();\n        this.reportedTotalAttentionMs = this.totalAttentionMs;\n        return this.totalAttentionMs;\n    }\n    incrementTotalAttentionTimeByUnrecordedAmount() {\n        if (this.unrecordedAttentionStarted != null) {\n            const now = performance.now();\n            // the Math.min here is to deal with occasions where we don't get an event indicating that the user\n            // has become inactive - this can happen e.g. due to users suspending their phone. Never send\n            // crazy big values!\n            const unrecordedMs = Math.min(now - this.unrecordedAttentionStarted, this.reportingInterval);\n            this.totalAttentionMs += unrecordedMs;\n            return (this.unrecordedAttentionStarted = now);\n        }\n    }\n}\n/**\n * Begins monitoring the components on the page for attention time.\n * @returns {Array} Array of results from makeActive() for each visible component.\n */\nconst startMonitoring = () => {\n    return components\n        .filter((component) => component.isVisible())\n        .map((component) => component.makeActive());\n};\n/**\n * Stops monitoring the components on the page for attention time.\n * @returns {Array} Array of results from makeInactive() for each component.\n */\nconst stopMonitoring = () => {\n    return components.map((component) => component.makeInactive());\n};\n/**\n * Retrieves the attention times for all components.\n * @returns {Object}\n */\nconst getAttentionTimes = () => {\n    const obj = {};\n    for (const component of components) {\n        if (component.hadAttentionSinceLastGet()) {\n            // if there are duplicate component names, only the last one survives\n            obj[component.name] = Math.round(component.getAttentionTime());\n        }\n    }\n    return obj;\n};\nexport default {\n    /**\n     * @param {Object} emitter - The event emitter to set.\n     * @returns {Object}\n     */\n    setEventEmitter: function (emitter) {\n        return (eventEmitter = emitter);\n    },\n    startMonitoring,\n    stopMonitoring,\n    getAttentionTimes,\n    /** @type {(...args: ConstructorParameters<typeof Component>) => void} */\n    registerComponent: function (name, el, visibilityThreshold, reportingInterval) {\n        return components.push(new Component(name, el, visibilityThreshold, reportingInterval));\n    },\n};\n","// Generated by CoffeeScript 2.7.0\nimport transmit from './transmit.js';\nimport components from './components.js';\n// The upworthy definition of attention minutes, from\n// http://upworthy.github.io/2014/06/implementing-attention-minutes-part-1/ :\n// \"We consider the page to have the user’s attention if\n//  1. some activity is happening on the page. For our purposes this means:\n//     1. the page currently has focus\n//     2. and the user has interacted with the page within a certain timeout\n//  2. or a video is playing on the page\n//  Attention Minutes, then, are the total number of minutes that a user has spent on\n//  a page where the above conditions have held true.\"\n// our definition of \"within a certain timeout\" above:\nconst ATTENTIONDECAY = 5000;\n// our definition of \"the user has interacted with the page\"\nconst EVENTS = [\n    'focus',\n    'click',\n    'scroll',\n    'mousemove',\n    'touchstart',\n    'touchend',\n    'touchcancel',\n    'touchleave',\n    'touchmove',\n    'keyup',\n    'keydown',\n];\nconst REPORTINGINTERVAL = 10000;\n// total attention time so far on this page\nlet totalAttentionMs = 0;\n// the time elapsed since the time origin (https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#the_time_origin)\n// when the most recent period of attention (that is, attention\n// which we haven't yet added to totalAttentionMs) began.\n// null if we don't have attention.\nlet unrecordedAttentionStarted = null;\n// the attention time we last reported to ophan\nlet reportedTotalAttentionMs = null; // setting null here forces a first report of attention time, even if it's only 0ms\n// the decay timer if we've set one\nlet decayTimerId = null;\n// is video currently playing?\nlet videoPlaying = false;\nconst cancelDecayTimer = () => {\n    if (decayTimerId != null) {\n        window.clearTimeout(decayTimerId);\n    }\n    decayTimerId = null;\n};\nconst makeActive = () => {\n    if (unrecordedAttentionStarted == null) {\n        unrecordedAttentionStarted = performance.now();\n    }\n    components.startMonitoring();\n    cancelDecayTimer();\n    decayTimerId = window.setTimeout(() => {\n        if (!videoPlaying) {\n            makeInactive();\n        }\n    }, ATTENTIONDECAY);\n};\nconst incrementTotalAttentionTimeByUnrecordedAmount = () => {\n    if (unrecordedAttentionStarted != null) {\n        const now = performance.now();\n        const unrecordedMs = Math.min(now - unrecordedAttentionStarted, REPORTINGINTERVAL);\n        totalAttentionMs += unrecordedMs;\n        unrecordedAttentionStarted = now;\n    }\n};\nconst makeInactive = () => {\n    cancelDecayTimer();\n    components.stopMonitoring();\n    incrementTotalAttentionTimeByUnrecordedAmount();\n    unrecordedAttentionStarted = null;\n};\nconst reporter = () => {\n    incrementTotalAttentionTimeByUnrecordedAmount();\n    if (totalAttentionMs !== reportedTotalAttentionMs) {\n        const report = {\n            attentionMs: Math.round(totalAttentionMs),\n        };\n        const componentAttentionTimes = components.getAttentionTimes();\n        if (Object.keys(componentAttentionTimes).length) {\n            report.componentAttentionMs = componentAttentionTimes;\n        }\n        transmit.sendMore(report);\n        reportedTotalAttentionMs = totalAttentionMs;\n    }\n};\nconst initComponent = (name, el, visibilityThreshold = 0.5) => {\n    components.registerComponent(name, el, visibilityThreshold, REPORTINGINTERVAL);\n};\nconst initAttention = (visibility) => {\n    EVENTS.forEach((event) => {\n        window.addEventListener(event, makeActive);\n    });\n    document.addEventListener(visibility.changeEvent, () => {\n        if (visibility.state() === 'visible') {\n            makeActive();\n        }\n        else {\n            makeInactive();\n        }\n    }, false);\n    document.addEventListener('videoPlaying', () => {\n        videoPlaying = true;\n        makeActive();\n    });\n    document.addEventListener('videoEnded', () => {\n        videoPlaying = false;\n        makeInactive();\n    });\n    document.addEventListener('videoPause', () => {\n        videoPlaying = false;\n        makeInactive();\n    });\n    window.setTimeout(reporter, 100);\n    window.setInterval(reporter, REPORTINGINTERVAL);\n};\nconst setEventEmitter = (emitter) => {\n    components.setEventEmitter(emitter);\n};\nexport default {\n    init: initAttention,\n    initComponent: initComponent,\n    setEventEmitter: setEventEmitter,\n};\n","import transmit from './transmit.js';\n/*\n    TO-DO:\n    This function could probably be simplified with an async function.\n    It basically returns a `boolean`, but uses a callback to do so... I can only guess it’s because of [`requestFileSystem`’s signature](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestFileSystem).\n */\nconst privateBrowsingMode = (callback) => {\n    const reportNormalMode = () => callback(false);\n    const reportPrivateMode = () => callback(true);\n    const tryLocalStorage = () => {\n        try {\n            if (localStorage.length) {\n                reportNormalMode();\n            }\n            else {\n                localStorage.x = 1;\n                localStorage.removeItem('x');\n                reportNormalMode();\n            }\n        }\n        catch (error) {\n            reportPrivateMode();\n        }\n    };\n    const tryIndexedDB = () => {\n        try {\n            const db = indexedDB.open('test');\n            db.onsuccess = reportNormalMode;\n            db.onerror = reportPrivateMode;\n        }\n        catch (error) {\n            reportPrivateMode();\n        }\n    };\n    // Blink\n    if (window.webkitRequestFileSystem) {\n        window.webkitRequestFileSystem(window.TEMPORARY, 1, reportNormalMode, reportPrivateMode);\n        // Firefox\n    }\n    else if ('MozAppearance' in document.documentElement.style) {\n        tryIndexedDB();\n        // Safari\n    }\n    else if (/constructor/i.test(window.HTMLElement)) {\n        tryLocalStorage();\n    }\n    else if (!window.indexedDB &&\n        (window.PointerEvent || window.MSPointerEvent)) {\n        reportPrivateMode();\n    }\n    else {\n        // Rest\n        reportNormalMode();\n    }\n};\nexport default {\n    init() {\n        privateBrowsingMode((value) => {\n            const report = {\n                inPrivateBrowsingMode: value,\n            };\n            transmit.sendMore(report);\n        });\n    },\n    privateBrowsingMode,\n};\n","let heatmapFired = false;\nconst init = () => {\n    const addHeatmap = () => {\n        let heatmapParam;\n        if (typeof localStorage !== 'undefined' &&\n            localStorage !== null &&\n            !heatmapFired) {\n            heatmapFired = true;\n            heatmapParam = window.location.search.replace(/^(?:.*[&\\?]heatmap(?:\\=([^&]*))?)?.*$/, '$1');\n            if (heatmapParam === 'experimental') {\n                return (document.body.appendChild(document.createElement('script')).src = '//dashboard.ophan.co.uk/assets/js/react/heatphan/index.js');\n            }\n            if (heatmapParam === 'true' || heatmapParam === 'false') {\n                localStorage['ophan_heatmap'] = heatmapParam;\n            }\n            if (localStorage['ophan_heatmap'] === 'true' || heatmapParam === 'show') {\n                return (document.body.appendChild(document.createElement('script')).src = '//dashboard.ophan.co.uk/assets/js/heatmap-bookmarklet.js');\n            }\n        }\n    };\n    if (document.readyState === 'complete') {\n        return addHeatmap();\n    }\n    else {\n        return typeof window.addEventListener === 'function'\n            ? window.addEventListener('load', function () {\n                return addHeatmap();\n            }, false)\n            : void 0;\n    }\n};\nexport default {\n    init,\n};\n","import ophan from './core.js';\nimport transmit from './transmit.js';\n/**\n * Finds the closest ancestor anchor (`<a>`) element of the given element.\n *\n * @param {Element} el - The element to start searching from.\n * @returns {Element|null} The closest ancestor anchor element or null if none found.\n */\nexport const validAncestorAnchorElement = (el) => {\n    if (!el || el.nodeName?.toLowerCase() === 'body')\n        return null;\n    return el.nodeName.toLowerCase() === 'a'\n        ? el\n        : validAncestorAnchorElement(el.parentNode);\n};\n/**\n * Retrieves the value of the `data-component` attribute from the closest ancestor.\n *\n * @param {Element} el - The element to start searching from.\n * @returns {string|null} The `data-component` attribute value or null if not found.\n */\nexport const getContainingComponent = (el) => {\n    if (!el || el.nodeName?.toLowerCase() === 'body')\n        return null;\n    return (el.getAttribute('data-component') || getContainingComponent(el.parentNode));\n};\n/**\n * Collects all `data-link-name` attribute values from the ancestor elements.\n *\n * @param {Element} el - The element to start searching from.\n * @param {string[]} dataLinkNames - Initial array of data link names (optional).\n * @returns {string[]} Array of `data-link-name` values.\n */\nconst getDataLinkNames = (el, dataLinkNames = []) => {\n    if (!el || el === document.body || el === document)\n        return dataLinkNames;\n    const dataLinkName = el.getAttribute('data-link-name');\n    if (dataLinkName)\n        dataLinkNames.push(dataLinkName);\n    return getDataLinkNames(el.parentNode, dataLinkNames);\n};\nif (typeof document.addEventListener === 'function') {\n    document.addEventListener('click', function (e) {\n        let target = e.target;\n        let info;\n        // For anchors, use validAncestorAnchorElement\n        const anchorTarget = validAncestorAnchorElement(target);\n        const nonTrackableElements = [\n            'div',\n            'span',\n            'p',\n            'section',\n            'article',\n            'main',\n            'header',\n            'footer',\n            'nav',\n        ];\n        if (nonTrackableElements.includes(target.tagName.toLowerCase()) &&\n            !anchorTarget) {\n            return;\n        }\n        // If it's an anchor, use anchorTarget, otherwise use the original target\n        const trackingTarget = anchorTarget || target;\n        info = {\n            from: [location.protocol, '//', location.host, location.pathname].join(''),\n            to: trackingTarget.href || undefined,\n            referringComponent: getContainingComponent(trackingTarget),\n            referringDataLinkNames: getDataLinkNames(trackingTarget),\n            refPlatform: ophan.servingPlatform(),\n            refViewId: ophan.viewId,\n        };\n        if (info.referringDataLinkNames && info.referringDataLinkNames.length > 0) {\n            transmit.sendMore({\n                clickComponent: info.referringComponent,\n                clickLinkNames: info.referringDataLinkNames,\n            });\n        }\n        if (anchorTarget) {\n            // If it's an anchor, we may be about to navigate away from this page, so store to send on next request\n            return ophan.storeDataToSendOnNextEvent(info);\n        }\n    }, false);\n}\nexport default {\n    getDataLinkNames: getDataLinkNames,\n};\n","// Generated by CoffeeScript 2.7.0\nimport core from './core.js';\nconst perf = window.performance ||\n    window.msPerformance ||\n    window.webkitPerformance ||\n    window.mozPerformance;\nconst sendTimingData = () => {\n    const t = perf?.timing;\n    if (t) {\n        return {\n            performance: {\n                // Time required for domain lookup.\n                dns: t.domainLookupEnd - t.domainLookupStart,\n                // Time to establish a connection to server.\n                connection: t.connectEnd - t.connectStart,\n                // From connection established to first byte of data.\n                firstByte: t.responseStart - t.connectEnd,\n                // First byte to last byte, or closed, including if from cache.\n                lastByte: t.responseEnd - t.responseStart,\n                // From last byte of doc to start of domContentLoaded\n                domContentLoadedEvent: t.domContentLoadedEventStart - t.responseEnd,\n                // domcontentLoaded to start of load event.\n                loadEvent: t.loadEventStart - t.domContentLoadedEventStart,\n                // click, back/forward, etc...\n                navType: perf.navigation.type,\n                // No. of redirects on current domain.\n                redirectCount: perf.navigation.redirectCount,\n            },\n        };\n    }\n    else {\n        return {};\n    }\n};\ncore.onLoadCapture(sendTimingData);\nexport default perf;\n","import clickCapture from './click-path-capture.js';\nconst validIframeDomains = [\n    '.theguardian.com',\n    '.dev-theguardian.com',\n    '.thegulocal.com', // NB - leading dot is essential here to avoid matching on non-Guardian-owned domains\n];\n/**\n * Handles messages received from iframes, recording events as necessary.\n * @param {MessageEvent} messageEvent - The message event received from an iframe.\n */\nconst handleIframeMessage = (messageEvent) => {\n    const originDomain = retrieveOriginDomain(messageEvent.origin);\n    if (originDomain &&\n        validIframeDomains.some((domain) => originDomain.endsWith(domain))) {\n        if (messageEvent.data.type === 'ophan-iframe-click-event') {\n            const eventObject = messageEvent.data.value;\n            const iFrame = document.getElementById(messageEvent.data.iframeId);\n            recordIframeClickEvent(iFrame, eventObject);\n        }\n        else if (messageEvent.data.type === 'ophan-iframe-component-event') {\n            const eventObject = messageEvent.data.value;\n            recordIframeComponentEvent(eventObject);\n        }\n    }\n};\n/**\n * Retrieves the domain from an event's origin URL.\n * @param {string} eventOrigin - The origin URL of the event.\n * @returns {(string|null)} The domain of the origin URL or null if it cannot be parsed.\n */\nconst retrieveOriginDomain = (eventOrigin) => {\n    try {\n        const originURL = new URL(eventOrigin);\n        return originURL.host;\n    }\n    catch (error) {\n        if (error instanceof TypeError) {\n            // We failed to parse origin as an URL, we should ignore the event\n            return null;\n        }\n        else {\n            throw error;\n        }\n    }\n};\n/**\n * Records a click event occurring within an iframe.\n * @param {HTMLElement} iFrame - The iframe element where the click event occurred.\n * @param {Object} clickEvent - The click event object to record.\n */\nconst recordIframeClickEvent = (iFrame, clickEvent) => {\n    if (iFrame) {\n        clickEvent.clickLinkNames =\n            clickCapture.getDataLinkNames(iFrame, clickEvent.clickLinkNames) ||\n                clickEvent.clickLinkNames;\n    }\n    window.guardian.ophan.record(clickEvent);\n};\n/**\n * Validates if an event object is a valid component event.\n * @param {Object} eventObject - The event object to validate.\n * @returns {boolean} True if the event object is valid, false otherwise.\n */\nconst componentEventIsValid = (eventObject) => {\n    return (eventObject &&\n        typeof eventObject === 'object' &&\n        eventObject.componentEvent &&\n        typeof eventObject.componentEvent === 'object');\n};\n/**\n * Records a component event from an iframe.\n * @param {Object} eventObject - The component event object to record.\n */\nconst recordIframeComponentEvent = (eventObject) => {\n    if (!componentEventIsValid(eventObject)) {\n        return;\n    }\n    window.guardian.ophan.record(eventObject);\n};\nwindow.addEventListener('message', handleIframeMessage, false);\n","import core from './core.js';\nimport transmit from './transmit.js';\nimport attention from './attention.js';\nimport visibility from './visibility.js';\nimport privatebrowsing from './privatebrowsing.js';\nimport heatmap from './heatmap.js';\nimport './click-path-capture.js';\nimport './perf.js';\nimport './iframe-tracking.js';\nexport * from './types/abtest.js';\nexport * from './types/acquisition.js';\nexport * from './types/subscription.js';\nexport * from './types/interaction.js';\nexport * from './types/inpageclick.js';\nexport * from './types/printproduct.js';\nexport * from './types/product.js';\nexport * from './types/platform.js';\nexport * from './types/media.js';\nexport * from './types/consent.js';\nexport * from './types/component-type.js';\nexport * from './types/component-event.js';\nexport * from './types/event.js';\nlet ng;\nif (window.guardian && window.guardian.ophan) {\n    ng = window.guardian.ophan;\n}\nelse {\n    core.init('next-gen');\n    privatebrowsing.init();\n    heatmap.init();\n    if (window.addEventListener) {\n        attention.init(visibility);\n    }\n    if (!window.guardian) {\n        window.guardian = {};\n    }\n    window.guardian.ophan = {\n        setEventEmitter: attention.setEventEmitter,\n        trackComponentAttention: attention.initComponent,\n        record: transmit.sendMore,\n        viewId: transmit.viewId,\n        pageViewId: transmit.viewId,\n    };\n    ng = window.guardian.ophan;\n}\nexport default ng;\n"],"names":["ophanRemoteHost","window","generatePageViewId","Date","getTime","toString","replace","Math","floor","random","viewId","guardian","config","ophan","pageViewId","bumpViewId","sendInitial","obj","send","buildQueryString","smartEncode","value","encodeURIComponent","JSON","stringify","sendMore","f","values","prop","hasOwnProperty","isDefined","push","length","url","join","v","Array","isArray","fetch","method","mode","keepalive","credentials","then","image","Image","checker","setInterval","complete","clearInterval","src","_testExports","state","document","visibilityState","webkitVisibilityState","mozVisibilityState","msVisibilityState","changeEvent","getChangeEvent","undefined","init","ofs","cl","noop","testedOnce","testExecuting","isOldIEevents","addEventListener","_options","loopDelay","maxLoop","debug","found","notfound","listeners","baitNode","quickBait","cssClass","baitTriggers","nullProps","zeroProps","exeResult","quick","remote","findResult","timerIds","test","download","isFunc","fn","makeEl","tag","attributes","k","el","attr","d","createElement","setAttribute","attachEventListener","dom","eventName","handler","attachEvent","log","message","isError","console","error","beginTest","bait","castBait","setTimeout","reelIn","i","b","body","t","baitStyle","style","class","appendChild","attemptNum","clearBaitNode","clearTimeout","getAttribute","getComputedStyle","baitTemp","getPropertyValue","notifyListeners","remove","removeChild","ex","stopFishing","funcs","Message","attachOrFire","fireNow","readyState","options","toLowerCase","abd","run","Promise","resolve","reject","Error","sendInitialEvent","storeDataToSendOnNextEvent","hasProp","transmit","visibility","adblockDetection","VERSION","doc","canStoreEventsInLocalStorage","localStorage","platform","MaximumComponentNameLength","servingPlatform","httpStatus","getQueryParameterValue","paramName","queryString","location","search","substring","queryParams","split","param","key","decodeURIComponent","getReferrer","referrer","getNavigationType","performance","getEntriesByType","entries","type","href","navigationType","event","ref","isModernBrowser","tz","getTimezoneOffset","appendContentType","appendDataFromLocalStorageToEvent","adBlockerEnabled","adUnitWasHidden","onLoadCaptures","onLoadCapture","dataCapture","msg","processCaptures","capture","captureData","appendComponentDataToEvent","localStorageItems","parse","getItem","removeItem","trimComponentNamesToUrlSafeLength","componentNames","map","componentName","concat","componentElements","querySelectorAll","prototype","slice","call","trimmedComponentNames","uniqueComponents","Set","renderedComponents","newData","existingData","setItem","contentType","page","contentTypes","components","eventEmitter","Component","constructor","name","element","visibilityThreshold1","reportingInterval1","visibilityThreshold","reportingInterval","visible","totalAttentionMs","unrecordedAttentionStarted","reportedTotalAttentionMs","usingEmitter","visCheck","checkVisibility","bind","on","isVisible","threshold","offsetParent","box","getBoundingClientRect","width","height","windowHeight","innerHeight","documentElement","clientHeight","windowWidth","innerWidth","clientWidth","left","top","right","bottom","visibilityHasChanged","wasVisible","rebindToEventEmitter","removeEventListener","makeActive","makeInactive","now","incrementTotalAttentionTimeByUnrecordedAmount","hadAttentionSinceLastGet","getAttentionTime","unrecordedMs","min","startMonitoring","filter","component","stopMonitoring","getAttentionTimes","round","setEventEmitter","emitter","registerComponent","ATTENTIONDECAY","EVENTS","REPORTINGINTERVAL","decayTimerId","videoPlaying","cancelDecayTimer","reporter","report","attentionMs","componentAttentionTimes","Object","keys","componentAttentionMs","initComponent","initAttention","forEach","privateBrowsingMode","callback","reportNormalMode","reportPrivateMode","tryLocalStorage","x","tryIndexedDB","db","indexedDB","open","onsuccess","onerror","webkitRequestFileSystem","TEMPORARY","HTMLElement","PointerEvent","MSPointerEvent","inPrivateBrowsingMode","heatmapFired","addHeatmap","heatmapParam","validAncestorAnchorElement","nodeName","parentNode","getContainingComponent","getDataLinkNames","dataLinkNames","dataLinkName","e","target","info","anchorTarget","nonTrackableElements","includes","tagName","trackingTarget","from","protocol","host","pathname","to","referringComponent","referringDataLinkNames","refPlatform","refViewId","clickComponent","clickLinkNames","core","perf","msPerformance","webkitPerformance","mozPerformance","sendTimingData","timing","dns","domainLookupEnd","domainLookupStart","connection","connectEnd","connectStart","firstByte","responseStart","lastByte","responseEnd","domContentLoadedEvent","domContentLoadedEventStart","loadEvent","loadEventStart","navType","navigation","redirectCount","clickCapture","validIframeDomains","handleIframeMessage","messageEvent","originDomain","retrieveOriginDomain","origin","some","domain","endsWith","data","eventObject","iFrame","getElementById","iframeId","recordIframeClickEvent","recordIframeComponentEvent","eventOrigin","originURL","URL","TypeError","clickEvent","record","componentEventIsValid","componentEvent","attention","privatebrowsing","heatmap","ng","trackComponentAttention"],"sourceRoot":""}