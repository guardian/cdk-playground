"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[1714],{49818:(n,t,e)=>{e.d(t,{cy:()=>g,oA:()=>b});var r=e(50484),o=e(29995),c=e(67400),i=e(58452),s=e(79971),a=e(81412),l=e(61082);const u={contributions:"engagementBannerLastClosedAt",subscriptions:"subscriptionBannerLastClosedAt",signIn:"signInBannerLastClosedAt",abandonedBasket:"abandonedBasketLastClosedAt"};function d(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const p=n=>t=>{const[e,o]=(0,c.useState)(!0),i=()=>{var n,e;n=t.bannerChannel,e=u[n],l.I.local.set("gu.prefs.".concat(e),(new Date).toISOString()),o(!1),document.body.focus()};var s;return s=i,(0,c.useEffect)((()=>{function n(n){("Escape"===n.key||"Esc"===n.key)&&s(n)}return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)}),[s]),e?(0,r.jsx)(n,function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){d(n,t,e[t])}))}return n}({onClose:i},t)):(0,r.jsx)(r.Fragment,{})};function f(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function m(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){f(n,t,e[t])}))}return n}const g=(n,t)=>p(((n,t)=>e=>{const{tracking:l,submitComponentEvent:u,onClose:d,content:p,mobileContent:f,countryCode:g,prices:b,fetchEmail:h,articleCounts:C,tickerSettings:x,isSupporter:y,separateArticleCount:k,separateArticleCountSettings:j,choiceCardAmounts:w,design:v,bannerChannel:O,abandonedBasket:S}=e,[P,A]=(0,i.E)({debounce:!0,threshold:0});(0,c.useEffect)((()=>{P&&u&&u((0,a.t0)(l,l.campaignCode))}),[P,u,l]),(0,c.useEffect)((()=>{u&&u((0,a.rx)(l,l.campaignCode))}),[u,l]);const E=C.forTargetedWeeks,T=n=>n.map((n=>(0,s.k)(n,E,"banner"))),B=function(n){return{close:"".concat(n," : close"),cta:"".concat(n," : cta"),secondaryCta:"".concat(n," : secondary-cta"),notNow:"".concat(n," : not now"),signIn:"".concat(n," : sign in"),reminderCta:"".concat(n," : reminder-cta"),reminderSet:"".concat(n," : reminder-set"),reminderClose:"".concat(n," : reminder-close")}}(t),U=n=>{const t=n=>(0,a.Bl)(n.baseUrl)?{ctaUrl:(0,a.qU)(n.baseUrl,l),ctaText:n.text}:"abandonedBasket"===O&&S?{ctaUrl:(0,a.m1)(n.baseUrl,S,l),ctaText:n.text}:{ctaUrl:(0,a.QP)(n.baseUrl,l,E,g),ctaText:n.text},e=n.cta?t(n.cta):null,r=n.secondaryCta?(n=>n.type===o.bP.Custom?{type:o.bP.Custom,cta:t(n.cta)}:{type:o.bP.ContributionsReminder,reminderFields:(0,o.KK)(g)})(n.secondaryCta):null,c=n.highlightedText&&(0,o.BA)(n.highlightedText,g,b).trim(),i=(0,o.BA)(n.heading,g,b).trim(),u=((n,t)=>{const e=[];return null!=n?e.push(...n):null!=t&&e.push(t),e})(n.paragraphs,n.messageText).map((n=>(0,o.BA)(n,g,b).trim())),d=u.some((n=>(0,o.FT)(n)))||!!c&&(0,o.FT)(c)||!!i&&(0,o.FT)(i),p=i?(0,s.k)(i,E,"banner"):null,f=c?(0,s.k)(c,E,"banner"):null;if(d)throw Error("Banner copy contains placeholders, abandoning.");return{highlightedText:f,paragraphs:T(u),heading:p,primaryCta:e,secondaryCta:r}},I=(n,t)=>()=>{const e=(0,a.Mf)(l,n);u&&u(e),t&&d()},z=I(B.cta,!0),F=I(B.secondaryCta,!0),L=I(B.reminderCta,!1),_=I(B.reminderSet,!1),N=I(B.reminderClose,!1),R=I(B.close,!0),D=I(B.notNow,!0),J=I(B.signIn,!1);try{const t=p&&U(p),e=f&&U(f);if(t){const o={onCtaClick:z,onSecondaryCtaClick:F,reminderTracking:{onReminderCtaClick:L,onReminderSetClick:_,onReminderCloseClick:N},onCloseClick:R,onSignInClick:J,onNotNowClick:D,content:{mainContent:t,mobileContent:null!=e?e:t},countryCode:g,fetchEmail:h,tickerSettings:x,isSupporter:y,articleCounts:C,separateArticleCount:k,separateArticleCountSettings:j,choiceCardAmounts:w,tracking:l,submitComponentEvent:u,design:v};return(0,r.jsx)("div",{ref:A,children:(0,r.jsx)(n,m({},o))})}}catch(n){console.log(n)}return(0,r.jsx)(r.Fragment,{})})(n,t)),b=(n,t)=>e=>{if((n=>o.a.safeParse(n).success)(e)){const o=g(n,t);return(0,r.jsx)(o,m({},e))}return(0,r.jsx)(r.Fragment,{})}},91714:(n,t,e)=>{e.r(t),e.d(t,{SignInPromptBanner:()=>D,SignInPromptBannerUnvalidated:()=>R});var r=e(50484),o=e(24017),c=e(99354),i=e(46080),s=e(7351),a=e(96378),l=e(99923),u=e(86908),d=e(86085),p=e(14862),f=e(14302),m=e(68163),g=e(27123),b=e(24265),h=e(29995),C=e(49818);function x(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function y(){const n=x(["\n\tbackground-color: ",";\n\n\t::before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tbackground: rgb(0, 0, 0, 0.3);\n\t\tz-index: -1;\n\t}\n"]);return y=function(){return n},n}function k(){const n=x(["\n\tposition: relative;\n"]);return k=function(){return n},n}function j(){const n=x(["\n\tmargin-right: 10px;\n"]);return j=function(){return n},n}function w(){const n=x(["\n\t","\n\tfont-size: 32px;\n\tcolor: ",";\n\tmargin: ","px 0 0;\n\t"," {\n\t\tmargin: ","px 45px 0 0;\n\t}\n"]);return w=function(){return n},n}function v(){const n=x(["\n\t",";\n\tcolor: ",";\n\tmargin: ","px 0;\n"]);return v=function(){return n},n}function O(){const n=x(["\n\t",";\n\tcolor: ",";\n\tdisplay: flex;\n\tflex-direction: column;\n\n\tspan:not(:first-of-type) {\n\t\tmargin-top: 10px;\n\t}\n\n\tspan::before {\n\t\tcontent: '';\n\t\tdisplay: inline-block;\n\t\twidth: 15px;\n\t\theight: 15px;\n\t\tmargin-right: ","px;\n\t\tbackground: ",";\n\t\tborder-radius: 50%;\n\t}\n"]);return O=function(){return n},n}function S(){const n=x(["\n\tmargin: ","px 0;\n"]);return S=function(){return n},n}function P(){const n=x(["\n\tmargin-left: ","px;\n"]);return P=function(){return n},n}function A(){const n=x(["\n\tposition: absolute;\n\ttop: ","px;\n\tright: 0px;\n\twidth: 42px;\n\theight: 42px;\n"]);return A=function(){return n},n}const E=(0,o.css)(y(),i.wk[400]),T=(0,o.css)(k()),B=(0,o.css)(j()),U=(0,o.css)(w(),s.r9N,i.SY[100],a.x[1],l.TG.phablet,a.x[1]),I=(0,o.css)(v(),s.aal,i.JU[400],a.x[2]),z=(0,o.css)(O(),s.A5,i.SY[100],a.x[2],i.JU[400]),F=(0,o.css)(S(),a.x[5]),L=(0,o.css)(P(),a.x[5]),_=(0,o.css)(A(),a.x[2]),N=n=>{const{heading:t,paragraphs:e,primaryCta:o,secondaryCta:i}=n.content.mainContent,[s,...a]=e;return(0,r.jsx)(u.m,{cssOverrides:E,children:(0,r.jsxs)(d.e,{children:[(0,r.jsx)(p.V,{width:[0,0,0,2,3],cssOverrides:B,children:" "}),(0,r.jsxs)(p.V,{width:[4,12,12,12,13],cssOverrides:T,children:[(0,r.jsx)("h1",{css:U,children:t}),(0,r.jsx)("h2",{css:I,children:s}),(0,r.jsx)("div",{css:z,children:a}),(0,r.jsx)("div",{css:F,children:(0,r.jsxs)(c.a,{theme:f.fc,children:[o&&(0,r.jsx)(m.z,{priority:"primary",href:o.ctaUrl,onClick:n.onCtaClick,size:"small",children:o.ctaText}),i&&i.type===h.bP.Custom&&(0,r.jsx)(g.$,{priority:"subdued",size:"small",onClick:n.onCloseClick,cssOverrides:L,children:i.cta.ctaText})]})}),(0,r.jsx)("div",{css:_,children:(0,r.jsx)(b.l,{})})]})]})})},R=(0,C.cy)(N,"sign-in-prompt-banner"),D=(0,C.oA)(N,"sign-in-prompt-banner")}}]);
//# sourceMappingURL=1714.client.web.4c2ca3d0608cf13ab28d.js.map