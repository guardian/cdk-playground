{"version":3,"file":"342.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/marketing/header/Header.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/header/HeaderWrapper.tsx"],"sourcesContent":["/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/4925ef1e0ced5d221f1122afe79f93bd7448e0e5/packages/modules/src/modules/headers/Header.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tfrom,\n\theadlineBold20,\n\theadlineBold24,\n\tspace,\n\ttextSans14,\n} from '@guardian/source/foundations';\nimport {\n\tHide,\n\tLinkButton,\n\tSvgArrowRightStraight,\n\tthemeButtonReaderRevenueBrand,\n} from '@guardian/source/react-components';\nimport { palette as themePalette } from '../../../palette';\nimport type { ReactComponent } from '../lib/ReactComponent';\nimport type { HeaderRenderProps } from './HeaderWrapper';\nimport { headerWrapper, validatedHeaderWrapper } from './HeaderWrapper';\n\nconst gridStyles = css`\n\tdisplay: grid;\n\n\tgrid-template-rows: auto;\n\tgrid-template-columns: auto;\n\n\tgrid-template-areas:\n\t\t'heading     cta1  cta2'\n\t\t'subheading  .     .   ';\n`;\n\nconst textStyles = css`\n\tmargin-right: ${space[3]}px;\n`;\n\nconst headingStyles = css`\n\tgrid-area: 'heading';\n\n\tcolor: ${themePalette('--masthead-top-bar-text')};\n\t${headlineBold20}\n\n\t${from.desktop} {\n\t\t${headlineBold24}\n\t}\n`;\n\nconst subHeadingStyles = css`\n\tgrid-area: 'subheading';\n\n\tcolor: ${themePalette('--masthead-top-bar-text')};\n\t${textSans14}\n`;\n\nconst buttonStyles = css`\n\tmargin: 0 0 0 ${space[2]}px;\n\n\t${from.tablet} {\n\t\tmargin: ${space[1]}px 0 0 ${space[2]}px;\n\t}\n`;\n\nconst Header: ReactComponent<HeaderRenderProps> = (\n\tprops: HeaderRenderProps,\n) => {\n\tconst { heading, subheading, primaryCta, secondaryCta } = props.content;\n\n\tconst onClick = () => props.onCtaClick?.();\n\n\treturn (\n\t\t<div css={gridStyles}>\n\t\t\t<Hide until=\"tablet\">\n\t\t\t\t<div css={textStyles}>\n\t\t\t\t\t<h2 css={headingStyles}>{heading}</h2>\n\t\t\t\t\t<span css={subHeadingStyles}>{subheading}</span>\n\t\t\t\t</div>\n\t\t\t</Hide>\n\n\t\t\t{primaryCta && (\n\t\t\t\t<>\n\t\t\t\t\t<Hide until=\"tablet\">\n\t\t\t\t\t\t<LinkButton\n\t\t\t\t\t\t\ttheme={themeButtonReaderRevenueBrand}\n\t\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\t\thref={primaryCta.ctaUrl}\n\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\t\tnudgeIcon={true}\n\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t\tcssOverrides={buttonStyles}\n\t\t\t\t\t\t\tstyle={{ gridArea: 'cta1' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{primaryCta.ctaText}\n\t\t\t\t\t\t</LinkButton>\n\t\t\t\t\t</Hide>\n\n\t\t\t\t\t<Hide from=\"tablet\">\n\t\t\t\t\t\t<LinkButton\n\t\t\t\t\t\t\ttheme={themeButtonReaderRevenueBrand}\n\t\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\tprops.mobileContent?.primaryCta?.ctaUrl ??\n\t\t\t\t\t\t\t\tprimaryCta.ctaUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcssOverrides={buttonStyles}\n\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{props.mobileContent?.primaryCta?.ctaText ??\n\t\t\t\t\t\t\t\tprimaryCta.ctaText}\n\t\t\t\t\t\t</LinkButton>\n\t\t\t\t\t</Hide>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{secondaryCta && (\n\t\t\t\t<Hide until=\"tablet\">\n\t\t\t\t\t<LinkButton\n\t\t\t\t\t\ttheme={themeButtonReaderRevenueBrand}\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\thref={secondaryCta.ctaUrl}\n\t\t\t\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\tnudgeIcon={true}\n\t\t\t\t\t\tcssOverrides={buttonStyles}\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tstyle={{ gridArea: 'cta2' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{secondaryCta.ctaText}\n\t\t\t\t\t</LinkButton>\n\t\t\t\t</Hide>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nconst unvalidated = headerWrapper(Header);\nconst validated = validatedHeaderWrapper(Header);\nexport { validated as Header, unvalidated as HeaderUnvalidated };\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/4925ef1e0ced5d221f1122afe79f93bd7448e0e5/packages/modules/src/modules/headers/HeaderWrapper.tsx\n */\nimport type { OphanAction } from '@guardian/libs';\nimport { headerPropsSchema } from '@guardian/support-dotcom-components';\nimport type {\n\tCta,\n\tHeaderProps,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useCallback, useEffect } from 'react';\nimport { useIsInView } from '../../../lib/useIsInView';\nimport type { ReactComponent } from '../lib/ReactComponent';\nimport {\n\taddRegionIdAndTrackingParamsToSupportUrl,\n\taddTrackingParamsToProfileUrl,\n\tcreateClickEventFromTracking,\n\tisProfileUrl,\n} from '../lib/tracking';\n\nexport interface HeaderEnrichedCta {\n\tctaUrl: string;\n\tctaText: string;\n}\n\nexport interface HeaderRenderedContent {\n\theading: string;\n\tsubheading: string;\n\tprimaryCta: HeaderEnrichedCta | null;\n\tsecondaryCta: HeaderEnrichedCta | null;\n}\n\nexport interface HeaderRenderProps {\n\tcontent: HeaderRenderedContent;\n\tmobileContent?: HeaderRenderedContent;\n\tonCtaClick?: () => void; // only used by sign in prompt header\n}\n\nexport const headerWrapper = (\n\tHeader: ReactComponent<HeaderRenderProps>,\n): ReactComponent<HeaderProps> => {\n\tconst Wrapped: ReactComponent<HeaderProps> = ({\n\t\tcontent,\n\t\tmobileContent,\n\t\ttracking,\n\t\tcountryCode,\n\t\tsubmitComponentEvent,\n\t\tnumArticles,\n\t}) => {\n\t\tconst buildEnrichedCta = (cta: Cta): HeaderEnrichedCta => {\n\t\t\tif (isProfileUrl(cta.baseUrl)) {\n\t\t\t\treturn {\n\t\t\t\t\tctaUrl: addTrackingParamsToProfileUrl(\n\t\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\t\ttracking,\n\t\t\t\t\t),\n\t\t\t\t\tctaText: cta.text,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tctaUrl: addRegionIdAndTrackingParamsToSupportUrl(\n\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\ttracking,\n\t\t\t\t\tnumArticles,\n\t\t\t\t\tcountryCode,\n\t\t\t\t),\n\t\t\t\tctaText: cta.text,\n\t\t\t};\n\t\t};\n\n\t\tconst primaryCta = content.primaryCta\n\t\t\t? buildEnrichedCta(content.primaryCta)\n\t\t\t: null;\n\t\tconst secondaryCta = content.secondaryCta\n\t\t\t? buildEnrichedCta(content.secondaryCta)\n\t\t\t: null;\n\n\t\tconst renderedContent: HeaderRenderedContent = {\n\t\t\theading: content.heading,\n\t\t\tsubheading: content.subheading,\n\t\t\tprimaryCta,\n\t\t\tsecondaryCta,\n\t\t};\n\n\t\tconst mobilePrimaryCta = mobileContent?.primaryCta\n\t\t\t? buildEnrichedCta(mobileContent.primaryCta)\n\t\t\t: primaryCta;\n\n\t\tconst mobileSecondaryCta = mobileContent?.secondaryCta\n\t\t\t? buildEnrichedCta(mobileContent.secondaryCta)\n\t\t\t: secondaryCta;\n\n\t\tconst renderedMobileContent = mobileContent\n\t\t\t? ({\n\t\t\t\t\theading: mobileContent.heading,\n\t\t\t\t\tsubheading: mobileContent.subheading,\n\t\t\t\t\tprimaryCta: mobilePrimaryCta,\n\t\t\t\t\tsecondaryCta: mobileSecondaryCta,\n\t\t\t  } as HeaderRenderedContent)\n\t\t\t: undefined;\n\n\t\tconst { abTestName, abTestVariant, componentType, campaignCode } =\n\t\t\ttracking;\n\n\t\tconst onCtaClick = (componentId: string) => {\n\t\t\treturn (): void => {\n\t\t\t\tconst componentClickEvent = createClickEventFromTracking(\n\t\t\t\t\ttracking,\n\t\t\t\t\t`${componentId} : cta`,\n\t\t\t\t);\n\t\t\t\tif (submitComponentEvent) {\n\t\t\t\t\tsubmitComponentEvent(componentClickEvent);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\tconst sendOphanEvent = useCallback(\n\t\t\t(action: OphanAction): void => {\n\t\t\t\tif (submitComponentEvent) {\n\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\tcomponentType,\n\t\t\t\t\t\t\tid: campaignCode,\n\t\t\t\t\t\t\tcampaignCode,\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tabTest: {\n\t\t\t\t\t\t\tname: abTestName,\n\t\t\t\t\t\t\tvariant: abTestVariant,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t[\n\t\t\t\tabTestName,\n\t\t\t\tabTestVariant,\n\t\t\t\tcampaignCode,\n\t\t\t\tcomponentType,\n\t\t\t\tsubmitComponentEvent,\n\t\t\t],\n\t\t);\n\n\t\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\t\tdebounce: true,\n\t\t\tthreshold: 0,\n\t\t});\n\n\t\tuseEffect(() => {\n\t\t\tif (hasBeenSeen) {\n\t\t\t\tsendOphanEvent('VIEW');\n\t\t\t}\n\t\t}, [hasBeenSeen, sendOphanEvent]);\n\n\t\tuseEffect(() => {\n\t\t\tsendOphanEvent('INSERT');\n\t\t}, [sendOphanEvent]);\n\n\t\treturn (\n\t\t\t<div ref={setNode}>\n\t\t\t\t<Header\n\t\t\t\t\tcontent={renderedContent}\n\t\t\t\t\tmobileContent={renderedMobileContent}\n\t\t\t\t\tonCtaClick={onCtaClick(campaignCode)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t};\n\treturn Wrapped;\n};\n\nconst validate = (props: unknown): props is HeaderProps => {\n\tconst result = headerPropsSchema.safeParse(props);\n\treturn result.success;\n};\n\nexport const validatedHeaderWrapper = (\n\tHeader: ReactComponent<HeaderRenderProps>,\n): ReactComponent<HeaderProps> => {\n\treturn (props: HeaderProps) => {\n\t\tif (validate(props)) {\n\t\t\tconst Module = headerWrapper(Header);\n\t\t\treturn <Module {...props} />;\n\t\t}\n\t\treturn <></>;\n\t};\n};\n"],"names":["css","from","headlineBold20","headlineBold24","space","textSans14","Hide","LinkButton","SvgArrowRightStraight","themeButtonReaderRevenueBrand","palette","themePalette","headerWrapper","validatedHeaderWrapper","gridStyles","textStyles","headingStyles","desktop","subHeadingStyles","buttonStyles","tablet","Header","props","heading","subheading","primaryCta","secondaryCta","content","onClick","onCtaClick","div","until","h2","span","theme","priority","href","ctaUrl","icon","iconSide","nudgeIcon","size","cssOverrides","style","gridArea","ctaText","mobileContent","unvalidated","validated","HeaderUnvalidated","headerPropsSchema","useCallback","useEffect","useIsInView","addRegionIdAndTrackingParamsToSupportUrl","addTrackingParamsToProfileUrl","createClickEventFromTracking","isProfileUrl","Wrapped","tracking","countryCode","submitComponentEvent","numArticles","buildEnrichedCta","cta","baseUrl","text","renderedContent","mobilePrimaryCta","mobileSecondaryCta","renderedMobileContent","undefined","abTestName","abTestVariant","componentType","campaignCode","componentId","componentClickEvent","sendOphanEvent","action","component","id","abTest","name","variant","hasBeenSeen","setNode","debounce","threshold","ref","validate","result","safeParse","success","Module"],"sourceRoot":""}