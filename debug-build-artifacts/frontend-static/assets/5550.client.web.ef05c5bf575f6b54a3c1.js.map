{"version":3,"file":"5550.client.web.ef05c5bf575f6b54a3c1.js","mappings":"qPAcA,MAGMA,EAA+B,CACpCC,cAAe,+BACfC,cAAe,iCACfC,OAAQ,2BACRC,gBAAiB,+BCjBjB,kB,sGAWD,MAAMC,EACLC,GAE6CC,IAC5C,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,WAAS,GAE/BC,EAAU,KDGuB,IAACC,EAVRC,EAUQD,ECFbL,EAAYO,cDRPD,EAWRb,EAA6BY,GAVtDG,EAAAA,EAAQC,MAAMC,IAAI,YAAiB,OAALJ,IAAQ,IAAIK,MAAOC,eCQ/CV,GAAU,GACVW,SAASC,KAAKC,OAAO,ECfjB,IACNC,EDmBC,OCnBDA,EDiBmBZ,GCfnBa,EAAAA,EAAAA,YAAU,KACT,SAASC,EAAoBC,IAEM,WAAdA,EAAMC,KAAkC,QAAdD,EAAMC,MAEnDJ,EAAaG,EAEf,CAIA,OAFAE,OAAOC,iBAAiB,UAAWJ,GAE5B,IAAMG,OAAOE,oBAAoB,UAAWL,EAAoB,GACrE,CAACF,IDKIf,GACN,SAACF,E,sUAAAA,CAAAA,CAAgBK,QAASA,GAAaJ,KAEvC,yBE5BF,kB,8aAkDM,MAoSMwB,EAAgB,CAC5BC,EACAC,IAEA5B,EAzRA,EACC2B,EACAC,IAEA1B,IACA,MAAM,SACL2B,EAAQ,qBACRC,EAAoB,QACpBxB,EAAO,QACPyB,EAAO,cACPC,EAAa,YACbC,EAAW,OACXC,EAAM,WACNC,EAAU,cACVC,EAAa,eACbC,EAAc,YACdC,EAAW,qBACXC,EAAoB,6BACpBC,EAA4B,kBAC5BC,EAAiB,OACjBC,EAAM,cACNjC,EAAa,gBACbV,GACGG,GAEGyC,EAAaC,IAAWC,EAAAA,EAAAA,GAAY,CAC1CC,UAAU,EACVC,UAAW,KAGZ5B,EAAAA,EAAAA,YAAU,KACLwB,GAAeb,GAClBA,GACCkB,EAAAA,EAAAA,IACCnB,EACAA,EAASoB,cAGZ,GACE,CAACN,EAAab,EAAsBD,KAEvCV,EAAAA,EAAAA,YAAU,KACLW,GACHA,GACCoB,EAAAA,EAAAA,IACCrB,EACAA,EAASoB,cAGZ,GACE,CAACnB,EAAsBD,IAE1B,MAAMsB,EAAcf,EAAcgB,iBAiB5BC,EACLC,GAEOA,EAAMC,KAAKC,IACjBC,EAAAA,EAAAA,GAAoBD,EAAGL,EAAa,YAQhCO,EA7GR,SAAyB9B,GACxB,MAAO,CACN+B,MAAO,GAAY,OAAT/B,EAAS,YACnBgC,IAAK,GAAY,OAAThC,EAAS,UACjBiC,aAAc,GAAY,OAATjC,EAAS,oBAC1BkC,OAAQ,GAAY,OAATlC,EAAS,cACpB9B,OAAQ,GAAY,OAAT8B,EAAS,cACpBmC,YAAa,GAAY,OAATnC,EAAS,mBACzBoC,YAAa,GAAY,OAATpC,EAAS,mBACzBqC,cAAe,GAAY,OAATrC,EAAS,qBAE7B,CAkGuBsC,CAAgBtC,GAG/BuC,EACLC,IAEA,MAAMC,EAAoBT,IACrBU,EAAAA,EAAAA,IAAaV,EAAIW,SACb,CACNC,QAAQC,EAAAA,EAAAA,IACPb,EAAIW,QACJ1C,GAED6C,QAASd,EAAIe,MAIO,oBAAlBlE,GAAuCV,EACnC,CACNyE,QAAQI,EAAAA,EAAAA,IACPhB,EAAIW,QACJxE,EACA8B,GAED6C,QAASd,EAAIe,MAIR,CACNH,QAAQK,EAAAA,EAAAA,IACPjB,EAAIW,QACJ1C,EACAsB,EACAlB,GAEDyC,QAASd,EAAIe,MAoBTG,EAAaV,EAAcR,IAC9BS,EAAiBD,EAAcR,KAC/B,KACGC,EAAeO,EAAcP,aAnBD,CACjCA,GAEIA,EAAakB,OAASC,EAAAA,GAAiBC,OACnC,CACNF,KAAMC,EAAAA,GAAiBC,OACvBrB,IAAKS,EAAiBR,EAAaD,MAI9B,CACNmB,KAAMC,EAAAA,GAAiBE,sBACvBC,gBAAgBC,EAAAA,EAAAA,IAAkBnD,IAQjCoD,CAA0BjB,EAAcP,cACxC,KAEGyB,EACLlB,EAAcmB,kBACdC,EAAAA,EAAAA,IACCpB,EAAcmB,gBACdtD,EACAC,GACCuD,OAEGC,GAAeF,EAAAA,EAAAA,IACpBpB,EAAcuB,QACd1D,EACAC,GACCuD,OAEIG,EA5KiC,EACzCtC,EACAqB,KAEA,MAAMkB,EAAW,GAOjB,OALa,MAATvC,EACHuC,EAASC,QAAQxC,GACC,MAARqB,GACVkB,EAASC,KAAKnB,GAERkB,CAAQ,EA8DQE,CAoGpB3B,EAAc4B,WACd5B,EAAc6B,aAnGK1C,KAAKC,IACxBgC,EAAAA,EAAAA,IACChC,EACAvB,EACAC,GACCuD,SAiGGS,EACuCN,EApF1BO,MAAM3C,IAAM4C,EAAAA,EAAAA,IAAmC5C,QAqF9D8B,IACFc,EAAAA,EAAAA,IAAmCd,MACjCI,IACFU,EAAAA,EAAAA,IAAmCV,GAE/BW,EAA0BX,GAC7BjC,EAAAA,EAAAA,GAAoBiC,EAAcvC,EAAa,UAC/C,KAEGmD,EAAkChB,GACrC7B,EAAAA,EAAAA,GACA6B,EACAnC,EACA,UAEA,KAEH,GAAI+C,EACH,MAAMK,MAAM,kDAGb,MAAO,CACNhB,gBAAiBe,EACjBN,WAAY3C,EAAmBuC,GAC/BD,QAASU,EACTvB,aACAjB,eACA,EAGI2C,EAAkB,CAACC,EAAqB9C,IACtC,KACN,MAAM+C,GAAsBC,EAAAA,EAAAA,IAC3B9E,EACA4E,GAEG3E,GACHA,EAAqB4E,GAElB/C,GACHrD,GACD,EAIIsG,EAAaJ,EAAgB9C,EAAaE,KAAK,GAC/CiD,EAAsBL,EAC3B9C,EAAaG,cACb,GAEKiD,EAAqBN,EAC1B9C,EAAaK,aACb,GAEKgD,EAAqBP,EAC1B9C,EAAaM,aACb,GAEKgD,EAAuBR,EAC5B9C,EAAaO,eACb,GAEKgD,EAAeT,EAAgB9C,EAAaC,OAAO,GACnDuD,EAAgBV,EAAgB9C,EAAaI,QAAQ,GACrDqD,EAAgBX,EAAgB9C,EAAa5D,QAAQ,GAE3D,IACC,MAAMsH,EAAkBrF,GAAWoC,EAAqBpC,GAClDsF,EACLrF,GAAiBmC,EAAqBnC,GAEvC,GAAIoF,EAAiB,CACpB,MAAME,EAA2B,CAChCV,aACAC,sBACAU,iBAAkB,CACjBT,qBACAC,qBACAC,wBAEDC,eACAE,gBACAD,gBACAnF,QAAS,CACRyF,YAAaJ,EACbpF,cAAeqF,QAAAA,EAAyBD,GAEzCnF,cACAE,aACAE,iBACAC,cACAF,gBACAG,uBACAC,+BACAC,oBACAZ,WACAC,uBACAY,UAGD,OACC,SAAC+E,MAAAA,CAAIC,IAAK9E,E,UACT,SAACjB,EAAAA,EAAAA,CAAAA,EAAW2F,KAGf,CACD,CAAE,MAAOK,GACRC,QAAQC,IAAIF,EACb,CAEA,OAAO,yBAOMG,CAAenG,EAAQC,IAOzBmG,EAAyB,CACrCpG,EACAC,IAEQ0F,IACP,GAVe,CAACA,GACFU,EAAAA,EAAaC,UAAUX,GACxBY,QAQTC,CAASb,GAAQ,CACpB,MAAMc,EAAS1G,EAAcC,EAAQC,GACrC,OAAO,SAACwG,EAAAA,EAAAA,CAAAA,EAAWd,GACpB,CACA,OAAO,wB,sSC1WR,gB,i5DA6BM,MAAMe,EAER,I,IAAA,YACJlF,EAAW,SACXmF,EAAQ,SACRC,GACyC,EACzC,MAAOpI,EAAQC,IAAaC,EAAAA,EAAAA,WAAS,IAC9BmI,EAAaC,IAAkBpI,EAAAA,EAAAA,WAAS,GAYzCC,EAAU,KACfF,GAAU,EAAM,EAKjB,OACC,UAACqH,MAAAA,CAAIiB,IAAKC,EAAOC,gB,WAChB,SAACC,SAAAA,CAAOH,IAAKC,EAAOG,mBAAoBC,QAJzB,IAAa5I,EAASG,SAPtCF,GAAU,G,SAYP,GAAiBkI,OAAdnF,GAAuC,OAAzBmF,GAAsB,MAGxCnI,IACA,SAACsH,MAAAA,CAAIiB,IAAKC,EAAOK,iB,UAChB,SAACC,EAAAA,CACAT,YAAaA,EACbU,SA1BY,MAChBC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,MACAX,GAAe,EAAK,EAwBhBnI,QAASA,EACTiI,SAAUA,Q,EAiBVU,EAAyC,I,IAAA,YAC9CT,EAAW,QACXlI,EAAO,SACP4I,EAAQ,SACRX,GACc,EACd,OACC,UAACd,MAAAA,CACAiB,IAAKW,EAAcL,iBAClBT,EAASe,kBAAkBC,iBAC3BhB,EAASiB,wB,WAGV,UAAC/B,MAAAA,CAAIiB,IAAKW,EAAcI,c,WACvB,SAAChC,MAAAA,CAAIiB,IAAKW,EAAcK,kB,SACtBlB,EAAc,mBAAqB,kBAGrC,SAACmB,EAAAA,EAAMA,CACNZ,QAASzI,EACTsJ,MAAM,SAACC,EAAAA,EAAQA,CAAAA,GACfC,WAAW,EACXC,KAAK,SACLC,SAAS,WACTC,cAAcC,EAAAA,EAAAA,GAAa3B,EAAS4B,qB,SACpC,cAKF,SAAC1C,MAAAA,CAAIiB,IAAKW,EAAce,Y,SACtB5B,EACE,qHACA,6HAGFA,IACD,UAACf,MAAAA,CAAIiB,IAAKW,EAAcgB,oB,WACvB,SAACV,EAAAA,EAAMA,CACNZ,QAASzI,EACT0J,SAAS,UACTD,KAAK,SACLE,cAAcC,EAAAA,EAAAA,GAAa3B,EAAS+B,oB,SACpC,oBAID,SAACX,EAAAA,EAAMA,CACNZ,QAASG,EACTc,SAAS,WACTD,KAAK,SACLE,cAAcC,EAAAA,EAAAA,GACb3B,EAASgC,sB,SAEV,uBAMH,SAAC9C,MAAAA,CACAiB,IAAKW,EAAcmB,YAAYjC,EAASiB,wB,SAEvChB,GACA,UAACiC,OAAAA,C,UAAK,oCAC6B,KAClC,SAACC,IAAAA,CAAEC,KAAK,8C,SAA8C,mBAKvD,8E,EASChC,EAAS,CACdC,iBAAiBF,EAAAA,EAAAA,KAAGA,KAGpBI,oBAAoBJ,EAAAA,EAAAA,KAAGA,KAavBM,kBAAkBN,EAAAA,EAAAA,KAAGA,IAOlBkC,EAAAA,GAAKC,SAQHxB,EAAgB,CACrBL,iBAAkB,SACjBO,G,IACAuB,EAAAA,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,GAAqBC,EAAAA,GAAQ,G,OACzBrC,EAAAA,EAAAA,KAAGA,IACLsC,EAAAA,IACSC,EAAAA,EAAM,GACG1B,EACAuB,EAEXA,E,EAEVrB,eAAef,EAAAA,EAAAA,KAAGA,KAKlBgB,mBAAmBhB,EAAAA,EAAAA,KAAGA,IACnBwC,EAAAA,KAEHd,aAAa1B,EAAAA,EAAAA,KAAGA,IACDuC,EAAAA,EAAM,GAClBE,EAAAA,KAEHd,qBAAqB3B,EAAAA,EAAAA,KAAGA,IACTuC,EAAAA,EAAM,GAKJA,EAAAA,EAAM,GAGpBL,EAAAA,GAAKC,OAEUI,EAAAA,EAAM,IAIxBT,YAAa,W,IAACM,EAAAA,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,GAAqBC,EAAAA,GAAQ,G,OAAOrC,EAAAA,EAAAA,KAAGA,IACtCuC,EAAAA,EAAM,GAClBG,EAAAA,IAKQN,E,yBClPX,E,qKAAA,Q,gCAWD,MAAMnC,EAAS,CACd0C,WAAW3C,EAAAA,EAAAA,KAAGA,IACX4C,EAAAA,IACYL,EAAAA,EAAM,GAElBL,EAAAA,GAAKC,OACJU,EAAAA,MAWE,SAASC,EAAuB,G,IAAA,KACtCC,EAAI,YACJtI,EAAW,SACXoF,GAHsC,EAatC,MAAOmD,EAAUC,GAAYF,EAAKG,MAAM,sBACjCtD,KAAauD,IAASF,QAAAA,EAAY,IAAIlG,OAAOmG,MAAM,KAE1D,OACC,UAACpI,IAAAA,CAAEkF,IAAKC,EAAO0C,U,UACbK,EAAU,KACX,SAACrD,EAAkCA,CAClClF,YAAaA,EACbmF,SAAU,IAAa,OAATA,GACdC,SAAUA,IACR,IACFsD,EAAKC,KAAK,OAGd,C,sBCvDC,E,4KAAA,Q,gCAqBM,SAASC,EAA6B,G,IAAA,KAC5CN,EAAI,YACJtI,EAAW,SACXoF,GAH4C,EAK5C,OAAIkD,GAfuC,CAACA,GAC5CA,EAAKO,SAAS,qBAcFC,CAA6BR,IAGvC,SAACD,EAAsBA,CACtBrI,YAAaA,EACbsI,KAAMA,EACNlD,SAAUA,IAGFpF,GAAe,IAExB,UAACsE,MAAAA,CAAIiB,IAAKC,EAAO0C,UAAU9C,EAASiB,wB,UAAyB,yEAE3C,KACjB,SAACnB,EAAkCA,CAClClF,YAAaA,EACbmF,SAAS,YACTC,SAAUA,IACR,IAAI,uBAMR,UAACd,MAAAA,CAAIiB,IAAKC,EAAO0C,UAAU9C,EAASiB,wB,UAAyB,cAC3C,KACjB,SAACnB,EAAkCA,CAClClF,YAAaA,EACbmF,SAAS,YACTC,SAAUA,IACR,IAAI,qBAKX,CAIA,MAAMI,EAAS,CACd0C,UAAW,W,IAACa,EAAAA,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,GAAoB,U,OAAcxD,EAAAA,EAAAA,KAAGA,IAEvCwD,EACPZ,EAAAA,IACAV,EAAAA,GAAKuB,QACJZ,EAAAA,I,yBCvEJ,E,6MAAA,Q,gCAgBD,MAAM5C,EAAS,CACd3C,YAAY0C,EAAAA,EAAAA,KAAGA,MAUH0D,EAAuB,CACnCpG,EACAT,EACA8G,KAEA,MAAMC,EAAsBC,MAAMC,QAAQxG,GACvCA,EACA,CAACA,GACEyG,EAA6BH,EAAoBI,OAAS,EAGhE,OAAID,EAA6B,GAE/B,SAAChF,MAAAA,CAAIiB,IAAKC,EAAO3C,W,SACfT,IACA,SAAC/B,IAAAA,C,UACA,SAACiH,OAAAA,CAAK/B,IAAK2D,EAAa9G,gB,SACtBA,SASN,SAACkC,MAAAA,CAAIiB,IAAKC,EAAO3C,W,SACfsG,EAAoB/I,KAAI,CAACC,EAAGmJ,IACxBA,EAAQF,GACJ,SAACjJ,IAAAA,C,SAAeA,GAARmJ,IAGf,UAACnJ,IAAAA,C,UACCA,EAAG,IACH+B,IACA,SAACkF,OAAAA,CAAK/B,IAAK2D,EAAa9G,gB,SACtBA,MAJIoH,M,EC3DZ,gB,oZAuBM,SAASC,EAAqB,G,IAAA,YACpCpF,EAAW,cACXxF,EAAa,wBACb6K,GAHoC,EAKpC,MAAMlE,EAASmE,EAAUD,GAEnBE,GAAkBC,EAAAA,EAAAA,IAAcC,EAAAA,EAAAA,GAAsBrC,EAAAA,GAAKC,SAEjE,OACC,SAACpD,MAAAA,CAAIiB,IAAKC,EAAO0C,U,SACf0B,EACEX,EACA5E,EAAYxB,WACZwB,EAAYjC,gBACZoD,GAEAyD,EACApK,EAAcgE,WACdhE,EAAcuD,gBACdoD,IAIN,CAEA,MAAMmE,EAAavE,IAAuC,CACzD8C,WAAW3C,EAAAA,EAAAA,KAAGA,IAIXwE,EAAAA,IACAtC,EAAAA,GAAKuB,QACJgB,EAAAA,KAGJ5H,iBAAiBmD,EAAAA,EAAAA,KAAGA,IAEVH,EAASuC,WAEhBvC,EAAS6E,gBACR,6BAE6B7E,OADRA,EAAS6E,gBAAgB,uCACqB7E,OAAtCA,EAAS6E,gBAAgB,eAAsC,OAAzB7E,EAAS6E,gBAAgB,yDAG5F,GAEDC,EAAAA,IACAzC,EAAAA,GAAKuB,QACJmB,EAAAA,OCzEJ,gB,2cAaM,SAASC,EAA4B,G,IAAA,aAC3CtG,EAAY,SACZsB,EAAQ,cACRiF,GAH2C,EAK3C,OACC,SAAC/F,MAAAA,CACAiB,KAAKA,EAAAA,EAAAA,KAAGA,IACLC,GAAO0C,UAAamC,QAAAA,EAAiB,I,UAGxC,SAAC7D,EAAAA,EAAMA,CACNZ,QAAS9B,EACTgD,cAAcC,EAAAA,EAAAA,GACb3B,EACAI,GAAO8E,sBAER7D,MAAM,SAACC,EAAAA,EAAQA,CAAAA,GACfE,KAAK,QACLD,WAAW,E,SACX,WAKJ,CAEA,MAAMnB,GAAS,CACd0C,WAAW3C,EAAAA,EAAAA,KAAGA,KAKd+E,sBAAsB/E,EAAAA,EAAAA,KAAGA,M,+DC9CzB,E,6WAAA,Q,iCAmBM,SAASgF,GAAqB,G,IAAA,oBACpCC,EAAmB,kBACnBC,EAAiB,oBACjB/G,EAAmB,mBACnByD,EAAkB,qBAClBC,GALoC,EAOpC,MAAM,WAAEzF,EAAU,aAAEjB,GAAiB8J,EAC/BE,IAAgB/I,IAAagJ,EAAAA,GAAAA,IAAahJ,EAAWN,QAE3D,OACC,UAACiD,MAAAA,CAAIiB,IAAKC,GAAO0C,U,UACfvG,IACA,SAACiJ,GAAAA,EAAUA,CACVpD,KAAM7F,aAAAA,EAAAA,EAAYN,OAClBuE,QAAS6E,EACT7D,KAAK,QACLC,SAAS,UACTC,cAAcC,EAAAA,EAAAA,GAAaI,G,SAE1BxF,aAAAA,EAAAA,EAAYJ,WAGdb,aAAAA,EAAAA,EAAckB,QAASC,EAAAA,GAAiBC,SACxC,SAAC8I,GAAAA,EAAUA,CACVpD,KAAM9G,aAAAA,EAAAA,EAAcD,IAAIY,OACxBuE,QAASlC,EACTkD,KAAK,QACLC,SAAS,WACTC,cAAcC,EAAAA,EAAAA,GAAaK,G,SAE1B1G,EAAaD,IAAIc,UAInBI,GAAc+I,IAAiB,SAACG,GAAAA,EAAYA,CAAAA,KAGhD,CAEA,MAAMrF,GAAS,CACd0C,WAAW3C,EAAAA,EAAAA,KAAGA,KAGNuC,EAAAA,EAAM,GAOVL,EAAAA,GAAKC,OAKND,EAAAA,GAAKC,SCxDT,SAASoD,GAAaC,GACrB,OAAO,SAACC,SAAAA,CAAOC,MAAOF,EAAME,MAAOC,OAAQH,EAAMI,KAAUJ,EAAMI,IAClE,CAEO,MAAMC,GAAyD,I,IAAA,OACrEC,EAAM,UACNC,EAAS,SACT7M,EAAQ,aACRqI,GACsB,EACtB,OACC,UAACyE,UAAAA,CAAQC,GAAI/M,EAAU8G,IAAKuB,E,UAC1BuE,EAAOjL,IAAI0K,KACZ,SAACW,MAAAA,CAAIC,IAAKJ,EAAUH,IAAKQ,IAAKL,EAAUK,Q,EChC1C,iB,o5BAgBM,SAASC,GAAuB,G,IAAA,SACtCxG,EAAQ,SACR3G,EAAQ,cACRoN,GAHsC,EAKtC,MAAMP,EAAwB,CAC7BH,IAAK/F,EAAS0G,QACdb,MAAO,GACPU,IAAKvG,EAAS2G,SAGTV,EAAuB,GACvB7F,EAASmE,GAAUkC,GAiBzB,OAhBIzG,EAAS4G,WACZX,EAAO1I,KAAK,CAAEwI,IAAK/F,EAAS4G,UAAWf,MAAO,uBAE3C7F,EAAS6G,WACZZ,EAAO1I,KAAK,CAAEwI,IAAK/F,EAAS6G,UAAWhB,MAAO,uBAE3C7F,EAAS8G,YACZb,EAAO1I,KAAK,CAAEwI,IAAK/F,EAAS8G,WAAYjB,MAAO,wBAE5C7F,EAAS+G,YACZd,EAAO1I,KAAK,CAAEwI,IAAK/F,EAAS+G,WAAYlB,MAAO,wBAE5C7F,EAASgH,SACZf,EAAO1I,KAAK,CAAEwI,IAAK/F,EAASgH,QAASnB,MAAO,MAI5C,SAACG,GAAeA,CACfE,UAAWA,EACXD,OAAQA,EACR5M,SAAUA,EACVqI,aAActB,EAAO0C,WAGxB,CAIA,MAAMyB,GAAY,WACjB,OADkC,UAAhBkC,OAAAA,QAAAA,IAAAA,UAAAA,IAAAA,UAAAA,GAEV,CACN3D,WAAW3C,EAAAA,EAAAA,KAAGA,OAeT,CACN2C,WAAW3C,EAAAA,EAAAA,KAAGA,KAWVkC,EAAAA,GAAKC,OAKND,EAAAA,GAAKC,QASV,ECrGC,iB,gfA0BM,SAAS2E,GAAuB,G,IAAA,QACtC7J,EAAO,cACP8J,EAAa,eACbC,EAAc,aACdC,GAJsC,EAMtC,MAAM5C,GAAkBC,EAAAA,EAAAA,IAAcC,EAAAA,EAAAA,GAAsBrC,EAAAA,GAAKC,SAC3DlC,EAASmE,GAAU4C,EAAgBC,GAYzC,OACC,SAAClI,MAAAA,CAAIiB,IAAKC,EAAO0C,U,UAChB,UAACuE,SAAAA,CAAOlH,IAAKC,EAAOiH,O,WAClBF,aAAAA,EAAAA,EAAgBG,eAbEtH,EAcLmH,EAAeG,aAZ9B,SAACd,GAAsBA,CAACxG,SAAUA,EAAUyG,eAAe,MAaxDrJ,QAAAA,EAAW8J,KARR,SAACK,KAAAA,C,SAAI/C,EAAkBpH,EAAU8J,SAPpB,IAAClH,CAmBvB,CAEA,MAAMuE,GAAY,CACjB4C,EACAC,K,IAEcD,EAAd,MAAMK,EAAkC,QAA1BL,EAAAA,aAAAA,EAAAA,EAAgB5E,kBAAhB4E,IAAAA,EAAAA,EAA8B3E,EAAAA,GAAQ,GAC9CiF,GAAgBN,aAAAA,EAAAA,EAAgBG,aAAc5E,EAAAA,EAAM,GAAKA,EAAAA,EAAM,GAC/DgF,GAAkBP,aAAAA,EAAAA,EAAgBG,aAAc,GAAY,OAAT5E,EAAAA,EAAM,GAAG,MAAM,IAExE,MAAO,CACNI,WAAW3C,EAAAA,EAAAA,KAAGA,KAEIuH,GAElBL,QAAQlH,EAAAA,EAAAA,KAAGA,KAECsH,EAAqB/E,EAAAA,EAAM,GAC5B8E,EAEU,UAAjBJ,EAA2BO,EAAAA,IAAmBC,EAAAA,IAC9CvF,EAAAA,GAAKC,OACJuF,EAAAA,IACenF,EAAAA,EAAM,GAEtBL,EAAAA,GAAKyF,QACJC,EAAAA,KAIL,E,oDCpFD,iB,owDAoBD,MAAMC,GAAgBxF,EAAAA,GAAQ,GAQvB,SAASyF,GAAS,G,IAAA,6BACxBC,EAA4B,cAC5BC,EAAa,eACbC,GAHwB,EAKxB,OACC,UAAClJ,MAAAA,C,WACA,SAACmI,SAAAA,C,UACA,SAACgB,KAAAA,CACAlI,IAAKC,GAAOkI,mBACXH,QAAAA,EAAiBH,I,SAElB,uCAKF,UAAC9I,MAAAA,CAAIiB,IAAKC,GAAOmI,iBAAiBJ,QAAAA,EAAiBH,I,UAAgB,yFAE3CE,EAA6B,yDACN,KAC9C,SAAC/F,IAAAA,CACAC,KAAK,8CACLjC,IAAKC,GAAOoI,YAAYJ,QAAAA,EAAkBJ,I,SAC1C,oBAML,CASO,SAASS,GAAS,G,IAAA,6BACxBP,EAA4B,iBAC5BQ,GAFwB,EAIxB,OACC,UAACxJ,MAAAA,CAAIiB,IAAKC,GAAOuI,S,UAAU,2CACe,IACxCT,EAA6B,0EACM,KACpC,SAAC/F,IAAAA,CACAhC,IAAKC,GAAOwI,YAAYF,QAAAA,EAAoBV,IAC5C5F,KAAK,kDACLyG,OAAO,SACPC,IAAI,sB,SACJ,qBAKJ,CAIO,SAASC,KACf,OACC,SAAC7J,MAAAA,CAAIiB,IAAKC,GAAO4I,U,SAAW,+EAK9B,CAWO,SAASC,GAAkC,G,IAAA,YACjDzN,EAAW,eACX0N,EAAc,mBACd1K,EAAkB,uBAClB2K,GAJiD,EAMjD,MAAMjB,GAA+BkB,EAAAA,GAAAA,GACpC5N,EAAYoB,eAAeyM,eAG5B,OACC,qB,SACEH,IAAmBI,GAAAA,EAAeC,WAClC,SAACtB,GAAAA,CACAC,6BAA8BA,KAG/B,SAACsB,GAAAA,CACAtB,6BAA8BA,EAC9BgB,eAAgBA,EAChBO,SAAUjL,EACV2K,uBAAwBA,KAK7B,CAWA,SAASK,GAAO,G,IAAA,6BACftB,EAA4B,eAC5BgB,EAAc,SACdO,EAAQ,uBACRN,GAJe,EAMf,MAAM,MAAEO,EAAK,WAAEC,EAAU,YAAEC,EAAW,aAAEC,IACvCC,EAAAA,GAAAA,KAED,OACC,sB,WACC,SAACzC,SAAAA,C,UACA,UAACgB,KAAAA,CAAGlI,IAAKC,GAAO2J,W,UAAY,wBACL7B,EAA6B,gBAIrD,UAAC8B,OAAAA,CACA7J,IAAKC,GAAO4J,KACZP,SAAUI,GAAa,IAAMJ,EAASC,K,WAEtC,SAACO,GAAAA,EAASA,CACTC,MAAM,gBACN3I,WAAW,EACX4I,SAAUP,EACVQ,MAAOT,EACPU,MAAOX,EACPY,MAAO,GACPC,YAAY,sBAGb,SAACrL,MAAAA,CAAIiB,IAAKC,GAAOoK,a,UAChB,SAACpJ,EAAAA,EAAMA,CACN5E,KAAK,SACLiO,SAAS,QACThJ,SAAS,UACTiJ,SAAUxB,IAAmBI,GAAAA,EAAeqB,WAC5CjJ,cAAcvB,EAAAA,EAAAA,KAAGA,KACdC,GAAOE,OACP6I,IACFxH,EAAAA,EAAAA,GAAawH,I,SAEd,mBAKDD,IAAmBI,GAAAA,EAAetL,QAClC,SAACkB,MAAAA,CAAIiB,IAAKC,GAAOwK,mB,UAChB,SAAC7B,GAAAA,CAAAA,SAKJ,SAAC7J,MAAAA,CAAIiB,IAAKC,GAAOyK,kB,UAChB,SAACpC,GAAAA,CACAP,6BAA8BA,QAKnC,CAIA,MAAM9H,GAAS,CACd2J,YAAY5J,EAAAA,EAAAA,KAAGA,KACZwC,EAAAA,KAGHqH,MAAM7J,EAAAA,EAAAA,KAAGA,KACMuC,EAAAA,EAAM,GAKlBL,EAAAA,GAAKC,OAQJD,EAAAA,GAAKC,QAKTkI,cAAcrK,EAAAA,EAAAA,KAAGA,KACFuC,EAAAA,EAAM,GAElBL,EAAAA,GAAKC,OAESI,EAAAA,EAAM,IAGvBkI,oBAAoBzK,EAAAA,EAAAA,KAAGA,KACRuC,EAAAA,EAAM,IAErBmI,mBAAmB1K,EAAAA,EAAAA,KAAGA,KACPuC,EAAAA,EAAM,IAErBpC,QAAQH,EAAAA,EAAAA,KAAGA,KAIRkC,EAAAA,GAAKC,QAIR0G,WAAW7I,EAAAA,EAAAA,KAAGA,KACX2K,EAAAA,IACOV,EAAAA,GAAM,MAGhBzB,UAAUxI,EAAAA,EAAAA,KAAGA,KACVyC,EAAAA,KAGHgG,YAAcmC,IAAsB5K,EAAAA,EAAAA,KAAGA,KAE7B4K,GAEVzC,mBAAqByC,IAAsB5K,EAAAA,EAAAA,KAAGA,KAC3C2K,EAAAA,IAEepI,EAAAA,EAAM,GACdqI,GAEVxC,iBAAmBwC,IAAsB5K,EAAAA,EAAAA,KAAGA,KACzCyC,EAAAA,IACOmI,GAEVvC,YAAcuC,IAAsB5K,EAAAA,EAAAA,KAAGA,KAE7B4K,I,uBCzRV,E,4LAAA,Q,iCAgBD,MAAM3K,GAAS,CACd0C,WAAW3C,EAAAA,EAAAA,KAAGA,KAICuC,EAAAA,EAAM,KAIf,SAASsI,GAAyB,G,IAAA,YACxCxP,EAAW,sBACXyP,EAAqB,uBACrB9B,EAAsB,kBACtB+B,GAJwC,EAMxC,MAAM,eAAEhC,EAAc,eAAEiC,IAAmBC,EAAAA,GAAAA,GAC1C5P,EAAYoB,eAAeyO,eAC3B,MACA,SACA,MACA7P,EAAYoB,eAAe0O,gBAQ5B,OACC,SAACpM,MAAAA,CAAIC,IAAK+L,EAAmB/K,IAAKC,GAAO0C,U,UACxC,SAACmG,GAAiCA,CACjCzN,YAAaA,EACb0N,eAAgBA,EAChB1K,mBAVyBkL,IAC3BuB,IACAE,EAAezB,EAAM,EASnBP,uBAAwBA,KAI5B,CCtDC,iB,srBAID,MAAMoC,GAAkB,CACvBC,iBAAiBrL,EAAAA,EAAAA,KAAGA,KACFuC,EAAAA,EAAM,GAErBL,EAAAA,GAAKC,OACWI,EAAAA,EAAM,IAGzB+I,cAActL,EAAAA,EAAAA,KAAGA,MAGjBuL,gBAAgBvL,EAAAA,EAAAA,KAAGA,KACDuC,EAAAA,EAAM,GAErBL,EAAAA,GAAKC,OACWI,EAAAA,EAAM,IAGzBiJ,cAAcxL,EAAAA,EAAAA,KAAGA,KACCuC,EAAAA,EAAM,IAExBkJ,mBAAmBzL,EAAAA,EAAAA,KAAGA,KACduC,EAAAA,EAAM,GACJA,EAAAA,EAAM,GACAA,EAAAA,EAAM,KC5BtB,iB,i2GAmDD,MAAMmJ,GACL1R,IAEO,CACNuM,QAASvM,EAAOyM,UAChBA,UAAWzM,EAAOyM,UAClBC,UAAW1M,EAAO0M,UAClBC,WAAY3M,EAAO2M,WACnBE,QAAS7M,EAAO2M,WAChBH,QAASxM,EAAOwM,UAWZmF,GACL3R,IAEA,GAAIA,EAAOmN,YACV,OAAOuE,GAAmB1R,EAAOmN,YAElB,EAuCXyE,GAAuD,I,IAAA,QAC5DvS,EAAO,aACPkF,EAAY,cACZ7E,EAAa,WACbwE,EAAU,oBACVC,EAAmB,iBACnBU,EAAgB,qBAChBhF,EAAoB,6BACpBC,EAA4B,eAC5BH,EAAc,kBACdI,EAAiB,YACjBR,EAAW,qBACXH,EAAoB,OACpBY,GACmB,E,IA2KlBiL,EAsBkBjL,EAhMnB,MAAMqK,GAAkBC,EAAAA,EAAAA,IAAcC,EAAAA,EAAAA,GAAsBrC,EAAAA,GAAKC,UAC3D,iBAAE0J,EAAgB,mBAAEzN,EAAkB,kBAAE2M,GChI3B,CACnBlM,IAMA,MAAOgN,EAAkBC,IAAuBnU,EAAAA,EAAAA,WAAS,GAOnDoT,GAAoBgB,EAAAA,EAAAA,QAAuB,MAQjD,OANAtT,EAAAA,EAAAA,YAAU,KACLsS,EAAkBiB,SAAWH,GAChCd,EAAkBiB,QAAQC,eAAe,CAAEC,SAAU,UACtD,GACE,CAACL,IAEG,CAAEA,mBAAkBzN,mBAbA,KAC1BS,EAAiBT,qBACjB0N,GAAqBD,EAAiB,EAWQd,oBAAmB,ED2GjEoB,CAAYtN,IAGNuN,EAAqBC,IAA0B1U,EAAAA,EAAAA,WAAS,IAC/Dc,EAAAA,EAAAA,YAAU,KACT4T,EACCxT,OAAOyT,aAAezT,OAAOR,SAASkU,gBAAgBC,aAAY,GAEjE,KAEH/T,EAAAA,EAAAA,YAAU,KACL2T,GAEChT,GACHA,EAAqB,CACpBqT,UAAW,CACVC,cAAe,qBACfzG,GAAI,6BAEL0G,OAAQ,QAGX,GACE,CAACP,EAAqBhT,IAEzB,MAAM,oBACLwT,EAAmB,uBACnBC,EAAsB,WACtBC,EAAU,UACVC,EAAS,eACTC,IACGC,EAAAA,EAAAA,GACHlT,EACAR,EACAF,EAAQyF,YAAY1C,WACpB/C,EAAQC,cAAc8C,YAIvB,IAAKpC,EACJ,OAAO,wBAGR,MAAM,MACLkT,EAAK,WACL9Q,EAAU,aACVjB,EAAY,gBACZ0B,EAAe,YACfsQ,EAAW,OACXC,GACGpT,EAAOqT,QAELC,EA1HwB,CAC9BtT,I,IAEIA,EAAJ,GAA4B,WAAX,QAAbA,EAAAA,EAAOuT,cAAPvT,IAAAA,OAAAA,EAAAA,EAAewT,MAClB,OAAO9B,GAAmB1R,EAAOuT,OAElB,EAoHME,CAAuBzT,GACvC0T,EA1GyB,CAC/B1T,I,IAEIA,EAAJ,GAA4B,iBAAX,QAAbA,EAAAA,EAAOuT,cAAPvT,IAAAA,OAAAA,EAAAA,EAAewT,MAAwB,CAC1C,MAAM,aACLG,EAAY,iBACZC,EAAgB,mBAChBC,EAAkB,mBAClBC,EAAkB,uBAClBC,EAAsB,yBACtBC,GACGhU,EAAOuT,OACX,MAAO,CACNI,aAAcA,GACXM,EAAAA,EAAAA,IAAkBN,QAClBO,EACHN,iBAAkBA,GACfK,EAAAA,EAAAA,IAAkBL,QAClBM,EACHL,mBAAoBA,GACjBI,EAAAA,EAAAA,IAAkBJ,QAClBK,EACHJ,mBAAoBA,GACjBG,EAAAA,EAAAA,IAAkBH,QAClBI,EACHH,uBAAwBA,GACrBE,EAAAA,EAAAA,IAAkBF,QAClBG,EACHF,yBAA0BA,GACvBC,EAAAA,EAAAA,IAAkBD,QAClBE,EAEL,CACgB,EAyEWC,CAAwBnU,GAE7CoU,EAA2C,CAChDxN,kBAAmB,CAClBC,kBAAkBoN,EAAAA,EAAAA,IAAkBf,EAAMmB,YAC1C7K,WAAWyK,EAAAA,EAAAA,IAAkBf,EAAMoB,WAEpCtH,eAAgB,CACf5E,YAAY6L,EAAAA,EAAAA,IAAkBf,EAAMqB,YACpCpH,YAAawE,GAAyB3R,IAEvC4H,mBAAoB,CACnB4M,QAAS,CACR3N,kBAAkBoN,EAAAA,EAAAA,IACjB7R,EAAWoS,QAAQH,YAEpBjM,YAAY6L,EAAAA,EAAAA,IAAkB7R,EAAWoS,QAAQvS,OAElDwS,MAAO,CACN5N,kBAAkBoN,EAAAA,EAAAA,IACjB7R,EAAWqS,MAAMJ,YAElBjM,YAAY6L,EAAAA,EAAAA,IAAkB7R,EAAWqS,MAAMxS,QAGjD4F,qBAAsB,CACrB2M,QAAS,CACR3N,kBAAkBoN,EAAAA,EAAAA,IACjB9S,EAAaqT,QAAQH,YAEtBjM,YAAY6L,EAAAA,EAAAA,IAAkB9S,EAAaqT,QAAQvS,MACnDyS,OAAQ,aAIP,OAHAvT,EAAaqT,QAAQE,QAClBT,EAAAA,EAAAA,IAAkB9S,EAAaqT,QAAQE,aACvCR,IAGLO,MAAO,CACN5N,kBAAkBoN,EAAAA,EAAAA,IACjB9S,EAAasT,MAAMJ,YAEpBjM,YAAY6L,EAAAA,EAAAA,IAAkB9S,EAAasT,MAAMxS,MACjDyS,OAAQ,aAIP,OAHAvT,EAAasT,MAAMC,QAChBT,EAAAA,EAAAA,IAAkB9S,EAAasT,MAAMC,aACrCR,KAINzM,oBAAqB,CACpB+M,QAAS,CACR3N,kBAAkBoN,EAAAA,EAAAA,IACjBd,EAAYqB,QAAQH,YAErBjM,YAAY6L,EAAAA,EAAAA,IAAkBd,EAAYqB,QAAQvS,MAClDyS,OAAQ,aAIP,OAHAvB,EAAYqB,QAAQE,QACjBT,EAAAA,EAAAA,IAAkBd,EAAYqB,QAAQE,QACtCC,EAAAA,GAAc,OAGnBF,MAAO,CACN5N,kBAAkBoN,EAAAA,EAAAA,IACjBd,EAAYsB,MAAMJ,YAEnBjM,YAAY6L,EAAAA,EAAAA,IAAkBd,EAAYsB,MAAMxS,MAChDyS,OAAQ,aAIP,OAHAvB,EAAYsB,MAAMC,QACfT,EAAAA,EAAAA,IAAkBd,EAAYsB,MAAMC,QACpCrM,EAAAA,GAAQ,QAId8B,wBAAyB,CACxB/B,YAAY6L,EAAAA,EAAAA,IAAkBpR,EAAgBZ,MAC9CyI,iBAAiBuJ,EAAAA,EAAAA,IAAkBpR,EAAgB+R,YAEpD9N,wBAAwBmN,EAAAA,EAAAA,IAAkBf,EAAM2B,kBAChDnB,qBACAJ,gBACApU,SAAU,oBACV4V,sBAAuB,CACtBC,sBAAsBd,EAAAA,EAAAA,IAAkBb,EAAO4B,gBAC/CC,6BAA6BhB,EAAAA,EAAAA,IAC5Bb,EAAO8B,uBAERC,gBAAgBlB,EAAAA,EAAAA,IAAkBb,EAAO+B,gBACzCC,aAAanB,EAAAA,EAAAA,IAAkBb,EAAOgC,aACtCC,YAAYpB,EAAAA,EAAAA,IAAkBb,EAAOiC,cAKjCpK,EAAsBZ,EACzBhL,EAAQyF,YACRzF,EAAQC,cAELgW,KACLlB,EAAiBV,sBACjB3T,aAAAA,EAAAA,EAAmBwV,kBAedC,GAC2B,QAAhCvK,EAAAA,EAAoB9J,oBAApB8J,IAAAA,OAAAA,EAAAA,EAAkC5I,QAClCC,EAAAA,GAAiBE,sBAEZiT,IACmC,WAAvC3V,aAAAA,EAAAA,EAA8BuC,OAC9BxC,IACDH,EAAcgB,kBAAoB,E,IAgBhBV,GAlCdoU,GAoBL,OACC,UAACrP,MAAAA,CACAiB,IAAKC,GAAOyP,eACXtB,EAAiBxN,kBAAkBC,iBACnCuL,EACAgC,EAAiBxN,kBAAkB4C,W,WAGpC,UAACzE,MAAAA,CAAIiB,IAAKC,GAAO0P,mB,WAChB,SAAC5Q,MAAAA,CAAIiB,KA7BHoO,SAAgC,QAAhCA,GAAAA,EAAkBpH,sBAAlBoH,IAAAA,QAAAA,EAAAA,GAAkCjH,aAC9BlH,GAAO2P,yBACbxB,EAAiBxN,kBAAkBC,kBAG9BZ,GAAO4P,gBACbzB,EAAiBxN,kBAAkBC,mBACjCuN,EAAiBd,e,UAuBjB,SAACxG,GAAsBA,CACtB7J,QAAS5D,EAAQyF,YAAY7B,QAC7B8J,cAAe1N,EAAQC,cAAc2D,QACrC+J,eAAgBoH,EAAiBpH,eACjCC,aAAwC,QAA1BjN,GAAY,QAAZA,EAAAA,EAAO8V,aAAP9V,IAAAA,OAAAA,EAAAA,EAAciD,QAAQoE,YAAtBrH,IAAAA,GAAAA,GAA8B,cAG9C,UAAC+E,MAAAA,CAAIiB,IAAKC,GAAO8P,iBAAiBP,G,UAChCC,KACA,SAACpM,EAA4BA,CAC5B5I,YAAaf,EAAcgB,iBAC3BmF,SAAUuO,EACVrL,KAAMjJ,aAAAA,EAAAA,EAA8BiJ,QAIrCpJ,aAAAA,EAAAA,EAAgBqW,aAChB5B,EAAiBU,wBAChB,SAAC/P,MAAAA,CAAIiB,IAAKoL,GAAgBI,a,UACzB,SAACyE,EAAAA,EAAMA,CACNjD,eACCrT,EAAeqT,eAEhBjK,KAAM,CACLmN,SACCvW,EAAeoJ,KAAKoN,YAEtBH,WAAYrW,EAAeqW,WAC3BlB,sBACCV,EAAiBU,sBAElBzN,KAAM,cAIV,SAACtC,MAAAA,CAAIiB,IAAKoL,GAAgBG,e,UACzB,SAACrH,EAAoBA,CACpBpF,YAAazF,EAAQyF,YACrBxF,cAAeD,EAAQC,cACvB6K,wBACCiK,EAAiBjK,6BAKlBmL,IACD,SAACtK,GAAoBA,CACpBC,oBAAqBA,EACrBC,kBAAmBhH,EACnBC,oBAAqBA,EACrByD,mBACCwM,EAAiBxM,mBAElBC,qBACCuM,EAAiBvM,0BAKpBuM,EAAiBd,eACjB,UAACvO,MAAAA,CACAiB,IAAKC,GAAOmQ,sBACXhC,EAAiBxN,kBAAkBC,kB,WAGpC,SAACgE,EAA2BA,CAC3BtG,aAAcA,EACdsB,SAAUuO,EAAiB3M,oBAC3BqD,cAAe7E,GAAO8E,sBAAqB,MAE5C,SAACsB,GAAsBA,CACtBxG,SAAUuO,EAAiBd,cAC3BpU,SAAUkV,EAAiBlV,WAM3BkV,EAAiBiC,sBAGnB,SAACxL,EAA2BA,CAC3BtG,aAAcA,EACdsB,SAAUuO,EAAiB3M,oBAC3BqD,cAAe7E,GAAO8E,sBAAqB,KAG5CuK,IACA,SAACvQ,MAAAA,CACAiB,IAAKC,GAAOqQ,qBACXlC,EAAiBxN,kBAAkBC,kB,UAGpC,SAAC0P,EAAAA,EAAWA,CACXC,sBAAuB3D,EACvB4D,UAAW7D,EACXxT,qBAAsBA,EACtB4T,eAAgBA,EAChBjP,YAAa,oCACb2S,YAAa3W,EACbC,OAAQoU,EAAiBV,mBACzBZ,WAAYA,EACZC,UAAWA,EACX4D,gBAAgBnP,EAAAA,EAAAA,GACf4M,EAAiBxM,oBAElB1D,WAAYA,OAIf,SAACa,MAAAA,CAAIiB,IAAKC,GAAO2Q,sB,UAChB,SAACC,EAAAA,EAAeA,CACfrN,WAAWyK,EAAAA,EAAAA,IAAkBf,EAAM4D,UAIpCtB,IACA,UAACzQ,MAAAA,CAAIiB,IAAKC,GAAO8Q,kB,WAChB,UAAChP,OAAAA,CAAK/B,IAAKC,GAAO+Q,a,UAAc,8BACH,QAE7B,SAAC/P,EAAAA,EAAMA,CACNK,SAAS,UACTjB,QAASjC,EACTmD,aAActB,GAAO5E,YACpB+S,EAAiBvM,sB,SAElB,0BAOHgK,IACA,SAAC9M,MAAAA,CAAIiB,IAAKC,GAAOgR,sB,UAChB,SAAClS,MAAAA,CAAIiB,IAAKC,GAAO0P,mB,UAChB,SAAC9E,GAAwBA,CACxBxP,YACC4J,EAAoB9J,aAErB2P,sBACCjM,EAAiBR,mBAElB2K,uBACCoF,EAAiBvM,qBAElBkJ,kBACC1G,EAAkB,KAAO0G,U,EAU3B9K,GAAS,CACdyP,eAAgB,SACfrB,EACA6C,G,IACA1N,EAAAA,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,GAAoB,U,OAChBxD,EAAAA,EAAAA,KAAGA,KACOqO,EACL7K,EACP0N,EAAc,oBAAsB,GAKpChP,EAAAA,GAAKC,OACkBE,EAAAA,GAAQ,G,EAOlCsN,oBAAoB3P,EAAAA,EAAAA,KAAGA,KAKpBkC,EAAAA,GAAKC,OAIQI,EAAAA,EAAM,GAIPA,EAAAA,EAAM,GAElBL,EAAAA,GAAKuB,QAILvB,EAAAA,GAAKiP,KAGL/F,GAAgBC,iBAEnBtG,qBAAuBqM,IAAwBpR,EAAAA,EAAAA,KAAGA,KAC/CqR,EAAAA,GAAMlP,OAEOI,EAAAA,EAAM,GAInBL,EAAAA,GAAKC,OACQI,EAAAA,EAAM,GAElB6O,GACCpR,EAAAA,EAAAA,KAAGA,OAIHA,EAAAA,EAAAA,KAAGA,KACcuC,EAAAA,EAAM,KAM5BsN,gBAAiB,CAACxB,EAAoBiD,KAA4BtR,EAAAA,EAAAA,KAAGA,KAC3DsR,EAAiB,IAAM,IAC9BD,EAAAA,GAAMlP,OACLmP,EACC,GACA,iCAA0C,OAAT/O,EAAAA,EAAM,GAAG,QAG5CL,EAAAA,GAAKC,OAGQkM,EAGbjD,GAAgBE,cAEnBsE,yBAA2BvB,IAAuBrO,EAAAA,EAAAA,KAAGA,KAGlDuR,EAAAA,GAAQC,aAAaC,IAAItP,OAGzBD,EAAAA,GAAKC,OAGQkM,EAEbjD,GAAgBE,cAEnByE,iBAAmB2B,IAA+B1R,EAAAA,EAAAA,KAAGA,KAElDkC,EAAAA,GAAKC,OAEMuP,EAAoB,IAAM,cAGxCtB,sBAAwB/B,IAAuBrO,EAAAA,EAAAA,KAAGA,KAEnCqO,EACZnM,EAAAA,GAAKC,QAMRmO,qBAAuBjC,IAAuBrO,EAAAA,EAAAA,KAAGA,KAElCqO,EACZnM,EAAAA,GAAKC,QAQRyO,uBAAuB5Q,EAAAA,EAAAA,KAAGA,KAEvBkC,EAAAA,GAAKC,OAOQI,EAAAA,EAAM,IAEtBwO,mBAAmB/Q,EAAAA,EAAAA,KAAGA,KACnBwE,EAAAA,IAKYjC,EAAAA,EAAM,GAElBL,EAAAA,GAAKC,QAIR6O,cAAchR,EAAAA,EAAAA,KAAGA,KACdsC,EAAAA,IAGAJ,EAAAA,GAAKC,QAIR9G,YAAc,I,IAAEmT,QAASmD,GAA8B,E,OAAK3R,EAAAA,EAAAA,KAAGA,KAC5DwC,EAAAA,IACOmP,EAAgB9Q,iBAAgB,EAM1CoQ,uBAAuBjR,EAAAA,EAAAA,KAAGA,KACDqC,EAAAA,GAAQ,GAClBE,EAAAA,EAAM,KAIhBqP,IAAc5Y,EAAAA,EAAAA,IAAc4S,GAAkB,qBAC9CiG,IAAYxS,EAAAA,EAAAA,IAAuBuM,GAAkB,oB,6DExnBpD,SAASjC,IACf,MAAOmI,EAASC,IAAcpa,EAAAA,EAAAA,WAAS,IAChC4R,EAAOyI,IAAYra,EAAAA,EAAAA,UAAS,IAS7Bsa,EAAkC,IAAxB1I,EAAMxM,OAAOiH,OACvBkO,GAAUC,EAAAA,EAAAA,IAAa5I,KAAU6I,EAAAA,EAAAA,IAA8B7I,GAErE,IAAIC,EAmBJ,OAlBIsI,GAAWG,EACdzI,EAAa,kCACHsI,IAAYI,IACtB1I,EAAa,sCAeP,CAAED,QAAOC,aAAYC,YA7BP4I,IACpBL,EAASK,EAAE3J,OAAOwB,OACd4H,GACHC,GAAW,EACZ,EAyBwCrI,aAZnBJ,GACJ+I,IAChBA,EAAEC,iBACEJ,EACH5I,IAEAyI,GAAW,EACZ,EAMH,C,6DCnCA,MAAMQ,EACL,2DAOM,SAAStH,EACfC,EACAsH,EACAC,EACAC,EACAvH,GAEA,MAAOpC,EAAgB4J,IAAqBhb,EAAAA,EAAAA,UAC3CwR,EAAAA,EAAeyJ,SAgChB,MAAO,CAAE7J,iBAAgBiC,eA7BDzB,IACvB,MAAMsJ,EAA0C,CAC/CtJ,QACA2B,iBACAsH,mBACAC,oBACAC,gBACAvH,kBAGDwH,EAAkBxJ,EAAAA,EAAeqB,YACjCsI,MAAMP,EAAkC,CACvCja,KAAMya,KAAKC,UAAUH,GACrBI,OAAQ,OACRC,QAAS,CACR,eAAgB,sBAGhBC,MAAMC,IACDA,EAASC,IAGbV,EAAkBxJ,EAAAA,EAAeC,YACjCkK,EAAAA,EAAAA,IAA8BpI,IAH9ByH,EAAkBxJ,EAAAA,EAAetL,MAIlC,IAEA0V,OAAM,IAAMZ,EAAkBxJ,EAAAA,EAAetL,QAAO,EAIxD,C,yGC3DO,WAAKsL,G,6FAAAA,C,CAAL,C,IASP,MAKamK,EACZE,IAEA,MAAMC,EAAQ,IAAItb,KACZub,EAAe,IAAIvb,KAAKA,KAAKwb,MAAMH,IATzB,IAACI,EAAaC,GAW9BC,EAAAA,EAAAA,GAAU,CACThc,KAAM,gCACNoS,MAAO,IACP6J,YAdgBH,EAcKH,EAdQI,EAcDH,EAZtBM,KAAKC,OAAOJ,EAAIK,UAAYN,EAAMM,WADjB,SActB,EAGUC,EAAiB,OACpBC,EAAAA,EAAAA,GAAU,CAAEtc,KAAM,kCAKtBuc,EAAoB,WAObpL,EAAwBhN,GALT,CAACA,GAC5BoY,EAAkBC,KAAKrY,GAKvBsY,CAAoBtY,GAAQA,EAHN,CAACA,GAAyB,MAAQA,EAGrBuY,CAAevY,GAItCkW,EAAgB5I,GAE3B,wJACS+K,KAAKG,OAAOlL,GAAOmL,eAGjBtC,EAAiC7I,GAEtCA,EAAMvF,QAAU,G,0DCrDxB,MAAM2Q,EAAgB,IAAIC,IAEpBrQ,EAAyBsQ,GAC9BA,EAAMC,QAAQ,SAAU,IAAI/X,OAWvBuH,EAAiBuQ,IACtB,MAAOE,EAAYC,IAAiBrd,EAAAA,EAAAA,UAASgd,EAAcM,IAAIJ,IAS/D,OAPApc,EAAAA,EAAAA,YAAU,KACLsc,IACJJ,EAAczc,IAAI2c,EAAOhc,OAAOqc,WAAWL,IAC3CG,EAAcL,EAAcM,IAAIJ,IAAO,GACrC,CAACE,EAAYF,KAGTM,EAAAA,EAAAA,uBACLC,IACAL,SAAAA,EAAYjc,iBAAiB,SAAUsc,GAEhC,KACNL,SAAAA,EAAYhc,oBAAoB,SAAUqc,EAAS,KAGrD,OAAQL,aAAAA,EAAAA,EAAYM,WACpB,KAAM,I,wKCtCR,MAAM,MACJC,EAAK,SACLC,EAAQ,QACRlT,EAAO,MACP4H,EAAK,QACLzK,EAAO,KACPgW,EAAI,QACJC,EAAO,MACPC,EAAK,QACLC,EAAO,UACPC,EAAS,KACTC,EAAI,cACJlH,EAAa,MACbpW,GACEud,EAAAA,EACEzH,EAAa,CACjB0H,QAASD,EAAAA,EAAQzT,QAAQ,KACzB2T,UAAWF,EAAAA,EAAQzT,QAAQ,IAC3B4T,QAASH,EAAAA,EAAQzT,QAAQ,IACzB6T,WAAYJ,EAAAA,EAAQR,MAAM,KAC1Ba,gBAAiB,UACjBC,aAAcN,EAAAA,EAAQR,MAAM,KAC5Be,kBAAmB,UACnBC,iBAAkB,UAClBC,MAAOT,EAAAA,EAAQzT,QAAQ,KACvBmU,aAAcV,EAAAA,EAAQR,MAAM,MAWxBmB,GARKX,EAAAA,EAAQR,MAAM,KACTQ,EAAAA,EAAQzT,QAAQ,KAClByT,EAAAA,EAAQzT,QAAQ,KAEdyT,EAAAA,EAAQR,MAAM,KAEVQ,EAAAA,EAAQR,MAAM,KAEP,CACzBS,QAASD,EAAAA,EAAQP,SAAS,KAC1BW,WAAYJ,EAAAA,EAAQzT,QAAQ,GAC5B8T,gBAAiB,UACjBC,aAAcN,EAAAA,EAAQP,SAAS,KAC/Bc,kBAAmB,UACnBC,iBAAkB,YA2BdI,GAxBKZ,EAAAA,EAAQzT,QAAQ,IACdyT,EAAAA,EAAQzT,QAAQ,IAClByT,EAAAA,EAAQtW,QAAQ,KAClBsW,EAAAA,EAAQ7L,MAAM,KACR6L,EAAAA,EAAQR,MAAM,KACpBQ,EAAAA,EAAQzT,QAAQ,IACTyT,EAAAA,EAAQR,MAAM,KAChBQ,EAAAA,EAAQR,MAAM,KACbQ,EAAAA,EAAQR,MAAM,KAChBQ,EAAAA,EAAQvd,MAAM,KAGhBud,EAAAA,EAAQR,MAAM,KACZQ,EAAAA,EAAQR,MAAM,KAChBQ,EAAAA,EAAQtW,QAAQ,KAClBsW,EAAAA,EAAQ7L,MAAM,KACR6L,EAAAA,EAAQzT,QAAQ,KACtByT,EAAAA,EAAQR,MAAM,KACPQ,EAAAA,EAAQzT,QAAQ,KAClByT,EAAAA,EAAQzT,QAAQ,KAGfyT,EAAAA,EAAQzT,QAAQ,GAElB,CACX0T,QAASD,EAAAA,EAAQzT,QAAQ,MAKrBsU,GAFKb,EAAAA,EAAQR,MAAM,KAEJ,CACnBS,QAASD,EAAAA,EAAQzT,QAAQ,KAErBpG,EAAO,CACX8Z,QAASD,EAAAA,EAAQzT,QAAQ,GACzBuU,WAAYd,EAAAA,EAAQzT,QAAQ,IAC5B7C,QAASsW,EAAAA,EAAQtW,QAAQ,KACzByK,MAAO6L,EAAAA,EAAQ7L,MAAM,KACrBiM,WAAYJ,EAAAA,EAAQzT,QAAQ,KAC5B+T,aAAcN,EAAAA,EAAQR,MAAM,KAC5BuB,YAAaf,EAAAA,EAAQR,MAAM,KAC3BwB,cAAehB,EAAAA,EAAQR,MAAM,KAC7ByB,gBAAiBjB,EAAAA,EAAQzT,QAAQ,GACjC2U,UAAWlB,EAAAA,EAAQzT,QAAQ,GAC3B4U,WAAYnB,EAAAA,EAAQzT,QAAQ,GAC5BmH,WAAYsM,EAAAA,EAAQzT,QAAQ,GAC5B6U,qBAAsBpB,EAAAA,EAAQzT,QAAQ,IACtCmU,aAAcV,EAAAA,EAAQR,MAAM,KAE5B6B,WAAYrB,EAAAA,EAAQR,MAAM,KAE1B8B,WAAYtB,EAAAA,EAAQzT,QAAQ,GAC5BgV,qBAAsBvB,EAAAA,EAAQzT,QAAQ,IACtCiV,YAAaxB,EAAAA,EAAQN,KAAK,MAEtB+B,EAAY,CAChBxB,QAASD,EAAAA,EAAQzT,QAAQ,KACzBuU,WAAYd,EAAAA,EAAQR,MAAM,KAC1B9V,QAASsW,EAAAA,EAAQtW,QAAQ,KACzByK,MAAO6L,EAAAA,EAAQ7L,MAAM,KACrBiM,WAAYJ,EAAAA,EAAQR,MAAM,KAC1Bc,aAAcN,EAAAA,EAAQzT,QAAQ,KAC9BwU,YAAaf,EAAAA,EAAQzT,QAAQ,KAC7ByU,cAAehB,EAAAA,EAAQzT,QAAQ,KAC/BmV,mBAAoB1B,EAAAA,EAAQP,SAAS,KACrCyB,UAAWlB,EAAAA,EAAQzT,QAAQ,KAC3B4U,WAAYnB,EAAAA,EAAQzT,QAAQ,KAC5B6U,qBAAsBpB,EAAAA,EAAQR,MAAM,MAEhCmC,EAAe,CACnB1B,QAASD,EAAAA,EAAQzT,QAAQ,GACzBuU,WAAYd,EAAAA,EAAQzT,QAAQ,IAC5B6T,WAAYJ,EAAAA,EAAQzT,QAAQ,KAC5B+T,aAAcN,EAAAA,EAAQzT,QAAQ,GAC9BwU,YAAaf,EAAAA,EAAQzT,QAAQ,GAC7ByU,cAAehB,EAAAA,EAAQzT,QAAQ,G,6QCrHjC,MAAMqV,EAAO,I,IAAA,KAAErW,EAAI,MAAEsW,GAAO,E,OAAqBC,EAAAA,EAAAA,KAC/C,MACA,CACEzN,MAAO9I,EAAOwW,EAAAA,GAASxW,QAAQ,EAC/ByW,YAAQ,EACRC,QAAS,cACTC,MAAO,6BACPC,WAAW,EACX,eAAe,EACfC,UAA0BN,EAAAA,EAAAA,KACxB,OACA,CACEO,SAAU,UACVC,SAAU,UACVC,EAAG,8HACHC,KAAMX,aAAAA,EAAAA,EAAOW,QAGnB,EAEInX,EAAY,I,IAAA,KAChBE,EAAI,MACJsW,EAAK,0BACLY,GAA4B,GAC7B,E,OAAqBC,EAAAA,EAAAA,MAAKC,EAAAA,SAAU,CAAEP,SAAU,EAC/BN,EAAAA,EAAAA,KAAIF,EAAK,CAAErW,OAAMsW,UACjCY,GAA4CX,EAAAA,EAAAA,KAC1C,OACA,CACE5X,KAAKA,EAAAA,EAAAA,KAAGA,IACP0Y,EAAAA,GAEDR,SAAU,UAEV,KACF,C","sources":["webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/utils/localStorage.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/utils/withCloseable.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useEscapeShortcut.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/common/BannerWrapper.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerArticleCountOptOut.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/CustomArticleCountCopy.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerArticleCount.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/BannerText.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerBody.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerCloseButton.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerCtas.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/shared/ResponsiveImage.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerVisual.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerHeader.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerReminderSignedOut.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/components/DesignableBannerReminder.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/styles/templateStyles.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/banners/designableBanner/DesignableBanner.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useReminder.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useContributionsReminderEmailForm.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useContributionsReminderSignup.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/reminders.ts","webpack://@guardian/dotcom-rendering/./src/lib/useMatchMedia.ts","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/foundations/__deprecated__/colour/palette.js","webpack://@guardian/dotcom-rendering/../node_modules/.pnpm/@guardian+source@8.0.0_@emotion+react@11.11.3_@types+react@18.3.1_react@18.3.1_tslib@2.6.2_typescript@5.5.3/node_modules/@guardian/source/dist/react-components/__generated__/icons/SvgCross.js"],"sourcesContent":["/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/localStorage.ts\n */\nimport { storage } from '@guardian/libs';\nimport type { BannerChannel } from '@guardian/support-dotcom-components/dist/shared/types';\n\ntype BannerLastClosedAt =\n\t| 'engagementBannerLastClosedAt'\n\t| 'subscriptionBannerLastClosedAt'\n\t| 'signInBannerLastClosedAt'\n\t| 'abandonedBasketLastClosedAt';\n\nconst setBannerClosedTimestamp = (name: BannerLastClosedAt): void =>\n\tstorage.local.set(`gu.prefs.${name}`, new Date().toISOString());\n\nconst bannerChannelToLastClosedMap = {\n\tcontributions: 'engagementBannerLastClosedAt',\n\tsubscriptions: 'subscriptionBannerLastClosedAt',\n\tsignIn: 'signInBannerLastClosedAt',\n\tabandonedBasket: 'abandonedBasketLastClosedAt',\n} as const satisfies Record<BannerChannel, BannerLastClosedAt>;\n\nexport const setChannelClosedTimestamp = (channel: BannerChannel): void => {\n\tsetBannerClosedTimestamp(bannerChannelToLastClosedMap[channel]);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/hocs/withCloseable.tsx\n */\nimport type { BannerProps } from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useState } from 'react';\nimport { useEscapeShortcut } from '../../hooks/useEscapeShortcut';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { setChannelClosedTimestamp } from './localStorage';\n\nexport interface CloseableBannerProps extends BannerProps {\n\tonClose: () => void;\n}\n\nconst withCloseable = (\n\tCloseableBanner: ReactComponent<CloseableBannerProps>,\n): ReactComponent<BannerProps> => {\n\tconst Banner: ReactComponent<BannerProps> = (bannerProps: BannerProps) => {\n\t\tconst [isOpen, setIsOpen] = useState(true);\n\n\t\tconst onClose = (): void => {\n\t\t\tsetChannelClosedTimestamp(bannerProps.bannerChannel);\n\t\t\tsetIsOpen(false);\n\t\t\tdocument.body.focus();\n\t\t};\n\n\t\tuseEscapeShortcut(onClose);\n\n\t\treturn isOpen ? (\n\t\t\t<CloseableBanner onClose={onClose} {...bannerProps} />\n\t\t) : (\n\t\t\t<></>\n\t\t);\n\t};\n\treturn Banner;\n};\n\nexport { withCloseable };\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/hooks/useEscapeShortcut.ts\n */\nimport { useEffect } from 'react';\n\n// Pass a function to run when the user hits the escape key\n// Useful for enabling a keyboard shortcut for dismissing banners\nexport function useEscapeShortcut(\n\teventHandler: (event: KeyboardEvent) => void,\n): void {\n\tuseEffect(() => {\n\t\tfunction handleEscapeKeydown(event: KeyboardEvent) {\n\t\t\t// IE key name is 'Esc', because IE\n\t\t\tconst isEscapeKey = event.key === 'Escape' || event.key === 'Esc';\n\t\t\tif (isEscapeKey) {\n\t\t\t\teventHandler(event);\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('keydown', handleEscapeKeydown);\n\n\t\treturn () => window.removeEventListener('keydown', handleEscapeKeydown);\n\t}, [eventHandler]);\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/common/BannerWrapper.tsx\n */\nimport {\n\tbannerSchema,\n\tcontainsNonArticleCountPlaceholder,\n\tgetReminderFields,\n\treplaceNonArticleCountPlaceholders,\n\tSecondaryCtaType,\n} from '@guardian/support-dotcom-components';\nimport type {\n\tBannerContent,\n\tBannerProps,\n\tCta,\n\tSecondaryCta,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useEffect } from 'react';\nimport { useIsInView } from '../../../../lib/useIsInView';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { replaceArticleCount } from '../../lib/replaceArticleCount';\nimport {\n\taddAbandonedBasketAndTrackingParamsToUrl,\n\taddRegionIdAndTrackingParamsToSupportUrl,\n\taddTrackingParamsToProfileUrl,\n\tcreateClickEventFromTracking,\n\tcreateInsertEventFromTracking,\n\tcreateViewEventFromTracking,\n\tisProfileUrl,\n} from '../../lib/tracking';\nimport type { CloseableBannerProps } from '../utils/withCloseable';\nimport { withCloseable } from '../utils/withCloseable';\nimport type {\n\tBannerEnrichedCta,\n\tBannerEnrichedSecondaryCta,\n\tBannerId,\n\tBannerRenderedContent,\n\tBannerRenderProps,\n} from './types';\n\nfunction getComponentIds(bannerId: BannerId) {\n\treturn {\n\t\tclose: `${bannerId} : close`,\n\t\tcta: `${bannerId} : cta`,\n\t\tsecondaryCta: `${bannerId} : secondary-cta`,\n\t\tnotNow: `${bannerId} : not now`,\n\t\tsignIn: `${bannerId} : sign in`,\n\t\treminderCta: `${bannerId} : reminder-cta`,\n\t\treminderSet: `${bannerId} : reminder-set`,\n\t\treminderClose: `${bannerId} : reminder-close`,\n\t};\n}\n\nexport const getParagraphsOrMessageText = (\n\tparas: string[] | undefined,\n\ttext: string | undefined,\n): string[] => {\n\tconst bodyCopy = [];\n\n\tif (paras != null) {\n\t\tbodyCopy.push(...paras);\n\t} else if (text != null) {\n\t\tbodyCopy.push(text);\n\t}\n\treturn bodyCopy;\n};\n\nconst withBannerData =\n\t(\n\t\tBanner: ReactComponent<BannerRenderProps>,\n\t\tbannerId: BannerId,\n\t): ReactComponent<CloseableBannerProps> =>\n\t(bannerProps) => {\n\t\tconst {\n\t\t\ttracking,\n\t\t\tsubmitComponentEvent,\n\t\t\tonClose,\n\t\t\tcontent,\n\t\t\tmobileContent,\n\t\t\tcountryCode,\n\t\t\tprices,\n\t\t\tfetchEmail,\n\t\t\tarticleCounts,\n\t\t\ttickerSettings,\n\t\t\tisSupporter,\n\t\t\tseparateArticleCount,\n\t\t\tseparateArticleCountSettings,\n\t\t\tchoiceCardAmounts,\n\t\t\tdesign,\n\t\t\tbannerChannel,\n\t\t\tabandonedBasket,\n\t\t} = bannerProps;\n\n\t\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\t\tdebounce: true,\n\t\t\tthreshold: 0,\n\t\t});\n\n\t\tuseEffect(() => {\n\t\t\tif (hasBeenSeen && submitComponentEvent) {\n\t\t\t\tsubmitComponentEvent(\n\t\t\t\t\tcreateViewEventFromTracking(\n\t\t\t\t\t\ttracking,\n\t\t\t\t\t\ttracking.campaignCode,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}, [hasBeenSeen, submitComponentEvent, tracking]);\n\n\t\tuseEffect(() => {\n\t\t\tif (submitComponentEvent) {\n\t\t\t\tsubmitComponentEvent(\n\t\t\t\t\tcreateInsertEventFromTracking(\n\t\t\t\t\t\ttracking,\n\t\t\t\t\t\ttracking.campaignCode,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}, [submitComponentEvent, tracking]);\n\n\t\tconst numArticles = articleCounts.forTargetedWeeks;\n\n\t\tconst cleanParagraphsOrMessageText = (\n\t\t\tparas: string[] | undefined,\n\t\t\ttext: string | undefined,\n\t\t): string[] => {\n\t\t\tconst originalCopy = getParagraphsOrMessageText(paras, text);\n\n\t\t\treturn originalCopy.map((p) =>\n\t\t\t\treplaceNonArticleCountPlaceholders(\n\t\t\t\t\tp,\n\t\t\t\t\tcountryCode,\n\t\t\t\t\tprices,\n\t\t\t\t).trim(),\n\t\t\t);\n\t\t};\n\n\t\tconst finaliseParagraphs = (\n\t\t\tparas: string[],\n\t\t): (Array<JSX.Element> | JSX.Element)[] => {\n\t\t\treturn paras.map((p) =>\n\t\t\t\treplaceArticleCount(p, numArticles, 'banner'),\n\t\t\t);\n\t\t};\n\n\t\tconst paragraphsContainNonArticleCountPlaceholder = (\n\t\t\tparas: string[],\n\t\t): boolean => paras.some((p) => containsNonArticleCountPlaceholder(p));\n\n\t\tconst componentIds = getComponentIds(bannerId);\n\n\t\t// For safety, this function throws if not all placeholders are replaced\n\t\tconst buildRenderedContent = (\n\t\t\tbannerContent: BannerContent,\n\t\t): BannerRenderedContent => {\n\t\t\tconst buildEnrichedCta = (cta: Cta): BannerEnrichedCta => {\n\t\t\t\tif (isProfileUrl(cta.baseUrl)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tctaUrl: addTrackingParamsToProfileUrl(\n\t\t\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\t\t\ttracking,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tctaText: cta.text,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (bannerChannel === 'abandonedBasket' && abandonedBasket) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tctaUrl: addAbandonedBasketAndTrackingParamsToUrl(\n\t\t\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\t\t\tabandonedBasket,\n\t\t\t\t\t\t\ttracking,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tctaText: cta.text,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tctaUrl: addRegionIdAndTrackingParamsToSupportUrl(\n\t\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\t\ttracking,\n\t\t\t\t\t\tnumArticles,\n\t\t\t\t\t\tcountryCode,\n\t\t\t\t\t),\n\t\t\t\t\tctaText: cta.text,\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tconst buildEnrichedSecondaryCta = (\n\t\t\t\tsecondaryCta: SecondaryCta,\n\t\t\t): BannerEnrichedSecondaryCta => {\n\t\t\t\tif (secondaryCta.type === SecondaryCtaType.Custom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: SecondaryCtaType.Custom,\n\t\t\t\t\t\tcta: buildEnrichedCta(secondaryCta.cta),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: SecondaryCtaType.ContributionsReminder,\n\t\t\t\t\treminderFields: getReminderFields(countryCode),\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tconst primaryCta = bannerContent.cta\n\t\t\t\t? buildEnrichedCta(bannerContent.cta)\n\t\t\t\t: null;\n\t\t\tconst secondaryCta = bannerContent.secondaryCta\n\t\t\t\t? buildEnrichedSecondaryCta(bannerContent.secondaryCta)\n\t\t\t\t: null;\n\n\t\t\tconst cleanHighlightedText =\n\t\t\t\tbannerContent.highlightedText &&\n\t\t\t\treplaceNonArticleCountPlaceholders(\n\t\t\t\t\tbannerContent.highlightedText,\n\t\t\t\t\tcountryCode,\n\t\t\t\t\tprices,\n\t\t\t\t).trim();\n\n\t\t\tconst cleanHeading = replaceNonArticleCountPlaceholders(\n\t\t\t\tbannerContent.heading,\n\t\t\t\tcountryCode,\n\t\t\t\tprices,\n\t\t\t).trim();\n\n\t\t\tconst cleanParagraphs = cleanParagraphsOrMessageText(\n\t\t\t\tbannerContent.paragraphs,\n\t\t\t\tbannerContent.messageText,\n\t\t\t);\n\n\t\t\tconst copyHasPlaceholder =\n\t\t\t\tparagraphsContainNonArticleCountPlaceholder(cleanParagraphs) ||\n\t\t\t\t(!!cleanHighlightedText &&\n\t\t\t\t\tcontainsNonArticleCountPlaceholder(cleanHighlightedText)) ||\n\t\t\t\t(!!cleanHeading &&\n\t\t\t\t\tcontainsNonArticleCountPlaceholder(cleanHeading));\n\n\t\t\tconst headingWithArticleCount = cleanHeading\n\t\t\t\t? replaceArticleCount(cleanHeading, numArticles, 'banner')\n\t\t\t\t: null;\n\n\t\t\tconst highlightedTextWithArticleCount = cleanHighlightedText\n\t\t\t\t? replaceArticleCount(\n\t\t\t\t\t\tcleanHighlightedText,\n\t\t\t\t\t\tnumArticles,\n\t\t\t\t\t\t'banner',\n\t\t\t\t  )\n\t\t\t\t: null;\n\n\t\t\tif (copyHasPlaceholder) {\n\t\t\t\tthrow Error('Banner copy contains placeholders, abandoning.');\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thighlightedText: highlightedTextWithArticleCount,\n\t\t\t\tparagraphs: finaliseParagraphs(cleanParagraphs),\n\t\t\t\theading: headingWithArticleCount,\n\t\t\t\tprimaryCta,\n\t\t\t\tsecondaryCta,\n\t\t\t};\n\t\t};\n\n\t\tconst clickHandlerFor = (componentId: string, close: boolean) => {\n\t\t\treturn (): void => {\n\t\t\t\tconst componentClickEvent = createClickEventFromTracking(\n\t\t\t\t\ttracking,\n\t\t\t\t\tcomponentId,\n\t\t\t\t);\n\t\t\t\tif (submitComponentEvent) {\n\t\t\t\t\tsubmitComponentEvent(componentClickEvent);\n\t\t\t\t}\n\t\t\t\tif (close) {\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\tconst onCtaClick = clickHandlerFor(componentIds.cta, true);\n\t\tconst onSecondaryCtaClick = clickHandlerFor(\n\t\t\tcomponentIds.secondaryCta,\n\t\t\ttrue,\n\t\t);\n\t\tconst onReminderCtaClick = clickHandlerFor(\n\t\t\tcomponentIds.reminderCta,\n\t\t\tfalse,\n\t\t);\n\t\tconst onReminderSetClick = clickHandlerFor(\n\t\t\tcomponentIds.reminderSet,\n\t\t\tfalse,\n\t\t);\n\t\tconst onReminderCloseClick = clickHandlerFor(\n\t\t\tcomponentIds.reminderClose,\n\t\t\tfalse,\n\t\t);\n\t\tconst onCloseClick = clickHandlerFor(componentIds.close, true);\n\t\tconst onNotNowClick = clickHandlerFor(componentIds.notNow, true);\n\t\tconst onSignInClick = clickHandlerFor(componentIds.signIn, false);\n\n\t\ttry {\n\t\t\tconst renderedContent = content && buildRenderedContent(content);\n\t\t\tconst renderedMobileContent =\n\t\t\t\tmobileContent && buildRenderedContent(mobileContent);\n\n\t\t\tif (renderedContent) {\n\t\t\t\tconst props: BannerRenderProps = {\n\t\t\t\t\tonCtaClick,\n\t\t\t\t\tonSecondaryCtaClick,\n\t\t\t\t\treminderTracking: {\n\t\t\t\t\t\tonReminderCtaClick,\n\t\t\t\t\t\tonReminderSetClick,\n\t\t\t\t\t\tonReminderCloseClick,\n\t\t\t\t\t},\n\t\t\t\t\tonCloseClick,\n\t\t\t\t\tonSignInClick,\n\t\t\t\t\tonNotNowClick,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\tmainContent: renderedContent,\n\t\t\t\t\t\tmobileContent: renderedMobileContent ?? renderedContent,\n\t\t\t\t\t},\n\t\t\t\t\tcountryCode,\n\t\t\t\t\tfetchEmail,\n\t\t\t\t\ttickerSettings,\n\t\t\t\t\tisSupporter,\n\t\t\t\t\tarticleCounts,\n\t\t\t\t\tseparateArticleCount,\n\t\t\t\t\tseparateArticleCountSettings,\n\t\t\t\t\tchoiceCardAmounts,\n\t\t\t\t\ttracking,\n\t\t\t\t\tsubmitComponentEvent,\n\t\t\t\t\tdesign,\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={setNode}>\n\t\t\t\t\t\t<Banner {...props} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\n\t\treturn <></>;\n\t};\n\nexport const bannerWrapper = (\n\tBanner: ReactComponent<BannerRenderProps>,\n\tbannerId: BannerId,\n): ReactComponent<BannerProps> =>\n\twithCloseable(withBannerData(Banner, bannerId));\n\nconst validate = (props: unknown): props is BannerProps => {\n\tconst result = bannerSchema.safeParse(props);\n\treturn result.success;\n};\n\nexport const validatedBannerWrapper = (\n\tBanner: ReactComponent<BannerRenderProps>,\n\tbannerId: BannerId,\n): ReactComponent<BannerProps> => {\n\treturn (props: BannerProps) => {\n\t\tif (validate(props)) {\n\t\t\tconst Module = bannerWrapper(Banner, bannerId);\n\t\t\treturn <Module {...props} />;\n\t\t}\n\t\treturn <></>;\n\t};\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerArticleCountOptOut.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tfrom,\n\tneutral,\n\tspace,\n\ttextSans14,\n\ttextSans15,\n\ttextSans17,\n\ttextSansBold17,\n} from '@guardian/source/foundations';\nimport { Button, SvgCross } from '@guardian/source/react-components';\nimport { useState } from 'react';\nimport {\n\taddArticleCountOptOutCookie,\n\tremoveArticleCountFromLocalStorage,\n} from '../../../lib/articleCountOptOut';\nimport type { ReactComponent } from '../../../lib/ReactComponent';\nimport type { BannerTemplateSettings } from '../settings';\nimport { buttonStyles } from '../styles/buttonStyles';\n\n// ---- Component ---- //\n\nexport interface DesignableBannerArticleCountOptOutProps {\n\tnumArticles: number;\n\tnextWord: string | null;\n\tsettings: BannerTemplateSettings;\n}\n\nexport const DesignableBannerArticleCountOptOut: ReactComponent<\n\tDesignableBannerArticleCountOptOutProps\n> = ({\n\tnumArticles,\n\tnextWord,\n\tsettings,\n}: DesignableBannerArticleCountOptOutProps) => {\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [hasOptedOut, setHasOptedOut] = useState(false);\n\n\tconst onOptOut = (): void => {\n\t\taddArticleCountOptOutCookie();\n\t\tremoveArticleCountFromLocalStorage();\n\t\tsetHasOptedOut(true);\n\t};\n\n\tconst onOpen = (): void => {\n\t\tsetIsOpen(true);\n\t};\n\n\tconst onClose = (): void => {\n\t\tsetIsOpen(false);\n\t};\n\n\tconst onToggle = (): void => (isOpen ? onClose() : onOpen());\n\n\treturn (\n\t\t<div css={styles.optOutContainer}>\n\t\t\t<button css={styles.articleCountButton} onClick={onToggle}>\n\t\t\t\t{`${numArticles}${nextWord ? nextWord : ''}`}\n\t\t\t</button>\n\n\t\t\t{isOpen && (\n\t\t\t\t<div css={styles.overlayContainer}>\n\t\t\t\t\t<Overlay\n\t\t\t\t\t\thasOptedOut={hasOptedOut}\n\t\t\t\t\t\tonOptOut={onOptOut}\n\t\t\t\t\t\tonClose={onClose}\n\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\n// ---- Helper Component ---- //\n\nexport interface OverlayProps {\n\thasOptedOut: boolean;\n\tonOptOut: () => void;\n\tonClose: () => void;\n\tsettings: BannerTemplateSettings;\n}\n\nconst Overlay: ReactComponent<OverlayProps> = ({\n\thasOptedOut,\n\tonClose,\n\tonOptOut,\n\tsettings,\n}: OverlayProps) => {\n\treturn (\n\t\t<div\n\t\t\tcss={overlayStyles.overlayContainer(\n\t\t\t\tsettings.containerSettings.backgroundColour,\n\t\t\t\tsettings.articleCountTextColour,\n\t\t\t)}\n\t\t>\n\t\t\t<div css={overlayStyles.overlayHeader}>\n\t\t\t\t<div css={overlayStyles.overlayHeaderText}>\n\t\t\t\t\t{hasOptedOut ? \"You've opted out\" : \"What's this?\"}\n\t\t\t\t</div>\n\n\t\t\t\t<Button\n\t\t\t\t\tonClick={onClose}\n\t\t\t\t\ticon={<SvgCross />}\n\t\t\t\t\thideLabel={true}\n\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\tcssOverrides={buttonStyles(settings.closeButtonSettings)}\n\t\t\t\t>\n\t\t\t\t\tClose\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t<div css={overlayStyles.overlayBody}>\n\t\t\t\t{hasOptedOut\n\t\t\t\t\t? \"Starting from your next page view, we won't count the articles you read or show you this message for three months.\"\n\t\t\t\t\t: 'We would like to remind you how many Guardian articles youâ€™ve enjoyed on this device. Can we continue showing you this?'}\n\t\t\t</div>\n\n\t\t\t{!hasOptedOut && (\n\t\t\t\t<div css={overlayStyles.overlayCtaContainer}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tcssOverrides={buttonStyles(settings.primaryCtaSettings)}\n\t\t\t\t\t>\n\t\t\t\t\t\tYes, that&apos;s OK\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={onOptOut}\n\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tcssOverrides={buttonStyles(\n\t\t\t\t\t\t\tsettings.secondaryCtaSettings,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tNo, opt me out\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div\n\t\t\t\tcss={overlayStyles.overlayNote(settings.articleCountTextColour)}\n\t\t\t>\n\t\t\t\t{hasOptedOut ? (\n\t\t\t\t\t<span>\n\t\t\t\t\t\tIf you have any questions, please{' '}\n\t\t\t\t\t\t<a href=\"https://www.theguardian.com/help/contact-us\">\n\t\t\t\t\t\t\tcontact us.\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t\"Please note that opting out is a permanent action and can't be reversed\"\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// ---- Styles ---- //\n\nconst styles = {\n\toptOutContainer: css`\n\t\tdisplay: inline-block;\n\t`,\n\tarticleCountButton: css`\n\t\tbackground: none;\n\t\tborder: none;\n\t\tpadding: 0;\n\t\tcursor: pointer;\n\t\tborder-bottom: 1px solid;\n\t\t/* stylelint-disable property-disallowed-list */\n\t\tfont-family: inherit;\n\t\tfont-size: inherit;\n\t\tfont-weight: inherit;\n\t\tfont-style: inherit;\n\t\tcolor: inherit;\n\t`,\n\toverlayContainer: css`\n\t\tposition: absolute;\n\t\tz-index: 100;\n\t\ttop: 0px;\n\t\tleft: 0px;\n\t\tdisplay: block;\n\n\t\t${from.tablet} {\n\t\t\ttop: 10px;\n\t\t\tleft: 10px;\n\t\t\twidth: 450px;\n\t\t}\n\t`,\n};\n\nconst overlayStyles = {\n\toverlayContainer: (\n\t\tbackgroundColour: string,\n\t\ttextColour: string = neutral[0],\n\t) => css`\n\t\t${textSans17}\n\t\tpadding: ${space[2]}px;\n\t\tbackground-color: ${backgroundColour};\n\t\tborder: 1px solid ${textColour};\n\t\tbox-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n\t\tcolor: ${textColour};\n\t`,\n\toverlayHeader: css`\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t`,\n\toverlayHeaderText: css`\n\t\t${textSansBold17};\n\t`,\n\toverlayBody: css`\n\t\tmargin-top: ${space[1]}px;\n\t\t${textSans15};\n\t`,\n\toverlayCtaContainer: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\n\t\t> * + * {\n\t\t\tmargin-left: ${space[2]}px;\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\t> * + * {\n\t\t\t\tmargin-left: ${space[3]}px;\n\t\t\t}\n\t\t}\n\t`,\n\toverlayNote: (textColour: string = neutral[0]) => css`\n\t\tmargin-top: ${space[2]}px;\n\t\t${textSans14}\n\t\tfont-style: italic;\n\n\t\ta {\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tcolor: ${textColour} !important;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\ttext-decoration: underline !important;\n\t\t}\n\t`,\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/CustomArticleCountCopy.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tfrom,\n\theadlineBold15,\n\theadlineBold17,\n\tspace,\n} from '@guardian/source/foundations';\nimport type { BannerTemplateSettings } from '../settings';\nimport { DesignableBannerArticleCountOptOut } from './DesignableBannerArticleCountOptOut';\n\nconst styles = {\n\tcontainer: css`\n\t\t${headlineBold15}\n\t\tmargin: 0 0 ${space[1]}px;\n\n\t\t${from.tablet} {\n\t\t\t${headlineBold17}\n\t\t}\n\t`,\n};\n\ninterface CustomArticleCountProps {\n\tcopy: string;\n\tnumArticles: number;\n\tsettings: BannerTemplateSettings;\n}\n\nexport function CustomArticleCountCopy({\n\tcopy,\n\tnumArticles,\n\tsettings,\n}: CustomArticleCountProps): JSX.Element {\n\t/**\n\t * E.g. the string:\n\t *   \"Youâ€™ve read %%ARTICLE_COUNT%% articles in the last few weeks.\"\n\t * needs to be split into:\n\t * - \"Youâ€™ve read\"\n\t * - \"articles\"\n\t * - \"in the last few weeks.\"\n\t */\n\tconst [copyHead, copyTail] = copy.split('%%ARTICLE_COUNT%%');\n\tconst [nextWord, ...rest] = (copyTail ?? '').trim().split(' ');\n\n\treturn (\n\t\t<p css={styles.container}>\n\t\t\t{copyHead}{' '}\n\t\t\t<DesignableBannerArticleCountOptOut\n\t\t\t\tnumArticles={numArticles}\n\t\t\t\tnextWord={` ${nextWord}`}\n\t\t\t\tsettings={settings}\n\t\t\t/>{' '}\n\t\t\t{rest.join(' ')}\n\t\t</p>\n\t);\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerArticleCount.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tfrom,\n\theadlineBold15,\n\theadlineBold17,\n} from '@guardian/source/foundations';\nimport type { BannerTemplateSettings } from '../settings';\nimport { CustomArticleCountCopy } from './CustomArticleCountCopy';\nimport { DesignableBannerArticleCountOptOut } from './DesignableBannerArticleCountOptOut';\n\nexport const containsArticleCountTemplate = (copy: string): boolean =>\n\tcopy.includes('%%ARTICLE_COUNT%%');\n\n// ---- Component ---- //\n\ninterface DesignableBannerArticleCountProps {\n\tnumArticles: number;\n\tsettings: BannerTemplateSettings;\n\tcopy?: string;\n}\nexport function DesignableBannerArticleCount({\n\tcopy,\n\tnumArticles,\n\tsettings,\n}: DesignableBannerArticleCountProps): JSX.Element {\n\tif (copy && containsArticleCountTemplate(copy)) {\n\t\t// Custom article count message\n\t\treturn (\n\t\t\t<CustomArticleCountCopy\n\t\t\t\tnumArticles={numArticles}\n\t\t\t\tcopy={copy}\n\t\t\t\tsettings={settings}\n\t\t\t/>\n\t\t);\n\t} else if (numArticles >= 50) {\n\t\treturn (\n\t\t\t<div css={styles.container(settings.articleCountTextColour)}>\n\t\t\t\tCongratulations on being one of our top readers globally â€“\n\t\t\t\tyou&apos;ve read{' '}\n\t\t\t\t<DesignableBannerArticleCountOptOut\n\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t\tnextWord=\" articles\"\n\t\t\t\t\tsettings={settings}\n\t\t\t\t/>{' '}\n\t\t\t\tin the last year\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<div css={styles.container(settings.articleCountTextColour)}>\n\t\t\t\tYou&apos;ve read{' '}\n\t\t\t\t<DesignableBannerArticleCountOptOut\n\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t\tnextWord=\" articles\"\n\t\t\t\t\tsettings={settings}\n\t\t\t\t/>{' '}\n\t\t\t\tin the last year\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n// ---- Styles ---- //\n\nconst styles = {\n\tcontainer: (textColor: string = 'inherit') => css`\n\t\tmargin: 0;\n\t\tcolor: ${textColor};\n\t\t${headlineBold15}\n\t\t${from.desktop} {\n\t\t\t${headlineBold17}\n\t\t}\n\t`,\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/common/BannerText.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\n\ntype BannerTextStyleableAreas =\n\t| 'container'\n\t| 'heading'\n\t| 'subheading'\n\t| 'body'\n\t| 'copy'\n\t| 'highlightedText';\n\nexport type BannerTextStyles = {\n\t[key in BannerTextStyleableAreas]?: SerializedStyles | SerializedStyles[];\n};\n\nconst styles = {\n\tparagraphs: css`\n\t\t> :first-child {\n\t\t\tmargin-top: 0;\n\t\t}\n\t\t> :last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t`,\n};\n\nexport const createBannerBodyCopy = (\n\tparagraphs: (Array<JSX.Element> | JSX.Element)[],\n\thighlightedText: Array<JSX.Element> | JSX.Element | null | undefined,\n\trenderStyles: BannerTextStyles,\n): JSX.Element[] | JSX.Element => {\n\tconst paragraphsToProcess = Array.isArray(paragraphs)\n\t\t? paragraphs\n\t\t: [paragraphs];\n\tconst numberOfNonFinalParagraphs = paragraphsToProcess.length - 1;\n\n\t// To cover situations where there are no paragraphs to process\n\tif (numberOfNonFinalParagraphs < 0) {\n\t\treturn (\n\t\t\t<div css={styles.paragraphs}>\n\t\t\t\t{highlightedText && (\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span css={renderStyles.highlightedText}>\n\t\t\t\t\t\t\t{highlightedText}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div css={styles.paragraphs}>\n\t\t\t{paragraphsToProcess.map((p, index) => {\n\t\t\t\tif (index < numberOfNonFinalParagraphs) {\n\t\t\t\t\treturn <p key={index}>{p}</p>;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<p key={index}>\n\t\t\t\t\t\t{p}{' '}\n\t\t\t\t\t\t{highlightedText && (\n\t\t\t\t\t\t\t<span css={renderStyles.highlightedText}>\n\t\t\t\t\t\t\t\t{highlightedText}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</p>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerBody.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tfrom,\n\ttextEgyptian15,\n\ttextEgyptian17,\n\ttextEgyptianBold15,\n\ttextEgyptianBold17,\n} from '@guardian/source/foundations';\nimport {\n\tremoveMediaRulePrefix,\n\tuseMatchMedia,\n} from '../../../../../lib/useMatchMedia';\nimport type { BannerRenderedContent } from '../../common/types';\nimport type { HighlightedTextSettings } from '../settings';\nimport { createBannerBodyCopy } from './BannerText';\n\ninterface DesignableBannerBodyProps {\n\tmainContent: BannerRenderedContent;\n\tmobileContent: BannerRenderedContent;\n\thighlightedTextSettings: HighlightedTextSettings;\n}\n\nexport function DesignableBannerBody({\n\tmainContent,\n\tmobileContent,\n\thighlightedTextSettings,\n}: DesignableBannerBodyProps): JSX.Element {\n\tconst styles = getStyles(highlightedTextSettings);\n\n\tconst isTabletOrAbove = useMatchMedia(removeMediaRulePrefix(from.tablet));\n\n\treturn (\n\t\t<div css={styles.container}>\n\t\t\t{isTabletOrAbove\n\t\t\t\t? createBannerBodyCopy(\n\t\t\t\t\t\tmainContent.paragraphs,\n\t\t\t\t\t\tmainContent.highlightedText,\n\t\t\t\t\t\tstyles,\n\t\t\t\t  )\n\t\t\t\t: createBannerBodyCopy(\n\t\t\t\t\t\tmobileContent.paragraphs,\n\t\t\t\t\t\tmobileContent.highlightedText,\n\t\t\t\t\t\tstyles,\n\t\t\t\t  )}\n\t\t</div>\n\t);\n}\n\nconst getStyles = (settings: HighlightedTextSettings) => ({\n\tcontainer: css`\n\t\tp {\n\t\t\tmargin: 0 0 0.5em 0;\n\t\t}\n\t\t${textEgyptian15};\n\t\t${from.desktop} {\n\t\t\t${textEgyptian17};\n\t\t}\n\t`,\n\thighlightedText: css`\n\t\tdisplay: inline;\n\t\tcolor: ${settings.textColour};\n\n\t\t${settings.highlightColour\n\t\t\t? `\n            background: ${settings.highlightColour};\n            box-shadow: 2px 0 0 ${settings.highlightColour}, -2px 0 0 ${settings.highlightColour};\n            box-decoration-break: clone;\n        `\n\t\t\t: ''}\n\n\t\t${textEgyptianBold15};\n\t\t${from.desktop} {\n\t\t\t${textEgyptianBold17};\n\t\t}\n\t`,\n});\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerCloseButton.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport { Button, SvgCross } from '@guardian/source/react-components';\nimport type { CtaSettings } from '../settings';\nimport { buttonStyles } from '../styles/buttonStyles';\n\ninterface DesignableBannerCloseButtonProps {\n\tonCloseClick: () => void;\n\tsettings: CtaSettings;\n\tstyleOverides?: SerializedStyles;\n}\n\nexport function DesignableBannerCloseButton({\n\tonCloseClick,\n\tsettings,\n\tstyleOverides,\n}: DesignableBannerCloseButtonProps): JSX.Element {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\t${styles.container} ${styleOverides ?? ''}\n\t\t\t`}\n\t\t>\n\t\t\t<Button\n\t\t\t\tonClick={onCloseClick}\n\t\t\t\tcssOverrides={buttonStyles(\n\t\t\t\t\tsettings,\n\t\t\t\t\tstyles.closeButtonOverrides,\n\t\t\t\t)}\n\t\t\t\ticon={<SvgCross />}\n\t\t\t\tsize=\"small\"\n\t\t\t\thideLabel={true}\n\t\t\t>\n\t\t\t\tClose\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n\nconst styles = {\n\tcontainer: css`\n\t\tdisplay: flex;\n\t\tjustify-self: end;\n\t\tz-index: 100;\n\t`,\n\tcloseButtonOverrides: css`\n\t\theight: 40px;\n\t\tmin-height: 40px;\n\t\twidth: 40px;\n\t\tmin-width: 40px;\n\t`,\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerCtas.tsx\n */\nimport { css } from '@emotion/react';\nimport { from, space } from '@guardian/source/foundations';\nimport { LinkButton } from '@guardian/source/react-components';\nimport { SecondaryCtaType } from '@guardian/support-dotcom-components';\nimport { isSupportUrl } from '../../../lib/tracking';\nimport { PaymentCards } from '../../common/PaymentCards';\nimport type { BannerRenderedContent } from '../../common/types';\nimport type { CtaSettings } from '../settings';\nimport { buttonStyles } from '../styles/buttonStyles';\n\ninterface DesignableBannerCtasProps {\n\tmainOrMobileContent: BannerRenderedContent;\n\tonPrimaryCtaClick: () => void;\n\tonSecondaryCtaClick: () => void;\n\tprimaryCtaSettings: CtaSettings;\n\tsecondaryCtaSettings: CtaSettings;\n}\n\nexport function DesignableBannerCtas({\n\tmainOrMobileContent,\n\tonPrimaryCtaClick,\n\tonSecondaryCtaClick,\n\tprimaryCtaSettings,\n\tsecondaryCtaSettings,\n}: DesignableBannerCtasProps): JSX.Element {\n\tconst { primaryCta, secondaryCta } = mainOrMobileContent;\n\tconst hasSupportCta = primaryCta ? isSupportUrl(primaryCta.ctaUrl) : false;\n\n\treturn (\n\t\t<div css={styles.container}>\n\t\t\t{primaryCta && (\n\t\t\t\t<LinkButton\n\t\t\t\t\thref={primaryCta?.ctaUrl}\n\t\t\t\t\tonClick={onPrimaryCtaClick}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\tcssOverrides={buttonStyles(primaryCtaSettings)}\n\t\t\t\t>\n\t\t\t\t\t{primaryCta?.ctaText}\n\t\t\t\t</LinkButton>\n\t\t\t)}\n\t\t\t{secondaryCta?.type === SecondaryCtaType.Custom && (\n\t\t\t\t<LinkButton\n\t\t\t\t\thref={secondaryCta?.cta.ctaUrl}\n\t\t\t\t\tonClick={onSecondaryCtaClick}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\tcssOverrides={buttonStyles(secondaryCtaSettings)}\n\t\t\t\t>\n\t\t\t\t\t{secondaryCta.cta.ctaText}\n\t\t\t\t</LinkButton>\n\t\t\t)}\n\n\t\t\t{primaryCta && hasSupportCta && <PaymentCards />}\n\t\t</div>\n\t);\n}\n\nconst styles = {\n\tcontainer: css`\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: ${space[4]}px;\n\t\tjustify-content: center;\n\n\t\t> a {\n\t\t\tflex: 1 0 100%;\n\t\t\tjustify-content: center;\n\n\t\t\t${from.tablet} {\n\t\t\t\tflex: 0 1 auto;\n\t\t\t}\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\tjustify-content: start;\n\t\t}\n\t`,\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/shared/ResponsiveImage.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport type { ReactElement } from 'react';\nimport type { BannerId } from '../banners/common/types';\nimport type { ReactComponent } from '../lib/ReactComponent';\n\nexport type ImageAttrs = {\n\turl: string;\n\tmedia: string;\n\talt?: string;\n};\n\ntype ResponsiveImageProps = {\n\timages: Array<ImageAttrs>;\n\tbaseImage: ImageAttrs;\n\tbannerId?: BannerId;\n\tcssOverrides?: SerializedStyles;\n};\n\nfunction createSource(image: ImageAttrs): ReactElement {\n\treturn <source media={image.media} srcSet={image.url} key={image.url} />;\n}\n\nexport const ResponsiveImage: ReactComponent<ResponsiveImageProps> = ({\n\timages,\n\tbaseImage,\n\tbannerId,\n\tcssOverrides,\n}: ResponsiveImageProps) => {\n\treturn (\n\t\t<picture id={bannerId} css={cssOverrides}>\n\t\t\t{images.map(createSource)}\n\t\t\t<img src={baseImage.url} alt={baseImage.alt} />\n\t\t</picture>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerVisual.tsx\n */\nimport { css } from '@emotion/react';\nimport { from } from '@guardian/source/foundations';\nimport type { Image } from '@guardian/support-dotcom-components/dist/shared/types';\nimport type { ImageAttrs } from '../../../shared/ResponsiveImage';\nimport { ResponsiveImage } from '../../../shared/ResponsiveImage';\nimport type { BannerId } from '../../common/types';\n\n// ---- Component ---- //\n\ninterface DesignableBannerVisualProps {\n\tsettings: Image;\n\tbannerId?: BannerId;\n\tisHeaderImage?: boolean;\n}\n\nexport function DesignableBannerVisual({\n\tsettings,\n\tbannerId,\n\tisHeaderImage,\n}: DesignableBannerVisualProps): JSX.Element {\n\tconst baseImage: ImageAttrs = {\n\t\turl: settings.mainUrl,\n\t\tmedia: '',\n\t\talt: settings.altText,\n\t};\n\n\tconst images: ImageAttrs[] = [];\n\tconst styles = getStyles(isHeaderImage);\n\tif (settings.mobileUrl) {\n\t\timages.push({ url: settings.mobileUrl, media: '(max-width: 739px)' });\n\t}\n\tif (settings.tabletUrl) {\n\t\timages.push({ url: settings.tabletUrl, media: '(max-width: 979px)' });\n\t}\n\tif (settings.desktopUrl) {\n\t\timages.push({ url: settings.desktopUrl, media: '(max-width: 1139px)' });\n\t}\n\tif (settings.leftColUrl) {\n\t\timages.push({ url: settings.leftColUrl, media: '(max-width: 1299px)' });\n\t}\n\tif (settings.wideUrl) {\n\t\timages.push({ url: settings.wideUrl, media: '' });\n\t}\n\n\treturn (\n\t\t<ResponsiveImage\n\t\t\tbaseImage={baseImage}\n\t\t\timages={images}\n\t\t\tbannerId={bannerId}\n\t\t\tcssOverrides={styles.container}\n\t\t/>\n\t);\n}\n\n// ---- Styles ---- //\n\nconst getStyles = (isHeaderImage = false) => {\n\tif (isHeaderImage) {\n\t\treturn {\n\t\t\tcontainer: css`\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\n\t\t\t\timg {\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tmargin-left: -10px;\n\t\t\t\t\tmargin-right: -10px;\n\t\t\t\t\twidth: calc(100% + 20px);\n\t\t\t\t}\n\t\t\t`,\n\t\t};\n\t}\n\treturn {\n\t\tcontainer: css`\n\t\t\tdisplay: block;\n\t\t\twidth: calc(100% + 20px);\n\t\t\tmargin-left: -10px;\n\t\t\tmargin-right: -10px;\n\n\t\t\timg {\n\t\t\t\twidth: 100%;\n\t\t\t\tobject-fit: contain;\n\t\t\t\tdisplay: block;\n\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tmax-height: none;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t${from.tablet} {\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-left: 0;\n\t\t\t\tmargin-right: 0;\n\t\t\t}\n\t\t`,\n\t};\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerHeader.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tfrom,\n\theadlineBold24,\n\theadlineBold28,\n\theadlineBold34,\n\theadlineMedium17,\n\tneutral,\n\tspace,\n} from '@guardian/source/foundations';\nimport type { Image } from '@guardian/support-dotcom-components/dist/shared/types';\nimport {\n\tremoveMediaRulePrefix,\n\tuseMatchMedia,\n} from '../../../../../lib/useMatchMedia';\nimport type { HeaderSettings } from '../settings';\nimport { DesignableBannerVisual } from './DesignableBannerVisual';\n\ninterface DesignableBannerHeaderProps {\n\theading: JSX.Element | JSX.Element[] | null;\n\tmobileHeading: JSX.Element | JSX.Element[] | null;\n\theaderSettings: HeaderSettings | undefined;\n\theadlineSize: 'small' | 'medium' | 'large';\n}\n\nexport function DesignableBannerHeader({\n\theading,\n\tmobileHeading,\n\theaderSettings,\n\theadlineSize,\n}: DesignableBannerHeaderProps): JSX.Element {\n\tconst isTabletOrAbove = useMatchMedia(removeMediaRulePrefix(from.tablet));\n\tconst styles = getStyles(headerSettings, headlineSize);\n\n\tconst resolveImage = (settings: Image) => {\n\t\treturn (\n\t\t\t<DesignableBannerVisual settings={settings} isHeaderImage={true} />\n\t\t);\n\t};\n\n\tconst resolveCopy = () => {\n\t\treturn <h2>{isTabletOrAbove ? heading : mobileHeading}</h2>;\n\t};\n\n\treturn (\n\t\t<div css={styles.container}>\n\t\t\t<header css={styles.header}>\n\t\t\t\t{headerSettings?.headerImage &&\n\t\t\t\t\tresolveImage(headerSettings.headerImage)}\n\t\t\t\t{(heading ?? mobileHeading) && resolveCopy()}\n\t\t\t</header>\n\t\t</div>\n\t);\n}\n\nconst getStyles = (\n\theaderSettings: HeaderSettings | undefined,\n\theadlineSize: 'small' | 'medium' | 'large',\n) => {\n\tconst color = headerSettings?.textColour ?? neutral[0];\n\tconst copyTopMargin = headerSettings?.headerImage ? space[6] : space[3];\n\tconst containerMargin = headerSettings?.headerImage ? `${space[6]}px` : '0';\n\n\treturn {\n\t\tcontainer: css`\n\t\t\tposition: relative;\n\t\t\tmargin-bottom: ${containerMargin};\n\t\t`,\n\t\theader: css`\n\t\t\th2 {\n\t\t\t\tmargin: ${copyTopMargin}px 0 ${space[3]}px;\n\t\t\t\tcolor: ${color};\n\n\t\t\t\t${headlineSize === 'small' ? headlineMedium17 : headlineBold24}\n\t\t\t\t${from.tablet} {\n\t\t\t\t\t${headlineBold28}\n\t\t\t\t\tmargin-bottom: ${space[6]}px;\n\t\t\t\t}\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\t${headlineBold34}\n\t\t\t\t}\n\t\t\t}\n\t\t`,\n\t};\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerReminderSignedOut.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\terror,\n\tfrom,\n\tneutral,\n\tspace,\n\ttextSans15,\n\ttextSansBold15,\n\ttextSansBold17,\n} from '@guardian/source/foundations';\nimport { Button, TextInput } from '@guardian/source/react-components';\nimport { useContributionsReminderEmailForm } from '../../../hooks/useContributionsReminderEmailForm';\nimport { ensureHasPreposition, ReminderStatus } from '../../../lib/reminders';\nimport type { BannerEnrichedReminderCta } from '../../common/types';\nimport type { CtaSettings } from '../settings';\nimport { buttonStyles } from '../styles/buttonStyles';\n\n// ---- Thank you component ---- //\n\nconst dfltTextColor = neutral[0];\n\ninterface ThankYouProps {\n\treminderLabelWithPreposition: string;\n\tthankyouColor?: string;\n\tcontactUsColor?: string;\n}\n\nexport function ThankYou({\n\treminderLabelWithPreposition,\n\tthankyouColor,\n\tcontactUsColor,\n}: ThankYouProps): JSX.Element {\n\treturn (\n\t\t<div>\n\t\t\t<header>\n\t\t\t\t<h3\n\t\t\t\t\tcss={styles.thankYouHeaderCopy(\n\t\t\t\t\t\tthankyouColor ?? dfltTextColor,\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tThank you! Your reminder is set\n\t\t\t\t</h3>\n\t\t\t</header>\n\n\t\t\t<div css={styles.thankYouBodyCopy(thankyouColor ?? dfltTextColor)}>\n\t\t\t\tWe will be in touch to invite you to contribute. Look out for a\n\t\t\t\tmessage in your inbox {reminderLabelWithPreposition}. If you\n\t\t\t\thave any questions about contributing, please{' '}\n\t\t\t\t<a\n\t\t\t\t\thref=\"mailto:contribution.support@theguardian.com\"\n\t\t\t\t\tcss={styles.contactLink(contactUsColor ?? dfltTextColor)}\n\t\t\t\t>\n\t\t\t\t\tcontact us\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n// ---- Info component ---- //\n\ninterface InfoCopyProps {\n\treminderLabelWithPreposition: string;\n\tprivacyLinkColor?: string;\n}\n\nexport function InfoCopy({\n\treminderLabelWithPreposition,\n\tprivacyLinkColor,\n}: InfoCopyProps): JSX.Element {\n\treturn (\n\t\t<div css={styles.infoCopy}>\n\t\t\tWe will send you a maximum of two emails{' '}\n\t\t\t{reminderLabelWithPreposition}. To find out what personal data we\n\t\t\tcollect and how we use it, view our{' '}\n\t\t\t<a\n\t\t\t\tcss={styles.privacyLink(privacyLinkColor ?? dfltTextColor)}\n\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t>\n\t\t\t\tPrivacy policy\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n// ---- Error component ---- //\n\nexport function ErrorCopy(): JSX.Element {\n\treturn (\n\t\t<div css={styles.errorCopy}>\n\t\t\tSorry we couldn&apos;t set a reminder for you this time. Please try\n\t\t\tagain later.\n\t\t</div>\n\t);\n}\n\n// ---- Component ---- //\n\nexport interface DesignableBannerReminderSignedOutProps {\n\treminderCta: BannerEnrichedReminderCta;\n\treminderStatus: ReminderStatus;\n\tonReminderSetClick: (email: string) => void;\n\tsetReminderCtaSettings?: CtaSettings;\n}\n\nexport function DesignableBannerReminderSignedOut({\n\treminderCta,\n\treminderStatus,\n\tonReminderSetClick,\n\tsetReminderCtaSettings,\n}: DesignableBannerReminderSignedOutProps): JSX.Element {\n\tconst reminderLabelWithPreposition = ensureHasPreposition(\n\t\treminderCta.reminderFields.reminderLabel,\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{reminderStatus === ReminderStatus.Completed ? (\n\t\t\t\t<ThankYou\n\t\t\t\t\treminderLabelWithPreposition={reminderLabelWithPreposition}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<Signup\n\t\t\t\t\treminderLabelWithPreposition={reminderLabelWithPreposition}\n\t\t\t\t\treminderStatus={reminderStatus}\n\t\t\t\t\tonSubmit={onReminderSetClick}\n\t\t\t\t\tsetReminderCtaSettings={setReminderCtaSettings}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\n// ---- Helper components ---- //\n\ninterface SignupProps {\n\treminderLabelWithPreposition: string;\n\treminderStatus: ReminderStatus;\n\tonSubmit: (email: string) => void;\n\tsetReminderCtaSettings?: CtaSettings;\n}\n\nfunction Signup({\n\treminderLabelWithPreposition,\n\treminderStatus,\n\tonSubmit,\n\tsetReminderCtaSettings,\n}: SignupProps) {\n\tconst { email, inputError, updateEmail, handleSubmit } =\n\t\tuseContributionsReminderEmailForm();\n\n\treturn (\n\t\t<>\n\t\t\t<header>\n\t\t\t\t<h3 css={styles.headerCopy}>\n\t\t\t\t\tRemind me to support {reminderLabelWithPreposition} please\n\t\t\t\t</h3>\n\t\t\t</header>\n\n\t\t\t<form\n\t\t\t\tcss={styles.form}\n\t\t\t\tonSubmit={handleSubmit(() => onSubmit(email))}\n\t\t\t>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Email address\"\n\t\t\t\t\thideLabel={true}\n\t\t\t\t\tonChange={updateEmail}\n\t\t\t\t\terror={inputError}\n\t\t\t\t\tvalue={email}\n\t\t\t\t\twidth={30}\n\t\t\t\t\tplaceholder=\"Enter your email\"\n\t\t\t\t/>\n\n\t\t\t\t<div css={styles.ctaContainer}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\tdisabled={reminderStatus === ReminderStatus.Submitting}\n\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t${styles.button}\n\t\t\t\t\t\t\t${setReminderCtaSettings &&\n\t\t\t\t\t\t\tbuttonStyles(setReminderCtaSettings)}\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\tSet reminder\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t{reminderStatus === ReminderStatus.Error && (\n\t\t\t\t\t<div css={styles.errorCopyContainer}>\n\t\t\t\t\t\t<ErrorCopy />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</form>\n\n\t\t\t<div css={styles.infoCopyContainer}>\n\t\t\t\t<InfoCopy\n\t\t\t\t\treminderLabelWithPreposition={reminderLabelWithPreposition}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\n// ---- Styles ---- //\n\nconst styles = {\n\theaderCopy: css`\n\t\t${textSansBold17};\n\t\tmargin: 0;\n\t`,\n\tform: css`\n\t\tmargin-top: ${space[2]}px;\n\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t${from.tablet} {\n\t\t\tflex-direction: row;\n\t\t\talign-items: flex-end;\n\t\t}\n\n\t\t> input {\n\t\t\tmin-width: 100%;\n\n\t\t\t${from.tablet} {\n\t\t\t\tmin-width: auto;\n\t\t\t}\n\t\t}\n\t`,\n\tctaContainer: css`\n\t\tmargin-top: ${space[3]}px;\n\n\t\t${from.tablet} {\n\t\t\tmargin-top: 0;\n\t\t\tmargin-left: ${space[3]}px;\n\t\t}\n\t`,\n\terrorCopyContainer: css`\n\t\tmargin-top: ${space[1]}px;\n\t`,\n\tinfoCopyContainer: css`\n\t\tmargin-top: ${space[3]}px;\n\t`,\n\tbutton: css`\n\t\twidth: 100%;\n\t\tjustify-content: center;\n\n\t\t${from.tablet} {\n\t\t\twidth: auto;\n\t\t}\n\t`,\n\terrorCopy: css`\n\t\t${textSansBold15};\n\t\tcolor: ${error[400]};\n\t\tfont-style: italic;\n\t`,\n\tinfoCopy: css`\n\t\t${textSans15}\n\t\tfont-size: 12px;\n\t`,\n\tprivacyLink: (foreColor: string) => css`\n\t\tfont-weight: bold;\n\t\tcolor: ${foreColor};\n\t`,\n\tthankYouHeaderCopy: (foreColor: string) => css`\n\t\t${textSansBold15}\n\t\tmargin: 0;\n\t\tmargin-bottom: ${space[3]}px;\n\t\tcolor: ${foreColor};\n\t`,\n\tthankYouBodyCopy: (foreColor: string) => css`\n\t\t${textSans15}\n\t\tcolor: ${foreColor};\n\t`,\n\tcontactLink: (foreColor: string) => css`\n\t\tfont-weight: bold;\n\t\tcolor: ${foreColor};\n\t`,\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/components/DesignableBannerReminder.tsx\n */\nimport { css } from '@emotion/react';\nimport { space } from '@guardian/source/foundations';\nimport React from 'react';\nimport { useContributionsReminderSignup } from '../../../hooks/useContributionsReminderSignup';\nimport type { BannerEnrichedReminderCta } from '../../common/types';\nimport type { CtaSettings } from '../settings';\nimport { DesignableBannerReminderSignedOut } from './DesignableBannerReminderSignedOut';\n\nexport interface DesignableBannerReminderProps {\n\treminderCta: BannerEnrichedReminderCta;\n\ttrackReminderSetClick: () => void;\n\tsetReminderCtaSettings?: CtaSettings;\n\tmobileReminderRef: React.RefObject<HTMLDivElement> | null;\n}\n\nconst styles = {\n\tcontainer: css`\n\t\tgrid-row: 4;\n\t\tgrid-column: 1 / span 2;\n\t\torder: 5;\n\t\tmargin-top: ${space[3]}px;\n\t`,\n};\n\nexport function DesignableBannerReminder({\n\treminderCta,\n\ttrackReminderSetClick,\n\tsetReminderCtaSettings,\n\tmobileReminderRef,\n}: DesignableBannerReminderProps): JSX.Element {\n\tconst { reminderStatus, createReminder } = useContributionsReminderSignup(\n\t\treminderCta.reminderFields.reminderPeriod,\n\t\t'WEB',\n\t\t'BANNER',\n\t\t'PRE',\n\t\treminderCta.reminderFields.reminderOption,\n\t);\n\n\tconst onReminderSetClick = (email: string) => {\n\t\ttrackReminderSetClick();\n\t\tcreateReminder(email);\n\t};\n\n\treturn (\n\t\t<div ref={mobileReminderRef} css={styles.container}>\n\t\t\t<DesignableBannerReminderSignedOut\n\t\t\t\treminderCta={reminderCta}\n\t\t\t\treminderStatus={reminderStatus}\n\t\t\t\tonReminderSetClick={onReminderSetClick}\n\t\t\t\tsetReminderCtaSettings={setReminderCtaSettings}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/styles/templateStyles.ts\n */\nimport { css } from '@emotion/react';\nimport { from, space } from '@guardian/source/foundations';\n\nconst templateSpacing = {\n\tbannerContainer: css`\n\t\tmargin-bottom: ${space[4]}px;\n\n\t\t${from.tablet} {\n\t\t\tmargin-bottom: ${space[3]}px;\n\t\t}\n\t`,\n\tbannerHeader: css`\n\t\tmargin: 0;\n\t`,\n\tbannerBodyCopy: css`\n\t\tmargin-bottom: ${space[4]}px;\n\n\t\t${from.tablet} {\n\t\t\tmargin-bottom: ${space[6]}px;\n\t\t}\n\t`,\n\tbannerTicker: css`\n\t\tmargin-bottom: ${space[4]}px;\n\t`,\n\tbannerCloseButton: css`\n\t\ttop: ${space[3]}px;\n\t\tright: ${space[3]}px;\n\t\tmargin-left: ${space[3]}px;\n\t`,\n};\n\nexport { templateSpacing };\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/modules/banners/designableBanner/DesignableBanner.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tbetween,\n\tfrom,\n\tneutral,\n\tspace,\n\tspecialReport,\n\ttextEgyptian15,\n\ttextSans17,\n\ttextSansBold17,\n\tuntil,\n} from '@guardian/source/foundations';\nimport { Button, SvgGuardianLogo } from '@guardian/source/react-components';\nimport { Ticker } from '@guardian/source-development-kitchen/react-components';\nimport {\n\thexColourToString,\n\tSecondaryCtaType,\n} from '@guardian/support-dotcom-components';\nimport type {\n\tBannerDesignHeaderImage,\n\tBannerDesignImage,\n\tConfigurableDesign,\n\tImage,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useEffect, useState } from 'react';\nimport {\n\tremoveMediaRulePrefix,\n\tuseMatchMedia,\n} from '../../../../lib/useMatchMedia';\nimport { useChoiceCards } from '../../hooks/useChoiceCards';\nimport { useReminder } from '../../hooks/useReminder';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { bannerWrapper, validatedBannerWrapper } from '../common/BannerWrapper';\nimport type {\n\tBannerEnrichedReminderCta,\n\tBannerRenderProps,\n} from '../common/types';\nimport type { ChoiceCardSettings } from './components/choiceCards/ChoiceCards';\nimport { ChoiceCards } from './components/choiceCards/ChoiceCards';\nimport { DesignableBannerArticleCount } from './components/DesignableBannerArticleCount';\nimport { DesignableBannerBody } from './components/DesignableBannerBody';\nimport { DesignableBannerCloseButton } from './components/DesignableBannerCloseButton';\nimport { DesignableBannerCtas } from './components/DesignableBannerCtas';\nimport { DesignableBannerHeader } from './components/DesignableBannerHeader';\nimport { DesignableBannerReminder } from './components/DesignableBannerReminder';\nimport { DesignableBannerVisual } from './components/DesignableBannerVisual';\nimport type { BannerTemplateSettings, CtaSettings } from './settings';\nimport { buttonStyles } from './styles/buttonStyles';\nimport { templateSpacing } from './styles/templateStyles';\n\nconst buildImageSettings = (\n\tdesign: BannerDesignImage | BannerDesignHeaderImage,\n): Image | undefined => {\n\treturn {\n\t\tmainUrl: design.mobileUrl,\n\t\tmobileUrl: design.mobileUrl,\n\t\ttabletUrl: design.tabletUrl,\n\t\tdesktopUrl: design.desktopUrl,\n\t\twideUrl: design.desktopUrl,\n\t\taltText: design.altText,\n\t};\n};\nconst buildMainImageSettings = (\n\tdesign: ConfigurableDesign,\n): Image | undefined => {\n\tif (design.visual?.kind === 'Image') {\n\t\treturn buildImageSettings(design.visual);\n\t}\n\treturn undefined;\n};\nconst buildHeaderImageSettings = (\n\tdesign: ConfigurableDesign,\n): Image | undefined => {\n\tif (design.headerImage) {\n\t\treturn buildImageSettings(design.headerImage);\n\t}\n\treturn undefined;\n};\n\nconst buildChoiceCardSettings = (\n\tdesign: ConfigurableDesign,\n): ChoiceCardSettings | undefined => {\n\tif (design.visual?.kind === 'ChoiceCards') {\n\t\tconst {\n\t\t\tbuttonColour,\n\t\t\tbuttonTextColour,\n\t\t\tbuttonBorderColour,\n\t\t\tbuttonSelectColour,\n\t\t\tbuttonSelectTextColour,\n\t\t\tbuttonSelectBorderColour,\n\t\t} = design.visual;\n\t\treturn {\n\t\t\tbuttonColour: buttonColour\n\t\t\t\t? hexColourToString(buttonColour)\n\t\t\t\t: undefined,\n\t\t\tbuttonTextColour: buttonTextColour\n\t\t\t\t? hexColourToString(buttonTextColour)\n\t\t\t\t: undefined,\n\t\t\tbuttonBorderColour: buttonBorderColour\n\t\t\t\t? hexColourToString(buttonBorderColour)\n\t\t\t\t: undefined,\n\t\t\tbuttonSelectColour: buttonSelectColour\n\t\t\t\t? hexColourToString(buttonSelectColour)\n\t\t\t\t: undefined,\n\t\t\tbuttonSelectTextColour: buttonSelectTextColour\n\t\t\t\t? hexColourToString(buttonSelectTextColour)\n\t\t\t\t: undefined,\n\t\t\tbuttonSelectBorderColour: buttonSelectBorderColour\n\t\t\t\t? hexColourToString(buttonSelectBorderColour)\n\t\t\t\t: undefined,\n\t\t};\n\t}\n\treturn undefined;\n};\n\nconst DesignableBanner: ReactComponent<BannerRenderProps> = ({\n\tcontent,\n\tonCloseClick,\n\tarticleCounts,\n\tonCtaClick,\n\tonSecondaryCtaClick,\n\treminderTracking,\n\tseparateArticleCount, // legacy field\n\tseparateArticleCountSettings,\n\ttickerSettings,\n\tchoiceCardAmounts,\n\tcountryCode,\n\tsubmitComponentEvent,\n\tdesign,\n}: BannerRenderProps): JSX.Element => {\n\tconst isTabletOrAbove = useMatchMedia(removeMediaRulePrefix(from.tablet));\n\tconst { isReminderActive, onReminderCtaClick, mobileReminderRef } =\n\t\tuseReminder(reminderTracking);\n\n\t// We can use this to shorten the banner if the \"open in app\" banner is present\n\tconst [iosAppBannerPresent, setIosAppBannerPresent] = useState(false);\n\tuseEffect(() => {\n\t\tsetIosAppBannerPresent(\n\t\t\twindow.innerHeight != window.document.documentElement.clientHeight,\n\t\t);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (iosAppBannerPresent) {\n\t\t\t// send ophan event\n\t\t\tif (submitComponentEvent) {\n\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\tcomponent: {\n\t\t\t\t\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\t\t\t\t\tid: 'safari-ios-banner-present',\n\t\t\t\t\t},\n\t\t\t\t\taction: 'VIEW',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [iosAppBannerPresent, submitComponentEvent]);\n\n\tconst {\n\t\tchoiceCardSelection,\n\t\tsetChoiceCardSelection,\n\t\tgetCtaText,\n\t\tgetCtaUrl,\n\t\tcurrencySymbol,\n\t} = useChoiceCards(\n\t\tchoiceCardAmounts,\n\t\tcountryCode,\n\t\tcontent.mainContent.primaryCta,\n\t\tcontent.mobileContent.primaryCta,\n\t);\n\n\t// We can't render anything without a design\n\tif (!design) {\n\t\treturn <></>;\n\t}\n\n\tconst {\n\t\tbasic,\n\t\tprimaryCta,\n\t\tsecondaryCta,\n\t\thighlightedText,\n\t\tcloseButton,\n\t\tticker,\n\t} = design.colours;\n\n\tconst imageSettings = buildMainImageSettings(design);\n\tconst choiceCardSettings = buildChoiceCardSettings(design);\n\n\tconst templateSettings: BannerTemplateSettings = {\n\t\tcontainerSettings: {\n\t\t\tbackgroundColour: hexColourToString(basic.background),\n\t\t\ttextColor: hexColourToString(basic.bodyText),\n\t\t},\n\t\theaderSettings: {\n\t\t\ttextColour: hexColourToString(basic.headerText),\n\t\t\theaderImage: buildHeaderImageSettings(design),\n\t\t},\n\t\tprimaryCtaSettings: {\n\t\t\tdefault: {\n\t\t\t\tbackgroundColour: hexColourToString(\n\t\t\t\t\tprimaryCta.default.background,\n\t\t\t\t),\n\t\t\t\ttextColour: hexColourToString(primaryCta.default.text),\n\t\t\t},\n\t\t\thover: {\n\t\t\t\tbackgroundColour: hexColourToString(\n\t\t\t\t\tprimaryCta.hover.background,\n\t\t\t\t),\n\t\t\t\ttextColour: hexColourToString(primaryCta.hover.text),\n\t\t\t},\n\t\t},\n\t\tsecondaryCtaSettings: {\n\t\t\tdefault: {\n\t\t\t\tbackgroundColour: hexColourToString(\n\t\t\t\t\tsecondaryCta.default.background,\n\t\t\t\t),\n\t\t\t\ttextColour: hexColourToString(secondaryCta.default.text),\n\t\t\t\tborder: `1px solid ${\n\t\t\t\t\tsecondaryCta.default.border\n\t\t\t\t\t\t? hexColourToString(secondaryCta.default.border)\n\t\t\t\t\t\t: undefined\n\t\t\t\t}`,\n\t\t\t},\n\t\t\thover: {\n\t\t\t\tbackgroundColour: hexColourToString(\n\t\t\t\t\tsecondaryCta.hover.background,\n\t\t\t\t),\n\t\t\t\ttextColour: hexColourToString(secondaryCta.hover.text),\n\t\t\t\tborder: `1px solid ${\n\t\t\t\t\tsecondaryCta.hover.border\n\t\t\t\t\t\t? hexColourToString(secondaryCta.hover.border)\n\t\t\t\t\t\t: undefined\n\t\t\t\t}`,\n\t\t\t},\n\t\t},\n\t\tcloseButtonSettings: {\n\t\t\tdefault: {\n\t\t\t\tbackgroundColour: hexColourToString(\n\t\t\t\t\tcloseButton.default.background,\n\t\t\t\t),\n\t\t\t\ttextColour: hexColourToString(closeButton.default.text),\n\t\t\t\tborder: `1px solid ${\n\t\t\t\t\tcloseButton.default.border\n\t\t\t\t\t\t? hexColourToString(closeButton.default.border)\n\t\t\t\t\t\t: specialReport[100]\n\t\t\t\t}`,\n\t\t\t},\n\t\t\thover: {\n\t\t\t\tbackgroundColour: hexColourToString(\n\t\t\t\t\tcloseButton.hover.background,\n\t\t\t\t),\n\t\t\t\ttextColour: hexColourToString(closeButton.hover.text),\n\t\t\t\tborder: `1px solid ${\n\t\t\t\t\tcloseButton.hover.border\n\t\t\t\t\t\t? hexColourToString(closeButton.hover.border)\n\t\t\t\t\t\t: neutral[100]\n\t\t\t\t}`,\n\t\t\t},\n\t\t},\n\t\thighlightedTextSettings: {\n\t\t\ttextColour: hexColourToString(highlightedText.text),\n\t\t\thighlightColour: hexColourToString(highlightedText.highlight),\n\t\t},\n\t\tarticleCountTextColour: hexColourToString(basic.articleCountText),\n\t\tchoiceCardSettings,\n\t\timageSettings,\n\t\tbannerId: 'designable-banner',\n\t\ttickerStylingSettings: {\n\t\t\tfilledProgressColour: hexColourToString(ticker.filledProgress),\n\t\t\tprogressBarBackgroundColour: hexColourToString(\n\t\t\t\tticker.progressBarBackground,\n\t\t\t),\n\t\t\theadlineColour: hexColourToString(ticker.headlineColour),\n\t\t\ttotalColour: hexColourToString(ticker.totalColour),\n\t\t\tgoalColour: hexColourToString(ticker.goalColour),\n\t\t},\n\t};\n\n\t// const isTabletOrAbove = useMediaQuery(from.tablet);\n\tconst mainOrMobileContent = isTabletOrAbove\n\t\t? content.mainContent\n\t\t: content.mobileContent;\n\n\tconst showChoiceCards = !!(\n\t\ttemplateSettings.choiceCardSettings &&\n\t\tchoiceCardAmounts?.amountsCardData\n\t);\n\n\tconst getHeaderContainerCss = () => {\n\t\tif (templateSettings?.headerSettings?.headerImage) {\n\t\t\treturn styles.headerWithImageContainer(\n\t\t\t\ttemplateSettings.containerSettings.backgroundColour,\n\t\t\t);\n\t\t}\n\t\treturn styles.headerContainer(\n\t\t\ttemplateSettings.containerSettings.backgroundColour,\n\t\t\t!!templateSettings.imageSettings,\n\t\t);\n\t};\n\n\tconst showReminder =\n\t\tmainOrMobileContent.secondaryCta?.type ===\n\t\tSecondaryCtaType.ContributionsReminder;\n\n\tconst showAboveArticleCount =\n\t\t(separateArticleCountSettings?.type === 'above' ||\n\t\t\tseparateArticleCount) &&\n\t\tarticleCounts.forTargetedWeeks >= 5;\n\n\treturn (\n\t\t<div\n\t\t\tcss={styles.outerContainer(\n\t\t\t\ttemplateSettings.containerSettings.backgroundColour,\n\t\t\t\tiosAppBannerPresent,\n\t\t\t\ttemplateSettings.containerSettings.textColor,\n\t\t\t)}\n\t\t>\n\t\t\t<div css={styles.containerOverrides}>\n\t\t\t\t<div css={getHeaderContainerCss()}>\n\t\t\t\t\t<DesignableBannerHeader\n\t\t\t\t\t\theading={content.mainContent.heading}\n\t\t\t\t\t\tmobileHeading={content.mobileContent.heading}\n\t\t\t\t\t\theaderSettings={templateSettings.headerSettings}\n\t\t\t\t\t\theadlineSize={design.fonts?.heading.size ?? 'medium'}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div css={styles.contentContainer(showReminder)}>\n\t\t\t\t\t{showAboveArticleCount && (\n\t\t\t\t\t\t<DesignableBannerArticleCount\n\t\t\t\t\t\t\tnumArticles={articleCounts.forTargetedWeeks}\n\t\t\t\t\t\t\tsettings={templateSettings}\n\t\t\t\t\t\t\tcopy={separateArticleCountSettings?.copy}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{tickerSettings?.tickerData &&\n\t\t\t\t\t\ttemplateSettings.tickerStylingSettings && (\n\t\t\t\t\t\t\t<div css={templateSpacing.bannerTicker}>\n\t\t\t\t\t\t\t\t<Ticker\n\t\t\t\t\t\t\t\t\tcurrencySymbol={\n\t\t\t\t\t\t\t\t\t\ttickerSettings.currencySymbol\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcopy={{\n\t\t\t\t\t\t\t\t\t\theadline:\n\t\t\t\t\t\t\t\t\t\t\ttickerSettings.copy.countLabel,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ttickerData={tickerSettings.tickerData}\n\t\t\t\t\t\t\t\t\ttickerStylingSettings={\n\t\t\t\t\t\t\t\t\t\ttemplateSettings.tickerStylingSettings\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsize={'medium'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t<div css={templateSpacing.bannerBodyCopy}>\n\t\t\t\t\t\t<DesignableBannerBody\n\t\t\t\t\t\t\tmainContent={content.mainContent}\n\t\t\t\t\t\t\tmobileContent={content.mobileContent}\n\t\t\t\t\t\t\thighlightedTextSettings={\n\t\t\t\t\t\t\t\ttemplateSettings.highlightedTextSettings\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!showChoiceCards && (\n\t\t\t\t\t\t<DesignableBannerCtas\n\t\t\t\t\t\t\tmainOrMobileContent={mainOrMobileContent}\n\t\t\t\t\t\t\tonPrimaryCtaClick={onCtaClick}\n\t\t\t\t\t\t\tonSecondaryCtaClick={onSecondaryCtaClick}\n\t\t\t\t\t\t\tprimaryCtaSettings={\n\t\t\t\t\t\t\t\ttemplateSettings.primaryCtaSettings\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsecondaryCtaSettings={\n\t\t\t\t\t\t\t\ttemplateSettings.secondaryCtaSettings\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{templateSettings.imageSettings ? (\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={styles.bannerVisualContainer(\n\t\t\t\t\t\t\ttemplateSettings.containerSettings.backgroundColour,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DesignableBannerCloseButton\n\t\t\t\t\t\t\tonCloseClick={onCloseClick}\n\t\t\t\t\t\t\tsettings={templateSettings.closeButtonSettings}\n\t\t\t\t\t\t\tstyleOverides={styles.closeButtonOverrides(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DesignableBannerVisual\n\t\t\t\t\t\t\tsettings={templateSettings.imageSettings}\n\t\t\t\t\t\t\tbannerId={templateSettings.bannerId}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/*\n                        I think `alternativeVisual` was for using SVG as the image, which is currently beyond the scope of the design tool. Suggest we remove?\n                    */}\n\t\t\t\t\t\t{templateSettings.alternativeVisual}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<DesignableBannerCloseButton\n\t\t\t\t\t\tonCloseClick={onCloseClick}\n\t\t\t\t\t\tsettings={templateSettings.closeButtonSettings}\n\t\t\t\t\t\tstyleOverides={styles.closeButtonOverrides(true)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{showChoiceCards && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={styles.choiceCardsContainer(\n\t\t\t\t\t\t\ttemplateSettings.containerSettings.backgroundColour,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChoiceCards\n\t\t\t\t\t\t\tsetSelectionsCallback={setChoiceCardSelection}\n\t\t\t\t\t\t\tselection={choiceCardSelection}\n\t\t\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\t\t\tcurrencySymbol={currencySymbol}\n\t\t\t\t\t\t\tcomponentId={'contributions-banner-choice-cards'}\n\t\t\t\t\t\t\tamountsTest={choiceCardAmounts}\n\t\t\t\t\t\t\tdesign={templateSettings.choiceCardSettings}\n\t\t\t\t\t\t\tgetCtaText={getCtaText}\n\t\t\t\t\t\t\tgetCtaUrl={getCtaUrl}\n\t\t\t\t\t\t\tcssCtaOverides={buttonStyles(\n\t\t\t\t\t\t\t\ttemplateSettings.primaryCtaSettings,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonCtaClick={onCtaClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div css={styles.guardianLogoContainer}>\n\t\t\t\t\t<SvgGuardianLogo\n\t\t\t\t\t\ttextColor={hexColourToString(basic.logo)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{showReminder && (\n\t\t\t\t\t<div css={styles.reminderContainer}>\n\t\t\t\t\t\t<span css={styles.reminderText}>\n\t\t\t\t\t\t\tNot ready to support today?{' '}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\t\tonClick={onReminderCtaClick}\n\t\t\t\t\t\t\tcssOverrides={styles.reminderCta(\n\t\t\t\t\t\t\t\ttemplateSettings.secondaryCtaSettings,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRemind me later\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{isReminderActive && (\n\t\t\t\t<div css={styles.reminderFormContainer}>\n\t\t\t\t\t<div css={styles.containerOverrides}>\n\t\t\t\t\t\t<DesignableBannerReminder\n\t\t\t\t\t\t\treminderCta={\n\t\t\t\t\t\t\t\tmainOrMobileContent.secondaryCta as BannerEnrichedReminderCta\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrackReminderSetClick={\n\t\t\t\t\t\t\t\treminderTracking.onReminderSetClick\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetReminderCtaSettings={\n\t\t\t\t\t\t\t\ttemplateSettings.secondaryCtaSettings\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmobileReminderRef={\n\t\t\t\t\t\t\t\tisTabletOrAbove ? null : mobileReminderRef\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nconst styles = {\n\touterContainer: (\n\t\tbackground: string,\n\t\tlimitHeight: boolean,\n\t\ttextColor: string = 'inherit',\n\t) => css`\n\t\tbackground: ${background};\n\t\tcolor: ${textColor};\n\t\t${limitHeight ? 'max-height: 70vh;' : ''}\n\t\toverflow: auto;\n\t\t* {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\t\t${from.tablet} {\n\t\t\tborder-top: 1px solid ${neutral[0]};\n\t\t}\n\t\tb,\n\t\tstrong {\n\t\t\tfont-weight: bold;\n\t\t}\n\t`,\n\tcontainerOverrides: css`\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tposition: relative;\n\t\tpadding: 0 10px;\n\t\t${from.tablet} {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: 1fr 280px;\n\t\t\tgrid-template-rows: auto 1fr auto;\n\t\t\tcolumn-gap: ${space[5]}px;\n\t\t\twidth: 100%;\n\t\t\tmax-width: 1300px;\n\t\t\tmargin: 0 auto;\n\t\t\tpadding: 0 ${space[5]}px;\n\t\t}\n\t\t${from.desktop} {\n\t\t\tcolumn-gap: 60px;\n\t\t\tgrid-template-columns: 1fr 460px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tcolumn-gap: 100px;\n\t\t}\n\t\t${templateSpacing.bannerContainer};\n\t`,\n\tcloseButtonOverrides: (isGridCell: boolean) => css`\n\t\t${until.tablet} {\n\t\t\tposition: fixed;\n\t\t\tmargin-top: ${space[3]}px;\n\t\t\tpadding-right: 10px;\n\t\t\tright: 0;\n\t\t}\n\t\t${from.tablet} {\n\t\t\tmargin-top: ${space[3]}px;\n\n\t\t\t${isGridCell\n\t\t\t\t? css`\n\t\t\t\t\t\tgrid-column: 2;\n\t\t\t\t\t\tgrid-row: 1;\n\t\t\t\t  `\n\t\t\t\t: css`\n\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: flex-end;\n\t\t\t\t  `}\n\t\t}\n\t`,\n\theaderContainer: (background: string, bannerHasImage: boolean) => css`\n\t\torder: ${bannerHasImage ? '2' : '1'};\n\t\t${until.tablet} {\n\t\t\t${bannerHasImage\n\t\t\t\t? ''\n\t\t\t\t: `max-width: calc(100% - 40px - ${space[3]}px);`}\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\tgrid-column: 1;\n\t\t\tgrid-row: 1;\n\t\t\tbackground: ${background};\n\t\t}\n\n\t\t${templateSpacing.bannerHeader}\n\t`,\n\theaderWithImageContainer: (background: string) => css`\n\t\torder: 1;\n\t\tmax-width: '100%';\n\t\t${between.mobileMedium.and.tablet} {\n\t\t\torder: '2';\n\t\t}\n\t\t${from.tablet} {\n\t\t\tgrid-column: 1;\n\t\t\tgrid-row: 1;\n\t\t\tbackground: ${background};\n\t\t}\n\t\t${templateSpacing.bannerHeader}\n\t`,\n\tcontentContainer: (showRemindMeLater: boolean) => css`\n\t\torder: 2;\n\t\t${from.tablet} {\n\t\t\tgrid-column: 1;\n\t\t\tgrid-row: ${showRemindMeLater ? '2' : '2 / span 2'};\n\t\t}\n\t`,\n\tbannerVisualContainer: (background: string) => css`\n\t\torder: 1;\n\t\tbackground: ${background};\n\t\t${from.tablet} {\n\t\t\tgrid-column: 2;\n\t\t\tgrid-row: 1 / span 2;\n\t\t\talign-self: flex-start;\n\t\t}\n\t`,\n\tchoiceCardsContainer: (background: string) => css`\n\t\torder: 3;\n\t\tbackground: ${background};\n\t\t${from.tablet} {\n\t\t\tgrid-column: 2;\n\t\t\tgrid-row: 2;\n\t\t\talign-self: flex-start;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t}\n\t`,\n\tguardianLogoContainer: css`\n\t\tdisplay: none;\n\t\t${from.tablet} {\n\t\t\tdisplay: block;\n\t\t\twidth: 100px;\n\t\t}\n\t\tgrid-column: 2;\n\t\tgrid-row: 3;\n\t\tjustify-self: end;\n\t\tpadding-top: ${space[3]}px;\n\t`,\n\treminderContainer: css`\n\t\t${textEgyptian15};\n\t\tgrid-column: 1;\n\t\tgrid-row: 3;\n\t\torder: 4;\n\t\talign-self: center;\n\t\tmargin-top: ${space[2]}px;\n\n\t\t${from.tablet} {\n\t\t\talign-self: end;\n\t\t}\n\t`,\n\treminderText: css`\n\t\t${textSans17};\n\t\tdisplay: none;\n\n\t\t${from.tablet} {\n\t\t\tdisplay: inline;\n\t\t}\n\t`,\n\treminderCta: ({ default: defaultSettings }: CtaSettings) => css`\n\t\t${textSansBold17};\n\t\tcolor: ${defaultSettings.backgroundColour};\n\t\tdisplay: inline;\n\t\theight: auto;\n\t\tmin-height: auto;\n\t`,\n\n\treminderFormContainer: css`\n\t\tborder-top: 2px solid ${neutral[0]};\n\t\tmargin-top: ${space[3]}px;\n\t`,\n};\n\nconst unvalidated = bannerWrapper(DesignableBanner, 'designable-banner');\nconst validated = validatedBannerWrapper(DesignableBanner, 'designable-banner');\n\nexport {\n\tvalidated as DesignableBanner,\n\tunvalidated as DesignableBannerUnvalidated,\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/0a2439b701586a7a2cc60dce10b4d96cf7a828db/packages/modules/src/hooks/useReminder.ts\n */\nimport { useEffect, useRef, useState } from 'react';\nimport type { ContributionsReminderTracking } from '../banners/common/types';\n\nconst useReminder = (\n\treminderTracking: ContributionsReminderTracking,\n): {\n\tisReminderActive: boolean;\n\tonReminderCtaClick: () => void;\n\tmobileReminderRef: React.RefObject<HTMLDivElement>;\n} => {\n\tconst [isReminderActive, setIsReminderActive] = useState(false);\n\n\tconst onReminderCtaClick = () => {\n\t\treminderTracking.onReminderCtaClick();\n\t\tsetIsReminderActive(!isReminderActive);\n\t};\n\n\tconst mobileReminderRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tif (mobileReminderRef.current && isReminderActive) {\n\t\t\tmobileReminderRef.current.scrollIntoView({ behavior: 'smooth' });\n\t\t}\n\t}, [isReminderActive]);\n\n\treturn { isReminderActive, onReminderCtaClick, mobileReminderRef };\n};\n\nexport { useReminder };\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/hooks/useContributionsReminderEmailForm.ts\n */\nimport type React from 'react';\nimport { useState } from 'react';\nimport { emailIsShortEnoughForIdentity, isValidEmail } from '../lib/reminders';\n\ntype SubmitHandler = (e: React.FormEvent<HTMLFormElement>) => void;\n\ninterface ContributionsReminderEmailForm {\n\temail: string;\n\tinputError?: string;\n\tupdateEmail: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\thandleSubmit: (onSubmit: () => void) => SubmitHandler;\n}\n\nexport function useContributionsReminderEmailForm(): ContributionsReminderEmailForm {\n\tconst [isDirty, setIsDirty] = useState(false);\n\tconst [email, setEmail] = useState('');\n\n\tconst updateEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetEmail(e.target.value);\n\t\tif (isDirty) {\n\t\t\tsetIsDirty(false);\n\t\t}\n\t};\n\n\tconst isEmpty = email.trim().length === 0;\n\tconst isValid = isValidEmail(email) && emailIsShortEnoughForIdentity(email);\n\n\tlet inputError;\n\tif (isDirty && isEmpty) {\n\t\tinputError = 'Please enter your email address';\n\t} else if (isDirty && !isValid) {\n\t\tinputError = 'Please enter a valid email address';\n\t}\n\n\tconst handleSubmit = (onSubmit: () => void) => {\n\t\tconst handler = (e: React.FormEvent<HTMLFormElement>) => {\n\t\t\te.preventDefault();\n\t\t\tif (isValid) {\n\t\t\t\tonSubmit();\n\t\t\t} else {\n\t\t\t\tsetIsDirty(true);\n\t\t\t}\n\t\t};\n\t\treturn handler;\n\t};\n\n\treturn { email, inputError, updateEmail, handleSubmit };\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/hooks/useContributionsReminderSignup.ts\n */\nimport type {\n\tOneOffSignupRequest,\n\tReminderComponent,\n\tReminderPlatform,\n\tReminderStage,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useState } from 'react';\nimport {\n\taddContributionReminderCookie,\n\tReminderStatus,\n} from '../lib/reminders';\n\nconst CREATE_ONE_OFF_REMINDER_ENDPOINT =\n\t'https://support.theguardian.com/reminders/create/one-off';\n\ninterface ContributionsReminderSignup {\n\treminderStatus: ReminderStatus;\n\tcreateReminder: (email: string) => void;\n}\n\nexport function useContributionsReminderSignup(\n\treminderPeriod: string,\n\treminderPlatform: ReminderPlatform,\n\treminderComponent: ReminderComponent,\n\treminderStage: ReminderStage,\n\treminderOption?: string,\n): ContributionsReminderSignup {\n\tconst [reminderStatus, setReminderStatus] = useState<ReminderStatus>(\n\t\tReminderStatus.Editing,\n\t);\n\n\tconst createReminder = (email: string): void => {\n\t\tconst reminderSignupData: OneOffSignupRequest = {\n\t\t\temail,\n\t\t\treminderPeriod,\n\t\t\treminderPlatform,\n\t\t\treminderComponent,\n\t\t\treminderStage,\n\t\t\treminderOption,\n\t\t};\n\n\t\tsetReminderStatus(ReminderStatus.Submitting);\n\t\tfetch(CREATE_ONE_OFF_REMINDER_ENDPOINT, {\n\t\t\tbody: JSON.stringify(reminderSignupData),\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tsetReminderStatus(ReminderStatus.Error);\n\t\t\t\t} else {\n\t\t\t\t\tsetReminderStatus(ReminderStatus.Completed);\n\t\t\t\t\taddContributionReminderCookie(reminderPeriod);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => setReminderStatus(ReminderStatus.Error));\n\t};\n\n\treturn { reminderStatus, createReminder };\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/utils/reminders.ts\n */\nimport { getCookie, setCookie } from '@guardian/libs';\n\nexport enum ReminderStatus {\n\tEditing = 'Editing',\n\tSubmitting = 'Submitting',\n\tError = 'Error',\n\tCompleted = 'Completed',\n}\n\n// --- Cookie utils --- //\n\nconst dateDiff = (start: Date, end: Date): number => {\n\tconst twentyFourHours = 86400000;\n\treturn Math.round((end.valueOf() - start.valueOf()) / twentyFourHours);\n};\n\nexport const addContributionReminderCookie = (\n\treminderDateString: string,\n): void => {\n\tconst today = new Date();\n\tconst reminderDate = new Date(Date.parse(reminderDateString));\n\n\tsetCookie({\n\t\tname: 'gu_epic_contribution_reminder',\n\t\tvalue: '1',\n\t\tdaysToLive: dateDiff(today, reminderDate),\n\t});\n};\n\nexport const hasSetReminder = (): boolean => {\n\treturn !!getCookie({ name: 'gu_epic_contribution_reminder' });\n};\n\n// --- Text utils --- //\n\nconst PREPOSITION_REGEX = /^(on|in)/;\n\nconst containsPreposition = (text: string): boolean =>\n\tPREPOSITION_REGEX.test(text);\n\nconst addPreposition = (text: string): string => 'in ' + text;\n\nexport const ensureHasPreposition = (text: string): string =>\n\tcontainsPreposition(text) ? text : addPreposition(text);\n\n// --- Validation utils --- //\n\nexport const isValidEmail = (email: string): boolean => {\n\tconst re =\n\t\t/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(String(email).toLowerCase());\n};\n\nexport const emailIsShortEnoughForIdentity = (email: string): boolean => {\n\t// Identity errors on email addresses longer than 100 characters\n\treturn email.length <= 100;\n};\n","import { useEffect, useState, useSyncExternalStore } from 'react';\n\n/**\n * Stores constructed media queries by their query string, so they don't have\n * to be recreated on each render. Also allows multiple components to use the\n * same media query.\n */\nconst cachedQueries = new Map<string, MediaQueryList>();\n\nconst removeMediaRulePrefix = (query: string): string =>\n\tquery.replace('@media', '').trim();\n\n/**\n * A custom hook to test the provided media query. Will return a `boolean`\n * signifying whether the media query currently matches, and will trigger a\n * re-render whenever the match status changes in either direction;\n * e.g. from `true` to `false`, or from `false` to `true`.\n *\n * @param {string} query for use with `window.matchMedia`\n * @returns {boolean} whether the media query currently matches\n */\nconst useMatchMedia = (query: string): boolean => {\n\tconst [mediaQuery, setMediaQuery] = useState(cachedQueries.get(query));\n\n\tuseEffect(() => {\n\t\tif (mediaQuery) return;\n\t\tcachedQueries.set(query, window.matchMedia(query));\n\t\tsetMediaQuery(cachedQueries.get(query));\n\t}, [mediaQuery, query]);\n\n\t/** @see https://react.dev/reference/react/useSyncExternalStore */\n\treturn useSyncExternalStore(\n\t\t(callback) => {\n\t\t\tmediaQuery?.addEventListener('change', callback);\n\n\t\t\treturn () => {\n\t\t\t\tmediaQuery?.removeEventListener('change', callback);\n\t\t\t};\n\t\t},\n\t\t() => !!mediaQuery?.matches,\n\t\t() => false, // we cannot have media queries on the server\n\t);\n};\n\nexport { removeMediaRulePrefix, useMatchMedia };\n","import { palette } from '../../__generated__/palette.js';\n\nconst {\n  brand,\n  brandAlt,\n  neutral,\n  error,\n  success,\n  news,\n  opinion,\n  sport,\n  culture,\n  lifestyle,\n  labs,\n  specialReport,\n  focus\n} = palette;\nconst background = {\n  primary: palette.neutral[100],\n  secondary: palette.neutral[97],\n  inverse: palette.neutral[10],\n  ctaPrimary: palette.brand[400],\n  ctaPrimaryHover: \"#234B8A\",\n  ctaSecondary: palette.brand[800],\n  ctaSecondaryHover: \"#ACC9F7\",\n  ctaTertiaryHover: \"#E5E5E5\",\n  input: palette.neutral[100],\n  inputChecked: palette.brand[500]\n};\nconst brandBackground = {\n  primary: palette.brand[400],\n  inputChecked: palette.neutral[100],\n  ctaPrimary: palette.neutral[100],\n  ctaPrimaryHover: \"#E0E0E0\",\n  ctaSecondary: palette.brand[600],\n  ctaSecondaryHover: \"#234B8A\",\n  ctaTertiaryHover: palette.brand[300]\n};\nconst brandAltBackground = {\n  primary: palette.brandAlt[400],\n  ctaPrimary: palette.neutral[7],\n  ctaPrimaryHover: \"#454545\",\n  ctaSecondary: palette.brandAlt[200],\n  ctaSecondaryHover: \"#F2AE00\",\n  ctaTertiaryHover: \"#FFD213\"\n};\nconst border = {\n  primary: palette.neutral[60],\n  secondary: palette.neutral[86],\n  success: palette.success[400],\n  error: palette.error[400],\n  ctaTertiary: palette.brand[400],\n  input: palette.neutral[60],\n  inputChecked: palette.brand[500],\n  inputHover: palette.brand[500],\n  inputActive: palette.brand[500],\n  focusHalo: palette.focus[400]\n};\nconst brandBorder = {\n  primary: palette.brand[600],\n  secondary: palette.brand[600],\n  success: palette.success[500],\n  error: palette.error[500],\n  ctaTertiary: palette.neutral[100],\n  input: palette.brand[800],\n  inputChecked: palette.neutral[100],\n  inputHover: palette.neutral[100]\n};\nconst brandAltBorder = {\n  ctaTertiary: palette.neutral[7]\n};\nconst line = {\n  primary: palette.neutral[86]\n};\nconst brandLine = {\n  primary: palette.brand[600]\n};\nconst brandAltLine = {\n  primary: palette.neutral[7]\n};\nconst text = {\n  primary: palette.neutral[7],\n  supporting: palette.neutral[46],\n  success: palette.success[400],\n  error: palette.error[400],\n  ctaPrimary: palette.neutral[100],\n  ctaSecondary: palette.brand[400],\n  ctaTertiary: palette.brand[400],\n  anchorPrimary: palette.brand[500],\n  anchorSecondary: palette.neutral[7],\n  userInput: palette.neutral[7],\n  inputLabel: palette.neutral[7],\n  inputError: palette.neutral[7],\n  inputLabelSupporting: palette.neutral[46],\n  inputChecked: palette.brand[400],\n  //choice card only\n  inputHover: palette.brand[400],\n  //choice card only\n  groupLabel: palette.neutral[7],\n  groupLabelSupporting: palette.neutral[46],\n  newsInverse: palette.news[550]\n};\nconst brandText = {\n  primary: palette.neutral[100],\n  supporting: palette.brand[800],\n  success: palette.success[500],\n  error: palette.error[500],\n  ctaPrimary: palette.brand[400],\n  ctaSecondary: palette.neutral[100],\n  ctaTertiary: palette.neutral[100],\n  anchorPrimary: palette.neutral[100],\n  anchorPrimaryHover: palette.brandAlt[400],\n  userInput: palette.neutral[100],\n  inputLabel: palette.neutral[100],\n  inputLabelSupporting: palette.brand[800]\n};\nconst brandAltText = {\n  primary: palette.neutral[7],\n  supporting: palette.neutral[60],\n  ctaPrimary: palette.neutral[100],\n  ctaSecondary: palette.neutral[7],\n  ctaTertiary: palette.neutral[7],\n  anchorPrimary: palette.neutral[7]\n};\n\nexport { background, border, brand, brandAlt, brandAltBackground, brandAltBorder, brandAltLine, brandAltText, brandBackground, brandBorder, brandLine, brandText, culture, error, focus, labs, lifestyle, line, neutral, news, opinion, specialReport, sport, success, text };\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden } from '../../../foundations/accessibility/visually-hidden.js';\nimport { iconSize } from '../../../foundations/__generated__/size.js';\n\nconst Svg = ({ size, theme }) => /* @__PURE__ */ jsx(\n  \"svg\",\n  {\n    width: size ? iconSize[size] : void 0,\n    height: void 0,\n    viewBox: \"-3 -3 30 30\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: false,\n    \"aria-hidden\": true,\n    children: /* @__PURE__ */ jsx(\n      \"path\",\n      {\n        fillRule: \"evenodd\",\n        clipRule: \"evenodd\",\n        d: \"M12.015 14.042 20.707 22 22 20.709 14.06 12 22 3.291 20.707 2l-8.692 7.958L3.293 2.03 2 3.321 9.97 12 2 20.679l1.293 1.291z\",\n        fill: theme?.fill\n      }\n    )\n  }\n);\nconst SvgCross = ({\n  size,\n  theme,\n  isAnnouncedByScreenReader = false\n}) => /* @__PURE__ */ jsxs(Fragment, { children: [\n  /* @__PURE__ */ jsx(Svg, { size, theme }),\n  isAnnouncedByScreenReader ? /* @__PURE__ */ jsx(\n    \"span\",\n    {\n      css: css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`,\n      children: \"Close\"\n    }\n  ) : \"\"\n] });\n\nexport { SvgCross };\n"],"names":["bannerChannelToLastClosedMap","contributions","subscriptions","signIn","abandonedBasket","withCloseable","CloseableBanner","bannerProps","isOpen","setIsOpen","useState","onClose","channel","name","bannerChannel","storage","local","set","Date","toISOString","document","body","focus","eventHandler","useEffect","handleEscapeKeydown","event","key","window","addEventListener","removeEventListener","bannerWrapper","Banner","bannerId","tracking","submitComponentEvent","content","mobileContent","countryCode","prices","fetchEmail","articleCounts","tickerSettings","isSupporter","separateArticleCount","separateArticleCountSettings","choiceCardAmounts","design","hasBeenSeen","setNode","useIsInView","debounce","threshold","createViewEventFromTracking","campaignCode","createInsertEventFromTracking","numArticles","forTargetedWeeks","finaliseParagraphs","paras","map","p","replaceArticleCount","componentIds","close","cta","secondaryCta","notNow","reminderCta","reminderSet","reminderClose","getComponentIds","buildRenderedContent","bannerContent","buildEnrichedCta","isProfileUrl","baseUrl","ctaUrl","addTrackingParamsToProfileUrl","ctaText","text","addAbandonedBasketAndTrackingParamsToUrl","addRegionIdAndTrackingParamsToSupportUrl","primaryCta","type","SecondaryCtaType","Custom","ContributionsReminder","reminderFields","getReminderFields","buildEnrichedSecondaryCta","cleanHighlightedText","highlightedText","replaceNonArticleCountPlaceholders","trim","cleanHeading","heading","cleanParagraphs","bodyCopy","push","getParagraphsOrMessageText","paragraphs","messageText","copyHasPlaceholder","some","containsNonArticleCountPlaceholder","headingWithArticleCount","highlightedTextWithArticleCount","Error","clickHandlerFor","componentId","componentClickEvent","createClickEventFromTracking","onCtaClick","onSecondaryCtaClick","onReminderCtaClick","onReminderSetClick","onReminderCloseClick","onCloseClick","onNotNowClick","onSignInClick","renderedContent","renderedMobileContent","props","reminderTracking","mainContent","div","ref","err","console","log","withBannerData","validatedBannerWrapper","bannerSchema","safeParse","success","validate","Module","DesignableBannerArticleCountOptOut","nextWord","settings","hasOptedOut","setHasOptedOut","css","styles","optOutContainer","button","articleCountButton","onClick","overlayContainer","Overlay","onOptOut","addArticleCountOptOutCookie","removeArticleCountFromLocalStorage","overlayStyles","containerSettings","backgroundColour","articleCountTextColour","overlayHeader","overlayHeaderText","Button","icon","SvgCross","hideLabel","size","priority","cssOverrides","buttonStyles","closeButtonSettings","overlayBody","overlayCtaContainer","primaryCtaSettings","secondaryCtaSettings","overlayNote","span","a","href","from","tablet","textColour","neutral","textSans17","space","textSansBold17","textSans15","textSans14","container","headlineBold15","headlineBold17","CustomArticleCountCopy","copy","copyHead","copyTail","split","rest","join","DesignableBannerArticleCount","includes","containsArticleCountTemplate","textColor","desktop","createBannerBodyCopy","renderStyles","paragraphsToProcess","Array","isArray","numberOfNonFinalParagraphs","length","index","DesignableBannerBody","highlightedTextSettings","getStyles","isTabletOrAbove","useMatchMedia","removeMediaRulePrefix","textEgyptian15","textEgyptian17","highlightColour","textEgyptianBold15","textEgyptianBold17","DesignableBannerCloseButton","styleOverides","closeButtonOverrides","DesignableBannerCtas","mainOrMobileContent","onPrimaryCtaClick","hasSupportCta","isSupportUrl","LinkButton","PaymentCards","createSource","image","source","media","srcSet","url","ResponsiveImage","images","baseImage","picture","id","img","src","alt","DesignableBannerVisual","isHeaderImage","mainUrl","altText","mobileUrl","tabletUrl","desktopUrl","leftColUrl","wideUrl","DesignableBannerHeader","mobileHeading","headerSettings","headlineSize","header","headerImage","h2","color","copyTopMargin","containerMargin","headlineMedium17","headlineBold24","headlineBold28","leftCol","headlineBold34","dfltTextColor","ThankYou","reminderLabelWithPreposition","thankyouColor","contactUsColor","h3","thankYouHeaderCopy","thankYouBodyCopy","contactLink","InfoCopy","privacyLinkColor","infoCopy","privacyLink","target","rel","ErrorCopy","errorCopy","DesignableBannerReminderSignedOut","reminderStatus","setReminderCtaSettings","ensureHasPreposition","reminderLabel","ReminderStatus","Completed","Signup","onSubmit","email","inputError","updateEmail","handleSubmit","useContributionsReminderEmailForm","headerCopy","form","TextInput","label","onChange","error","value","width","placeholder","ctaContainer","iconSide","disabled","Submitting","errorCopyContainer","infoCopyContainer","textSansBold15","foreColor","DesignableBannerReminder","trackReminderSetClick","mobileReminderRef","createReminder","useContributionsReminderSignup","reminderPeriod","reminderOption","templateSpacing","bannerContainer","bannerHeader","bannerBodyCopy","bannerTicker","bannerCloseButton","buildImageSettings","buildHeaderImageSettings","DesignableBanner","isReminderActive","setIsReminderActive","useRef","current","scrollIntoView","behavior","useReminder","iosAppBannerPresent","setIosAppBannerPresent","innerHeight","documentElement","clientHeight","component","componentType","action","choiceCardSelection","setChoiceCardSelection","getCtaText","getCtaUrl","currencySymbol","useChoiceCards","basic","closeButton","ticker","colours","imageSettings","visual","kind","buildMainImageSettings","choiceCardSettings","buttonColour","buttonTextColour","buttonBorderColour","buttonSelectColour","buttonSelectTextColour","buttonSelectBorderColour","hexColourToString","undefined","buildChoiceCardSettings","templateSettings","background","bodyText","headerText","default","hover","border","specialReport","highlight","articleCountText","tickerStylingSettings","filledProgressColour","filledProgress","progressBarBackgroundColour","progressBarBackground","headlineColour","totalColour","goalColour","showChoiceCards","amountsCardData","showReminder","showAboveArticleCount","outerContainer","containerOverrides","headerWithImageContainer","headerContainer","fonts","contentContainer","tickerData","Ticker","headline","countLabel","bannerVisualContainer","alternativeVisual","choiceCardsContainer","ChoiceCards","setSelectionsCallback","selection","amountsTest","cssCtaOverides","guardianLogoContainer","SvgGuardianLogo","logo","reminderContainer","reminderText","reminderFormContainer","limitHeight","wide","isGridCell","until","bannerHasImage","between","mobileMedium","and","showRemindMeLater","defaultSettings","unvalidated","validated","isDirty","setIsDirty","setEmail","isEmpty","isValid","isValidEmail","emailIsShortEnoughForIdentity","e","preventDefault","CREATE_ONE_OFF_REMINDER_ENDPOINT","reminderPlatform","reminderComponent","reminderStage","setReminderStatus","Editing","reminderSignupData","fetch","JSON","stringify","method","headers","then","response","ok","addContributionReminderCookie","catch","reminderDateString","today","reminderDate","parse","start","end","setCookie","daysToLive","Math","round","valueOf","hasSetReminder","getCookie","PREPOSITION_REGEX","test","containsPreposition","addPreposition","String","toLowerCase","cachedQueries","Map","query","replace","mediaQuery","setMediaQuery","get","matchMedia","useSyncExternalStore","callback","matches","brand","brandAlt","news","opinion","sport","culture","lifestyle","labs","palette","primary","secondary","inverse","ctaPrimary","ctaPrimaryHover","ctaSecondary","ctaSecondaryHover","ctaTertiaryHover","input","inputChecked","brandAltBackground","line","brandAltLine","supporting","ctaTertiary","anchorPrimary","anchorSecondary","userInput","inputLabel","inputLabelSupporting","inputHover","groupLabel","groupLabelSupporting","newsInverse","brandText","anchorPrimaryHover","brandAltText","Svg","theme","jsx","iconSize","height","viewBox","xmlns","focusable","children","fillRule","clipRule","d","fill","isAnnouncedByScreenReader","jsxs","Fragment","visuallyHidden"],"sourceRoot":""}