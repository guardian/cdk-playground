"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[8979],{34287:(e,r,n)=>{n.r(r),n.d(r,{DiscussionApps:()=>g});var t=n(62335),i=n(22820),o=n(18247),s=n(57820),c=n.n(s),a=n(50484),u=n(36343),p=n(67400),f=n(55044),d=n(66781),v=n(73771),l=n(1948),y=n(5676);function b(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?b(Object(n),!0).forEach((function(r){(0,t.A)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var O=function(){var e=(0,o.A)(c().mark((function e(r,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.QF)().comment(r,n).then((function(e){if(e.__type===u.DiscussionServiceResponseType.DiscussionServiceResponseWithError)return(0,l.z)("ApiError");var r=(0,d.qb)(JSON.parse(e.response));return"error"===r.kind&&window.guardian.modules.sentry.reportError(Error("Failed parseCommentResponse: ".concat(r.error)),"discussion"),r})));case 1:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.A)(c().mark((function e(r,n,t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.QF)().reply(r,n,t).then((function(e){if(e.__type===u.DiscussionServiceResponseType.DiscussionServiceResponseWithError)return(0,l.z)("ApiError");var r=(0,d.qb)(JSON.parse(e.response));return"error"===r.kind&&window.guardian.modules.sentry.reportError(Error("Failed parseCommentResponse: ".concat(r.error)),"discussion"),r})));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}(),_=function(){var e=(0,o.A)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.QF)().recommend(r).then((function(e){return e.__type===u.DiscussionServiceResponseType.DiscussionServiceResponseWithResponse&&"ok"===(0,d.Bq)(JSON.parse(e.response)).kind})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.z)("Unimplemented"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var r=(0,p.useState)(!1),n=(0,i.A)(r,2),t=n[0],o=n[1],s=(0,p.useState)(),c=(0,i.A)(s,2),l=c[0],b=c[1];return(0,p.useEffect)((function(){(0,f.LE)().isSignedIn().then(o)}),[]),(0,p.useEffect)((function(){if(!t)return b(void 0);(0,f.QF)().getUserProfile().then((function(e){if(e.__type===u.DiscussionServiceResponseType.DiscussionServiceResponseWithError)return b(void 0);var r=(0,d.mw)(JSON.parse(e.response));if("ok"!==r.kind)return b(void 0);b({kind:"Reader",onComment:O,onReply:m,onRecommend:_,addUsername:w,reportAbuse:(0,v.Vf)(void 0),profile:r.value})}))}),[t,b]),(0,a.jsx)(y.d,h(h({user:l},e),{},{reportAbuseUnauthenticated:(0,v.Vf)(void 0)}))}},69932:(e,r)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.DiscussionNativeError=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(n||(r.DiscussionNativeError=n={}))},25607:(e,r)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.MediaEvent=void 0,function(e){e[e.request=0]="request",e[e.ready=1]="ready",e[e.play=2]="play",e[e.percent25=3]="percent25",e[e.percent50=4]="percent50",e[e.percent75=5]="percent75",e[e.end=6]="end"}(n||(r.MediaEvent=n={}))},13948:(e,r)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.PurchaseScreenReason=void 0,function(e){e[e.hideAds=0]="hideAds",e[e.epic=1]="epic"}(n||(r.PurchaseScreenReason=n={}))},36343:function(e,r,n){var t=this&&this.__createBinding||(Object.create?function(e,r,n,t){void 0===t&&(t=n);var i=Object.getOwnPropertyDescriptor(r,n);i&&!("get"in i?!r.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,t,i)}:function(e,r,n,t){void 0===t&&(t=n),e[t]=r[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),o=this&&this.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(r,e,n);return i(r,e),r};Object.defineProperty(r,"__esModule",{value:!0}),r.Interaction=r.Newsletters=r.Navigation=r.Analytics=r.Discussion=r.Metrics=r.Videos=r.Gallery=r.User=r.Notifications=r.Tag=r.Acquisitions=r.Commercial=r.Environment=void 0,o(n(25607),r),o(n(13948),r),o(n(47441),r),o(n(31274),r),o(n(69932),r),o(n(42589),r),o(n(52590),r),o(n(10864),r),o(n(73154),r),o(n(69458),r),o(n(82438),r),o(n(29872),r),o(n(23131),r),o(n(25406),r),o(n(83886),r),o(n(43679),r),o(n(89027),r);var c=s(n(72910));r.Environment=c;var a=s(n(16873));r.Commercial=a;var u=s(n(83551));r.Acquisitions=u;var p=s(n(69139));r.Tag=p;var f=s(n(72031));r.Notifications=f;var d=s(n(30316));r.User=d;var v=s(n(46365));r.Gallery=v;var l=s(n(435));r.Videos=l;var y=s(n(53274));r.Metrics=y;var b=s(n(40771));r.Discussion=b;var h=s(n(555));r.Analytics=h;var O=s(n(81449));r.Navigation=O;var m=s(n(79907));r.Newsletters=m;var _=s(n(43019));r.Interaction=_}}]);
//# sourceMappingURL=DiscussionApps-importable.client.web.legacy.eadd84f9d45f3af11667.js.map