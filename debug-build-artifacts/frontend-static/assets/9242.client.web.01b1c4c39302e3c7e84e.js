(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9242],{11493:(e,t,n)=>{"use strict";n.d(t,{C:()=>R});var r=n(50484),o=n(24017),i=n(35405),s=n(7902),c=n(96378),d=n(99923),a=n(7351),u=n(77907),l=n(68163),h=n(42631),g=n(54684),p=n(53694),f=n(15593);function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function w(){const e=m(["\n\tpadding-top: ","px;\n\tpadding-bottom: ","px;\n"]);return w=function(){return e},e}function x(){const e=m(["\n\tborder-radius: 70px;\n\twidth: 60px;\n\theight: 60px;\n\t"," {\n\t\twidth: 36px;\n\t\theight: 36px;\n\t}\n"]);return x=function(){return e},e}function b(){const e=m(["\n\tpadding-bottom: ","px;\n\tpadding-right: ","px;\n"]);return b=function(){return e},e}function P(){const e=m(["\n\t",";\n\tpadding-bottom: ","px;\n"]);return P=function(){return e},e}function v(){const e=m(["\n\t","\n\t"," {\n\t\t","\n\t}\n\tcolor: ",";\n\tpadding-bottom: ","px;\n"]);return v=function(){return e},e}function j(){const e=m(["\n\t","\n\tcolor: ",";\n\tpadding-bottom: ","px;\n"]);return j=function(){return e},e}function B(){const e=m(["\n\tfont-weight: 700;\n\tcolor: ",";\n"]);return B=function(){return e},e}function M(){const e=m(["\n\tcolor: ",";\n\ttext-decoration: none;\n\tborder-bottom: 1px solid ",";\n\ttransition: border-color 0.15s ease-out;\n\t:hover {\n\t\tborder-color: ",";\n\t}\n"]);return M=function(){return e},e}function C(){const e=m(["\n\tdisplay: flex;\n\tflex-direction: column;\n\t"," {\n\t\tflex-direction: row;\n\t}\n"]);return C=function(){return e},e}function S(){const e=m(["\n\t\t\t\t\tcolor: ",";\n\t\t\t\t"]);return S=function(){return e},e}function y(){const e=m(["\n\tdisplay: inline;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-decoration-color: ",";\n\twhite-space: inherit;\n\t/* stylelint-disable -- there’s no Source option for this look */\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tfont-size: inherit;\n\tline-height: inherit;\n\t/* stylelint-enable */\n\tvertical-align: inherit;\n"]);return y=function(){return e},e}const I=(0,o.css)(w(),c.x[1],c.x[1]),E=(0,o.css)(x(),d.TG.desktop),T=(0,o.css)(b(),c.x[1],c.x[2]),k=(0,o.css)(P(),a.aal,c.x[1]),_=(0,o.css)(v(),a.PSs,d.TG.desktop,a.Ikj,u.M.neutral[46],c.x[1]),N=(0,o.css)(j(),a.cYp,(0,p.M)("--discussion-subdued"),c.x[1]),F=(0,o.css)(B(),(0,p.M)("--article-text")),O=(0,o.css)(M(),(0,p.M)("--sign-in-link"),(0,p.M)("--sign-in-link-underline"),(0,p.M)("--sign-in-link")),G=(0,o.css)(C(),d.TG.desktop),L=e=>{let{count:t}=e;return(0,r.jsxs)("h2",{css:k,children:["Comments"," ",(0,r.jsxs)("span",{css:(0,o.css)(S(),(0,p.M)("--discussion-subdued")),children:["(",null!=t?t:"…",")"]})]})},A=()=>{(0,h.LE)().signIn(i.SignInScreenReason.accessDiscussion,s.SignInScreenReferrer.accessDiscussion).catch((()=>{}))},D=(0,o.css)(y(),(0,p.M)("--sign-in-link-underline")),U=e=>{let{children:t,action:n}=e;const{renderingTarget:o}=(0,f.U)();return"Web"===o?(0,r.jsx)("a",{href:"https://profile.theguardian.com/signin?INTCMP=DOTCOM_COMMENTS_SIGNIN&".concat((0,g.h)(n)),css:O,children:t}):(0,r.jsx)(l.z,{priority:"subdued",theme:{textSubdued:(0,p.M)("--sign-in-link")},cssOverrides:D,onClick:A,children:t})},R=e=>{let{commentCount:t,enableDiscussionSwitch:n,user:o,isClosedForComments:i}=e;const s=(null==o?void 0:o.privateFields)&&!o.privateFields.canPostComment;return n?s?(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsxs)("span",{css:N,children:["Commenting has been disabled for this account (",(0,r.jsx)("a",{href:"https://www.theguardian.com/community-faqs#321a",css:O,children:"why?"})," ",")"]})]}):o&&i?(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsx)("span",{css:N,children:"This discussion is closed for comments"})]}):!o&&i?(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsxs)("span",{css:N,children:["This discussion is now closed for comments but you can still"," ",(0,r.jsx)(U,{action:"signin_to_comment",children:"sign in"})," ","or"," ",(0,r.jsx)(U,{action:"register_to_comment",children:"create your Guardian account"})," ","to join the discussion next time"]})]}):o?(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsxs)("div",{css:G,children:[(0,r.jsx)("div",{css:T,children:(0,r.jsx)("img",{src:o.secureAvatarUrl||"https://avatar.guim.co.uk/no-user-image.gif",alt:o.displayName||"Guardian User",css:E})}),(0,r.jsxs)("div",{css:_,children:["Signed in as",(0,r.jsx)("div",{css:F,children:o.displayName||"Guardian User"})]})]})]}):(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsxs)("span",{css:N,children:[(0,r.jsx)(U,{action:"signin_to_comment",children:"Sign in"})," ","or"," ",(0,r.jsx)(U,{action:"register_to_comment",children:"create your Guardian account"})," ","to join the discussion"]})]}):o?(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsx)("span",{css:N,children:"Commenting has been disabled at this time"})]}):(0,r.jsxs)("div",{css:I,children:[(0,r.jsx)(L,{count:t}),(0,r.jsxs)("span",{css:N,children:["Commenting has been disabled at this time but you can still"," ",(0,r.jsx)(U,{action:"signin_to_comment",children:"sign in"})," ","or"," ",(0,r.jsx)(U,{action:"register_to_comment",children:"create your Guardian account"})," ","to join the discussion when it's back"]})]})}},42631:(e,t,n)=>{"use strict";n.d(t,{OA:()=>k,IC:()=>W,GR:()=>E,QF:()=>V,Dq:()=>y,yY:()=>D,_5:()=>K,ud:()=>q,U:()=>N,yV:()=>O,LE:()=>L,FA:()=>R});var r=n(13011),o=n(96831),i=n(86293),s=n(99895),c=n(65490),d=n(89993),a=n(85159),u=(n(47038),n(59517)),l=(n(29103),n(60579)),h=n(54703),g=n(69504),p=n(75271),f=n(9474),m=n(13213);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends m.TProtocol{getTransport(){return this.concreteProtocol.getTransport()}flush(){return this.concreteProtocol.flush()}writeMessageBegin(e,t,n){return this.concreteProtocol.writeMessageBegin(e,t,n)}writeMessageEnd(){return this.concreteProtocol.writeMessageEnd()}writeStructBegin(e){return this.concreteProtocol.writeStructBegin(e)}writeStructEnd(){return this.concreteProtocol.writeStructEnd()}writeFieldBegin(e,t,n){return this.concreteProtocol.writeFieldBegin(e,t,n)}writeFieldEnd(){return this.concreteProtocol.writeFieldEnd()}writeFieldStop(){return this.concreteProtocol.writeFieldStop()}writeMapBegin(e,t,n){return this.concreteProtocol.writeMapBegin(e,t,n)}writeMapEnd(){return this.concreteProtocol.writeMapEnd()}writeListBegin(e,t){return this.concreteProtocol.writeListBegin(e,t)}writeListEnd(){return this.concreteProtocol.writeListEnd()}writeSetBegin(e,t){return this.concreteProtocol.writeSetBegin(e,t)}writeSetEnd(){return this.concreteProtocol.writeSetEnd()}writeBool(e){return this.concreteProtocol.writeBool(e)}writeByte(e){return this.concreteProtocol.writeByte(e)}writeI16(e){return this.concreteProtocol.writeI16(e)}writeI32(e){return this.concreteProtocol.writeI32(e)}writeI64(e){return this.concreteProtocol.writeI64(e)}writeDouble(e){return this.concreteProtocol.writeDouble(e)}writeString(e){return this.concreteProtocol.writeString(e)}writeBinary(e){return this.concreteProtocol.writeBinary(e)}readMessageBegin(){return this.concreteProtocol.readMessageBegin()}readMessageEnd(){return this.concreteProtocol.readMessageEnd()}readStructBegin(){return this.concreteProtocol.readStructBegin()}readStructEnd(){return this.concreteProtocol.readStructEnd()}readFieldBegin(){return this.concreteProtocol.readFieldBegin()}readFieldEnd(){return this.concreteProtocol.readFieldEnd()}readMapBegin(){return this.concreteProtocol.readMapBegin()}readMapEnd(){return this.concreteProtocol.readMapEnd()}readListBegin(){return this.concreteProtocol.readListBegin()}readListEnd(){return this.concreteProtocol.readListEnd()}readSetBegin(){return this.concreteProtocol.readSetBegin()}readSetEnd(){return this.concreteProtocol.readSetEnd()}readBool(){return this.concreteProtocol.readBool()}readByte(){return this.concreteProtocol.readByte()}readI16(){return this.concreteProtocol.readI16()}readI32(){return this.concreteProtocol.readI32()}readI64(){return this.concreteProtocol.readI64()}readDouble(){return this.concreteProtocol.readDouble()}readBinary(){return this.concreteProtocol.readBinary()}readString(){return this.concreteProtocol.readString()}skip(e){return this.concreteProtocol.skip(e)}constructor(e){super(e.getTransport()),w(this,"concreteProtocol",void 0),this.concreteProtocol=e}}class b extends x{writeMessageBegin(e,t,n){t===m.MessageType.CALL||t===m.MessageType.ONEWAY?super.writeMessageBegin(this.serviceName+b.separator+e,t,n):super.writeMessageBegin(e,t,n)}constructor(e,t){super(e),w(this,"serviceName",void 0),this.serviceName=t}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){window.android?window.android.postMessage(e.data,e.connectionId):window.webkit?window.webkit.messageHandlers.iOSWebViewMessage.postMessage(e):console.warn("No native APIs available")}w(b,"separator",":");let j=1;const B=()=>"connection-".concat(j++);class M extends m.ThriftConnection{reset(e){if(e===this.connectionId&&window.nativeConnections){console.warn("Reseting connection "+e),delete window.nativeConnections[this.connectionId];for(const e of this.promises)e.reject(new m.TApplicationException(m.TApplicationExceptionType.UNKNOWN,"Timeout error"));this.promises=[],this.connectionId=B(),window.nativeConnections[this.connectionId]=this}}receive(e){const t=this.promises.shift();if(t){clearTimeout(t.timeoutId);const n=Buffer.from(e.data,"base64");t.resolve(n)}this.sendNextMessage()}sendNextMessage(){const e=this.outBuffer.shift();e&&(console.log("Sending next message"),v(e))}send(e){const t=this.connectionId,n=this;return new Promise((function(r,o){n.promises.push({resolve:r,reject:o,timeoutId:setTimeout((function(){n.reset(t)}),3e4)});const i={data:e.toString("base64"),connectionId:t};1===n.promises.length?(console.log("Sending message immediately"),v(i)):(console.log("Queing message because others in flight"),n.outBuffer.push(i))}))}constructor(e,t){var n;super(e,t),P(this,"connectionId",B()),P(this,"promises",[]),P(this,"outBuffer",[]),"undefined"!=typeof window&&(window.nativeConnections=null!==(n=window.nativeConnections)&&void 0!==n?n:{},window.nativeConnections[this.connectionId]=this)}}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffered",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"compact";const r=new M((0,m.getTransport)(t),class extends b{constructor(t){var r;super(new((0,m.getProtocol)(n))(t),null!==(r=e.serviceName)&&void 0!==r?r:"")}});return new e(r)}let S;const y=()=>((0,f.b)(S)&&(S=C(c.Client,"buffered","compact")),S);let I;const E=()=>((0,f.b)(I)&&(I=C(i.Client,"buffered","compact")),I);let T;const k=()=>(T||(T=C(r.Client,"buffered","compact")),T);let _;const N=()=>(_||(_=C(l.Client,"buffered","compact")),_);let F;const O=()=>(F||(F=C(h.Client,"buffered","compact")),F);let G;const L=()=>(G||(G=C(g.Client,"buffered","compact")),G);let A;const D=()=>(A||(A=C(d.Client,"buffered","compact")),A);let U;const R=()=>(U||(U=C(p.Client,"buffered","compact")),U);let z;const W=()=>(z||(z=C(o.Client,"buffered","compact")),z);let Y;const q=()=>(Y||(Y=C(u.Client,"buffered","compact")),Y);let Q;const V=()=>(Q||(Q=C(s.Client,"buffered","compact")),Q);let H;const K=()=>(H||(H=C(a.Client,"buffered","compact")),H)},54684:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(41124);const o=(e,t)=>{const n={componentType:"identityauthentication",componentId:e};return t&&(n.viewId=t),"componentEventParams=".concat(encodeURIComponent((0,r.G)(n)))}},41124:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});const r=e=>Object.keys(e).map((t=>{var n;const r=null!==(n=e[t])&&void 0!==n?n:"undefined",o=Array.isArray(r)?r.map((e=>encodeURIComponent(e))).join(","):encodeURIComponent(r);return"".concat(t,"=").concat(o)})).join("&")},53694:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});const r=e=>"var(".concat(e,")")},50150:()=>{}}]);
//# sourceMappingURL=9242.client.web.01b1c4c39302e3c7e84e.js.map