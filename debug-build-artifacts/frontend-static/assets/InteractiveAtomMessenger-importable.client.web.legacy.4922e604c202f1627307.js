"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[7763],{19455:(e,t,n)=>{n.r(t),n.d(t,{InteractiveAtomMessenger:()=>a});var i=n(22820),c=n(16346),o=n(67400),r=n(20939),s=(0,r.Oxt)("kind",[(0,r.Ikc)({kind:(0,r.euz)("interactive:scroll"),scroll:(0,r.aig)()}),(0,r.Ikc)({kind:(0,r.euz)("interactive:height"),height:(0,r.aig)()})]),a=function(e){var t=e.id,n=(0,o.useState)(),a=(0,i.A)(n,2),u=a[0],l=a[1],d=(0,o.useState)(),f=(0,i.A)(d,2),v=f[0],g=f[1],h=(0,o.useState)(0),m=(0,i.A)(h,2),k=m[0],w=m[1],p=(0,o.useState)(0),E=(0,i.A)(p,2),L=E[0],_=E[1],A=(0,o.useCallback)((function(e){var t;null==v||null===(t=v.contentWindow)||void 0===t||t.postMessage(e,"*")}),[v]);return(0,o.useEffect)((function(){var e=document.querySelector('iframe[id="'.concat(t,'"]'));e&&g(e)}),[t]),(0,o.useEffect)((function(){(null==v?void 0:v.parentElement)instanceof HTMLDivElement&&l(v.parentElement)}),[v]),(0,o.useEffect)((function(){if(v&&u){var e=function(){var e=u.getBoundingClientRect();return e.top>0?w(0):e.top<-e.height?w(1):void w(-e.top)},t=function(e){if(e.source===v.contentWindow){var t=(0,r.xLC)(s,e.data);if(t.success)switch(t.output.kind){case"interactive:height":return void _(t.output.height);case"interactive:scroll":return(0,c.Rm)("dotcom","ðŸ“œ scrolly",{container:u}),void v.classList.add("scrolly")}}};return window.addEventListener("scroll",e),window.addEventListener("message",t),function(){window.removeEventListener("scroll",e),window.removeEventListener("message",t)}}}),[v,u]),(0,o.useEffect)((function(){A({kind:"interactive:scroll",scroll:k})}),[A,k]),(0,o.useEffect)((function(){u&&(u.style.height=L>0?"".concat(L,"px"):"auto",A({kind:"interactive:height",height:L}))}),[A,L,u]),null}}}]);
//# sourceMappingURL=InteractiveAtomMessenger-importable.client.web.legacy.4922e604c202f1627307.js.map