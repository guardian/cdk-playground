{"version":3,"file":"4487.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ContributionsEpicNewsletterSignup.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ThreeTierChoiceCardData.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ThreeTierChoiceCards.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/EpicButton.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicButtons.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicReminderSignedIn.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicReminderSignedOut.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicReminder.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ctas/ContributionsEpicCtasContainer.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/utils/ophan.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useContributionsReminderEmailForm.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/hooks/useContributionsReminderSignup.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/articleCountOptOut.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/reminders.ts","webpack://@guardian/dotcom-rendering/./src/components/marketing/shared/ArticleCountOptOutOverlay.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/shared/ArticleCountOptOutPopup.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/replaceArticleCount.tsx","webpack://@guardian/dotcom-rendering/./src/components/marketing/lib/viewLog.ts"],"sourcesContent":["import { css } from '@emotion/react';\nimport { space } from '@guardian/source/foundations';\nimport type { Tracking } from '@guardian/support-dotcom-components/dist/shared/types/props/shared';\nimport { NewsletterPrivacyMessage } from '../../NewsletterPrivacyMessage';\nimport { SecureSignup } from '../../SecureSignup.importable';\n\nconst containerStyles = css`\n\tmargin: ${space[6]}px ${space[2]}px ${space[1]}px 0;\n`;\n\ninterface ContributionsEpicNewsletterSignupV2Props {\n\tnewsletterId: string;\n\tsuccessDescription: string;\n\ttracking: Tracking;\n}\n\nexport const ContributionsEpicNewsletterSignup = ({\n\tnewsletterId,\n\tsuccessDescription,\n\ttracking,\n}: ContributionsEpicNewsletterSignupV2Props): JSX.Element => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<SecureSignup\n\t\t\t\tnewsletterId={newsletterId}\n\t\t\t\tsuccessDescription={successDescription}\n\t\t\t\tabTest={{\n\t\t\t\t\tname: tracking.abTestName,\n\t\t\t\t\tvariant: tracking.abTestVariant,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<NewsletterPrivacyMessage />\n\t\t</div>\n\t);\n};\n","import { isUndefined } from '@guardian/libs';\nimport type { ChoiceInfo } from './ThreeTierChoiceCards';\n\nexport const ChoiceCardTestData_REGULAR: ChoiceInfo[] = [\n\t{\n\t\tsupportTier: 'Contribution',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support ${currencySymbol}${amount}/month`,\n\t\tbenefitsLabel: 'Support',\n\t\tbenefits: () => [\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t],\n\t\trecommended: false,\n\t},\n\t{\n\t\tsupportTier: 'SupporterPlus',\n\t\tlabel: (\n\t\t\tamount: number,\n\t\t\tcurrencySymbol: string,\n\t\t\tdiscount?: number,\n\t\t): JSX.Element | string => {\n\t\t\tif (!isUndefined(discount)) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\tSupport{' '}\n\t\t\t\t\t\t<s>\n\t\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t\t{amount}\n\t\t\t\t\t\t</s>{' '}\n\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t{amount * discount}/month{' '}\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn `Support ${currencySymbol}${amount}/month`;\n\t\t\t}\n\t\t},\n\t\tbenefitsLabel: 'All-access digital',\n\t\tbenefits: () => [\n\t\t\t'Unlimited access to the Guardian app',\n\t\t\t'Unlimited access to our new Feast App',\n\t\t\t'Ad-free reading on all your devices',\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t\t'Far fewer asks for support',\n\t\t],\n\t\trecommended: true,\n\t},\n\t{\n\t\tsupportTier: 'OneOff',\n\t\tlabel: (): string => 'Support with another amount',\n\t\tbenefitsLabel: undefined,\n\t\tbenefits: () => ['We welcome support of any size, any time'],\n\t\trecommended: false,\n\t},\n];\n\nexport const ChoiceCardTestData_US: ChoiceInfo[] = [\n\t{\n\t\tsupportTier: 'Contribution',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support ${currencySymbol}${amount}/month`,\n\t\tbenefitsLabel: 'Support',\n\t\tbenefits: () => [\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t],\n\t\trecommended: false,\n\t},\n\t{\n\t\tsupportTier: 'SupporterPlus',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support ${currencySymbol}${amount}/month`,\n\t\tbenefitsLabel: 'All-access digital',\n\t\tbenefits: () => [\n\t\t\t'Unlimited access to the Guardian app',\n\t\t\t'Unlimited access to our new Feast App',\n\t\t\t'Ad-free reading on all your devices',\n\t\t\t'Exclusive newsletter for supporters, sent every week from the Guardian newsroom',\n\t\t\t'Far fewer asks for support',\n\t\t],\n\t\trecommended: true,\n\t},\n\t{\n\t\tsupportTier: 'OneOff',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support once from just ${currencySymbol}1`,\n\t\tbenefitsLabel: undefined,\n\t\tbenefits: (currencySymbol: string) => [\n\t\t\t`We welcome support of any size, any time - whether you choose to give ${currencySymbol}1 or more`,\n\t\t],\n\t\trecommended: false,\n\t},\n];\n\nexport const ChoiceCardTestData_TwoTier_REGULAR: ChoiceInfo[] = [\n\t{\n\t\tsupportTier: 'SupporterPlus',\n\t\tlabel: (\n\t\t\tamount: number,\n\t\t\tcurrencySymbol: string,\n\t\t\tdiscount?: number,\n\t\t): JSX.Element | string => {\n\t\t\tif (!isUndefined(discount)) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\tSupport{' '}\n\t\t\t\t\t\t<s>\n\t\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t\t{amount}\n\t\t\t\t\t\t</s>{' '}\n\t\t\t\t\t\t{currencySymbol}\n\t\t\t\t\t\t{amount * discount}/month{' '}\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn `Support ${currencySymbol}${amount}/month`;\n\t\t\t}\n\t\t},\n\t\tbenefitsLabel: 'All-access digital',\n\t\tbenefits: () => [\n\t\t\t'Unlimited access to the Guardian app',\n\t\t\t'Ad-free reading on all your devices',\n\t\t\t'Exclusive newsletter for supporters',\n\t\t\t'And much more!',\n\t\t],\n\t\trecommended: true,\n\t},\n\t{\n\t\tsupportTier: 'OneOff',\n\t\tlabel: (amount: number, currencySymbol: string): string =>\n\t\t\t`Support us from just ${currencySymbol}1`,\n\t\tbenefitsLabel: undefined,\n\t\tbenefits: (currencySymbol: string) => [\n\t\t\t`We welcome support of any size, any time - whether you choose to give ${currencySymbol}1 or more`,\n\t\t],\n\t\trecommended: false,\n\t},\n];\n","import { css } from '@emotion/react';\nimport { isUndefined } from '@guardian/libs';\nimport {\n\tpalette,\n\tspace,\n\ttextSans15,\n\ttextSansBold14,\n\ttextSansBold15,\n\tuntil,\n} from '@guardian/source/foundations';\nimport {\n\tRadio,\n\tRadioGroup,\n\tStack,\n\tSvgTickRound,\n} from '@guardian/source/react-components';\nimport type { CountryGroupId } from '@guardian/support-dotcom-components';\nimport {\n\tcountryCodeToCountryGroupId,\n\tgetLocalCurrencySymbol,\n} from '@guardian/support-dotcom-components';\nimport type { Dispatch, SetStateAction } from 'react';\nimport {\n\tChoiceCardTestData_REGULAR,\n\tChoiceCardTestData_TwoTier_REGULAR,\n\tChoiceCardTestData_US,\n} from './ThreeTierChoiceCardData';\nimport type {\n\tSupportRatePlan,\n\tSupportTier,\n} from './utils/threeTierChoiceCardAmounts';\nimport { threeTierChoiceCardAmounts } from './utils/threeTierChoiceCardAmounts';\n\nconst supportTierChoiceCardStyles = (selected: boolean) => css`\n\tdisplay: block;\n\tborder: ${selected\n\t\t? `2px solid ${palette.brand['500']}`\n\t\t: `1px solid ${palette.neutral[46]}`};\n\tbackground-color: ${selected ? palette.sport[800] : palette.neutral[100]};\n\tborder-radius: 10px;\n\tpadding: ${selected\n\t\t? `6px ${space[5]}px 10px ${space[5]}px`\n\t\t: `6px ${space[5]}px`};\n`;\n\nconst benefitsStyles = css`\n\t${textSans15};\n\tcolor: ${palette.neutral[7]};\n\tlist-style: none;\n\tmargin: 0 0 0 -4px;\n\tpadding: 0;\n\n\tli + li {\n\t\tmargin-top: ${space[2]}px;\n\t}\n\n\tli {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tmargin-top: ${space[2]}px;\n\t}\n\n\tsvg {\n\t\tflex-shrink: 0;\n\t\tmargin-right: ${space[2]}px;\n\t\tfill: ${palette.brand[400]};\n\t}\n`;\n\nconst benefitsLabelStyles = css`\n\tcolor: ${palette.neutral[0]};\n\t${textSans15};\n\n\tstrong {\n\t\t${textSansBold15};\n\t}\n`;\n\nconst labelOverrideStyles = css`\n\t+ label div {\n\t\tfont-weight: bold;\n\t\ts {\n\t\t\tfont-weight: normal;\n\t\t}\n\t}\n`;\n\nconst supportingTextStyles = css`\n\tmargin-top: ${space[4]}px;\n`;\n\nconst recommendedPillStyles = css`\n\tborder-radius: 4px;\n\tpadding: ${space[1]}px ${space[2]}px;\n\tbackground-color: ${palette.brand[400]};\n\t${textSansBold14};\n\tcolor: ${palette.neutral[100]};\n\tposition: absolute;\n\ttop: -${space[2]}px;\n\t${until.phablet} {\n\t\tright: ${space[3]}px;\n\t}\n\tright: ${space[5]}px;\n`;\n\nconst discountedPillStyles = css`\n\tborder-radius: 4px;\n\tpadding: ${space[1]}px ${space[2]}px;\n\tbackground-color: ${palette.error[400]};\n\t${textSansBold14};\n\tcolor: ${palette.neutral[100]};\n\tposition: absolute;\n\ttop: -${space[2]}px;\n\t${until.phablet} {\n\t\tright: ${space[3]}px;\n\t}\n\tright: ${space[5]}px;\n`;\n\nexport type ChoiceInfo = {\n\tsupportTier: SupportTier;\n\tlabel: (\n\t\tamount: number,\n\t\tcurrencySymbol: string,\n\t\tdiscount?: number,\n\t) => JSX.Element | string;\n\tbenefitsLabel?: string;\n\tbenefits: (currencySymbol: string) => string[];\n\trecommended: boolean;\n};\n\nfunction getChoiceAmount(\n\tsupportTier: SupportTier,\n\tratePlan: SupportRatePlan,\n\tcountryGroupId: CountryGroupId,\n): number {\n\treturn threeTierChoiceCardAmounts[ratePlan][countryGroupId][supportTier];\n}\n\nconst SupportingBenefits = ({\n\tbenefitsLabel,\n\tbenefits,\n}: {\n\tbenefitsLabel: string | undefined;\n\tbenefits: string[];\n}) => {\n\tconst isBenefit = !!benefitsLabel;\n\treturn (\n\t\t<div css={supportingTextStyles}>\n\t\t\t{!!benefitsLabel && (\n\t\t\t\t<span css={benefitsLabelStyles}>\n\t\t\t\t\tUnlock <strong>{benefitsLabel}</strong> benefits:\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t<ul css={benefitsStyles}>\n\t\t\t\t{benefits.map((benefit) => (\n\t\t\t\t\t<li key={benefit}>\n\t\t\t\t\t\t{isBenefit && <SvgTickRound size=\"xsmall\" />}\n\t\t\t\t\t\t{benefit}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nconst RecommendedPill = () => {\n\treturn <div css={recommendedPillStyles}>Recommended</div>;\n};\n\nconst DiscountedPill = ({ discount }: { discount: number }) => {\n\treturn <div css={discountedPillStyles}>{discount}% off</div>;\n};\n\ntype ThreeTierChoiceCardsProps = {\n\tselectedProduct: SupportTier;\n\tsetSelectedProduct: Dispatch<SetStateAction<SupportTier>>;\n\tcountryCode?: string;\n\tvariantOfChoiceCard: string;\n\tsupporterPlusDiscount?: number;\n};\n\nconst getChoiceCardData = (choiceCardVariant: string): ChoiceInfo[] => {\n\tswitch (choiceCardVariant) {\n\t\tcase 'US_THREE_TIER_CHOICE_CARDS':\n\t\t\treturn ChoiceCardTestData_US;\n\t\tcase 'US_CHECKOUT_THREE_TIER_CHOICE_CARDS':\n\t\t\treturn ChoiceCardTestData_US;\n\t\tcase 'TWO_TIER_CHOICE_CARDS':\n\t\t\treturn ChoiceCardTestData_TwoTier_REGULAR;\n\t\tdefault:\n\t\t\treturn ChoiceCardTestData_REGULAR;\n\t}\n};\n\nexport const ThreeTierChoiceCards = ({\n\tcountryCode,\n\tselectedProduct,\n\tsetSelectedProduct,\n\tvariantOfChoiceCard,\n\tsupporterPlusDiscount,\n}: ThreeTierChoiceCardsProps) => {\n\tconst currencySymbol = getLocalCurrencySymbol(countryCode);\n\tconst countryGroupId = countryCodeToCountryGroupId(countryCode);\n\n\tconst Choices = getChoiceCardData(variantOfChoiceCard);\n\n\treturn (\n\t\t<RadioGroup\n\t\t\tcssOverrides={css`\n\t\t\t\tmargin-top: ${space[6]}px;\n\t\t\t`}\n\t\t>\n\t\t\t<Stack space={3}>\n\t\t\t\t{Choices.map(\n\t\t\t\t\t({\n\t\t\t\t\t\tsupportTier,\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tbenefitsLabel,\n\t\t\t\t\t\tbenefits,\n\t\t\t\t\t\trecommended,\n\t\t\t\t\t}) => {\n\t\t\t\t\t\tconst choiceAmount = getChoiceAmount(\n\t\t\t\t\t\t\tsupportTier,\n\t\t\t\t\t\t\t'Monthly',\n\t\t\t\t\t\t\tcountryGroupId,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst selected = selectedProduct === supportTier;\n\n\t\t\t\t\t\tconst hasDiscount =\n\t\t\t\t\t\t\t!isUndefined(supporterPlusDiscount) &&\n\t\t\t\t\t\t\tsupportTier === 'SupporterPlus';\n\n\t\t\t\t\t\tconst radioId = `choicecard-${supportTier}`;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={supportTier}\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{hasDiscount && (\n\t\t\t\t\t\t\t\t\t<DiscountedPill\n\t\t\t\t\t\t\t\t\t\tdiscount={supporterPlusDiscount * 100}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{recommended && !hasDiscount && (\n\t\t\t\t\t\t\t\t\t<RecommendedPill />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\tcss={supportTierChoiceCardStyles(selected)}\n\t\t\t\t\t\t\t\t\thtmlFor={radioId}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\t\t\tlabel={label(\n\t\t\t\t\t\t\t\t\t\t\tchoiceAmount,\n\t\t\t\t\t\t\t\t\t\t\tcurrencySymbol,\n\t\t\t\t\t\t\t\t\t\t\tsupporterPlusDiscount,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tid={radioId}\n\t\t\t\t\t\t\t\t\t\tvalue={supportTier}\n\t\t\t\t\t\t\t\t\t\tcssOverrides={labelOverrideStyles}\n\t\t\t\t\t\t\t\t\t\tsupporting={\n\t\t\t\t\t\t\t\t\t\t\tselected ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<SupportingBenefits\n\t\t\t\t\t\t\t\t\t\t\t\t\tbenefitsLabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbenefitsLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbenefits={benefits(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrencySymbol,\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tchecked={selected}\n\t\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedProduct(supportTier);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t</Stack>\n\t\t</RadioGroup>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/Button.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css, ThemeProvider } from '@emotion/react';\nimport type { OphanComponentEvent } from '@guardian/libs';\nimport { palette } from '@guardian/source/foundations';\nimport {\n\tButton as DSButton,\n\tLinkButton,\n\tSvgArrowRightStraight,\n} from '@guardian/source/react-components';\nimport React from 'react';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport {\n\tOPHAN_COMPONENT_EVENT_PRIMARY_CTA,\n\tOPHAN_COMPONENT_EVENT_SECONDARY_CTA,\n} from '../utils/ophan';\n\n// Custom theme for Button/LinkButton\n// See also `tertiaryButtonOverrides` below.\nconst buttonStyles = {\n\ttextPrimary: palette.neutral[7],\n\tbackgroundPrimary: palette.brandAlt[400],\n\tbackgroundPrimaryHover: palette.brandAlt[300],\n\ttextSecondary: palette.neutral[7],\n\tbackgroundSecondary: palette.neutral[93],\n\tbackgroundSecondaryHover: palette.neutral[86],\n\tborderSecondary: palette.neutral[86],\n};\n\nconst buttonStylesForTest = {\n\ttextPrimary: '#FFFFFF',\n\tbackgroundPrimary: '#051D32',\n\tbackgroundPrimaryHover: '#072744',\n\ttextSecondary: palette.neutral[7],\n\tbackgroundSecondary: palette.neutral[93],\n\tbackgroundSecondaryHover: palette.neutral[86],\n\tborderSecondary: palette.neutral[86],\n};\n\nconst contributionsTheme = {\n\tbutton: buttonStyles,\n\tlink: buttonStyles,\n};\n\nconst contributionsThemeForTest = {\n\tbutton: buttonStylesForTest,\n\tlink: buttonStylesForTest,\n};\n\ntype Url = string;\n\ntype Props = {\n\t// Accept a function or a string;\n\t// A function will render a <Button>\n\t// A string will render a <LinkButton>\n\t// Both using the same interface\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\tonClickAction: Function | Url;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n\tchildren: React.ReactElement | string;\n\tpriority?: 'primary' | 'secondary';\n\tshowArrow?: boolean;\n\tisTertiary?: boolean;\n\tcssOverrides?: SerializedStyles;\n\ticon?: React.ReactElement;\n\tisColourInTestVariant?: boolean;\n};\n\n// Overrides for tertiary button\n// Unfortunatly they all need !important :(\nconst tertiaryButtonOverrides = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tborder: 1px solid ${palette.neutral[7]} !important;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tbackground-color: transparent !important;\n\n\t:hover {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tbackground-color: ${palette.neutral[86]} !important;\n\t}\n`;\n\nexport const EpicButton: ReactComponent<Props> = (allProps: Props) => {\n\tconst {\n\t\tonClickAction,\n\t\tsubmitComponentEvent,\n\t\tchildren,\n\t\tshowArrow = false,\n\t\tpriority = 'primary',\n\t\tisTertiary,\n\t\tcssOverrides,\n\t\ticon,\n\t\tisColourInTestVariant,\n\t\t...props\n\t} = allProps;\n\n\tconst onButtonCtaClick = () => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(\n\t\t\t\tpriority == 'primary'\n\t\t\t\t\t? OPHAN_COMPONENT_EVENT_PRIMARY_CTA\n\t\t\t\t\t: OPHAN_COMPONENT_EVENT_SECONDARY_CTA,\n\t\t\t);\n\t\t}\n\t};\n\n\tif (typeof onClickAction === 'string') {\n\t\t// LinkButton doesn't support 'tertiary' priority (unlike Button)\n\t\t// So we'll map that to 'primary' and apply a CSS override on both of\n\t\t// them so they get the same styles for 'tertiary' priority\n\t\treturn (\n\t\t\t<ThemeProvider\n\t\t\t\ttheme={\n\t\t\t\t\tisColourInTestVariant\n\t\t\t\t\t\t? contributionsThemeForTest\n\t\t\t\t\t\t: contributionsTheme\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<LinkButton\n\t\t\t\t\thref={onClickAction}\n\t\t\t\t\ticon={icon ?? <SvgArrowRightStraight />}\n\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\tonClick={onButtonCtaClick}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tpriority={isTertiary ? 'primary' : priority}\n\t\t\t\t\tcssOverrides={css(\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\t? [tertiaryButtonOverrides, cssOverrides]\n\t\t\t\t\t\t\t: cssOverrides,\n\t\t\t\t\t)}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</LinkButton>\n\t\t\t</ThemeProvider>\n\t\t);\n\t}\n\treturn (\n\t\t<ThemeProvider\n\t\t\ttheme={\n\t\t\t\tisColourInTestVariant\n\t\t\t\t\t? contributionsThemeForTest\n\t\t\t\t\t: contributionsTheme\n\t\t\t}\n\t\t>\n\t\t\t<DSButton\n\t\t\t\ticonSide=\"right\"\n\t\t\t\ticon={showArrow ? <SvgArrowRightStraight /> : undefined}\n\t\t\t\tonClick={(): void => onClickAction()}\n\t\t\t\tpriority={isTertiary ? 'primary' : priority}\n\t\t\t\tcssOverrides={css(\n\t\t\t\t\tisTertiary\n\t\t\t\t\t\t? [tertiaryButtonOverrides, cssOverrides]\n\t\t\t\t\t\t: cssOverrides,\n\t\t\t\t)}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DSButton>\n\t\t</ThemeProvider>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicButtons.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport type { OphanComponentEvent } from '@guardian/libs';\nimport { space } from '@guardian/source/foundations';\nimport {\n\tcountryCodeToCountryGroupId,\n\tSecondaryCtaType,\n} from '@guardian/support-dotcom-components';\nimport type { EpicVariant } from '@guardian/support-dotcom-components/dist/shared/types/abTests/epic';\nimport type {\n\tCta,\n\tTracking,\n} from '@guardian/support-dotcom-components/dist/shared/types/props/shared';\nimport { useEffect } from 'react';\nimport { useIsInView } from '../../../../lib/useIsInView';\nimport { hasSetReminder } from '../../lib/reminders';\nimport {\n\taddChoiceCardsOneTimeParams,\n\taddChoiceCardsParams,\n\taddChoiceCardsProductParams,\n\taddRegionIdAndTrackingParamsToSupportUrl,\n\tisSupportUrl,\n} from '../../lib/tracking';\nimport {\n\tgetReminderViewEvent,\n\tOPHAN_COMPONENT_EVENT_CTAS_VIEW,\n\tOPHAN_COMPONENT_EVENT_REMINDER_OPEN,\n} from '../utils/ophan';\nimport {\n\ttype SupportTier,\n\tthreeTierChoiceCardAmounts,\n} from '../utils/threeTierChoiceCardAmounts';\nimport { EpicButton } from './EpicButton';\n\nconst paymentImageStyles = css`\n\tdisplay: inline-block;\n\twidth: auto;\n\theight: 25px;\n\tmargin: ${space[1]}px 0;\n`;\n\nconst buttonWrapperStyles: SerializedStyles = css`\n\tmargin: ${space[6]}px ${space[2]}px ${space[1]}px 0;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\n\t&.hidden {\n\t\tdisplay: none;\n\t}\n`;\n\nconst buttonMarginStyles: SerializedStyles = css`\n\tmargin: ${space[1]}px ${space[2]}px ${space[1]}px 0;\n`;\n\nconst PrimaryCtaButton = ({\n\tcta,\n\ttracking,\n\tcountryCode,\n\tamountsTestName,\n\tamountsVariantName,\n\tnumArticles,\n\tsubmitComponentEvent,\n\tisColourInTestVariant,\n}: {\n\tcta?: Cta;\n\ttracking: Tracking;\n\tcountryCode?: string;\n\tamountsTestName?: string;\n\tamountsVariantName?: string;\n\tnumArticles: number;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n\tisColourInTestVariant?: boolean;\n}): JSX.Element | null => {\n\tif (!cta) {\n\t\treturn null;\n\t}\n\n\tconst buttonText = cta.text || 'Support The Guardian';\n\tconst baseUrl = cta.baseUrl || 'https://support.theguardian.com/contribute';\n\tconst urlWithRegionAndTracking = addRegionIdAndTrackingParamsToSupportUrl(\n\t\tbaseUrl,\n\t\ttracking,\n\t\tnumArticles,\n\t\tcountryCode,\n\t\tamountsTestName,\n\t\tamountsVariantName,\n\t);\n\n\treturn (\n\t\t<div css={buttonMarginStyles}>\n\t\t\t<EpicButton\n\t\t\t\tonClickAction={urlWithRegionAndTracking}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tshowArrow={true}\n\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t>\n\t\t\t\t{buttonText}\n\t\t\t</EpicButton>\n\t\t</div>\n\t);\n};\n\nconst SecondaryCtaButton = ({\n\tcta,\n\ttracking,\n\tnumArticles,\n\tcountryCode,\n\tsubmitComponentEvent,\n}: {\n\tcta: Cta;\n\ttracking: Tracking;\n\tcountryCode?: string;\n\tnumArticles: number;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n}): JSX.Element | null => {\n\tconst url = addRegionIdAndTrackingParamsToSupportUrl(\n\t\tcta.baseUrl,\n\t\ttracking,\n\t\tnumArticles,\n\t\tcountryCode,\n\t);\n\treturn (\n\t\t<div css={buttonMarginStyles}>\n\t\t\t<EpicButton\n\t\t\t\tonClickAction={url}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tshowArrow={true}\n\t\t\t\tpriority=\"secondary\"\n\t\t\t>\n\t\t\t\t{cta.text}\n\t\t\t</EpicButton>\n\t\t</div>\n\t);\n};\n\ninterface ContributionsEpicButtonsProps {\n\tvariant: EpicVariant;\n\ttracking: Tracking;\n\tcountryCode?: string;\n\tonOpenReminderClick: () => void;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n\tisReminderActive: boolean;\n\tisSignedIn: boolean;\n\tthreeTierChoiceCardSelectedProduct: SupportTier;\n\tshowChoiceCards?: boolean;\n\tamountsTestName?: string;\n\tamountsVariantName?: string;\n\tnumArticles: number;\n\tvariantOfChoiceCard?: string;\n\tisColourInTestVariant?: boolean;\n}\n\nexport const ContributionsEpicButtons = ({\n\tvariant,\n\ttracking,\n\tcountryCode,\n\tonOpenReminderClick,\n\tsubmitComponentEvent,\n\tisReminderActive,\n\tisSignedIn,\n\tshowChoiceCards,\n\tthreeTierChoiceCardSelectedProduct,\n\tamountsTestName,\n\tamountsVariantName,\n\tnumArticles,\n\tvariantOfChoiceCard,\n\tisColourInTestVariant,\n}: ContributionsEpicButtonsProps): JSX.Element | null => {\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tdebounce: true,\n\t});\n\n\tconst { secondaryCta, showReminderFields } = variant;\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen && submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_CTAS_VIEW);\n\n\t\t\tif (showReminderFields && !hasSetReminder()) {\n\t\t\t\tsubmitComponentEvent(getReminderViewEvent(isSignedIn));\n\t\t\t}\n\t\t}\n\t}, [hasBeenSeen, isSignedIn, showReminderFields, submitComponentEvent]);\n\n\tif (!variant.cta) {\n\t\treturn null;\n\t}\n\n\tconst getChoiceCardCta = (cta: Cta): Cta => {\n\t\t/** In the US - direct 50 % traffic to the checkout page and 50 % traffic to the landing page for the AB test  */\n\n\t\tif (showChoiceCards && countryCode === 'US') {\n\t\t\tif (threeTierChoiceCardSelectedProduct === 'OneOff') {\n\t\t\t\tif (\n\t\t\t\t\tvariantOfChoiceCard ===\n\t\t\t\t\t'US_CHECKOUT_THREE_TIER_CHOICE_CARDS'\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: cta.text,\n\t\t\t\t\t\tbaseUrl: addChoiceCardsParams(\n\t\t\t\t\t\t\t'https://support.theguardian.com/contribute/checkout',\n\t\t\t\t\t\t\t'ONE_OFF',\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttext: cta.text,\n\t\t\t\t\tbaseUrl: addChoiceCardsOneTimeParams(cta.baseUrl),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/** Contribution amount is variable, unlike the SupporterPlus amount which is fixed */\n\t\t\tconst countryGroupId = countryCodeToCountryGroupId(countryCode);\n\t\t\tconst contributionAmount =\n\t\t\t\tthreeTierChoiceCardSelectedProduct === 'Contribution'\n\t\t\t\t\t? threeTierChoiceCardAmounts['Monthly'][countryGroupId]\n\t\t\t\t\t\t\t.Contribution\n\t\t\t\t\t: undefined;\n\t\t\tconst url =\n\t\t\t\tvariantOfChoiceCard === 'US_CHECKOUT_THREE_TIER_CHOICE_CARDS'\n\t\t\t\t\t? 'https://support.theguardian.com/checkout'\n\t\t\t\t\t: cta.baseUrl;\n\n\t\t\treturn {\n\t\t\t\ttext: cta.text,\n\t\t\t\tbaseUrl: addChoiceCardsProductParams(\n\t\t\t\t\turl,\n\t\t\t\t\tthreeTierChoiceCardSelectedProduct,\n\t\t\t\t\t'Monthly',\n\t\t\t\t\tcontributionAmount,\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t/** Not in the US - direct taffic to the landing page */\n\t\tif (\n\t\t\tshowChoiceCards &&\n\t\t\tvariantOfChoiceCard === 'THREE_TIER_CHOICE_CARDS'\n\t\t) {\n\t\t\tif (threeTierChoiceCardSelectedProduct === 'OneOff') {\n\t\t\t\t/**\n\t\t\t\t * OneOff payments are not supported by the generic checkout yet.\n\t\t\t\t * We also have no way of highlighting to a contributor that \"OneOff\"\n\t\t\t\t * was selected, so we just send them to the homepage.\n\t\t\t\t */\n\t\t\t\treturn {\n\t\t\t\t\ttext: cta.text,\n\t\t\t\t\tbaseUrl: 'https://support.theguardian.com/contribute',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: cta.text,\n\t\t\t\tbaseUrl: addChoiceCardsProductParams(\n\t\t\t\t\tcta.baseUrl,\n\t\t\t\t\tthreeTierChoiceCardSelectedProduct,\n\t\t\t\t\t'Monthly',\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\treturn cta;\n\t};\n\n\tconst getCta = (cta: Cta): Cta =>\n\t\tshowChoiceCards ? getChoiceCardCta(cta) : cta;\n\n\tconst openReminder = () => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_REMINDER_OPEN);\n\t\t}\n\t\tonOpenReminderClick();\n\t};\n\n\tconst hasSupportCta =\n\t\tisSupportUrl(variant.cta.baseUrl) ||\n\t\t(secondaryCta?.type === SecondaryCtaType.Custom &&\n\t\t\tisSupportUrl(secondaryCta.cta.baseUrl));\n\n\treturn (\n\t\t<div ref={setNode} css={buttonWrapperStyles} data-testid=\"epic=buttons\">\n\t\t\t{!isReminderActive && (\n\t\t\t\t<>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PrimaryCtaButton\n\t\t\t\t\t\t\tcta={getCta(variant.cta)}\n\t\t\t\t\t\t\ttracking={tracking}\n\t\t\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t\t\t\tamountsTestName={amountsTestName}\n\t\t\t\t\t\t\tamountsVariantName={amountsVariantName}\n\t\t\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{secondaryCta?.type === SecondaryCtaType.Custom &&\n\t\t\t\t\t\t\t!!secondaryCta.cta.baseUrl &&\n\t\t\t\t\t\t\t!!secondaryCta.cta.text && (\n\t\t\t\t\t\t\t\t<SecondaryCtaButton\n\t\t\t\t\t\t\t\t\tcta={secondaryCta.cta}\n\t\t\t\t\t\t\t\t\ttracking={tracking}\n\t\t\t\t\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\n\t\t\t\t\t{secondaryCta?.type ===\n\t\t\t\t\t\tSecondaryCtaType.ContributionsReminder &&\n\t\t\t\t\t\tshowReminderFields &&\n\t\t\t\t\t\t!hasSetReminder() && (\n\t\t\t\t\t\t\t<div css={buttonMarginStyles}>\n\t\t\t\t\t\t\t\t<EpicButton\n\t\t\t\t\t\t\t\t\tonClickAction={openReminder}\n\t\t\t\t\t\t\t\t\tisTertiary={true}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{showReminderFields.reminderCta}\n\t\t\t\t\t\t\t\t</EpicButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t{hasSupportCta && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\twidth={422}\n\t\t\t\t\t\t\theight={60}\n\t\t\t\t\t\t\tsrc=\"https://assets.guim.co.uk/images/acquisitions/2db3a266287f452355b68d4240df8087/payment-methods.png\"\n\t\t\t\t\t\t\talt=\"Accepted payment methods: Visa, Mastercard, American Express and PayPal\"\n\t\t\t\t\t\t\tcss={paymentImageStyles}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicReminderSignedIn.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tarticle17,\n\tfrom,\n\theadlineBold20,\n\tpalette,\n\tspace,\n\ttextSans15,\n\ttextSansBold15,\n} from '@guardian/source/foundations';\nimport {\n\tButton,\n\tSvgCheckmark,\n\tSvgCross,\n} from '@guardian/source/react-components';\nimport { StraightLines } from '@guardian/source-development-kitchen/react-components';\nimport { Hide } from '../../../Hide';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { ensureHasPreposition, ReminderStatus } from '../../lib/reminders';\n\n// --- Styles --- //\n\nconst rootStyles = css`\n\tposition: relative;\n\n\tbackground-color: ${palette.neutral[97]};\n\n\t* {\n\t\tbox-sizing: border-box;\n\t}\n\n\tp {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst lineWrapperStyles = css`\n\tmargin: ${space[3]}px auto;\n`;\n\nconst remindHeading = css`\n\t${headlineBold20};\n\tmargin: 0 ${space[5]}px ${space[2]}px 0;\n`;\n\nconst successTextStyles = css`\n\tmargin: 0 auto ${space[2]}px;\n\t${article17};\n`;\n\nconst linkStyles = css`\n\tcolor: ${palette.neutral[7]};\n`;\n\nconst errorTextStyles = css`\n\t${textSansBold15};\n\tcolor: ${palette.error[400]};\n\tfont-style: italic;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tmargin-top: ${space[2]}px !important;\n\tmargin-bottom: 0;\n`;\n\nconst closeButtonContainerStyles = css`\n\tdisplay: none;\n\tposition: absolute;\n\ttop: 20px;\n\tright: 0;\n\n\t${from.tablet} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst bodyCopyStyles = css`\n\t${article17};\n\t${from.tablet} {\n\t\tmargin-right: ${space[9]}px;\n\t}\n`;\n\nconst infoCopyStyles = css`\n\t${textSans15};\n\tfont-style: italic;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tmargin-top: ${space[2]}px !important;\n`;\n\nconst ctaContainerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tmargin-top: ${space[4]}px;\n\n\t& > * + * {\n\t\tmargin-left: ${space[6]}px;\n\t}\n`;\n\n// --- Types --- //\n\nexport interface ContributionsEpicReminderSignedInProps {\n\treminderLabel: string;\n\treminderStatus: ReminderStatus;\n\tonSetReminderClick: () => void;\n\tonCloseReminderClick: () => void;\n}\n\n// --- Components --- //\n\nexport const ContributionsEpicReminderSignedIn: ReactComponent<\n\tContributionsEpicReminderSignedInProps\n> = ({\n\treminderLabel,\n\treminderStatus,\n\tonSetReminderClick,\n\tonCloseReminderClick,\n}: ContributionsEpicReminderSignedInProps) => {\n\tconst reminderDateWithPreposition = ensureHasPreposition(reminderLabel);\n\n\treturn (\n\t\t<div css={rootStyles}>\n\t\t\t<div css={closeButtonContainerStyles}>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={onCloseReminderClick}\n\t\t\t\t\ticon={<SvgCross />}\n\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\thideLabel={true}\n\t\t\t\t>\n\t\t\t\t\tClose\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t<div css={lineWrapperStyles}>\n\t\t\t\t<StraightLines />\n\t\t\t</div>\n\n\t\t\t{reminderStatus === ReminderStatus.Completed ? (\n\t\t\t\t<>\n\t\t\t\t\t<h4 css={remindHeading}>\n\t\t\t\t\t\tThank you! Your reminder is set.\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p css={successTextStyles}>\n\t\t\t\t\t\tWe will be in touch to invite you to contribute. Look\n\t\t\t\t\t\tout for a message in your inbox{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}. If you have any questions\n\t\t\t\t\t\tabout contributing, please{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"mailto:contribution.support@theguardian.com\"\n\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tcontact us\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<p css={bodyCopyStyles}>\n\t\t\t\t\t\tShow your support for the Guardian at a later date. To\n\t\t\t\t\t\tmake this easier, set a reminder and well email you{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<div css={ctaContainerStyles}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={onSetReminderClick}\n\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Hide>\n\n\t\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={onSetReminderClick}\n\t\t\t\t\t\t\t\t\ticon={<SvgCheckmark />}\n\t\t\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={onCloseReminderClick}\n\t\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNot now\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{reminderStatus === ReminderStatus.Error && (\n\t\t\t\t\t\t<p css={errorTextStyles}>\n\t\t\t\t\t\t\tSorry we couldn&apos;t set a reminder for you this\n\t\t\t\t\t\t\ttime. Please try again later.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<p css={infoCopyStyles}>\n\t\t\t\t\t\tWe will send you a maximum of two emails{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}. To find out what personal\n\t\t\t\t\t\tdata we collect and how we use it, view our{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPrivacy Policy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicReminderSignedOut.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport {\n\tarticle17,\n\tfrom,\n\theadlineBold20,\n\tpalette,\n\tspace,\n\ttextSans15,\n\ttextSansBold15,\n} from '@guardian/source/foundations';\nimport {\n\tButton,\n\tSvgArrowRightStraight,\n\tSvgCross,\n\tTextInput,\n} from '@guardian/source/react-components';\nimport { StraightLines } from '@guardian/source-development-kitchen/react-components';\nimport { useContributionsReminderEmailForm } from '../../hooks/useContributionsReminderEmailForm';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { ensureHasPreposition, ReminderStatus } from '../../lib/reminders';\n\n// --- Styles --- //\n\nconst rootStyles = css`\n\tposition: relative;\n\n\t* {\n\t\tbox-sizing: border-box;\n\t}\n`;\n\nconst closeButtonStyles = css`\n\twidth: 30px;\n\theight: 30px;\n\tcursor: pointer;\n\tposition: absolute;\n\ttop: 20px;\n\tright: 0;\n\tbackground: none;\n\tborder: none;\n\tpadding: 0;\n`;\n\nconst lineWrapperStyles = css`\n\tmargin: ${space[3]}px auto;\n`;\n\nconst containerStyles = css`\n\tpadding: 0 ${space[1]}px;\n`;\n\nconst remindHeading = css`\n\t${headlineBold20};\n\tmargin: 0 ${space[5]}px ${space[2]}px 0;\n`;\n\nconst successTextStyles = css`\n\tmargin: 0 auto ${space[2]}px;\n\t${article17};\n`;\n\nconst linkStyles = css`\n\tcolor: ${palette.neutral[7]};\n`;\n\nconst formWrapper = css`\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\n\t${from.tablet} {\n\t\tflex-direction: row;\n\t\talign-items: flex-end;\n\t\tjustify-content: flex-start;\n\t}\n`;\n\nconst inputWrapper = css`\n\twidth: 100%;\n\tmargin-bottom: ${space[2]}px;\n\tflex-grow: 1;\n\n\t${from.tablet} {\n\t\twidth: auto;\n\t\tmargin-right: ${space[2]}px;\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst formTextStyles = css`\n\t${textSans15};\n\tfont-style: italic;\n\tmargin-top: ${space[1]}px;\n`;\n\nconst errorTextStyles = css`\n\t${textSansBold15};\n\tcolor: ${palette.error[400]};\n\tfont-style: italic;\n\tmargin-top: ${space[1]}px;\n\tmargin-bottom: 0;\n`;\n\nconst getCustomSubmitStyles = (\n\tisDisabled: boolean,\n): SerializedStyles | undefined => {\n\tif (isDisabled) {\n\t\t// Unfortunately these overrides need !important as otherwise they'll lose\n\t\t// the specificity war against the default Source styles.\n\t\treturn css`\n\t\t\tpointer-events: none;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tcolor: ${palette.neutral[60]} !important;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tbackground-color: ${palette.neutral[93]} !important;\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tborder: 1px solid ${palette.neutral[86]} !important;\n\t\t`;\n\t}\n\n\treturn undefined;\n};\n\n// --- Types --- //\n\nexport interface ContributionsEpicReminderSignedOutProps {\n\treminderLabel: string;\n\treminderStatus: ReminderStatus;\n\tonSetReminderClick: (email: string) => void;\n\tonCloseReminderClick: () => void;\n}\n\n// --- Components --- //\n\nexport const ContributionsEpicReminderSignedOut: ReactComponent<\n\tContributionsEpicReminderSignedOutProps\n> = ({\n\treminderLabel,\n\treminderStatus,\n\tonSetReminderClick,\n\tonCloseReminderClick,\n}: ContributionsEpicReminderSignedOutProps) => {\n\tconst { email, updateEmail, inputError, handleSubmit } =\n\t\tuseContributionsReminderEmailForm();\n\n\tconst reminderDateWithPreposition = ensureHasPreposition(reminderLabel);\n\n\treturn (\n\t\t<div css={rootStyles}>\n\t\t\t<button\n\t\t\t\tcss={closeButtonStyles}\n\t\t\t\tonClick={(): void => onCloseReminderClick()}\n\t\t\t>\n\t\t\t\t<SvgCross />\n\t\t\t</button>\n\n\t\t\t<div css={lineWrapperStyles}>\n\t\t\t\t<StraightLines />\n\t\t\t</div>\n\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<form onSubmit={handleSubmit(() => onSetReminderClick(email))}>\n\t\t\t\t\t{reminderStatus !== ReminderStatus.Completed && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<h4 css={remindHeading}>\n\t\t\t\t\t\t\t\tRemind me {reminderDateWithPreposition}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<div css={formWrapper}>\n\t\t\t\t\t\t\t\t<div css={inputWrapper}>\n\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email address\"\n\t\t\t\t\t\t\t\t\t\terror={inputError}\n\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\tonChange={updateEmail}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\t\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcssOverrides={getCustomSubmitStyles(\n\t\t\t\t\t\t\t\t\t\treminderStatus ===\n\t\t\t\t\t\t\t\t\t\t\tReminderStatus.Submitting,\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{reminderStatus === ReminderStatus.Error && (\n\t\t\t\t\t\t<p css={errorTextStyles}>\n\t\t\t\t\t\t\tSorry we couldn&apos;t set a reminder for you this\n\t\t\t\t\t\t\ttime. Please try again later.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</form>\n\n\t\t\t\t{reminderStatus !== ReminderStatus.Completed && (\n\t\t\t\t\t<p css={formTextStyles}>\n\t\t\t\t\t\tWe will send you a maximum of two emails{' '}\n\t\t\t\t\t\t{reminderDateWithPreposition}. To find out what personal\n\t\t\t\t\t\tdata we collect and how we use it, view our{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPrivacy Policy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\n\t\t\t\t{reminderStatus === ReminderStatus.Completed && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<h4 css={remindHeading}>\n\t\t\t\t\t\t\tThank you! Your reminder is set.\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<p css={successTextStyles}>\n\t\t\t\t\t\t\tWe will be in touch to invite you to contribute.\n\t\t\t\t\t\t\tLook out for a message in your inbox{' '}\n\t\t\t\t\t\t\t{reminderDateWithPreposition}. If you have any\n\t\t\t\t\t\t\tquestions about contributing, please{' '}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"mailto:contribution.support@theguardian.com\"\n\t\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tcontact us\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsEpicReminder.tsx\n */\nimport type { OphanComponentEvent } from '@guardian/libs';\nimport type { ReminderFields } from '@guardian/support-dotcom-components/dist/shared/lib';\nimport { useContributionsReminderSignup } from '../../hooks/useContributionsReminderSignup';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport {\n\tOPHAN_COMPONENT_EVENT_REMINDER_CLOSE,\n\tOPHAN_COMPONENT_EVENT_REMINDER_SET,\n} from '../utils/ophan';\nimport { ContributionsEpicReminderSignedIn } from './ContributionsEpicReminderSignedIn';\nimport { ContributionsEpicReminderSignedOut } from './ContributionsEpicReminderSignedOut';\n\n// --- Types --- //\n\nexport interface ContributionsEpicReminderProps {\n\tinitialEmailAddress?: string;\n\treminderFields: ReminderFields;\n\tonCloseReminderClick: () => void;\n\tsubmitComponentEvent?: (event: OphanComponentEvent) => void;\n}\n\n// --- Components --- //\n\nexport const ContributionsEpicReminder: ReactComponent<\n\tContributionsEpicReminderProps\n> = ({\n\tinitialEmailAddress,\n\treminderFields,\n\tonCloseReminderClick,\n\tsubmitComponentEvent,\n}: ContributionsEpicReminderProps) => {\n\tconst { reminderStatus, createReminder } = useContributionsReminderSignup(\n\t\treminderFields.reminderPeriod,\n\t\t'WEB',\n\t\t'EPIC',\n\t\t'PRE',\n\t\treminderFields.reminderOption,\n\t);\n\n\tconst onSetReminderClick = (email: string) => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_REMINDER_SET);\n\t\t}\n\t\tcreateReminder(email);\n\t};\n\n\tconst closeReminder = () => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(OPHAN_COMPONENT_EVENT_REMINDER_CLOSE);\n\t\t}\n\t\tonCloseReminderClick();\n\t};\n\n\treturn initialEmailAddress ? (\n\t\t<ContributionsEpicReminderSignedIn\n\t\t\treminderLabel={reminderFields.reminderLabel}\n\t\t\treminderStatus={reminderStatus}\n\t\t\tonSetReminderClick={() => onSetReminderClick(initialEmailAddress)}\n\t\t\tonCloseReminderClick={closeReminder}\n\t\t/>\n\t) : (\n\t\t<ContributionsEpicReminderSignedOut\n\t\t\treminderLabel={reminderFields.reminderLabel}\n\t\t\treminderStatus={reminderStatus}\n\t\t\tonSetReminderClick={onSetReminderClick}\n\t\t\tonCloseReminderClick={closeReminder}\n\t\t/>\n\t);\n};\n","import type { EpicProps } from '@guardian/support-dotcom-components/dist/shared/types/props/epic';\nimport { useState } from 'react';\nimport type { ReactComponent } from '../../lib/ReactComponent';\nimport { ThreeTierChoiceCards } from '../ThreeTierChoiceCards';\nimport type { SupportTier } from '../utils/threeTierChoiceCardAmounts';\nimport { ContributionsEpicButtons } from './ContributionsEpicButtons';\nimport { ContributionsEpicReminder } from './ContributionsEpicReminder';\n\ninterface OnReminderOpen {\n\tbuttonCopyAsString: string;\n}\n\ntype Props = EpicProps & {\n\tamountsTestName?: string;\n\tamountsVariantName?: string;\n\tisColourInTestVariant?: boolean;\n};\n\nexport const ContributionsEpicCtasContainer: ReactComponent<Props> = ({\n\tvariant,\n\tcountryCode,\n\tarticleCounts,\n\ttracking,\n\tsubmitComponentEvent,\n\tonReminderOpen,\n\tfetchEmail,\n\tamountsTestName,\n\tamountsVariantName,\n\tisColourInTestVariant,\n}: Props): JSX.Element => {\n\t// reminders\n\tconst [fetchedEmail, setFetchedEmail] = useState<string | undefined>(\n\t\tundefined,\n\t);\n\tconst [isReminderActive, setIsReminderActive] = useState(false);\n\tconst showReminderFields = variant.showReminderFields;\n\tconst onCloseReminderClick = () => {\n\t\tsetIsReminderActive(false);\n\t};\n\n\t// choice cards\n\tconst isNonVatCompliantCountry =\n\t\tvariant.choiceCardAmounts?.testName === 'VAT_COMPLIANCE';\n\n\tconst showChoiceCards =\n\t\tvariant.showChoiceCards && !isNonVatCompliantCountry;\n\n\t/**\n\t * This corresponds to the products in the Product API\n\t * @see https://product-catalog.guardianapis.com/product-catalog.json\n\t */\n\tconst [\n\t\tthreeTierChoiceCardSelectedProduct,\n\t\tsetThreeTierChoiceCardSelectedProduct,\n\t] = useState<SupportTier>('SupporterPlus');\n\n\tconst showUSSupportCheckout =\n\t\tshowChoiceCards && variant.name.includes('US_CHECKOUT_PAGE');\n\n\tconst hasSupporterPlusPromoCode =\n\t\tvariant.cta?.baseUrl.includes('BLACK_FRIDAY_DISCOUNT_2024') ?? false;\n\n\tconst variantOfChoiceCard =\n\t\tcountryCode === 'US' && showUSSupportCheckout\n\t\t\t? 'US_CHECKOUT_THREE_TIER_CHOICE_CARDS'\n\t\t\t: countryCode === 'US'\n\t\t\t? 'US_THREE_TIER_CHOICE_CARDS'\n\t\t\t: 'THREE_TIER_CHOICE_CARDS';\n\n\treturn (\n\t\t<>\n\t\t\t{showChoiceCards && (\n\t\t\t\t<ThreeTierChoiceCards\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tselectedProduct={threeTierChoiceCardSelectedProduct}\n\t\t\t\t\tsetSelectedProduct={setThreeTierChoiceCardSelectedProduct}\n\t\t\t\t\tvariantOfChoiceCard={variantOfChoiceCard}\n\t\t\t\t\tsupporterPlusDiscount={\n\t\t\t\t\t\thasSupporterPlusPromoCode ? 0.5 : undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<ContributionsEpicButtons\n\t\t\t\tvariant={variant}\n\t\t\t\ttracking={tracking}\n\t\t\t\tcountryCode={countryCode}\n\t\t\t\tonOpenReminderClick={(): void => {\n\t\t\t\t\tconst buttonCopyAsString = showReminderFields?.reminderCta\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.replace(/\\s/g, '-');\n\n\t\t\t\t\t// This callback lets the platform react to the user interaction with the\n\t\t\t\t\t// 'Remind me' button\n\t\t\t\t\tif (onReminderOpen) {\n\t\t\t\t\t\tonReminderOpen({\n\t\t\t\t\t\t\tbuttonCopyAsString,\n\t\t\t\t\t\t} as OnReminderOpen);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fetchEmail) {\n\t\t\t\t\t\tvoid fetchEmail().then((resolvedEmail) => {\n\t\t\t\t\t\t\tif (resolvedEmail) {\n\t\t\t\t\t\t\t\tsetFetchedEmail(resolvedEmail);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetIsReminderActive(true);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetIsReminderActive(true);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tisReminderActive={isReminderActive}\n\t\t\t\tisSignedIn={Boolean(fetchedEmail)}\n\t\t\t\tshowChoiceCards={showChoiceCards}\n\t\t\t\tthreeTierChoiceCardSelectedProduct={\n\t\t\t\t\tthreeTierChoiceCardSelectedProduct\n\t\t\t\t}\n\t\t\t\tamountsTestName={amountsTestName}\n\t\t\t\tamountsVariantName={amountsVariantName}\n\t\t\t\tnumArticles={articleCounts.for52Weeks}\n\t\t\t\tvariantOfChoiceCard={variantOfChoiceCard}\n\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t/>\n\t\t\t{isReminderActive && showReminderFields && (\n\t\t\t\t<ContributionsEpicReminder\n\t\t\t\t\tinitialEmailAddress={fetchedEmail}\n\t\t\t\t\treminderFields={showReminderFields}\n\t\t\t\t\tonCloseReminderClick={onCloseReminderClick}\n\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/utils/ophan.ts#L3\n */\nimport type { OphanComponentEvent } from '@guardian/libs';\n\nconst OPHAN_COMPONENT_ID_CTAS_VIEW = 'contributions-epic-ctas-view';\nconst OPHAN_COMPONENT_ID_PRIMARY_CTA = 'contributions-epic-primary-cta';\nconst OPHAN_COMPONENT_ID_SECONDARY_CTA = 'contributions-epic-secondary-cta';\nconst OPHAN_COMPONENT_ID_REMINDER_VIEW = 'contributions-epic-reminder-view';\nconst OPHAN_COMPONENT_ID_REMINDER_OPEN = 'contributions-epic-reminder-open';\nconst OPHAN_COMPONENT_ID_REMINDER_SET = 'contributions-epic-reminder-set';\nconst OPHAN_COMPONENT_ID_REMINDER_CLOSE = 'contributions-epic-reminder-close';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_OPEN =\n\t'contributions-epic-article-count-open';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_CLOSE =\n\t'contributions-epic-article-count-close';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_IN =\n\t'contributions-epic-article-count-stay-on';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT =\n\t'contributions-epic-article-count-opt-out';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_OUT =\n\t'contributions-epic-article-count-stay-out';\nconst OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_IN =\n\t'contributions-epic-article-count-opt-in';\nconst OPHAN_COMPONENT_ID_SIGN_IN = 'contributions-epic-sign-in';\n\nexport const getReminderViewEvent = (\n\tisSignedIn: boolean,\n): OphanComponentEvent => ({\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_VIEW,\n\t},\n\taction: 'VIEW',\n\tvalue: isSignedIn.toString(),\n});\n\nexport const OPHAN_COMPONENT_EVENT_CTAS_VIEW: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_CTAS_VIEW,\n\t},\n\taction: 'VIEW',\n};\n\nexport const OPHAN_COMPONENT_EVENT_PRIMARY_CTA: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_EPIC',\n\t\tid: OPHAN_COMPONENT_ID_PRIMARY_CTA,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_SECONDARY_CTA: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_SECONDARY_CTA,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_REMINDER_OPEN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_OPEN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_REMINDER_SET: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_SET,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_EVENT_REMINDER_CLOSE: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_REMINDER_CLOSE,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_OPEN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_OPEN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_CLOSE: OphanComponentEvent =\n\t{\n\t\tcomponent: {\n\t\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_CLOSE,\n\t\t},\n\t\taction: 'CLICK',\n\t};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_STAY_IN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_IN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_STAY_OUT: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_OUT,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_ARTICLE_COUNT_OPT_IN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_IN,\n\t},\n\taction: 'CLICK',\n};\n\nexport const OPHAN_COMPONENT_SIGN_IN: OphanComponentEvent = {\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_SIGN_IN,\n\t},\n\taction: 'CLICK',\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/hooks/useContributionsReminderEmailForm.ts\n */\nimport type React from 'react';\nimport { useState } from 'react';\nimport { emailIsShortEnoughForIdentity, isValidEmail } from '../lib/reminders';\n\ntype SubmitHandler = (e: React.FormEvent<HTMLFormElement>) => void;\n\ninterface ContributionsReminderEmailForm {\n\temail: string;\n\tinputError?: string;\n\tupdateEmail: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\thandleSubmit: (onSubmit: () => void) => SubmitHandler;\n}\n\nexport function useContributionsReminderEmailForm(): ContributionsReminderEmailForm {\n\tconst [isDirty, setIsDirty] = useState(false);\n\tconst [email, setEmail] = useState('');\n\n\tconst updateEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetEmail(e.target.value);\n\t\tif (isDirty) {\n\t\t\tsetIsDirty(false);\n\t\t}\n\t};\n\n\tconst isEmpty = email.trim().length === 0;\n\tconst isValid = isValidEmail(email) && emailIsShortEnoughForIdentity(email);\n\n\tlet inputError;\n\tif (isDirty && isEmpty) {\n\t\tinputError = 'Please enter your email address';\n\t} else if (isDirty && !isValid) {\n\t\tinputError = 'Please enter a valid email address';\n\t}\n\n\tconst handleSubmit = (onSubmit: () => void) => {\n\t\tconst handler = (e: React.FormEvent<HTMLFormElement>) => {\n\t\t\te.preventDefault();\n\t\t\tif (isValid) {\n\t\t\t\tonSubmit();\n\t\t\t} else {\n\t\t\t\tsetIsDirty(true);\n\t\t\t}\n\t\t};\n\t\treturn handler;\n\t};\n\n\treturn { email, inputError, updateEmail, handleSubmit };\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/hooks/useContributionsReminderSignup.ts\n */\nimport type {\n\tOneOffSignupRequest,\n\tReminderComponent,\n\tReminderPlatform,\n\tReminderStage,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useState } from 'react';\nimport {\n\taddContributionReminderCookie,\n\tReminderStatus,\n} from '../lib/reminders';\n\nconst CREATE_ONE_OFF_REMINDER_ENDPOINT =\n\t'https://support.theguardian.com/reminders/create/one-off';\n\ninterface ContributionsReminderSignup {\n\treminderStatus: ReminderStatus;\n\tcreateReminder: (email: string) => void;\n}\n\nexport function useContributionsReminderSignup(\n\treminderPeriod: string,\n\treminderPlatform: ReminderPlatform,\n\treminderComponent: ReminderComponent,\n\treminderStage: ReminderStage,\n\treminderOption?: string,\n): ContributionsReminderSignup {\n\tconst [reminderStatus, setReminderStatus] = useState<ReminderStatus>(\n\t\tReminderStatus.Editing,\n\t);\n\n\tconst createReminder = (email: string): void => {\n\t\tconst reminderSignupData: OneOffSignupRequest = {\n\t\t\temail,\n\t\t\treminderPeriod,\n\t\t\treminderPlatform,\n\t\t\treminderComponent,\n\t\t\treminderStage,\n\t\t\treminderOption,\n\t\t};\n\n\t\tsetReminderStatus(ReminderStatus.Submitting);\n\t\tfetch(CREATE_ONE_OFF_REMINDER_ENDPOINT, {\n\t\t\tbody: JSON.stringify(reminderSignupData),\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tsetReminderStatus(ReminderStatus.Error);\n\t\t\t\t} else {\n\t\t\t\t\tsetReminderStatus(ReminderStatus.Completed);\n\t\t\t\t\taddContributionReminderCookie(reminderPeriod);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => setReminderStatus(ReminderStatus.Error));\n\t};\n\n\treturn { reminderStatus, createReminder };\n}\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/shared/helpers/articleCountOptOut.ts\n */\nimport { getCookie, removeCookie, setCookie, storage } from '@guardian/libs';\n\nconst ARTICLE_COUNT_OPT_OUT_COOKIE = {\n\tname: 'gu_article_count_opt_out',\n\tdaysToLive: 90,\n};\n\nconst DAILY_ARTICLE_COUNT_STORAGE_KEY = 'gu.history.dailyArticleCount';\nconst WEEKLY_ARTICLE_COUNT_STORAGE_KEY = 'gu.history.weeklyArticleCount';\nconst ARTICLES_THIS_WEEK_STORAGE_KEY = 'gu.history.articleCountsThisWeek';\n\nexport const addArticleCountOptOutCookie = (): void =>\n\tsetCookie({\n\t\tname: ARTICLE_COUNT_OPT_OUT_COOKIE.name,\n\t\tvalue: new Date().getTime().toString(),\n\t\tdaysToLive: ARTICLE_COUNT_OPT_OUT_COOKIE.daysToLive,\n\t});\n\nexport const removeArticleCountOptOutCookie = (): void =>\n\tremoveCookie({ name: ARTICLE_COUNT_OPT_OUT_COOKIE.name });\n\nexport const removeArticleCountFromLocalStorage = (): void => {\n\tstorage.local.remove(DAILY_ARTICLE_COUNT_STORAGE_KEY);\n\tstorage.local.remove(WEEKLY_ARTICLE_COUNT_STORAGE_KEY);\n\tstorage.local.remove(ARTICLES_THIS_WEEK_STORAGE_KEY);\n};\n\nexport const hasArticleCountOptOutCookie = (): boolean =>\n\t!!getCookie({ name: ARTICLE_COUNT_OPT_OUT_COOKIE.name });\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/utils/reminders.ts\n */\nimport { getCookie, setCookie } from '@guardian/libs';\n\nexport enum ReminderStatus {\n\tEditing = 'Editing',\n\tSubmitting = 'Submitting',\n\tError = 'Error',\n\tCompleted = 'Completed',\n}\n\n// --- Cookie utils --- //\n\nconst dateDiff = (start: Date, end: Date): number => {\n\tconst twentyFourHours = 86400000;\n\treturn Math.round((end.valueOf() - start.valueOf()) / twentyFourHours);\n};\n\nexport const addContributionReminderCookie = (\n\treminderDateString: string,\n): void => {\n\tconst today = new Date();\n\tconst reminderDate = new Date(Date.parse(reminderDateString));\n\n\tsetCookie({\n\t\tname: 'gu_epic_contribution_reminder',\n\t\tvalue: '1',\n\t\tdaysToLive: dateDiff(today, reminderDate),\n\t});\n};\n\nexport const hasSetReminder = (): boolean => {\n\treturn !!getCookie({ name: 'gu_epic_contribution_reminder' });\n};\n\n// --- Text utils --- //\n\nconst PREPOSITION_REGEX = /^(on|in)/;\n\nconst containsPreposition = (text: string): boolean =>\n\tPREPOSITION_REGEX.test(text);\n\nconst addPreposition = (text: string): string => 'in ' + text;\n\nexport const ensureHasPreposition = (text: string): string =>\n\tcontainsPreposition(text) ? text : addPreposition(text);\n\n// --- Validation utils --- //\n\nexport const isValidEmail = (email: string): boolean => {\n\tconst re =\n\t\t/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(String(email).toLowerCase());\n};\n\nexport const emailIsShortEnoughForIdentity = (email: string): boolean => {\n\t// Identity errors on email addresses longer than 100 characters\n\treturn email.length <= 100;\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/shared/ArticleCountOptOutOverlay.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css, ThemeProvider } from '@emotion/react';\nimport {\n\tbackground,\n\tbrandAltBackground,\n\tbrandAltLine,\n\tbrandAltText,\n\tfrom,\n\tpalette,\n\tspace,\n\ttextSans14,\n\ttextSans17,\n} from '@guardian/source/foundations';\nimport {\n\tButton,\n\tbuttonThemeBrand,\n\tbuttonThemeBrandAlt,\n\tbuttonThemeDefault,\n\tSvgCross,\n} from '@guardian/source/react-components';\nimport type { ReactComponent } from '../lib/ReactComponent';\nimport type { ArticleCountOptOutType } from './ArticleCountOptOutPopup';\n\nconst { brand, neutral } = palette;\n\nconst COLOURS = {\n\tepic: 'white',\n\tbanner: brandAltText.primary,\n\t['investigations-moment-banner']: neutral[0],\n\t['us-eoy-moment-banner']: neutral[0],\n\t['global-new-year-moment-banner']: neutral[0],\n\t['election-au-moment-banner']: neutral[0],\n};\n\nconst BACKGROUND_COLOURS = {\n\tepic: brand[400],\n\tbanner: brandAltBackground.primary,\n\t['investigations-moment-banner']: neutral[100],\n\t['us-eoy-moment-banner']: '#FFEEDB',\n\t['global-new-year-moment-banner']: '#F79E1B',\n\t['election-au-moment-banner']: '#e4e4e3',\n};\n\nconst BORDER_COLOURS = {\n\tepic: 'transparent',\n\tbanner: brandAltLine.primary,\n\t['investigations-moment-banner']: neutral[0],\n\t['us-eoy-moment-banner']: neutral[0],\n\t['global-new-year-moment-banner']: neutral[0],\n\t['election-au-moment-banner']: neutral[0],\n};\n\nconst BUTTON_THEMES = {\n\tepic: buttonThemeBrand,\n\tbanner: buttonThemeBrandAlt,\n\t['investigations-moment-banner']: buttonThemeDefault,\n\t['us-eoy-moment-banner']: buttonThemeDefault,\n\t['global-new-year-moment-banner']: buttonThemeDefault,\n\t['election-au-moment-banner']: buttonThemeDefault,\n};\n\nconst overlayContainer = (\n\ttype: ArticleCountOptOutType,\n): SerializedStyles => css`\n\tcolor: ${COLOURS[type]};\n\tbackground: ${BACKGROUND_COLOURS[type]};\n\tborder: 1px solid ${BORDER_COLOURS[type]};\n\t${textSans17}\n\tpadding: ${space[2]}px;\n\tbox-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\n`;\n\nconst overlayHeader = css`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n`;\n\nconst overlayHeaderText = css`\n\tfont-size: 17px;\n\tfont-weight: bold;\n`;\n\nconst overlayBody = css`\n\tmargin-top: ${space[1]}px;\n\tfont-size: 15px;\n`;\n\nconst overlayCtaContainer = css`\n\tmargin-top: ${space[3]}px;\n\tdisplay: flex;\n\tflex-direction: row;\n\n\t> * + * {\n\t\tmargin-left: ${space[2]}px;\n\t}\n\n\t${from.tablet} {\n\t\t> * + * {\n\t\t\tmargin-left: ${space[3]}px;\n\t\t}\n\t}\n`;\n\nconst NOTE_LINK_COLOURS = {\n\tepic: neutral[100],\n\tbanner: brandAltText.primary,\n\t['investigations-moment-banner']: neutral[0],\n\t['us-eoy-moment-banner']: neutral[0],\n\t['global-new-year-moment-banner']: neutral[0],\n\t['election-au-moment-banner']: neutral[0],\n};\n\nconst BUTTON_OVERRIDES = {\n\tepic: css``,\n\tbanner: css``,\n\t['investigations-moment-banner']: css`\n\t\tbackground-color: ${palette.neutral[100]};\n\t\tcolor: ${palette.neutral[0]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.neutral[86]};\n\t\t}\n\t`,\n\t['us-eoy-moment-banner']: css`\n\t\tcolor: ${palette.neutral[7]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.culture[350]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.culture[350]};\n\t\t}\n\t`,\n\t['global-new-year-moment-banner']: css`\n\t\tcolor: ${palette.neutral[7]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.brand[500]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.brand[500]};\n\t\t}\n\t`,\n\t['election-au-moment-banner']: css`\n\t\tcolor: ${palette.neutral[7]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.brand[500]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.brand[500]};\n\t\t}\n\t`,\n};\n\nconst PRIMARY_BUTTON_OVERRIDES = {\n\tepic: css``,\n\tbanner: css``,\n\t['investigations-moment-banner']: css`\n\t\tbackground-color: ${palette.neutral[0]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.neutral[46]};\n\t\t\tborder-color: ${palette.neutral[46]};\n\t\t}\n\t`,\n\t['us-eoy-moment-banner']: css`\n\t\tbackground-color: ${palette.neutral[7]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[7]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.culture[350]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.culture[350]};\n\t\t}\n\t`,\n\t['global-new-year-moment-banner']: css`\n\t\tbackground-color: ${palette.neutral[0]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${palette.brand[500]};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${palette.brand[500]};\n\t\t}\n\t`,\n\t['election-au-moment-banner']: css`\n\t\tbackground-color: ${palette.neutral[0]};\n\t\tcolor: ${palette.neutral[100]};\n\t\tborder: 1px solid ${palette.neutral[0]};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${background.ctaPrimaryHover};\n\t\t\tcolor: ${palette.neutral[100]};\n\t\t\tborder: 1px solid ${background.ctaPrimaryHover};\n\t\t}\n\t`,\n};\n\nconst overlayNote = (type: ArticleCountOptOutType): SerializedStyles => css`\n\tmargin-top: ${space[2]}px;\n\t${textSans14}\n\tfont-style: italic;\n\n\ta {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tcolor: ${NOTE_LINK_COLOURS[type]} !important;\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\ttext-decoration: underline !important;\n\t}\n`;\n\nexport interface ArticleCountOptOutOverlayProps {\n\ttype: ArticleCountOptOutType;\n\thasOptedOut: boolean;\n\tonOptOut: () => void;\n\tonClose: () => void;\n}\n\nexport const ArticleCountOptOutOverlay: ReactComponent<\n\tArticleCountOptOutOverlayProps\n> = ({\n\ttype,\n\thasOptedOut,\n\tonClose,\n\tonOptOut,\n}: ArticleCountOptOutOverlayProps) => {\n\treturn (\n\t\t<div css={overlayContainer(type)}>\n\t\t\t<div css={overlayHeader}>\n\t\t\t\t<div css={overlayHeaderText}>\n\t\t\t\t\t{hasOptedOut ? \"You've opted out\" : \"What's this?\"}\n\t\t\t\t</div>\n\t\t\t\t<ThemeProvider theme={BUTTON_THEMES[type]}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\tcssOverrides={BUTTON_OVERRIDES[type]}\n\t\t\t\t\t\ticon={<SvgCross />}\n\t\t\t\t\t\thideLabel={true}\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</Button>\n\t\t\t\t</ThemeProvider>\n\t\t\t</div>\n\n\t\t\t<div css={overlayBody}>\n\t\t\t\t{hasOptedOut\n\t\t\t\t\t? \"Starting from your next page view, we won't count the articles you read or show you this message for three months.\"\n\t\t\t\t\t: 'We would like to remind you how many Guardian articles youve enjoyed on this device. Can we continue showing you this?'}\n\t\t\t</div>\n\n\t\t\t{!hasOptedOut && (\n\t\t\t\t<div css={overlayCtaContainer}>\n\t\t\t\t\t<ThemeProvider theme={BUTTON_THEMES[type]}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t\tcssOverrides={PRIMARY_BUTTON_OVERRIDES[type]}\n\t\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tYes, that&apos;s OK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t<ThemeProvider theme={BUTTON_THEMES[type]}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={onOptOut}\n\t\t\t\t\t\t\tcssOverrides={BUTTON_OVERRIDES[type]}\n\t\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNo, opt me out\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div css={overlayNote(type)}>\n\t\t\t\t{hasOptedOut ? (\n\t\t\t\t\t<span>\n\t\t\t\t\t\tIf you have any questions, please{' '}\n\t\t\t\t\t\t<a href=\"https://www.theguardian.com/help/contact-us\">\n\t\t\t\t\t\t\tcontact us.\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t\"Please note that opting out is a permanent action and can't be reversed\"\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/shared/ArticleCountOptOutPopup.tsx\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport type { OphanComponentEvent, OphanComponentType } from '@guardian/libs';\nimport { from, space } from '@guardian/source/foundations';\nimport { useEffect, useState } from 'react';\nimport { useIsInView } from '../../../lib/useIsInView';\nimport {\n\taddArticleCountOptOutCookie,\n\tremoveArticleCountFromLocalStorage,\n} from '../lib/articleCountOptOut';\nimport type { ReactComponent } from '../lib/ReactComponent';\nimport { ArticleCountOptOutOverlay } from './ArticleCountOptOutOverlay';\n\nconst OPHAN_COMPONENT_ID_OPT_OUT_VIEW = 'article-count-opt-out-view';\nconst OPHAN_COMPONENT_ID_OPT_OUT_OPEN = 'article-count-opt-out-open';\nconst OPHAN_COMPONENT_ID_OPT_OUT_CLOSE = 'article-count-opt-out-close';\nconst OPHAN_COMPONENT_ID_OPT_OUT_CONFIRM = 'article-count-opt-out-confirm';\n\nexport const ophanComponentEventOptOutView = (\n\tcomponentType: OphanComponentType,\n): OphanComponentEvent => ({\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_OPT_OUT_VIEW,\n\t},\n\taction: 'VIEW',\n\tvalue: `article-count-opt-out-popup-${componentType}`,\n});\n\nexport const ophanComponentEventOptOutOpen = (\n\tcomponentType: OphanComponentType,\n): OphanComponentEvent => ({\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_OPT_OUT_OPEN,\n\t},\n\taction: 'CLICK',\n\tvalue: `article-count-opt-out-popup-${componentType}`,\n});\n\nexport const ophanComponentEventOptOutClose = (\n\tcomponentType: OphanComponentType,\n): OphanComponentEvent => ({\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_OPT_OUT_CLOSE,\n\t},\n\taction: 'CLICK',\n\tvalue: `article-count-opt-out-popup-${componentType}`,\n});\n\nexport const ophanComponentEventOptOutConfirm = (\n\tcomponentType: OphanComponentType,\n): OphanComponentEvent => ({\n\tcomponent: {\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tid: OPHAN_COMPONENT_ID_OPT_OUT_CONFIRM,\n\t},\n\taction: 'CLICK',\n\tvalue: `article-count-opt-out-popup-${componentType}`,\n});\n\nexport type ArticleCountOptOutType =\n\t| 'epic'\n\t| 'banner'\n\t| 'investigations-moment-banner'\n\t| 'us-eoy-moment-banner'\n\t| 'global-new-year-moment-banner'\n\t| 'election-au-moment-banner';\nconst isBanner = (type: ArticleCountOptOutType): boolean =>\n\ttype === 'banner' ||\n\ttype === 'investigations-moment-banner' ||\n\ttype === 'us-eoy-moment-banner' ||\n\ttype === 'global-new-year-moment-banner' ||\n\ttype === 'election-au-moment-banner';\n\nconst optOutContainer = (type: ArticleCountOptOutType): SerializedStyles => css`\n\tdisplay: inline-block;\n\n\t${from.tablet} {\n\t\t${!isBanner(type) ? 'position: relative;' : ''}\n\t}\n`;\n\nconst articleCountButton = css`\n\tbackground: none;\n\tborder: none;\n\tpadding: 0;\n\tcursor: pointer;\n\tborder-bottom: 1px solid;\n\t/* stylelint-disable-next-line property-disallowed-list */\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tfont-weight: inherit;\n\tfont-style: inherit;\n\tcolor: inherit;\n\t&:focus {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\toutline: none !important;\n\t}\n`;\n\nconst overlayContainer = (\n\ttype: ArticleCountOptOutType,\n): SerializedStyles => css`\n\tposition: absolute;\n\tz-index: 100;\n\t${isBanner(type)\n\t\t? css`\n\t\t\t\ttop: 0px;\n\t\t\t\tleft: 0px;\n\t\t  `\n\t\t: css`\n\t\t\t\tleft: ${space[4]}px;\n\t\t\t\tright: ${space[4]}px;\n\t\t\t\t${isBanner(type) ? 'bottom: 21px;' : ''}\n\t\t  `}\n\tdisplay: block;\n\n\t${from.tablet} {\n\t\t${isBanner(type)\n\t\t\t? css`\n\t\t\t\t\ttop: 10px;\n\t\t\t\t\tleft: 10px;\n\t\t\t\t\twidth: 450px;\n\t\t\t  `\n\t\t\t: css`\n\t\t\t\t\twidth: 400px;\n\t\t\t\t\tleft: 0;\n\t\t\t  `}\n\t}\n`;\n\nexport interface OphanTracking {\n\tcomponentType: OphanComponentType;\n\tsubmitComponentEvent: (componentEvent: OphanComponentEvent) => void;\n}\n\nexport interface ArticleCountOptOutProps {\n\tnumArticles: number;\n\tnextWord: string | null;\n\ttype: ArticleCountOptOutType;\n\ttracking?: OphanTracking;\n}\n\nexport const ArticleCountOptOutPopup: ReactComponent<\n\tArticleCountOptOutProps\n> = ({ numArticles, nextWord, type, tracking }: ArticleCountOptOutProps) => {\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [hasOptedOut, setHasOptedOut] = useState(false);\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tdebounce: true,\n\t\trootMargin: '-18px',\n\t\tthreshold: 0,\n\t});\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen && tracking) {\n\t\t\ttracking.submitComponentEvent(\n\t\t\t\tophanComponentEventOptOutView(tracking.componentType),\n\t\t\t);\n\t\t}\n\t}, [hasBeenSeen, tracking]);\n\n\tconst onOptOut = (): void => {\n\t\taddArticleCountOptOutCookie();\n\t\tremoveArticleCountFromLocalStorage();\n\t\tsetHasOptedOut(true);\n\t\tif (tracking) {\n\t\t\ttracking.submitComponentEvent(\n\t\t\t\tophanComponentEventOptOutConfirm(tracking.componentType),\n\t\t\t);\n\t\t}\n\t};\n\n\tconst onOpen = (): void => {\n\t\tsetIsOpen(true);\n\t\tif (tracking) {\n\t\t\ttracking.submitComponentEvent(\n\t\t\t\tophanComponentEventOptOutOpen(tracking.componentType),\n\t\t\t);\n\t\t}\n\t};\n\n\tconst onClose = (): void => {\n\t\tsetIsOpen(false);\n\t\tif (tracking) {\n\t\t\ttracking.submitComponentEvent(\n\t\t\t\tophanComponentEventOptOutClose(tracking.componentType),\n\t\t\t);\n\t\t}\n\t};\n\n\tconst onToggle = (): void => (isOpen ? onClose() : onOpen());\n\n\treturn (\n\t\t<div ref={setNode} css={optOutContainer(type)}>\n\t\t\t<button css={articleCountButton} onClick={onToggle}>\n\t\t\t\t{`${numArticles}${nextWord ? nextWord : ''}`}\n\t\t\t</button>\n\t\t\t{isOpen && (\n\t\t\t\t<div css={overlayContainer(type)}>\n\t\t\t\t\t<ArticleCountOptOutOverlay\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\thasOptedOut={hasOptedOut}\n\t\t\t\t\t\tonOptOut={onOptOut}\n\t\t\t\t\t\tonClose={onClose}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/lib/replaceArticleCount.tsx\n */\nimport type {\n\tArticleCountOptOutType,\n\tOphanTracking,\n} from '../shared/ArticleCountOptOutPopup';\nimport { ArticleCountOptOutPopup } from '../shared/ArticleCountOptOutPopup';\n\nexport const replaceArticleCountWithLink = (\n\ttext: string,\n\tnumArticles: number,\n\tarticleCountOptOutType: ArticleCountOptOutType,\n\ttracking?: OphanTracking,\n): Array<JSX.Element> => {\n\tconst nextWords: Array<string | null> = [];\n\tconst subbedText = text.replace(\n\t\t/%%ARTICLE_COUNT%%( \\w+)?/g,\n\t\t(_, nextWord) => {\n\t\t\tnextWords.push(nextWord);\n\t\t\treturn '%%ARTICLE_COUNT_AND_NEXT_WORD%%';\n\t\t},\n\t);\n\n\tconst parts = subbedText.split(/%%ARTICLE_COUNT_AND_NEXT_WORD%%/);\n\tconst elements = [];\n\tlet key = 0;\n\tfor (let i = 0; i < parts.length - 1; i += 1) {\n\t\telements.push(\n\t\t\t<span\n\t\t\t\tdangerouslySetInnerHTML={{ __html: parts[i] as string }}\n\t\t\t\tkey={key++}\n\t\t\t/>,\n\t\t);\n\t\telements.push(\n\t\t\t<ArticleCountOptOutPopup\n\t\t\t\tnumArticles={numArticles}\n\t\t\t\tnextWord={nextWords[i] as string}\n\t\t\t\ttype={articleCountOptOutType}\n\t\t\t\ttracking={tracking}\n\t\t\t\tkey={key++}\n\t\t\t/>,\n\t\t);\n\t}\n\telements.push(\n\t\t<span\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: parts[parts.length - 1] as string,\n\t\t\t}}\n\t\t\tkey={key++}\n\t\t/>,\n\t);\n\n\treturn elements;\n};\n\nexport const replaceArticleCount = (\n\ttext: string,\n\tnumArticles: number,\n\tarticleCountOptOutType: ArticleCountOptOutType,\n\ttracking?: OphanTracking,\n\toptOutLink = true,\n): Array<JSX.Element> | JSX.Element => {\n\tif (optOutLink) {\n\t\treturn replaceArticleCountWithLink(\n\t\t\ttext,\n\t\t\tnumArticles,\n\t\t\tarticleCountOptOutType,\n\t\t\ttracking,\n\t\t);\n\t}\n\treturn (\n\t\t<span\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: text.replace(/%%ARTICLE_COUNT%%/, `${numArticles}`),\n\t\t\t}}\n\t\t/>\n\t);\n};\n","/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/shared/src/lib/viewLog.ts\n */\n\n/**\n * We log epic views in this local storage item.\n * This is used to limit the number of epics a browser sees in a period of time.\n */\nimport { storage } from '@guardian/libs';\n\nconst viewLogKey = 'gu.contributions.views';\n\nconst maxLogEntries = 50;\n\ninterface EpicView {\n\tdate: number;\n\ttestId: string;\n}\nexport type EpicViewLog = EpicView[];\n\n/**\n * Return the entire viewLog.\n */\nexport const getEpicViewLog = (): EpicViewLog | undefined => {\n\tconst item = storage.local.get(viewLogKey);\n\tif (Array.isArray(item)) {\n\t\treturn item as EpicView[];\n\t}\n\treturn undefined;\n};\n\n/**\n * Add a new entry to the viewLog.\n * The number of entries is limited to the number in maxLogEntries.\n */\nexport const logEpicView = (testId: string): void => {\n\tconst viewLog = getEpicViewLog() ?? [];\n\n\tconst newView = {\n\t\tdate: new Date().getTime(),\n\t\ttestId,\n\t};\n\n\tconst newValue = [...viewLog, newView].slice(-maxLogEntries);\n\n\tstorage.local.set(viewLogKey, newValue);\n};\n"],"names":["css","space","NewsletterPrivacyMessage","SecureSignup","containerStyles","ContributionsEpicNewsletterSignup","newsletterId","successDescription","tracking","div","abTest","name","abTestName","variant","abTestVariant","isUndefined","ChoiceCardTestData_REGULAR","supportTier","label","amount","currencySymbol","benefitsLabel","benefits","recommended","discount","s","undefined","ChoiceCardTestData_US","ChoiceCardTestData_TwoTier_REGULAR","palette","textSans15","textSansBold14","textSansBold15","until","Radio","RadioGroup","Stack","SvgTickRound","countryCodeToCountryGroupId","getLocalCurrencySymbol","threeTierChoiceCardAmounts","supportTierChoiceCardStyles","selected","brand","neutral","sport","benefitsStyles","benefitsLabelStyles","labelOverrideStyles","supportingTextStyles","recommendedPillStyles","phablet","discountedPillStyles","error","getChoiceAmount","ratePlan","countryGroupId","SupportingBenefits","isBenefit","span","strong","ul","map","benefit","li","size","RecommendedPill","DiscountedPill","getChoiceCardData","choiceCardVariant","ThreeTierChoiceCards","countryCode","selectedProduct","setSelectedProduct","variantOfChoiceCard","supporterPlusDiscount","Choices","cssOverrides","choiceAmount","hasDiscount","radioId","htmlFor","id","value","supporting","checked","onChange","ThemeProvider","Button","DSButton","LinkButton","SvgArrowRightStraight","React","OPHAN_COMPONENT_EVENT_PRIMARY_CTA","OPHAN_COMPONENT_EVENT_SECONDARY_CTA","buttonStyles","textPrimary","backgroundPrimary","brandAlt","backgroundPrimaryHover","textSecondary","backgroundSecondary","backgroundSecondaryHover","borderSecondary","buttonStylesForTest","contributionsTheme","button","link","contributionsThemeForTest","tertiaryButtonOverrides","EpicButton","allProps","onClickAction","submitComponentEvent","children","showArrow","priority","isTertiary","icon","isColourInTestVariant","props","onButtonCtaClick","theme","href","iconSide","onClick","target","rel","SecondaryCtaType","useEffect","useIsInView","hasSetReminder","addChoiceCardsOneTimeParams","addChoiceCardsParams","addChoiceCardsProductParams","addRegionIdAndTrackingParamsToSupportUrl","isSupportUrl","getReminderViewEvent","OPHAN_COMPONENT_EVENT_CTAS_VIEW","OPHAN_COMPONENT_EVENT_REMINDER_OPEN","paymentImageStyles","buttonWrapperStyles","buttonMarginStyles","PrimaryCtaButton","cta","amountsTestName","amountsVariantName","numArticles","buttonText","text","baseUrl","urlWithRegionAndTracking","data-ignore","SecondaryCtaButton","url","ContributionsEpicButtons","onOpenReminderClick","isReminderActive","isSignedIn","showChoiceCards","threeTierChoiceCardSelectedProduct","hasBeenSeen","setNode","debounce","secondaryCta","showReminderFields","getChoiceCardCta","contributionAmount","Contribution","getCta","openReminder","hasSupportCta","type","Custom","ref","data-testid","ContributionsReminder","reminderCta","img","width","height","src","alt","article17","from","headlineBold20","SvgCheckmark","SvgCross","StraightLines","Hide","ensureHasPreposition","ReminderStatus","rootStyles","lineWrapperStyles","remindHeading","successTextStyles","linkStyles","errorTextStyles","closeButtonContainerStyles","tablet","bodyCopyStyles","infoCopyStyles","ctaContainerStyles","ContributionsEpicReminderSignedIn","reminderLabel","reminderStatus","onSetReminderClick","onCloseReminderClick","reminderDateWithPreposition","hideLabel","Completed","h4","p","a","when","breakpoint","disabled","Submitting","Error","TextInput","useContributionsReminderEmailForm","closeButtonStyles","formWrapper","inputWrapper","formTextStyles","getCustomSubmitStyles","isDisabled","ContributionsEpicReminderSignedOut","email","updateEmail","inputError","handleSubmit","form","onSubmit","useContributionsReminderSignup","OPHAN_COMPONENT_EVENT_REMINDER_CLOSE","OPHAN_COMPONENT_EVENT_REMINDER_SET","ContributionsEpicReminder","initialEmailAddress","reminderFields","createReminder","reminderPeriod","reminderOption","closeReminder","useState","ContributionsEpicCtasContainer","articleCounts","onReminderOpen","fetchEmail","fetchedEmail","setFetchedEmail","setIsReminderActive","isNonVatCompliantCountry","choiceCardAmounts","testName","setThreeTierChoiceCardSelectedProduct","showUSSupportCheckout","includes","hasSupporterPlusPromoCode","buttonCopyAsString","toLowerCase","replace","then","resolvedEmail","Boolean","for52Weeks","OPHAN_COMPONENT_ID_CTAS_VIEW","OPHAN_COMPONENT_ID_PRIMARY_CTA","OPHAN_COMPONENT_ID_SECONDARY_CTA","OPHAN_COMPONENT_ID_REMINDER_VIEW","OPHAN_COMPONENT_ID_REMINDER_OPEN","OPHAN_COMPONENT_ID_REMINDER_SET","OPHAN_COMPONENT_ID_REMINDER_CLOSE","OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_OPEN","OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT_CLOSE","OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_IN","OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_OUT","OPHAN_COMPONENT_ID_ARTICLE_COUNT_STAY_OUT","OPHAN_COMPONENT_ID_ARTICLE_COUNT_OPT_IN","OPHAN_COMPONENT_ID_SIGN_IN","component","componentType","action","toString","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_OPEN","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT_CLOSE","OPHAN_COMPONENT_ARTICLE_COUNT_STAY_IN","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_OUT","OPHAN_COMPONENT_ARTICLE_COUNT_STAY_OUT","OPHAN_COMPONENT_ARTICLE_COUNT_OPT_IN","OPHAN_COMPONENT_SIGN_IN","emailIsShortEnoughForIdentity","isValidEmail","isDirty","setIsDirty","setEmail","e","isEmpty","trim","length","isValid","handler","preventDefault","addContributionReminderCookie","CREATE_ONE_OFF_REMINDER_ENDPOINT","reminderPlatform","reminderComponent","reminderStage","setReminderStatus","Editing","reminderSignupData","fetch","body","JSON","stringify","method","headers","response","ok","catch","getCookie","removeCookie","setCookie","storage","ARTICLE_COUNT_OPT_OUT_COOKIE","daysToLive","DAILY_ARTICLE_COUNT_STORAGE_KEY","WEEKLY_ARTICLE_COUNT_STORAGE_KEY","ARTICLES_THIS_WEEK_STORAGE_KEY","addArticleCountOptOutCookie","Date","getTime","removeArticleCountOptOutCookie","removeArticleCountFromLocalStorage","local","remove","hasArticleCountOptOutCookie","dateDiff","start","end","twentyFourHours","Math","round","valueOf","reminderDateString","today","reminderDate","parse","PREPOSITION_REGEX","containsPreposition","test","addPreposition","re","String","background","brandAltBackground","brandAltLine","brandAltText","textSans14","textSans17","buttonThemeBrand","buttonThemeBrandAlt","buttonThemeDefault","COLOURS","epic","banner","primary","BACKGROUND_COLOURS","BORDER_COLOURS","BUTTON_THEMES","overlayContainer","overlayHeader","overlayHeaderText","overlayBody","overlayCtaContainer","NOTE_LINK_COLOURS","BUTTON_OVERRIDES","culture","PRIMARY_BUTTON_OVERRIDES","ctaPrimaryHover","overlayNote","ArticleCountOptOutOverlay","hasOptedOut","onClose","onOptOut","OPHAN_COMPONENT_ID_OPT_OUT_VIEW","OPHAN_COMPONENT_ID_OPT_OUT_OPEN","OPHAN_COMPONENT_ID_OPT_OUT_CLOSE","OPHAN_COMPONENT_ID_OPT_OUT_CONFIRM","ophanComponentEventOptOutView","ophanComponentEventOptOutOpen","ophanComponentEventOptOutClose","ophanComponentEventOptOutConfirm","isBanner","optOutContainer","articleCountButton","ArticleCountOptOutPopup","nextWord","isOpen","setIsOpen","setHasOptedOut","rootMargin","threshold","onOpen","onToggle","replaceArticleCountWithLink","articleCountOptOutType","nextWords","subbedText","_","push","parts","split","elements","key","i","dangerouslySetInnerHTML","__html","replaceArticleCount","optOutLink","viewLogKey","maxLogEntries","getEpicViewLog","item","get","Array","isArray","logEpicView","testId","viewLog","newView","date","newValue","slice","set"],"sourceRoot":""}