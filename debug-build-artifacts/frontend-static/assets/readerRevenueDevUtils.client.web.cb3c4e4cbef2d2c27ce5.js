"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[4994],{36226:(e,n,t)=>{t.d(n,{Jj:()=>p,Pp:()=>c,VF:()=>u,Vi:()=>s,Xr:()=>R,_f:()=>P,h3:()=>g,mG:()=>_,mV:()=>f,n8:()=>b,q6:()=>C,tZ:()=>I,yw:()=>w});var o=t(18411),a=t(9474),r=t(61082),i=t(9092),l=t(67400);const s="gu_hide_support_messaging",c="gu_recurring_contributor",u="gu.contributions.contrib-timestamp",d="gu.noRRBanner",g=e=>{const n=(e=>{switch((0,o.R)({name:s})){case"true":return!0;case"false":return!1;default:return!!e&&"Pending"}})(e);return"Pending"===n?"Pending":n||(()=>{const e=(()=>{const e=(0,o.R)({name:u});if(e)return(e?parseInt(e,10):0)||void 0})();return!(0,a.b)(e)&&((e,n)=>{const t=Date.now()-e;return Math.floor(t/864e5)})(e)<=90})()},m=[1,3,7],h=[1,3,5,7],v=()=>null!==(0,o.R)({name:"gu_article_count_opt_out"}),f=()=>new Promise((e=>{(0,o.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&e(!0),(0,i.Ym)((n=>{let{usnat:t,tcfv2:o,aus:a}=n;if(null!=t?t:a)e(!0);else if(o){const n=m.every((e=>o.consents[e]));n||r.I.local.remove("gu.history.weeklyArticleCount"),e(n)}}))})),p=async()=>!await f()||v(),w=async()=>!await f()||v(),_=()=>{const[e,n]=(0,l.useState)("Pending");return(0,l.useEffect)((()=>{p().then(n).catch((()=>n(!0)))}),[]),e},R=()=>new Promise((e=>{(0,o.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&e(!0),(0,i.Ym)((n=>{let{usnat:t,tcfv2:o,aus:a}=n;if(null!=t?t:a)e(!0);else if(o){const n=h.every((e=>o.consents[e]));e(n)}}))})),b=()=>!!r.I.local.get(d),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return r.I.local.set(d,!0,e+12e5)},I=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!!e&&n-new Date(e).getTime()<36e5},C=()=>{const e=(0,o.R)({name:"GU_CO_COMPLETE",shouldMemoize:!0});if(!e)return;let n;try{n=JSON.parse(decodeURIComponent(e))}catch(e){}return n}},26036:(e,n,t)=>{t.r(n),t.d(n,{changeGeolocation:()=>w,getForcedVariant:()=>_,showMeTheBanner:()=>h,showMeTheEpic:()=>m,showNextVariant:()=>f,showPreviousVariant:()=>p});var o=t(61082),a=t(11735),r=t(18411),i=t(96811),l=t(36226),s=t(2899);const c=[l.Vi,l.Pp,l.VF],u="GU_mvt_id",d=1e6,g=(e,n)=>{if(n)alert('This page has "Prevent membership/contribution appeals" ticked in Composer. Please try a different page');else{for(const e of c)(0,i.z)({name:e});o.I.local.remove("gu.contributions.views"),e&&(0,a.T)({name:l.VF,value:Date.now().toString()}),window.location.reload()}},m=function(){g(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1?arguments[1]:void 0)},h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;v(),o.I.local.remove("gu.prefs.engagementBannerLastClosedAt"),o.I.local.remove("gu.prefs.subscriptionBannerLastClosedAt"),o.I.local.remove("gu.prefs.abandonedBasketLastClosedAt"),o.I.local.remove("gu.noRRBannerTimestamp"),g(e,n)},v=()=>{(0,i.z)({name:"gu-cmp-disabled"})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;(()=>{var e;const n=parseInt(null!==(e=(0,r.R)({name:u}))&&void 0!==e?e:"10",10);n&&(n===d?(0,a.T)({name:u,value:"1"}):(0,a.T)({name:u,value:"".concat(n+1)}))})(),g(e,n)},p=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;(()=>{var e;const n=parseInt(null!==(e=(0,r.R)({name:u}))&&void 0!==e?e:"10",10);n&&(0===n?(0,a.T)({name:u,value:d.toString()}):(0,a.T)({name:u,value:"".concat(n-1)}))})(),g(e,n)},w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;(0,s.C)().then((t=>{const a=window.prompt("Enter two-letter geolocation code (e.g. GB, US, AU). Current is ".concat(null!=t?t:"null","."));"UK"===a?alert("'UK' is not a valid geolocation - please use 'GB' instead!"):a&&(o.I.local.set("gu.geo.override",a),g(e,n))})).catch((e=>{console.error("changeGeolocation - error: ".concat(String(e)))}))},_=e=>{if(URLSearchParams){const n=new URLSearchParams(window.location.search).get("force-".concat(e));if(n)return n}return null}}}]);
//# sourceMappingURL=readerRevenueDevUtils.client.web.cb3c4e4cbef2d2c27ce5.js.map