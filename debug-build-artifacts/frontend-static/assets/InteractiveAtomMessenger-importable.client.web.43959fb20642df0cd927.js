"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[7763],{32011:(e,t,n)=>{n.r(t),n.d(t,{InteractiveAtomMessenger:()=>o});var i=n(60439),r=n(67400),s=n(46061);const c=(0,s.Oxt)("kind",[(0,s.Ikc)({kind:(0,s.euz)("interactive:scroll"),scroll:(0,s.aig)()}),(0,s.Ikc)({kind:(0,s.euz)("interactive:height"),height:(0,s.aig)()})]),o=e=>{let{id:t}=e;const[n,o]=(0,r.useState)(),[a,u]=(0,r.useState)(),[l,d]=(0,r.useState)(0),[v,g]=(0,r.useState)(0),h=(0,r.useCallback)((e=>{var t;null==a||null===(t=a.contentWindow)||void 0===t||t.postMessage(e,"*")}),[a]);return(0,r.useEffect)((()=>{const e=document.querySelector('iframe[id="'.concat(t,'"]'));e&&u(e)}),[t]),(0,r.useEffect)((()=>{(null==a?void 0:a.parentElement)instanceof HTMLDivElement&&o(a.parentElement)}),[a]),(0,r.useEffect)((()=>{if(!a)return;if(!n)return;const e=()=>{const e=n.getBoundingClientRect();return e.top>0?d(0):e.top<-e.height?d(1):void d(-e.top)},t=e=>{if(e.source!==a.contentWindow)return;const t=(0,s.xLC)(c,e.data);if(t.success)switch(t.output.kind){case"interactive:height":return void g(t.output.height);case"interactive:scroll":return(0,i.Rm)("dotcom","ðŸ“œ scrolly",{container:n}),void a.classList.add("scrolly")}};return window.addEventListener("scroll",e),window.addEventListener("message",t),()=>{window.removeEventListener("scroll",e),window.removeEventListener("message",t)}}),[a,n]),(0,r.useEffect)((()=>{h({kind:"interactive:scroll",scroll:l})}),[h,l]),(0,r.useEffect)((()=>{n&&(n.style.height=v>0?"".concat(v,"px"):"auto",h({kind:"interactive:height",height:v}))}),[h,v,n]),null}}}]);
//# sourceMappingURL=InteractiveAtomMessenger-importable.client.web.43959fb20642df0cd927.js.map