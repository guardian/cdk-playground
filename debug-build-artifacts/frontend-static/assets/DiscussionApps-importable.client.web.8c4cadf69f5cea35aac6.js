"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[8979],{74899:(e,r,t)=>{t.r(r),t.d(r,{DiscussionApps:()=>O});var n=t(50484),o=t(56779),s=t(67400),i=t(42631),c=t(34793),a=t(38679),u=t(40264),p=t(53769);function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const l=async(e,r)=>(0,i.QF)().comment(e,r).then((e=>{if(e.__type===o.DiscussionServiceResponseType.DiscussionServiceResponseWithError)return(0,u.z)("ApiError");const r=(0,c.qb)(JSON.parse(e.response));return"error"===r.kind&&window.guardian.modules.sentry.reportError(Error("Failed parseCommentResponse: ".concat(r.error)),"discussion"),r})),f=async(e,r,t)=>(0,i.QF)().reply(e,r,t).then((e=>{if(e.__type===o.DiscussionServiceResponseType.DiscussionServiceResponseWithError)return(0,u.z)("ApiError");const r=(0,c.qb)(JSON.parse(e.response));return"error"===r.kind&&window.guardian.modules.sentry.reportError(Error("Failed parseCommentResponse: ".concat(r.error)),"discussion"),r})),y=async e=>(0,i.QF)().recommend(e).then((e=>e.__type===o.DiscussionServiceResponseType.DiscussionServiceResponseWithResponse&&"ok"===(0,c.Bq)(JSON.parse(e.response)).kind)),v=async()=>(0,u.z)("Unimplemented"),O=e=>{const[r,t]=(0,s.useState)(!1),[u,O]=(0,s.useState)();return(0,s.useEffect)((()=>{(0,i.LE)().isSignedIn().then(t)}),[]),(0,s.useEffect)((()=>{if(!r)return O(void 0);(0,i.QF)().getUserProfile().then((e=>{if(e.__type===o.DiscussionServiceResponseType.DiscussionServiceResponseWithError)return O(void 0);const r=(0,c.mw)(JSON.parse(e.response));if("ok"!==r.kind)return O(void 0);O({kind:"Reader",onComment:l,onReply:f,onRecommend:y,addUsername:v,reportAbuse:(0,a.Vf)(void 0),profile:r.value})}))}),[r,O]),(0,n.jsx)(p.d,(b=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){d(e,r,t[r])}))}return e}({user:u},e),_=null!=(_={reportAbuseUnauthenticated:(0,a.Vf)(void 0)})?_:{},Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(_)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(_)).forEach((function(e){Object.defineProperty(b,e,Object.getOwnPropertyDescriptor(_,e))})),b));var b,_}},9944:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.DiscussionNativeError=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(t||(r.DiscussionNativeError=t={}))},39163:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.MediaEvent=void 0,function(e){e[e.request=0]="request",e[e.ready=1]="ready",e[e.play=2]="play",e[e.percent25=3]="percent25",e[e.percent50=4]="percent50",e[e.percent75=5]="percent75",e[e.end=6]="end"}(t||(r.MediaEvent=t={}))},47504:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.PurchaseScreenReason=void 0,function(e){e[e.hideAds=0]="hideAds",e[e.epic=1]="epic"}(t||(r.PurchaseScreenReason=t={}))},56779:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),o=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),s=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||n(r,e,t)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&n(r,e,t);return o(r,e),r};Object.defineProperty(r,"__esModule",{value:!0}),r.Interaction=r.Newsletters=r.Navigation=r.Analytics=r.Discussion=r.Metrics=r.Videos=r.Gallery=r.User=r.Notifications=r.Tag=r.Acquisitions=r.Commercial=r.Environment=void 0,s(t(39163),r),s(t(47504),r),s(t(35405),r),s(t(7902),r),s(t(9944),r),s(t(55313),r),s(t(96706),r),s(t(25788),r),s(t(64614),r),s(t(8318),r),s(t(45322),r),s(t(13860),r),s(t(54255),r),s(t(16138),r),s(t(85370),r),s(t(76971),r),s(t(94935),r);const c=i(t(65490));r.Environment=c;const a=i(t(86293));r.Commercial=a;const u=i(t(13011));r.Acquisitions=u;const p=i(t(54703));r.Tag=p;const d=i(t(60579));r.Notifications=d;const l=i(t(69504));r.User=l;const f=i(t(89993));r.Gallery=f;const y=i(t(75271));r.Videos=y;const v=i(t(47038));r.Metrics=v;const O=i(t(99895));r.Discussion=O;const b=i(t(96831));r.Analytics=b;const _=i(t(59517));r.Navigation=_;const m=i(t(29103));r.Newsletters=m;const h=i(t(85159));r.Interaction=h}}]);
//# sourceMappingURL=DiscussionApps-importable.client.web.8c4cadf69f5cea35aac6.js.map