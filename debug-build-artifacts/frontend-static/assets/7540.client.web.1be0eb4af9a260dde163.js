"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[7540],{37540:(e,t,i)=>{i.d(t,{Ip:()=>w,VI:()=>k,jp:()=>m,sP:()=>f});var r=i(50484),a=i(24017),n=i(92280),o=i(67400),s=i(16632),d=i(87612);function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(){const e=l(["\n\tdisplay: block;\n"]);return p=function(){return e},e}function c(){const e=l(["\n\tdisplay: flex;\n"]);return c=function(){return e},e}const h=(e,t)=>t.breakpoint-e.breakpoint,b=(0,a.css)(p()),u=(0,a.css)(c()),w=(e,t,i)=>t.slice().sort(h).map((t=>{let{width:r,breakpoint:a}=t;return{breakpoint:a,width:r,hiResUrl:(0,d.o7)({mainImage:e,imageWidth:r,resolution:"high",aspectRatio:i}),lowResUrl:(0,d.o7)({mainImage:e,imageWidth:r,resolution:"low",aspectRatio:i})}})),f=e=>{const[t]=e.slice(-1);if(!t)throw new Error("No fallback images found");return t},m=e=>{let{sources:t}=e;return(0,r.jsx)(r.Fragment,{children:t.map((e=>(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)("source",{srcSet:e.hiResUrl,media:"(min-width: ".concat(e.breakpoint,"px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: ").concat(e.breakpoint,"px) and (min-resolution: 120dpi)")}),(0,r.jsx)("source",{srcSet:e.lowResUrl,media:"(min-width: ".concat(e.breakpoint,"px)")})]},e.breakpoint)))})},k=e=>{let{role:t,format:i,master:a,alt:d,height:l,width:p,isMainMedia:c=!1,loading:h,isLightbox:g=!1,orientation:v="landscape",onLoad:L,aspectRatio:D}=e;const[S,R]=(0,o.useState)(!1),y=(0,o.useCallback)((e=>{e&&(e.complete?R(!0):e.addEventListener("load",(()=>R(!0))))}),[]);(0,o.useEffect)((()=>{S&&L&&L()}),[S,L]);const x=w(a,(e=>{let{role:t,isMainMedia:i,format:r,isLightbox:a,orientation:o}=e;if(a)return"portrait"===o?[{breakpoint:n.f.mobile,width:480},{breakpoint:n.f.mobileLandscape,width:480},{breakpoint:n.f.phablet,width:480},{breakpoint:n.f.tablet,width:660},{breakpoint:n.f.desktop,width:740},{breakpoint:n.f.leftCol,width:980},{breakpoint:n.f.wide,width:1140}]:[{breakpoint:n.f.mobile,width:480},{breakpoint:n.f.mobileLandscape,width:660},{breakpoint:n.f.phablet,width:740},{breakpoint:n.f.tablet,width:980},{breakpoint:n.f.desktop,width:1140},{breakpoint:n.f.leftCol,width:1300},{breakpoint:n.f.wide,width:1900}];if(r.design===s.vw.Picture)return[{breakpoint:n.f.mobile,width:480},{breakpoint:n.f.mobileLandscape,width:660},{breakpoint:n.f.phablet,width:740},{breakpoint:n.f.tablet,width:980},{breakpoint:n.f.desktop,width:1140},{breakpoint:n.f.leftCol,width:1300},{breakpoint:n.f.wide,width:1900}];if(i)switch(r.display){case s.Ns.Immersive:return[{breakpoint:n.f.mobile,width:480},{breakpoint:n.f.mobileLandscape,width:660},{breakpoint:n.f.phablet,width:740},{breakpoint:n.f.tablet,width:980},{breakpoint:n.f.desktop,width:1140},{breakpoint:n.f.leftCol,width:1300},{breakpoint:n.f.wide,width:1900}];case s.Ns.Showcase:case s.Ns.NumberedList:return r.design===s.vw.Feature?[{breakpoint:n.f.mobile,width:465},{breakpoint:n.f.mobileLandscape,width:645},{breakpoint:n.f.phablet,width:725},{breakpoint:n.f.tablet,width:965},{breakpoint:n.f.desktop,width:1125},{breakpoint:n.f.leftCol,width:1140},{breakpoint:n.f.wide,width:1300}]:[{breakpoint:n.f.mobile,width:465},{breakpoint:n.f.mobileLandscape,width:645},{breakpoint:n.f.phablet,width:660},{breakpoint:n.f.tablet,width:700},{breakpoint:n.f.leftCol,width:940},{breakpoint:n.f.wide,width:1020}];default:return[{breakpoint:n.f.mobile,width:465},{breakpoint:n.f.mobileLandscape,width:645},{breakpoint:n.f.phablet,width:620},{breakpoint:n.f.tablet,width:700},{breakpoint:n.f.desktop,width:620}]}else if(r.design===s.vw.LiveBlog||r.design===s.vw.DeadBlog)switch(t){case"thumbnail":return[{breakpoint:n.f.mobile,width:120},{breakpoint:n.f.tablet,width:140}];case"showcase":case"immersive":case"supporting":case"halfWidth":return[{breakpoint:n.f.mobile,width:445}];case"podcastCover":return[{breakpoint:n.f.mobile,width:140},{breakpoint:n.f.wide,width:219}];default:return[{breakpoint:n.f.mobile,width:465},{breakpoint:n.f.phablet,width:700}]}else switch(t){case"showcase":return[{breakpoint:n.f.mobile,width:445},{breakpoint:n.f.mobileLandscape,width:605},{breakpoint:n.f.phablet,width:620},{breakpoint:n.f.desktop,width:640},{breakpoint:n.f.leftCol,width:800},{breakpoint:n.f.wide,width:880}];case"supporting":return[{breakpoint:n.f.mobile,width:445},{breakpoint:n.f.mobileLandscape,width:605},{breakpoint:n.f.phablet,width:620},{breakpoint:n.f.desktop,width:300},{breakpoint:n.f.wide,width:380}];case"thumbnail":return[{breakpoint:n.f.mobile,width:120},{breakpoint:n.f.tablet,width:140}];case"immersive":return[{breakpoint:n.f.mobile,width:465},{breakpoint:n.f.mobileLandscape,width:645},{breakpoint:n.f.phablet,width:725},{breakpoint:n.f.tablet,width:965},{breakpoint:n.f.desktop,width:1125},{breakpoint:n.f.leftCol,width:1140},{breakpoint:n.f.wide,width:1300}];case"halfWidth":return[{breakpoint:n.f.mobile,width:445}];default:return[{breakpoint:n.f.mobile,width:445},{breakpoint:n.f.mobileLandscape,width:605},{breakpoint:n.f.phablet,width:620}]}})({role:t,format:i,isMainMedia:c,isLightbox:g,orientation:v}),D),C=l/p,P=C>=1?"100vw":"".concat(Math.round(100/C),"vh"),I=f(x);return(0,r.jsxs)("picture",{css:g?u:b,children:[i.display===s.Ns.Immersive&&c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("source",{media:"(orientation: portrait) and (-webkit-min-device-pixel-ratio: 1.25), (orientation: portrait) and (min-resolution: 120dpi)",sizes:P,srcSet:x.map((e=>"".concat(e.hiResUrl," ").concat(e.width,"w"))).join(",")}),(0,r.jsx)("source",{media:"(orientation: portrait)",sizes:P,srcSet:x.map((e=>"".concat(e.lowResUrl," ").concat(e.width,"w"))).join(",")})]}),(0,r.jsx)(m,{sources:x}),(0,r.jsx)("img",{ref:y,alt:d,src:I.lowResUrl,width:I.width,height:I.width*C,loading:k.disableLazyLoading?void 0:h,css:g?u:b})]})};k.disableLazyLoading=!1},16632:(e,t,i)=>{i.d(t,{A$:()=>o,B0:()=>n,M2:()=>p,Ns:()=>a,vw:()=>r});var r=function(e){return e[e.Standard=0]="Standard",e[e.Picture=1]="Picture",e[e.Gallery=2]="Gallery",e[e.Audio=3]="Audio",e[e.Video=4]="Video",e[e.Review=5]="Review",e[e.Analysis=6]="Analysis",e[e.Explainer=7]="Explainer",e[e.Comment=8]="Comment",e[e.Letter=9]="Letter",e[e.Feature=10]="Feature",e[e.LiveBlog=11]="LiveBlog",e[e.DeadBlog=12]="DeadBlog",e[e.Recipe=13]="Recipe",e[e.MatchReport=14]="MatchReport",e[e.Interview=15]="Interview",e[e.Editorial=16]="Editorial",e[e.Quiz=17]="Quiz",e[e.Interactive=18]="Interactive",e[e.PhotoEssay=19]="PhotoEssay",e[e.Obituary=20]="Obituary",e[e.Correction=21]="Correction",e[e.FullPageInteractive=22]="FullPageInteractive",e[e.NewsletterSignup=23]="NewsletterSignup",e[e.Timeline=24]="Timeline",e[e.Profile=25]="Profile",e}({}),a=function(e){return e[e.Standard=0]="Standard",e[e.Immersive=1]="Immersive",e[e.Showcase=2]="Showcase",e[e.NumberedList=3]="NumberedList",e}({}),n=function(e){return e[e.News=0]="News",e[e.Opinion=1]="Opinion",e[e.Sport=2]="Sport",e[e.Culture=3]="Culture",e[e.Lifestyle=4]="Lifestyle",e}({}),o=function(e){return e[e.SpecialReport=5]="SpecialReport",e[e.Labs=6]="Labs",e[e.SpecialReportAlt=7]="SpecialReportAlt",e}({});const s=e=>{let{design:t}=e;switch(t){case"ArticleDesign":default:return 0;case"PictureDesign":return 1;case"GalleryDesign":return 2;case"AudioDesign":return 3;case"VideoDesign":return 4;case"ReviewDesign":return 5;case"AnalysisDesign":return 6;case"CommentDesign":return 8;case"LetterDesign":return 9;case"FeatureDesign":return 10;case"LiveBlogDesign":return 11;case"DeadBlogDesign":return 12;case"RecipeDesign":return 13;case"MatchReportDesign":return 14;case"InterviewDesign":return 15;case"EditorialDesign":return 16;case"QuizDesign":return 17;case"InteractiveDesign":return 18;case"PhotoEssayDesign":return 19;case"ObituaryDesign":return 20;case"FullPageInteractiveDesign":return 22;case"NewsletterSignupDesign":return 23;case"ExplainerDesign":return 7;case"TimelineDesign":return 24;case"ProfileDesign":return 25}},d=e=>{let{display:t,design:i}=e;switch(t){case"StandardDisplay":default:return 0;case"ImmersiveDisplay":return"CommentDesign"===i?0:1;case"ShowcaseDisplay":return 2;case"NumberedListDisplay":return 3}},l=e=>{let{theme:t}=e;switch(t){case"NewsPillar":default:return 0;case"OpinionPillar":return 1;case"SportPillar":return 2;case"CulturePillar":return 3;case"LifestylePillar":return 4;case"SpecialReportTheme":return 5;case"SpecialReportAltTheme":return 7;case"Labs":return 6}},p=e=>({design:s(e),display:d(e),theme:l(e)})},87612:(e,t,i)=>{i.d(t,{o7:()=>r});const r=e=>{let{mainImage:t,imageWidth:i,resolution:r,aspectRatio:a="none"}=e;const n=new URL(t);if("s3-eu-west-1.amazonaws.com"===n.hostname)return n.href;const o=new URLSearchParams({width:i.toString(),dpr:String("high"===r?2:1),s:"none",crop:a});return"https://i.guim.co.uk/img/".concat((e=>{var t;switch(null!==(t=e.hostname.split(".")[0])&&void 0!==t?t:""){case"static":case"static-secure":return"static";case"uploads":return"uploads";default:return"media"}})(n)).concat(n.pathname,"?").concat(o.toString())}}}]);
//# sourceMappingURL=7540.client.web.1be0eb4af9a260dde163.js.map