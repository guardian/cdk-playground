"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[3937],{93937:(t,n,e)=>{e.r(n),e.d(n,{Dropdown:()=>q});var o=e(50484),r=e(24017),i=e(9474),s=e(99923),a=e(7351),c=e(77907),d=e(70991),l=e(67400),u=e(50026),p=e(82871),f=e(58452),h=e(53399),x=e(15593);function b(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function g(){const t=b(["\n\tz-index: ",";\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tbackground-color: white;\n\tpadding: 6px 0;\n\tbox-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n\n\t"," {\n\t\tposition: fixed;\n\t\tborder-radius: 0;\n\t\ttop: 32px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twidth: auto;\n\t\tmax-height: calc(100% - 50px);\n\t\toverflow: auto;\n\t}\n\n\t"," {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\twidth: 200px;\n\t\tborder-radius: 3px;\n\t}\n"],["\n\tz-index: ",";\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tbackground-color: white;\n\tpadding: 6px 0;\n\tbox-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n\n\t"," {\n\t\tposition: fixed;\n\t\tborder-radius: 0;\n\t\ttop: 32px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twidth: auto;\n\t\tmax-height: calc(100% - 50px);\n\t\toverflow: auto;\n\t}\n\n\t"," {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\twidth: 200px;\n\t\tborder-radius: 3px;\n\t}\n"]);return g=function(){return t},t}function m(){const t=b(["\n\tposition: relative;\n"]);return m=function(){return t},t}function v(){const t=b(["\n\tdisplay: block;\n"]);return v=function(){return t},t}function w(){const t=b(["\n\tdisplay: none;\n"]);return w=function(){return t},t}function k(){const t=b(["\n\t",";\n\tcolor: ",";\n\ttransition: color 80ms ease-out;\n\tmargin: -1px 0 0 0;\n\ttext-decoration: none;\n\tdisplay: flex;\n\talign-items: flex-start;\n\tjustify-content: space-between;\n\tpadding: 10px 18px 15px 30px;\n\n\t:hover {\n\t\tbackground-color: ",";\n\t\ttext-decoration: none;\n\t}\n\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-top: 1px solid ",";\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tleft: 30px;\n\t\tright: 0px;\n\t}\n"]);return k=function(){return t},t}function y(){const t=b(["\n\tfont-weight: bold;\n\n\t:after {\n\t\tcontent: '';\n\t\tborder: 2px solid ",";\n\t\tborder-top: 0px;\n\t\tborder-right: 0px;\n\t\tposition: absolute;\n\t\ttop: 19px;\n\t\tleft: 12px;\n\t\twidth: 10px;\n\t\theight: 4px;\n\t\ttransform: rotate(-45deg);\n\t}\n"]);return y=function(){return t},t}function j(){const t=b(["\n\t:before {\n\t\tcontent: none;\n\t}\n"]);return j=function(){return t},t}function _(){const t=b(["\n\t",";\n\tdisplay: block;\n\tcursor: pointer;\n\tbackground: none;\n\tborder: none;\n\t/* Design System: The buttons should be components that handle their own layout using primitives  */\n\tline-height: 1.2;\n\tcolor: ",";\n\ttransition: color 80ms ease-out;\n\tpadding: 0px 10px 6px 5px;\n\tmargin: 1px 0 0;\n\ttext-decoration: none;\n\tposition: relative;\n\n\t:hover {\n\t\tcolor: ",";\n\n\t\t:after {\n\t\t\ttransform: translateY(0) rotate(45deg);\n\t\t}\n\t}\n\n\t:after {\n\t\tcontent: '';\n\t\tdisplay: inline-block;\n\t\twidth: 5px;\n\t\theight: 5px;\n\t\ttransform: translateY(-2px) rotate(45deg);\n\t\tborder: 1px solid currentColor;\n\t\tborder-left: transparent;\n\t\tborder-top: transparent;\n\t\tmargin-left: 5px;\n\t\tvertical-align: middle;\n\t\ttransition: transform 250ms ease-out;\n\t}\n"]);return _=function(){return t},t}function E(){const t=b(["\n\t:hover:after {\n\t\ttransform: translateY(-1px) rotate(-135deg);\n\t}\n\t:after {\n\t\ttransform: translateY(1px) rotate(-135deg);\n\t}\n"]);return E=function(){return t},t}function S(){const t=b(["\n\tbackground-color: ",";\n\tcolor: ",";\n\ttext-align: center;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\t",";\n\tline-height: 1;\n\tflex-shrink: 0;\n"]);return S=function(){return t},t}function C(){const t=b(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tmargin-left: -10px;\n\tmargin-top: -3px;\n"]);return C=function(){return t},t}function I(){const t=b(["\n\t",";\n"]);return I=function(){return t},t}function A(){const t=b(["\n\t\t\t\t\t\t"," {\n\t\t\t\t\t\t\t/* Never show the input */\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t}\n\t\t\t\t\t\t"," {\n\t\t\t\t\t\t\t/* Hide caption by default */\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* stylelint-disable-next-line selector-type-no-unknown */\n\t\t\t\t\t\t",":checked + "," {\n\t\t\t\t\t\t\t/* Show the caption if the input is checked */\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return A=function(){return t},t}const T=(0,r.css)(g(),(0,p.f)("dropdown"),s.TG.tablet,s.HT.tablet),M=(0,r.css)(m()),N=(0,r.css)(v()),L=(0,r.css)(w()),O=(0,r.css)(k(),a.PSs,c.M.neutral[7],c.M.neutral[93],c.M.neutral[86]),W=(0,r.css)(y(),c.M.news[400]),D=(0,r.css)(j()),H=(0,r.css)(_(),a.NA0,c.M.neutral[100],c.M.brandAlt[400]),R=(0,r.css)(E()),z=c.M.error[400],U=(0,r.css)(S(),z,c.M.neutral[100],a.WuG),B=(0,r.css)(C()),F=(0,r.css)(I(),a.Ikj),P=t=>{let{diameter:n}=t;return(0,o.jsx)("div",{css:U,style:{width:"".concat(n,"px"),height:"".concat(n,"px"),borderRadius:"".concat(n,"px")},children:(0,o.jsx)("span",{children:"!"})})},G=t=>{let{notification:n}=t;const{message:e}=n;return(0,o.jsx)("div",{css:F,children:e})},Y=t=>{let{link:n,index:e}=t;var r;const s=(0,l.useMemo)((()=>(t=>{if(t.notifications&&t.notifications.length>0)return{componentType:"RETENTION_HEADER",id:t.id,labels:t.notifications.map((t=>t.ophanLabel))}})(n)),[n]),{renderingTarget:a}=(0,x.U)(),[c,d]=(0,f.E)({debounce:!0}),[p,b]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(c&&s&&n.notifications&&n.notifications.length>0&&!p){b(!0);for(const e of n.notifications){var t;null===(t=e.logImpression)||void 0===t||t.call(e)}(0,u.u_)({component:s,action:"VIEW"},a)}}),[c,s,n.notifications,p,n.id,a]),(0,h.H)((()=>{s&&(0,u.u_)({component:s,action:"INSERT"},a)}),[s]);const g=s?((t,n)=>{const e=encodeURIComponent(JSON.stringify({source:"GUARDIAN_WEB",componentId:n.id,componentType:n.componentType,campaignCode:n.id,referrerPageviewId:window.guardian.config.ophan.pageViewId,referrerUrl:window.location.origin+window.location.pathname,labels:n.labels})),o=t.includes("?")?"&":"?";return"".concat(t).concat(o,"acquisitionData=").concat(e)})(n.url,s):n.url,m=!(0,i.b)(n.notifications)&&n.notifications.length>0;return(0,o.jsx)("li",{css:M,ref:d,children:(0,o.jsxs)("a",{href:g,css:[O,!!n.isActive&&W,0===e&&D],"data-link-name":n.dataLinkName,onClick:()=>{s&&(0,u.u_)({component:s,action:"CLICK"},a)},children:[(0,o.jsxs)("div",{children:[n.title,null===(r=n.notifications)||void 0===r?void 0:r.map((t=>(0,o.jsx)(G,{notification:t},t.id)))]}),m&&(0,o.jsx)(P,{diameter:22})]})},n.title)},q=t=>{let{id:n,label:e,links:i,dataLinkName:s,cssOverrides:a,children:c}=t;const[u,p]=(0,l.useState)(!1),[f,h]=(0,l.useState)(!0),[x,b]=(0,l.useState)(null);(0,l.useEffect)((()=>{h(!1)}),[]),(0,l.useEffect)((()=>{const t=t=>{u&&"Escape"===t.code&&p(!1)};return document.addEventListener("keydown",t,!1),()=>document.removeEventListener("keydown",t)}),[u]),(0,l.useEffect)((()=>{if(!u||!x)return;const t=t=>{x!==t.target&&(t.stopPropagation(),p(!1))};return document.addEventListener("click",t,!1),()=>document.removeEventListener("click",t)}),[u,x]);const g="dropbox-id-".concat(n),m="checkbox-id-".concat(n),v=(t=>t.reduce(((t,n)=>{var e,o;return t+(null!==(o=null===(e=n.notifications)||void 0===e?void 0:e.length)&&void 0!==o?o:0)}),0))(i);return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("div",{css:(0,r.css)(A(),"#".concat(m),d.Q,"#".concat(g),"#".concat(m),"#".concat(g)),children:[(0,o.jsx)("label",{htmlFor:m,css:[H,a],children:e}),(0,o.jsx)("input",{type:"checkbox",id:m,"aria-checked":"false",tabIndex:-1}),(0,o.jsx)("ul",{id:g,css:[T,a],children:i.map(((t,n)=>(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:t.url,css:[O,!!t.isActive&&W,0===n&&D],"data-link-name":t.dataLinkName,children:t.title})},t.title)))})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:()=>{p(!u)},css:[H,a,u&&R],"aria-expanded":u?"true":"false","data-link-name":s,"data-testid":"dropdown-button",type:"button",ref:b,children:[e,v>0&&(0,o.jsx)("div",{css:B,children:(0,o.jsx)(P,{diameter:18})})]}),(0,o.jsx)("div",{css:u?N:L,children:c?(0,o.jsx)(o.Fragment,{children:c}):(0,o.jsx)("ul",{css:[T,a],"data-testid":"dropdown-options",children:i.map(((t,n)=>(0,o.jsx)(Y,{link:t,index:n},t.id)))})})]})})}},82871:(t,n,e)=>{e.d(n,{f:()=>r});const o=["lightbox","youTubeFullscreen","sticky-video-button","sticky-video","banner","dropdown","burger","mastheadVeggieBurgerExpandedMobile","expanded-veggie-menu-wrapper","expanded-veggie-menu","fullPageInteractiveHeaderWrapper","mobileSticky","stickyAdWrapperLabsHeader","stickyAdWrapper","stickyAdWrapperNav","mastheadMyAccountDropdown","mastheadEditionDropdown","editionDropdown","summaryDetails","toast","onwardsCarousel","myAccountDropdown","searchHeaderLink","TheGuardian","editionSwitcherBanner","expandableMarketingCardOverlay","tableOfContents","articleHeadline","immersiveBlackBox","bodyArea","rightColumnArea","mainMedia","card-nested-link","card-link"],r=t=>{const n=o.indexOf(t);return-1===n?-1:o.length-n}},58452:(t,n,e)=>{e.d(n,{E:()=>s});var o=e(44165),r=e.n(o),i=e(67400);const s=t=>{const[n,e]=(0,i.useState)(!1);var o;const[s,a]=(0,i.useState)(null!==(o=t.node)&&void 0!==o?o:null),c=(0,i.useRef)(null),d=(0,i.useCallback)((n=>{let[o]=n;o&&(o.isIntersecting?e(!0):t.repeat&&e(!1))}),[t.repeat]),l=t.debounce?r()(d,200):d;return(0,i.useEffect)((()=>{t.node&&a(t.node)}),[t.node]),(0,i.useEffect)((()=>{if(s&&"IntersectionObserver"in window)return c.current=new window.IntersectionObserver(l,t),c.current.observe(s),()=>{var t;return null===(t=c.current)||void 0===t?void 0:t.disconnect()}}),[s,t,l]),(0,i.useEffect)((()=>{var e;!t.repeat&&n&&(null===(e=c.current)||void 0===e||e.disconnect())}),[n,t.repeat]),[n,a]}},53399:(t,n,e)=>{e.d(n,{H:()=>i});var o=e(9474),r=e(67400);const i=(t,n)=>{const[e,i]=(0,r.useState)(!1),s=n.every((t=>!(0,o.b)(t)));(0,r.useEffect)((()=>{!e&&s&&(t(),i(!0))}),[e,s,t])}}}]);
//# sourceMappingURL=3937.client.web.ac8af575a724c1a691dc.js.map