{"version":3,"file":"TopBar-importable.client.web.legacy.bea81448fe99919d5b74.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/TopBarLink.tsx","webpack://@guardian/dotcom-rendering/./src/lib/notification.ts","webpack://@guardian/dotcom-rendering/./src/static/icons/profile.svg","webpack://@guardian/dotcom-rendering/./src/components/TopBarMyAccount.tsx","webpack://@guardian/dotcom-rendering/./src/components/TopBar.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/TopBarSupport.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/contributions.ts","webpack://@guardian/dotcom-rendering/./src/lib/getIdapiUserData.ts","webpack://@guardian/dotcom-rendering/./src/lib/identity-component-event.ts","webpack://@guardian/dotcom-rendering/./src/lib/setAutomat.ts","webpack://@guardian/dotcom-rendering/./src/lib/useApi.ts","webpack://@guardian/dotcom-rendering/./src/lib/useAuthStatus.ts","webpack://@guardian/dotcom-rendering/./src/lib/hasCurrentBrazeUser.ts","webpack://@guardian/dotcom-rendering/./src/lib/getBrazeUuid.ts","webpack://@guardian/dotcom-rendering/./src/lib/braze/checkBrazeDependencies.ts","webpack://@guardian/dotcom-rendering/./src/lib/braze/initialiseAppboy.ts","webpack://@guardian/dotcom-rendering/./src/lib/braze/hasRequiredConsents.ts","webpack://@guardian/dotcom-rendering/./src/lib/braze/buildBrazeMessaging.ts","webpack://@guardian/dotcom-rendering/./src/lib/useBraze.ts","webpack://@guardian/dotcom-rendering/./src/lib/useCountryCode.ts"],"sourcesContent":["import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { space, textSansBold17 } from '@guardian/source/foundations';\nimport { palette as themePalette } from '../palette';\nexport const topBarLinkStyles = css `\n\tdisplay: flex;\n\talign-items: center;\n\t${textSansBold17};\n\n\tcolor: ${themePalette('--masthead-top-bar-link-text')};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\n\tpadding: ${space[1]}px;\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 0 ${space[1]}px 0 0;\n\t}\n`;\nexport const TopBarLink = ({ href, dataLinkName, children }) => {\n    return (_jsx(\"a\", { href: href, css: topBarLinkStyles, \"data-link-name\": dataLinkName, children: children }));\n};\n","const hasTargetAndMessage = (card) => Boolean(card.extras.message) &&\n    Boolean(card.extras.target) &&\n    Boolean(card.extras.ophanLabel);\nexport const mapBrazeCardsToNotifications = (cards) => {\n    return cards.filter(hasTargetAndMessage).map((card) => {\n        return {\n            id: card.id,\n            target: card.extras.target,\n            message: card.extras.message,\n            ophanLabel: card.extras.ophanLabel,\n            logImpression: () => {\n                card.logImpression();\n            },\n        };\n    });\n};\nconst groupNotificationsByTarget = (notifications) => {\n    return notifications.reduce((groupings, notification) => {\n        groupings[notification.target] = (groupings[notification.target] ?? []).concat(notification);\n        return groupings;\n    }, {});\n};\nexport const addNotificationsToDropdownLinks = (links, notifications) => {\n    const notificationsByTarget = groupNotificationsByTarget(notifications);\n    const linksWithNotifications = links.map((link) => {\n        const newNotifications = (link.notifications ?? []).concat(notificationsByTarget[link.id] ?? []);\n        if (newNotifications.length === 0) {\n            return link;\n        }\n        return {\n            ...link,\n            notifications: newNotifications,\n        };\n    });\n    return linksWithNotifications;\n};\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgProfile = function SvgProfile(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 14,\n    viewBox: \"0 0 14 14\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 0C3.1 0 0 3.1 0 7c0 2 .9 3.9 2.4 5.2C3.6 13.4 5.3 14 7 14c1.7 0 3.4-.6 4.7-1.8C13.2 10.9 14 9 14 7c0-3.9-3.1-7-7-7zm0 1.8c1.3 0 2.1.8 2.1 2.1S8 6.3 7 6.3c-.8 0-2-1.1-2-2.4 0-1.4.7-2.1 2-2.1zm0 11.6c-1.7 0-3.3-.7-4.5-1.8l.8-3.2.5-.5c1-.4 2.1-.5 3.1-.5 1.1 0 2.1.2 3.1.5l.5.5.9 3.2c-1.1 1.2-2.7 1.8-4.4 1.8z\"\n  })));\n};\nexport default SvgProfile;","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\n/**\n * @file\n * This was largely copied from https://github.com/guardian/dotcom-rendering/blob/68224f48e7b5f3a465884e3f53607a2227eb9494/dotcom-rendering/src/components/HeaderTopBarMyAccount.tsx\n * For more Git history, please refer to the original file\n */\nimport { css } from '@emotion/react';\nimport { joinUrl } from '@guardian/libs';\nimport { from, space, textSansBold17, until, } from '@guardian/source/foundations';\nimport { useEffect, useState } from 'react';\nimport { getZIndex } from '../lib/getZIndex';\nimport { createAuthenticationEventParams } from '../lib/identity-component-event';\nimport { addNotificationsToDropdownLinks, mapBrazeCardsToNotifications, } from '../lib/notification';\nimport { nestedOphanComponents } from '../lib/ophan-helpers';\nimport { useApi } from '../lib/useApi';\nimport { useBraze } from '../lib/useBraze';\nimport { palette as themePalette } from '../palette';\nimport ProfileIcon from '../static/icons/profile.svg';\nimport { useConfig } from './ConfigContext';\nimport { Dropdown } from './Dropdown.importable';\nconst myAccountLinkStyles = css `\n\tdisplay: flex;\n\t/** Required to absolutely position the dropdown menu */\n\tposition: relative;\n\talign-items: center;\n\t${textSansBold17};\n\n\tcolor: ${themePalette('--masthead-top-bar-link-text')};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\n\tpadding: ${space[1]}px 0 ${space[1]}px ${space[1]}px;\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 0 ${space[1]}px 0 0;\n\t}\n\n\tz-index: ${getZIndex('mastheadMyAccountDropdown')};\n`;\nexport const buildIdentityLinks = (mmaUrl, idUrl, userId) => {\n    /**\n     * Note: the IDs in here are used by Braze to target notifications so should\n     * be unique. Please check with Marketing Tools/TX before changing!\n     */\n    const links = [\n        {\n            id: 'account_overview',\n            url: `${mmaUrl}/`,\n            title: 'Account overview',\n        },\n        {\n            id: 'billing',\n            url: `${mmaUrl}/billing`,\n            title: 'Billing',\n        },\n        {\n            id: 'edit_profile',\n            url: `${mmaUrl}/public-settings`,\n            title: 'Profile',\n        },\n        {\n            id: 'email_prefs',\n            url: `${mmaUrl}/email-prefs`,\n            title: 'Emails & marketing',\n        },\n        {\n            id: 'data_privacy',\n            url: `${mmaUrl}/data-privacy`,\n            title: 'Data privacy',\n        },\n        {\n            id: 'settings',\n            url: `${mmaUrl}/account-settings`,\n            title: 'Settings',\n        },\n        {\n            id: 'help',\n            url: `${mmaUrl}/help`,\n            title: 'Help',\n        },\n        {\n            id: 'comment_activity',\n            url: `${idUrl}/user/id/${userId}`,\n            title: 'Comments & replies',\n        },\n        {\n            id: 'sign_out',\n            url: `${idUrl}/signout`,\n            title: 'Sign out',\n        },\n    ];\n    return links.map((link) => ({\n        ...link,\n        dataLinkName: nestedOphanComponents('header', 'topbar', link.id.replaceAll('_', ' ')),\n    }));\n};\nconst SignIn = ({ idUrl }) => (_jsxs(\"a\", { css: myAccountLinkStyles, href: `${idUrl}/signin?INTCMP=DOTCOM_NEWHEADER_SIGNIN&ABCMP=ab-sign-in&${createAuthenticationEventParams('guardian_signin_header')}`, \"data-link-name\": nestedOphanComponents('header', 'topbar', 'signin'), children: [_jsx(ProfileIcon, {}), \" Sign in\"] }));\nexport const dropDownOverrides = css `\n\tcolor: ${themePalette('--masthead-top-bar-link-text')};\n\tpadding-right: 0;\n\tpadding-bottom: 0;\n\tmargin-top: 0;\n\n\tfont-weight: bold;\n\n\t&:not(ul):hover {\n\t\tcolor: ${themePalette('--masthead-top-bar-link-text')};\n\t\ttext-decoration: underline;\n\t}\n\n\t/** Handles case of *new* top bar being 52px high until tablet */\n\t&:not(button) {\n\t\t${until.tablet} {\n\t\t\ttop: 44px;\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\tright: 0;\n\t\t\ttop: 52px;\n\t\t}\n\n\t\t${from.desktop} {\n\t\t\ttop: 56px;\n\t\t}\n\t}\n`;\nconst SignedInWithNotifications = ({ mmaUrl, idUrl, discussionApiUrl, notifications, authStatus, }) => {\n    let userId;\n    // TODO Okta: Remove the useApi and status === 'NotInTest' when at 100% in Okta oktaVariant\n    // If we encounter an error or don't have user data display sign in to the user.\n    // SWR will retry in the background if the request failed\n    const { data, error } = useApi(authStatus.kind === 'SignedInWithCookies'\n        ? joinUrl(discussionApiUrl, 'profile/me?strict_sanctions_check=false')\n        : undefined, {}, {\n        credentials: 'include',\n    });\n    if (authStatus.kind === 'SignedInWithCookies' && data) {\n        userId = data.userProfile.userId;\n    }\n    if (authStatus.kind === 'SignedInWithOkta') {\n        userId = authStatus.idToken.claims.legacy_identity_id;\n    }\n    if (!userId || error)\n        return _jsx(SignIn, { idUrl: idUrl });\n    const identityLinks = buildIdentityLinks(mmaUrl, idUrl, userId);\n    const identityLinksWithNotifications = addNotificationsToDropdownLinks(identityLinks, notifications);\n    return (_jsxs(\"div\", { css: myAccountLinkStyles, children: [_jsx(ProfileIcon, {}), _jsx(Dropdown, { label: \"My account\", links: identityLinksWithNotifications, id: \"topbar-my-account\", dataLinkName: nestedOphanComponents('header', 'topbar', 'my account'), cssOverrides: dropDownOverrides })] }));\n};\nconst SignedIn = ({ idApiUrl, authStatus, renderingTarget, ...props }) => {\n    const { brazeCards } = useBraze(idApiUrl, renderingTarget);\n    const [brazeNotifications, setBrazeNotifications] = useState([]);\n    useEffect(() => {\n        if (brazeCards) {\n            const cards = brazeCards.getCardsForProfileBadge();\n            const cardsToNotifications = mapBrazeCardsToNotifications(cards);\n            if (cardsToNotifications.length) {\n                setBrazeNotifications(cardsToNotifications);\n            }\n        }\n    }, [brazeCards]);\n    return (_jsx(SignedInWithNotifications, { ...props, notifications: brazeNotifications, authStatus: authStatus }));\n};\nexport const TopBarMyAccount = ({ mmaUrl, idUrl, discussionApiUrl, idApiUrl, authStatus, }) => {\n    const { renderingTarget } = useConfig();\n    return (_jsx(_Fragment, { children: authStatus.kind === 'SignedInWithOkta' ||\n            authStatus.kind === 'SignedInWithCookies' ? (_jsx(SignedIn, { mmaUrl: mmaUrl, idUrl: idUrl, discussionApiUrl: discussionApiUrl, idApiUrl: idApiUrl, authStatus: authStatus, renderingTarget: renderingTarget })) : (_jsx(SignIn, { idUrl: idUrl })) }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n/**\n * @file\n * This file is rework of https://github.com/guardian/dotcom-rendering/blob/94957ccdefe180ce6c292cb81de528cb616676e5/dotcom-rendering/src/components/HeaderTopBar.importable.tsx\n * and includes the previously separated out `HeaderTopBarPrintSubscriptions` and `HeaderTopBarSearchJobs` components.\n * This is intended to replace the existing `HeaderTopBar` component after being AB tested.\n */\nimport { css } from '@emotion/react';\nimport { from, space } from '@guardian/source/foundations';\nimport { Hide } from '@guardian/source/react-components';\nimport { useEffect, useState } from 'react';\nimport { addTrackingCodesToUrl } from '../lib/acquisitions';\nimport { nestedOphanComponents } from '../lib/ophan-helpers';\nimport { useAuthStatus } from '../lib/useAuthStatus';\nimport { usePageViewId } from '../lib/usePageViewId';\nimport { palette as themePalette } from '../palette';\nimport { useConfig } from './ConfigContext';\nimport { Grid } from './Masthead/Titlepiece/Grid';\nimport { TopBarLink } from './TopBarLink';\nimport { TopBarMyAccount } from './TopBarMyAccount';\nimport { TopBarSupport } from './TopBarSupport.importable';\nconst topBarStyles = css `\n\tgrid-column: content-start / main-column-end;\n\tbackground-color: ${themePalette('--masthead-top-bar-background')};\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-end;\n\tbox-sizing: border-box;\n\theight: 52px;\n\t${from.tablet} {\n\t\theight: 60px;\n\t}\n\t${from.desktop} {\n\t\theight: 64px;\n\t}\n`;\nconst topBarLinkContainerStyles = css `\n\theight: 100%;\n\tdisplay: flex;\n`;\nconst alignLeftStyles = css `\n\tmargin-right: auto;\n`;\nconst verticalDividerStyles = css `\n\t${from.desktop} {\n\t\t:before {\n\t\t\tcontent: '';\n\t\t\tborder-left: 1px solid\n\t\t\t\t${themePalette('--masthead-top-bar-vertical-divider')};\n\t\t\theight: 38px;\n\t\t}\n\t}\n`;\nconst TopBarLinkContainer = ({ alignLeft = false, showVerticalDivider = true, isLastChild = false, children, }) => (_jsx(\"div\", { css: [\n        topBarLinkContainerStyles,\n        alignLeft && alignLeftStyles,\n        showVerticalDivider\n            ? verticalDividerStyles\n            : css `\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t  `,\n    ], style: { paddingRight: isLastChild ? 0 : `${space[3]}px` }, children: children }));\n/**\n * The _new and improved_ slim dark blue top bar at the very top of Guardian pages\n *\n * ## Why does this need to be an Island?\n *\n * - We need to check if a user is signed in to show them the right header.\n * - We track clicks on print subscription with a page view ID\n *\n * ---\n *\n * [`TopBar` on Chromatic](https://www.chromatic.com/component?appId=63e251470cfbe61776b0ef19&csfId=components-topbar)\n */\nexport const TopBar = ({ editionId, idUrl, mmaUrl, discussionApiUrl, idApiUrl, contributionsServiceUrl, hasPageSkin = false, }) => {\n    const authStatus = useAuthStatus();\n    const { renderingTarget } = useConfig();\n    const pageViewId = usePageViewId(renderingTarget);\n    const [referrerUrl, setReferrerUrl] = useState('');\n    useEffect(() => {\n        setReferrerUrl(window.location.origin + window.location.pathname);\n    }, []);\n    const printSubscriptionsHref = addTrackingCodesToUrl({\n        base: `https://support.theguardian.com/subscribe${editionId === 'UK' ? '' : '/weekly'}`,\n        componentType: 'ACQUISITIONS_HEADER',\n        componentId: 'PrintSubscriptionsHeaderLink',\n        pageViewId,\n        referrerUrl,\n    });\n    return (_jsx(Grid, { type: \"div\", hasPageSkin: hasPageSkin, children: _jsxs(\"div\", { css: topBarStyles, children: [_jsx(TopBarLinkContainer, { showVerticalDivider: false, alignLeft: true, children: _jsx(TopBarSupport, { contributionsServiceUrl: contributionsServiceUrl }) }), _jsx(Hide, { until: \"desktop\", children: _jsx(TopBarLinkContainer, { children: _jsx(TopBarLink, { dataLinkName: nestedOphanComponents('header', 'topbar', 'printsubs'), href: printSubscriptionsHref, children: \"Print subscriptions\" }) }) }), _jsx(Hide, { until: \"desktop\", children: _jsx(TopBarLinkContainer, { children: \n                        /** We replace \"Search jobs\" with \"Newsletters\" for AU and US editions */\n                        ['AU', 'US'].includes(editionId) ? (_jsx(TopBarLink, { dataLinkName: nestedOphanComponents('header', 'topbar', 'newsletters'), href: \"/email-newsletters\", children: \"Newsletters\" })) : (_jsx(TopBarLink, { dataLinkName: nestedOphanComponents('header', 'topbar', 'job-cta'), href: \"https://jobs.theguardian.com\", children: \"Search jobs\" })) }) }), _jsx(TopBarLinkContainer, { isLastChild: true, children: _jsx(TopBarMyAccount, { mmaUrl: mmaUrl ?? 'https://manage.theguardian.com', idUrl: idUrl ?? 'https://profile.theguardian.com', discussionApiUrl: discussionApiUrl, idApiUrl: idApiUrl, authStatus: authStatus }) })] }) }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\n/**\n * @file\n * This file was largely lifted from https://github.com/guardian/dotcom-rendering/blob/b3ef504acd00d48e765e0656be5ffbad88981a39/dotcom-rendering/src/components/SupportTheG.importable.tsx\n */\nimport { css } from '@emotion/react';\nimport { getCookie, isUndefined } from '@guardian/libs';\nimport { getHeader } from '@guardian/support-dotcom-components';\nimport { useEffect, useState } from 'react';\nimport { submitComponentEvent } from '../client/ophan/ophan';\nimport { getPurchaseInfo, shouldHideSupportMessaging, } from '../lib/contributions';\nimport { setAutomat } from '../lib/setAutomat';\nimport { useIsSignedIn } from '../lib/useAuthStatus';\nimport { useCountryCode } from '../lib/useCountryCode';\nimport { usePageViewId } from '../lib/usePageViewId';\nimport { useConfig } from './ConfigContext';\nconst headerStyles = css `\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\toverflow-wrap: nowrap;\n`;\nconst ReaderRevenueLinksRemote = ({ countryCode, pageViewId, contributionsServiceUrl, }) => {\n    const [supportHeaderResponse, setSupportHeaderResponse] = useState(null);\n    const [SupportHeader, setSupportHeader] = useState(null);\n    const isSignedIn = useIsSignedIn();\n    const { renderingTarget } = useConfig();\n    useEffect(() => {\n        if (isUndefined(countryCode) || isSignedIn === 'Pending') {\n            return;\n        }\n        const hideSupportMessagingForUser = shouldHideSupportMessaging(isSignedIn);\n        if (hideSupportMessagingForUser === 'Pending') {\n            // We don't yet know the user's supporter status\n            return;\n        }\n        setAutomat();\n        const requestData = {\n            tracking: {\n                ophanPageId: pageViewId,\n                platformId: 'GUARDIAN_WEB',\n                referrerUrl: window.location.origin + window.location.pathname,\n                clientName: 'dcr',\n            },\n            targeting: {\n                showSupportMessaging: !hideSupportMessagingForUser,\n                countryCode,\n                mvtId: Number(getCookie({ name: 'GU_mvt_id', shouldMemoize: true })),\n                purchaseInfo: getPurchaseInfo(),\n                isSignedIn,\n            },\n        };\n        getHeader(contributionsServiceUrl, requestData)\n            .then((response) => {\n            if (!response.data) {\n                return null;\n            }\n            const { module } = response.data;\n            setSupportHeaderResponse(module);\n            return (module.name === 'SignInPromptHeader'\n                ? /* webpackChunkName: \"sign-in-prompt-header\" */\n                    import(`./marketing/header/SignInPromptHeader`)\n                : /* webpackChunkName: \"header\" */\n                    import(`./marketing/header/Header`)).then((headerModule) => {\n                setSupportHeader(() => headerModule[module.name] ?? null);\n            });\n        })\n            .catch((error) => {\n            const msg = `Error importing RR header links: ${String(error)}`;\n            console.log(msg);\n            window.guardian.modules.sentry.reportError(new Error(msg), 'rr-header-links');\n        });\n    }, [countryCode, isSignedIn, contributionsServiceUrl, pageViewId]);\n    if (SupportHeader !== null && supportHeaderResponse) {\n        return (_jsx(\"div\", { css: headerStyles, children: _jsx(SupportHeader, { submitComponentEvent: (componentEvent) => void submitComponentEvent(componentEvent, renderingTarget), ...supportHeaderResponse.props }) }));\n    }\n    return null;\n};\n/**\n * Shows support messaging and a CTA (call to action) button in the top bar\n * Messaging comes from the RRCP (reader revenue control panel) via the\n * contributions service\n *\n * ## Why does this need to be an Island?\n *\n * Reader revenue links are entirely client-side and specific to a unique\n * page view. They also relying on getting a country code.\n *\n * ---\n *\n * (No visual story exists)\n */\nexport const TopBarSupport = ({ contributionsServiceUrl }) => {\n    const { renderingTarget } = useConfig();\n    const countryCode = useCountryCode('support-the-Guardian');\n    const pageViewId = usePageViewId(renderingTarget);\n    if (isUndefined(countryCode) || isUndefined(pageViewId))\n        return null;\n    return (_jsx(ReaderRevenueLinksRemote, { countryCode: countryCode, pageViewId: pageViewId, contributionsServiceUrl: contributionsServiceUrl }));\n};\n","import { getCookie, isUndefined, onConsentChange, storage, } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\n// User Attributes API cookies (created on sign-in)\nexport const HIDE_SUPPORT_MESSAGING_COOKIE = 'gu_hide_support_messaging';\nexport const RECURRING_CONTRIBUTOR_COOKIE = 'gu_recurring_contributor';\nexport const OPT_OUT_OF_ARTICLE_COUNT_COOKIE = 'gu_article_count_opt_out';\n// Support Frontend cookie (created when a contribution is made)\nexport const SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE = 'gu.contributions.contrib-timestamp';\n//  Local storage keys\nconst WEEKLY_ARTICLE_COUNT_KEY = 'gu.history.weeklyArticleCount';\nexport const NO_RR_BANNER_KEY = 'gu.noRRBanner';\n// See https://github.com/guardian/support-dotcom-components/blob/main/module-versions.md\nexport const MODULES_VERSION = 'v3';\n// Returns true if we should hide support messaging because the user is a supporter.\n// Checks the cookie that is set by the User Attributes API upon signing in.\n// Value computed server-side and looks at all of the user's active products,\n// including but not limited to recurring & one-off contributions,\n// paper & digital subscriptions, as well as user tiers (GU supporters/staff/partners/patrons).\n// https://github.com/guardian/members-data-api/blob/3a72dc00b9389968d91e5930686aaf34d8040c52/membership-attribute-service/app/models/Attributes.scala\nexport const hasSupporterCookie = (isSignedIn) => {\n    const cookie = getCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE });\n    switch (cookie) {\n        case 'true':\n            return true;\n        case 'false':\n            return false;\n        default:\n            /**\n             * If cookie is not present but user is signed in, we do not want to show any messaging.\n             * This is because of a race condition on the first page view after signing in, where\n             * we may be awaiting the response from the API to find out if they're a supporter.\n             */\n            if (isSignedIn) {\n                return 'Pending';\n            }\n            else {\n                return false;\n            }\n    }\n};\n// looks at the SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE (set by support-frontend when making one-off contribution)\n// and returns a Unix epoch int of the date if it exists.\nexport const getLastOneOffContributionTimestamp = () => {\n    // Support cookies - expects Unix epoch\n    const contributionDateFromSupport = getCookie({\n        name: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n    });\n    if (!contributionDateFromSupport) {\n        return undefined;\n    }\n    // Parse dates into common a number\n    const parsedDateFromSupport = contributionDateFromSupport\n        ? parseInt(contributionDateFromSupport, 10)\n        : 0;\n    return parsedDateFromSupport || undefined; // This guards against 'parsedDateFromSupport' being NaN\n};\nconst dateDiffDays = (from, to) => {\n    const oneDayMs = 1000 * 60 * 60 * 24;\n    const diffMs = to - from;\n    return Math.floor(diffMs / oneDayMs);\n};\nconst AskPauseDays = 90;\nexport const isRecentOneOffContributor = () => {\n    const lastContributionDate = getLastOneOffContributionTimestamp();\n    if (!isUndefined(lastContributionDate)) {\n        const now = Date.now();\n        return dateDiffDays(lastContributionDate, now) <= AskPauseDays;\n    }\n    return false;\n};\nexport const shouldHideSupportMessaging = (isSignedIn) => {\n    const hasCookie = hasSupporterCookie(isSignedIn);\n    if (hasCookie === 'Pending') {\n        return 'Pending';\n    }\n    else {\n        return hasCookie || isRecentOneOffContributor();\n    }\n};\nexport const REQUIRED_CONSENTS_FOR_ARTICLE_COUNT = [1, 3, 7];\nconst REQUIRED_CONSENTS_FOR_BROWSER_ID = [1, 3, 5, 7];\nexport const hasArticleCountOptOutCookie = () => getCookie({ name: OPT_OUT_OF_ARTICLE_COUNT_COOKIE }) !== null;\nconst removeWeeklyArticleCountsFromLocalStorage = () => storage.local.remove(WEEKLY_ARTICLE_COUNT_KEY);\nexport const hasCmpConsentForWeeklyArticleCount = () => {\n    return new Promise((resolve) => {\n        if (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n            resolve(true);\n        }\n        onConsentChange(({ usnat, tcfv2, aus }) => {\n            if (usnat ?? aus) {\n                resolve(true);\n            }\n            else if (tcfv2) {\n                const hasRequiredConsents = REQUIRED_CONSENTS_FOR_ARTICLE_COUNT.every((consent) => tcfv2.consents[consent]);\n                if (!hasRequiredConsents) {\n                    removeWeeklyArticleCountsFromLocalStorage();\n                }\n                resolve(hasRequiredConsents);\n            }\n        });\n    });\n};\nexport const hasOptedOutOfArticleCount = async () => {\n    const hasCmpConsent = await hasCmpConsentForWeeklyArticleCount();\n    return !hasCmpConsent || hasArticleCountOptOutCookie();\n};\nexport const hasOptedOutOfWeeklyArticleCount = async () => {\n    const hasCmpConsent = await hasCmpConsentForWeeklyArticleCount();\n    return !hasCmpConsent || hasArticleCountOptOutCookie();\n};\n// A hook to find out if a user has opted out of article counting\nexport const useHasOptedOutOfArticleCount = () => {\n    const [hasOptedOut, setHasOptedOut] = useState('Pending');\n    useEffect(() => {\n        hasOptedOutOfArticleCount()\n            .then(setHasOptedOut)\n            .catch(() => setHasOptedOut(true));\n    }, []);\n    return hasOptedOut;\n};\nexport const hasCmpConsentForBrowserId = () => new Promise((resolve) => {\n    if (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n        resolve(true);\n    }\n    onConsentChange(({ usnat, tcfv2, aus }) => {\n        if (usnat ?? aus) {\n            resolve(true);\n        }\n        else if (tcfv2) {\n            const hasRequiredConsents = REQUIRED_CONSENTS_FOR_BROWSER_ID.every((consent) => tcfv2.consents[consent]);\n            resolve(hasRequiredConsents);\n        }\n    });\n});\nconst twentyMins = 20 * 60000;\nexport const withinLocalNoBannerCachePeriod = () => !!storage.local.get(NO_RR_BANNER_KEY);\nexport const setLocalNoBannerCachePeriod = (now = Date.now()) => storage.local.set(NO_RR_BANNER_KEY, true, now + twentyMins);\n// Returns true if banner was closed in the last hour\nconst ONE_HOUR_IN_MS = 1000 * 60 * 60;\nexport const recentlyClosedBanner = (lastClosedAt, now = Date.now()) => {\n    if (lastClosedAt) {\n        return now - new Date(lastClosedAt).getTime() < ONE_HOUR_IN_MS;\n    }\n    return false;\n};\nexport const getContributionsServiceUrl = (config) => process.env.SDC_URL ?? config.contributionsServiceUrl;\nexport const getPurchaseInfo = () => {\n    const purchaseInfoRaw = getCookie({\n        name: 'GU_CO_COMPLETE',\n        shouldMemoize: true,\n    });\n    if (!purchaseInfoRaw) {\n        return undefined;\n    }\n    let purchaseInfo;\n    try {\n        purchaseInfo = JSON.parse(decodeURIComponent(purchaseInfoRaw));\n    }\n    catch { } // eslint-disable-line no-empty -- silently handle error\n    return purchaseInfo;\n};\n","import { joinUrl } from '@guardian/libs';\nfunction checkForErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText ||\n            `getIdApiUserData | An api call returned HTTP status ${response.status}`);\n    }\n    return response;\n}\nconst callApi = (url) => {\n    return fetch(url, {\n        credentials: 'include',\n    })\n        .then(checkForErrors)\n        .then((response) => response.json());\n};\nconst cache = {};\nexport const getIdApiUserData = (ajaxUrl) => {\n    if (!cache.idapiUserMeResponse) {\n        const url = joinUrl(ajaxUrl, 'user/me');\n        cache.idapiUserMeResponse = callApi(url);\n    }\n    return cache.idapiUserMeResponse;\n};\nexport const getIdapiUserIdentifiers = (ajaxUrl) => {\n    if (!cache.idapiUserIdentifiersResponse) {\n        const url = joinUrl(ajaxUrl, 'user/me/identifiers');\n        cache.idapiUserIdentifiersResponse = callApi(url);\n    }\n    return cache.idapiUserIdentifiersResponse;\n};\n","import { constructQuery } from './querystring';\nexport const createAuthenticationEventParams = (componentId, pageViewId) => {\n    const params = {\n        componentType: 'identityauthentication',\n        componentId,\n    };\n    if (pageViewId) {\n        params.viewId = pageViewId;\n    }\n    return `componentEventParams=${encodeURIComponent(constructQuery(params))}`;\n};\n","import * as emotionReact from '@emotion/react';\nimport * as emotionReactJsxRuntime from '@emotion/react/jsx-runtime';\nimport React from 'react';\nlet hasAutomatBeenSet = false;\nexport const setAutomat = () => {\n    if (!hasAutomatBeenSet) {\n        window.guardian.automat = {\n            emotionReact,\n            emotionReactJsxRuntime,\n            react: React,\n        };\n        hasAutomatBeenSet = true;\n    }\n};\n","import { isUndefined } from '@guardian/libs';\nimport useSWR from 'swr';\nfunction checkForErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText ||\n            `useApi | An api call returned HTTP status ${response.status}`);\n    }\n    return response;\n}\n/** **NOTE:** no parsing is done on the response, the type is merely asserted */\nconst fetcher = (init) => (url) => fetch(url, init)\n    .then(checkForErrors)\n    .then((res) => res.json());\n/**\n * A custom hook to make a GET request using the given url using the SWR lib (https://swr.vercel.app/).\n *\n * @template T assert the expected response type\n * @template E assert the potential error type\n * @param {string} url - The API endpoint. Falsy values will prevent any network requests\n * @param {SWRConfiguration<Data,Err>} options - The SWR config object - https://swr.vercel.app/docs/api#options\n * @param {RequestInit} init - The fetch init object - https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n * @returns {ApiResponse<Data, Err>}\n * */\nexport const useApi = (url = '', options, init) => {\n    const { data, error } = useSWR(url, fetcher(init), options);\n    return {\n        data,\n        error,\n        loading: !!url && isUndefined(error) && isUndefined(data),\n    };\n};\n","import { useEffect, useState } from 'react';\nimport { eitherInOktaTestOrElse, getSignedInStatusWithCookies, getSignedInStatusWithOkta, } from './identity';\n/**\n * A hook to find out if a user is signed in.\n * Returns `'Pending'` until status is known.\n * Always returns `'Pending'` during server-side rendering.\n * */\nexport const useIsSignedIn = () => {\n    const authStatus = useAuthStatus();\n    switch (authStatus.kind) {\n        case 'Pending':\n            return 'Pending';\n        case 'SignedInWithCookies':\n        case 'SignedInWithOkta':\n            return true;\n        case 'SignedOutWithCookies':\n        case 'SignedOutWithOkta':\n            return false;\n    }\n};\nexport const useAuthStatus = () => {\n    const [authStatus, setAuthStatus] = useState({\n        kind: 'Pending',\n    });\n    useEffect(() => {\n        eitherInOktaTestOrElse((oktaAuthState) => {\n            setAuthStatus(getSignedInStatusWithOkta(oktaAuthState));\n        }, () => setAuthStatus(getSignedInStatusWithCookies())).catch((error) => {\n            console.error(error);\n        });\n    }, []);\n    return authStatus;\n};\n","import { storage } from '@guardian/libs';\nconst KEY = 'gu.brazeUserSet';\nconst hasCurrentBrazeUser = () => {\n    return storage.local.getRaw(KEY) === 'true';\n};\nconst setHasCurrentBrazeUser = () => {\n    storage.local.setRaw(KEY, 'true');\n};\nconst clearHasCurrentBrazeUser = () => {\n    storage.local.remove(KEY);\n};\nexport { hasCurrentBrazeUser, setHasCurrentBrazeUser, clearHasCurrentBrazeUser, };\n","import { getIdapiUserIdentifiers } from './getIdapiUserData';\nimport { eitherInOktaTestOrElse } from './identity';\nexport const getBrazeUuid = async (ajaxUrl) => \n// TODO Okta: Remove either when at 100% in oktaVariant test, and just use idToken\neitherInOktaTestOrElse((authState) => authState.idToken?.claims.braze_uuid, () => getIdapiUserIdentifiers(ajaxUrl)\n    .then((data) => data.brazeUuid)\n    .catch((error) => {\n    window.guardian.modules.sentry.reportError(error, 'getBrazeUuid');\n}));\n","import { getBrazeUuid } from '../getBrazeUuid';\nimport { hasRequiredConsents } from './hasRequiredConsents';\nconst buildFailureResponse = (name, value, data) => ({\n    isSuccessful: false,\n    failure: {\n        field: name,\n        data: value,\n    },\n    data,\n});\nconst buildDependencies = (isSignedIn, idApiUrl) => {\n    return [\n        {\n            name: 'apiKey',\n            value: Promise.resolve(window.guardian.config.page.brazeApiKey),\n        },\n        {\n            name: 'brazeSwitch',\n            value: Promise.resolve(window.guardian.config.switches.brazeSwitch),\n        },\n        {\n            name: 'brazeUuid',\n            value: isSignedIn ? getBrazeUuid(idApiUrl) : Promise.resolve(null),\n        },\n        {\n            name: 'consent',\n            value: hasRequiredConsents(),\n        },\n        {\n            name: 'isNotPaidContent',\n            value: Promise.resolve(!window.guardian.config.page.isPaidContent),\n        },\n    ];\n};\nconst checkBrazeDependencies = async (isSignedIn, idApiUrl) => {\n    const dependencies = buildDependencies(isSignedIn, idApiUrl);\n    const data = {};\n    // I think we could possibly clean this up a bit when we can use\n    // Promise.allSettled reliably (it's not available in our current Node\n    // version and polyfill.io doesn't have a polyfill yet).\n    for (const { name, value } of dependencies) {\n        try {\n            const result = await value;\n            // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions -- TODO: Complex types, look into this further\n            if (result) {\n                data[name] = result;\n            }\n            else {\n                return buildFailureResponse(name, result, data);\n            }\n        }\n        catch (e) {\n            return buildFailureResponse(name, e instanceof Error ? e.message : e, data);\n        }\n    }\n    return {\n        isSuccessful: true,\n        data,\n    };\n};\nexport { checkBrazeDependencies };\n","import { isUndefined, log } from '@guardian/libs';\nconst SDK_OPTIONS = {\n    enableLogging: true,\n    noCookies: true,\n    baseUrl: 'https://sdk.fra-01.braze.eu/api/v3',\n    sessionTimeoutInSeconds: 1,\n    minimumIntervalBetweenTriggerActionsInSeconds: 0,\n    devicePropertyAllowlist: [],\n};\nconst initialiseAppboy = async (apiKey) => {\n    const importedAppboy = (await import(\n    /* webpackChunkName: \"braze-web-sdk-core\" */ '@braze/web-sdk-core'));\n    importedAppboy.setLogger((message) => log('tx', message));\n    importedAppboy.initialize(apiKey, SDK_OPTIONS);\n    return importedAppboy;\n};\nconst getInitialisedAppboy = (() => {\n    let cache;\n    return (apiKey) => {\n        if (isUndefined(cache)) {\n            cache = initialiseAppboy(apiKey);\n        }\n        return cache;\n    };\n})();\nexport { getInitialisedAppboy };\n","import { getConsentFor, onConsentChange } from '@guardian/libs';\nconst hasRequiredConsents = () => new Promise((resolve, reject) => {\n    onConsentChange((state) => {\n        try {\n            resolve(getConsentFor('braze', state));\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n});\nexport { hasRequiredConsents };\n","import { BrazeCards, BrazeMessages, canRenderBrazeMsg, LocalMessageCache, NullBrazeCards, NullBrazeMessages, } from '@guardian/braze-components/logic';\nimport { log, startPerformanceMeasure, storage } from '@guardian/libs';\nimport { getOphan } from '../../client/ophan/ophan';\nimport { clearHasCurrentBrazeUser, hasCurrentBrazeUser, setHasCurrentBrazeUser, } from '../hasCurrentBrazeUser';\nimport { checkBrazeDependencies } from './checkBrazeDependencies';\nimport { getInitialisedAppboy } from './initialiseAppboy';\nconst maybeWipeUserData = async (apiKey, brazeUuid, consent, brazeSwitch) => {\n    const hasCurrentBrazeUserValue = hasCurrentBrazeUser();\n    const userHasLoggedOut = !brazeUuid && hasCurrentBrazeUserValue;\n    const userHasRemovedConsent = !consent && hasCurrentBrazeUserValue;\n    const brazeHasBeenDisabled = !brazeSwitch && hasCurrentBrazeUserValue;\n    if (userHasLoggedOut || userHasRemovedConsent || brazeHasBeenDisabled) {\n        try {\n            if (apiKey) {\n                const appboy = await getInitialisedAppboy(apiKey);\n                appboy.wipeData();\n            }\n            LocalMessageCache.clear();\n            clearHasCurrentBrazeUser();\n        }\n        catch (error) {\n            window.guardian.modules.sentry.reportError(\n            // @ts-expect-error\n            error, 'braze-maybeWipeUserData');\n        }\n    }\n};\nexport const buildBrazeMessaging = async (idApiUrl, isSignedIn, renderingTarget) => {\n    if (!storage.local.isAvailable()) {\n        // we require local storage for using any message channel so that we know\n        // when to clear up user data from the device on logout\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n    const dependenciesResult = await checkBrazeDependencies(isSignedIn, idApiUrl);\n    if (!dependenciesResult.isSuccessful) {\n        const { failure, data } = dependenciesResult;\n        log('tx', `Not attempting to show Braze messages. Dependency ${failure.field} failed with ${String(failure.data)}.`);\n        await maybeWipeUserData(data.apiKey, data.brazeUuid, data.consent, data.brazeSwitch);\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n    try {\n        const { endPerformanceMeasure } = startPerformanceMeasure('tx', 'braze-sdk-load');\n        const appboy = await getInitialisedAppboy(dependenciesResult.data.apiKey);\n        const sdkLoadTimeTaken = endPerformanceMeasure();\n        const ophan = await getOphan(renderingTarget);\n        ophan.record({\n            // @ts-expect-error -- the relevant team should remove this call as it is dropped by Ophan\n            // see https://github.com/guardian/dotcom-rendering/pull/11438 further context\n            component: 'braze-sdk-load-timing',\n            value: sdkLoadTimeTaken,\n        });\n        const errorHandler = (error, desc) => {\n            window.guardian.modules.sentry.reportError(error, desc);\n        };\n        setHasCurrentBrazeUser();\n        appboy.changeUser(dependenciesResult.data.brazeUuid);\n        appboy.openSession();\n        const brazeCards = window.guardian.config.switches.brazeContentCards\n            ? new BrazeCards(appboy, errorHandler)\n            : new NullBrazeCards();\n        const brazeMessages = new BrazeMessages(appboy, LocalMessageCache, errorHandler, canRenderBrazeMsg);\n        return { brazeMessages, brazeCards };\n    }\n    catch {\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n};\n","import { NullBrazeCards, NullBrazeMessages, } from '@guardian/braze-components/logic';\nimport useSWRImmutable from 'swr/immutable';\nimport { buildBrazeMessaging } from './braze/buildBrazeMessaging';\nimport { useAuthStatus } from './useAuthStatus';\n/**\n * Returns brazeMessaging as BrazeMessagesInterface and BrazeCardsInterface\n *\n * BrazeMessages is used to show single-impression messages (like ad impressions).\n * In contrast, BrazeCards can provide persistent user notifications.\n *\n * We're using useSWRImmutable to ensure this call is only made once\n * [doc]: https://swr.vercel.app/docs/revalidation#disable-automatic-revalidations\n */\nexport const useBraze = (idApiUrl, renderingTarget) => {\n    const authStatus = useAuthStatus();\n    const isSignedIn = authStatus.kind === 'SignedInWithOkta' ||\n        authStatus.kind === 'SignedInWithCookies';\n    const { data, error } = useSWRImmutable(authStatus.kind !== 'Pending' ? 'braze-message' : null, () => buildBrazeMessaging(idApiUrl, isSignedIn, renderingTarget));\n    if (error) {\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n    return {\n        brazeMessages: data?.brazeMessages,\n        brazeCards: data?.brazeCards,\n    };\n};\n","import { isNonNullable } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { getLocaleCode } from './getCountryCode';\nexport const useCountryCode = (feature) => {\n    const [countryCode, setCountryCode] = useState();\n    useEffect(() => {\n        getLocaleCode()\n            .then((cc) => {\n            if (isNonNullable(cc))\n                setCountryCode(cc);\n        })\n            .catch((e) => {\n            const msg = `Error fetching country code: ${String(e)}`;\n            window.guardian.modules.sentry.reportError(new Error(msg), feature);\n        });\n    }, [feature]);\n    return countryCode;\n};\n"],"names":["topBarLinkStyles","css","textSansBold17","themePalette","space","TopBarLink","_ref","href","dataLinkName","children","_jsx","_path","hasTargetAndMessage","card","Boolean","extras","message","target","ophanLabel","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","props","width","height","viewBox","d","myAccountLinkStyles","getZIndex","SignIn","idUrl","_jsxs","concat","createAuthenticationEventParams","nestedOphanComponents","ProfileIcon","dropDownOverrides","until","tablet","from","desktop","SignedInWithNotifications","_ref2","userId","mmaUrl","discussionApiUrl","notifications","authStatus","_useApi","useApi","kind","joinUrl","undefined","credentials","data","error","userProfile","idToken","claims","legacy_identity_id","identityLinks","id","url","title","map","link","_objectSpread","replaceAll","buildIdentityLinks","identityLinksWithNotifications","links","notificationsByTarget","reduce","groupings","notification","_groupings$notificati","groupNotificationsByTarget","_link$notifications","_notificationsByTarge","newNotifications","addNotificationsToDropdownLinks","Dropdown","label","cssOverrides","SignedIn","_ref3","idApiUrl","renderingTarget","_objectWithoutProperties","_excluded","brazeCards","useBraze","_useState","useState","_useState2","_slicedToArray","brazeNotifications","setBrazeNotifications","useEffect","cardsToNotifications","getCardsForProfileBadge","filter","logImpression","TopBarMyAccount","_ref4","useConfig","_Fragment","topBarStyles","topBarLinkContainerStyles","name","styles","alignLeftStyles","verticalDividerStyles","TopBarLinkContainer","_ref2$alignLeft","alignLeft","_ref2$showVerticalDiv","showVerticalDivider","_ref2$isLastChild","isLastChild","style","paddingRight","TopBar","editionId","contributionsServiceUrl","_ref3$hasPageSkin","hasPageSkin","useAuthStatus","pageViewId","usePageViewId","referrerUrl","setReferrerUrl","window","location","origin","pathname","printSubscriptionsHref","addTrackingCodesToUrl","base","componentType","componentId","Grid","type","TopBarSupport","Hide","includes","headerStyles","ReaderRevenueLinksRemote","countryCode","supportHeaderResponse","setSupportHeaderResponse","_useState3","_useState4","SupportHeader","setSupportHeader","isSignedIn","useIsSignedIn","isUndefined","hideSupportMessagingForUser","shouldHideSupportMessaging","setAutomat","requestData","tracking","ophanPageId","platformId","clientName","targeting","showSupportMessaging","mvtId","Number","getCookie","shouldMemoize","purchaseInfo","getPurchaseInfo","getHeader","then","response","module","headerModule","_headerModule$module$","catch","msg","String","console","log","guardian","modules","sentry","reportError","Error","submitComponentEvent","componentEvent","useCountryCode","HIDE_SUPPORT_MESSAGING_COOKIE","RECURRING_CONTRIBUTOR_COOKIE","SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE","NO_RR_BANNER_KEY","diffMs","lastContributionDate","hasCookie","hasSupporterCookie","contributionDateFromSupport","parseInt","getLastOneOffContributionTimestamp","Date","now","Math","floor","REQUIRED_CONSENTS_FOR_ARTICLE_COUNT","REQUIRED_CONSENTS_FOR_BROWSER_ID","hasArticleCountOptOutCookie","hasCmpConsentForWeeklyArticleCount","Promise","resolve","onConsentChange","usnat","tcfv2","aus","hasRequiredConsents","every","consent","consents","storage","local","remove","hasOptedOutOfArticleCount","_asyncToGenerator","_regeneratorRuntime","_callee","hasCmpConsent","_context","prev","next","sent","abrupt","stop","hasOptedOutOfWeeklyArticleCount","_callee2","_context2","useHasOptedOutOfArticleCount","hasOptedOut","setHasOptedOut","hasCmpConsentForBrowserId","withinLocalNoBannerCachePeriod","get","setLocalNoBannerCachePeriod","set","recentlyClosedBanner","lastClosedAt","getTime","purchaseInfoRaw","JSON","parse","decodeURIComponent","_unused","checkForErrors","ok","statusText","status","callApi","fetch","json","cache","getIdApiUserData","ajaxUrl","idapiUserMeResponse","getIdapiUserIdentifiers","idapiUserIdentifiersResponse","params","viewId","encodeURIComponent","constructQuery","hasAutomatBeenSet","automat","emotionReact","emotionReactJsxRuntime","react","React","options","init","_useSWR","useSWR","res","fetcher","loading","setAuthStatus","eitherInOktaTestOrElse","oktaAuthState","getSignedInStatusWithOkta","getSignedInStatusWithCookies","KEY","getBrazeUuid","authState","_authState$idToken","braze_uuid","brazeUuid","_x","buildFailureResponse","value","isSuccessful","failure","field","buildDependencies","config","page","brazeApiKey","switches","brazeSwitch","reject","state","getConsentFor","isPaidContent","checkBrazeDependencies","dependencies","_iterator","_step","_step$value","result","_createForOfIteratorHelper","s","done","t0","t1","f","finish","_x2","SDK_OPTIONS","enableLogging","noCookies","baseUrl","sessionTimeoutInSeconds","minimumIntervalBetweenTriggerActionsInSeconds","devicePropertyAllowlist","initialiseAppboy","apiKey","importedAppboy","setLogger","initialize","getInitialisedAppboy","maybeWipeUserData","hasCurrentBrazeUserValue","userHasRemovedConsent","brazeHasBeenDisabled","getRaw","wipeData","LocalMessageCache","clear","_x3","_x4","buildBrazeMessaging","dependenciesResult","_startPerformanceMeas","endPerformanceMeasure","appboy","sdkLoadTimeTaken","errorHandler","brazeMessages","isAvailable","NullBrazeMessages","NullBrazeCards","startPerformanceMeasure","getOphan","record","component","desc","setRaw","changeUser","openSession","brazeContentCards","BrazeCards","BrazeMessages","canRenderBrazeMsg","_x5","_x6","_x7","_useSWRImmutable","useSWRImmutable","feature","setCountryCode","getLocaleCode","cc","isNonNullable"],"sourceRoot":""}