"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[2695],{79003:(t,e,n)=>{n.d(e,{A:()=>a});var o,l=n(67400);function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i.apply(null,arguments)}const a=function(t){return l.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o||(o=l.createElement("path",{d:"M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z"})))}},24855:(t,e,n)=>{n.r(e),n.d(e,{CommentCount:()=>j});var o=n(50484),l=n(24017),i=n(9474),a=n(7351),d=n(99923),c=n(28963),f=n(2634),s=n(53694),r=n(79003);function m(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function u(){const t=m(["\n\tdisplay: flex;\n\talign-self: flex-end;\n\tflex-direction: column;\n\t",";\n\tfont-weight: bold;\n\tcolor: ",";\n\tpadding-top: 5px;\n\n\t"," {\n\t\tcolor: ",";\n\t}\n"]);return u=function(){return t},t}function b(){const t=m(["\n\theight: 15px;\n\tmargin: 0;\n\ttext-align: right;\n\tmargin-bottom: -2px;\n\tsvg {\n\t\theight: 18px;\n\t\twidth: 18px;\n\t}\n"]);return b=function(){return t},t}function p(){const t=m(["\n\tfill: ",";\n\t"," {\n\t\tfill: ",";\n\t}\n"]);return p=function(){return t},t}function h(){const t=m(["\n\tdisplay: block;\n\n\t"," {\n\t\tdisplay: none;\n\t}\n"]);return h=function(){return t},t}function w(){const t=m(["\n\tdisplay: none;\n\n\t"," {\n\t\tdisplay: block;\n\t}\n"]);return w=function(){return t},t}function g(){const t=m(["\n\tcolor: inherit;\n\ttext-decoration: none;\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n\t:visited {\n\t\tcolor: inherit;\n\t}\n"]);return g=function(){return t},t}const k=(0,l.css)(u(),a.NA0,(0,s.M)("--comment-count-fill"),d.TG.desktop,(0,s.M)("--comment-count-mobile-fill")),C=(0,l.css)(b()),v=(0,l.css)(p(),(0,s.M)("--comment-count-fill"),d.TG.desktop,(0,s.M)("--comment-count-mobile-fill")),x=(0,l.css)(h(),d.Tq.leftCol.and.wide),M=(0,l.css)(w(),d.Tq.leftCol.and.wide),L=(0,l.css)(g()),j=t=>{let{discussionApiUrl:e,shortUrlId:n}=t;const l=(0,f.e_)(e,n);if((0,i.b)(l))return null;const{short:a,long:d}=(0,c.B)(l);return(0,o.jsx)("data",{css:k,"data-testid":"comment-counts",value:"".concat(d," comments on this article"),children:(0,o.jsxs)("a",{href:"#comments",css:L,"aria-label":"".concat(a," Comments"),children:[(0,o.jsx)("div",{css:C,children:(0,o.jsx)(r.A,{css:v})}),(0,o.jsx)("div",{"data-testid":"long-comment-count",css:x,"aria-hidden":"true",children:d}),(0,o.jsx)("div",{"data-testid":"short-comment-count",css:M,"aria-hidden":"true",children:a})]})})}},28963:(t,e,n)=>{n.d(e,{B:()=>l});var o=n(9474);const l=t=>{if((0,o.b)(t))return{short:"…",long:"…"};if(0===t)return{short:"0",long:"0"};const e=Math.floor(t),n=Intl.NumberFormat("en-GB").format(e);return{short:e>1e4?"".concat(Math.round(e/1e3),"k"):e.toString(),long:n}}},6576:(t,e,n)=>{n.d(e,{g:()=>a});var o=n(9474),l=n(29273);function i(t){if(!t.ok)throw Error(t.statusText||"useApi | An api call returned HTTP status ".concat(t.status));return t}const a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const{data:a,error:d}=(0,l.Ay)(t,(t=>e=>fetch(e,t).then(i).then((t=>t.json())))(n),e);return{data:a,error:d,loading:!!t&&(0,o.b)(d)&&(0,o.b)(a)}}},2634:(t,e,n)=>{n.d(e,{e_:()=>f,uz:()=>s,z6:()=>d});var o=n(9786),l=n(85770),i=n(67400),a=n(6576);const d="data-discussion-id";let c;const f=(t,e)=>{const[n,f]=(0,i.useState)();(0,i.useEffect)((()=>{null!=c||(c=new Set([...document.querySelectorAll("[".concat(d,"]"))].map((t=>t.getAttribute(d))).filter(o.R))),c.add(e);const n="".concat(t,"/getCommentCounts?").concat(new URLSearchParams({"short-urls":[...c].sort().join(",")}).toString());f(n)}),[t,e]);const{data:s}=(0,a.g)(n),r=(0,l.G)(s)?s[e]:void 0;return"number"==typeof r?r:void 0},s=t=>{if(c)for(const e of t)c.add(e)}},53694:(t,e,n)=>{n.d(e,{M:()=>o});const o=t=>"var(".concat(t,")")},92280:(t,e,n)=>{n.d(e,{f:()=>o});const o={desktop:980,leftCol:1140,mobile:320,mobileLandscape:480,mobileMedium:375,phablet:660,tablet:740,wide:1300}},99923:(t,e,n)=>{n.d(e,{HT:()=>d,TG:()=>c,Tq:()=>f});var o=n(92280);const l=t=>"@media (min-width: ".concat("".concat(t,"px"),")"),i=t=>"@media (max-width: ".concat("".concat(t-.1,"px"),")"),a=(t,e)=>"@media (min-width: ".concat("".concat(t,"px"),") and (max-width: ").concat("".concat(e-.1,"px"),")"),d={mobile:l(o.f.mobile),mobileMedium:l(o.f.mobileMedium),mobileLandscape:l(o.f.mobileLandscape),phablet:l(o.f.phablet),tablet:l(o.f.tablet),desktop:l(o.f.desktop),leftCol:l(o.f.leftCol),wide:l(o.f.wide)},c={mobile:i(o.f.mobile),mobileMedium:i(o.f.mobileMedium),mobileLandscape:i(o.f.mobileLandscape),phablet:i(o.f.phablet),tablet:i(o.f.tablet),desktop:i(o.f.desktop),leftCol:i(o.f.leftCol),wide:i(o.f.wide)},f={mobile:{and:{mobileMedium:a(o.f.mobile,o.f.mobileMedium),mobileLandscape:a(o.f.mobile,o.f.mobileLandscape),phablet:a(o.f.mobile,o.f.phablet),tablet:a(o.f.mobile,o.f.tablet),desktop:a(o.f.mobile,o.f.desktop),leftCol:a(o.f.mobile,o.f.leftCol),wide:a(o.f.mobileMedium,o.f.wide)}},mobileMedium:{and:{mobileLandscape:a(o.f.mobileMedium,o.f.mobileLandscape),phablet:a(o.f.mobileMedium,o.f.phablet),tablet:a(o.f.mobileMedium,o.f.tablet),desktop:a(o.f.mobileMedium,o.f.desktop),leftCol:a(o.f.mobileMedium,o.f.leftCol),wide:a(o.f.mobileMedium,o.f.wide)}},mobileLandscape:{and:{phablet:a(o.f.mobileLandscape,o.f.phablet),tablet:a(o.f.mobileLandscape,o.f.tablet),desktop:a(o.f.mobileLandscape,o.f.desktop),leftCol:a(o.f.mobileLandscape,o.f.leftCol),wide:a(o.f.mobileLandscape,o.f.wide)}},phablet:{and:{tablet:a(o.f.phablet,o.f.tablet),desktop:a(o.f.phablet,o.f.desktop),leftCol:a(o.f.phablet,o.f.leftCol),wide:a(o.f.phablet,o.f.wide)}},tablet:{and:{desktop:a(o.f.tablet,o.f.desktop),leftCol:a(o.f.tablet,o.f.leftCol),wide:a(o.f.tablet,o.f.wide)}},desktop:{and:{leftCol:a(o.f.desktop,o.f.leftCol),wide:a(o.f.desktop,o.f.wide)}},leftCol:{and:{wide:a(o.f.leftCol,o.f.wide)}}}}}]);
//# sourceMappingURL=CommentCount-importable.client.web.e2495ae1a67cd612c996.js.map