"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[4490],{9074:(n,e,r)=>{r.r(e),r.d(e,{TopBarSupport:()=>P});var t=r(62335),i=r(22820),o=r(50484),u=r(65656),a=r(64361),c=r(42702),s=r(67400),f=r(85918),d=r(28118),l=r(49910),g=r(66186),p=r(59695),v=r(78561),m=r(7693);function h(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function w(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){(0,t.A)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}var b={name:"iizxih",styles:"display:flex;flex-direction:column;align-items:center;overflow-wrap:nowrap"},y=function(n){var e=n.countryCode,t=n.pageViewId,p=n.contributionsServiceUrl,v=(0,s.useState)(null),h=(0,i.A)(v,2),y=h[0],P=h[1],O=(0,s.useState)(null),_=(0,i.A)(O,2),S=_[0],k=_[1],E=(0,g.T)(),I=(0,m.U)().renderingTarget;return(0,s.useEffect)((function(){if(!(0,u.b)(e)&&"Pending"!==E){var n=(0,d.h3)(E);if("Pending"!==n){(0,l.q)();var i={tracking:{ophanPageId:t,platformId:"GUARDIAN_WEB",referrerUrl:window.location.origin+window.location.pathname,clientName:"dcr"},targeting:{showSupportMessaging:!n,countryCode:e,mvtId:Number((0,a.R)({name:"GU_mvt_id",shouldMemoize:!0})),purchaseInfo:(0,d.q6)(),isSignedIn:E}};(0,c._b)(p,i).then((function(n){if(!n.data)return null;var e=n.data.module;return P(e),("SignInPromptHeader"===e.name?Promise.all([r.e(5085),r.e(6241)]).then(r.bind(r,84074)):Promise.all([r.e(9240),r.e(5085),r.e(7210)]).then(r.bind(r,37210))).then((function(n){k((function(){var r;return null!==(r=n[e.name])&&void 0!==r?r:null}))}))})).catch((function(n){var e="Error importing RR header links: ".concat(String(n));console.log(e),window.guardian.modules.sentry.reportError(new Error(e),"rr-header-links")}))}}}),[e,E,p,t]),null!==S&&y?(0,o.jsx)("div",{css:b,children:(0,o.jsx)(S,w({submitComponentEvent:function(n){(0,f.u_)(n,I)}},y.props))}):null},P=function(n){var e=n.contributionsServiceUrl,r=(0,m.U)().renderingTarget,t=(0,p.F)("support-the-Guardian"),i=(0,v.L)(r);return(0,u.b)(t)||(0,u.b)(i)?null:(0,o.jsx)(y,{countryCode:t,pageViewId:i,contributionsServiceUrl:e})}},28118:(n,e,r)=>{r.d(e,{Jj:()=>P,Pp:()=>g,VF:()=>p,Vi:()=>l,Xr:()=>S,_f:()=>E,h3:()=>m,mG:()=>_,mV:()=>y,n8:()=>k,q6:()=>R,tZ:()=>I,yw:()=>O});var t=r(22820),i=r(18247),o=r(57820),u=r.n(o),a=r(64361),c=r(65656),s=r(296),f=r(63854),d=r(67400),l="gu_hide_support_messaging",g="gu_recurring_contributor",p="gu.contributions.contrib-timestamp",v="gu.noRRBanner",m=function(n){var e,r,t=function(n){switch((0,a.R)({name:l})){case"true":return!0;case"false":return!1;default:return!!n&&"Pending"}}(n);return"Pending"===t?"Pending":t||(r=function(){var n=(0,a.R)({name:p});if(n)return(n?parseInt(n,10):0)||void 0}(),!(0,c.b)(r)&&(e=Date.now()-r,Math.floor(e/864e5)<=90))},h=[1,3,7],w=[1,3,5,7],b=function(){return null!==(0,a.R)({name:"gu_article_count_opt_out"})},y=function(){return new Promise((function(n){(0,a.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&n(!0),(0,f.Ym)((function(e){var r=e.usnat,t=e.tcfv2,i=e.aus;if(null!=r?r:i)n(!0);else if(t){var o=h.every((function(n){return t.consents[n]}));o||s.I.local.remove("gu.history.weeklyArticleCount"),n(o)}}))}))},P=function(){var n=(0,i.A)(u().mark((function n(){var e;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y();case 2:return e=n.sent,n.abrupt("return",!e||b());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),O=function(){var n=(0,i.A)(u().mark((function n(){var e;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y();case 2:return e=n.sent,n.abrupt("return",!e||b());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),_=function(){var n=(0,d.useState)("Pending"),e=(0,t.A)(n,2),r=e[0],i=e[1];return(0,d.useEffect)((function(){P().then(i).catch((function(){return i(!0)}))}),[]),r},S=function(){return new Promise((function(n){(0,a.R)({name:"gu-cmp-disabled",shouldMemoize:!0})&&n(!0),(0,f.Ym)((function(e){var r=e.usnat,t=e.tcfv2,i=e.aus;if(null!=r?r:i)n(!0);else if(t){var o=w.every((function(n){return t.consents[n]}));n(o)}}))}))},k=function(){return!!s.I.local.get(v)},E=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return s.I.local.set(v,!0,n+12e5)},I=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return!!n&&e-new Date(n).getTime()<36e5},R=function(){var n=(0,a.R)({name:"GU_CO_COMPLETE",shouldMemoize:!0});if(n){var e;try{e=JSON.parse(decodeURIComponent(n))}catch(n){}return e}}},49910:(n,e,r)=>{r.d(e,{q:()=>a});var t=r(24017),i=r(50484),o=r(67400),u=!1,a=function(){u||(window.guardian.automat={emotionReact:t,emotionReactJsxRuntime:i,react:o.default},u=!0)}},66186:(n,e,r)=>{r.d(e,{T:()=>u,w:()=>a});var t=r(22820),i=r(67400),o=r(17950),u=function(){switch(a().kind){case"Pending":return"Pending";case"SignedInWithCookies":case"SignedInWithOkta":return!0;case"SignedOutWithCookies":case"SignedOutWithOkta":return!1}},a=function(){var n=(0,i.useState)({kind:"Pending"}),e=(0,t.A)(n,2),r=e[0],u=e[1];return(0,i.useEffect)((function(){(0,o.kU)((function(n){u((0,o.dx)(n))}),(function(){return u((0,o.Hn)())})).catch((function(n){console.error(n)}))}),[]),r}},59695:(n,e,r)=>{r.d(e,{F:()=>a});var t=r(22820),i=r(76720),o=r(67400),u=r(34166),a=function(n){var e=(0,o.useState)(),r=(0,t.A)(e,2),a=r[0],c=r[1];return(0,o.useEffect)((function(){(0,u.C)().then((function(n){(0,i.R)(n)&&c(n)})).catch((function(e){var r="Error fetching country code: ".concat(String(e));window.guardian.modules.sentry.reportError(new Error(r),n)}))}),[n]),a}},78561:(n,e,r)=>{r.d(e,{L:()=>u});var t=r(22820),i=r(67400),o=r(85918),u=function(n){var e=(0,i.useState)(),r=(0,t.A)(e,2),u=r[0],a=r[1];return(0,i.useEffect)((function(){(0,o.V5)(n).then((function(n){var e=n.pageViewId;a(e)})).catch((function(){a("no-page-view-id-available")}))}),[n]),u}}}]);
//# sourceMappingURL=TopBarSupport-importable.client.web.legacy.0bea8c8ec7595382ce5d.js.map