{"version":3,"file":"9646.client.web.00abfcfcedfc677f6cb8.js","mappings":"8JAAIA,E,WACJ,SAASC,IAAa,OAAOA,EAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAIF,UAAUD,GAAI,IAAK,IAAII,KAAKD,GAAG,CAAG,GAAEE,eAAeC,KAAKH,EAAGC,KAAOL,EAAEK,GAAKD,EAAEC,GAAK,CAAE,OAAOL,CAAG,EAAGJ,EAASY,MAAM,KAAMN,UAAY,CAWnR,QATiB,SAAoBO,GACnC,OAAoB,gBAAoB,MAAOb,EAAS,CACtDc,MAAO,GACPC,OAAQ,GACRC,QAAS,aACRH,GAAQd,IAAUA,EAAqB,gBAAoB,OAAQ,CACpEkB,EAAG,iDAEP,C,uCCXIlB,E,iEACJ,SAASC,IAAa,OAAOA,EAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAK,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAIF,UAAUD,GAAI,IAAK,IAAII,KAAKD,GAAG,CAAG,GAAEE,eAAeC,KAAKH,EAAGC,KAAOL,EAAEK,GAAKD,EAAEC,GAAK,CAAE,OAAOL,CAAG,EAAGJ,EAASY,MAAM,KAAMN,UAAY,CAWnR,QATe,SAAkBO,GAC/B,OAAoB,gBAAoB,MAAOb,EAAS,CACtDc,MAAO,GACPC,OAAQ,GACRC,QAAS,aACRH,GAAQd,IAAUA,EAAqB,gBAAoB,OAAQ,CACpEkB,EAAG,4GAEP,E,+WCOA,MAAMC,EAAaC,IACXC,EAAAA,EAAAA,KAAGA,IACPC,EAAAA,IAEOF,EAKAA,GASEG,EAAW,I,IAAA,eACvBC,EAAc,UACdC,EAAS,oBACTC,EAAmB,UACnBC,EAAS,OACTP,GAASQ,EAAAA,EAAAA,GAAQ,uBACV,EACP,OAAyD,KAArDC,EAAAA,EAAAA,GAAQ,IAAIC,KAAKN,EAAeO,MAAMC,WAClC,MAIP,UAACC,OAAAA,CAAKZ,IAAKF,EAAUC,G,UACnBK,IAAa,SAACS,EAASA,CAAAA,GACvBP,GACA,SAACQ,EAAAA,EAAQA,CACRJ,KAAM,IAAID,KAAKN,EAAeO,MAC9BK,QAAS,WACTC,aAAa,EACbC,UAAWd,EAAee,oBAC1BC,UAAU,KAGX,SAACL,EAAAA,EAAQA,CACRJ,KAAM,IAAID,KAAKN,EAAeO,MAC9BK,QAAS,WACTV,oBAAqBA,EACrBW,aAAa,EACbC,UAAU,EACVE,UAAU,M,i+BCrDf,MAAMC,GAAgBpB,EAAAA,EAAAA,KAAGA,IAETqB,EAAAA,EAAM,GAInBpB,EAAAA,IAYqBM,EAAAA,EAAQe,QAAQ,IACpBD,EAAAA,EAAM,GAERA,EAAAA,EAAM,GACLA,EAAAA,EAAM,IAKnBE,GAAYvB,EAAAA,EAAAA,KAAGA,IACNqB,EAAAA,EAAM,IAGRG,EAAc,I,IAAA,OAC1BC,EAAM,IACNC,EAAG,aACHC,EAAY,aACZC,EAAY,iBACZC,GAAmB,GACZ,EACP,OAAIA,EAAyB,KAEzBJ,EAAOK,QAAUC,EAAAA,GAAeC,MAAQJ,GACpC,SAACK,SAAAA,CAAOjC,IAAKuB,E,SAAYK,KAIhC,UAACK,SAAAA,CAAOjC,IAAKoB,E,UACXM,EACAC,I,gZCvDJ,MAAMO,GAAiBlC,EAAAA,EAAAA,KAAGA,KAEdmC,EAAAA,EAAAA,GAAU,aAQlBC,EAAAA,GAWEC,EAAgB,I,IAAA,OACrBC,EAAM,aACNC,EAAY,aACZC,GAKA,EACA,OAEC,SAACC,IAAAA,CACAC,KAAMJ,EACNtC,IAAKkC,EACLS,iBAAgBH,EAChBI,aAAYL,G,EAKTM,EAAgB,I,IAAA,OACrBP,EAAM,aACNC,EAAY,aACZC,GAKA,EACA,OAEC,SAACC,IAAAA,CACAC,KAAMJ,EACNtC,IAAKkC,EACLS,iBAAgBH,EAChBI,aAAYL,EAAe,sBAC3BO,OAAO,SACPC,IAAI,c,EAKMC,EAAY,I,IAAA,OACxBV,EAAM,aACNC,EAAY,aACZC,EAAe,UAAS,eACxBS,GACO,EACP,OACC,sB,UACEA,IACA,SAACJ,EAAAA,CACAP,OAAQA,EACRC,aAAcA,EACdC,aAAcA,KAGdS,IACD,SAACZ,EAAAA,CACAC,OAAQA,EACRC,aAAcA,EACdC,aAAcA,M,ouBC7DnB,MAAMU,GAAkBlD,EAAAA,EAAAA,KAAGA,KAKrBmD,GAAgBnD,EAAAA,EAAAA,KAAGA,IACNqB,EAAAA,EAAM,IAGnB+B,GAAapD,EAAAA,EAAAA,KAAGA,IACNqB,EAAAA,EAAM,IAGhBgC,EAAcC,IAAiCtD,EAAAA,EAAAA,KAAGA,IACrDuD,EAAAA,IACAC,EAAAA,GAAKC,QACc,UAAlBH,GAA6BI,EAAAA,KAOpBC,EAAa,I,IACzBC,UAAWC,EAAI,cACfP,EAAgB,UAAS,gBACzBQ,GAAkBvD,EAAAA,EAAAA,GAAQ,qBAAoB,UAC9CwD,EAAS,UACTC,GAAY,EAAI,OAChBC,GAAS,GACF,EACP,MAAML,GACL,SAACM,MAAAA,CACAlE,IAAK,CACJkD,GACAlD,EAAAA,EAAAA,KAAGA,IACO8D,GAEVT,EAAWC,GACXU,GAAab,EACbc,GAAUb,G,UAGX,SAACc,MAAAA,CACAC,wBAAyB,CACxBC,OAAQP,OAKZ,OAAOE,GACN,SAACM,EAAAA,EAAIA,CAACC,MAAOP,E,SAAYH,KAEzB,qB,SAAGA,G,yrCCxDL,MAAMW,EAAmBxE,IAAmBC,EAAAA,EAAAA,KAAGA,IAG5CC,EAAAA,IAQOF,GAGJyE,EAAazE,IAAmBC,EAAAA,EAAAA,KAAGA,IAM/BD,GAIJ0E,GAAazE,EAAAA,EAAAA,KAAGA,IAGnB0E,EAAAA,GAAQC,QAAQC,IAAIC,MAKjBC,GAAc9E,EAAAA,EAAAA,KAAGA,IAGpB0E,EAAAA,GAAQC,QAAQC,IAAIC,MAKVE,EAAoB,I,IAAA,iBAChCC,EAAgB,iBAChBC,EAAgB,aAChBC,EAAY,SACZC,EAAQ,OACRpF,GAASqF,EAAAA,EAAAA,GAAa,uBACf,EACP,MAAMC,GAAQC,EAAAA,EAAAA,IAAgBL,EAAkBC,IAE1C,KAAEK,EAAI,MAAEC,IAAUC,EAAAA,EAAAA,GAAYJ,GAE9BK,EAAwB,IACzBP,GACIC,EAAAA,EAAAA,GAAa,qBAEbrF,EAIT,OACC,SAAC4F,EAAAA,EAAkBA,CAACX,iBAAkBA,E,UACrC,UAACd,MAAAA,CAAIlE,IAAKuE,EAAgBmB,K,WACzB,SAACxB,MAAAA,CAAIlE,IAAKwE,EAAUkB,K,UACnB,SAACE,EAAAA,EAAWA,CAAAA,MAEb,SAAC1B,MAAAA,CAAIlE,IAAKyE,E,SAAac,KACvB,SAACrB,MAAAA,CAAIlE,IAAK8E,EAAae,cAAY,O,SACjCL,KAEF,UAAC5E,OAAAA,CACAZ,KAAKA,EAAAA,EAAAA,KAAGA,IACL8F,EAAAA,G,UAGF,IAAI,kB,8wBCnEV,MAmEMC,GAAQ/F,EAAAA,EAAAA,KAAGA,KAsBXgG,EAA2BC,IAChC,MAAMC,EAnBuB,CAACD,IAC9B,OAAQA,GACP,IAAK,MACJ,MAAO,MACR,IAAK,MACJ,MAAO,OACR,IAAK,MACJ,MAAO,OAER,QACC,MAAO,MACT,EAQqBE,CAAsBF,GAC3C,OAAOjG,EAAAA,EAAAA,KAAGA,IACMkG,EAAAA,EAYXE,GAAepG,EAAAA,EAAAA,KAAGA,IAELqB,EAAAA,EAAM,IAInBgF,GAAiBrG,EAAAA,EAAAA,KAAGA,KAObsG,EAAe,I,IAAA,UAC3BC,EAAS,IACTC,EAAG,UACHC,EAAS,QACTC,EAAO,eACPC,EAAc,WACdC,EAAU,YACVX,GACO,EACP,MAAMY,GAAUC,EAAAA,EAAAA,IACfP,EA/HwB,CACzBE,IAEA,OAAQA,GASP,IAAK,WACJ,MAAO,CAAC,CAAEM,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,MAElD,IAAK,QACJ,MAAO,CACN,CAAEqH,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYE,OAAQxH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYvD,QAAS/D,MAAO,MAG5C,IAAK,SACJ,MAAO,CACN,CAAEqH,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYE,OAAQxH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYvD,QAAS/D,MAAO,MAG5C,IAAK,QACJ,MAAO,CACN,CAAEqH,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYG,gBAAiBzH,MAAO,KAClD,CAAEqH,WAAYC,EAAAA,EAAYE,OAAQxH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYvD,QAAS/D,MAAO,MAG5C,IAAK,QACJ,MAAO,CACN,CAAEqH,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYG,gBAAiBzH,MAAO,KAClD,CAAEqH,WAAYC,EAAAA,EAAYE,OAAQxH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYvD,QAAS/D,MAAO,MAG5C,IAAK,UACJ,MAAO,CACN,CAAEqH,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYE,OAAQxH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYvD,QAAS/D,MAAO,MAE5C,IAAK,gBACJ,MAAO,CACN,CAAEqH,WAAYC,EAAAA,EAAYC,OAAQvH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYE,OAAQxH,MAAO,KACzC,CAAEqH,WAAYC,EAAAA,EAAYvD,QAAS/D,MAAO,MAE7C,EAuEC0H,CAAkBX,GAClBR,GAGKoB,GAAiBC,EAAAA,EAAAA,IAAkBT,GAEzC,OACC,UAACU,UAAAA,CACAC,YAAWf,EACXzG,IAAK,CACJ+F,EACAC,EAAwBC,GACxBU,GAAkBP,EAClBQ,GAAcP,G,UAGdQ,EAAQY,KAAKC,IAEZ,UAACC,EAAAA,QAAAA,SAAc,C,WAEd,SAACD,SAAAA,CACAE,OAAQF,EAAOG,SACfC,MAAO,eAA+FJ,OAAhFA,EAAOX,WAAW,gEAAgF,OAAlBW,EAAOX,WAAW,uCAGzH,SAACW,SAAAA,CACAE,OAAQF,EAAOK,UACfD,MAAO,eAAiC,OAAlBJ,EAAOX,WAAW,WATrBW,EAAOX,eAe9B,SAACiB,MAAAA,CACAxB,IAAKA,QAAAA,EAAO,GACZyB,IAAKZ,EAAeU,UACpB/H,IAAK,CAAC+F,EAAOa,GAAcP,GAC3BK,QAASA,EACTwB,iBAAe,a,0GC5KnB,MAAMC,EAAgB,CAACzH,EAAY0H,EAAgBC,IAClD3H,EAAK4H,mBAAmBF,EAAQ,CAC/BG,QAAS,QACTF,aAGIG,EAAa,CAAC9H,EAAY0H,EAAgBC,IAC/C3H,EACE4H,mBAAmBF,EAAQ,CAC3BK,IAAK,UACLC,MAAO,QACPC,KAAM,UACNN,aAEAO,WAAW,IAAK,IAEbC,EAAa,CAACnI,EAAY0H,EAAgBC,IAC/C3H,EACEoI,mBAAmBV,EAAQ,CAC3BW,QAAQ,EACRC,KAAM,UACNC,OAAQ,UACRC,aAAc,QACdb,aAEAc,QAAQ,IAAK,KAQHrI,EAAY,I,IAAA,KACxBJ,EAAI,YACJM,EAAW,SACXC,EAAQ,SACRE,EAAQ,QACRJ,EAAU,WAAU,oBACpBV,GAAsB,GACA,EACtB,MAAM,UAAE+I,IAAcC,EAAAA,EAAAA,MAChB,WAAEC,EAAU,SAAEjB,IAAakB,EAAAA,EAAAA,IAAiBH,GAE5CI,EAAO9I,EAAKC,UAElB,MAAmB,aAAZI,GACN,SAAC0I,EAAAA,EAAMA,CAACC,SAAS,cAAcC,MAAO,CAAErF,MAAO,W,UAC9C,SAACsF,EAAAA,aAAYA,CACZJ,KAAMA,EACNK,IAAKxJ,EArBQ,OAFE,IAISyJ,KAAKC,MAAMtJ,KAAKoJ,MAJzB,KAwBfT,UAAWA,OAIb,SAACY,OAAAA,CACAC,SAAUvJ,EAAKwJ,cACfC,cAAab,EACbc,MAAO1J,EAAK4H,mBAAmBgB,EAAY,CAC1CN,KAAM,UACNC,OAAQ,UACRV,QAAS,OACTI,KAAM,UACND,MAAO,OACPD,IAAK,UACLS,aAAc,OACdb,a,SAGA,CACArH,GAAemH,EAAczH,EAAM4I,EAAYjB,GAC/CpH,GAAYuH,EAAW9H,EAAM4I,EAAYjB,GACzClH,GAAY0H,EAAWnI,EAAM4I,EAAYjB,IAExCgC,OAAOC,EAAAA,GACPC,KAAK,M,4HCrFV,MAEMC,EAAe,I,IAAA,KACpBhB,EAAI,IACJK,EAAG,UACHY,GAKA,E,OAAKX,KAAKC,OAAOF,EAAML,GAAQiB,GAAaA,CAAS,EAQhDC,EAAe,CACpBlB,EACAK,EACAc,KAEA,MAAMX,GAAOxJ,EAAAA,EAAAA,GAAQgJ,EAAM,CAC1BK,IACiB,WAAhBc,EACGd,EACAL,EACAgB,EAAY,CACZhB,OACAK,IAAKpJ,KAAKoJ,MACVY,UA/Ba,QAmClB,OAAOH,EAAAA,EAAAA,GAASN,GAAQA,EAAO,KAAK,EAUxBJ,EAAgB,I,IAAA,KAAEJ,EAAI,IAAEK,EAAG,UAAET,GAAkB,EAC3D,MAAOwB,EAAQC,IAAOC,EAAAA,EAAAA,GAAY,CAAEC,QAAQ,KACrChK,EAASiK,IAAcC,EAAAA,EAAAA,UAASP,EAAalB,EAAMK,EAAK,YAE/DqB,EAAAA,EAAAA,YAAU,KACT,MAAMC,EAAgB,IACrBH,EAAWN,EAAalB,EAAMK,EAAK,WAEpC,GADAsB,KACKP,EAAQ,OACb,MAAMQ,EAAWC,YAAYF,EAtDZ,KAuDjB,MAAO,IAAMG,cAAcF,EAAS,GAClC,CAACR,EAAQf,EAAKL,IAEjB,MAAM9I,EAAO,IAAID,KAAK+I,IAChB,WAAEF,EAAU,SAAEjB,IAAakB,EAAAA,EAAAA,IAAiBH,GAElD,OACC,SAACY,OAAAA,CACAa,IAAKA,EACLZ,SAAUvJ,EAAKwJ,cACfC,cAAab,EACbc,MAAO1J,EAAK4H,mBAAmBgB,EAAY,CAC1CN,KAAM,UACNC,OAAQ,UACRV,QAAS,OACTI,KAAM,UACND,MAAO,OACPD,IAAK,UACLS,aAAc,OACdb,a,SAGAtH,G,2nBCtFJ,MAAMwK,GAAUvL,EAAAA,EAAAA,KAAGA,KAIbwL,EAAiBC,IACtB,OAAQA,GACP,IAAK,QACJ,OAAOzL,EAAAA,EAAAA,KAAGA,KAOX,IAAK,QACJ,OAAOA,EAAAA,EAAAA,KAAGA,KAOZ,EAQY0L,EAAc,I,IAAA,OAAEC,EAAM,KAAEF,GAAa,E,OACjD,SAACvH,MAAAA,CAAIlE,IAAK,CAACwL,EAAcC,GAAOF,G,SAC9BK,MAAMpI,KAAK,CAAErE,OAAQ,IAAK,CAAC0M,EAAGC,IAC9BA,EAAIH,GAAS,SAACI,EAAAA,EAAOA,CAAAA,EAAMD,IAAQ,SAACE,EAAAA,EAAcA,CAAAA,EAAMF,M,2tECP3D,MAYMG,GAAWjM,EAAAA,EAAAA,KAAGA,IAIRqB,EAAAA,EAAM,IAGZ6K,GAAiBlM,EAAAA,EAAAA,KAAGA,IACvBwD,EAAAA,GAAK0D,OAEQ7F,EAAAA,EAAM,IAIhB8K,GAAsBnM,EAAAA,EAAAA,KAAGA,IAChBqB,EAAAA,EAAM,GAGXA,EAAAA,EAAM,IAGUd,EAAAA,EAAAA,GAAQ,qBAG9BiD,EAAAA,GAAK0D,OAGL1D,EAAAA,GAAKC,SAMH2I,GAAoBpM,EAAAA,EAAAA,KAAGA,KASPO,EAAAA,EAAAA,GAAQ,6BAIxB8L,GAAoBrM,EAAAA,EAAAA,KAAGA,KAKvBsM,GAAwBtM,EAAAA,EAAAA,KAAGA,IAE7BmM,EAGD3I,EAAAA,GAAK0D,OAEHiF,GAkBCI,GAAgBvM,EAAAA,EAAAA,KAAGA,IAETqB,EAAAA,EAAM,IAMhBmL,GAAuBxM,EAAAA,EAAAA,KAAGA,IAC7BsE,EAAAA,GAAM4C,OACI7F,EAAAA,EAAM,GACCA,EAAAA,EAAM,IACJd,EAAAA,EAAAA,GAAQ,+BAIxBkM,GAAwBzM,EAAAA,EAAAA,KAAGA,IAC9BwD,EAAAA,GAAK0D,OACK7F,EAAAA,EAAM,GACCA,EAAAA,EAAM,IACJd,EAAAA,EAAAA,GAAQ,+BAIjBmM,EAAqB,I,IAAA,kBACjCC,EAAiB,UACjBC,EAAS,iBACT5H,EAAgB,SAChBG,EAAQ,uBACR0H,GAAyB,EAAK,wBAC9BC,GAA0B,GACnB,EACP,MAAMC,EAxHe,CAACC,IACtB,OAAQA,GACP,KAAK,EACL,KAAK,EACJ,OAAO,EACR,KAAK,EACJ,OAAO,EAER,QACC,OAAO,EACT,EA8GmBC,CAAcN,EAAkBxN,QACnD,OACC,SAAC+N,KAAAA,CACAC,UAAU,WACVnN,IAAK,CACJuM,EACAN,GACC9G,QAAAA,EAA0B,eAAdyH,IAA+BV,EAC5CW,GAA0BL,EAC1BM,GAA2BL,G,SAG3BE,EAAkBlF,KAAI,CAAC2F,EAASC,KAGhC,IAAKD,EAAQE,SAAU,OAAO,KAI9B,MAAMC,G,wUAAgB,IAClBH,EAAQ3L,Q,WAAM,CACjB+L,QAAQC,EAAAA,EAAAA,GAAYL,EAAQ3L,QACzBiM,EAAAA,GAAcC,SACdP,EAAQ3L,OAAO+L,S,yVApEUI,EAuE7B,OACC,SAACC,KAAAA,CAEA7N,IAAK,CACJqM,GACAlH,QAAAA,EAA0B,eAAdyH,IA5EcgB,EA6ECb,GA7EwB/M,EAAAA,EAAAA,KAAGA,IACxC4N,EAClBtJ,EAAAA,GAAM4C,OAEJiF,EAIF3I,EAAAA,GAAK0D,OACJkF,IAqEME,GAEJ3J,iBAAgB,cAAwB,OAAV0K,EAAQ,G,UAEtC,SAACS,EAAAA,EAAcA,CAACrM,OAAQ8L,E,UACvB,SAAC5H,EAAAA,EAAkBA,CAClBX,iBAAkBA,E,UAElB,SAAC+I,EAAAA,GAAYA,CACZtM,OAAQ8L,EACRS,iBAAiB,EACjB1L,OAAQ8K,EAAQa,IAChBC,eACCd,EAAQ3L,OAAO+L,SACfE,EAAAA,GAAcS,SAEf5L,aAAc6K,EAAQE,SACtBc,WAAYhB,EAAQgB,kBAtBlBhB,EAAQa,IAAG,K,2DC/Kf,MAAMR,EAAehM,IAC3B,OAAQA,EAAO+L,QACd,KAAKE,EAAAA,GAAcW,QACnB,KAAKX,EAAAA,GAAcY,MACnB,KAAKZ,EAAAA,GAAca,MAClB,OAAO,EAER,QACC,OAAO,EAET,EAGYC,EAAwB,CACpC/M,EACAuD,KAEA,OAAQA,GAEP,IAAK,kBACL,IAAK,gBACL,IAAK,uBACL,IAAK,mBACJ,OAAO,EAGR,IAAK,UACL,IAAK,kBACL,IAAK,eACL,IAAK,wBACL,IAAK,qBACL,IAAK,0BAIL,IAAK,eACL,IAAK,iBAEL,UAAKyJ,EACJ,OAAO,EAET,C,8ECrCD,MAAMC,EAAc,CACnB,CACCT,IAAK,yBACL7E,UAAW,KACXuF,OAAQ,KACRC,UAAW,aACXxE,MAAO,aACPd,WAAY,QACZjB,SAAU,gBACVwG,WAAY,QACZC,uBAAuB,EACvBC,WAAY,MAEb,CACCd,IAAK,yBACL7E,UAAW,KACXuF,OAAQ,KACRC,UAAW,aACXxE,MAAO,aACPd,WAAY,QACZjB,SAAU,mBACVwG,WAAY,QACZC,uBAAuB,EACvBC,WAAY,MAEb,CACCd,IAAK,yBACL7E,UAAW,KACXuF,OAAQ,KACRC,UAAW,oBACXxE,MAAO,aACPd,WAAY,QACZjB,SAAU,mBACVwG,WAAY,QACZC,uBAAuB,EACvBC,WAAY,OAEb,CACCd,IAAK,0BACL7E,UAAW,MACXuF,OAAQ,SACRC,UAAW,iBACXxE,MAAO,iBACPd,WAAY,QACZjB,SAAU,eACVwG,WAAY,QACZC,uBAAuB,EACvBC,WAAY,OAEb,CACCd,IAAK,0BACL7E,UAAW,MACXuF,OAAQ,gBACRC,UAAW,wBACXxE,MAAO,wBACPd,WAAY,QACZjB,SAAU,gBACVwG,WAAY,KACZC,uBAAuB,EACvBC,WAAY,SAePC,GAAaN,EAsBdnF,EAAoBH,I,IAExBsF,EADD,OACqDtF,QAApDsF,EAAAA,EAAYO,MAAMC,GAAYA,EAAQ9F,YAAcA,WAApDsF,IAAAA,EAAAA,EACAM,CAAS,EAILG,EAAwBR,GAC7BD,EAAYO,MAAMC,GAAYA,EAAQP,SAAWA,IAa5CS,IAFcC,EAAAA,EAAAA,GAAQX,EAAYjH,KAAK,I,IAAA,UAAE2B,GAAW,E,OAAKA,CAAS,KAEhDuF,GACvBD,EAAYY,MAAMJ,GAAYA,EAAQP,SAAWA,I,iDC3H3C,MAAMlJ,EACZJ,IAEA,IAAIkK,EAAAA,EAAAA,GAAYlK,GAAQ,MAAO,CAAEG,MAAO,IAAKD,KAAM,KACnD,GAAc,IAAVF,EAAa,MAAO,CAAEG,MAAO,IAAKD,KAAM,KAE5C,MAAMiK,EAAiB1F,KAAKC,MAAM1E,GAC5BoK,EAAmBC,KAAKC,aAAa,SAASlO,OAAO+N,GAM3D,MAAO,CACNhK,MALAgK,EAAiB,IACd,GAAqC,OAAlC1F,KAAK8F,MAAMJ,EAAiB,KAAM,KACrCA,EAAeK,WAIlBtK,KAAMkK,EACN,C,mGCPK,MAAMK,EAA+B,qBAK5C,IAAIC,EAKJ,MAKazK,EAAkB,CAC9BL,EACA+K,KAGA,MAAO/B,EAAKgC,IAAUhF,EAAAA,EAAAA,aAEtBC,EAAAA,EAAAA,YAAU,KACT6E,UAAAA,EAAwB,IAAIG,IAZ7B,IAAIC,SAASC,iBAAiB,IAAiC,OAA7BN,EAA6B,OAC7DrI,KAAK4I,GAAYA,EAAQC,aAAaR,KACtCzF,OAAOkG,EAAAA,KAWRR,EAAoBS,IAAIR,GAExB,MAAMS,EAAqB,GAAwC,OAArCxL,EAAiB,sBAMlC,OANsD,IAAIyL,gBACtE,CACC,aAAc,IAAIX,GAChBY,OACApG,KAAK,OAEPsF,YAEFI,EAAOQ,EAAmB,GACxB,CAACxL,EAAkB+K,IAEtB,MAAM,KAAEY,IAASC,EAAAA,EAAAA,GAAO5C,GAMlB5I,GAAQyL,EAAAA,EAAAA,GAASF,GAAQA,EAAKZ,QAAYvB,EAChD,MAAwB,iBAAVpJ,EAAqBA,OAAQoJ,CAAS,EAIxCsC,EAAoBC,IAChC,GAAKjB,EACL,IAAK,MAAMkB,KAAMD,EAChBjB,EAAoBS,IAAIS,EACzB,C","sources":["webpack://@guardian/dotcom-rendering/./src/static/icons/comment.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/clock.svg","webpack://@guardian/dotcom-rendering/./src/components/Card/components/CardAge.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/CardFooter.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/CardLink.tsx","webpack://@guardian/dotcom-rendering/./src/components/Card/components/TrailText.tsx","webpack://@guardian/dotcom-rendering/./src/components/CardCommentCount.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/CardPicture.tsx","webpack://@guardian/dotcom-rendering/./src/components/DateTime.tsx","webpack://@guardian/dotcom-rendering/./src/components/RelativeTime.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/StarRating/StarRating.tsx","webpack://@guardian/dotcom-rendering/./src/components/SupportingContent.tsx","webpack://@guardian/dotcom-rendering/./src/lib/cardHelpers.ts","webpack://@guardian/dotcom-rendering/./src/lib/edition.ts","webpack://@guardian/dotcom-rendering/./src/lib/formatCount.ts","webpack://@guardian/dotcom-rendering/./src/lib/useCommentCount.ts"],"sourcesContent":["var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgComment = function SvgComment(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z\"\n  })));\n};\nexport default SvgComment;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgClock = function SvgClock(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 11,\n    viewBox: \"0 0 11 11\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.4 0C2.4 0 0 2.4 0 5.4s2.4 5.4 5.4 5.4 5.4-2.4 5.4-5.4S8.4 0 5.4 0zm3 6.8H4.7V1.7h.7L6 5.4l2.4.6v.8z\"\n  })));\n};\nexport default SvgClock;","import { css } from '@emotion/react';\nimport { timeAgo } from '@guardian/libs';\nimport { textSansBold12 } from '@guardian/source/foundations';\nimport { palette } from '../../../palette';\nimport ClockIcon from '../../../static/icons/clock.svg';\nimport { DateTime } from '../../DateTime';\n\ntype Props = {\n\tabsoluteServerTimes: boolean;\n\twebPublication: {\n\t\tdate: string;\n\t\tisWithinTwelveHours: boolean;\n\t};\n\tshowClock?: boolean;\n\tisTagPage: boolean;\n\tcolour?: string;\n};\n\nconst ageStyles = (colour: string) => {\n\treturn css`\n\t\t${textSansBold12};\n\n\t\tcolor: ${colour};\n\n\t\tmargin-top: -4px;\n\n\t\tsvg {\n\t\t\tfill: ${colour};\n\t\t\tmargin-bottom: -1px;\n\t\t\theight: 11px;\n\t\t\twidth: 11px;\n\t\t\tmargin-right: 2px;\n\t\t}\n\t`;\n};\n\nexport const CardAge = ({\n\twebPublication,\n\tshowClock,\n\tabsoluteServerTimes,\n\tisTagPage,\n\tcolour = palette('--card-footer-text'),\n}: Props) => {\n\tif (timeAgo(new Date(webPublication.date).getTime()) === false) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<span css={ageStyles(colour)}>\n\t\t\t{showClock && <ClockIcon />}\n\t\t\t{isTagPage ? (\n\t\t\t\t<DateTime\n\t\t\t\t\tdate={new Date(webPublication.date)}\n\t\t\t\t\tdisplay={'absolute'}\n\t\t\t\t\tshowWeekday={false}\n\t\t\t\t\tshowDate={!webPublication.isWithinTwelveHours}\n\t\t\t\t\tshowTime={true}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<DateTime\n\t\t\t\t\tdate={new Date(webPublication.date)}\n\t\t\t\t\tdisplay={'relative'}\n\t\t\t\t\tabsoluteServerTimes={absoluteServerTimes}\n\t\t\t\t\tshowWeekday={false}\n\t\t\t\t\tshowDate={true}\n\t\t\t\t\tshowTime={false}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</span>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { palette, space, textSansBold12 } from '@guardian/source/foundations';\nimport { type ArticleFormat, ArticleSpecial } from '../../../lib/articleFormat';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tage?: JSX.Element;\n\tcommentCount?: JSX.Element;\n\tcardBranding?: JSX.Element;\n\tshowLivePlayable?: boolean;\n};\n\nconst contentStyles = css`\n\tmargin-top: auto;\n\tpadding-top: ${space[1]}px;\n\tdisplay: flex;\n\tjustify-content: 'flex-start';\n\talign-items: center;\n\t${textSansBold12}\n\t> {\n\t\t/* The dividing line is applied only to the second child. This ensures that no dividing line is added when there is only one child in the container. */\n\t\t:nth-child(2) {\n\t\t\t::before {\n\t\t\t\tcontent: '';\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: 1px;\n\t\t\t\theight: 12px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tbackground-color: ${palette.neutral[60]};\n\t\t\t\tmargin-right: ${space[1]}px;\n\t\t\t}\n\t\t\tmargin-left: ${space[1]}px;\n\t\t\tpadding-left: ${space[1]}px;\n\t\t}\n\t}\n`;\n\nconst labStyles = css`\n\tmargin-top: ${space[1]}px;\n`;\n\nexport const CardFooter = ({\n\tformat,\n\tage,\n\tcommentCount,\n\tcardBranding,\n\tshowLivePlayable = false,\n}: Props) => {\n\tif (showLivePlayable) return null;\n\n\tif (format.theme === ArticleSpecial.Labs && cardBranding) {\n\t\treturn <footer css={labStyles}>{cardBranding}</footer>;\n\t}\n\n\treturn (\n\t\t<footer css={contentStyles}>\n\t\t\t{age}\n\t\t\t{commentCount}\n\t\t</footer>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { focusHalo } from '@guardian/source/foundations';\nimport { getZIndex } from '../../../lib/getZIndex';\n\nconst fauxLinkStyles = css`\n\tposition: absolute;\n\tz-index: ${getZIndex('card-link')};\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\tbackground-color: transparent;\n\n\t:focus {\n\t\t${focusHalo};\n\t}\n`;\n\ntype Props = {\n\tlinkTo: string;\n\theadlineText: string;\n\tdataLinkName?: string;\n\tisExternalLink: boolean;\n};\n\nconst InternalLink = ({\n\tlinkTo,\n\theadlineText,\n\tdataLinkName,\n}: {\n\tlinkTo: string;\n\theadlineText: string;\n\tdataLinkName?: string;\n}) => {\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content -- we have an aria-label attribute describing the content\n\t\t<a\n\t\t\thref={linkTo}\n\t\t\tcss={fauxLinkStyles}\n\t\t\tdata-link-name={dataLinkName}\n\t\t\taria-label={headlineText}\n\t\t/>\n\t);\n};\n\nconst ExternalLink = ({\n\tlinkTo,\n\theadlineText,\n\tdataLinkName,\n}: {\n\tlinkTo: string;\n\theadlineText: string;\n\tdataLinkName?: string;\n}) => {\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content -- we have an aria-label attribute describing the content\n\t\t<a\n\t\t\thref={linkTo}\n\t\t\tcss={fauxLinkStyles}\n\t\t\tdata-link-name={dataLinkName}\n\t\t\taria-label={headlineText + ' (opens in new tab)'}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noreferrer\"\n\t\t/>\n\t);\n};\n\nexport const CardLink = ({\n\tlinkTo,\n\theadlineText,\n\tdataLinkName = 'article', //this makes sense if the link is to an article, but should this say something like \"external\" if it's an external link? are there any other uses/alternatives?\n\tisExternalLink,\n}: Props) => {\n\treturn (\n\t\t<>\n\t\t\t{isExternalLink && (\n\t\t\t\t<ExternalLink\n\t\t\t\t\tlinkTo={linkTo}\n\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\tdataLinkName={dataLinkName}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{!isExternalLink && (\n\t\t\t\t<InternalLink\n\t\t\t\t\tlinkTo={linkTo}\n\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\tdataLinkName={dataLinkName}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\tspace,\n\ttextSans14,\n\ttextSans17,\n} from '@guardian/source/foundations';\nimport { Hide } from '@guardian/source/react-components';\nimport { palette } from '../../../palette';\n\nexport type TrailTextSize = 'regular' | 'large';\n\ntype Props = {\n\ttrailText: string;\n\ttrailTextSize?: TrailTextSize;\n\t/** Optionally overrides the trail text colour */\n\ttrailTextColour?: string;\n\t/** Controls visibility of trail text on various breakpoints */\n\thideUntil?: 'tablet' | 'desktop';\n\t/** Defaults to `true`. Adds padding to the bottom of the trail text */\n\tpadBottom?: boolean;\n\t/** Adds padding to the top of the trail text */\n\tpadTop?: boolean;\n};\n\nconst trailTextStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst bottomPadding = css`\n\tpadding-bottom: ${space[2]}px;\n`;\n\nconst topPadding = css`\n\tpadding-top: ${space[2]}px;\n`;\n\nconst fontStyles = (trailTextSize: TrailTextSize) => css`\n\t${textSans14}\n\t${from.desktop} {\n\t\t${trailTextSize === 'large' && textSans17}\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\n\nexport const TrailText = ({\n\ttrailText: text,\n\ttrailTextSize = 'regular',\n\ttrailTextColour = palette('--card-trail-text'),\n\thideUntil,\n\tpadBottom = true,\n\tpadTop = false,\n}: Props) => {\n\tconst trailText = (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\ttrailTextStyles,\n\t\t\t\tcss`\n\t\t\t\t\tcolor: ${trailTextColour};\n\t\t\t\t`,\n\t\t\t\tfontStyles(trailTextSize),\n\t\t\t\tpadBottom && bottomPadding,\n\t\t\t\tpadTop && topPadding,\n\t\t\t]}\n\t\t>\n\t\t\t<div\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: text,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n\treturn hideUntil ? (\n\t\t<Hide until={hideUntil}>{trailText}</Hide>\n\t) : (\n\t\t<>{trailText}</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport {\n\tbetween,\n\ttextSansBold12,\n\tvisuallyHidden,\n} from '@guardian/source/foundations';\nimport { formatCount } from '../lib/formatCount';\nimport { useCommentCount } from '../lib/useCommentCount';\nimport { palette as themePalette } from '../palette';\nimport CommentIcon from '../static/icons/comment.svg';\nimport type { DCRContainerPalette } from '../types/front';\nimport { ContainerOverrides } from './ContainerOverrides';\n\ntype Props = {\n\tcontainerPalette?: DCRContainerPalette;\n\tdiscussionApiUrl: string;\n\tdiscussionId: string;\n\tisDynamo?: true;\n\t/** Optional override of default comment count colour */\n\tcolour?: string;\n};\n\nconst containerStyles = (colour: string) => css`\n\tdisplay: flex;\n\tflex-direction: row;\n\t${textSansBold12};\n\t/**\n\t * Typography preset styles should not be overridden.\n\t * This has been done because the styles do not directly map to the new presets.\n\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t */\n\tline-height: 1.15;\n\tmargin-top: -4px;\n\tcolor: ${colour};\n`;\n\nconst svgStyles = (colour: string) => css`\n\tsvg {\n\t\tmargin-bottom: -5px;\n\t\theight: 14px;\n\t\twidth: 14px;\n\t\tmargin-right: 2px;\n\t\tfill: ${colour};\n\t}\n`;\n\nconst longStyles = css`\n\tdisplay: block;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst shortStyles = css`\n\tdisplay: none;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: block;\n\t}\n`;\n\nexport const CardCommentCount = ({\n\tcontainerPalette,\n\tdiscussionApiUrl,\n\tdiscussionId,\n\tisDynamo,\n\tcolour = themePalette('--card-footer-text'),\n}: Props) => {\n\tconst count = useCommentCount(discussionApiUrl, discussionId);\n\n\tconst { long, short } = formatCount(count);\n\n\tconst getCommentCountColour = (): string => {\n\t\tif (isDynamo) {\n\t\t\treturn themePalette('--card-trail-text');\n\t\t} else {\n\t\t\treturn colour;\n\t\t}\n\t};\n\n\treturn (\n\t\t<ContainerOverrides containerPalette={containerPalette}>\n\t\t\t<div css={containerStyles(getCommentCountColour())}>\n\t\t\t\t<div css={svgStyles(getCommentCountColour())}>\n\t\t\t\t\t<CommentIcon />\n\t\t\t\t</div>\n\t\t\t\t<div css={longStyles}>{long}</div>\n\t\t\t\t<div css={shortStyles} aria-hidden=\"true\">\n\t\t\t\t\t{short}\n\t\t\t\t</div>\n\t\t\t\t<span\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${visuallyHidden}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{' '}\n\t\t\t\t\tcomments\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</ContainerOverrides>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { breakpoints, space } from '@guardian/source/foundations';\nimport type { ImgHTMLAttributes } from 'react';\nimport React from 'react';\nimport type { AspectRatio } from '../types/front';\nimport type { ImageSizeType } from './Card/components/ImageWrapper';\nimport type { ImageWidthType } from './Picture';\nimport { generateSources, getFallbackSource } from './Picture';\n\nexport type Loading = NonNullable<ImgHTMLAttributes<unknown>['loading']>;\n\ntype Props = {\n\timageSize: ImageSizeType;\n\tmainImage: string;\n\tloading: Loading;\n\talt?: string;\n\troundedCorners?: boolean;\n\tisCircular?: boolean;\n\taspectRatio?: AspectRatio;\n};\n\n/**\n * **WIP – Some size may be unaccounted for**\n *\n * Currently, this only handles the five (5) image sizes of `ImageSizeType`.\n *\n * This method should cover all use cases with a lot more precision once\n * implemented thoroughly\n */\nconst decideImageWidths = (\n\timageSize: ImageSizeType,\n): [ImageWidthType, ...ImageWidthType[]] => {\n\tswitch (imageSize) {\n\t\t// @TODO missing image size option\n\t\t// case 'tiny':\n\t\t// \treturn [\n\t\t// \t\t{ breakpoint: breakpoints.mobile, width: 120 },\n\t\t// \t\t{ breakpoint: breakpoints.tablet, width: 130 },\n\t\t// \t\t{ breakpoint: breakpoints.desktop, width: 140 },\n\t\t// \t];\n\n\t\tcase 'carousel':\n\t\t\treturn [{ breakpoint: breakpoints.mobile, width: 220 }];\n\n\t\tcase 'small':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 120 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 160 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 220 },\n\t\t\t];\n\n\t\tcase 'medium':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 240 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 330 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 460 },\n\t\t\t];\n\n\t\tcase 'large':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 360 },\n\t\t\t\t{ breakpoint: breakpoints.mobileLandscape, width: 480 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 500 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 700 },\n\t\t\t];\n\n\t\tcase 'jumbo':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 360 },\n\t\t\t\t{ breakpoint: breakpoints.mobileLandscape, width: 480 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 680 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 940 },\n\t\t\t];\n\n\t\tcase 'feature':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 325 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 220 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 300 },\n\t\t\t];\n\t\tcase 'feature-large':\n\t\t\treturn [\n\t\t\t\t{ breakpoint: breakpoints.mobile, width: 325 },\n\t\t\t\t{ breakpoint: breakpoints.tablet, width: 337 },\n\t\t\t\t{ breakpoint: breakpoints.desktop, width: 460 },\n\t\t\t];\n\t}\n};\n\n/**\n * Used on `picture` and `img` to prevent having a line-height,\n * as these elements are which are `inline` by default.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#styling_with_css\n *\n */\nconst block = css`\n\tdisplay: block;\n`;\n\nconst getAspectRatioPadding = (aspectRatio?: AspectRatio): string => {\n\tswitch (aspectRatio) {\n\t\tcase '5:4':\n\t\t\treturn '80%';\n\t\tcase '4:5':\n\t\t\treturn '125%';\n\t\tcase '1:1':\n\t\t\treturn '100%';\n\t\tcase '5:3':\n\t\tdefault:\n\t\t\treturn '60%';\n\t}\n};\n/**\n * On fronts, Fairground cards have an image ration of 5:4.\n * This is due to replace the existing card ratio of 5:3\n * For now, we are keeping both ratios.\n */\nconst decideAspectRatioStyles = (aspectRatio?: AspectRatio) => {\n\tconst paddingRatio = getAspectRatioPadding(aspectRatio);\n\treturn css`\n\t\tpadding-top: ${paddingRatio};\n\t\tposition: relative;\n\t\t& > * {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t`;\n};\n\nconst borderRadius = css`\n\t& > * {\n\t\tborder-radius: ${space[2]}px;\n\t}\n`;\n\nconst circularStyles = css`\n\tborder-radius: 100%;\n\tobject-fit: cover;\n\theight: 100%;\n\twidth: 100%;\n`;\n\nexport const CardPicture = ({\n\tmainImage,\n\talt,\n\timageSize,\n\tloading,\n\troundedCorners,\n\tisCircular,\n\taspectRatio,\n}: Props) => {\n\tconst sources = generateSources(\n\t\tmainImage,\n\t\tdecideImageWidths(imageSize),\n\t\taspectRatio,\n\t);\n\n\tconst fallbackSource = getFallbackSource(sources);\n\n\treturn (\n\t\t<picture\n\t\t\tdata-size={imageSize}\n\t\t\tcss={[\n\t\t\t\tblock,\n\t\t\t\tdecideAspectRatioStyles(aspectRatio),\n\t\t\t\troundedCorners && borderRadius,\n\t\t\t\tisCircular && circularStyles,\n\t\t\t]}\n\t\t>\n\t\t\t{sources.map((source) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={source.breakpoint}>\n\t\t\t\t\t\t{/* High resolution (HDPI) sources*/}\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={source.hiResUrl}\n\t\t\t\t\t\t\tmedia={`(min-width: ${source.breakpoint}px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: ${source.breakpoint}px) and (min-resolution: 120dpi)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/* Low resolution (MDPI) source*/}\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={source.lowResUrl}\n\t\t\t\t\t\t\tmedia={`(min-width: ${source.breakpoint}px)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t<img\n\t\t\t\talt={alt ?? ''}\n\t\t\t\tsrc={fallbackSource.lowResUrl}\n\t\t\t\tcss={[block, isCircular && circularStyles]}\n\t\t\t\tloading={loading}\n\t\t\t\tdata-chromatic=\"ignore\"\n\t\t\t/>\n\t\t</picture>\n\t);\n};\n","import { isString } from '@guardian/libs';\nimport { getEditionFromId } from '../lib/edition';\nimport { useConfig } from './ConfigContext';\nimport { Island } from './Island';\nimport { RelativeTime } from './RelativeTime.importable';\n\ntype Props = {\n\tdate: Date;\n\tshowWeekday: boolean;\n\tshowDate: boolean;\n\tshowTime: boolean;\n};\n\ntype DisplayProps =\n\t| {\n\t\t\tdisplay?: 'absolute';\n\t\t\tabsoluteServerTimes?: never;\n\t  }\n\t| {\n\t\t\tdisplay: 'relative';\n\t\t\tabsoluteServerTimes: boolean;\n\t  };\n\nconst formatWeekday = (date: Date, locale: string, timeZone: string) =>\n\tdate.toLocaleDateString(locale, {\n\t\tweekday: 'short',\n\t\ttimeZone,\n\t});\n\nconst formatDate = (date: Date, locale: string, timeZone: string) =>\n\tdate\n\t\t.toLocaleDateString(locale, {\n\t\t\tday: 'numeric',\n\t\t\tmonth: 'short',\n\t\t\tyear: 'numeric',\n\t\t\ttimeZone,\n\t\t})\n\t\t.replaceAll(',', '');\n\nconst formatTime = (date: Date, locale: string, timeZone: string) =>\n\tdate\n\t\t.toLocaleTimeString(locale, {\n\t\t\thour12: false,\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\ttimeZoneName: 'short',\n\t\t\ttimeZone,\n\t\t})\n\t\t.replace(':', '.');\n\nconst ONE_MINUTE = 60_000;\n/** https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#the_epoch_timestamps_and_invalid_date */\nconst MAX_DATE = 8.64e15;\n/** Rounded down to the previous minute, to ensure relative times rarely go backwards */\nconst getServerTime = () => Math.floor(Date.now() / ONE_MINUTE) * ONE_MINUTE;\n\nexport const DateTime = ({\n\tdate,\n\tshowWeekday,\n\tshowDate,\n\tshowTime,\n\tdisplay = 'absolute',\n\tabsoluteServerTimes = true,\n}: Props & DisplayProps) => {\n\tconst { editionId } = useConfig();\n\tconst { dateLocale, timeZone } = getEditionFromId(editionId);\n\n\tconst then = date.getTime();\n\n\treturn display === 'relative' ? (\n\t\t<Island priority=\"enhancement\" defer={{ until: 'visible' }}>\n\t\t\t<RelativeTime\n\t\t\t\tthen={then}\n\t\t\t\tnow={absoluteServerTimes ? MAX_DATE : getServerTime()}\n\t\t\t\teditionId={editionId}\n\t\t\t/>\n\t\t</Island>\n\t) : (\n\t\t<time\n\t\t\tdateTime={date.toISOString()}\n\t\t\tdata-locale={dateLocale}\n\t\t\ttitle={date.toLocaleDateString(dateLocale, {\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t\tweekday: 'long',\n\t\t\t\tyear: 'numeric',\n\t\t\t\tmonth: 'long',\n\t\t\t\tday: 'numeric',\n\t\t\t\ttimeZoneName: 'long',\n\t\t\t\ttimeZone,\n\t\t\t})}\n\t\t>\n\t\t\t{[\n\t\t\t\tshowWeekday && formatWeekday(date, dateLocale, timeZone),\n\t\t\t\tshowDate && formatDate(date, dateLocale, timeZone),\n\t\t\t\tshowTime && formatTime(date, dateLocale, timeZone),\n\t\t\t]\n\t\t\t\t.filter(isString)\n\t\t\t\t.join(' ')}\n\t\t</time>\n\t);\n};\n","import { isString, timeAgo } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { type EditionId, getEditionFromId } from '../lib/edition';\nimport { useIsInView } from '../lib/useIsInView';\n\ntype Props = {\n\t/** the time to compare with in milliseconds since epoch */\n\tthen: number;\n\t/** the time to compare to */\n\tnow: number;\n\teditionId: EditionId;\n};\n\nconst ONE_MINUTE = 60_000;\n/** Get the duration between two timestamp, with arbitrary precision */\nconst getDuration = ({\n\tthen,\n\tnow,\n\tprecision,\n}: {\n\tthen: number;\n\tnow: number;\n\tprecision: number;\n}) => Math.floor((now - then) / precision) * precision;\n\n/**\n * Wrapper around `timeAgo` which:\n * - handles dates in the future with “now”\n * - always returns a `string`\n * - floors `now` to the nearest minute in the client\n */\nconst relativeTime = (\n\tthen: number,\n\tnow: number,\n\tenvironment: 'server' | 'client',\n): string => {\n\tconst time = timeAgo(then, {\n\t\tnow:\n\t\t\tenvironment === 'server'\n\t\t\t\t? now\n\t\t\t\t: then +\n\t\t\t\t  getDuration({\n\t\t\t\t\t\tthen,\n\t\t\t\t\t\tnow: Date.now(),\n\t\t\t\t\t\tprecision: ONE_MINUTE,\n\t\t\t\t  }),\n\t});\n\n\treturn isString(time) ? time : 'now';\n};\n\n/**\n * Shows a recent time as relative, such as “3h ago”\n *\n * ## Why does this need to be an Island?\n *\n * We update the relative time on the browser on an interval.\n */\nexport const RelativeTime = ({ then, now, editionId }: Props) => {\n\tconst [inView, ref] = useIsInView({ repeat: true });\n\tconst [display, setDisplay] = useState(relativeTime(then, now, 'server'));\n\n\tuseEffect(() => {\n\t\tconst updateDisplay = () =>\n\t\t\tsetDisplay(relativeTime(then, now, 'client'));\n\t\tupdateDisplay();\n\t\tif (!inView) return;\n\t\tconst interval = setInterval(updateDisplay, ONE_MINUTE);\n\t\treturn () => clearInterval(interval);\n\t}, [inView, now, then]);\n\n\tconst date = new Date(then);\n\tconst { dateLocale, timeZone } = getEditionFromId(editionId);\n\n\treturn (\n\t\t<time\n\t\t\tref={ref}\n\t\t\tdateTime={date.toISOString()}\n\t\t\tdata-locale={dateLocale}\n\t\t\ttitle={date.toLocaleDateString(dateLocale, {\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t\tweekday: 'long',\n\t\t\t\tyear: 'numeric',\n\t\t\t\tmonth: 'long',\n\t\t\t\tday: 'numeric',\n\t\t\t\ttimeZoneName: 'long',\n\t\t\t\ttimeZone,\n\t\t\t})}\n\t\t>\n\t\t\t{display}\n\t\t</time>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { SvgStar, SvgStarOutline } from '@guardian/source/react-components';\nimport type { StarRating as Rating, RatingSizeType } from '../../types/content';\n\nconst padding = css`\n\tpadding: 0 2px;\n`;\n\nconst determineSize = (size: RatingSizeType) => {\n\tswitch (size) {\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\tsvg {\n\t\t\t\t\twidth: 1.3em;\n\t\t\t\t\theight: 1.3em;\n\t\t\t\t\tmargin: 0 -1px -2px;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\tsvg {\n\t\t\t\t\twidth: 1.6em;\n\t\t\t\t\theight: 1.6em;\n\t\t\t\t\tmargin: 0 -2px -2px;\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\ntype Props = {\n\trating: Rating;\n\tsize: RatingSizeType;\n};\n\nexport const StarRating = ({ rating, size }: Props) => (\n\t<div css={[determineSize(size), padding]}>\n\t\t{Array.from({ length: 5 }, (_, i) =>\n\t\t\ti < rating ? <SvgStar key={i} /> : <SvgStarOutline key={i} />,\n\t\t)}\n\t</div>\n);\n","import { css } from '@emotion/react';\nimport { from, space, until } from '@guardian/source/foundations';\nimport { ArticleDesign } from '../lib/articleFormat';\nimport { isMediaCard } from '../lib/cardHelpers';\nimport { palette } from '../palette';\nimport type { DCRContainerPalette, DCRSupportingContent } from '../types/front';\nimport { CardHeadline } from './CardHeadline';\nimport { ContainerOverrides } from './ContainerOverrides';\nimport { FormatBoundary } from './FormatBoundary';\n\nexport type Alignment = 'vertical' | 'horizontal';\n\ntype Props = {\n\tsupportingContent: DCRSupportingContent[];\n\t/** Determines if the content is arranged vertically or horizontally */\n\talignment: Alignment;\n\tcontainerPalette?: DCRContainerPalette;\n\tisDynamo?: boolean;\n\t/** Allows sublinks container to have a background colour on mobile screen sizes */\n\tfillBackgroundOnMobile?: boolean;\n\t/** Allows sublinks container to have a background colour on desktop screen sizes */\n\tfillBackgroundOnDesktop?: boolean;\n};\n\n/**\n * Returns the column span for the grid layout based on the number of supporting content items.\n *\n * @param {number} contentLength - The number of supporting content items.\n * @returns {number} The column span to use in the grid layout.\n */\nconst getColumnSpan = (contentLength: number): number => {\n\tswitch (contentLength) {\n\t\tcase 1:\n\t\tcase 2:\n\t\t\treturn 6;\n\t\tcase 3:\n\t\t\treturn 4;\n\t\tcase 4:\n\t\tdefault:\n\t\t\treturn 3; // Default column span for 4 or more items\n\t}\n};\nconst baseGrid = css`\n\tdisplay: grid;\n\tgrid-template-rows: auto;\n\tgrid-template-columns: auto;\n\trow-gap: ${space[2]}px;\n`;\n\nconst horizontalGrid = css`\n\t${from.tablet} {\n\t\tgrid-template-columns: repeat(12, 1fr);\n\t\tcolumn-gap: ${space[5]}px;\n\t}\n`;\n\nconst horizontalLineStyle = css`\n\tmargin-top: ${space[3]}px;\n\t:before {\n\t\tposition: absolute;\n\t\ttop: -${space[2]}px;\n\t\tleft: 0;\n\t\tcontent: '';\n\t\tborder-top: 1px solid ${palette('--card-border-top')};\n\t\theight: 1px;\n\t\twidth: 50%;\n\t\t${from.tablet} {\n\t\t\twidth: 100px;\n\t\t}\n\t\t${from.desktop} {\n\t\t\twidth: 140px;\n\t\t}\n\t}\n`;\n\nconst verticalLineStyle = css`\n\t/* The last child doesn't need a dividing right line */\n\t:not(:last-child):after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: -10px; /* Half of the column-gap to center the line */\n\t\theight: 100%;\n\t\twidth: 1px;\n\t\tbackground-color: ${palette('--card-border-supporting')};\n\t}\n`;\n\nconst sublinkBaseStyles = css`\n\tposition: relative;\n\tgrid-row: span 1;\n`;\n\nconst verticalSublinkStyles = css`\n\t:not(:first-child) {\n\t\t${horizontalLineStyle}\n\t}\n\n\t${from.tablet} {\n\t\t:first-child {\n\t\t\t${horizontalLineStyle}\n\t\t}\n\t}\n`;\n\nconst horizontalSublinkStyles = (totalColumns: number) => css`\n\tgrid-column: span ${totalColumns};\n\t${until.tablet} {\n\t\t:not(:first-child) {\n\t\t\t${horizontalLineStyle}\n\t\t}\n\t}\n\n\t${from.tablet} {\n\t\t${verticalLineStyle}\n\t}\n`;\n\nconst wrapperStyles = css`\n\tposition: relative;\n\tpadding-top: ${space[2]}px;\n\t@media (pointer: coarse) {\n\t\tpadding-bottom: 0;\n\t}\n`;\n\nconst backgroundFillMobile = css`\n\t${until.tablet} {\n\t\tpadding: ${space[2]}px;\n\t\tpadding-bottom: ${space[3]}px;\n\t\tbackground-color: ${palette('--card-sublinks-background')};\n\t}\n`;\n\nconst backgroundFillDesktop = css`\n\t${from.tablet} {\n\t\tpadding: ${space[2]}px;\n\t\tpadding-bottom: ${space[3]}px;\n\t\tbackground-color: ${palette('--card-sublinks-background')};\n\t}\n`;\n\nexport const SupportingContent = ({\n\tsupportingContent,\n\talignment,\n\tcontainerPalette,\n\tisDynamo,\n\tfillBackgroundOnMobile = false,\n\tfillBackgroundOnDesktop = false,\n}: Props) => {\n\tconst columnSpan = getColumnSpan(supportingContent.length);\n\treturn (\n\t\t<ul\n\t\t\tclassName=\"sublinks\"\n\t\t\tcss={[\n\t\t\t\twrapperStyles,\n\t\t\t\tbaseGrid,\n\t\t\t\t(isDynamo ?? alignment === 'horizontal') && horizontalGrid,\n\t\t\t\tfillBackgroundOnMobile && backgroundFillMobile,\n\t\t\t\tfillBackgroundOnDesktop && backgroundFillDesktop,\n\t\t\t]}\n\t\t>\n\t\t\t{supportingContent.map((subLink, index) => {\n\t\t\t\t// The model has this property as optional but it is very likely\n\t\t\t\t// to exist\n\t\t\t\tif (!subLink.headline) return null;\n\n\t\t\t\t/** Force the format design to be Standard if sublink format\n\t\t\t\t * is not compatible with transparent backgrounds */\n\t\t\t\tconst subLinkFormat = {\n\t\t\t\t\t...subLink.format,\n\t\t\t\t\tdesign: isMediaCard(subLink.format)\n\t\t\t\t\t\t? ArticleDesign.Standard\n\t\t\t\t\t\t: subLink.format.design,\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={subLink.url}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tsublinkBaseStyles,\n\t\t\t\t\t\t\tisDynamo ?? alignment === 'horizontal'\n\t\t\t\t\t\t\t\t? horizontalSublinkStyles(columnSpan)\n\t\t\t\t\t\t\t\t: verticalSublinkStyles,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tdata-link-name={`sublinks | ${index + 1}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormatBoundary format={subLinkFormat}>\n\t\t\t\t\t\t\t<ContainerOverrides\n\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\t\t\t\tformat={subLinkFormat}\n\t\t\t\t\t\t\t\t\thasInlineKicker={true}\n\t\t\t\t\t\t\t\t\tlinkTo={subLink.url}\n\t\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\t\tsubLink.format.design ===\n\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\theadlineText={subLink.headline}\n\t\t\t\t\t\t\t\t\tkickerText={subLink.kickerText}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ContainerOverrides>\n\t\t\t\t\t\t</FormatBoundary>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n};\n","import type { DCRContainerPalette } from '../types/front';\nimport { ArticleDesign, type ArticleFormat } from './articleFormat';\n\nexport const isMediaCard = (format: ArticleFormat): boolean => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video: {\n\t\t\treturn true;\n\t\t}\n\t\tdefault: {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nexport const cardHasDarkBackground = (\n\tformat: ArticleFormat,\n\tcontainerPalette?: DCRContainerPalette,\n): boolean => {\n\tswitch (containerPalette) {\n\t\t// Special palettes with dark background colours on containers\n\t\tcase 'BreakingPalette':\n\t\tcase 'SombrePalette':\n\t\tcase 'InvestigationPalette':\n\t\tcase 'SombreAltPalette':\n\t\t\treturn true;\n\n\t\t// Special palettes with light background colours on containers\n\t\tcase 'Branded':\n\t\tcase 'EventAltPalette':\n\t\tcase 'EventPalette':\n\t\tcase 'LongRunningAltPalette':\n\t\tcase 'LongRunningPalette':\n\t\tcase 'SpecialReportAltPalette':\n\t\t\treturn false;\n\n\t\t// Special palettes which act more like standard containers\n\t\tcase 'MediaPalette':\n\t\tcase 'PodcastPalette':\n\t\t// If no containerPalette provided, card is in a standard container\n\t\tcase undefined: {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n","import { isOneOf } from '@guardian/libs';\nimport { isTuple } from './tuple';\n\ntype EditionId = 'UK' | 'US' | 'AU' | 'INT' | 'EUR';\n\ntype Edition = (typeof editionList)[number];\n\nconst editionList = [\n\t{\n\t\turl: '/preference/edition/uk',\n\t\teditionId: 'UK',\n\t\tpageId: 'uk',\n\t\tlongTitle: 'UK edition',\n\t\ttitle: 'UK edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/London',\n\t\tlangLocale: 'en-GB',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'UK',\n\t},\n\t{\n\t\turl: '/preference/edition/us',\n\t\teditionId: 'US',\n\t\tpageId: 'us',\n\t\tlongTitle: 'US edition',\n\t\ttitle: 'US edition',\n\t\tdateLocale: 'en-us',\n\t\ttimeZone: 'America/New_York',\n\t\tlangLocale: 'en-US',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'US',\n\t},\n\t{\n\t\turl: '/preference/edition/au',\n\t\teditionId: 'AU',\n\t\tpageId: 'au',\n\t\tlongTitle: 'Australia edition',\n\t\ttitle: 'AU edition',\n\t\tdateLocale: 'en-au',\n\t\ttimeZone: 'Australia/Sydney',\n\t\tlangLocale: 'en-AU',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'Aus',\n\t},\n\t{\n\t\turl: '/preference/edition/eur',\n\t\teditionId: 'EUR',\n\t\tpageId: 'europe',\n\t\tlongTitle: 'Europe edition',\n\t\ttitle: 'Europe edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/Paris',\n\t\tlangLocale: 'en-EU',\n\t\thasEditionalisedPages: false,\n\t\tshortTitle: 'Eur',\n\t},\n\t{\n\t\turl: '/preference/edition/int',\n\t\teditionId: 'INT',\n\t\tpageId: 'international',\n\t\tlongTitle: 'International edition',\n\t\ttitle: 'International edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/London',\n\t\tlangLocale: 'en',\n\t\thasEditionalisedPages: false,\n\t\tshortTitle: 'Int',\n\t},\n] as const satisfies ReadonlyArray<{\n\turl: string;\n\teditionId: EditionId;\n\tpageId: string;\n\tlongTitle: string;\n\ttitle: string;\n\tdateLocale: string;\n\ttimeZone: string;\n\tlangLocale?: string;\n\thasEditionalisedPages: boolean;\n\tshortTitle: string;\n}>;\n\nconst [ukEdition] = editionList;\n\n/**\n * The list of editionalised pages was copied from Frontend:\n * https://github.com/guardian/frontend/blob/60c6b55944d52d87039a2a844665cf39dc7fe437/common/app/common/Edition.scala#L20-L35\n */\nconst editionalisedPages = [\n\t'business',\n\t'business-to-business',\n\t'commentisfree',\n\t'culture',\n\t'money',\n\t'sport',\n\t'technology',\n\t'media',\n\t'environment',\n\t'film',\n\t'lifeandstyle',\n\t'travel',\n\t'tv-and-radio',\n] as const;\n\nconst getEditionFromId = (editionId: EditionId): Edition => {\n\treturn (\n\t\teditionList.find((edition) => edition.editionId === editionId) ??\n\t\tukEdition\n\t);\n};\n\nconst getEditionFromPageId = (pageId: string): Edition | undefined =>\n\teditionList.find((edition) => edition.pageId === pageId);\n\nconst getRemainingEditions = (editionId: EditionId): Edition[] => {\n\treturn editionList.filter((edition) => edition.editionId !== editionId);\n};\n\n/**\n * Determine if a string is one of the permitted edition strings\n *\n * @param s The string to test\n */\nconst isEditionId = isOneOf(editionList.map(({ editionId }) => editionId));\n\nconst isNetworkFront = (pageId: string): boolean =>\n\teditionList.some((edition) => edition.pageId === pageId);\n\n/**\n * Given an editionalised pageId such as 'uk/travel' split into ['uk', 'travel']\n * Checks:\n * a) the first section is a network front\n * b) the second section is an editionalised page\n */\nconst splitEditionalisedPage = (\n\tpageId: string,\n): undefined | [string, string] => {\n\tconst pageIdSplit = pageId.split('/');\n\tif (!isTuple(pageIdSplit, 2)) {\n\t\treturn undefined;\n\t}\n\tconst [networkId, pageIdSuffix] = pageIdSplit;\n\tif (!isNetworkFront(networkId)) {\n\t\treturn undefined;\n\t}\n\tconst hasMatch = editionalisedPages.some(\n\t\t(editionalisedPage) => editionalisedPage === pageIdSuffix,\n\t);\n\treturn hasMatch ? [networkId, pageIdSuffix] : undefined;\n};\n\nconst isEditionalisedPage = (pageId: string): boolean =>\n\t!!splitEditionalisedPage(pageId);\n\nexport {\n\tEditionId,\n\tEdition,\n\teditionList,\n\teditionalisedPages,\n\tgetEditionFromId,\n\tgetEditionFromPageId,\n\tgetRemainingEditions,\n\tisEditionId,\n\tisEditionalisedPage,\n\tisNetworkFront,\n\tsplitEditionalisedPage,\n};\n","import { isUndefined } from '@guardian/libs';\n\nexport const formatCount = (\n\tcount?: number,\n): { short: string; long: string } => {\n\tif (isUndefined(count)) return { short: '…', long: '…' };\n\tif (count === 0) return { short: '0', long: '0' };\n\n\tconst countAsInteger = Math.floor(count);\n\tconst displayCountLong = Intl.NumberFormat('en-GB').format(countAsInteger);\n\tconst displayCountShort =\n\t\tcountAsInteger > 10000\n\t\t\t? `${Math.round(countAsInteger / 1000)}k`\n\t\t\t: countAsInteger.toString();\n\n\treturn {\n\t\tshort: displayCountShort,\n\t\tlong: displayCountLong,\n\t};\n};\n","import { isNonNullable, isObject } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { useApi } from './useApi';\n\n/**\n * **Build an initial set of discussions**\n *\n * Setting this attribute helps build an initial set of discussion IDs.\n * Without it, there is a risk that each new usage of `useCommentCount`\n * leads to a distinct request to the discussion API\n */\nexport const DISCUSSION_ID_DATA_ATTRIBUTE = 'data-discussion-id';\n\n/**\n * We only want to create this set on a client, never on the server\n */\nlet uniqueDiscussionIds: Set<string> | undefined;\n\n/**\n * Create an initial set of IDs by reading what is in the DOM\n */\nconst getInitialIds = () =>\n\t[...document.querySelectorAll(`[${DISCUSSION_ID_DATA_ATTRIBUTE}]`)]\n\t\t.map((element) => element.getAttribute(DISCUSSION_ID_DATA_ATTRIBUTE))\n\t\t.filter(isNonNullable);\n\nexport const useCommentCount = (\n\tdiscussionApiUrl: string,\n\tshortUrl: string,\n): number | undefined => {\n\t// A falsy value prevents fetching: https://swr.vercel.app/docs/conditional-fetching#conditional\n\tconst [url, setUrl] = useState<string>();\n\n\tuseEffect(() => {\n\t\tuniqueDiscussionIds ??= new Set(getInitialIds());\n\t\tuniqueDiscussionIds.add(shortUrl);\n\n\t\tconst getCommentCountUrl = `${discussionApiUrl}/getCommentCounts?${new URLSearchParams(\n\t\t\t{\n\t\t\t\t'short-urls': [...uniqueDiscussionIds]\n\t\t\t\t\t.sort() // ensures identical sets produce the same query parameter\n\t\t\t\t\t.join(','),\n\t\t\t},\n\t\t).toString()}`;\n\n\t\tsetUrl(getCommentCountUrl);\n\t}, [discussionApiUrl, shortUrl]);\n\n\tconst { data } = useApi(url);\n\n\t/**\n\t * As per the endpoint, but let’s parse it\n\t * @see https://github.com/guardian/discussion-api/blob/73e805641f509c79d12f207aeb50c3f1fb58c886/discussion-api/src/main/scala/com.gu.discussion.api/repository/Discussion.scala#L233\n\t */\n\tconst count = isObject(data) ? data[shortUrl] : undefined;\n\treturn typeof count === 'number' ? count : undefined;\n};\n\n/** Ensure that we reduce the number of requests to get comment counts */\nexport const addDiscussionIds = (ids: string[]): void => {\n\tif (!uniqueDiscussionIds) return;\n\tfor (const id of ids) {\n\t\tuniqueDiscussionIds.add(id);\n\t}\n};\n"],"names":["_path","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","props","width","height","viewBox","d","ageStyles","colour","css","textSansBold12","CardAge","webPublication","showClock","absoluteServerTimes","isTagPage","palette","timeAgo","Date","date","getTime","span","ClockIcon","DateTime","display","showWeekday","showDate","isWithinTwelveHours","showTime","contentStyles","space","neutral","labStyles","CardFooter","format","age","commentCount","cardBranding","showLivePlayable","theme","ArticleSpecial","Labs","footer","fauxLinkStyles","getZIndex","focusHalo","InternalLink","linkTo","headlineText","dataLinkName","a","href","data-link-name","aria-label","ExternalLink","target","rel","CardLink","isExternalLink","trailTextStyles","bottomPadding","topPadding","fontStyles","trailTextSize","textSans14","from","desktop","textSans17","TrailText","trailText","text","trailTextColour","hideUntil","padBottom","padTop","div","dangerouslySetInnerHTML","__html","Hide","until","containerStyles","svgStyles","longStyles","between","leftCol","and","wide","shortStyles","CardCommentCount","containerPalette","discussionApiUrl","discussionId","isDynamo","themePalette","count","useCommentCount","long","short","formatCount","getCommentCountColour","ContainerOverrides","CommentIcon","aria-hidden","visuallyHidden","block","decideAspectRatioStyles","aspectRatio","paddingRatio","getAspectRatioPadding","borderRadius","circularStyles","CardPicture","mainImage","alt","imageSize","loading","roundedCorners","isCircular","sources","generateSources","breakpoint","breakpoints","mobile","tablet","mobileLandscape","decideImageWidths","fallbackSource","getFallbackSource","picture","data-size","map","source","React","srcSet","hiResUrl","media","lowResUrl","img","src","data-chromatic","formatWeekday","locale","timeZone","toLocaleDateString","weekday","formatDate","day","month","year","replaceAll","formatTime","toLocaleTimeString","hour12","hour","minute","timeZoneName","replace","editionId","useConfig","dateLocale","getEditionFromId","then","Island","priority","defer","RelativeTime","now","Math","floor","time","dateTime","toISOString","data-locale","title","filter","isString","join","getDuration","precision","relativeTime","environment","inView","ref","useIsInView","repeat","setDisplay","useState","useEffect","updateDisplay","interval","setInterval","clearInterval","padding","determineSize","size","StarRating","rating","Array","_","i","SvgStar","SvgStarOutline","baseGrid","horizontalGrid","horizontalLineStyle","verticalLineStyle","sublinkBaseStyles","verticalSublinkStyles","wrapperStyles","backgroundFillMobile","backgroundFillDesktop","SupportingContent","supportingContent","alignment","fillBackgroundOnMobile","fillBackgroundOnDesktop","columnSpan","contentLength","getColumnSpan","ul","className","subLink","index","headline","subLinkFormat","design","isMediaCard","ArticleDesign","Standard","totalColumns","li","FormatBoundary","CardHeadline","hasInlineKicker","url","showPulsingDot","LiveBlog","kickerText","Gallery","Audio","Video","cardHasDarkBackground","undefined","editionList","pageId","longTitle","langLocale","hasEditionalisedPages","shortTitle","ukEdition","find","edition","getEditionFromPageId","isNetworkFront","isOneOf","some","isUndefined","countAsInteger","displayCountLong","Intl","NumberFormat","round","toString","DISCUSSION_ID_DATA_ATTRIBUTE","uniqueDiscussionIds","shortUrl","setUrl","Set","document","querySelectorAll","element","getAttribute","isNonNullable","add","getCommentCountUrl","URLSearchParams","sort","data","useApi","isObject","addDiscussionIds","ids","id"],"sourceRoot":""}