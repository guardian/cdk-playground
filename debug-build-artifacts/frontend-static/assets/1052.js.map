{"version":3,"file":"1052.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/marketing/epics/ContributionsLiveblogEpic.tsx"],"sourcesContent":["/**\n * @file\n * This file was migrated from:\n * https://github.com/guardian/support-dotcom-components/blob/9c3eae7cb0b159db4a1c40679d6b37710b0bb937/packages/modules/src/modules/epics/ContributionsLiveblogEpic.tsx\n */\nimport { css } from '@emotion/react';\nimport {\n\tarticle17,\n\tfrom,\n\theadlineBold34,\n\tpalette,\n\tspace,\n} from '@guardian/source/foundations';\nimport { Ticker } from '@guardian/source-development-kitchen/react-components';\nimport type { TickerSettings } from '@guardian/source-development-kitchen/react-components';\nimport {\n\tcontainsNonArticleCountPlaceholder,\n\treplaceNonArticleCountPlaceholders,\n} from '@guardian/support-dotcom-components';\nimport type {\n\tEpicProps,\n\tTracking,\n} from '@guardian/support-dotcom-components/dist/shared/types';\nimport { useEffect } from 'react';\nimport { useIsInView } from '../../../lib/useIsInView';\nimport type { ReactComponent } from '../lib/ReactComponent';\nimport { replaceArticleCount } from '../lib/replaceArticleCount';\nimport {\n\tcreateInsertEventFromTracking,\n\tcreateViewEventFromTracking,\n} from '../lib/tracking';\nimport { logEpicView } from '../lib/viewLog';\nimport { ContributionsEpicNewsletterSignup } from './ContributionsEpicNewsletterSignup';\nimport { ContributionsEpicCtasContainer } from './ctas/ContributionsEpicCtasContainer';\n\n// Hard-coded AB TEST - picking up ab test name and variant name from the tracking object\n// then applying a different colour if it matches, or the default colour if it doesn't.\nconst getBackgroundColour = (isInTestVariant: boolean) => {\n\treturn isInTestVariant ? '#E2E3BF' : palette.neutral[100];\n};\n\nconst getHeadingBackgroundColour = (isInTestVariant: boolean) => {\n\treturn isInTestVariant ? '#051D32' : palette.brandAlt[400];\n};\n\nconst getHeadingColour = (isInTestVariant: boolean) => {\n\treturn isInTestVariant ? '#FFFFFF' : palette.neutral[7];\n};\n\nconst container = (tracking: Tracking, isInTestVariant: boolean) => css`\n\tpadding: 6px 10px 28px 10px;\n\tborder-top: 1px solid ${palette.brandAlt[400]};\n\tborder-bottom: 1px solid ${palette.neutral[86]};\n\n\tbackground: ${getBackgroundColour(isInTestVariant)};\n\n\tborder: 1px solid ${palette.neutral[0]};\n\n\t* {\n\t\t::selection {\n\t\t\tbackground: ${palette.brandAlt[400]};\n\t\t}\n\t}\n\n\t${from.tablet} {\n\t\tpadding-left: ${tracking.clientName === 'dcr' ? '60px' : '80px'};\n\t\tpadding-right: 20px;\n\t}\n`;\n\nconst textContainer = css`\n\t${article17};\n\n\tfont-size: 16px;\n\n\tp {\n\t\tmargin: 0;\n\t}\n\n\t& > p + p {\n\t\tmargin-top: ${space[3]}px;\n\t}\n\n\t${from.tablet} {\n\t\t& > p + p {\n\t\t\tmargin-top: ${space[4]}px;\n\t\t}\n\t}\n`;\n\nconst yellowHeading = (tracking: Tracking, isInTestVariant: boolean) => css`\n\t${headlineBold34};\n\tfont-size: 28px;\n\tcolor: ${getHeadingColour(isInTestVariant)};\n\tbackground-color: ${getHeadingBackgroundColour(isInTestVariant)};\n\tborder-top: 1px solid ${palette.neutral[0]};\n\tborder-left: 1px solid ${palette.neutral[0]};\n\tborder-right: 1px solid ${palette.neutral[0]};\n\n\tpadding: 8px 10px 12px 10px;\n\t${from.tablet} {\n\t\tpadding-left: ${tracking.clientName === 'dcr' ? '60px' : '80px'};\n\t\tpadding-right: 20px;\n\t}\n`;\n\nconst tickerContainer = css`\n\tmargin-top: ${space[5]}px;\n`;\n\nconst defaultTickerStylingSettings: TickerSettings['tickerStylingSettings'] = {\n\tfilledProgressColour: '#C41C1C',\n\tprogressBarBackgroundColour: '#D9A78E',\n\theadlineColour: '#000000',\n\ttotalColour: '#C41C1C',\n\tgoalColour: '#000000',\n};\n\ninterface LiveblogEpicBodyParagraphProps {\n\tparagraph: string;\n\tnumArticles: number;\n}\n\nconst LiveblogEpicBodyParagraph: ReactComponent<\n\tLiveblogEpicBodyParagraphProps\n> = ({ paragraph, numArticles }: LiveblogEpicBodyParagraphProps) => {\n\tconst elements = replaceArticleCount(paragraph, numArticles, 'epic');\n\n\treturn <p>{elements}</p>;\n};\n\ninterface LiveblogEpicBodyProps {\n\tparagraphs: string[];\n\tnumArticles: number;\n}\n\nconst LiveblogEpicBody: ReactComponent<LiveblogEpicBodyProps> = ({\n\tnumArticles,\n\tparagraphs,\n}: LiveblogEpicBodyProps) => {\n\treturn (\n\t\t<div css={textContainer}>\n\t\t\t{paragraphs.map((paragraph) => (\n\t\t\t\t<LiveblogEpicBodyParagraph\n\t\t\t\t\tkey={paragraph}\n\t\t\t\t\tparagraph={paragraph}\n\t\t\t\t\tnumArticles={numArticles}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport const ContributionsLiveblogEpic: ReactComponent<EpicProps> = ({\n\tvariant,\n\tcountryCode,\n\tarticleCounts,\n\ttracking,\n\tsubmitComponentEvent,\n\tonReminderOpen,\n\tfetchEmail,\n}: EpicProps): JSX.Element => {\n\tconst { newsletterSignup, tickerSettings } = variant;\n\n\tconst isColourInTestVariant: boolean =\n\t\ttracking.abTestName.includes('_LB_EPIC_BG_COLOUR') &&\n\t\ttracking.abTestVariant === 'VARIANT';\n\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tdebounce: true,\n\t});\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen) {\n\t\t\t// For epic view count\n\t\t\tlogEpicView(tracking.abTestName);\n\n\t\t\t// For ophan\n\t\t\tif (submitComponentEvent) {\n\t\t\t\tsubmitComponentEvent(\n\t\t\t\t\tcreateViewEventFromTracking(\n\t\t\t\t\t\ttracking,\n\t\t\t\t\t\ttracking.campaignCode,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [hasBeenSeen, submitComponentEvent, tracking]);\n\n\tuseEffect(() => {\n\t\tif (submitComponentEvent) {\n\t\t\tsubmitComponentEvent(\n\t\t\t\tcreateInsertEventFromTracking(tracking, tracking.campaignCode),\n\t\t\t);\n\t\t}\n\t}, [submitComponentEvent, tracking]);\n\n\tconst cleanParagraphs = variant.paragraphs.map((paragraph) =>\n\t\treplaceNonArticleCountPlaceholders(paragraph, countryCode),\n\t);\n\tconst cleanHeading =\n\t\treplaceNonArticleCountPlaceholders(variant.heading) ||\n\t\t'Support the Guardian';\n\n\tif (\n\t\tcleanParagraphs.some(containsNonArticleCountPlaceholder) ||\n\t\tcontainsNonArticleCountPlaceholder(cleanHeading)\n\t) {\n\t\treturn <></>;\n\t}\n\n\treturn (\n\t\t<div data-testid=\"contributions-liveblog-epic\" ref={setNode}>\n\t\t\t{!!cleanHeading && (\n\t\t\t\t<div css={yellowHeading(tracking, isColourInTestVariant)}>\n\t\t\t\t\t{cleanHeading}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<section css={container(tracking, isColourInTestVariant)}>\n\t\t\t\t<LiveblogEpicBody\n\t\t\t\t\tparagraphs={cleanParagraphs}\n\t\t\t\t\tnumArticles={articleCounts.forTargetedWeeks}\n\t\t\t\t/>\n\t\t\t\t{tickerSettings?.tickerData && (\n\t\t\t\t\t<div css={tickerContainer}>\n\t\t\t\t\t\t<Ticker\n\t\t\t\t\t\t\tcurrencySymbol={tickerSettings.currencySymbol}\n\t\t\t\t\t\t\tcopy={{\n\t\t\t\t\t\t\t\theadline: tickerSettings.copy.countLabel,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttickerData={tickerSettings.tickerData}\n\t\t\t\t\t\t\ttickerStylingSettings={defaultTickerStylingSettings}\n\t\t\t\t\t\t\tsize={'medium'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{newsletterSignup ? (\n\t\t\t\t\t<ContributionsEpicNewsletterSignup\n\t\t\t\t\t\tnewsletterId={newsletterSignup.newsletterId}\n\t\t\t\t\t\tsuccessDescription={newsletterSignup.successDescription}\n\t\t\t\t\t\ttracking={tracking}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<ContributionsEpicCtasContainer\n\t\t\t\t\t\tvariant={variant}\n\t\t\t\t\t\ttracking={tracking}\n\t\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\t\tarticleCounts={articleCounts}\n\t\t\t\t\t\tonReminderOpen={onReminderOpen}\n\t\t\t\t\t\tfetchEmail={fetchEmail}\n\t\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\t\tisColourInTestVariant={isColourInTestVariant}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</section>\n\t\t</div>\n\t);\n};\n"],"names":["css","article17","from","headlineBold34","palette","space","Ticker","containsNonArticleCountPlaceholder","replaceNonArticleCountPlaceholders","useEffect","useIsInView","replaceArticleCount","createInsertEventFromTracking","createViewEventFromTracking","logEpicView","ContributionsEpicNewsletterSignup","ContributionsEpicCtasContainer","getBackgroundColour","isInTestVariant","neutral","getHeadingBackgroundColour","brandAlt","getHeadingColour","container","tracking","tablet","clientName","textContainer","yellowHeading","tickerContainer","defaultTickerStylingSettings","filledProgressColour","progressBarBackgroundColour","headlineColour","totalColour","goalColour","LiveblogEpicBodyParagraph","paragraph","numArticles","elements","p","LiveblogEpicBody","paragraphs","div","map","ContributionsLiveblogEpic","variant","countryCode","articleCounts","submitComponentEvent","onReminderOpen","fetchEmail","newsletterSignup","tickerSettings","isColourInTestVariant","abTestName","includes","abTestVariant","hasBeenSeen","setNode","debounce","campaignCode","cleanParagraphs","cleanHeading","heading","some","data-testid","ref","section","forTargetedWeeks","tickerData","currencySymbol","copy","headline","countLabel","tickerStylingSettings","size","newsletterId","successDescription"],"sourceRoot":""}