(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9126],{39841:(e,n,t)=>{"use strict";t.d(n,{C:()=>C});var r=t(50484),o=t(24017),i=t(47441),c=t(31274),s=t(59648),u=t(81477),a=t(71653),d=t(50641),l=t(53753),f=t(55044),h=t(83416),v=t(1954),p=t(7693),g=(0,o.css)("padding-top:",s.x[1],"px;padding-bottom:",s.x[1],"px;"),m=(0,o.css)("border-radius:70px;width:60px;height:60px;",u.TG.desktop,"{width:36px;height:36px;}"),y=(0,o.css)("padding-bottom:",s.x[1],"px;padding-right:",s.x[2],"px;"),w=(0,o.css)(a.aal,";padding-bottom:",s.x[1],"px;"),k=(0,o.css)(a.PSs," ",u.TG.desktop,"{",a.Ikj,";}color:",d.M.neutral[46],";padding-bottom:",s.x[1],"px;"),x=(0,o.css)(a.cYp," color:",(0,v.M)("--discussion-subdued"),";padding-bottom:",s.x[1],"px;"),b=(0,o.css)("font-weight:700;color:",(0,v.M)("--article-text"),";"),P=(0,o.css)("color:",(0,v.M)("--sign-in-link"),";text-decoration:none;border-bottom:1px solid ",(0,v.M)("--sign-in-link-underline"),";transition:border-color 0.15s ease-out;:hover{border-color:",(0,v.M)("--sign-in-link"),";}"),j=(0,o.css)("display:flex;flex-direction:column;",u.TG.desktop,"{flex-direction:row;}"),B=function(e){var n=e.count;return(0,r.jsxs)("h2",{css:w,children:["Comments"," ",(0,r.jsxs)("span",{css:(0,o.css)("color:",(0,v.M)("--discussion-subdued"),";"),children:["(",null!=n?n:"â€¦",")"]})]})},A=function(){(0,f.LE)().signIn(i.SignInScreenReason.accessDiscussion,c.SignInScreenReferrer.accessDiscussion).catch((function(){}))},S=(0,o.css)("display:inline;padding:0;margin:0;text-decoration-color:",(0,v.M)("--sign-in-link-underline"),";white-space:inherit;font-family:inherit;font-weight:inherit;font-size:inherit;line-height:inherit;vertical-align:inherit;"),M=function(e){var n=e.children,t=e.action;return"Web"===(0,p.U)().renderingTarget?(0,r.jsx)("a",{href:"https://profile.theguardian.com/signin?INTCMP=DOTCOM_COMMENTS_SIGNIN&".concat((0,h.h)(t)),css:P,children:n}):(0,r.jsx)(l.z,{priority:"subdued",theme:{textSubdued:(0,v.M)("--sign-in-link")},cssOverrides:S,onClick:A,children:n})},C=function(e){var n=e.commentCount,t=e.enableDiscussionSwitch,o=e.user,i=e.isClosedForComments,c=(null==o?void 0:o.privateFields)&&!o.privateFields.canPostComment;return t?c?(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsxs)("span",{css:x,children:["Commenting has been disabled for this account (",(0,r.jsx)("a",{href:"https://www.theguardian.com/community-faqs#321a",css:P,children:"why?"})," ",")"]})]}):o&&i?(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsx)("span",{css:x,children:"This discussion is closed for comments"})]}):!o&&i?(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsxs)("span",{css:x,children:["This discussion is now closed for comments but you can still"," ",(0,r.jsx)(M,{action:"signin_to_comment",children:"sign in"})," ","or"," ",(0,r.jsx)(M,{action:"register_to_comment",children:"create your Guardian account"})," ","to join the discussion next time"]})]}):o?(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsxs)("div",{css:j,children:[(0,r.jsx)("div",{css:y,children:(0,r.jsx)("img",{src:o.secureAvatarUrl||"https://avatar.guim.co.uk/no-user-image.gif",alt:o.displayName||"Guardian User",css:m})}),(0,r.jsxs)("div",{css:k,children:["Signed in as",(0,r.jsx)("div",{css:b,children:o.displayName||"Guardian User"})]})]})]}):(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsxs)("span",{css:x,children:[(0,r.jsx)(M,{action:"signin_to_comment",children:"Sign in"})," ","or"," ",(0,r.jsx)(M,{action:"register_to_comment",children:"create your Guardian account"})," ","to join the discussion"]})]}):o?(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsx)("span",{css:x,children:"Commenting has been disabled at this time"})]}):(0,r.jsxs)("div",{css:g,children:[(0,r.jsx)(B,{count:n}),(0,r.jsxs)("span",{css:x,children:["Commenting has been disabled at this time but you can still"," ",(0,r.jsx)(M,{action:"signin_to_comment",children:"sign in"})," ","or"," ",(0,r.jsx)(M,{action:"register_to_comment",children:"create your Guardian account"})," ","to join the discussion when it's back"]})]})}},55044:(e,n,t)=>{"use strict";t.d(n,{OA:()=>D,IC:()=>Z,GR:()=>R,QF:()=>re,Dq:()=>L,yY:()=>K,_5:()=>ie,ud:()=>ne,U:()=>Y,yV:()=>z,LE:()=>V,FA:()=>J});var r=t(83551),o=t(555),i=t(16873),c=t(40771),s=t(72910),u=t(46365),a=t(43019),d=(t(53274),t(81449)),l=(t(79907),t(72031)),f=t(69139),h=t(30316),v=t(435),p=t(65656),g=t(73745),m=t(58201),y=t(69584),w=t(56318),k=t(8433),x=t(62335),b=t(13213),P=t(14611);function j(e,n,t,r){var o=(0,P.A)((0,w.A)(1&r?e.prototype:e),n,t);return 2&r&&"function"==typeof o?function(e){return o.apply(t,e)}:o}function B(e,n,t){return n=(0,w.A)(n),(0,y.A)(e,A()?Reflect.construct(n,t||[],(0,w.A)(e).constructor):n.apply(e,t))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var S=function(e){function n(e,t){var r;return(0,g.A)(this,n),r=B(this,n,[e]),(0,x.A)(r,"serviceName",void 0),r.serviceName=t,r}return(0,k.A)(n,e),(0,m.A)(n,[{key:"writeMessageBegin",value:function(e,t,r){t===b.MessageType.CALL||t===b.MessageType.ONEWAY?j(n,"writeMessageBegin",this,3)([this.serviceName+n.separator+e,t,r]):j(n,"writeMessageBegin",this,3)([e,t,r])}}])}(function(e){function n(e){var t;return(0,g.A)(this,n),t=B(this,n,[e.getTransport()]),(0,x.A)(t,"concreteProtocol",void 0),t.concreteProtocol=e,t}return(0,k.A)(n,e),(0,m.A)(n,[{key:"getTransport",value:function(){return this.concreteProtocol.getTransport()}},{key:"flush",value:function(){return this.concreteProtocol.flush()}},{key:"writeMessageBegin",value:function(e,n,t){return this.concreteProtocol.writeMessageBegin(e,n,t)}},{key:"writeMessageEnd",value:function(){return this.concreteProtocol.writeMessageEnd()}},{key:"writeStructBegin",value:function(e){return this.concreteProtocol.writeStructBegin(e)}},{key:"writeStructEnd",value:function(){return this.concreteProtocol.writeStructEnd()}},{key:"writeFieldBegin",value:function(e,n,t){return this.concreteProtocol.writeFieldBegin(e,n,t)}},{key:"writeFieldEnd",value:function(){return this.concreteProtocol.writeFieldEnd()}},{key:"writeFieldStop",value:function(){return this.concreteProtocol.writeFieldStop()}},{key:"writeMapBegin",value:function(e,n,t){return this.concreteProtocol.writeMapBegin(e,n,t)}},{key:"writeMapEnd",value:function(){return this.concreteProtocol.writeMapEnd()}},{key:"writeListBegin",value:function(e,n){return this.concreteProtocol.writeListBegin(e,n)}},{key:"writeListEnd",value:function(){return this.concreteProtocol.writeListEnd()}},{key:"writeSetBegin",value:function(e,n){return this.concreteProtocol.writeSetBegin(e,n)}},{key:"writeSetEnd",value:function(){return this.concreteProtocol.writeSetEnd()}},{key:"writeBool",value:function(e){return this.concreteProtocol.writeBool(e)}},{key:"writeByte",value:function(e){return this.concreteProtocol.writeByte(e)}},{key:"writeI16",value:function(e){return this.concreteProtocol.writeI16(e)}},{key:"writeI32",value:function(e){return this.concreteProtocol.writeI32(e)}},{key:"writeI64",value:function(e){return this.concreteProtocol.writeI64(e)}},{key:"writeDouble",value:function(e){return this.concreteProtocol.writeDouble(e)}},{key:"writeString",value:function(e){return this.concreteProtocol.writeString(e)}},{key:"writeBinary",value:function(e){return this.concreteProtocol.writeBinary(e)}},{key:"readMessageBegin",value:function(){return this.concreteProtocol.readMessageBegin()}},{key:"readMessageEnd",value:function(){return this.concreteProtocol.readMessageEnd()}},{key:"readStructBegin",value:function(){return this.concreteProtocol.readStructBegin()}},{key:"readStructEnd",value:function(){return this.concreteProtocol.readStructEnd()}},{key:"readFieldBegin",value:function(){return this.concreteProtocol.readFieldBegin()}},{key:"readFieldEnd",value:function(){return this.concreteProtocol.readFieldEnd()}},{key:"readMapBegin",value:function(){return this.concreteProtocol.readMapBegin()}},{key:"readMapEnd",value:function(){return this.concreteProtocol.readMapEnd()}},{key:"readListBegin",value:function(){return this.concreteProtocol.readListBegin()}},{key:"readListEnd",value:function(){return this.concreteProtocol.readListEnd()}},{key:"readSetBegin",value:function(){return this.concreteProtocol.readSetBegin()}},{key:"readSetEnd",value:function(){return this.concreteProtocol.readSetEnd()}},{key:"readBool",value:function(){return this.concreteProtocol.readBool()}},{key:"readByte",value:function(){return this.concreteProtocol.readByte()}},{key:"readI16",value:function(){return this.concreteProtocol.readI16()}},{key:"readI32",value:function(){return this.concreteProtocol.readI32()}},{key:"readI64",value:function(){return this.concreteProtocol.readI64()}},{key:"readDouble",value:function(){return this.concreteProtocol.readDouble()}},{key:"readBinary",value:function(){return this.concreteProtocol.readBinary()}},{key:"readString",value:function(){return this.concreteProtocol.readString()}},{key:"skip",value:function(e){return this.concreteProtocol.skip(e)}}])}(b.TProtocol));function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function C(e,n,t){return n=(0,w.A)(n),(0,y.A)(e,I()?Reflect.construct(n,t||[],(0,w.A)(e).constructor):n.apply(e,t))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function E(e){window.android?window.android.postMessage(e.data,e.connectionId):window.webkit?window.webkit.messageHandlers.iOSWebViewMessage.postMessage(e):console.warn("No native APIs available")}(0,x.A)(S,"separator",":");var T=1,_=function(){return"connection-".concat(T++)},N=function(e){function n(e,t){var r,o;return(0,g.A)(this,n),r=C(this,n,[e,t]),(0,x.A)(r,"connectionId",_()),(0,x.A)(r,"promises",[]),(0,x.A)(r,"outBuffer",[]),"undefined"!=typeof window&&(window.nativeConnections=null!==(o=window.nativeConnections)&&void 0!==o?o:{},window.nativeConnections[r.connectionId]=r),r}return(0,k.A)(n,e),(0,m.A)(n,[{key:"reset",value:function(e){if(e===this.connectionId&&window.nativeConnections){console.warn("Reseting connection "+e),delete window.nativeConnections[this.connectionId];var n,t=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return M(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw i}}}}(this.promises);try{for(t.s();!(n=t.n()).done;)n.value.reject(new b.TApplicationException(b.TApplicationExceptionType.UNKNOWN,"Timeout error"))}catch(e){t.e(e)}finally{t.f()}this.promises=[],this.connectionId=_(),window.nativeConnections[this.connectionId]=this}}},{key:"receive",value:function(e){var n=this.promises.shift();if(n){clearTimeout(n.timeoutId);var t=Buffer.from(e.data,"base64");n.resolve(t)}this.sendNextMessage()}},{key:"sendNextMessage",value:function(){var e=this.outBuffer.shift();e&&(console.log("Sending next message"),E(e))}},{key:"send",value:function(e){var n=this.connectionId,t=this;return new Promise((function(r,o){t.promises.push({resolve:r,reject:o,timeoutId:setTimeout((function(){t.reset(n)}),3e4)});var i={data:e.toString("base64"),connectionId:n};1===t.promises.length?(console.log("Sending message immediately"),E(i)):(console.log("Queing message because others in flight"),t.outBuffer.push(i))}))}}])}(b.ThriftConnection);function F(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffered",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"compact",r=function(n){function r(n){var o;return(0,g.A)(this,r),C(this,r,[new((0,b.getProtocol)(t))(n),null!==(o=e.serviceName)&&void 0!==o?o:""])}return(0,k.A)(r,n),(0,m.A)(r)}(S),o=new N((0,b.getTransport)(n),r);return new e(o)}var G=void 0,L=function(){return(0,p.b)(G)&&(G=F(s.Client,"buffered","compact")),G},O=void 0,R=function(){return(0,p.b)(O)&&(O=F(i.Client,"buffered","compact")),O},U=void 0,D=function(){return U||(U=F(r.Client,"buffered","compact")),U},W=void 0,Y=function(){return W||(W=F(l.Client,"buffered","compact")),W},q=void 0,z=function(){return q||(q=F(f.Client,"buffered","compact")),q},Q=void 0,V=function(){return Q||(Q=F(h.Client,"buffered","compact")),Q},H=void 0,K=function(){return H||(H=F(u.Client,"buffered","compact")),H},$=void 0,J=function(){return $||($=F(v.Client,"buffered","compact")),$},X=void 0,Z=function(){return X||(X=F(o.Client,"buffered","compact")),X},ee=void 0,ne=function(){return ee||(ee=F(d.Client,"buffered","compact")),ee},te=void 0,re=function(){return te||(te=F(c.Client,"buffered","compact")),te},oe=void 0,ie=function(){return oe||(oe=F(a.Client,"buffered","compact")),oe}},83416:(e,n,t)=>{"use strict";t.d(n,{h:()=>o});var r=t(94568),o=function(e,n){var t={componentType:"identityauthentication",componentId:e};return n&&(t.viewId=n),"componentEventParams=".concat(encodeURIComponent((0,r.G)(t)))}},94568:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var r=function(e){return Object.keys(e).map((function(n){var t,r=null!==(t=e[n])&&void 0!==t?t:"undefined",o=Array.isArray(r)?r.map((function(e){return encodeURIComponent(e)})).join(","):encodeURIComponent(r);return"".concat(n,"=").concat(o)})).join("&")}},1954:(e,n,t)=>{"use strict";t.d(n,{M:()=>r});var r=function(e){return"var(".concat(e,")")}},50150:()=>{}}]);
//# sourceMappingURL=9126.client.web.legacy.433daa0a2d8048a288db.js.map