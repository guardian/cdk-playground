{"version":3,"file":"KeyEventsCarousel-importable.client.web.446665ca1bcda098b999.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/DateTime.tsx","webpack://@guardian/dotcom-rendering/./src/components/Island.tsx","webpack://@guardian/dotcom-rendering/./src/components/KeyEventCard.tsx","webpack://@guardian/dotcom-rendering/./src/components/KeyEventsCarousel.importable.tsx","webpack://@guardian/dotcom-rendering/./src/components/RelativeTime.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/thrift/protocols.ts","webpack://@guardian/dotcom-rendering/./src/lib/thrift/nativeConnection.ts","webpack://@guardian/dotcom-rendering/./src/lib/bridgetApi.ts","webpack://@guardian/dotcom-rendering/./src/lib/edition.ts","webpack://@guardian/dotcom-rendering/./src/lib/useIsInView.ts","webpack://@guardian/dotcom-rendering/./src/palette.ts"],"sourcesContent":["import { isString } from '@guardian/libs';\nimport { getEditionFromId } from '../lib/edition';\nimport { useConfig } from './ConfigContext';\nimport { Island } from './Island';\nimport { RelativeTime } from './RelativeTime.importable';\n\ntype Props = {\n\tdate: Date;\n\tshowWeekday: boolean;\n\tshowDate: boolean;\n\tshowTime: boolean;\n};\n\ntype DisplayProps =\n\t| {\n\t\t\tdisplay?: 'absolute';\n\t\t\tabsoluteServerTimes?: never;\n\t  }\n\t| {\n\t\t\tdisplay: 'relative';\n\t\t\tabsoluteServerTimes: boolean;\n\t  };\n\nconst formatWeekday = (date: Date, locale: string, timeZone: string) =>\n\tdate.toLocaleDateString(locale, {\n\t\tweekday: 'short',\n\t\ttimeZone,\n\t});\n\nconst formatDate = (date: Date, locale: string, timeZone: string) =>\n\tdate\n\t\t.toLocaleDateString(locale, {\n\t\t\tday: 'numeric',\n\t\t\tmonth: 'short',\n\t\t\tyear: 'numeric',\n\t\t\ttimeZone,\n\t\t})\n\t\t.replaceAll(',', '');\n\nconst formatTime = (date: Date, locale: string, timeZone: string) =>\n\tdate\n\t\t.toLocaleTimeString(locale, {\n\t\t\thour12: false,\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\ttimeZoneName: 'short',\n\t\t\ttimeZone,\n\t\t})\n\t\t.replace(':', '.');\n\nconst ONE_MINUTE = 60_000;\n/** https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#the_epoch_timestamps_and_invalid_date */\nconst MAX_DATE = 8.64e15;\n/** Rounded down to the previous minute, to ensure relative times rarely go backwards */\nconst getServerTime = () => Math.floor(Date.now() / ONE_MINUTE) * ONE_MINUTE;\n\nexport const DateTime = ({\n\tdate,\n\tshowWeekday,\n\tshowDate,\n\tshowTime,\n\tdisplay = 'absolute',\n\tabsoluteServerTimes = true,\n}: Props & DisplayProps) => {\n\tconst { editionId } = useConfig();\n\tconst { dateLocale, timeZone } = getEditionFromId(editionId);\n\n\tconst then = date.getTime();\n\n\treturn display === 'relative' ? (\n\t\t<Island priority=\"enhancement\" defer={{ until: 'visible' }}>\n\t\t\t<RelativeTime\n\t\t\t\tthen={then}\n\t\t\t\tnow={absoluteServerTimes ? MAX_DATE : getServerTime()}\n\t\t\t\teditionId={editionId}\n\t\t\t/>\n\t\t</Island>\n\t) : (\n\t\t<time\n\t\t\tdateTime={date.toISOString()}\n\t\t\tdata-locale={dateLocale}\n\t\t\ttitle={date.toLocaleDateString(dateLocale, {\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t\tweekday: 'long',\n\t\t\t\tyear: 'numeric',\n\t\t\t\tmonth: 'long',\n\t\t\t\tday: 'numeric',\n\t\t\t\ttimeZoneName: 'long',\n\t\t\t\ttimeZone,\n\t\t\t})}\n\t\t>\n\t\t\t{[\n\t\t\t\tshowWeekday && formatWeekday(date, dateLocale, timeZone),\n\t\t\t\tshowDate && formatDate(date, dateLocale, timeZone),\n\t\t\t\tshowTime && formatTime(date, dateLocale, timeZone),\n\t\t\t]\n\t\t\t\t.filter(isString)\n\t\t\t\t.join(' ')}\n\t\t</time>\n\t);\n};\n","import type { ScheduleOptions, SchedulePriority } from '../lib/scheduler';\n\ntype DeferredProps = {\n\tvisible: {\n\t\tuntil: 'visible';\n\t\t/**\n\t\t * @see https://developer.mozilla.org/en-us/docs/web/api/intersectionobserver/rootmargin\n\t\t */\n\t\trootMargin?: string;\n\t};\n\tidle: {\n\t\tuntil: 'idle';\n\t};\n\tinteraction: {\n\t\tuntil: 'interaction';\n\t};\n\thash: {\n\t\tuntil: 'hash';\n\t};\n};\n\ntype PriorityProps = {\n\tcritical: {\n\t\tpriority: SchedulePriority['critical'];\n\t\tdefer?: DeferredProps[keyof DeferredProps];\n\t};\n\tfeature: {\n\t\tpriority: SchedulePriority['feature'];\n\t\tdefer: DeferredProps[keyof DeferredProps];\n\t};\n\tenhancement: {\n\t\tpriority: SchedulePriority['enhancement'];\n\t\tdefer: DeferredProps[keyof DeferredProps];\n\t};\n};\n\ntype IslandProps = {\n\tchildren: JSX.Element;\n\trole?: string;\n} & PriorityProps[keyof PriorityProps];\n\n/**\n * Adds interactivity to the client by either hydrating or inserting content.\n *\n * Note. The component passed as children must follow the [MyComponent].importable.tsx\n * namimg convention\n *\n * @param {IslandProps} props - JSX Props\n * @param {JSX.Element} props.children - The component being inserted. Must be a single JSX Element\n */\nexport const Island = ({ priority, defer, children, role }: IslandProps) => {\n\tconst rootMargin =\n\t\tdefer?.until === 'visible' ? defer.rootMargin : undefined;\n\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- Type definitions on children are limited\n\tconst name = String(children.type.name);\n\n\treturn (\n\t\t<gu-island\n\t\t\tname={name}\n\t\t\tpriority={priority}\n\t\t\tdeferUntil={defer?.until}\n\t\t\tprops={JSON.stringify(children.props)}\n\t\t\trootMargin={rootMargin}\n\t\t\tdata-spacefinder-role={role}\n\t\t>\n\t\t\t{children}\n\t\t</gu-island>\n\t);\n};\n\n/**\n * Used for JSX custom element declaration\n * {@link ../../index.d.ts}\n */\nexport type GuIsland = {\n\tname: string;\n\tpriority: ScheduleOptions['priority'];\n\tdeferUntil?: NonNullable<IslandProps['defer']>['until'];\n\trootMargin?: string;\n\tprops: string;\n\tchildren: React.ReactNode;\n};\n","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\tspace,\n\ttextSans15,\n\ttextSansBold14,\n} from '@guardian/source/foundations';\nimport { Link } from '@guardian/source/react-components';\nimport { palette } from '../palette';\nimport type { RenderingTarget } from '../types/renderingTarget';\nimport { DateTime } from './DateTime';\n\ninterface Props {\n\tid: string;\n\tblockFirstPublished: number;\n\ttitle: string;\n\tisSummary: boolean;\n\tfilterKeyEvents: boolean;\n\tabsoluteServerTimes: boolean;\n\tcardPosition?: string;\n\trenderingTarget: RenderingTarget;\n}\n\nconst linkStyles = css`\n\ttext-decoration: none;\n\n\t&::before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\theight: 13px;\n\t\twidth: 13px;\n\t\tborder-radius: 50%;\n\t\tbackground-color: ${palette('--key-event-bullet')};\n\t\tmargin-bottom: ${space[1]}px;\n\t\tz-index: 2;\n\n\t\t${from.tablet} {\n\t\t\theight: 15px;\n\t\t\twidth: 15px;\n\t\t}\n\t}\n\n\t&:hover::before {\n\t\tbackground-color: ${palette('--key-event-bullet-hover')};\n\t}\n\n\t&:hover {\n\t\tdiv {\n\t\t\ttext-decoration: underline ${palette('--key-event-text')};\n\t\t\ttext-underline-offset: 1px;\n\t\t}\n\t}\n`;\n\nconst summaryStyles = css`\n\t&::before {\n\t\tbackground-color: ${palette('--summary-event-bullet')};\n\t}\n\n\t&:hover::before {\n\t\tbackground-color: ${palette('--summary-event-bullet-hover')};\n\t}\n`;\n\nconst listItemStyles = css`\n\tposition: relative;\n\tpadding-bottom: ${space[3]}px;\n\tpadding-top: ${space[3]}px;\n\tpadding-right: ${space[3]}px;\n\tbackground-color: ${palette('--key-event-background')};\n\tlist-style: none;\n\tdisplay: block;\n\twidth: 162px;\n\tscroll-snap-align: start;\n\n\t${from.desktop} {\n\t\tpadding-bottom: ${space[3]}px;\n\t\tbackground-color: ${palette('--key-event-background-desktop')};\n\t\twidth: 200px;\n\t\tpadding-right: ${space[5]}px;\n\t}\n\n\t&::before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tborder-top: 1px dotted ${palette('--key-event-border')};\n\t\tleft: 0;\n\t\tright: 0;\n\t\ttop: 19px;\n\t}\n\n\t&:last-child::before {\n\t\tborder-top: 0;\n\t}\n`;\n\nconst textStyles = css`\n\t${textSans15};\n\tcolor: ${palette('--key-event-text')};\n`;\n\nconst timeStyles = css`\n\t${textSansBold14};\n\t/**\n\t * Typography preset styles should not be overridden.\n\t * This has been done because the styles do not directly map to the new presets.\n\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t */\n\tline-height: 1.15;\n\tcolor: ${palette('--key-event-title')};\n\tdisplay: block;\n`;\n\nexport const getUrl = ({\n\tfilterKeyEvents,\n\trenderingTarget,\n\tid,\n}: {\n\tfilterKeyEvents: boolean;\n\trenderingTarget: RenderingTarget;\n\tid: string;\n}) => {\n\tconst searchParams = new URLSearchParams();\n\tsearchParams.append('filterKeyEvents', String(filterKeyEvents));\n\tsearchParams.append('page', `with:block-${id}`);\n\tif (renderingTarget === 'Apps') {\n\t\tsearchParams.append('dcr', 'apps');\n\t}\n\n\treturn `?${searchParams.toString()}#block-${id}`;\n};\n\nexport const KeyEventCard = ({\n\tid,\n\tblockFirstPublished,\n\tisSummary,\n\ttitle,\n\tfilterKeyEvents,\n\tcardPosition = 'unknown position',\n\tabsoluteServerTimes,\n\trenderingTarget,\n}: Props) => {\n\tconst url = getUrl({ filterKeyEvents, renderingTarget, id });\n\n\treturn (\n\t\t<li css={listItemStyles}>\n\t\t\t<Link\n\t\t\t\tpriority=\"secondary\"\n\t\t\t\tcssOverrides={css([linkStyles, isSummary && summaryStyles])}\n\t\t\t\thref={url}\n\t\t\t\tdata-link-name={`key event card | ${cardPosition}`}\n\t\t\t>\n\t\t\t\t<div css={timeStyles}>\n\t\t\t\t\t<DateTime\n\t\t\t\t\t\tdate={new Date(blockFirstPublished)}\n\t\t\t\t\t\tdisplay=\"relative\"\n\t\t\t\t\t\tabsoluteServerTimes={absoluteServerTimes}\n\t\t\t\t\t\tshowWeekday={false}\n\t\t\t\t\t\tshowDate={true}\n\t\t\t\t\t\tshowTime={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div css={textStyles}>{title}</div>\n\t\t\t</Link>\n\t\t</li>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { from, headlineBold17, space } from '@guardian/source/foundations';\nimport {\n\tButton,\n\tHide,\n\tSvgChevronLeftSingle,\n\tSvgChevronRightSingle,\n} from '@guardian/source/react-components';\nimport { useRef } from 'react';\nimport { getInteractionClient } from '../lib/bridgetApi';\nimport { palette } from '../palette';\nimport type { Block } from '../types/blocks';\nimport type { RenderingTarget } from '../types/renderingTarget';\nimport { KeyEventCard } from './KeyEventCard';\n\ninterface Props {\n\tkeyEvents: Block[];\n\tfilterKeyEvents: boolean;\n\tid: 'key-events-carousel-desktop' | 'key-events-carousel-mobile';\n\tabsoluteServerTimes: boolean;\n\trenderingTarget: RenderingTarget;\n}\ntype ValidBlock = Block & {\n\ttitle: string;\n\tblockFirstPublished: number;\n};\n\nconst carouselStyles = css`\n\tbackground-color: ${palette('--key-event-background')};\n\tscroll-snap-type: x mandatory;\n\tscroll-behavior: smooth;\n\toverflow-x: auto;\n\toverflow-y: hidden;\n\tmargin-right: -10px;\n\t${from.tablet} {\n\t\tmargin-right: -20px;\n\t}\n\n\t${from.desktop} {\n\t\tmargin-right: 0px;\n\t\tbackground-color: ${palette('--key-event-background-desktop')};\n\t\tscrollbar-width: none;\n\t\t&::-webkit-scrollbar {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\nconst leftMarginStyles = css`\n\t${from.desktop} {\n\t\tmargin-left: 240px;\n\t}\n`;\n\nconst marginBottomStyles = css`\n\t${from.desktop} {\n\t\tmargin-bottom: ${space[12]}px;\n\t}\n`;\nconst titleStyles = css`\n\t${headlineBold17};\n\t/**\n\t * Typography preset styles should not be overridden.\n\t * This has been done because the styles do not directly map to the new presets.\n\t * Please speak to your team's designer and update this to use a more appropriate preset.\n\t */\n\tline-height: 1.3;\n\tpadding-top: ${space[3]}px;\n\tcolor: ${palette('--key-event-title')};\n`;\n\nconst containerStyles = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tflex-direction: row;\n\talign-items: stretch;\n\twidth: fit-content;\n\tposition: relative;\n`;\n\nconst buttonStyles = css`\n\tposition: absolute;\n\tbottom: 0;\n\tmargin-bottom: ${space[4]}px;\n\tbackground-color: ${palette('--key-event-button')};\n\t&:active,\n\t&:hover {\n\t\toutline: none;\n\t\tbackground-color: ${palette('--key-event-button-hover')};\n\t}\n\tsvg {\n\t\tfill: ${palette('--key-event-button-fill')};\n\t}\n`;\n\nconst leftButton = css`\n\tleft: ${space[5]}px;\n`;\n\nconst rightButton = css`\n\tright: ${space[5]}px;\n`;\n\nconst isValidKeyEvent = (keyEvent: Block): keyEvent is ValidBlock => {\n\treturn (\n\t\ttypeof keyEvent.title === 'string' &&\n\t\ttypeof keyEvent.blockFirstPublished === 'number'\n\t);\n};\nexport const KeyEventsCarousel = ({\n\tkeyEvents,\n\tfilterKeyEvents,\n\tid,\n\tabsoluteServerTimes,\n\trenderingTarget,\n}: Props) => {\n\tconst carousel = useRef<HTMLDivElement | null>(null);\n\tconst cardWidth = 200;\n\tconst isApps = renderingTarget === 'Apps';\n\n\tconst goPrevious = () => {\n\t\tif (carousel.current) carousel.current.scrollLeft -= cardWidth;\n\t};\n\tconst goNext = () => {\n\t\tif (carousel.current) carousel.current.scrollLeft += cardWidth;\n\t};\n\n\tconst onTouchStart = async () => {\n\t\tawait getInteractionClient().disableArticleSwipe(true);\n\t};\n\n\tconst onTouchEnd = async () => {\n\t\tawait getInteractionClient().disableArticleSwipe(false);\n\t};\n\n\tconst filteredKeyEvents = keyEvents.filter(isValidKeyEvent);\n\tconst carouselLength = filteredKeyEvents.length;\n\tconst shortCarousel = carouselLength <= 4;\n\tconst longCarousel = carouselLength > 6;\n\treturn (\n\t\t<>\n\t\t\t<span id={id} />\n\t\t\t<Hide from=\"desktop\">\n\t\t\t\t<div css={titleStyles}>Key events</div>\n\t\t\t</Hide>\n\t\t\t<div\n\t\t\t\tonTouchStart={isApps ? onTouchStart : undefined}\n\t\t\t\tonTouchEnd={isApps ? onTouchEnd : undefined}\n\t\t\t\tref={carousel}\n\t\t\t\tid=\"key-events-carousel\"\n\t\t\t\tcss={[carouselStyles, shortCarousel && leftMarginStyles]}\n\t\t\t>\n\t\t\t\t<ul css={[containerStyles, longCarousel && marginBottomStyles]}>\n\t\t\t\t\t{filteredKeyEvents.map((keyEvent, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<KeyEventCard\n\t\t\t\t\t\t\t\tkey={keyEvent.id}\n\t\t\t\t\t\t\t\tfilterKeyEvents={filterKeyEvents}\n\t\t\t\t\t\t\t\tid={keyEvent.id}\n\t\t\t\t\t\t\t\tblockFirstPublished={\n\t\t\t\t\t\t\t\t\tkeyEvent.blockFirstPublished\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisSummary={keyEvent.attributes.summary}\n\t\t\t\t\t\t\t\ttitle={keyEvent.title}\n\t\t\t\t\t\t\t\tcardPosition={`${index} of ${carouselLength}`}\n\t\t\t\t\t\t\t\tabsoluteServerTimes={absoluteServerTimes}\n\t\t\t\t\t\t\t\trenderingTarget={renderingTarget}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t\t<Hide until=\"desktop\">\n\t\t\t\t\t{longCarousel && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\thideLabel={true}\n\t\t\t\t\t\t\t\tcssOverrides={[buttonStyles, leftButton]}\n\t\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\t\ticon={<SvgChevronLeftSingle />}\n\t\t\t\t\t\t\t\tonClick={goPrevious}\n\t\t\t\t\t\t\t\taria-label=\"Move key events carousel backwards\"\n\t\t\t\t\t\t\t\tdata-link-name=\"key event carousel left chevron\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\thideLabel={true}\n\t\t\t\t\t\t\t\tcssOverrides={[buttonStyles, rightButton]}\n\t\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\t\ticon={<SvgChevronRightSingle />}\n\t\t\t\t\t\t\t\tonClick={goNext}\n\t\t\t\t\t\t\t\taria-label=\"Move key events carousel forwards\"\n\t\t\t\t\t\t\t\tdata-link-name=\"key event carousel right chevron\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Hide>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","import { isString, timeAgo } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { type EditionId, getEditionFromId } from '../lib/edition';\nimport { useIsInView } from '../lib/useIsInView';\n\ntype Props = {\n\t/** the time to compare with in milliseconds since epoch */\n\tthen: number;\n\t/** the time to compare to */\n\tnow: number;\n\teditionId: EditionId;\n};\n\nconst ONE_MINUTE = 60_000;\n/** Get the duration between two timestamp, with arbitrary precision */\nconst getDuration = ({\n\tthen,\n\tnow,\n\tprecision,\n}: {\n\tthen: number;\n\tnow: number;\n\tprecision: number;\n}) => Math.floor((now - then) / precision) * precision;\n\n/**\n * Wrapper around `timeAgo` which:\n * - handles dates in the future with “now”\n * - always returns a `string`\n * - floors `now` to the nearest minute in the client\n */\nconst relativeTime = (\n\tthen: number,\n\tnow: number,\n\tenvironment: 'server' | 'client',\n): string => {\n\tconst time = timeAgo(then, {\n\t\tnow:\n\t\t\tenvironment === 'server'\n\t\t\t\t? now\n\t\t\t\t: then +\n\t\t\t\t  getDuration({\n\t\t\t\t\t\tthen,\n\t\t\t\t\t\tnow: Date.now(),\n\t\t\t\t\t\tprecision: ONE_MINUTE,\n\t\t\t\t  }),\n\t});\n\n\treturn isString(time) ? time : 'now';\n};\n\n/**\n * Shows a recent time as relative, such as “3h ago”\n *\n * ## Why does this need to be an Island?\n *\n * We update the relative time on the browser on an interval.\n */\nexport const RelativeTime = ({ then, now, editionId }: Props) => {\n\tconst [inView, ref] = useIsInView({ repeat: true });\n\tconst [display, setDisplay] = useState(relativeTime(then, now, 'server'));\n\n\tuseEffect(() => {\n\t\tconst updateDisplay = () =>\n\t\t\tsetDisplay(relativeTime(then, now, 'client'));\n\t\tupdateDisplay();\n\t\tif (!inView) return;\n\t\tconst interval = setInterval(updateDisplay, ONE_MINUTE);\n\t\treturn () => clearInterval(interval);\n\t}, [inView, now, then]);\n\n\tconst date = new Date(then);\n\tconst { dateLocale, timeZone } = getEditionFromId(editionId);\n\n\treturn (\n\t\t<time\n\t\t\tref={ref}\n\t\t\tdateTime={date.toISOString()}\n\t\t\tdata-locale={dateLocale}\n\t\t\ttitle={date.toLocaleDateString(dateLocale, {\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t\tweekday: 'long',\n\t\t\t\tyear: 'numeric',\n\t\t\t\tmonth: 'long',\n\t\t\t\tday: 'numeric',\n\t\t\t\ttimeZoneName: 'long',\n\t\t\t\ttimeZone,\n\t\t\t})}\n\t\t>\n\t\t\t{display}\n\t\t</time>\n\t);\n};\n","import type {\n\tInt64,\n\tIThriftField,\n\tIThriftList,\n\tIThriftMap,\n\tIThriftMessage,\n\tIThriftSet,\n\tIThriftStruct,\n\tTTransport,\n\tTType,\n} from '@creditkarma/thrift-server-core';\nimport { MessageType, TProtocol } from '@creditkarma/thrift-server-core';\n\nexport abstract class TProtocolDecorator extends TProtocol {\n\tprivate concreteProtocol: TProtocol;\n\n\tconstructor(protocol: TProtocol) {\n\t\tsuper(protocol.getTransport());\n\t\tthis.concreteProtocol = protocol;\n\t}\n\n\tgetTransport(): TTransport {\n\t\treturn this.concreteProtocol.getTransport();\n\t}\n\tflush(): Buffer {\n\t\treturn this.concreteProtocol.flush();\n\t}\n\twriteMessageBegin(name: string, type: MessageType, seqid: number): void {\n\t\treturn this.concreteProtocol.writeMessageBegin(name, type, seqid);\n\t}\n\twriteMessageEnd(): void {\n\t\treturn this.concreteProtocol.writeMessageEnd();\n\t}\n\twriteStructBegin(name: string): void {\n\t\treturn this.concreteProtocol.writeStructBegin(name);\n\t}\n\twriteStructEnd(): void {\n\t\treturn this.concreteProtocol.writeStructEnd();\n\t}\n\twriteFieldBegin(name: string, type: TType, id: number): void {\n\t\treturn this.concreteProtocol.writeFieldBegin(name, type, id);\n\t}\n\twriteFieldEnd(): void {\n\t\treturn this.concreteProtocol.writeFieldEnd();\n\t}\n\twriteFieldStop(): void {\n\t\treturn this.concreteProtocol.writeFieldStop();\n\t}\n\twriteMapBegin(keyType: TType, valueType: TType, size: number): void {\n\t\treturn this.concreteProtocol.writeMapBegin(keyType, valueType, size);\n\t}\n\twriteMapEnd(): void {\n\t\treturn this.concreteProtocol.writeMapEnd();\n\t}\n\twriteListBegin(elementType: TType, size: number): void {\n\t\treturn this.concreteProtocol.writeListBegin(elementType, size);\n\t}\n\twriteListEnd(): void {\n\t\treturn this.concreteProtocol.writeListEnd();\n\t}\n\twriteSetBegin(elementType: TType, size: number): void {\n\t\treturn this.concreteProtocol.writeSetBegin(elementType, size);\n\t}\n\twriteSetEnd(): void {\n\t\treturn this.concreteProtocol.writeSetEnd();\n\t}\n\twriteBool(bool: boolean): void {\n\t\treturn this.concreteProtocol.writeBool(bool);\n\t}\n\twriteByte(b: number): void {\n\t\treturn this.concreteProtocol.writeByte(b);\n\t}\n\twriteI16(i16: number): void {\n\t\treturn this.concreteProtocol.writeI16(i16);\n\t}\n\twriteI32(i32: number): void {\n\t\treturn this.concreteProtocol.writeI32(i32);\n\t}\n\twriteI64(i64: number | Int64): void {\n\t\treturn this.concreteProtocol.writeI64(i64);\n\t}\n\twriteDouble(dbl: number): void {\n\t\treturn this.concreteProtocol.writeDouble(dbl);\n\t}\n\twriteString(arg: string): void {\n\t\treturn this.concreteProtocol.writeString(arg);\n\t}\n\twriteBinary(arg: string | Buffer): void {\n\t\treturn this.concreteProtocol.writeBinary(arg);\n\t}\n\treadMessageBegin(): IThriftMessage {\n\t\treturn this.concreteProtocol.readMessageBegin();\n\t}\n\treadMessageEnd(): void {\n\t\treturn this.concreteProtocol.readMessageEnd();\n\t}\n\treadStructBegin(): IThriftStruct {\n\t\treturn this.concreteProtocol.readStructBegin();\n\t}\n\treadStructEnd(): void {\n\t\treturn this.concreteProtocol.readStructEnd();\n\t}\n\treadFieldBegin(): IThriftField {\n\t\treturn this.concreteProtocol.readFieldBegin();\n\t}\n\treadFieldEnd(): void {\n\t\treturn this.concreteProtocol.readFieldEnd();\n\t}\n\treadMapBegin(): IThriftMap {\n\t\treturn this.concreteProtocol.readMapBegin();\n\t}\n\treadMapEnd(): void {\n\t\treturn this.concreteProtocol.readMapEnd();\n\t}\n\treadListBegin(): IThriftList {\n\t\treturn this.concreteProtocol.readListBegin();\n\t}\n\treadListEnd(): void {\n\t\treturn this.concreteProtocol.readListEnd();\n\t}\n\treadSetBegin(): IThriftSet {\n\t\treturn this.concreteProtocol.readSetBegin();\n\t}\n\treadSetEnd(): void {\n\t\treturn this.concreteProtocol.readSetEnd();\n\t}\n\treadBool(): boolean {\n\t\treturn this.concreteProtocol.readBool();\n\t}\n\treadByte(): number {\n\t\treturn this.concreteProtocol.readByte();\n\t}\n\treadI16(): number {\n\t\treturn this.concreteProtocol.readI16();\n\t}\n\treadI32(): number {\n\t\treturn this.concreteProtocol.readI32();\n\t}\n\treadI64(): Int64 {\n\t\treturn this.concreteProtocol.readI64();\n\t}\n\treadDouble(): number {\n\t\treturn this.concreteProtocol.readDouble();\n\t}\n\treadBinary(): Buffer {\n\t\treturn this.concreteProtocol.readBinary();\n\t}\n\treadString(): string {\n\t\treturn this.concreteProtocol.readString();\n\t}\n\tskip(type: TType): void {\n\t\treturn this.concreteProtocol.skip(type);\n\t}\n}\n\nexport class TMultiplexedProtocol extends TProtocolDecorator {\n\tstatic readonly separator = ':';\n\treadonly serviceName: string;\n\n\tconstructor(protocol: TProtocol, serviceName: string) {\n\t\tsuper(protocol);\n\t\tthis.serviceName = serviceName;\n\t}\n\n\twriteMessageBegin(name: string, type: MessageType, seqid: number): void {\n\t\tif (type === MessageType.CALL || type === MessageType.ONEWAY) {\n\t\t\tsuper.writeMessageBegin(\n\t\t\t\tthis.serviceName + TMultiplexedProtocol.separator + name,\n\t\t\t\ttype,\n\t\t\t\tseqid,\n\t\t\t);\n\t\t} else {\n\t\t\tsuper.writeMessageBegin(name, type, seqid);\n\t\t}\n\t}\n}\n","import type {\n\tIClientConstructor,\n\tIProtocolConstructor,\n\tITransportConstructor,\n\tProtocolType,\n\tThriftClient,\n\tTransportType,\n\tTTransport,\n} from '@creditkarma/thrift-server-core';\nimport {\n\tgetProtocol,\n\tgetTransport,\n\tTApplicationException,\n\tTApplicationExceptionType,\n\tThriftConnection,\n} from '@creditkarma/thrift-server-core';\nimport { TMultiplexedProtocol } from './protocols';\n\ndeclare global {\n\tinterface Window {\n\t\tnativeConnections?: Record<string, NativeConnection>;\n\t\tandroid?: {\n\t\t\tpostMessage: (data: string, connectionId: string) => void;\n\t\t};\n\t\twebkit?: {\n\t\t\tmessageHandlers: {\n\t\t\t\tiOSWebViewMessage: {\n\t\t\t\t\tpostMessage: (nativeMessage: NativeMessage) => void;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t}\n}\n\nexport interface NativeMessage {\n\tdata: string;\n\tconnectionId: string;\n}\n\ninterface PromiseResponse {\n\tresolve: (response: Buffer) => void;\n\treject: (error: Error) => void;\n\ttimeoutId: NodeJS.Timeout;\n}\n\nconst ACTION_TIMEOUT_MS = 30000;\n\nfunction sendNativeMessage(nativeMessage: NativeMessage): void {\n\tif (window.android) {\n\t\twindow.android.postMessage(\n\t\t\tnativeMessage.data,\n\t\t\tnativeMessage.connectionId,\n\t\t);\n\t} else if (window.webkit) {\n\t\twindow.webkit.messageHandlers.iOSWebViewMessage.postMessage(\n\t\t\tnativeMessage,\n\t\t);\n\t} else {\n\t\tconsole.warn('No native APIs available');\n\t}\n}\n\nlet uid = 1;\nconst getUniqueConnectionId = () => `connection-${uid++}`;\n\nexport class NativeConnection extends ThriftConnection {\n\tconnectionId = getUniqueConnectionId();\n\tpromises: PromiseResponse[] = [];\n\toutBuffer: NativeMessage[] = [];\n\n\tconstructor(\n\t\tTransport: ITransportConstructor,\n\t\tProtocol: IProtocolConstructor,\n\t) {\n\t\tsuper(Transport, Protocol);\n\t\tif (typeof window !== 'undefined') {\n\t\t\twindow.nativeConnections = window.nativeConnections ?? {};\n\t\t\twindow.nativeConnections[this.connectionId] = this;\n\t\t}\n\t}\n\n\treset(oldConnectionId: string): void {\n\t\tif (oldConnectionId === this.connectionId && window.nativeConnections) {\n\t\t\tconsole.warn('Reseting connection ' + oldConnectionId);\n\t\t\tdelete window.nativeConnections[this.connectionId];\n\t\t\tfor (const promise of this.promises) {\n\t\t\t\tpromise.reject(\n\t\t\t\t\tnew TApplicationException(\n\t\t\t\t\t\tTApplicationExceptionType.UNKNOWN,\n\t\t\t\t\t\t'Timeout error',\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.promises = [];\n\t\t\tthis.connectionId = getUniqueConnectionId();\n\t\t\twindow.nativeConnections[this.connectionId] = this;\n\t\t}\n\t}\n\n\treceive(message: NativeMessage): void {\n\t\tconst resolver = this.promises.shift();\n\t\tif (resolver) {\n\t\t\tclearTimeout(resolver.timeoutId);\n\t\t\tconst data = Buffer.from(message.data, 'base64');\n\t\t\tresolver.resolve(data);\n\t\t}\n\t\tthis.sendNextMessage();\n\t}\n\n\tprivate sendNextMessage(): void {\n\t\tconst message = this.outBuffer.shift();\n\t\tif (message) {\n\t\t\tconsole.log('Sending next message');\n\t\t\tsendNativeMessage(message);\n\t\t}\n\t}\n\n\tsend(dataToSend: Buffer): Promise<Buffer> {\n\t\tconst id = this.connectionId;\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias -- Reassign this\n\t\tconst connection = this;\n\t\treturn new Promise<Buffer>(function (res, rej): void {\n\t\t\tconnection.promises.push({\n\t\t\t\tresolve: res,\n\t\t\t\treject: rej,\n\t\t\t\ttimeoutId: setTimeout(function () {\n\t\t\t\t\tconnection.reset(id);\n\t\t\t\t}, ACTION_TIMEOUT_MS),\n\t\t\t});\n\t\t\tconst message: NativeMessage = {\n\t\t\t\tdata: dataToSend.toString('base64'),\n\t\t\t\tconnectionId: id,\n\t\t\t};\n\t\t\tif (connection.promises.length === 1) {\n\t\t\t\tconsole.log('Sending message immediately');\n\t\t\t\tsendNativeMessage(message);\n\t\t\t} else {\n\t\t\t\tconsole.log('Queing message because others in flight');\n\t\t\t\tconnection.outBuffer.push(message);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function createAppClient<TClient extends ThriftClient<void>>(\n\tServiceClient: IClientConstructor<TClient, void>,\n\ttransport: TransportType = 'buffered',\n\tprotocol: ProtocolType = 'compact',\n): TClient {\n\tclass NamedMultiplexedProtocol extends TMultiplexedProtocol {\n\t\tconstructor(tTransport: TTransport) {\n\t\t\tconst Protocol = getProtocol(protocol);\n\t\t\tsuper(new Protocol(tTransport), ServiceClient.serviceName ?? '');\n\t\t}\n\t}\n\tconst connection = new NativeConnection(\n\t\tgetTransport(transport),\n\t\tNamedMultiplexedProtocol,\n\t);\n\treturn new ServiceClient(connection);\n}\n","import * as Acquisitions from '@guardian/bridget/Acquisitions';\nimport * as Analytics from '@guardian/bridget/Analytics';\nimport * as Commercial from '@guardian/bridget/Commercial';\nimport * as Discussion from '@guardian/bridget/Discussion';\nimport * as Environment from '@guardian/bridget/Environment';\nimport * as Gallery from '@guardian/bridget/Gallery';\nimport * as Interaction from '@guardian/bridget/Interaction';\nimport * as Metrics from '@guardian/bridget/Metrics';\nimport * as Navigation from '@guardian/bridget/Navigation';\nimport * as Newsletters from '@guardian/bridget/Newsletters';\nimport * as Notifications from '@guardian/bridget/Notifications';\nimport * as Tag from '@guardian/bridget/Tag';\nimport * as User from '@guardian/bridget/User';\nimport * as Video from '@guardian/bridget/Videos';\nimport { isUndefined } from '@guardian/libs';\nimport { createAppClient } from './thrift/nativeConnection';\n\nlet environmentClient: Environment.Client<void> | undefined = undefined;\nexport const getEnvironmentClient = (): Environment.Client<void> => {\n\tif (isUndefined(environmentClient)) {\n\t\tenvironmentClient = createAppClient<Environment.Client<void>>(\n\t\t\tEnvironment.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn environmentClient;\n};\n\nlet commercialClient: Commercial.Client<void> | undefined = undefined;\nexport const getCommercialClient = (): Commercial.Client<void> => {\n\tif (isUndefined(commercialClient)) {\n\t\tcommercialClient = createAppClient<Commercial.Client<void>>(\n\t\t\tCommercial.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn commercialClient;\n};\n\nlet acquisitionsClient: Acquisitions.Client<void> | undefined = undefined;\nexport const getAcquisitionsClient = (): Acquisitions.Client<void> => {\n\tif (!acquisitionsClient) {\n\t\tacquisitionsClient = createAppClient<Acquisitions.Client<void>>(\n\t\t\tAcquisitions.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn acquisitionsClient;\n};\n\nlet notificationsClient: Notifications.Client<void> | undefined = undefined;\nexport const getNotificationsClient = (): Notifications.Client<void> => {\n\tif (!notificationsClient) {\n\t\tnotificationsClient = createAppClient<Notifications.Client<void>>(\n\t\t\tNotifications.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn notificationsClient;\n};\n\nlet tagClient: Tag.Client<void> | undefined = undefined;\nexport const getTagClient = (): Tag.Client<void> => {\n\tif (!tagClient) {\n\t\ttagClient = createAppClient<Tag.Client<void>>(\n\t\t\tTag.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn tagClient;\n};\n\nlet userClient: User.Client<void> | undefined = undefined;\nexport const getUserClient = (): User.Client<void> => {\n\tif (!userClient) {\n\t\tuserClient = createAppClient<User.Client<void>>(\n\t\t\tUser.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn userClient;\n};\nlet galleryClient: Gallery.Client<void> | undefined = undefined;\nexport const getGalleryClient = (): Gallery.Client<void> => {\n\tif (!galleryClient) {\n\t\tgalleryClient = createAppClient<Gallery.Client<void>>(\n\t\t\tGallery.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn galleryClient;\n};\nlet videoClient: Video.Client<void> | undefined = undefined;\nexport const getVideoClient = (): Video.Client<void> => {\n\tif (!videoClient) {\n\t\tvideoClient = createAppClient<Video.Client<void>>(\n\t\t\tVideo.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn videoClient;\n};\nlet metricsClient: Metrics.Client<void> | undefined = undefined;\nexport const getMetricsClient = (): Metrics.Client<void> => {\n\tif (!metricsClient) {\n\t\tmetricsClient = createAppClient<Metrics.Client<void>>(\n\t\t\tMetrics.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn metricsClient;\n};\nlet analyticsClient: Analytics.Client<void> | undefined = undefined;\nexport const getAnalyticsClient = (): Analytics.Client<void> => {\n\tif (!analyticsClient) {\n\t\tanalyticsClient = createAppClient<Analytics.Client<void>>(\n\t\t\tAnalytics.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn analyticsClient;\n};\n\nlet navigationClient: Navigation.Client<void> | undefined = undefined;\nexport const getNavigationClient = (): Navigation.Client<void> => {\n\tif (!navigationClient) {\n\t\tnavigationClient = createAppClient<Navigation.Client<void>>(\n\t\t\tNavigation.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn navigationClient;\n};\n\nlet newslettersClient: Newsletters.Client<void> | undefined = undefined;\nexport const getNewslettersClient = (): Newsletters.Client<void> => {\n\tif (!newslettersClient) {\n\t\tnewslettersClient = createAppClient<Newsletters.Client<void>>(\n\t\t\tNewsletters.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn newslettersClient;\n};\n\nlet discussionClient: Discussion.Client<void> | undefined = undefined;\nexport const getDiscussionClient = (): Discussion.Client<void> => {\n\tif (!discussionClient) {\n\t\tdiscussionClient = createAppClient<Discussion.Client<void>>(\n\t\t\tDiscussion.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn discussionClient;\n};\n\nlet interactionClient: Interaction.Client<void> | undefined = undefined;\nexport const getInteractionClient = (): Interaction.Client<void> => {\n\tif (!interactionClient) {\n\t\tinteractionClient = createAppClient<Interaction.Client<void>>(\n\t\t\tInteraction.Client,\n\t\t\t'buffered',\n\t\t\t'compact',\n\t\t);\n\t}\n\treturn interactionClient;\n};\n","import { isOneOf } from '@guardian/libs';\nimport { isTuple } from './tuple';\n\ntype EditionId = 'UK' | 'US' | 'AU' | 'INT' | 'EUR';\n\ntype Edition = (typeof editionList)[number];\n\nconst editionList = [\n\t{\n\t\turl: '/preference/edition/uk',\n\t\teditionId: 'UK',\n\t\tpageId: 'uk',\n\t\tlongTitle: 'UK edition',\n\t\ttitle: 'UK edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/London',\n\t\tlangLocale: 'en-GB',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'UK',\n\t},\n\t{\n\t\turl: '/preference/edition/us',\n\t\teditionId: 'US',\n\t\tpageId: 'us',\n\t\tlongTitle: 'US edition',\n\t\ttitle: 'US edition',\n\t\tdateLocale: 'en-us',\n\t\ttimeZone: 'America/New_York',\n\t\tlangLocale: 'en-US',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'US',\n\t},\n\t{\n\t\turl: '/preference/edition/au',\n\t\teditionId: 'AU',\n\t\tpageId: 'au',\n\t\tlongTitle: 'Australia edition',\n\t\ttitle: 'AU edition',\n\t\tdateLocale: 'en-au',\n\t\ttimeZone: 'Australia/Sydney',\n\t\tlangLocale: 'en-AU',\n\t\thasEditionalisedPages: true,\n\t\tshortTitle: 'Aus',\n\t},\n\t{\n\t\turl: '/preference/edition/eur',\n\t\teditionId: 'EUR',\n\t\tpageId: 'europe',\n\t\tlongTitle: 'Europe edition',\n\t\ttitle: 'Europe edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/Paris',\n\t\tlangLocale: 'en-EU',\n\t\thasEditionalisedPages: false,\n\t\tshortTitle: 'Eur',\n\t},\n\t{\n\t\turl: '/preference/edition/int',\n\t\teditionId: 'INT',\n\t\tpageId: 'international',\n\t\tlongTitle: 'International edition',\n\t\ttitle: 'International edition',\n\t\tdateLocale: 'en-gb',\n\t\ttimeZone: 'Europe/London',\n\t\tlangLocale: 'en',\n\t\thasEditionalisedPages: false,\n\t\tshortTitle: 'Int',\n\t},\n] as const satisfies ReadonlyArray<{\n\turl: string;\n\teditionId: EditionId;\n\tpageId: string;\n\tlongTitle: string;\n\ttitle: string;\n\tdateLocale: string;\n\ttimeZone: string;\n\tlangLocale?: string;\n\thasEditionalisedPages: boolean;\n\tshortTitle: string;\n}>;\n\nconst [ukEdition] = editionList;\n\n/**\n * The list of editionalised pages was copied from Frontend:\n * https://github.com/guardian/frontend/blob/60c6b55944d52d87039a2a844665cf39dc7fe437/common/app/common/Edition.scala#L20-L35\n */\nconst editionalisedPages = [\n\t'business',\n\t'business-to-business',\n\t'commentisfree',\n\t'culture',\n\t'money',\n\t'sport',\n\t'technology',\n\t'media',\n\t'environment',\n\t'film',\n\t'lifeandstyle',\n\t'travel',\n\t'tv-and-radio',\n] as const;\n\nconst getEditionFromId = (editionId: EditionId): Edition => {\n\treturn (\n\t\teditionList.find((edition) => edition.editionId === editionId) ??\n\t\tukEdition\n\t);\n};\n\nconst getEditionFromPageId = (pageId: string): Edition | undefined =>\n\teditionList.find((edition) => edition.pageId === pageId);\n\nconst getRemainingEditions = (editionId: EditionId): Edition[] => {\n\treturn editionList.filter((edition) => edition.editionId !== editionId);\n};\n\n/**\n * Determine if a string is one of the permitted edition strings\n *\n * @param s The string to test\n */\nconst isEditionId = isOneOf(editionList.map(({ editionId }) => editionId));\n\nconst isNetworkFront = (pageId: string): boolean =>\n\teditionList.some((edition) => edition.pageId === pageId);\n\n/**\n * Given an editionalised pageId such as 'uk/travel' split into ['uk', 'travel']\n * Checks:\n * a) the first section is a network front\n * b) the second section is an editionalised page\n */\nconst splitEditionalisedPage = (\n\tpageId: string,\n): undefined | [string, string] => {\n\tconst pageIdSplit = pageId.split('/');\n\tif (!isTuple(pageIdSplit, 2)) {\n\t\treturn undefined;\n\t}\n\tconst [networkId, pageIdSuffix] = pageIdSplit;\n\tif (!isNetworkFront(networkId)) {\n\t\treturn undefined;\n\t}\n\tconst hasMatch = editionalisedPages.some(\n\t\t(editionalisedPage) => editionalisedPage === pageIdSuffix,\n\t);\n\treturn hasMatch ? [networkId, pageIdSuffix] : undefined;\n};\n\nconst isEditionalisedPage = (pageId: string): boolean =>\n\t!!splitEditionalisedPage(pageId);\n\nexport {\n\tEditionId,\n\tEdition,\n\teditionList,\n\teditionalisedPages,\n\tgetEditionFromId,\n\tgetEditionFromPageId,\n\tgetRemainingEditions,\n\tisEditionId,\n\tisEditionalisedPage,\n\tisNetworkFront,\n\tsplitEditionalisedPage,\n};\n","import libDebounce from 'lodash.debounce';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\n/**\n * This file was copied into the source development kitchen from the following repository:\n * https://github.com/guardian/csnx/blob/main/libs/%40guardian/source-development-kitchen/src/react-components/ticker/useIsInView.ts\n *\n * Note: This version of the file uses `lodash.debounce`, whereas the original version does not.\n * As a result, we now have two versions of the `useIsInView` hook—one with `lodash.debounce` and one without.\n *\n * A discussion is needed to determine the best approach for consolidating these two versions into a single file.\n * Consider whether the use of `lodash.debounce` is necessary, and if so, integrate it into the consolidated version.\n */\n\ntype Options = {\n\t/**\n\t * Defaults to `undefined` (falsy),\n\t * which trigger a change the instantaneously.\n\t *\n\t * If `true`, debounce triggers by 200ms.\n\t * Enabling debouncing ensures the target element intersects\n\t * for at least 200ms before the callback is executed\n\t */\n\tdebounce?: true;\n\t/**\n\t * Defaults to `undefined` (falsy),\n\t * which only trigger on the first intersection.\n\t *\n\t * If `true`, trigger the hook on all intersections.\n\t */\n\trepeat?: true;\n\t/** Set the initial HTML Element, if known. */\n\tnode?: HTMLElement;\n};\n\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @returns a tuple containing `[isInView, setNode]`\n */\nconst useIsInView = (\n\toptions: IntersectionObserverInit & Options,\n): [boolean, React.Dispatch<React.SetStateAction<HTMLElement | null>>] => {\n\tconst [isInView, setIsInView] = useState<boolean>(false);\n\tconst [node, setNode] = useState<HTMLElement | null>(options.node ?? null);\n\n\tconst observer = useRef<IntersectionObserver | null>(null);\n\n\tconst intersectionObserverCallback =\n\t\tuseCallback<IntersectionObserverCallback>(\n\t\t\t([entry]) => {\n\t\t\t\tif (!entry) return;\n\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\tsetIsInView(true);\n\t\t\t\t} else if (options.repeat) {\n\t\t\t\t\tsetIsInView(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[options.repeat],\n\t\t);\n\n\tconst intersectionCallback = options.debounce\n\t\t? libDebounce(intersectionObserverCallback, 200)\n\t\t: intersectionObserverCallback;\n\n\tuseEffect(() => {\n\t\toptions.node && setNode(options.node);\n\t}, [options.node]);\n\n\tuseEffect(() => {\n\t\tif (!node) return;\n\t\t// Check for browser support https://caniuse.com/intersectionobserver\n\t\tif (!('IntersectionObserver' in window)) return;\n\n\t\tobserver.current = new window.IntersectionObserver(\n\t\t\tintersectionCallback,\n\t\t\toptions,\n\t\t);\n\n\t\tobserver.current.observe(node);\n\n\t\treturn () => observer.current?.disconnect();\n\t}, [node, options, intersectionCallback]);\n\n\tuseEffect(() => {\n\t\tif (!options.repeat && isInView) observer.current?.disconnect();\n\t}, [isInView, options.repeat]);\n\n\treturn [isInView, setNode];\n};\n\nexport { useIsInView };\n","import type { ColourName } from './paletteDeclarations';\n\n/**\n * Looks up a palette colour by name. Retrieves a CSS value for the specified\n * colour, for use in CSS declarations. See the examples for how this is\n * commonly used with our Emotion-based styles.\n *\n * @param a The name of a palette colour; for example `--headline-colour`.\n * @returns A CSS `var` function call; for example `var(--headline-colour)`.\n * @example\n * const styles = css`\n *   color: ${palette('--headline-colour')};\n *   background-color: ${palette('--headline-background-colour')};\n * `;\n */\nconst palette = (colour: ColourName): string => `var(${colour})`;\n\n// ----- Exports ----- //\n\nexport { palette };\n"],"names":["formatWeekday","date","locale","timeZone","toLocaleDateString","weekday","formatDate","day","month","year","replaceAll","formatTime","toLocaleTimeString","hour12","hour","minute","timeZoneName","replace","DateTime","showWeekday","showDate","showTime","display","absoluteServerTimes","editionId","useConfig","dateLocale","getEditionFromId","then","getTime","Island","priority","defer","until","RelativeTime","now","Math","floor","Date","time","dateTime","toISOString","data-locale","title","filter","isString","join","children","role","rootMargin","undefined","name","String","type","gu-island","deferUntil","props","JSON","stringify","data-spacefinder-role","linkStyles","css","palette","space","from","tablet","summaryStyles","listItemStyles","desktop","textStyles","textSans15","timeStyles","textSansBold14","KeyEventCard","id","blockFirstPublished","isSummary","filterKeyEvents","cardPosition","renderingTarget","url","searchParams","URLSearchParams","append","toString","getUrl","li","Link","cssOverrides","href","data-link-name","div","carouselStyles","leftMarginStyles","marginBottomStyles","titleStyles","headlineBold17","containerStyles","buttonStyles","leftButton","rightButton","isValidKeyEvent","keyEvent","KeyEventsCarousel","keyEvents","carousel","useRef","isApps","filteredKeyEvents","carouselLength","length","shortCarousel","longCarousel","span","Hide","onTouchStart","async","getInteractionClient","disableArticleSwipe","onTouchEnd","ref","ul","map","index","attributes","summary","Button","hideLabel","iconSide","icon","SvgChevronLeftSingle","onClick","current","scrollLeft","aria-label","size","SvgChevronRightSingle","getDuration","precision","relativeTime","environment","timeAgo","inView","useIsInView","repeat","setDisplay","useState","useEffect","updateDisplay","interval","setInterval","clearInterval","TProtocolDecorator","TProtocol","getTransport","this","concreteProtocol","flush","writeMessageBegin","seqid","writeMessageEnd","writeStructBegin","writeStructEnd","writeFieldBegin","writeFieldEnd","writeFieldStop","writeMapBegin","keyType","valueType","writeMapEnd","writeListBegin","elementType","writeListEnd","writeSetBegin","writeSetEnd","writeBool","bool","writeByte","b","writeI16","i16","writeI32","i32","writeI64","i64","writeDouble","dbl","writeString","arg","writeBinary","readMessageBegin","readMessageEnd","readStructBegin","readStructEnd","readFieldBegin","readFieldEnd","readMapBegin","readMapEnd","readListBegin","readListEnd","readSetBegin","readSetEnd","readBool","readByte","readI16","readI32","readI64","readDouble","readBinary","readString","skip","constructor","protocol","super","TMultiplexedProtocol","MessageType","CALL","ONEWAY","serviceName","separator","sendNativeMessage","nativeMessage","window","android","postMessage","data","connectionId","webkit","messageHandlers","iOSWebViewMessage","console","warn","uid","getUniqueConnectionId","NativeConnection","ThriftConnection","reset","oldConnectionId","nativeConnections","promise","promises","reject","TApplicationException","TApplicationExceptionType","UNKNOWN","receive","message","resolver","shift","clearTimeout","timeoutId","Buffer","resolve","sendNextMessage","outBuffer","log","send","dataToSend","connection","Promise","res","rej","push","setTimeout","Transport","Protocol","createAppClient","ServiceClient","transport","tTransport","getProtocol","environmentClient","getEnvironmentClient","isUndefined","Environment","Client","commercialClient","getCommercialClient","Commercial","acquisitionsClient","getAcquisitionsClient","Acquisitions","notificationsClient","getNotificationsClient","Notifications","tagClient","getTagClient","Tag","userClient","getUserClient","User","galleryClient","getGalleryClient","Gallery","videoClient","getVideoClient","Video","analyticsClient","getAnalyticsClient","Analytics","navigationClient","getNavigationClient","Navigation","discussionClient","getDiscussionClient","Discussion","interactionClient","Interaction","editionList","pageId","longTitle","langLocale","hasEditionalisedPages","shortTitle","ukEdition","find","edition","getEditionFromPageId","isNetworkFront","isOneOf","some","options","isInView","setIsInView","node","setNode","observer","intersectionObserverCallback","useCallback","entry","isIntersecting","intersectionCallback","debounce","libDebounce","IntersectionObserver","observe","disconnect","colour"],"sourceRoot":""}