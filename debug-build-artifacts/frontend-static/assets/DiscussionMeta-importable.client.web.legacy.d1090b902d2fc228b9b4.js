"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[7018],{9938:(n,t,e)=>{e.r(t),e.d(t,{DiscussionMeta:()=>d});var r=e(50484),i=e(71456),o=e(17950),a=e(73556),u=e(66186),c=e(230),s=e(39841),d=function(n){var t=n.discussionApiUrl,e=n.shortUrlId,d=n.enableDiscussionSwitch,f=(0,u.w)(),l=(0,c.e_)(t,e),v=(0,a.g)((0,i.w)(t,"discussion",e),{dedupingInterval:8e3}).data,h=(0,a.g)("SignedInWithOkta"===f.kind||"SignedInWithCookies"===f.kind?(0,i.w)(t,"profile/me?strict_sanctions_check=false"):void 0,{},"SignedInWithOkta"===f.kind||"SignedInWithCookies"===f.kind?(0,o.Kv)(f):void 0).data;return(0,r.jsx)(s.C,{enableDiscussionSwitch:d,user:null==h?void 0:h.userProfile,commentCount:l,isClosedForComments:null==v?void 0:v.discussion.isClosedForComments})}},73556:(n,t,e)=>{e.d(t,{g:()=>a});var r=e(65656),i=e(29273);function o(n){if(!n.ok)throw Error(n.statusText||"useApi | An api call returned HTTP status ".concat(n.status));return n}var a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,a=(0,i.Ay)(n,function(n){return function(t){return fetch(t,n).then(o).then((function(n){return n.json()}))}}(e),t),u=a.data,c=a.error;return{data:u,error:c,loading:!!n&&(0,r.b)(c)&&(0,r.b)(u)}}},66186:(n,t,e)=>{e.d(t,{T:()=>a,w:()=>u});var r=e(22820),i=e(67400),o=e(17950),a=function(){switch(u().kind){case"Pending":return"Pending";case"SignedInWithCookies":case"SignedInWithOkta":return!0;case"SignedOutWithCookies":case"SignedOutWithOkta":return!1}},u=function(){var n=(0,i.useState)({kind:"Pending"}),t=(0,r.A)(n,2),e=t[0],a=t[1];return(0,i.useEffect)((function(){(0,o.kU)((function(n){a((0,o.dx)(n))}),(function(){return a((0,o.Hn)())})).catch((function(n){console.error(n)}))}),[]),e}},230:(n,t,e)=>{e.d(t,{e_:()=>l,uz:()=>v,z6:()=>f});var r=e(22820),i=e(31880),o=e(76720),a=e(90760),u=e(67400),c=e(73556);function s(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}var d,f="data-discussion-id",l=function(n,t){var e=(0,u.useState)(),s=(0,r.A)(e,2),l=s[0],v=s[1];(0,u.useEffect)((function(){var e;null!==(e=d)&&void 0!==e||(d=new Set((0,i.A)(document.querySelectorAll("[".concat(f,"]"))).map((function(n){return n.getAttribute(f)})).filter(o.R))),d.add(t);var r="".concat(n,"/getCommentCounts?").concat(new URLSearchParams({"short-urls":(0,i.A)(d).sort().join(",")}).toString());v(r)}),[n,t]);var h=(0,c.g)(l).data,g=(0,a.G)(h)?h[t]:void 0;return"number"==typeof g?g:void 0},v=function(n){if(d){var t,e=function(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return s(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw o}}}}(n);try{for(e.s();!(t=e.n()).done;){var r=t.value;d.add(r)}}catch(n){e.e(n)}finally{e.f()}}}}}]);
//# sourceMappingURL=DiscussionMeta-importable.client.web.legacy.d1090b902d2fc228b9b4.js.map