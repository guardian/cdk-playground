"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[3454],{34270:(e,t,n)=>{n.r(t),n.d(t,{Liveness:()=>C});var r=n(50484),o=n(9474),a=n(67400),c=n(99365),i=n(21599),l=n(6576),s=n(24017),u=n(96378),d=n(3959),b=n(27123),f=n(46080),p=n(53694);function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(){const e=m(["\n\t\t\t\tbackground-color: ",";\n\t\t\t\t:hover {\n\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\tborder: 1px solid\n\t\t\t\t\t\t",";\n\t\t\t\t}\n\t\t\t"]);return y=function(){return e},e}function h(){const e=m(["\n\t\t\t\tbackground-color: transparent;\n\t\t\t"]);return h=function(){return e},e}function w(){const e=m(["\n\t\t\t\tborder: 1px solid currentColor;\n\t\t\t"]);return w=function(){return e},e}function M(){const e=m(["\n\t\t\t\tborder: none;\n\t\t\t"]);return M=function(){return e},e}function g(){const e=m(["\n\t\t\t\tcolor: ",";\n\t\t\t"]);return g=function(){return e},e}function v(){const e=m(["\n\t\t\t\tcolor: ",";\n\t\t\t"]);return v=function(){return e},e}const O=f.SY[100];function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k=e=>{var{children:t,priority:n="primary"}=e,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children","priority"]);const a=(e=>{switch(e){case"primary":case"secondary":return(0,s.css)(y(),(0,p.M)("--editorial-button-background"),(0,p.M)("--editorial-button-background-hover"),(0,p.M)("--editorial-button-border-hover"));case"subdued":case"tertiary":return(0,s.css)(h())}})(n),c=(e=>{switch(e){case"primary":case"secondary":case"tertiary":return(0,s.css)(w());case"subdued":return(0,s.css)(M())}})(n),i=(e=>{switch(e){case"primary":case"secondary":return(0,s.css)(g(),O);case"subdued":case"tertiary":return(0,s.css)(v(),(0,p.M)("--editorial-button-text"))}})(n);return(0,r.jsx)(b.$,(l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}({priority:n,cssOverrides:[a,c,i]},o),u=null!=(u={children:t})?u:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(u)).forEach((function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(u,e))})),l));var l,u};function P(){const e=(t=["\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: ","px;\n\t\t\t"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return P=function(){return e},e}const S=e=>{let{size:t}=e;const n=t<=24,o=n?0:(t-24)/2;return(0,r.jsx)("svg",{viewBox:n?"0 0 24 24":"-".concat(o," -").concat(o," ").concat(t," ").concat(t),width:t,height:t,children:(0,r.jsx)("path",{d:"M11.588 1a10.928 10.928 0 0 0-9.046 4.786l.126.676.877.527.676-.176C5.85 4.508 8.506 2.98 11.588 2.98c4.936 0 8.995 4.059 8.995 9.045 0 4.961-4.059 8.995-8.995 8.995-2.832 0-5.262-1.252-6.94-3.257l3.632-.601v-1.253H1.866l-.476.476V23h1.227l.627-3.784C5.248 21.546 8.205 23 11.588 23c6.089 0 11.025-4.911 11.025-10.975A11.01 11.01 0 0 0 11.588 1Z"})})},L=e=>{let{count:t,onClick:n}=e;return(0,r.jsxs)("div",{css:(0,s.css)(P(),u.x[2]),"data-testid":"toast",children:[(0,r.jsx)(d.L,{above:"phablet",children:(0,r.jsx)(k,{size:"xsmall",onClick:n,icon:(0,r.jsx)(S,{size:30}),children:"".concat(t," new update").concat(1===t?"":"s")})}),(0,r.jsx)(d.L,{below:"phablet",children:(0,r.jsx)(k,{size:"small",onClick:n,icon:(0,r.jsx)(S,{size:30}),children:"".concat(t," new update").concat(1===t?"":"s")})})]})};function x(){const e=document.querySelector("#liveblog-body"),t=null==e?void 0:e.querySelectorAll(".pending.block");if(t)for(const e of t)e.classList.add("reveal-slowly"),e.classList.remove("pending");!(0,o.b)(t)&&t.length>0&&document.dispatchEvent(new CustomEvent("liveblog:blocks-updated"))}const C=e=>{let{pageId:t,webTitle:n,ajaxUrl:o,filterKeyEvents:s,enhanceTweetsSwitch:u,onFirstPage:d,webURL:b,mostRecentBlockId:f,hasPinnedPost:p}=e;const[m,y]=(0,a.useState)(!1),[h,w]=(0,a.useState)(),[M,g]=(0,a.useState)(0),[v,O]=(0,a.useState)(f),[j,k]=(0,a.useState)(),[P,S]=(0,a.useState)(null),[C,E]=(0,a.useState)(null);(0,a.useEffect)((()=>{S(document.getElementById("top-of-blog")),E(document.getElementById("toast-root"))}),[]);const I=(0,a.useCallback)((e=>{if(e.numNewBlocks&&e.numNewBlocks>0){if(d)try{P&&function(e,t,n){const r=document.createElement("template");r.innerHTML=e+"\x3c!-- inserted at ".concat((new Date).toDateString()," --\x3e");const o=r.content;for(const e of o.querySelectorAll("article"))document.getElementById(e.id)&&e.remove();const a=o.querySelectorAll("gu-island");Promise.all([...a].map((e=>(0,i.v)(e,(0,c.K)()))));const l=document.querySelector("#liveblog-body");if(l&&(l.insertBefore(o,n.nextSibling),t)){const e=l.querySelectorAll(".pending.block");"undefined"!=typeof twttr&&twttr.ready((t=>{t.widgets.load(Array.from(e))}))}}(e.html,u,P)}catch(e){console.log(">> failed >>",e)}d&&h&&"visible"===document.visibilityState?(x(),g(0)):(y(!0),g((t=>t+e.numNewBlocks)))}e.mostRecentBlockId&&O(e.mostRecentBlockId)}),[u,d,P,h]);(0,a.useEffect)((()=>{window.mockLiveUpdate=I}),[I]),(0,a.useEffect)((()=>{k(function(e,t,n,r){try{const o=new URL("".concat(e,".json"),t);return o.searchParams.set("lastUpdate",n),o.searchParams.set("isLivePage","true"),o.searchParams.set("dcr","true"),o.searchParams.set("filterKeyEvents",r?"true":"false"),o.href}catch(n){return void window.guardian.modules.sentry.reportError(new Error("An error was thrown trying to construct a URL using pageId: ".concat(e," and ajaxUrl: ").concat(t)),"liveness-getkey")}}(t,o,v,s))}),[t,o,v,s]),(0,l.g)(j,{refreshInterval:1e4,refreshWhenHidden:!0,onSuccess:I}),(0,a.useEffect)((()=>{document.title=M>0?"(".concat(M,") ").concat(n):n}),[M,n]),(0,a.useEffect)((()=>{if(!P)return;const e=new window.IntersectionObserver((e=>{let[t]=e;t&&(w(t.isIntersecting),t.isIntersecting&&d&&(x(),g(0),y(!1)))}));return e.observe(P),()=>{e.disconnect()}}),[P,d]),(0,a.useEffect)((()=>{const e=()=>{"visible"===document.visibilityState&&M>0&&h&&d&&(x(),g(0),y(!1))};return window.addEventListener("visibilitychange",e),()=>{window.removeEventListener("visibilitychange",e)}}),[M,d,h]);const A=(0,a.useCallback)((()=>{const e=p?"top-of-blog":"maincontent";var t;d?(y(!1),null===(t=document.getElementById(e))||void 0===t||t.scrollIntoView({behavior:"smooth"}),window.history.replaceState({},"","#".concat(e)),x(),g(0)):window.location.href="".concat(b,"#").concat(e)}),[p,d,b]);return C&&m?(0,a.createPortal)((0,r.jsx)(L,{onClick:A,count:M}),C):null}},6576:(e,t,n)=>{n.d(t,{g:()=>c});var r=n(9474),o=n(29273);function a(e){if(!e.ok)throw Error(e.statusText||"useApi | An api call returned HTTP status ".concat(e.status));return e}const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const{data:c,error:i}=(0,o.Ay)(e,(e=>t=>fetch(t,e).then(a).then((e=>e.json())))(n),t);return{data:c,error:i,loading:!!e&&(0,r.b)(i)&&(0,r.b)(c)}}},53694:(e,t,n)=>{n.d(t,{M:()=>r});const r=e=>"var(".concat(e,")")},46080:(e,t,n)=>{n.d(t,{JU:()=>a,Qq:()=>v,SY:()=>c,Tp:()=>h,VD:()=>g,aL:()=>m,jP:()=>w,kX:()=>l,n8:()=>M,nJ:()=>O,wI:()=>s,wk:()=>o,yF:()=>j,z3:()=>i});var r=n(77907);const{brand:o,brandAlt:a,neutral:c,error:i,success:l,news:s,opinion:u,sport:d,culture:b,lifestyle:f,labs:p,specialReport:m,focus:y}=r.M,h={primary:r.M.neutral[100],secondary:r.M.neutral[97],inverse:r.M.neutral[10],ctaPrimary:r.M.brand[400],ctaPrimaryHover:"#234B8A",ctaSecondary:r.M.brand[800],ctaSecondaryHover:"#ACC9F7",ctaTertiaryHover:"#E5E5E5",input:r.M.neutral[100],inputChecked:r.M.brand[500]},w=(r.M.brand[400],r.M.neutral[100],r.M.neutral[100],r.M.brand[600],r.M.brand[300],{primary:r.M.brandAlt[400],ctaPrimary:r.M.neutral[7],ctaPrimaryHover:"#454545",ctaSecondary:r.M.brandAlt[200],ctaSecondaryHover:"#F2AE00",ctaTertiaryHover:"#FFD213"}),M=(r.M.neutral[60],r.M.neutral[86],r.M.success[400],r.M.error[400],r.M.brand[400],r.M.neutral[60],r.M.brand[500],r.M.brand[500],r.M.brand[500],r.M.focus[400],r.M.brand[600],r.M.brand[600],r.M.success[500],r.M.error[500],r.M.neutral[100],r.M.brand[800],r.M.neutral[100],r.M.neutral[100],r.M.neutral[7],{primary:r.M.neutral[86]}),g=(r.M.brand[600],{primary:r.M.neutral[7]}),v={primary:r.M.neutral[7],supporting:r.M.neutral[46],success:r.M.success[400],error:r.M.error[400],ctaPrimary:r.M.neutral[100],ctaSecondary:r.M.brand[400],ctaTertiary:r.M.brand[400],anchorPrimary:r.M.brand[500],anchorSecondary:r.M.neutral[7],userInput:r.M.neutral[7],inputLabel:r.M.neutral[7],inputError:r.M.neutral[7],inputLabelSupporting:r.M.neutral[46],inputChecked:r.M.brand[400],inputHover:r.M.brand[400],groupLabel:r.M.neutral[7],groupLabelSupporting:r.M.neutral[46],newsInverse:r.M.news[550]},O={primary:r.M.neutral[100],supporting:r.M.brand[800],success:r.M.success[500],error:r.M.error[500],ctaPrimary:r.M.brand[400],ctaSecondary:r.M.neutral[100],ctaTertiary:r.M.neutral[100],anchorPrimary:r.M.neutral[100],anchorPrimaryHover:r.M.brandAlt[400],userInput:r.M.neutral[100],inputLabel:r.M.neutral[100],inputLabelSupporting:r.M.brand[800]},j={primary:r.M.neutral[7],supporting:r.M.neutral[60],ctaPrimary:r.M.neutral[100],ctaSecondary:r.M.neutral[7],ctaTertiary:r.M.neutral[7],anchorPrimary:r.M.neutral[7]}},92280:(e,t,n)=>{n.d(t,{f:()=>r});const r={desktop:980,leftCol:1140,mobile:320,mobileLandscape:480,mobileMedium:375,phablet:660,tablet:740,wide:1300}},99923:(e,t,n)=>{n.d(t,{HT:()=>i,TG:()=>l,Tq:()=>s});var r=n(92280);const o=e=>"@media (min-width: ".concat("".concat(e,"px"),")"),a=e=>"@media (max-width: ".concat("".concat(e-.1,"px"),")"),c=(e,t)=>"@media (min-width: ".concat("".concat(e,"px"),") and (max-width: ").concat("".concat(t-.1,"px"),")"),i={mobile:o(r.f.mobile),mobileMedium:o(r.f.mobileMedium),mobileLandscape:o(r.f.mobileLandscape),phablet:o(r.f.phablet),tablet:o(r.f.tablet),desktop:o(r.f.desktop),leftCol:o(r.f.leftCol),wide:o(r.f.wide)},l={mobile:a(r.f.mobile),mobileMedium:a(r.f.mobileMedium),mobileLandscape:a(r.f.mobileLandscape),phablet:a(r.f.phablet),tablet:a(r.f.tablet),desktop:a(r.f.desktop),leftCol:a(r.f.leftCol),wide:a(r.f.wide)},s={mobile:{and:{mobileMedium:c(r.f.mobile,r.f.mobileMedium),mobileLandscape:c(r.f.mobile,r.f.mobileLandscape),phablet:c(r.f.mobile,r.f.phablet),tablet:c(r.f.mobile,r.f.tablet),desktop:c(r.f.mobile,r.f.desktop),leftCol:c(r.f.mobile,r.f.leftCol),wide:c(r.f.mobileMedium,r.f.wide)}},mobileMedium:{and:{mobileLandscape:c(r.f.mobileMedium,r.f.mobileLandscape),phablet:c(r.f.mobileMedium,r.f.phablet),tablet:c(r.f.mobileMedium,r.f.tablet),desktop:c(r.f.mobileMedium,r.f.desktop),leftCol:c(r.f.mobileMedium,r.f.leftCol),wide:c(r.f.mobileMedium,r.f.wide)}},mobileLandscape:{and:{phablet:c(r.f.mobileLandscape,r.f.phablet),tablet:c(r.f.mobileLandscape,r.f.tablet),desktop:c(r.f.mobileLandscape,r.f.desktop),leftCol:c(r.f.mobileLandscape,r.f.leftCol),wide:c(r.f.mobileLandscape,r.f.wide)}},phablet:{and:{tablet:c(r.f.phablet,r.f.tablet),desktop:c(r.f.phablet,r.f.desktop),leftCol:c(r.f.phablet,r.f.leftCol),wide:c(r.f.phablet,r.f.wide)}},tablet:{and:{desktop:c(r.f.tablet,r.f.desktop),leftCol:c(r.f.tablet,r.f.leftCol),wide:c(r.f.tablet,r.f.wide)}},desktop:{and:{leftCol:c(r.f.desktop,r.f.leftCol),wide:c(r.f.desktop,r.f.wide)}},leftCol:{and:{wide:c(r.f.leftCol,r.f.wide)}}}},27123:(e,t,n)=>{n.d(t,{$:()=>i});var r=n(50484),o=n(43438),a=n(3645);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=e=>{var t,n,{priority:i,size:l,icon:s,iconSide:u,hideLabel:d,nudgeIcon:b,type:f="button",isLoading:p=!1,loadingAnnouncement:m="Loading",cssOverrides:y,children:h,theme:w}=e,M=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["priority","size","icon","iconSide","hideLabel","nudgeIcon","type","isLoading","loadingAnnouncement","cssOverrides","children","theme"]);return(0,r.jsx)("button",(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({css:(0,a.V)({size:l,priority:i,icon:s,hideLabel:d,iconSide:u,nudgeIcon:b,cssOverrides:y,isLoading:p,theme:w}),type:f,"aria-live":"polite","aria-label":p?m:void 0},M),n=null!=(n={children:(0,o.b)({hideLabel:d,iconSvg:s,isLoading:p,children:h})})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t))}},3959:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(50484),o=n(24017),a=n(99923);function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function i(){const e=c(["\n\t\t\t"," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t"]);return i=function(){return e},e}function l(){const e=c(["\n\t\t\t","\n\t\t\t"," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t"]);return l=function(){return e},e}const s=e=>{let t,{children:n,above:c,below:s,from:u=c,until:d=s}=e;return d&&(t=(0,o.css)(i(),a.TG[d])),u&&(t=(0,o.css)(l(),t,a.HT[u])),(0,r.jsx)("span",{css:t,children:n})}}}]);
//# sourceMappingURL=Liveness-importable.client.web.7a394dd791703fcf5818.js.map