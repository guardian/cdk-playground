{"version":3,"file":"6248.client.web.legacy.a646dffa7395b5ea60c3.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/components/Picture.tsx","webpack://@guardian/dotcom-rendering/./src/lib/articleFormat.ts","webpack://@guardian/dotcom-rendering/./src/lib/image.ts"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { breakpoints } from '@guardian/source/foundations';\nimport { Fragment, useCallback, useEffect, useState } from 'react';\nimport { ArticleDesign, ArticleDisplay, } from '../lib/articleFormat';\nimport { generateImageURL } from '../lib/image';\n/**\n * All business logic for image sizing is contained in this one function. This\n * is the source of truth.\n *\n * Based on image role, if it's main media or not, if we're in a lightbox or not\n * and the format of the article it is in, this function decides the width the\n * image should have at different breakpoints.\n *\n * Previously, this logic was set [in this Frontend file](https://github.com/guardian/frontend/blob/oliver/immersives-for-all/common/app/layout/ContentWidths.scala)\n *\n * Order is not important because the resulting array is sorted by breakpoint\n * prior to use.\n *\n */\nconst decideImageWidths = ({ role, isMainMedia, format, isLightbox, orientation, }) => {\n    if (isLightbox) {\n        switch (orientation) {\n            case 'portrait':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 480 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 480 },\n                    { breakpoint: breakpoints.phablet, width: 480 },\n                    { breakpoint: breakpoints.tablet, width: 660 },\n                    { breakpoint: breakpoints.desktop, width: 740 },\n                    { breakpoint: breakpoints.leftCol, width: 980 },\n                    { breakpoint: breakpoints.wide, width: 1140 },\n                ];\n            case 'landscape':\n            default:\n                return [\n                    { breakpoint: breakpoints.mobile, width: 480 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 660 },\n                    { breakpoint: breakpoints.phablet, width: 740 },\n                    { breakpoint: breakpoints.tablet, width: 980 },\n                    { breakpoint: breakpoints.desktop, width: 1140 },\n                    { breakpoint: breakpoints.leftCol, width: 1300 },\n                    { breakpoint: breakpoints.wide, width: 1900 },\n                ];\n        }\n    }\n    if (format.design === ArticleDesign.Picture) {\n        // the order is important here. Picture content type images come through as main media, so needs to appear\n        // above `isMainMedia`, so the images do not appear low quality.\n        return [\n            { breakpoint: breakpoints.mobile, width: 480 },\n            { breakpoint: breakpoints.mobileLandscape, width: 660 },\n            { breakpoint: breakpoints.phablet, width: 740 },\n            { breakpoint: breakpoints.tablet, width: 980 },\n            { breakpoint: breakpoints.desktop, width: 1140 },\n            { breakpoint: breakpoints.leftCol, width: 1300 },\n            { breakpoint: breakpoints.wide, width: 1900 },\n        ];\n    }\n    if (isMainMedia) {\n        switch (format.display) {\n            case ArticleDisplay.Immersive: {\n                // If display is Immersive then main media should *always*\n                // use these larger image sources\n                return [\n                    { breakpoint: breakpoints.mobile, width: 480 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 660 },\n                    { breakpoint: breakpoints.phablet, width: 740 },\n                    { breakpoint: breakpoints.tablet, width: 980 },\n                    { breakpoint: breakpoints.desktop, width: 1140 },\n                    { breakpoint: breakpoints.leftCol, width: 1300 },\n                    { breakpoint: breakpoints.wide, width: 1900 },\n                ];\n            }\n            case ArticleDisplay.Showcase:\n            case ArticleDisplay.NumberedList: {\n                if (format.design === ArticleDesign.Feature) {\n                    // The main image on feature articles gets larger sources when showcase\n                    // e.g.: http://www.theguardian.com/politics/2015/may/02/nicola-sturgeon-im-the-boss-now\n                    return [\n                        { breakpoint: breakpoints.mobile, width: 465 },\n                        { breakpoint: breakpoints.mobileLandscape, width: 645 },\n                        { breakpoint: breakpoints.phablet, width: 725 },\n                        { breakpoint: breakpoints.tablet, width: 965 },\n                        { breakpoint: breakpoints.desktop, width: 1125 },\n                        { breakpoint: breakpoints.leftCol, width: 1140 },\n                        { breakpoint: breakpoints.wide, width: 1300 },\n                    ];\n                }\n                else {\n                    return [\n                        { breakpoint: breakpoints.mobile, width: 465 },\n                        { breakpoint: breakpoints.mobileLandscape, width: 645 },\n                        { breakpoint: breakpoints.phablet, width: 660 },\n                        { breakpoint: breakpoints.tablet, width: 700 }, // desktop is also 700px\n                        { breakpoint: breakpoints.leftCol, width: 940 },\n                        { breakpoint: breakpoints.wide, width: 1020 },\n                    ];\n                }\n            }\n            default:\n                return [\n                    { breakpoint: breakpoints.mobile, width: 465 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 645 },\n                    { breakpoint: breakpoints.phablet, width: 620 },\n                    { breakpoint: breakpoints.tablet, width: 700 },\n                    { breakpoint: breakpoints.desktop, width: 620 },\n                ];\n        }\n    }\n    else if (format.design === ArticleDesign.LiveBlog ||\n        format.design === ArticleDesign.DeadBlog) {\n        switch (role) {\n            case 'thumbnail':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 120 }, // mobileLandscape and tablet are also 120px\n                    { breakpoint: breakpoints.tablet, width: 140 }, // desktop, leftCol and wide are also 140px\n                ];\n            case 'showcase':\n            case 'immersive':\n            case 'supporting':\n            case 'halfWidth':\n                return [{ breakpoint: breakpoints.mobile, width: 445 }];\n            case 'podcastCover':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 140 },\n                    { breakpoint: breakpoints.wide, width: 219 },\n                ];\n            case 'inline':\n            default:\n                return [\n                    { breakpoint: breakpoints.mobile, width: 465 },\n                    { breakpoint: breakpoints.phablet, width: 700 },\n                ];\n        }\n    }\n    else {\n        switch (role) {\n            case 'showcase':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 445 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 605 },\n                    { breakpoint: breakpoints.phablet, width: 620 }, // tablet is also 620px\n                    { breakpoint: breakpoints.desktop, width: 640 },\n                    { breakpoint: breakpoints.leftCol, width: 800 },\n                    { breakpoint: breakpoints.wide, width: 880 },\n                ];\n            case 'supporting':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 445 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 605 },\n                    { breakpoint: breakpoints.phablet, width: 620 }, // tablet is also 620px\n                    { breakpoint: breakpoints.desktop, width: 300 }, // leftCol is also 300px\n                    { breakpoint: breakpoints.wide, width: 380 },\n                ];\n            case 'thumbnail':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 120 }, // mobileLandscape and tablet are also 120px\n                    { breakpoint: breakpoints.tablet, width: 140 }, // desktop, leftCol and wide are also 140px\n                ];\n            case 'immersive':\n                return [\n                    { breakpoint: breakpoints.mobile, width: 465 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 645 },\n                    { breakpoint: breakpoints.phablet, width: 725 },\n                    { breakpoint: breakpoints.tablet, width: 965 },\n                    { breakpoint: breakpoints.desktop, width: 1125 },\n                    { breakpoint: breakpoints.leftCol, width: 1140 },\n                    { breakpoint: breakpoints.wide, width: 1300 },\n                ];\n            case 'halfWidth':\n                return [{ breakpoint: breakpoints.mobile, width: 445 }];\n            case 'inline':\n            default:\n                return [\n                    { breakpoint: breakpoints.mobile, width: 445 },\n                    { breakpoint: breakpoints.mobileLandscape, width: 605 },\n                    { breakpoint: breakpoints.phablet, width: 620 },\n                ];\n        }\n    }\n};\nconst descendingByBreakpoint = (a, b) => {\n    // We need to list the largest images first as browsers read top down and stop\n    // as soon as they hit a matching media query\n    return b.breakpoint - a.breakpoint;\n};\n/**\n * Used on `picture` and `img` to prevent them having a line-height,\n * as these are `inline` by default and only inline elements can have\n * line-height.\n *\n * We use flex for lightbox images because this ensures space is\n * reserved for the image as it loads\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#styling_with_css\n */\nconst block = css `\n\tdisplay: block;\n`;\nconst flex = css `\n\tdisplay: flex;\n`;\n/**\n * Generate image sources for an image.\n *\n * @param mainImage source image URL\n * @param imageWidths list of image widths\n * @param aspectRatio - Aspect ratio that the image should be cropped to (e.g., 5:4). Optional.\n */\nexport const generateSources = (mainImage, imageWidths, aspectRatio) => imageWidths\n    .slice()\n    .sort(descendingByBreakpoint)\n    .map(({ width: imageWidth, breakpoint }) => {\n    return {\n        breakpoint,\n        width: imageWidth,\n        hiResUrl: generateImageURL({\n            mainImage,\n            imageWidth,\n            resolution: 'high',\n            aspectRatio,\n        }),\n        lowResUrl: generateImageURL({\n            mainImage,\n            imageWidth,\n            resolution: 'low',\n            aspectRatio,\n        }),\n    };\n});\n/**\n * The assumption here is readers on devices that do not support srcset\n * are likely to be on poor network connections so we're going\n * to fallback to the smallest image.\n *\n * Sources are ordered in `descendingByBreakpoint` order,\n * so the last one is the smallest.\n */\nexport const getFallbackSource = (sources) => {\n    const [fallback] = sources.slice(-1);\n    if (!fallback)\n        throw new Error('No fallback images found');\n    return fallback;\n};\nexport const Sources = ({ sources }) => {\n    return (_jsx(_Fragment, { children: sources.map((source) => {\n            return (_jsxs(Fragment, { children: [_jsx(\"source\", { srcSet: source.hiResUrl, media: `(min-width: ${source.breakpoint}px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: ${source.breakpoint}px) and (min-resolution: 120dpi)` }), _jsx(\"source\", { srcSet: source.lowResUrl, media: `(min-width: ${source.breakpoint}px)` })] }, source.breakpoint));\n        }) }));\n};\nexport const Picture = ({ role, format, master, alt, height, width, isMainMedia = false, loading, isLightbox = false, orientation = 'landscape', onLoad, aspectRatio, }) => {\n    const [loaded, setLoaded] = useState(false);\n    const ref = useCallback((node) => {\n        if (!node)\n            return;\n        if (node.complete) {\n            setLoaded(true);\n        }\n        else {\n            node.addEventListener('load', () => setLoaded(true));\n        }\n    }, []);\n    useEffect(() => {\n        if (loaded && onLoad)\n            onLoad();\n    }, [loaded, onLoad]);\n    const sources = generateSources(master, decideImageWidths({\n        role,\n        format,\n        isMainMedia,\n        isLightbox,\n        orientation,\n    }), aspectRatio);\n    /** portrait if higher than 1 or landscape if lower than 1 */\n    const ratio = height / width;\n    /**\n     * Immersive MainMedia elements fill the height of the viewport, meaning on mobile\n     * devices even though the viewport width is small, we'll need a larger image to\n     * maintain quality. To solve this problem we're using the viewport height (vh) to\n     * calculate width on portrait devices.\n\n     * If either of these media queries match then the browser will choose an image from the\n     * list of sources in srcset based on the viewport list. If the media query doesn't match\n     * it continues checking using the standard sources underneath\n     */\n    const sizes = ratio >= 1\n        ? // portrait or square\n            '100vw'\n        : // landscape\n            `${Math.round(100 / ratio)}vh`;\n    const fallbackSource = getFallbackSource(sources);\n    return (_jsxs(\"picture\", { css: isLightbox ? flex : block, children: [format.display === ArticleDisplay.Immersive && isMainMedia && (_jsxs(_Fragment, { children: [_jsx(\"source\", { media: \"(orientation: portrait) and (-webkit-min-device-pixel-ratio: 1.25), (orientation: portrait) and (min-resolution: 120dpi)\", sizes: sizes, srcSet: sources\n                            .map((source) => `${source.hiResUrl} ${source.width}w`)\n                            .join(',') }), _jsx(\"source\", { media: \"(orientation: portrait)\", sizes: sizes, srcSet: sources\n                            .map((source) => `${source.lowResUrl} ${source.width}w`)\n                            .join(',') })] })), _jsx(Sources, { sources: sources }), _jsx(\"img\", { ref: ref, alt: alt, src: fallbackSource.lowResUrl, width: fallbackSource.width, height: fallbackSource.width * ratio, loading: Picture.disableLazyLoading ? undefined : loading, css: isLightbox ? flex : block })] }));\n};\n// We use disableLazyLoading to decide if we want to turn off lazy loading of images site wide. We use this\n// to prevent false negatives on Chromatic snapshots (see /.storybook/config)\nPicture.disableLazyLoading = false;\n","import { isString } from '@guardian/libs';\nexport var ArticleDesign;\n(function (ArticleDesign) {\n    ArticleDesign[ArticleDesign[\"Standard\"] = 0] = \"Standard\";\n    ArticleDesign[ArticleDesign[\"Picture\"] = 1] = \"Picture\";\n    ArticleDesign[ArticleDesign[\"Gallery\"] = 2] = \"Gallery\";\n    ArticleDesign[ArticleDesign[\"Audio\"] = 3] = \"Audio\";\n    ArticleDesign[ArticleDesign[\"Video\"] = 4] = \"Video\";\n    ArticleDesign[ArticleDesign[\"Review\"] = 5] = \"Review\";\n    ArticleDesign[ArticleDesign[\"Analysis\"] = 6] = \"Analysis\";\n    ArticleDesign[ArticleDesign[\"Explainer\"] = 7] = \"Explainer\";\n    ArticleDesign[ArticleDesign[\"Comment\"] = 8] = \"Comment\";\n    ArticleDesign[ArticleDesign[\"Letter\"] = 9] = \"Letter\";\n    ArticleDesign[ArticleDesign[\"Feature\"] = 10] = \"Feature\";\n    ArticleDesign[ArticleDesign[\"LiveBlog\"] = 11] = \"LiveBlog\";\n    ArticleDesign[ArticleDesign[\"DeadBlog\"] = 12] = \"DeadBlog\";\n    ArticleDesign[ArticleDesign[\"Recipe\"] = 13] = \"Recipe\";\n    ArticleDesign[ArticleDesign[\"MatchReport\"] = 14] = \"MatchReport\";\n    ArticleDesign[ArticleDesign[\"Interview\"] = 15] = \"Interview\";\n    ArticleDesign[ArticleDesign[\"Editorial\"] = 16] = \"Editorial\";\n    ArticleDesign[ArticleDesign[\"Quiz\"] = 17] = \"Quiz\";\n    ArticleDesign[ArticleDesign[\"Interactive\"] = 18] = \"Interactive\";\n    ArticleDesign[ArticleDesign[\"PhotoEssay\"] = 19] = \"PhotoEssay\";\n    ArticleDesign[ArticleDesign[\"Obituary\"] = 20] = \"Obituary\";\n    ArticleDesign[ArticleDesign[\"Correction\"] = 21] = \"Correction\";\n    ArticleDesign[ArticleDesign[\"FullPageInteractive\"] = 22] = \"FullPageInteractive\";\n    ArticleDesign[ArticleDesign[\"NewsletterSignup\"] = 23] = \"NewsletterSignup\";\n    ArticleDesign[ArticleDesign[\"Timeline\"] = 24] = \"Timeline\";\n    ArticleDesign[ArticleDesign[\"Profile\"] = 25] = \"Profile\";\n})(ArticleDesign || (ArticleDesign = {}));\nexport var ArticleDisplay;\n(function (ArticleDisplay) {\n    ArticleDisplay[ArticleDisplay[\"Standard\"] = 0] = \"Standard\";\n    ArticleDisplay[ArticleDisplay[\"Immersive\"] = 1] = \"Immersive\";\n    ArticleDisplay[ArticleDisplay[\"Showcase\"] = 2] = \"Showcase\";\n    ArticleDisplay[ArticleDisplay[\"NumberedList\"] = 3] = \"NumberedList\";\n})(ArticleDisplay || (ArticleDisplay = {}));\nexport var Pillar;\n(function (Pillar) {\n    Pillar[Pillar[\"News\"] = 0] = \"News\";\n    Pillar[Pillar[\"Opinion\"] = 1] = \"Opinion\";\n    Pillar[Pillar[\"Sport\"] = 2] = \"Sport\";\n    Pillar[Pillar[\"Culture\"] = 3] = \"Culture\";\n    Pillar[Pillar[\"Lifestyle\"] = 4] = \"Lifestyle\";\n})(Pillar || (Pillar = {}));\nexport var ArticleSpecial;\n(function (ArticleSpecial) {\n    ArticleSpecial[ArticleSpecial[\"SpecialReport\"] = 5] = \"SpecialReport\";\n    ArticleSpecial[ArticleSpecial[\"Labs\"] = 6] = \"Labs\";\n    ArticleSpecial[ArticleSpecial[\"SpecialReportAlt\"] = 7] = \"SpecialReportAlt\";\n})(ArticleSpecial || (ArticleSpecial = {}));\n/**\n * NOTE: Immersive Opinion pieces are not supported,\n * i.e. when `CommentDesign` and `ImmersiveDisplay` are used jointly.\n */\nexport const decideDesign = ({ design }) => {\n    switch (design) {\n        case 'ArticleDesign':\n            return ArticleDesign.Standard;\n        case 'PictureDesign':\n            return ArticleDesign.Picture;\n        case 'GalleryDesign':\n            return ArticleDesign.Gallery;\n        case 'AudioDesign':\n            return ArticleDesign.Audio;\n        case 'VideoDesign':\n            return ArticleDesign.Video;\n        case 'ReviewDesign':\n            return ArticleDesign.Review;\n        case 'AnalysisDesign':\n            return ArticleDesign.Analysis;\n        case 'CommentDesign':\n            return ArticleDesign.Comment;\n        case 'LetterDesign':\n            return ArticleDesign.Letter;\n        case 'FeatureDesign':\n            return ArticleDesign.Feature;\n        case 'LiveBlogDesign':\n            return ArticleDesign.LiveBlog;\n        case 'DeadBlogDesign':\n            return ArticleDesign.DeadBlog;\n        case 'RecipeDesign':\n            return ArticleDesign.Recipe;\n        case 'MatchReportDesign':\n            return ArticleDesign.MatchReport;\n        case 'InterviewDesign':\n            return ArticleDesign.Interview;\n        case 'EditorialDesign':\n            return ArticleDesign.Editorial;\n        case 'QuizDesign':\n            return ArticleDesign.Quiz;\n        case 'InteractiveDesign':\n            return ArticleDesign.Interactive;\n        case 'PhotoEssayDesign':\n            return ArticleDesign.PhotoEssay;\n        case 'ObituaryDesign':\n            return ArticleDesign.Obituary;\n        case 'FullPageInteractiveDesign':\n            return ArticleDesign.FullPageInteractive;\n        case 'NewsletterSignupDesign':\n            return ArticleDesign.NewsletterSignup;\n        case 'ExplainerDesign':\n            return ArticleDesign.Explainer;\n        case 'TimelineDesign':\n            return ArticleDesign.Timeline;\n        case 'ProfileDesign':\n            return ArticleDesign.Profile;\n        default:\n            return ArticleDesign.Standard;\n    }\n};\nconst decideDisplay = ({ display, design, }) => {\n    switch (display) {\n        case 'StandardDisplay':\n            return ArticleDisplay.Standard;\n        case 'ImmersiveDisplay':\n            // Temporary hack until we can handle Immersive Comment pieces\n            return design === 'CommentDesign'\n                ? ArticleDisplay.Standard\n                : ArticleDisplay.Immersive;\n        case 'ShowcaseDisplay':\n            return ArticleDisplay.Showcase;\n        case 'NumberedListDisplay':\n            return ArticleDisplay.NumberedList;\n        default:\n            return ArticleDisplay.Standard;\n    }\n};\nexport const decideTheme = ({ theme }) => {\n    switch (theme) {\n        case 'NewsPillar':\n            return Pillar.News;\n        case 'OpinionPillar':\n            return Pillar.Opinion;\n        case 'SportPillar':\n            return Pillar.Sport;\n        case 'CulturePillar':\n            return Pillar.Culture;\n        case 'LifestylePillar':\n            return Pillar.Lifestyle;\n        case 'SpecialReportTheme':\n            return ArticleSpecial.SpecialReport;\n        case 'SpecialReportAltTheme':\n            return ArticleSpecial.SpecialReportAlt;\n        case 'Labs':\n            return ArticleSpecial.Labs;\n        default:\n            return Pillar.News;\n    }\n};\nexport const decideFormat = (format) => ({\n    design: decideDesign(format),\n    display: decideDisplay(format),\n    theme: decideTheme(format),\n});\nexport const getThemeNameAsString = (format) => {\n    const themeName = Pillar[format.theme] ?? ArticleSpecial[format.theme];\n    if (!themeName)\n        throw new Error('Unknown theme');\n    return themeName;\n};\n/**\n * We need a type guard because TypeScript enums are (confusingly)\n * returning both strings and numbers.\n */\nconst isTheme = (theme) => !isString(theme);\nconst isDesign = (design) => !isString(design);\nexport const getAllThemes = ({ display, design, }) => Object.values({ ...Pillar, ...ArticleSpecial })\n    .filter(isTheme)\n    .map((theme) => ({\n    theme,\n    display,\n    design,\n}));\nexport const getAllDesigns = ({ display, theme, }) => Object.values({ ...ArticleDesign })\n    .filter(isDesign)\n    .map((design) => ({\n    theme,\n    display,\n    design,\n}));\nconst designToFEDesign = (design) => {\n    switch (design) {\n        case ArticleDesign.Standard:\n        // Correction doesn't exist in `FEFormat`.\n        case ArticleDesign.Correction:\n            return 'ArticleDesign';\n        case ArticleDesign.Picture:\n            return 'PictureDesign';\n        case ArticleDesign.Gallery:\n            return 'GalleryDesign';\n        case ArticleDesign.Audio:\n            return 'AudioDesign';\n        case ArticleDesign.Video:\n            return 'VideoDesign';\n        case ArticleDesign.Review:\n            return 'ReviewDesign';\n        case ArticleDesign.Analysis:\n            return 'AnalysisDesign';\n        case ArticleDesign.Explainer:\n            return 'ExplainerDesign';\n        case ArticleDesign.Comment:\n            return 'CommentDesign';\n        case ArticleDesign.Letter:\n            return 'LetterDesign';\n        case ArticleDesign.Feature:\n            return 'FeatureDesign';\n        case ArticleDesign.LiveBlog:\n            return 'LiveBlogDesign';\n        case ArticleDesign.DeadBlog:\n            return 'DeadBlogDesign';\n        case ArticleDesign.Recipe:\n            return 'RecipeDesign';\n        case ArticleDesign.MatchReport:\n            return 'MatchReportDesign';\n        case ArticleDesign.Interview:\n            return 'InterviewDesign';\n        case ArticleDesign.Editorial:\n            return 'EditorialDesign';\n        case ArticleDesign.Quiz:\n            return 'QuizDesign';\n        case ArticleDesign.Interactive:\n            return 'InteractiveDesign';\n        case ArticleDesign.PhotoEssay:\n            return 'PhotoEssayDesign';\n        case ArticleDesign.Obituary:\n            return 'ObituaryDesign';\n        case ArticleDesign.FullPageInteractive:\n            return 'FullPageInteractiveDesign';\n        case ArticleDesign.NewsletterSignup:\n            return 'NewsletterSignupDesign';\n        case ArticleDesign.Timeline:\n            return 'TimelineDesign';\n        case ArticleDesign.Profile:\n            return 'ProfileDesign';\n    }\n};\nconst displayToFEDisplay = (display) => {\n    switch (display) {\n        case ArticleDisplay.Standard:\n            return 'StandardDisplay';\n        case ArticleDisplay.Immersive:\n            return 'ImmersiveDisplay';\n        case ArticleDisplay.Showcase:\n            return 'ShowcaseDisplay';\n        case ArticleDisplay.NumberedList:\n            return 'NumberedListDisplay';\n    }\n};\nconst themeToFETheme = (theme) => {\n    switch (theme) {\n        case Pillar.News:\n            return 'NewsPillar';\n        case Pillar.Opinion:\n            return 'OpinionPillar';\n        case Pillar.Sport:\n            return 'SportPillar';\n        case Pillar.Culture:\n            return 'CulturePillar';\n        case Pillar.Lifestyle:\n            return 'LifestylePillar';\n        case ArticleSpecial.SpecialReport:\n            return 'SpecialReportTheme';\n        case ArticleSpecial.Labs:\n            return 'Labs';\n        case ArticleSpecial.SpecialReportAlt:\n            return 'SpecialReportAltTheme';\n    }\n};\nexport const formatToFEFormat = ({ design, display, theme, }) => ({\n    design: designToFEDesign(design),\n    display: displayToFEDisplay(display),\n    theme: themeToFETheme(theme),\n});\n/**\n * Creates a string representation of {@linkcode ArticleFormat}. Useful for\n * logging, storybook UI etc.\n *\n * @param format An {@linkcode ArticleFormat}\n * @returns A string representation of `ArticleFormat`\n */\nexport const formatToString = ({ design, display, theme, }) => [\n    `${ArticleDesign[design]} Design`,\n    `${ArticleDisplay[display]} Display`,\n    `and ${Pillar[theme] ?? ArticleSpecial[theme]} Theme`,\n].join(', ');\n","const descendingByWidthComparator = (a, b) => {\n    return parseInt(b.fields.width, 10) - parseInt(a.fields.width, 10);\n};\nexport const getMaster = (images) => {\n    return images.find((image) => image.fields.isMaster);\n};\nexport const getLargest = (images) => {\n    return images.slice().sort(descendingByWidthComparator)[0];\n};\nconst getServiceFromUrl = (url) => {\n    const serviceName = url.hostname.split('.')[0] ?? '';\n    switch (serviceName) {\n        case 'static':\n        case 'static-secure':\n            return 'static';\n        case 'uploads':\n            return 'uploads';\n        case 'media':\n        default:\n            return 'media';\n    }\n};\n/**\n * Generates a URL for calling the Fastly Image Optimiser.\n *\n * @see https://developer.fastly.com/reference/io/\n * @see https://github.com/guardian/fastly-image-service/blob/main/fastly-io_guim_co_uk/src/main/resources/varnish/main.vcl\n *\n */\nexport const generateImageURL = ({ mainImage, imageWidth, resolution, aspectRatio = 'none', }) => {\n    const url = new URL(mainImage);\n    // In CODE, we do not generate optimised replacement images\n    if (url.hostname === 's3-eu-west-1.amazonaws.com')\n        return url.href;\n    const params = new URLSearchParams({\n        width: imageWidth.toString(),\n        dpr: String(resolution === 'high' ? 2 : 1),\n        s: 'none',\n        crop: aspectRatio,\n    });\n    return `https://i.guim.co.uk/img/${getServiceFromUrl(url)}${url.pathname}?${params.toString()}`;\n};\n"],"names":["descendingByBreakpoint","a","b","breakpoint","block","name","styles","flex","generateSources","mainImage","imageWidths","aspectRatio","slice","sort","map","_ref2","imageWidth","width","hiResUrl","generateImageURL","resolution","lowResUrl","getFallbackSource","sources","_sources$slice","fallback","_slicedToArray","Error","Sources","_ref3","_jsx","_Fragment","children","source","_jsxs","Fragment","srcSet","media","concat","Picture","_ref4","role","format","master","alt","height","_ref4$isMainMedia","isMainMedia","loading","_ref4$isLightbox","isLightbox","_ref4$orientation","orientation","onLoad","_useState","useState","_useState2","loaded","setLoaded","ref","useCallback","node","complete","addEventListener","useEffect","_ref","breakpoints","mobile","mobileLandscape","phablet","tablet","desktop","leftCol","wide","design","ArticleDesign","display","ArticleDisplay","Immersive","Showcase","NumberedList","Feature","LiveBlog","DeadBlog","decideImageWidths","ratio","sizes","Math","round","fallbackSource","css","join","src","disableLazyLoading","undefined","Pillar","ArticleSpecial","decideDesign","Standard","Gallery","Audio","Video","Review","Analysis","Comment","Letter","Recipe","MatchReport","Interview","Editorial","Quiz","Interactive","PhotoEssay","Obituary","FullPageInteractive","NewsletterSignup","Explainer","Timeline","Profile","decideDisplay","decideTheme","theme","News","Opinion","Sport","Culture","Lifestyle","SpecialReport","SpecialReportAlt","Labs","decideFormat","_ref$aspectRatio","url","URL","hostname","href","params","URLSearchParams","toString","dpr","String","s","crop","_url$hostname$split$","split","getServiceFromUrl","pathname"],"sourceRoot":""}