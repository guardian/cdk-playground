"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9382],{65744:(t,e,n)=>{n.r(e),n.d(e,{CalloutEmbedBlockComponent:()=>Ut});var r,o=n(50484),i=n(24017),c=n(77907),s=n(7351),a=n(27123),l=n(67400),u=n(53694);function d(){return d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d.apply(null,arguments)}const f=function(t){return l.createElement("svg",d({viewBox:"0 0 32 32"},t),r||(r=l.createElement("rect",{x:5,y:15,width:22,height:3})))};var p;function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b.apply(null,arguments)}const m=function(t){return l.createElement("svg",b({width:18,height:18,viewBox:"0 0 18 18"},t),p||(p=l.createElement("path",{d:"M8.2 0h1.6l.4 7.8 7.8.4v1.6l-7.8.4-.4 7.8H8.2l-.4-7.8L0 9.8V8.2l7.8-.4.4-7.8z"})))};var y=n(46080),h=n(95571),O=n(96378),j=n(70991);function v(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function g(){const t=v(["\n\t","\n"]);return g=function(){return t},t}function w(){const t=v(["\n\t","\n"]);return w=function(){return t},t}function x(){const t=v(["\n\t","\n\tcolor: ",";\n\tpadding-left: 5px;\n"]);return x=function(){return t},t}const P=(0,i.css)(g(),s.keT),D=(0,i.css)(w(),s.NA0),S=(0,i.css)(x(),s.fM9,c.M.neutral[46]),k=t=>{let{formField:e,hideLabel:n}=t;return(0,o.jsxs)("label",{css:[P,n&&j.Q],htmlFor:e.name,hidden:e.hideLabel,children:[e.label,!e.required&&(0,o.jsx)("span",{css:S,children:"Optional"}),!!e.description&&(0,o.jsx)("div",{children:(0,o.jsx)("span",{css:D,children:"".concat(e.description)})})]})};function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function z(){const t=E(["\n\tpadding-top: 10px;\n\tpadding-bottom: 10px;\n"]);return z=function(){return t},t}function L(){const t=E(["\n\tpadding-top: ","px;\n\tcolor: ",";\n\t",";\n"]);return L=function(){return t},t}const C=(0,i.css)(z()),M=(0,i.css)(L(),O.x[2],y.Qq.error,s.yui),T=t=>{let{formField:e,formData:n,setFormData:r}=t;const[i,c]=(0,l.useState)("");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k,{formField:e}),(0,o.jsx)("input",{"data-testid":"form-field-".concat(e.id),css:C,type:"file",accept:"image/*, .pdf",required:e.required,onChange:async t=>{var o,i,s,a;if(null===(o=t.target.files)||void 0===o?void 0:o[0]){c("");try{const o=await(i=t.target.files[0],new Promise(((t,e)=>{const n=new FileReader;n.addEventListener("load",(()=>{var r;const o=null===(r=n.result)||void 0===r?void 0:r.toString().split(";base64,")[1];o?t(o):e(new Error("Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files"))}),!1),n.addEventListener("error",(()=>{e(new Error("Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files"))})),n.readAsDataURL(i)})));r((s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){F(t,e,n[e])}))}return t}({},n),a=null!=(a={[e.id]:o})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(a)).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(a,t))})),s))}catch(t){c("Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files")}}}}),(0,o.jsx)("p",{children:"We accept images and pdfs. Maximum total file size: 6MB"}),!!i&&(0,o.jsx)("div",{css:M,children:i})]})};var q=n(37550),_=n(5820);function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const H=t=>{let{formField:e,formData:n,setFormData:r,validationErrors:i}=t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(q.$,{error:null==i?void 0:i[e.id],hideLabel:e.hideLabel,name:e.name,label:e.label,supporting:e.description,children:e.options.map(((t,c)=>{var s;const a=null!==(s=n[e.id])&&void 0!==s?s:[],l=!!a.find((e=>e===t.value));return(0,o.jsx)(_.S,{"data-testid":"form-field-".concat(t.value),label:t.label,value:t.value,checked:l,error:!!(null==i?void 0:i[e.id]),onChange:()=>{var o,i;r((o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){I(t,e,n[e])}))}return t}({},n),i=null!=(i={[e.id]:l?a.filter((e=>e!==t.value)):[...a,t.value]})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(i)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})),o))}},c)}))})})};var W=n(69913),N=n(90789);function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(){const t=(e=["\n\t\t\tfieldset {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return B=function(){return t},t}const Q=t=>{let{validationErrors:e,formField:n,formData:r,setFormData:c}=t;return(0,o.jsxs)("div",{css:(0,i.css)(B()),children:[(0,o.jsx)(k,{formField:n}),(0,o.jsx)(W.z,{error:null==e?void 0:e[n.id],name:n.name,orientation:n.options.length>2?"vertical":"horizontal",children:n.options.map(((t,e)=>{const i=n.id in r&&r[n.id]===t.value;return(0,o.jsx)(N.s,{"data-testid":"form-field-".concat(t.value),label:t.label,value:t.value,name:"".concat(n.id),checked:!!i,onChange:()=>{return c((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){$(t,e,n[e])}))}return t}({},r),o=null!=(o={[n.id]:t.value})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})),e));var e,o}},e)}))})]})},R=t=>{let{validationErrors:e,formField:n,formData:r,setFormData:i,multiple:c}=t;return(0,o.jsx)("div",{"data-testid":"form-field-".concat(n.id),children:c?(0,o.jsx)(H,{validationErrors:null!=e?e:void 0,formField:n,formData:r,setFormData:i}):(0,o.jsx)(Q,{validationErrors:null!=e?e:void 0,formField:n,formData:r,setFormData:i})})};var A=n(55932);function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const U=t=>{let{validationErrors:e,formField:n,formData:r,setFormData:i}=t;var c;return(0,o.jsx)(A.l,{hideLabel:n.hideLabel,"data-testid":"form-field-".concat(n.id),error:null==e?void 0:e[n.id],label:n.label,supporting:n.description,value:null!==(c=r[n.id])&&void 0!==c?c:"",onChange:t=>{return i((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){K(t,e,n[e])}))}return t}({},r),o=null!=(o={[n.id]:t.target.value})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})),e));var e,o},optional:!n.required,children:n.options.map(((t,e)=>(0,o.jsx)("option",{value:t.value,children:t.value},e)))})};var Y=n(3461);function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J(){const t=(e=["\n\twidth: 100%;\n\tmargin-top: ","px;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return J=function(){return t},t}const V=(0,i.css)(J(),O.x[2]),X=t=>{let{validationErrors:e,formField:n,formData:r,setFormData:i}=t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Y.f,{hideLabel:n.hideLabel,"data-testid":"form-field-".concat(n.id),label:n.label,supporting:n.description,cssOverrides:V,optional:!n.required,value:n.id in r?r[n.id]:"",error:null==e?void 0:e[n.id],onChange:t=>{return i((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){G(t,e,n[e])}))}return t}({},r),o=null!=(o={[n.id]:t.target.value})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})),e));var e,o}})})};var Z=n(32444);function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(){const t=(e=["\n\tmargin-top: ","px;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return et=function(){return t},t}const nt=(0,i.css)(et(),O.x[2]),rt=t=>{let{validationErrors:e,formField:n,formData:r,setFormData:i}=t;return(0,o.jsx)(Z.k,{hideLabel:n.hideLabel,error:null==e?void 0:e[n.id],cssOverrides:nt,"data-testid":"form-field-".concat(n.id),type:n.type,label:n.label,supporting:n.description,optional:!n.required,value:n.id in r?r[n.id]:"",onChange:t=>{return i((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){tt(t,e,n[e])}))}return t}({},r),o=null!=(o={[n.id]:t.target.value})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})),e));var e,o}})};function ot(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function it(){const t=ot(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n"]);return it=function(){return t},t}function ct(){const t=ot(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding-bottom: 15px;\n"]);return ct=function(){return t},t}function st(){const t=ot(["\n\tpadding-bottom: 10px;\n\tcolor: ",";\n\t",";\n"]);return st=function(){return t},t}function at(){const t=ot(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return at=function(){return t},t}function lt(){const t=ot(["\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: -62.5rem;\n\t\t\t\t"]);return lt=function(){return t},t}function ut(){const t=ot(["\n\t\t\t\t\t\ta,\n\t\t\t\t\t\ta:hover {\n\t\t\t\t\t\t\tborder: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext-align: right;\n\t\t\t\t\t"]);return ut=function(){return t},t}function dt(){const t=ot(["\n\t\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\t"]);return dt=function(){return t},t}const ft=(0,i.css)(it()),pt=(0,i.css)(ct()),bt=(0,i.css)(st(),y.Qq.error,s.keT),mt=(0,i.css)(at()),yt=t=>{let{formField:e,formData:n,setFormData:r}=t;switch(e.type){case"textarea":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X,{formField:e,formData:n,setFormData:r}),(0,o.jsx)("hr",{})]});case"file":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T,{formField:e,formData:n,setFormData:r}),(0,o.jsx)("hr",{})]});case"select":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U,{formField:e,formData:n,setFormData:r}),(0,o.jsx)("hr",{})]});case"checkbox":case"radio":return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R,{formField:e,formData:n,setFormData:r,multiple:"checkbox"===e.type}),(0,o.jsx)("hr",{})]});default:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rt,{formField:e,formData:n,setFormData:r}),(0,o.jsx)("hr",{})]})}},ht=t=>{let{onSubmit:e,formFields:n,error:r}=t;const[c,s]=(0,l.useState)(""),[u,d]=(0,l.useState)({});return(0,o.jsxs)("form",{action:"/formstack-campaign/submit",method:"post",css:ft,onSubmit:t=>{t.preventDefault(),e(u)},children:[n.map(((t,e)=>(0,o.jsx)("div",{css:mt,"custom-guardian":"callout-form-field",children:(0,o.jsx)(yt,{formField:t,formData:u,setFormData:d})},e))),(0,o.jsx)("div",{css:(0,i.css)(lt()),"aria-hidden":"true",children:(0,o.jsx)("input",{name:"twitter-handle",type:"text",id:"twitter-handle",tabIndex:-1,placeholder:"@mytwitterhandle",value:c,onChange:t=>s(t.target.value)})}),!!r&&(0,o.jsx)("div",{css:bt,children:r}),(0,o.jsxs)("div",{css:pt,children:[(0,o.jsx)(a.$,{priority:"secondary",size:"xsmall",type:"submit",children:"Share with the Guardian"}),(0,o.jsx)("div",{css:(0,i.css)(ut()),children:(0,o.jsx)(h.N,{priority:"secondary",target:"_blank",rel:"noreferrer",href:"https://www.theguardian.com/help/terms-of-service",cssOverrides:(0,i.css)(dt()),children:"Terms and conditions"})})]})]})};function Ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ot(t,e,n[e])}))}return t}function vt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function gt(){const t=vt(["\n\tmargin-bottom: 26px;\n\tmargin-top: 16px;\n"]);return gt=function(){return t},t}function wt(){const t=vt(["\n\tborder-top: 1px "," solid;\n\tborder-bottom: 1px "," solid;\n\tposition: relative;\n\tpadding-bottom: 10px;\n\n\t/* IE does not support summary HTML elements, so we need to hide children ourself */\n\t:not([open]) > *:not(summary) {\n\t\tdisplay: none;\n\t}\n"]);return wt=function(){return t},t}function xt(){const t=vt(["\n\tbackground-color: ",";\n"]);return xt=function(){return t},t}function Pt(){const t=vt(["\n\tmargin-right: 10px;\n"]);return Pt=function(){return t},t}function Dt(){const t=vt(["\n\t","\n"]);return Dt=function(){return t},t}function St(){const t=vt(['\n\t/* Removing default styles from summary tag */\n\t::-webkit-details-marker {\n\t\tdisplay: none;\n\t}\n\toutline: none;\n\n\t/* We don\'t want the summary to open when we click anything but the button, so we pointer-event: none the summary */\n\t/* 176da211-05aa-4280-859b-1e3157b3f19e */\n\tpointer-events: none;\n\n\t/*\n        why hide visibility?\n        because we want to prevent the user for tabbing to the summary HTML element\n        without using tabIndex={-1} which would disable focus on all child DOM elements\n\n        NOTE: requires "visibility: visible;" on child elements to display and enable focus\n    */\n\tvisibility: hidden;\n\n\ta {\n\t\t/* but we do want to allow click on links */\n\t\tpointer-events: all;\n\t}\n']);return St=function(){return t},t}function kt(){const t=vt(["\n\tvisibility: visible;\n\tmin-height: 70px;\n\tdisplay: flex;\n\tflex-direction: row;\n"]);return kt=function(){return t},t}function Ft(){const t=vt(["\n\t","\n\tcolor: ",";\n\tbackground-color: ",";\n\tmin-width: 88px;\n\tpadding-bottom: 6px;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\t::after {\n\t\tcontent: '';\n\t\twidth: 20px;\n\t\theight: 22px;\n\t\tborder-bottom-right-radius: 18px;\n\t\tposition: absolute;\n\t\tbackground-color: ",";\n\t}\n"]);return Ft=function(){return t},t}function Et(){const t=vt(["\n\t","\n"]);return Et=function(){return t},t}function zt(){const t=vt(["\n\t","\n"]);return zt=function(){return t},t}function Lt(){const t=vt(["\n\ta {\n\t\tcolor: ",";\n\t\ttext-decoration: none;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n"]);return Lt=function(){return t},t}function Ct(){const t=vt(["\n\tposition: absolute;\n\tcursor: pointer;\n\tmargin-top: -5px;\n\n\tvisibility: visible;\n\n\t/* We need to ensure our pointer-events are turned back on on the button */\n\t/* 176da211-05aa-4280-859b-1e3157b3f19e */\n\tpointer-events: all;\n"]);return Ct=function(){return t},t}function Mt(){const t=vt(["\n\t\t\t\t\t\t\t\t\t/* TODO: need to find an nicer way of dynamically setting svg dimensions */\n\t\t\t\t\t\t\t\t\tsvg {\n\t\t\t\t\t\t\t\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\t\t\t\t\t\t\t\twidth: 15px !important;\n\t\t\t\t\t\t\t\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\t\t\t\t\t\t\t\theight: 15px !important;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t"]);return Mt=function(){return t},t}const Tt=(0,i.css)(gt()),qt=(0,i.css)(wt(),c.M.neutral[86],c.M.neutral[86]),_t=(0,i.css)(xt(),c.M.neutral[97]),It=(0,i.css)(Pt()),Ht=(0,i.css)(Dt(),s.keT),Wt=(0,i.css)(St()),Nt=(0,i.css)(kt()),$t=(0,i.css)(Ft(),s.keT,c.M.neutral[100],(0,u.M)("--speech-bubble-background"),(0,u.M)("--speech-bubble-background")),Bt=(0,i.css)(Et(),s.keT),Qt=(0,i.css)(zt(),s.rDY),Rt=(0,i.css)(Lt(),c.M.brand[500]),At=(0,i.css)(Ct());let Kt=!0;const Ut=t=>{let{callout:e}=t,n=null,r=null,c=null;const[s,u]=(0,l.useState)(!1),[d,p]=(0,l.useState)(""),[b,y]=(0,l.useState)(!1),{title:h,description:O,formFields:j}=e;return(0,l.useEffect)((()=>{n=document.querySelector('button[custom-guardian="callout-form-open-button"]'),r=document.querySelector('\n            *[custom-guardian="callout-form-field"]:first-of-type input,\n            *[custom-guardian="callout-form-field"]:first-of-type select\n        '),c=document.querySelector('button[custom-guardian="callout-form-close-button"]');const t=t=>{if(9===t.keyCode){if(!r||!c)return;t.shiftKey||document.activeElement!==c||(null==r||r.focus(),t.preventDefault()),t.shiftKey&&document.activeElement===r&&(c.focus(),t.preventDefault())}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[s]),(0,l.useEffect)((()=>{s&&r&&r.focus()}),[s,r]),(0,l.useEffect)((()=>{s||!n||Kt||n.focus()}),[s,n]),(0,l.useEffect)((()=>{s&&(Kt=!1)}),[s]),(0,l.useEffect)((()=>{const t=t=>{27===t.keyCode&&u(!1)};return s&&document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[s,u]),b?(0,o.jsx)("figure",{"data-print-layout":"hide",css:Tt,children:(0,o.jsx)("details",{css:[qt,_t],"aria-hidden":!0,open:s,children:(0,o.jsx)("summary",{css:Wt,children:(0,o.jsxs)("div",{css:Nt,children:[(0,o.jsx)("div",{css:It,children:(0,o.jsx)("div",{css:$t,children:(0,o.jsx)("h4",{children:"Share your story"})})}),(0,o.jsx)("div",{css:Rt,children:(0,o.jsx)("p",{css:Ht,children:"Thank you for your contribution"})})]})})})}):(0,o.jsx)("figure",{"data-print-layout":"hide",css:Tt,children:(0,o.jsxs)("details",{css:[qt,s&&_t],"aria-hidden":!0,open:s,children:[(0,o.jsxs)("summary",{css:Wt,children:[(0,o.jsxs)("div",{css:Nt,children:[(0,o.jsx)("div",{css:It,children:(0,o.jsx)("div",{css:$t,children:(0,o.jsx)("h4",{children:"Share your story"})})}),(0,o.jsxs)("div",{css:Rt,children:[(0,o.jsx)("h4",{css:Bt,children:h}),!!O&&(0,o.jsx)("div",{css:Qt,dangerouslySetInnerHTML:{__html:O}})]})]}),!s&&(0,o.jsx)("span",{css:At,"aria-hidden":"true",children:(0,o.jsx)(a.$,{cssOverrides:(0,i.css)(Mt()),iconSide:"left",size:"xsmall",icon:(0,o.jsx)(m,{}),onClick:()=>u(!0),"custom-guardian":"callout-form-open-button",tabIndex:0,children:"Tell us"})})]}),(0,o.jsx)(ht,{formFields:j,onSubmit:async t=>{if(p(""),t.twitterHandle)return void p("Sorry we think you are a robot.");const n=Object.keys(t).reduce(((e,n)=>{return r=jt({},e),o=null!=(o={["field_".concat(n)]:t[n]})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(o)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})),r;var r,o}),{});return fetch(e.calloutsUrl,{method:"POST",body:JSON.stringify(jt({formId:e.formId,"twitter-handle":""},n)),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{201===t.status?(y(!0),u(!1)):p("Sorry, there was a problem submitting your form. Please try again later.")})).catch((t=>{window.guardian.modules.sentry.reportError(t,"callout-embed-submission"),p("Sorry, there was a problem submitting your form. Please try again later.")}))},error:d}),(0,o.jsx)("span",{css:At,"aria-hidden":"true",children:s&&(0,o.jsx)(a.$,{iconSide:"left",size:"xsmall",icon:(0,o.jsx)(f,{}),onClick:()=>u(!1),"custom-guardian":"callout-form-close-button",children:"Hide"})})]})})}},53694:(t,e,n)=>{n.d(e,{M:()=>r});const r=t=>"var(".concat(t,")")},95571:(t,e,n)=>{n.d(e,{N:()=>s});var r=n(50484),o=n(75906),i=n(77047);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s=t=>{var e,n,{priority:s="primary",icon:a,iconSide:l="left",cssOverrides:u,children:d,theme:f}=t,p=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["priority","icon","iconSide","cssOverrides","children","theme"]);return(0,r.jsx)("a",(e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){c(t,e,n[e])}))}return t}({css:(0,i.$Y)({priority:s,iconSvg:a,iconSide:l,cssOverrides:u,theme:f})},p),n=null!=(n={children:(0,o.F)({children:d,iconSvg:a,iconSide:l})})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e))}}}]);
//# sourceMappingURL=CalloutEmbedBlockComponent-importable.client.web.ac86e1b6c2432dc5180d.js.map