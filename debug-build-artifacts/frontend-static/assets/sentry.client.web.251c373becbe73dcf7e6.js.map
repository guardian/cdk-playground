{"version":3,"file":"sentry.client.web.251c373becbe73dcf7e6.js","mappings":"mNAMA,MAAMA,EAAyC,CAC9C,mBACA,IAAIC,OAAQ,4CACZ,uBACA,kBAyBK,OAAEC,GAAWC,OAAOC,UAEzBC,MAAM,aAAEC,GAAc,MACtBC,GACGL,EAEJM,EAAAA,GAAY,CACXC,aA3BoB,CACpB,yCACA,sBACA,qCACA,eACA,8BAIA,iBACA,yBACA,eACA,kBACA,6BACA,4DACA,yBACA,8CACA,wDAWAT,YACAU,IAAKJ,EACLK,YAAaJ,GAAS,MACtBK,aAAc,CAAC,IAAIC,EAAAA,EAAe,CAAEC,OAAQ,CAAC,YAC7CC,eAAgB,KAKhBC,EAAAA,eACiE,YAAjEb,OAAOC,SAASF,OAAOe,OAAMC,EAAAA,EAAAA,qBAAoB,aAEjDV,EAAAA,GAAc,cAAcU,EAAAA,EAAAA,qBAAoB,YAG1C,MAAMC,EAA2B,CAACC,EAAOC,EAASC,KACxDd,EAAAA,IAAiB,KAEhB,GADAA,EAAAA,GAAc,UAAWa,GACrBC,EACH,IAAK,MAAOC,EAAKC,KAAUC,OAAOC,QAAQJ,GACzCd,EAAAA,GAAce,EAAKC,GAGrBhB,EAAAA,GAAwBY,EAAM,GAC7B,C","sources":["webpack://@guardian/dotcom-rendering/./src/client/sentryLoader/sentry.ts"],"sourcesContent":["import * as Sentry from '@sentry/browser';\nimport type { BrowserOptions } from '@sentry/browser';\nimport { CaptureConsole } from '@sentry/integrations';\nimport { BUILD_VARIANT, dcrJavascriptBundle } from '../../../webpack/bundles';\nimport type { ReportError } from '../../types/sentry';\n\nconst allowUrls: BrowserOptions['allowUrls'] = [\n\t/webpack-internal/,\n\tnew RegExp(`/$(process.env.HOSTNAME || 'localhost')/`),\n\t/assets\\.guim\\.co\\.uk/,\n\t/ophan\\.co\\.uk/,\n];\n\n// Ignore these errors\n// https://docs.sentry.io/platforms/javascript/#decluttering-sentry\nconst ignoreErrors = [\n\t\"Can't execute code from a freed script\",\n\t/InvalidStateError/gi,\n\t'This video is no longer available.',\n\t'UnknownError',\n\t'The quota has been exceeded',\n\t// Browsers throw exceptions for cancelled network requests\n\t// https://stackoverflow.com/questions/55738408/javascript-typeerror-cancelled-error-when-calling-fetch-on-ios/70452078#70452078\n\t// https://request-cancellation-test.vercel.app/\n\t/Fetch error:/gi,\n\t'Network request failed',\n\t'NetworkError',\n\t'Failed to fetch',\n\t'TypeError: Failed to fetch',\n\t'TypeError: NetworkError when attempting to fetch resource',\n\t'TypeError: Load failed',\n\t'TypeError: Importing a module script failed',\n\t'TypeError: error loading dynamically imported module',\n];\n\nconst { config } = window.guardian;\nconst {\n\tpage: { dcrSentryDsn },\n\tstage,\n} = config;\n\nSentry.init({\n\tignoreErrors,\n\tallowUrls,\n\tdsn: dcrSentryDsn,\n\tenvironment: stage || 'DEV',\n\tintegrations: [new CaptureConsole({ levels: ['error'] })],\n\tmaxBreadcrumbs: 50,\n\t// sampleRate: // We use Math.random in init.ts to sample errors\n});\n\nif (\n\tBUILD_VARIANT &&\n\twindow.guardian.config.tests[dcrJavascriptBundle('Variant')] === 'variant'\n) {\n\tSentry.setTag('dcr.bundle', dcrJavascriptBundle('Variant'));\n}\n\nexport const reportError: ReportError = (error, feature, tags) => {\n\tSentry.withScope(() => {\n\t\tSentry.setTag('feature', feature);\n\t\tif (tags) {\n\t\t\tfor (const [key, value] of Object.entries(tags)) {\n\t\t\t\tSentry.setTag(key, value);\n\t\t\t}\n\t\t}\n\t\tSentry.captureException(error);\n\t});\n};\n"],"names":["allowUrls","RegExp","config","window","guardian","page","dcrSentryDsn","stage","Sentry","ignoreErrors","dsn","environment","integrations","CaptureConsole","levels","maxBreadcrumbs","BUILD_VARIANT","tests","dcrJavascriptBundle","reportError","error","feature","tags","key","value","Object","entries"],"sourceRoot":""}