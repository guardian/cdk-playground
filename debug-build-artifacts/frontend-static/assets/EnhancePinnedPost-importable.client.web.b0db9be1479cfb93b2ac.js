(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[4767],{44165:(e,t,n)=>{var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")(),f=Object.prototype.toString,d=Math.max,p=Math.min,v=function(){return l.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var r,o,i,u,c,s,a=0,l=!1,f=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,i=o;return r=o=void 0,a=t,u=e.apply(i,n)}function h(e){var n=e-s;return void 0===s||n>=t||n<0||f&&e-a>=i}function E(){var e=v();if(h(e))return _(e);c=setTimeout(E,function(e){var n=t-(e-s);return f?p(n,i-(e-a)):n}(e))}function _(e){return c=void 0,b&&r?g(e):(r=o=void 0,u)}function S(){var e=v(),n=h(e);if(r=arguments,o=this,s=e,n){if(void 0===c)return function(e){return a=e,c=setTimeout(E,t),l?g(e):u}(s);if(f)return c=setTimeout(E,t),g(s)}return void 0===c&&(c=setTimeout(E,t)),u}return t=y(t)||0,m(n)&&(l=!!n.leading,i=(f="maxWait"in n)?d(y(n.maxWait)||0,t):i,b="trailing"in n?!!n.trailing:b),S.cancel=function(){void 0!==c&&clearTimeout(c),a=0,r=s=o=c=void 0},S.flush=function(){return void 0===c?u:_(v())},S}},41959:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EnhancePinnedPost:()=>a});var r=n(88793),o=n(9474),i=n(67400),u=n(50026),c=n(58452),s=n(15593);const a=()=>{const[e,t]=(0,i.useState)(null),[n,a]=(0,i.useState)(null),[l,f]=(0,i.useState)(null);(0,i.useEffect)((()=>{t(document.querySelector("[data-gu-marker=pinned-post]")),a(document.querySelector("input[name=pinned-post-checkbox]")),f(document.querySelector("#collapsible-body"))}),[]);const[d,p]=(0,i.useState)(!1),[v]=(0,c.E)({threshold:.1,repeat:!0,node:null!=e?e:void 0}),{renderingTarget:m}=(0,s.U)(),y=(0,i.useRef)(),b=(0,i.useCallback)((()=>{if(!l)return;if(!n)return;const{checked:e}=n;!function(e,t){const n=document.querySelector("#pinned-post-button"),r=document.querySelector("#pinned-post-overlay");n&&(e?n.style.removeProperty("display"):t||(n.style.display="none")),r&&(e?r.style.removeProperty("display"):r.style.display="none")}(!(l.scrollHeight<=l.clientHeight),e)}),[n,l]);return(0,i.useEffect)((()=>{if(!e)return;b();const t=new MutationObserver(b);return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}),[b,e]),(0,i.useEffect)((()=>{if(!e)return;if(!n)return;const t=()=>{b(),((e,t,n)=>{e?(0,u.u_)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:t.id},action:"CLICK",value:"show-more"},n):((0,u.u_)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:t.id},action:"CLICK",value:"show-less"},n),(e=>{e.getBoundingClientRect().top<0&&e.scrollIntoView({behavior:"smooth"})})(t))})(n.checked,e,m)};return n.addEventListener("change",t),()=>n.removeEventListener("change",t)}),[b,e,n,m]),(0,i.useEffect)((()=>{if(e)if(v)p(!0),y.current=(0,r.h)("dotcom","pinned-post-view-duration");else if(d){var t;const n=null===(t=y.current)||void 0===t?void 0:t.endPerformanceMeasure();if(!(0,o.b)(n)){const t=n/1e3;(0,u.u_)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:e.id},action:"VIEW",value:t.toString()},m)}}}),[v,d,m,e]),null}},58452:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(44165),o=n.n(r),i=n(67400);const u=e=>{const[t,n]=(0,i.useState)(!1);var r;const[u,c]=(0,i.useState)(null!==(r=e.node)&&void 0!==r?r:null),s=(0,i.useRef)(null),a=(0,i.useCallback)((t=>{let[r]=t;r&&(r.isIntersecting?n(!0):e.repeat&&n(!1))}),[e.repeat]),l=e.debounce?o()(a,200):a;return(0,i.useEffect)((()=>{e.node&&c(e.node)}),[e.node]),(0,i.useEffect)((()=>{if(u&&"IntersectionObserver"in window)return s.current=new window.IntersectionObserver(l,e),s.current.observe(u),()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.disconnect()}}),[u,e,l]),(0,i.useEffect)((()=>{var n;!e.repeat&&t&&(null===(n=s.current)||void 0===n||n.disconnect())}),[t,e.repeat]),[t,c]}}}]);
//# sourceMappingURL=EnhancePinnedPost-importable.client.web.b0db9be1479cfb93b2ac.js.map