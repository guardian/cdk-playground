"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[3642],{57596:(e,n,a)=>{a.r(n),a.d(n,{ExpandableMarketingCardWrapper:()=>$});var i=a(18247),t=a(22820),r=a(57820),s=a.n(r),o=a(50484),d=a(64361),c=a(67400),l=a(45025),u=a(34166),p=a(66049),x=a(24017),f=a(81477),h=a(59648),b=a(52230),g=a(71653),v=a(95982),y=a(6569),k=a(53753),m=a(1954),j=a(7693),w=(0,x.css)("display:none;",f.HT.phablet,"{display:inline;}",f.HT.leftCol,"{display:none;}"),E=(0,x.css)("display:inline;",f.HT.phablet,"{display:none;}",f.HT.leftCol,"{display:inline;}"),C=function(e){var n=e.type,a=e.styles,i=(0,j.U)().assetOrigin,t="".concat(i,"static/frontend/logos/red-blue-small-banner-").concat(n,".svg"),r="".concat(i,"static/frontend/logos/red-blue-large-banner-").concat(n,".svg");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:t,alt:"",css:[a,w]}),(0,o.jsx)("img",{src:r,alt:"",css:[a,E]})]})},A=(0,x.css)("background-color:",(0,m.M)("--expandable-marketing-card-fill-background"),";width:100%;margin-top:-1px;margin-bottom:-1px;height:6px;",f.HT.desktop,"{height:4px;}"),S=(0,x.css)("position:relative;display:flex;flex-direction:column;justify-content:space-between;align-items:start;gap:",h.x[4],"px;height:auto;width:auto;padding:",h.x[2],"px;border-radius:0 0 ",h.x[2],"px ",h.x[2],"px;background-color:",(0,m.M)("--expandable-marketing-card-background"),";color:",b.SY[100],";"),I=(0,x.css)("display:flex;flex-direction:column;gap:",h.x[3],"px;z-index:1;width:100%;"),T=(0,x.css)(I," cursor:pointer;"),M=(0,x.css)("display:flex;gap:",h.x[2],"px;justify-content:space-between;",g.ccz,";",f.HT.wide,"{",g.aal,";}"),U=(0,x.css)(g.PSs,";",f.HT.leftCol,"{",g.WuG,";}",f.HT.wide,"{",g.PSs,";}"),H=(0,x.css)("flex-shrink:0;display:inline-flex;align-items:center;border:none;vertical-align:middle;justify-content:center;padding:0;width:",h.x[6],"px;height:",h.x[6],"px;background-color:",(0,m.M)("--expandable-marketing-card-svg-background"),";border-radius:50%;cursor:pointer;svg{flex:0 0 auto;display:block;fill:",(0,m.M)("--expandable-marketing-card-svg-fill"),";position:relative;width:",h.x[5],"px;height:auto;}"),D=(0,x.css)("display:flex;flex-direction:column;gap:",h.x[4],"px;margin-bottom:",h.x[2],"px;"),W=(0,x.css)("display:flex;flex-direction:column;gap:",h.x[3],"px;border-top:1px solid ",b.SY[100],";padding-top:",h.x[2],"px;"),L=(0,x.css)(g.ccz,";"),B=(0,x.css)(g.PSs," margin-right:",h.x[4],"px;z-index:1;"),O=(0,x.css)(g.rS6,";z-index:1;"),z={name:"1lby940",styles:"position:absolute;top:0;right:0"},R={name:"aeh0a8",styles:"position:absolute;right:0;bottom:0"},G=(0,x.css)("z-index:1;background-color:",(0,m.M)("--expandable-marketing-card-button-background"),";width:fit-content;",g.rDY,";",f.HT.wide,"{",g.rS6,";}"),P=function(e){var n=e.guardianBaseURL,a=e.heading,i=e.kicker,t=e.isExpanded,r=e.setIsClosed;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{css:A}),(0,o.jsx)("div",{css:S,children:t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C,{type:"top",styles:z}),(0,o.jsx)(C,{type:"bottom",styles:R}),(0,o.jsxs)("section",{css:I,children:[(0,o.jsxs)("div",{css:M,children:[(0,o.jsx)("h2",{children:a}),(0,o.jsx)("button",{"data-link-name":"us-expandable-marketing-card close-button",onClick:function(){r(!0)},type:"button",css:H,children:(0,o.jsx)(y.F,{})})]}),(0,o.jsx)("div",{css:U,children:i})]}),(0,o.jsxs)("div",{css:D,children:[(0,o.jsxs)("section",{css:W,children:[(0,o.jsx)("h3",{css:L,children:"We’re independent"}),(0,o.jsx)("p",{css:B,children:"With no billionaire owner or shareholders, our journalism is funded by readers"})]}),(0,o.jsxs)("section",{css:W,children:[(0,o.jsx)("h3",{css:L,children:"We’re open"}),(0,o.jsx)("p",{css:B,children:"With misinformation threatening democracy, we keep our fact-based news paywall-free"})]}),(0,o.jsxs)("section",{css:W,children:[(0,o.jsx)("h3",{css:L,children:"We’re global"}),(0,o.jsx)("p",{css:B,children:"With 200 years of history and staff across America and the world, we offer an outsider perspective on US news"})]}),(0,o.jsx)("section",{css:W,children:(0,o.jsx)("p",{css:O,children:"Sign up for Guardian Headlines US edition"})}),(0,o.jsx)(k.z,{"data-link-name":"us-expandable-marketing-card cta-click",priority:"tertiary",size:"xsmall",href:"".concat(n,"/info/2015/dec/08/daily-email-us"),cssOverrides:G,children:"Newsletter sign up"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C,{type:"faded",styles:z}),(0,o.jsxs)("section",{css:T,children:[(0,o.jsxs)("div",{css:M,children:[(0,o.jsx)("h2",{children:a}),(0,o.jsx)("div",{css:H,children:(0,o.jsx)(v.o,{})})]}),(0,o.jsx)("div",{css:U,children:i})]})]})})]})},_=a(85918),N=a(24755),F={name:"167rbc3",styles:"left:-1200px;transition:all 2.5s linear"},V=(0,x.css)("position:sticky;top:0;z-index:",(0,N.f)("expandableMarketingCardOverlay"),";animation:slidein 2.4s linear;@keyframes slidein{from{translate:-1200px 0;}to{translate:0 0;}}"),Y={name:"1n0kzcr",styles:"position:absolute;width:100%"},X=function(e){var n=e.guardianBaseURL,a=e.heading,i=e.kicker,r=e.isExpanded,s=e.setIsExpanded,d=e.setIsClosed,l=e.abTestVariant,u=(0,c.useState)(null),p=(0,t.A)(u,2),f=p[0],h=p[1],b=(0,c.useState)(null),g=(0,t.A)(b,2),v=g[0],y=g[1],k=(0,c.useState)(!1),m=(0,t.A)(k,2),j=m[0],w=m[1],E=(0,c.useState)(!1),C=(0,t.A)(E,2),A=C[0],S=C[1],I=(0,c.useState)(null),T=(0,t.A)(I,2),M=T[0],U=T[1],H=(0,c.useState)(!1),D=(0,t.A)(H,2),W=D[0],L=D[1],B=(0,c.useState)(0),O=(0,t.A)(B,2),z=O[0],R=O[1];return(0,c.useEffect)((function(){U(document.querySelector('[data-gu-name="body"]'))}),[]),(0,c.useEffect)((function(){if(M){if(!function(e){return e.getBoundingClientRect().top<0}(M)){var e=new window.IntersectionObserver((function(e){var n=(0,t.A)(e,1)[0];n&&n.isIntersecting&&L(!0)}),{rootMargin:"0px 0px -100%"});return e.observe(M),function(){e.disconnect()}}L(!0)}}),[M]),(0,c.useEffect)((function(){W&&(0,_.V5)("Web").then((function(e){e.record({interaction:{component:"us-expandable-marketing-card",value:"us-expandable-marketing-card visible"}})}))}),[W]),(0,c.useEffect)((function(){r&&(0,_.u_)({component:{componentType:"CONTAINER",id:"us-expandable-marketing-card"},action:"EXPAND",abTest:{name:"UsaExpandableMarketingCard",variant:l}},"Web")}),[l,r]),(0,c.useEffect)((function(){A&&(0,_.u_)({component:{componentType:"CONTAINER",id:"us-expandable-marketing-card"},action:"CLOSE",abTest:{name:"UsaExpandableMarketingCard",variant:l}},"Web")}),[l,A]),W?r?(0,o.jsx)("div",{"data-component":"us-expandable-marketing-card",css:[V],children:(0,o.jsx)("div",{css:[Y],role:"button",tabIndex:0,onKeyDown:function(e){"Escape"===e.key&&d(!0)},children:(0,o.jsx)(P,{guardianBaseURL:n,heading:a,kicker:i,isExpanded:r,setIsClosed:d})})}):(0,o.jsx)("div",{"data-component":"us-expandable-marketing-card",css:[V],children:(0,o.jsx)("div",{css:[Y,j&&(0,x.css)("left:",z,"px;"),A&&F],role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&s(!0),"Escape"===e.key&&d(!0)},onPointerDown:function(e){e.preventDefault(),w(!0),h(e.clientX),y(e.clientY)},onPointerUp:function(e){var n,a;e.preventDefault(),w(!1),function(e,n){var a=(0,t.A)(e,2),i=a[0],r=a[1],s=(0,t.A)(n,2),o=s[0],d=s[1];return null!==o&&null!==d&&Math.abs(o-i)<5&&Math.abs(d-r)<5}([e.clientX,e.clientY],[f,v])?s(!0):(n=e.clientX,null!==(a=f)&&n+20<a&&S(!0))},onPointerMove:function(e){e.preventDefault(),j&&R(Math.min(0,e.clientX-(null!=f?f:0)))},onTouchStart:function(e){e.preventDefault()},children:(0,o.jsx)(P,{guardianBaseURL:n,heading:a,kicker:i,isExpanded:r,setIsExpanded:s,setIsClosed:d})})}):null},K=a(18644),q={heading:"Yes, this story is free",kicker:"Why the Guardian has no paywall"},Q={heading:"Pop your US news bubble",kicker:"How the Guardian is different"},J={heading:"No billionaire approved this",kicker:"How the Guardian is different"},Z=function(){var e=(0,i.A)(s().mark((function e(){var n,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.C)();case 2:if(e.t0=e.sent,"US"===e.t0){e.next=6;break}return e.abrupt("return",!1);case 6:return n=(0,d.R)({name:"GU_EDITION"}),a=!!n&&"US"!==n,void 0,void 0,void 0,void 0,s=null!==(r=(0,l.L3)())&&void 0!==r?r:[],c=void 0===(o=(0,t.A)(s,1)[0])?{}:o,i=0===Object.keys(c).length||c.count<=1,e.abrupt("return",!a&&i);case 10:case"end":return e.stop()}var r,s,o,c}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){var n,a=e.guardianBaseURL,i=(0,c.useState)(!1),r=(0,t.A)(i,2),s=r[0],d=r[1],l=(0,c.useState)(!1),u=(0,t.A)(l,2),x=u[0],f=u[1],h=(0,c.useState)(!1),b=(0,t.A)(h,2),g=b[0],v=b[1],y=function(e){if(!e)return null;var n=e.isUserInVariant("UsaExpandableMarketingCard","variant-free"),a=e.isUserInVariant("UsaExpandableMarketingCard","variant-bubble"),i=e.isUserInVariant("UsaExpandableMarketingCard","variant-billionaire");return n?"variant-free":a?"variant-bubble":i?"variant-billionaire":null}(null===(n=(0,p.H)())||void 0===n?void 0:n.api);if((0,c.useEffect)((function(){Z().then((function(e){e&&v(!0)}))}),[]),!y||!g||x)return null;var k,m="variant-free"===(k=y)?q:"variant-bubble"===k?Q:J,j=m.heading,w=m.kicker;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(K.L,{when:"below",breakpoint:"leftCol",children:(0,o.jsx)("div",{"data-component":"us-expandable-marketing-card",role:s?"none":"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||s||d(!0),"Escape"===e.key&&f(!0)},onClick:function(){!s&&d(!0)},children:(0,o.jsx)(P,{guardianBaseURL:a,heading:j,kicker:w,isExpanded:s,setIsClosed:f})})}),(0,o.jsx)(K.L,{when:"above",breakpoint:"leftCol",children:(0,o.jsx)(X,{guardianBaseURL:a,heading:j,kicker:w,isExpanded:s,setIsExpanded:d,setIsClosed:f,abTestVariant:y})})]})}},18644:(e,n,a)=>{a.d(n,{L:()=>s});var i=a(50484),t=a(24017),r=a(81477),s=function(e){var n,a=e.children,s=e.when,o=e.breakpoint,d=e.el;return n="below"===s?(0,t.css)(r.TG[o],"{display:none;}"):(0,t.css)(r.HT[o],"{display:none;}"),"li"===d?(0,i.jsx)("li",{css:n,children:a}):(0,i.jsx)("span",{css:n,children:a})}},45025:(e,n,a)=>{a.d(n,{Gq:()=>o,L3:()=>s,Q_:()=>d});var i=a(90760),t=a(296),r="gu.history.dailyArticleCount",s=function(){try{var e=t.I.local.get(r);if(n=e,!Array.isArray(n)||!n.every((function(e){return(0,i.G)(e)&&"day"in e&&"count"in e&&"number"==typeof e.day&&"number"==typeof e.count})))throw new Error("Invalid gu.history.dailyArticleCount value");return e}catch(e){return void t.I.local.remove(r)}var n},o=function(){return Math.floor(Date.now()/864e5)},d=function(){var e,n,a=null!==(e=s())&&void 0!==e?e:[],i=o();if((null===(n=a[0])||void 0===n?void 0:n.day)===i)a[0].count+=1;else{a.unshift({day:i,count:1});var d=i-60,c=a.findIndex((function(e){return e.day&&e.day<d}));c>0&&a.splice(c)}t.I.local.set(r,a)}},24755:(e,n,a)=>{a.d(n,{f:()=>t});var i=["lightbox","youTubeFullscreen","sticky-video-button","sticky-video","banner","dropdown","burger","mastheadVeggieBurgerExpandedMobile","expanded-veggie-menu-wrapper","expanded-veggie-menu","fullPageInteractiveHeaderWrapper","mobileSticky","stickyAdWrapperLabsHeader","stickyAdWrapper","stickyAdWrapperNav","mastheadMyAccountDropdown","mastheadEditionDropdown","editionDropdown","summaryDetails","toast","onwardsCarousel","myAccountDropdown","searchHeaderLink","TheGuardian","editionSwitcherBanner","expandableMarketingCardOverlay","tableOfContents","articleHeadline","immersiveBlackBox","bodyArea","rightColumnArea","mainMedia","card-nested-link","card-link"],t=function(e){var n=i.indexOf(e);return-1===n?-1:i.length-n}},66049:(e,n,a)=>{a.d(n,{H:()=>o,z:()=>d});var i=a(29273),t=a(53994),r=new Promise((function(){})),s="ab-tests",o=function(){return(0,t.A)(s,(function(){return r})).data},d=function(e){var n=e.api,a=e.participations;(0,i.Tk)(s,{api:n,participations:a},!1)}},1954:(e,n,a)=>{a.d(n,{M:()=>i});var i=function(e){return"var(".concat(e,")")}}}]);
//# sourceMappingURL=ExpandableMarketingCardWrapper-importable.client.web.legacy.558767d39053a3b0d96a.js.map